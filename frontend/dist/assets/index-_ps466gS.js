function Eh(e,n){for(var t=0;t<n.length;t++){const s=n[t];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(s,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function t(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(a){if(a.ep)return;a.ep=!0;const i=t(a);fetch(a.href,i)}})();function af(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Ah(e){if(e.__esModule)return e;var n=e.default;if(typeof n=="function"){var t=function s(){return this instanceof s?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};t.prototype=n.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(e).forEach(function(s){var a=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(t,s,a.get?a:{enumerable:!0,get:function(){return e[s]}})}),t}var lf={exports:{}},Zi={},of={exports:{}},nt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ia=Symbol.for("react.element"),Dh=Symbol.for("react.portal"),Ih=Symbol.for("react.fragment"),Ph=Symbol.for("react.strict_mode"),Th=Symbol.for("react.profiler"),Mh=Symbol.for("react.provider"),Oh=Symbol.for("react.context"),$h=Symbol.for("react.forward_ref"),Lh=Symbol.for("react.suspense"),Fh=Symbol.for("react.memo"),Rh=Symbol.for("react.lazy"),jd=Symbol.iterator;function zh(e){return e===null||typeof e!="object"?null:(e=jd&&e[jd]||e["@@iterator"],typeof e=="function"?e:null)}var cf={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},df=Object.assign,uf={};function Ts(e,n,t){this.props=e,this.context=n,this.refs=uf,this.updater=t||cf}Ts.prototype.isReactComponent={};Ts.prototype.setState=function(e,n){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,n,"setState")};Ts.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function ff(){}ff.prototype=Ts.prototype;function nc(e,n,t){this.props=e,this.context=n,this.refs=uf,this.updater=t||cf}var rc=nc.prototype=new ff;rc.constructor=nc;df(rc,Ts.prototype);rc.isPureReactComponent=!0;var _d=Array.isArray,mf=Object.prototype.hasOwnProperty,sc={current:null},pf={key:!0,ref:!0,__self:!0,__source:!0};function hf(e,n,t){var s,a={},i=null,l=null;if(n!=null)for(s in n.ref!==void 0&&(l=n.ref),n.key!==void 0&&(i=""+n.key),n)mf.call(n,s)&&!pf.hasOwnProperty(s)&&(a[s]=n[s]);var u=arguments.length-2;if(u===1)a.children=t;else if(1<u){for(var d=Array(u),x=0;x<u;x++)d[x]=arguments[x+2];a.children=d}if(e&&e.defaultProps)for(s in u=e.defaultProps,u)a[s]===void 0&&(a[s]=u[s]);return{$$typeof:Ia,type:e,key:i,ref:l,props:a,_owner:sc.current}}function Uh(e,n){return{$$typeof:Ia,type:e.type,key:n,ref:e.ref,props:e.props,_owner:e._owner}}function ac(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ia}function Vh(e){var n={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(t){return n[t]})}var Nd=/\/+/g;function jl(e,n){return typeof e=="object"&&e!==null&&e.key!=null?Vh(""+e.key):n.toString(36)}function oi(e,n,t,s,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(i){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case Ia:case Dh:l=!0}}if(l)return l=e,a=a(l),e=s===""?"."+jl(l,0):s,_d(a)?(t="",e!=null&&(t=e.replace(Nd,"$&/")+"/"),oi(a,n,t,"",function(x){return x})):a!=null&&(ac(a)&&(a=Uh(a,t+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(Nd,"$&/")+"/")+e)),n.push(a)),1;if(l=0,s=s===""?".":s+":",_d(e))for(var u=0;u<e.length;u++){i=e[u];var d=s+jl(i,u);l+=oi(i,n,t,d,a)}else if(d=zh(e),typeof d=="function")for(e=d.call(e),u=0;!(i=e.next()).done;)i=i.value,d=s+jl(i,u++),l+=oi(i,n,t,d,a);else if(i==="object")throw n=String(e),Error("Objects are not valid as a React child (found: "+(n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n)+"). If you meant to render a collection of children, use an array instead.");return l}function Fa(e,n,t){if(e==null)return e;var s=[],a=0;return oi(e,s,"","",function(i){return n.call(t,i,a++)}),s}function Wh(e){if(e._status===-1){var n=e._result;n=n(),n.then(function(t){(e._status===0||e._status===-1)&&(e._status=1,e._result=t)},function(t){(e._status===0||e._status===-1)&&(e._status=2,e._result=t)}),e._status===-1&&(e._status=0,e._result=n)}if(e._status===1)return e._result.default;throw e._result}var on={current:null},ci={transition:null},Hh={ReactCurrentDispatcher:on,ReactCurrentBatchConfig:ci,ReactCurrentOwner:sc};function gf(){throw Error("act(...) is not supported in production builds of React.")}nt.Children={map:Fa,forEach:function(e,n,t){Fa(e,function(){n.apply(this,arguments)},t)},count:function(e){var n=0;return Fa(e,function(){n++}),n},toArray:function(e){return Fa(e,function(n){return n})||[]},only:function(e){if(!ac(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};nt.Component=Ts;nt.Fragment=Ih;nt.Profiler=Th;nt.PureComponent=nc;nt.StrictMode=Ph;nt.Suspense=Lh;nt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Hh;nt.act=gf;nt.cloneElement=function(e,n,t){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=df({},e.props),a=e.key,i=e.ref,l=e._owner;if(n!=null){if(n.ref!==void 0&&(i=n.ref,l=sc.current),n.key!==void 0&&(a=""+n.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(d in n)mf.call(n,d)&&!pf.hasOwnProperty(d)&&(s[d]=n[d]===void 0&&u!==void 0?u[d]:n[d])}var d=arguments.length-2;if(d===1)s.children=t;else if(1<d){u=Array(d);for(var x=0;x<d;x++)u[x]=arguments[x+2];s.children=u}return{$$typeof:Ia,type:e.type,key:a,ref:i,props:s,_owner:l}};nt.createContext=function(e){return e={$$typeof:Oh,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Mh,_context:e},e.Consumer=e};nt.createElement=hf;nt.createFactory=function(e){var n=hf.bind(null,e);return n.type=e,n};nt.createRef=function(){return{current:null}};nt.forwardRef=function(e){return{$$typeof:$h,render:e}};nt.isValidElement=ac;nt.lazy=function(e){return{$$typeof:Rh,_payload:{_status:-1,_result:e},_init:Wh}};nt.memo=function(e,n){return{$$typeof:Fh,type:e,compare:n===void 0?null:n}};nt.startTransition=function(e){var n=ci.transition;ci.transition={};try{e()}finally{ci.transition=n}};nt.unstable_act=gf;nt.useCallback=function(e,n){return on.current.useCallback(e,n)};nt.useContext=function(e){return on.current.useContext(e)};nt.useDebugValue=function(){};nt.useDeferredValue=function(e){return on.current.useDeferredValue(e)};nt.useEffect=function(e,n){return on.current.useEffect(e,n)};nt.useId=function(){return on.current.useId()};nt.useImperativeHandle=function(e,n,t){return on.current.useImperativeHandle(e,n,t)};nt.useInsertionEffect=function(e,n){return on.current.useInsertionEffect(e,n)};nt.useLayoutEffect=function(e,n){return on.current.useLayoutEffect(e,n)};nt.useMemo=function(e,n){return on.current.useMemo(e,n)};nt.useReducer=function(e,n,t){return on.current.useReducer(e,n,t)};nt.useRef=function(e){return on.current.useRef(e)};nt.useState=function(e){return on.current.useState(e)};nt.useSyncExternalStore=function(e,n,t){return on.current.useSyncExternalStore(e,n,t)};nt.useTransition=function(){return on.current.useTransition()};nt.version="18.3.1";of.exports=nt;var o=of.exports;const vf=af(o),Bh=Eh({__proto__:null,default:vf},[o]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kh=o,Yh=Symbol.for("react.element"),qh=Symbol.for("react.fragment"),Qh=Object.prototype.hasOwnProperty,Jh=Kh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Gh={key:!0,ref:!0,__self:!0,__source:!0};function yf(e,n,t){var s,a={},i=null,l=null;t!==void 0&&(i=""+t),n.key!==void 0&&(i=""+n.key),n.ref!==void 0&&(l=n.ref);for(s in n)Qh.call(n,s)&&!Gh.hasOwnProperty(s)&&(a[s]=n[s]);if(e&&e.defaultProps)for(s in n=e.defaultProps,n)a[s]===void 0&&(a[s]=n[s]);return{$$typeof:Yh,type:e,key:i,ref:l,props:a,_owner:Jh.current}}Zi.Fragment=qh;Zi.jsx=yf;Zi.jsxs=yf;lf.exports=Zi;var r=lf.exports,no={},xf={exports:{}},Nn={},jf={exports:{}},_f={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function n(ue,ge){var fe=ue.length;ue.push(ge);e:for(;0<fe;){var Y=fe-1>>>1,Z=ue[Y];if(0<a(Z,ge))ue[Y]=ge,ue[fe]=Z,fe=Y;else break e}}function t(ue){return ue.length===0?null:ue[0]}function s(ue){if(ue.length===0)return null;var ge=ue[0],fe=ue.pop();if(fe!==ge){ue[0]=fe;e:for(var Y=0,Z=ue.length,ne=Z>>>1;Y<ne;){var oe=2*(Y+1)-1,pe=ue[oe],Ae=oe+1,_e=ue[Ae];if(0>a(pe,fe))Ae<Z&&0>a(_e,pe)?(ue[Y]=_e,ue[Ae]=fe,Y=Ae):(ue[Y]=pe,ue[oe]=fe,Y=oe);else if(Ae<Z&&0>a(_e,fe))ue[Y]=_e,ue[Ae]=fe,Y=Ae;else break e}}return ge}function a(ue,ge){var fe=ue.sortIndex-ge.sortIndex;return fe!==0?fe:ue.id-ge.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var l=Date,u=l.now();e.unstable_now=function(){return l.now()-u}}var d=[],x=[],_=1,C=null,N=3,F=!1,v=!1,b=!1,E=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(ue){for(var ge=t(x);ge!==null;){if(ge.callback===null)s(x);else if(ge.startTime<=ue)s(x),ge.sortIndex=ge.expirationTime,n(d,ge);else break;ge=t(x)}}function j(ue){if(b=!1,y(ue),!v)if(t(d)!==null)v=!0,he(O);else{var ge=t(x);ge!==null&&we(j,ge.startTime-ue)}}function O(ue,ge){v=!1,b&&(b=!1,p(M),M=-1),F=!0;var fe=N;try{for(y(ge),C=t(d);C!==null&&(!(C.expirationTime>ge)||ue&&!R());){var Y=C.callback;if(typeof Y=="function"){C.callback=null,N=C.priorityLevel;var Z=Y(C.expirationTime<=ge);ge=e.unstable_now(),typeof Z=="function"?C.callback=Z:C===t(d)&&s(d),y(ge)}else s(d);C=t(d)}if(C!==null)var ne=!0;else{var oe=t(x);oe!==null&&we(j,oe.startTime-ge),ne=!1}return ne}finally{C=null,N=fe,F=!1}}var k=!1,I=null,M=-1,X=5,se=-1;function R(){return!(e.unstable_now()-se<X)}function ae(){if(I!==null){var ue=e.unstable_now();se=ue;var ge=!0;try{ge=I(!0,ue)}finally{ge?de():(k=!1,I=null)}}else k=!1}var de;if(typeof m=="function")de=function(){m(ae)};else if(typeof MessageChannel<"u"){var Ne=new MessageChannel,me=Ne.port2;Ne.port1.onmessage=ae,de=function(){me.postMessage(null)}}else de=function(){E(ae,0)};function he(ue){I=ue,k||(k=!0,de())}function we(ue,ge){M=E(function(){ue(e.unstable_now())},ge)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ue){ue.callback=null},e.unstable_continueExecution=function(){v||F||(v=!0,he(O))},e.unstable_forceFrameRate=function(ue){0>ue||125<ue?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):X=0<ue?Math.floor(1e3/ue):5},e.unstable_getCurrentPriorityLevel=function(){return N},e.unstable_getFirstCallbackNode=function(){return t(d)},e.unstable_next=function(ue){switch(N){case 1:case 2:case 3:var ge=3;break;default:ge=N}var fe=N;N=ge;try{return ue()}finally{N=fe}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(ue,ge){switch(ue){case 1:case 2:case 3:case 4:case 5:break;default:ue=3}var fe=N;N=ue;try{return ge()}finally{N=fe}},e.unstable_scheduleCallback=function(ue,ge,fe){var Y=e.unstable_now();switch(typeof fe=="object"&&fe!==null?(fe=fe.delay,fe=typeof fe=="number"&&0<fe?Y+fe:Y):fe=Y,ue){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=fe+Z,ue={id:_++,callback:ge,priorityLevel:ue,startTime:fe,expirationTime:Z,sortIndex:-1},fe>Y?(ue.sortIndex=fe,n(x,ue),t(d)===null&&ue===t(x)&&(b?(p(M),M=-1):b=!0,we(j,fe-Y))):(ue.sortIndex=Z,n(d,ue),v||F||(v=!0,he(O))),ue},e.unstable_shouldYield=R,e.unstable_wrapCallback=function(ue){var ge=N;return function(){var fe=N;N=ge;try{return ue.apply(this,arguments)}finally{N=fe}}}})(_f);jf.exports=_f;var Xh=jf.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zh=o,_n=Xh;function je(e){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+e,t=1;t<arguments.length;t++)n+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Nf=new Set,oa={};function Xr(e,n){Cs(e,n),Cs(e+"Capture",n)}function Cs(e,n){for(oa[e]=n,e=0;e<n.length;e++)Nf.add(n[e])}var ar=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ro=Object.prototype.hasOwnProperty,eg=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,bd={},Sd={};function tg(e){return ro.call(Sd,e)?!0:ro.call(bd,e)?!1:eg.test(e)?Sd[e]=!0:(bd[e]=!0,!1)}function ng(e,n,t,s){if(t!==null&&t.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return s?!1:t!==null?!t.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function rg(e,n,t,s){if(n===null||typeof n>"u"||ng(e,n,t,s))return!0;if(s)return!1;if(t!==null)switch(t.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function cn(e,n,t,s,a,i,l){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=s,this.attributeNamespace=a,this.mustUseProperty=t,this.propertyName=e,this.type=n,this.sanitizeURL=i,this.removeEmptyString=l}var Qt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Qt[e]=new cn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var n=e[0];Qt[n]=new cn(n,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Qt[e]=new cn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Qt[e]=new cn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Qt[e]=new cn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Qt[e]=new cn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Qt[e]=new cn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Qt[e]=new cn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Qt[e]=new cn(e,5,!1,e.toLowerCase(),null,!1,!1)});var ic=/[\-:]([a-z])/g;function lc(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var n=e.replace(ic,lc);Qt[n]=new cn(n,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var n=e.replace(ic,lc);Qt[n]=new cn(n,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var n=e.replace(ic,lc);Qt[n]=new cn(n,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Qt[e]=new cn(e,1,!1,e.toLowerCase(),null,!1,!1)});Qt.xlinkHref=new cn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Qt[e]=new cn(e,1,!1,e.toLowerCase(),null,!0,!0)});function oc(e,n,t,s){var a=Qt.hasOwnProperty(n)?Qt[n]:null;(a!==null?a.type!==0:s||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(rg(n,t,a,s)&&(t=null),s||a===null?tg(n)&&(t===null?e.removeAttribute(n):e.setAttribute(n,""+t)):a.mustUseProperty?e[a.propertyName]=t===null?a.type===3?!1:"":t:(n=a.attributeName,s=a.attributeNamespace,t===null?e.removeAttribute(n):(a=a.type,t=a===3||a===4&&t===!0?"":""+t,s?e.setAttributeNS(s,n,t):e.setAttribute(n,t))))}var dr=Zh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ra=Symbol.for("react.element"),as=Symbol.for("react.portal"),is=Symbol.for("react.fragment"),cc=Symbol.for("react.strict_mode"),so=Symbol.for("react.profiler"),bf=Symbol.for("react.provider"),Sf=Symbol.for("react.context"),dc=Symbol.for("react.forward_ref"),ao=Symbol.for("react.suspense"),io=Symbol.for("react.suspense_list"),uc=Symbol.for("react.memo"),pr=Symbol.for("react.lazy"),Cf=Symbol.for("react.offscreen"),Cd=Symbol.iterator;function Fs(e){return e===null||typeof e!="object"?null:(e=Cd&&e[Cd]||e["@@iterator"],typeof e=="function"?e:null)}var wt=Object.assign,_l;function qs(e){if(_l===void 0)try{throw Error()}catch(t){var n=t.stack.trim().match(/\n( *(at )?)/);_l=n&&n[1]||""}return`
`+_l+e}var Nl=!1;function bl(e,n){if(!e||Nl)return"";Nl=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(x){var s=x}Reflect.construct(e,[],n)}else{try{n.call()}catch(x){s=x}e.call(n.prototype)}else{try{throw Error()}catch(x){s=x}e()}}catch(x){if(x&&s&&typeof x.stack=="string"){for(var a=x.stack.split(`
`),i=s.stack.split(`
`),l=a.length-1,u=i.length-1;1<=l&&0<=u&&a[l]!==i[u];)u--;for(;1<=l&&0<=u;l--,u--)if(a[l]!==i[u]){if(l!==1||u!==1)do if(l--,u--,0>u||a[l]!==i[u]){var d=`
`+a[l].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=l&&0<=u);break}}}finally{Nl=!1,Error.prepareStackTrace=t}return(e=e?e.displayName||e.name:"")?qs(e):""}function sg(e){switch(e.tag){case 5:return qs(e.type);case 16:return qs("Lazy");case 13:return qs("Suspense");case 19:return qs("SuspenseList");case 0:case 2:case 15:return e=bl(e.type,!1),e;case 11:return e=bl(e.type.render,!1),e;case 1:return e=bl(e.type,!0),e;default:return""}}function lo(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case is:return"Fragment";case as:return"Portal";case so:return"Profiler";case cc:return"StrictMode";case ao:return"Suspense";case io:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Sf:return(e.displayName||"Context")+".Consumer";case bf:return(e._context.displayName||"Context")+".Provider";case dc:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case uc:return n=e.displayName||null,n!==null?n:lo(e.type)||"Memo";case pr:n=e._payload,e=e._init;try{return lo(e(n))}catch{}}return null}function ag(e){var n=e.type;switch(e.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=n.render,e=e.displayName||e.name||"",n.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return lo(n);case 8:return n===cc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function Dr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function wf(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function ig(e){var n=wf(e)?"checked":"value",t=Object.getOwnPropertyDescriptor(e.constructor.prototype,n),s=""+e[n];if(!e.hasOwnProperty(n)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var a=t.get,i=t.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return a.call(this)},set:function(l){s=""+l,i.call(this,l)}}),Object.defineProperty(e,n,{enumerable:t.enumerable}),{getValue:function(){return s},setValue:function(l){s=""+l},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function za(e){e._valueTracker||(e._valueTracker=ig(e))}function kf(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var t=n.getValue(),s="";return e&&(s=wf(e)?e.checked?"true":"false":e.value),e=s,e!==t?(n.setValue(e),!0):!1}function _i(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function oo(e,n){var t=n.checked;return wt({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??e._wrapperState.initialChecked})}function wd(e,n){var t=n.defaultValue==null?"":n.defaultValue,s=n.checked!=null?n.checked:n.defaultChecked;t=Dr(n.value!=null?n.value:t),e._wrapperState={initialChecked:s,initialValue:t,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function Ef(e,n){n=n.checked,n!=null&&oc(e,"checked",n,!1)}function co(e,n){Ef(e,n);var t=Dr(n.value),s=n.type;if(t!=null)s==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+t):e.value!==""+t&&(e.value=""+t);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}n.hasOwnProperty("value")?uo(e,n.type,t):n.hasOwnProperty("defaultValue")&&uo(e,n.type,Dr(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(e.defaultChecked=!!n.defaultChecked)}function kd(e,n,t){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var s=n.type;if(!(s!=="submit"&&s!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+e._wrapperState.initialValue,t||n===e.value||(e.value=n),e.defaultValue=n}t=e.name,t!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,t!==""&&(e.name=t)}function uo(e,n,t){(n!=="number"||_i(e.ownerDocument)!==e)&&(t==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+t&&(e.defaultValue=""+t))}var Qs=Array.isArray;function vs(e,n,t,s){if(e=e.options,n){n={};for(var a=0;a<t.length;a++)n["$"+t[a]]=!0;for(t=0;t<e.length;t++)a=n.hasOwnProperty("$"+e[t].value),e[t].selected!==a&&(e[t].selected=a),a&&s&&(e[t].defaultSelected=!0)}else{for(t=""+Dr(t),n=null,a=0;a<e.length;a++){if(e[a].value===t){e[a].selected=!0,s&&(e[a].defaultSelected=!0);return}n!==null||e[a].disabled||(n=e[a])}n!==null&&(n.selected=!0)}}function fo(e,n){if(n.dangerouslySetInnerHTML!=null)throw Error(je(91));return wt({},n,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ed(e,n){var t=n.value;if(t==null){if(t=n.children,n=n.defaultValue,t!=null){if(n!=null)throw Error(je(92));if(Qs(t)){if(1<t.length)throw Error(je(93));t=t[0]}n=t}n==null&&(n=""),t=n}e._wrapperState={initialValue:Dr(t)}}function Af(e,n){var t=Dr(n.value),s=Dr(n.defaultValue);t!=null&&(t=""+t,t!==e.value&&(e.value=t),n.defaultValue==null&&e.defaultValue!==t&&(e.defaultValue=t)),s!=null&&(e.defaultValue=""+s)}function Ad(e){var n=e.textContent;n===e._wrapperState.initialValue&&n!==""&&n!==null&&(e.value=n)}function Df(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function mo(e,n){return e==null||e==="http://www.w3.org/1999/xhtml"?Df(n):e==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ua,If=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(n,t,s,a){MSApp.execUnsafeLocalFunction(function(){return e(n,t,s,a)})}:e}(function(e,n){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=n;else{for(Ua=Ua||document.createElement("div"),Ua.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=Ua.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;n.firstChild;)e.appendChild(n.firstChild)}});function ca(e,n){if(n){var t=e.firstChild;if(t&&t===e.lastChild&&t.nodeType===3){t.nodeValue=n;return}}e.textContent=n}var Xs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},lg=["Webkit","ms","Moz","O"];Object.keys(Xs).forEach(function(e){lg.forEach(function(n){n=n+e.charAt(0).toUpperCase()+e.substring(1),Xs[n]=Xs[e]})});function Pf(e,n,t){return n==null||typeof n=="boolean"||n===""?"":t||typeof n!="number"||n===0||Xs.hasOwnProperty(e)&&Xs[e]?(""+n).trim():n+"px"}function Tf(e,n){e=e.style;for(var t in n)if(n.hasOwnProperty(t)){var s=t.indexOf("--")===0,a=Pf(t,n[t],s);t==="float"&&(t="cssFloat"),s?e.setProperty(t,a):e[t]=a}}var og=wt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function po(e,n){if(n){if(og[e]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(je(137,e));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(je(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error(je(61))}if(n.style!=null&&typeof n.style!="object")throw Error(je(62))}}function ho(e,n){if(e.indexOf("-")===-1)return typeof n.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var go=null;function fc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var vo=null,ys=null,xs=null;function Dd(e){if(e=Ma(e)){if(typeof vo!="function")throw Error(je(280));var n=e.stateNode;n&&(n=sl(n),vo(e.stateNode,e.type,n))}}function Mf(e){ys?xs?xs.push(e):xs=[e]:ys=e}function Of(){if(ys){var e=ys,n=xs;if(xs=ys=null,Dd(e),n)for(e=0;e<n.length;e++)Dd(n[e])}}function $f(e,n){return e(n)}function Lf(){}var Sl=!1;function Ff(e,n,t){if(Sl)return e(n,t);Sl=!0;try{return $f(e,n,t)}finally{Sl=!1,(ys!==null||xs!==null)&&(Lf(),Of())}}function da(e,n){var t=e.stateNode;if(t===null)return null;var s=sl(t);if(s===null)return null;t=s[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(t&&typeof t!="function")throw Error(je(231,n,typeof t));return t}var yo=!1;if(ar)try{var Rs={};Object.defineProperty(Rs,"passive",{get:function(){yo=!0}}),window.addEventListener("test",Rs,Rs),window.removeEventListener("test",Rs,Rs)}catch{yo=!1}function cg(e,n,t,s,a,i,l,u,d){var x=Array.prototype.slice.call(arguments,3);try{n.apply(t,x)}catch(_){this.onError(_)}}var Zs=!1,Ni=null,bi=!1,xo=null,dg={onError:function(e){Zs=!0,Ni=e}};function ug(e,n,t,s,a,i,l,u,d){Zs=!1,Ni=null,cg.apply(dg,arguments)}function fg(e,n,t,s,a,i,l,u,d){if(ug.apply(this,arguments),Zs){if(Zs){var x=Ni;Zs=!1,Ni=null}else throw Error(je(198));bi||(bi=!0,xo=x)}}function Zr(e){var n=e,t=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,n.flags&4098&&(t=n.return),e=n.return;while(e)}return n.tag===3?t:null}function Rf(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function Id(e){if(Zr(e)!==e)throw Error(je(188))}function mg(e){var n=e.alternate;if(!n){if(n=Zr(e),n===null)throw Error(je(188));return n!==e?null:e}for(var t=e,s=n;;){var a=t.return;if(a===null)break;var i=a.alternate;if(i===null){if(s=a.return,s!==null){t=s;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===t)return Id(a),e;if(i===s)return Id(a),n;i=i.sibling}throw Error(je(188))}if(t.return!==s.return)t=a,s=i;else{for(var l=!1,u=a.child;u;){if(u===t){l=!0,t=a,s=i;break}if(u===s){l=!0,s=a,t=i;break}u=u.sibling}if(!l){for(u=i.child;u;){if(u===t){l=!0,t=i,s=a;break}if(u===s){l=!0,s=i,t=a;break}u=u.sibling}if(!l)throw Error(je(189))}}if(t.alternate!==s)throw Error(je(190))}if(t.tag!==3)throw Error(je(188));return t.stateNode.current===t?e:n}function zf(e){return e=mg(e),e!==null?Uf(e):null}function Uf(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var n=Uf(e);if(n!==null)return n;e=e.sibling}return null}var Vf=_n.unstable_scheduleCallback,Pd=_n.unstable_cancelCallback,pg=_n.unstable_shouldYield,hg=_n.unstable_requestPaint,Ot=_n.unstable_now,gg=_n.unstable_getCurrentPriorityLevel,mc=_n.unstable_ImmediatePriority,Wf=_n.unstable_UserBlockingPriority,Si=_n.unstable_NormalPriority,vg=_n.unstable_LowPriority,Hf=_n.unstable_IdlePriority,el=null,Qn=null;function yg(e){if(Qn&&typeof Qn.onCommitFiberRoot=="function")try{Qn.onCommitFiberRoot(el,e,void 0,(e.current.flags&128)===128)}catch{}}var Fn=Math.clz32?Math.clz32:_g,xg=Math.log,jg=Math.LN2;function _g(e){return e>>>=0,e===0?32:31-(xg(e)/jg|0)|0}var Va=64,Wa=4194304;function Js(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ci(e,n){var t=e.pendingLanes;if(t===0)return 0;var s=0,a=e.suspendedLanes,i=e.pingedLanes,l=t&268435455;if(l!==0){var u=l&~a;u!==0?s=Js(u):(i&=l,i!==0&&(s=Js(i)))}else l=t&~a,l!==0?s=Js(l):i!==0&&(s=Js(i));if(s===0)return 0;if(n!==0&&n!==s&&!(n&a)&&(a=s&-s,i=n&-n,a>=i||a===16&&(i&4194240)!==0))return n;if(s&4&&(s|=t&16),n=e.entangledLanes,n!==0)for(e=e.entanglements,n&=s;0<n;)t=31-Fn(n),a=1<<t,s|=e[t],n&=~a;return s}function Ng(e,n){switch(e){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bg(e,n){for(var t=e.suspendedLanes,s=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var l=31-Fn(i),u=1<<l,d=a[l];d===-1?(!(u&t)||u&s)&&(a[l]=Ng(u,n)):d<=n&&(e.expiredLanes|=u),i&=~u}}function jo(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Bf(){var e=Va;return Va<<=1,!(Va&4194240)&&(Va=64),e}function Cl(e){for(var n=[],t=0;31>t;t++)n.push(e);return n}function Pa(e,n,t){e.pendingLanes|=n,n!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,n=31-Fn(n),e[n]=t}function Sg(e,n){var t=e.pendingLanes&~n;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=n,e.mutableReadLanes&=n,e.entangledLanes&=n,n=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<t;){var a=31-Fn(t),i=1<<a;n[a]=0,s[a]=-1,e[a]=-1,t&=~i}}function pc(e,n){var t=e.entangledLanes|=n;for(e=e.entanglements;t;){var s=31-Fn(t),a=1<<s;a&n|e[s]&n&&(e[s]|=n),t&=~a}}var pt=0;function Kf(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Yf,hc,qf,Qf,Jf,_o=!1,Ha=[],_r=null,Nr=null,br=null,ua=new Map,fa=new Map,gr=[],Cg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Td(e,n){switch(e){case"focusin":case"focusout":_r=null;break;case"dragenter":case"dragleave":Nr=null;break;case"mouseover":case"mouseout":br=null;break;case"pointerover":case"pointerout":ua.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":fa.delete(n.pointerId)}}function zs(e,n,t,s,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:n,domEventName:t,eventSystemFlags:s,nativeEvent:i,targetContainers:[a]},n!==null&&(n=Ma(n),n!==null&&hc(n)),e):(e.eventSystemFlags|=s,n=e.targetContainers,a!==null&&n.indexOf(a)===-1&&n.push(a),e)}function wg(e,n,t,s,a){switch(n){case"focusin":return _r=zs(_r,e,n,t,s,a),!0;case"dragenter":return Nr=zs(Nr,e,n,t,s,a),!0;case"mouseover":return br=zs(br,e,n,t,s,a),!0;case"pointerover":var i=a.pointerId;return ua.set(i,zs(ua.get(i)||null,e,n,t,s,a)),!0;case"gotpointercapture":return i=a.pointerId,fa.set(i,zs(fa.get(i)||null,e,n,t,s,a)),!0}return!1}function Gf(e){var n=zr(e.target);if(n!==null){var t=Zr(n);if(t!==null){if(n=t.tag,n===13){if(n=Rf(t),n!==null){e.blockedOn=n,Jf(e.priority,function(){qf(t)});return}}else if(n===3&&t.stateNode.current.memoizedState.isDehydrated){e.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}e.blockedOn=null}function di(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var t=No(e.domEventName,e.eventSystemFlags,n[0],e.nativeEvent);if(t===null){t=e.nativeEvent;var s=new t.constructor(t.type,t);go=s,t.target.dispatchEvent(s),go=null}else return n=Ma(t),n!==null&&hc(n),e.blockedOn=t,!1;n.shift()}return!0}function Md(e,n,t){di(e)&&t.delete(n)}function kg(){_o=!1,_r!==null&&di(_r)&&(_r=null),Nr!==null&&di(Nr)&&(Nr=null),br!==null&&di(br)&&(br=null),ua.forEach(Md),fa.forEach(Md)}function Us(e,n){e.blockedOn===n&&(e.blockedOn=null,_o||(_o=!0,_n.unstable_scheduleCallback(_n.unstable_NormalPriority,kg)))}function ma(e){function n(a){return Us(a,e)}if(0<Ha.length){Us(Ha[0],e);for(var t=1;t<Ha.length;t++){var s=Ha[t];s.blockedOn===e&&(s.blockedOn=null)}}for(_r!==null&&Us(_r,e),Nr!==null&&Us(Nr,e),br!==null&&Us(br,e),ua.forEach(n),fa.forEach(n),t=0;t<gr.length;t++)s=gr[t],s.blockedOn===e&&(s.blockedOn=null);for(;0<gr.length&&(t=gr[0],t.blockedOn===null);)Gf(t),t.blockedOn===null&&gr.shift()}var js=dr.ReactCurrentBatchConfig,wi=!0;function Eg(e,n,t,s){var a=pt,i=js.transition;js.transition=null;try{pt=1,gc(e,n,t,s)}finally{pt=a,js.transition=i}}function Ag(e,n,t,s){var a=pt,i=js.transition;js.transition=null;try{pt=4,gc(e,n,t,s)}finally{pt=a,js.transition=i}}function gc(e,n,t,s){if(wi){var a=No(e,n,t,s);if(a===null)Ol(e,n,s,ki,t),Td(e,s);else if(wg(a,e,n,t,s))s.stopPropagation();else if(Td(e,s),n&4&&-1<Cg.indexOf(e)){for(;a!==null;){var i=Ma(a);if(i!==null&&Yf(i),i=No(e,n,t,s),i===null&&Ol(e,n,s,ki,t),i===a)break;a=i}a!==null&&s.stopPropagation()}else Ol(e,n,s,null,t)}}var ki=null;function No(e,n,t,s){if(ki=null,e=fc(s),e=zr(e),e!==null)if(n=Zr(e),n===null)e=null;else if(t=n.tag,t===13){if(e=Rf(n),e!==null)return e;e=null}else if(t===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null);return ki=e,null}function Xf(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(gg()){case mc:return 1;case Wf:return 4;case Si:case vg:return 16;case Hf:return 536870912;default:return 16}default:return 16}}var yr=null,vc=null,ui=null;function Zf(){if(ui)return ui;var e,n=vc,t=n.length,s,a="value"in yr?yr.value:yr.textContent,i=a.length;for(e=0;e<t&&n[e]===a[e];e++);var l=t-e;for(s=1;s<=l&&n[t-s]===a[i-s];s++);return ui=a.slice(e,1<s?1-s:void 0)}function fi(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function Ba(){return!0}function Od(){return!1}function bn(e){function n(t,s,a,i,l){this._reactName=t,this._targetInst=a,this.type=s,this.nativeEvent=i,this.target=l,this.currentTarget=null;for(var u in e)e.hasOwnProperty(u)&&(t=e[u],this[u]=t?t(i):i[u]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ba:Od,this.isPropagationStopped=Od,this}return wt(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=Ba)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=Ba)},persist:function(){},isPersistent:Ba}),n}var Ms={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},yc=bn(Ms),Ta=wt({},Ms,{view:0,detail:0}),Dg=bn(Ta),wl,kl,Vs,tl=wt({},Ta,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Vs&&(Vs&&e.type==="mousemove"?(wl=e.screenX-Vs.screenX,kl=e.screenY-Vs.screenY):kl=wl=0,Vs=e),wl)},movementY:function(e){return"movementY"in e?e.movementY:kl}}),$d=bn(tl),Ig=wt({},tl,{dataTransfer:0}),Pg=bn(Ig),Tg=wt({},Ta,{relatedTarget:0}),El=bn(Tg),Mg=wt({},Ms,{animationName:0,elapsedTime:0,pseudoElement:0}),Og=bn(Mg),$g=wt({},Ms,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Lg=bn($g),Fg=wt({},Ms,{data:0}),Ld=bn(Fg),Rg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ug={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Vg(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=Ug[e])?!!n[e]:!1}function xc(){return Vg}var Wg=wt({},Ta,{key:function(e){if(e.key){var n=Rg[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=fi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?zg[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xc,charCode:function(e){return e.type==="keypress"?fi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?fi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Hg=bn(Wg),Bg=wt({},tl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fd=bn(Bg),Kg=wt({},Ta,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xc}),Yg=bn(Kg),qg=wt({},Ms,{propertyName:0,elapsedTime:0,pseudoElement:0}),Qg=bn(qg),Jg=wt({},tl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Gg=bn(Jg),Xg=[9,13,27,32],jc=ar&&"CompositionEvent"in window,ea=null;ar&&"documentMode"in document&&(ea=document.documentMode);var Zg=ar&&"TextEvent"in window&&!ea,em=ar&&(!jc||ea&&8<ea&&11>=ea),Rd=" ",zd=!1;function tm(e,n){switch(e){case"keyup":return Xg.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nm(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ls=!1;function ev(e,n){switch(e){case"compositionend":return nm(n);case"keypress":return n.which!==32?null:(zd=!0,Rd);case"textInput":return e=n.data,e===Rd&&zd?null:e;default:return null}}function tv(e,n){if(ls)return e==="compositionend"||!jc&&tm(e,n)?(e=Zf(),ui=vc=yr=null,ls=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return em&&n.locale!=="ko"?null:n.data;default:return null}}var nv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ud(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!nv[e.type]:n==="textarea"}function rm(e,n,t,s){Mf(s),n=Ei(n,"onChange"),0<n.length&&(t=new yc("onChange","change",null,t,s),e.push({event:t,listeners:n}))}var ta=null,pa=null;function rv(e){pm(e,0)}function nl(e){var n=ds(e);if(kf(n))return e}function sv(e,n){if(e==="change")return n}var sm=!1;if(ar){var Al;if(ar){var Dl="oninput"in document;if(!Dl){var Vd=document.createElement("div");Vd.setAttribute("oninput","return;"),Dl=typeof Vd.oninput=="function"}Al=Dl}else Al=!1;sm=Al&&(!document.documentMode||9<document.documentMode)}function Wd(){ta&&(ta.detachEvent("onpropertychange",am),pa=ta=null)}function am(e){if(e.propertyName==="value"&&nl(pa)){var n=[];rm(n,pa,e,fc(e)),Ff(rv,n)}}function av(e,n,t){e==="focusin"?(Wd(),ta=n,pa=t,ta.attachEvent("onpropertychange",am)):e==="focusout"&&Wd()}function iv(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return nl(pa)}function lv(e,n){if(e==="click")return nl(n)}function ov(e,n){if(e==="input"||e==="change")return nl(n)}function cv(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var zn=typeof Object.is=="function"?Object.is:cv;function ha(e,n){if(zn(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var t=Object.keys(e),s=Object.keys(n);if(t.length!==s.length)return!1;for(s=0;s<t.length;s++){var a=t[s];if(!ro.call(n,a)||!zn(e[a],n[a]))return!1}return!0}function Hd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Bd(e,n){var t=Hd(e);e=0;for(var s;t;){if(t.nodeType===3){if(s=e+t.textContent.length,e<=n&&s>=n)return{node:t,offset:n-e};e=s}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=Hd(t)}}function im(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?im(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function lm(){for(var e=window,n=_i();n instanceof e.HTMLIFrameElement;){try{var t=typeof n.contentWindow.location.href=="string"}catch{t=!1}if(t)e=n.contentWindow;else break;n=_i(e.document)}return n}function _c(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}function dv(e){var n=lm(),t=e.focusedElem,s=e.selectionRange;if(n!==t&&t&&t.ownerDocument&&im(t.ownerDocument.documentElement,t)){if(s!==null&&_c(t)){if(n=s.start,e=s.end,e===void 0&&(e=n),"selectionStart"in t)t.selectionStart=n,t.selectionEnd=Math.min(e,t.value.length);else if(e=(n=t.ownerDocument||document)&&n.defaultView||window,e.getSelection){e=e.getSelection();var a=t.textContent.length,i=Math.min(s.start,a);s=s.end===void 0?i:Math.min(s.end,a),!e.extend&&i>s&&(a=s,s=i,i=a),a=Bd(t,i);var l=Bd(t,s);a&&l&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(n=n.createRange(),n.setStart(a.node,a.offset),e.removeAllRanges(),i>s?(e.addRange(n),e.extend(l.node,l.offset)):(n.setEnd(l.node,l.offset),e.addRange(n)))}}for(n=[],e=t;e=e.parentNode;)e.nodeType===1&&n.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<n.length;t++)e=n[t],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var uv=ar&&"documentMode"in document&&11>=document.documentMode,os=null,bo=null,na=null,So=!1;function Kd(e,n,t){var s=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;So||os==null||os!==_i(s)||(s=os,"selectionStart"in s&&_c(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),na&&ha(na,s)||(na=s,s=Ei(bo,"onSelect"),0<s.length&&(n=new yc("onSelect","select",null,n,t),e.push({event:n,listeners:s}),n.target=os)))}function Ka(e,n){var t={};return t[e.toLowerCase()]=n.toLowerCase(),t["Webkit"+e]="webkit"+n,t["Moz"+e]="moz"+n,t}var cs={animationend:Ka("Animation","AnimationEnd"),animationiteration:Ka("Animation","AnimationIteration"),animationstart:Ka("Animation","AnimationStart"),transitionend:Ka("Transition","TransitionEnd")},Il={},om={};ar&&(om=document.createElement("div").style,"AnimationEvent"in window||(delete cs.animationend.animation,delete cs.animationiteration.animation,delete cs.animationstart.animation),"TransitionEvent"in window||delete cs.transitionend.transition);function rl(e){if(Il[e])return Il[e];if(!cs[e])return e;var n=cs[e],t;for(t in n)if(n.hasOwnProperty(t)&&t in om)return Il[e]=n[t];return e}var cm=rl("animationend"),dm=rl("animationiteration"),um=rl("animationstart"),fm=rl("transitionend"),mm=new Map,Yd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Tr(e,n){mm.set(e,n),Xr(n,[e])}for(var Pl=0;Pl<Yd.length;Pl++){var Tl=Yd[Pl],fv=Tl.toLowerCase(),mv=Tl[0].toUpperCase()+Tl.slice(1);Tr(fv,"on"+mv)}Tr(cm,"onAnimationEnd");Tr(dm,"onAnimationIteration");Tr(um,"onAnimationStart");Tr("dblclick","onDoubleClick");Tr("focusin","onFocus");Tr("focusout","onBlur");Tr(fm,"onTransitionEnd");Cs("onMouseEnter",["mouseout","mouseover"]);Cs("onMouseLeave",["mouseout","mouseover"]);Cs("onPointerEnter",["pointerout","pointerover"]);Cs("onPointerLeave",["pointerout","pointerover"]);Xr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Xr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Xr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Xr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Xr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Xr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Gs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),pv=new Set("cancel close invalid load scroll toggle".split(" ").concat(Gs));function qd(e,n,t){var s=e.type||"unknown-event";e.currentTarget=t,fg(s,n,void 0,e),e.currentTarget=null}function pm(e,n){n=(n&4)!==0;for(var t=0;t<e.length;t++){var s=e[t],a=s.event;s=s.listeners;e:{var i=void 0;if(n)for(var l=s.length-1;0<=l;l--){var u=s[l],d=u.instance,x=u.currentTarget;if(u=u.listener,d!==i&&a.isPropagationStopped())break e;qd(a,u,x),i=d}else for(l=0;l<s.length;l++){if(u=s[l],d=u.instance,x=u.currentTarget,u=u.listener,d!==i&&a.isPropagationStopped())break e;qd(a,u,x),i=d}}}if(bi)throw e=xo,bi=!1,xo=null,e}function jt(e,n){var t=n[Ao];t===void 0&&(t=n[Ao]=new Set);var s=e+"__bubble";t.has(s)||(hm(n,e,2,!1),t.add(s))}function Ml(e,n,t){var s=0;n&&(s|=4),hm(t,e,s,n)}var Ya="_reactListening"+Math.random().toString(36).slice(2);function ga(e){if(!e[Ya]){e[Ya]=!0,Nf.forEach(function(t){t!=="selectionchange"&&(pv.has(t)||Ml(t,!1,e),Ml(t,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[Ya]||(n[Ya]=!0,Ml("selectionchange",!1,n))}}function hm(e,n,t,s){switch(Xf(n)){case 1:var a=Eg;break;case 4:a=Ag;break;default:a=gc}t=a.bind(null,n,t,e),a=void 0,!yo||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(a=!0),s?a!==void 0?e.addEventListener(n,t,{capture:!0,passive:a}):e.addEventListener(n,t,!0):a!==void 0?e.addEventListener(n,t,{passive:a}):e.addEventListener(n,t,!1)}function Ol(e,n,t,s,a){var i=s;if(!(n&1)&&!(n&2)&&s!==null)e:for(;;){if(s===null)return;var l=s.tag;if(l===3||l===4){var u=s.stateNode.containerInfo;if(u===a||u.nodeType===8&&u.parentNode===a)break;if(l===4)for(l=s.return;l!==null;){var d=l.tag;if((d===3||d===4)&&(d=l.stateNode.containerInfo,d===a||d.nodeType===8&&d.parentNode===a))return;l=l.return}for(;u!==null;){if(l=zr(u),l===null)return;if(d=l.tag,d===5||d===6){s=i=l;continue e}u=u.parentNode}}s=s.return}Ff(function(){var x=i,_=fc(t),C=[];e:{var N=mm.get(e);if(N!==void 0){var F=yc,v=e;switch(e){case"keypress":if(fi(t)===0)break e;case"keydown":case"keyup":F=Hg;break;case"focusin":v="focus",F=El;break;case"focusout":v="blur",F=El;break;case"beforeblur":case"afterblur":F=El;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":F=$d;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":F=Pg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":F=Yg;break;case cm:case dm:case um:F=Og;break;case fm:F=Qg;break;case"scroll":F=Dg;break;case"wheel":F=Gg;break;case"copy":case"cut":case"paste":F=Lg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":F=Fd}var b=(n&4)!==0,E=!b&&e==="scroll",p=b?N!==null?N+"Capture":null:N;b=[];for(var m=x,y;m!==null;){y=m;var j=y.stateNode;if(y.tag===5&&j!==null&&(y=j,p!==null&&(j=da(m,p),j!=null&&b.push(va(m,j,y)))),E)break;m=m.return}0<b.length&&(N=new F(N,v,null,t,_),C.push({event:N,listeners:b}))}}if(!(n&7)){e:{if(N=e==="mouseover"||e==="pointerover",F=e==="mouseout"||e==="pointerout",N&&t!==go&&(v=t.relatedTarget||t.fromElement)&&(zr(v)||v[ir]))break e;if((F||N)&&(N=_.window===_?_:(N=_.ownerDocument)?N.defaultView||N.parentWindow:window,F?(v=t.relatedTarget||t.toElement,F=x,v=v?zr(v):null,v!==null&&(E=Zr(v),v!==E||v.tag!==5&&v.tag!==6)&&(v=null)):(F=null,v=x),F!==v)){if(b=$d,j="onMouseLeave",p="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(b=Fd,j="onPointerLeave",p="onPointerEnter",m="pointer"),E=F==null?N:ds(F),y=v==null?N:ds(v),N=new b(j,m+"leave",F,t,_),N.target=E,N.relatedTarget=y,j=null,zr(_)===x&&(b=new b(p,m+"enter",v,t,_),b.target=y,b.relatedTarget=E,j=b),E=j,F&&v)t:{for(b=F,p=v,m=0,y=b;y;y=es(y))m++;for(y=0,j=p;j;j=es(j))y++;for(;0<m-y;)b=es(b),m--;for(;0<y-m;)p=es(p),y--;for(;m--;){if(b===p||p!==null&&b===p.alternate)break t;b=es(b),p=es(p)}b=null}else b=null;F!==null&&Qd(C,N,F,b,!1),v!==null&&E!==null&&Qd(C,E,v,b,!0)}}e:{if(N=x?ds(x):window,F=N.nodeName&&N.nodeName.toLowerCase(),F==="select"||F==="input"&&N.type==="file")var O=sv;else if(Ud(N))if(sm)O=ov;else{O=iv;var k=av}else(F=N.nodeName)&&F.toLowerCase()==="input"&&(N.type==="checkbox"||N.type==="radio")&&(O=lv);if(O&&(O=O(e,x))){rm(C,O,t,_);break e}k&&k(e,N,x),e==="focusout"&&(k=N._wrapperState)&&k.controlled&&N.type==="number"&&uo(N,"number",N.value)}switch(k=x?ds(x):window,e){case"focusin":(Ud(k)||k.contentEditable==="true")&&(os=k,bo=x,na=null);break;case"focusout":na=bo=os=null;break;case"mousedown":So=!0;break;case"contextmenu":case"mouseup":case"dragend":So=!1,Kd(C,t,_);break;case"selectionchange":if(uv)break;case"keydown":case"keyup":Kd(C,t,_)}var I;if(jc)e:{switch(e){case"compositionstart":var M="onCompositionStart";break e;case"compositionend":M="onCompositionEnd";break e;case"compositionupdate":M="onCompositionUpdate";break e}M=void 0}else ls?tm(e,t)&&(M="onCompositionEnd"):e==="keydown"&&t.keyCode===229&&(M="onCompositionStart");M&&(em&&t.locale!=="ko"&&(ls||M!=="onCompositionStart"?M==="onCompositionEnd"&&ls&&(I=Zf()):(yr=_,vc="value"in yr?yr.value:yr.textContent,ls=!0)),k=Ei(x,M),0<k.length&&(M=new Ld(M,e,null,t,_),C.push({event:M,listeners:k}),I?M.data=I:(I=nm(t),I!==null&&(M.data=I)))),(I=Zg?ev(e,t):tv(e,t))&&(x=Ei(x,"onBeforeInput"),0<x.length&&(_=new Ld("onBeforeInput","beforeinput",null,t,_),C.push({event:_,listeners:x}),_.data=I))}pm(C,n)})}function va(e,n,t){return{instance:e,listener:n,currentTarget:t}}function Ei(e,n){for(var t=n+"Capture",s=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=da(e,t),i!=null&&s.unshift(va(e,i,a)),i=da(e,n),i!=null&&s.push(va(e,i,a))),e=e.return}return s}function es(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Qd(e,n,t,s,a){for(var i=n._reactName,l=[];t!==null&&t!==s;){var u=t,d=u.alternate,x=u.stateNode;if(d!==null&&d===s)break;u.tag===5&&x!==null&&(u=x,a?(d=da(t,i),d!=null&&l.unshift(va(t,d,u))):a||(d=da(t,i),d!=null&&l.push(va(t,d,u)))),t=t.return}l.length!==0&&e.push({event:n,listeners:l})}var hv=/\r\n?/g,gv=/\u0000|\uFFFD/g;function Jd(e){return(typeof e=="string"?e:""+e).replace(hv,`
`).replace(gv,"")}function qa(e,n,t){if(n=Jd(n),Jd(e)!==n&&t)throw Error(je(425))}function Ai(){}var Co=null,wo=null;function ko(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Eo=typeof setTimeout=="function"?setTimeout:void 0,vv=typeof clearTimeout=="function"?clearTimeout:void 0,Gd=typeof Promise=="function"?Promise:void 0,yv=typeof queueMicrotask=="function"?queueMicrotask:typeof Gd<"u"?function(e){return Gd.resolve(null).then(e).catch(xv)}:Eo;function xv(e){setTimeout(function(){throw e})}function $l(e,n){var t=n,s=0;do{var a=t.nextSibling;if(e.removeChild(t),a&&a.nodeType===8)if(t=a.data,t==="/$"){if(s===0){e.removeChild(a),ma(n);return}s--}else t!=="$"&&t!=="$?"&&t!=="$!"||s++;t=a}while(t);ma(n)}function Sr(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return e}function Xd(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var t=e.data;if(t==="$"||t==="$!"||t==="$?"){if(n===0)return e;n--}else t==="/$"&&n++}e=e.previousSibling}return null}var Os=Math.random().toString(36).slice(2),qn="__reactFiber$"+Os,ya="__reactProps$"+Os,ir="__reactContainer$"+Os,Ao="__reactEvents$"+Os,jv="__reactListeners$"+Os,_v="__reactHandles$"+Os;function zr(e){var n=e[qn];if(n)return n;for(var t=e.parentNode;t;){if(n=t[ir]||t[qn]){if(t=n.alternate,n.child!==null||t!==null&&t.child!==null)for(e=Xd(e);e!==null;){if(t=e[qn])return t;e=Xd(e)}return n}e=t,t=e.parentNode}return null}function Ma(e){return e=e[qn]||e[ir],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ds(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(je(33))}function sl(e){return e[ya]||null}var Do=[],us=-1;function Mr(e){return{current:e}}function _t(e){0>us||(e.current=Do[us],Do[us]=null,us--)}function xt(e,n){us++,Do[us]=e.current,e.current=n}var Ir={},nn=Mr(Ir),mn=Mr(!1),Br=Ir;function ws(e,n){var t=e.type.contextTypes;if(!t)return Ir;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===n)return s.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in t)a[i]=n[i];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=a),a}function pn(e){return e=e.childContextTypes,e!=null}function Di(){_t(mn),_t(nn)}function Zd(e,n,t){if(nn.current!==Ir)throw Error(je(168));xt(nn,n),xt(mn,t)}function gm(e,n,t){var s=e.stateNode;if(n=n.childContextTypes,typeof s.getChildContext!="function")return t;s=s.getChildContext();for(var a in s)if(!(a in n))throw Error(je(108,ag(e)||"Unknown",a));return wt({},t,s)}function Ii(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ir,Br=nn.current,xt(nn,e),xt(mn,mn.current),!0}function eu(e,n,t){var s=e.stateNode;if(!s)throw Error(je(169));t?(e=gm(e,n,Br),s.__reactInternalMemoizedMergedChildContext=e,_t(mn),_t(nn),xt(nn,e)):_t(mn),xt(mn,t)}var tr=null,al=!1,Ll=!1;function vm(e){tr===null?tr=[e]:tr.push(e)}function Nv(e){al=!0,vm(e)}function Or(){if(!Ll&&tr!==null){Ll=!0;var e=0,n=pt;try{var t=tr;for(pt=1;e<t.length;e++){var s=t[e];do s=s(!0);while(s!==null)}tr=null,al=!1}catch(a){throw tr!==null&&(tr=tr.slice(e+1)),Vf(mc,Or),a}finally{pt=n,Ll=!1}}return null}var fs=[],ms=0,Pi=null,Ti=0,kn=[],En=0,Kr=null,nr=1,rr="";function Lr(e,n){fs[ms++]=Ti,fs[ms++]=Pi,Pi=e,Ti=n}function ym(e,n,t){kn[En++]=nr,kn[En++]=rr,kn[En++]=Kr,Kr=e;var s=nr;e=rr;var a=32-Fn(s)-1;s&=~(1<<a),t+=1;var i=32-Fn(n)+a;if(30<i){var l=a-a%5;i=(s&(1<<l)-1).toString(32),s>>=l,a-=l,nr=1<<32-Fn(n)+a|t<<a|s,rr=i+e}else nr=1<<i|t<<a|s,rr=e}function Nc(e){e.return!==null&&(Lr(e,1),ym(e,1,0))}function bc(e){for(;e===Pi;)Pi=fs[--ms],fs[ms]=null,Ti=fs[--ms],fs[ms]=null;for(;e===Kr;)Kr=kn[--En],kn[En]=null,rr=kn[--En],kn[En]=null,nr=kn[--En],kn[En]=null}var jn=null,xn=null,Nt=!1,Ln=null;function xm(e,n){var t=An(5,null,null,0);t.elementType="DELETED",t.stateNode=n,t.return=e,n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)}function tu(e,n){switch(e.tag){case 5:var t=e.type;return n=n.nodeType!==1||t.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(e.stateNode=n,jn=e,xn=Sr(n.firstChild),!0):!1;case 6:return n=e.pendingProps===""||n.nodeType!==3?null:n,n!==null?(e.stateNode=n,jn=e,xn=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(t=Kr!==null?{id:nr,overflow:rr}:null,e.memoizedState={dehydrated:n,treeContext:t,retryLane:1073741824},t=An(18,null,null,0),t.stateNode=n,t.return=e,e.child=t,jn=e,xn=null,!0):!1;default:return!1}}function Io(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Po(e){if(Nt){var n=xn;if(n){var t=n;if(!tu(e,n)){if(Io(e))throw Error(je(418));n=Sr(t.nextSibling);var s=jn;n&&tu(e,n)?xm(s,t):(e.flags=e.flags&-4097|2,Nt=!1,jn=e)}}else{if(Io(e))throw Error(je(418));e.flags=e.flags&-4097|2,Nt=!1,jn=e}}}function nu(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;jn=e}function Qa(e){if(e!==jn)return!1;if(!Nt)return nu(e),Nt=!0,!1;var n;if((n=e.tag!==3)&&!(n=e.tag!==5)&&(n=e.type,n=n!=="head"&&n!=="body"&&!ko(e.type,e.memoizedProps)),n&&(n=xn)){if(Io(e))throw jm(),Error(je(418));for(;n;)xm(e,n),n=Sr(n.nextSibling)}if(nu(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(je(317));e:{for(e=e.nextSibling,n=0;e;){if(e.nodeType===8){var t=e.data;if(t==="/$"){if(n===0){xn=Sr(e.nextSibling);break e}n--}else t!=="$"&&t!=="$!"&&t!=="$?"||n++}e=e.nextSibling}xn=null}}else xn=jn?Sr(e.stateNode.nextSibling):null;return!0}function jm(){for(var e=xn;e;)e=Sr(e.nextSibling)}function ks(){xn=jn=null,Nt=!1}function Sc(e){Ln===null?Ln=[e]:Ln.push(e)}var bv=dr.ReactCurrentBatchConfig;function Ws(e,n,t){if(e=t.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(je(309));var s=t.stateNode}if(!s)throw Error(je(147,e));var a=s,i=""+e;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===i?n.ref:(n=function(l){var u=a.refs;l===null?delete u[i]:u[i]=l},n._stringRef=i,n)}if(typeof e!="string")throw Error(je(284));if(!t._owner)throw Error(je(290,e))}return e}function Ja(e,n){throw e=Object.prototype.toString.call(n),Error(je(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e))}function ru(e){var n=e._init;return n(e._payload)}function _m(e){function n(p,m){if(e){var y=p.deletions;y===null?(p.deletions=[m],p.flags|=16):y.push(m)}}function t(p,m){if(!e)return null;for(;m!==null;)n(p,m),m=m.sibling;return null}function s(p,m){for(p=new Map;m!==null;)m.key!==null?p.set(m.key,m):p.set(m.index,m),m=m.sibling;return p}function a(p,m){return p=Er(p,m),p.index=0,p.sibling=null,p}function i(p,m,y){return p.index=y,e?(y=p.alternate,y!==null?(y=y.index,y<m?(p.flags|=2,m):y):(p.flags|=2,m)):(p.flags|=1048576,m)}function l(p){return e&&p.alternate===null&&(p.flags|=2),p}function u(p,m,y,j){return m===null||m.tag!==6?(m=Hl(y,p.mode,j),m.return=p,m):(m=a(m,y),m.return=p,m)}function d(p,m,y,j){var O=y.type;return O===is?_(p,m,y.props.children,j,y.key):m!==null&&(m.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===pr&&ru(O)===m.type)?(j=a(m,y.props),j.ref=Ws(p,m,y),j.return=p,j):(j=xi(y.type,y.key,y.props,null,p.mode,j),j.ref=Ws(p,m,y),j.return=p,j)}function x(p,m,y,j){return m===null||m.tag!==4||m.stateNode.containerInfo!==y.containerInfo||m.stateNode.implementation!==y.implementation?(m=Bl(y,p.mode,j),m.return=p,m):(m=a(m,y.children||[]),m.return=p,m)}function _(p,m,y,j,O){return m===null||m.tag!==7?(m=Hr(y,p.mode,j,O),m.return=p,m):(m=a(m,y),m.return=p,m)}function C(p,m,y){if(typeof m=="string"&&m!==""||typeof m=="number")return m=Hl(""+m,p.mode,y),m.return=p,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Ra:return y=xi(m.type,m.key,m.props,null,p.mode,y),y.ref=Ws(p,null,m),y.return=p,y;case as:return m=Bl(m,p.mode,y),m.return=p,m;case pr:var j=m._init;return C(p,j(m._payload),y)}if(Qs(m)||Fs(m))return m=Hr(m,p.mode,y,null),m.return=p,m;Ja(p,m)}return null}function N(p,m,y,j){var O=m!==null?m.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return O!==null?null:u(p,m,""+y,j);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Ra:return y.key===O?d(p,m,y,j):null;case as:return y.key===O?x(p,m,y,j):null;case pr:return O=y._init,N(p,m,O(y._payload),j)}if(Qs(y)||Fs(y))return O!==null?null:_(p,m,y,j,null);Ja(p,y)}return null}function F(p,m,y,j,O){if(typeof j=="string"&&j!==""||typeof j=="number")return p=p.get(y)||null,u(m,p,""+j,O);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Ra:return p=p.get(j.key===null?y:j.key)||null,d(m,p,j,O);case as:return p=p.get(j.key===null?y:j.key)||null,x(m,p,j,O);case pr:var k=j._init;return F(p,m,y,k(j._payload),O)}if(Qs(j)||Fs(j))return p=p.get(y)||null,_(m,p,j,O,null);Ja(m,j)}return null}function v(p,m,y,j){for(var O=null,k=null,I=m,M=m=0,X=null;I!==null&&M<y.length;M++){I.index>M?(X=I,I=null):X=I.sibling;var se=N(p,I,y[M],j);if(se===null){I===null&&(I=X);break}e&&I&&se.alternate===null&&n(p,I),m=i(se,m,M),k===null?O=se:k.sibling=se,k=se,I=X}if(M===y.length)return t(p,I),Nt&&Lr(p,M),O;if(I===null){for(;M<y.length;M++)I=C(p,y[M],j),I!==null&&(m=i(I,m,M),k===null?O=I:k.sibling=I,k=I);return Nt&&Lr(p,M),O}for(I=s(p,I);M<y.length;M++)X=F(I,p,M,y[M],j),X!==null&&(e&&X.alternate!==null&&I.delete(X.key===null?M:X.key),m=i(X,m,M),k===null?O=X:k.sibling=X,k=X);return e&&I.forEach(function(R){return n(p,R)}),Nt&&Lr(p,M),O}function b(p,m,y,j){var O=Fs(y);if(typeof O!="function")throw Error(je(150));if(y=O.call(y),y==null)throw Error(je(151));for(var k=O=null,I=m,M=m=0,X=null,se=y.next();I!==null&&!se.done;M++,se=y.next()){I.index>M?(X=I,I=null):X=I.sibling;var R=N(p,I,se.value,j);if(R===null){I===null&&(I=X);break}e&&I&&R.alternate===null&&n(p,I),m=i(R,m,M),k===null?O=R:k.sibling=R,k=R,I=X}if(se.done)return t(p,I),Nt&&Lr(p,M),O;if(I===null){for(;!se.done;M++,se=y.next())se=C(p,se.value,j),se!==null&&(m=i(se,m,M),k===null?O=se:k.sibling=se,k=se);return Nt&&Lr(p,M),O}for(I=s(p,I);!se.done;M++,se=y.next())se=F(I,p,M,se.value,j),se!==null&&(e&&se.alternate!==null&&I.delete(se.key===null?M:se.key),m=i(se,m,M),k===null?O=se:k.sibling=se,k=se);return e&&I.forEach(function(ae){return n(p,ae)}),Nt&&Lr(p,M),O}function E(p,m,y,j){if(typeof y=="object"&&y!==null&&y.type===is&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Ra:e:{for(var O=y.key,k=m;k!==null;){if(k.key===O){if(O=y.type,O===is){if(k.tag===7){t(p,k.sibling),m=a(k,y.props.children),m.return=p,p=m;break e}}else if(k.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===pr&&ru(O)===k.type){t(p,k.sibling),m=a(k,y.props),m.ref=Ws(p,k,y),m.return=p,p=m;break e}t(p,k);break}else n(p,k);k=k.sibling}y.type===is?(m=Hr(y.props.children,p.mode,j,y.key),m.return=p,p=m):(j=xi(y.type,y.key,y.props,null,p.mode,j),j.ref=Ws(p,m,y),j.return=p,p=j)}return l(p);case as:e:{for(k=y.key;m!==null;){if(m.key===k)if(m.tag===4&&m.stateNode.containerInfo===y.containerInfo&&m.stateNode.implementation===y.implementation){t(p,m.sibling),m=a(m,y.children||[]),m.return=p,p=m;break e}else{t(p,m);break}else n(p,m);m=m.sibling}m=Bl(y,p.mode,j),m.return=p,p=m}return l(p);case pr:return k=y._init,E(p,m,k(y._payload),j)}if(Qs(y))return v(p,m,y,j);if(Fs(y))return b(p,m,y,j);Ja(p,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,m!==null&&m.tag===6?(t(p,m.sibling),m=a(m,y),m.return=p,p=m):(t(p,m),m=Hl(y,p.mode,j),m.return=p,p=m),l(p)):t(p,m)}return E}var Es=_m(!0),Nm=_m(!1),Mi=Mr(null),Oi=null,ps=null,Cc=null;function wc(){Cc=ps=Oi=null}function kc(e){var n=Mi.current;_t(Mi),e._currentValue=n}function To(e,n,t){for(;e!==null;){var s=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,s!==null&&(s.childLanes|=n)):s!==null&&(s.childLanes&n)!==n&&(s.childLanes|=n),e===t)break;e=e.return}}function _s(e,n){Oi=e,Cc=ps=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&n&&(fn=!0),e.firstContext=null)}function In(e){var n=e._currentValue;if(Cc!==e)if(e={context:e,memoizedValue:n,next:null},ps===null){if(Oi===null)throw Error(je(308));ps=e,Oi.dependencies={lanes:0,firstContext:e}}else ps=ps.next=e;return n}var Ur=null;function Ec(e){Ur===null?Ur=[e]:Ur.push(e)}function bm(e,n,t,s){var a=n.interleaved;return a===null?(t.next=t,Ec(n)):(t.next=a.next,a.next=t),n.interleaved=t,lr(e,s)}function lr(e,n){e.lanes|=n;var t=e.alternate;for(t!==null&&(t.lanes|=n),t=e,e=e.return;e!==null;)e.childLanes|=n,t=e.alternate,t!==null&&(t.childLanes|=n),t=e,e=e.return;return t.tag===3?t.stateNode:null}var hr=!1;function Ac(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Sm(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function sr(e,n){return{eventTime:e,lane:n,tag:0,payload:null,callback:null,next:null}}function Cr(e,n,t){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,ot&2){var a=s.pending;return a===null?n.next=n:(n.next=a.next,a.next=n),s.pending=n,lr(e,t)}return a=s.interleaved,a===null?(n.next=n,Ec(s)):(n.next=a.next,a.next=n),s.interleaved=n,lr(e,t)}function mi(e,n,t){if(n=n.updateQueue,n!==null&&(n=n.shared,(t&4194240)!==0)){var s=n.lanes;s&=e.pendingLanes,t|=s,n.lanes=t,pc(e,t)}}function su(e,n){var t=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,t===s)){var a=null,i=null;if(t=t.firstBaseUpdate,t!==null){do{var l={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};i===null?a=i=l:i=i.next=l,t=t.next}while(t!==null);i===null?a=i=n:i=i.next=n}else a=i=n;t={baseState:s.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:s.shared,effects:s.effects},e.updateQueue=t;return}e=t.lastBaseUpdate,e===null?t.firstBaseUpdate=n:e.next=n,t.lastBaseUpdate=n}function $i(e,n,t,s){var a=e.updateQueue;hr=!1;var i=a.firstBaseUpdate,l=a.lastBaseUpdate,u=a.shared.pending;if(u!==null){a.shared.pending=null;var d=u,x=d.next;d.next=null,l===null?i=x:l.next=x,l=d;var _=e.alternate;_!==null&&(_=_.updateQueue,u=_.lastBaseUpdate,u!==l&&(u===null?_.firstBaseUpdate=x:u.next=x,_.lastBaseUpdate=d))}if(i!==null){var C=a.baseState;l=0,_=x=d=null,u=i;do{var N=u.lane,F=u.eventTime;if((s&N)===N){_!==null&&(_=_.next={eventTime:F,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var v=e,b=u;switch(N=n,F=t,b.tag){case 1:if(v=b.payload,typeof v=="function"){C=v.call(F,C,N);break e}C=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=b.payload,N=typeof v=="function"?v.call(F,C,N):v,N==null)break e;C=wt({},C,N);break e;case 2:hr=!0}}u.callback!==null&&u.lane!==0&&(e.flags|=64,N=a.effects,N===null?a.effects=[u]:N.push(u))}else F={eventTime:F,lane:N,tag:u.tag,payload:u.payload,callback:u.callback,next:null},_===null?(x=_=F,d=C):_=_.next=F,l|=N;if(u=u.next,u===null){if(u=a.shared.pending,u===null)break;N=u,u=N.next,N.next=null,a.lastBaseUpdate=N,a.shared.pending=null}}while(!0);if(_===null&&(d=C),a.baseState=d,a.firstBaseUpdate=x,a.lastBaseUpdate=_,n=a.shared.interleaved,n!==null){a=n;do l|=a.lane,a=a.next;while(a!==n)}else i===null&&(a.shared.lanes=0);qr|=l,e.lanes=l,e.memoizedState=C}}function au(e,n,t){if(e=n.effects,n.effects=null,e!==null)for(n=0;n<e.length;n++){var s=e[n],a=s.callback;if(a!==null){if(s.callback=null,s=t,typeof a!="function")throw Error(je(191,a));a.call(s)}}}var Oa={},Jn=Mr(Oa),xa=Mr(Oa),ja=Mr(Oa);function Vr(e){if(e===Oa)throw Error(je(174));return e}function Dc(e,n){switch(xt(ja,n),xt(xa,e),xt(Jn,Oa),e=n.nodeType,e){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:mo(null,"");break;default:e=e===8?n.parentNode:n,n=e.namespaceURI||null,e=e.tagName,n=mo(n,e)}_t(Jn),xt(Jn,n)}function As(){_t(Jn),_t(xa),_t(ja)}function Cm(e){Vr(ja.current);var n=Vr(Jn.current),t=mo(n,e.type);n!==t&&(xt(xa,e),xt(Jn,t))}function Ic(e){xa.current===e&&(_t(Jn),_t(xa))}var bt=Mr(0);function Li(e){for(var n=e;n!==null;){if(n.tag===13){var t=n.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if(n.flags&128)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Fl=[];function Pc(){for(var e=0;e<Fl.length;e++)Fl[e]._workInProgressVersionPrimary=null;Fl.length=0}var pi=dr.ReactCurrentDispatcher,Rl=dr.ReactCurrentBatchConfig,Yr=0,St=null,Vt=null,Ht=null,Fi=!1,ra=!1,_a=0,Sv=0;function Gt(){throw Error(je(321))}function Tc(e,n){if(n===null)return!1;for(var t=0;t<n.length&&t<e.length;t++)if(!zn(e[t],n[t]))return!1;return!0}function Mc(e,n,t,s,a,i){if(Yr=i,St=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,pi.current=e===null||e.memoizedState===null?Ev:Av,e=t(s,a),ra){i=0;do{if(ra=!1,_a=0,25<=i)throw Error(je(301));i+=1,Ht=Vt=null,n.updateQueue=null,pi.current=Dv,e=t(s,a)}while(ra)}if(pi.current=Ri,n=Vt!==null&&Vt.next!==null,Yr=0,Ht=Vt=St=null,Fi=!1,n)throw Error(je(300));return e}function Oc(){var e=_a!==0;return _a=0,e}function Yn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ht===null?St.memoizedState=Ht=e:Ht=Ht.next=e,Ht}function Pn(){if(Vt===null){var e=St.alternate;e=e!==null?e.memoizedState:null}else e=Vt.next;var n=Ht===null?St.memoizedState:Ht.next;if(n!==null)Ht=n,Vt=e;else{if(e===null)throw Error(je(310));Vt=e,e={memoizedState:Vt.memoizedState,baseState:Vt.baseState,baseQueue:Vt.baseQueue,queue:Vt.queue,next:null},Ht===null?St.memoizedState=Ht=e:Ht=Ht.next=e}return Ht}function Na(e,n){return typeof n=="function"?n(e):n}function zl(e){var n=Pn(),t=n.queue;if(t===null)throw Error(je(311));t.lastRenderedReducer=e;var s=Vt,a=s.baseQueue,i=t.pending;if(i!==null){if(a!==null){var l=a.next;a.next=i.next,i.next=l}s.baseQueue=a=i,t.pending=null}if(a!==null){i=a.next,s=s.baseState;var u=l=null,d=null,x=i;do{var _=x.lane;if((Yr&_)===_)d!==null&&(d=d.next={lane:0,action:x.action,hasEagerState:x.hasEagerState,eagerState:x.eagerState,next:null}),s=x.hasEagerState?x.eagerState:e(s,x.action);else{var C={lane:_,action:x.action,hasEagerState:x.hasEagerState,eagerState:x.eagerState,next:null};d===null?(u=d=C,l=s):d=d.next=C,St.lanes|=_,qr|=_}x=x.next}while(x!==null&&x!==i);d===null?l=s:d.next=u,zn(s,n.memoizedState)||(fn=!0),n.memoizedState=s,n.baseState=l,n.baseQueue=d,t.lastRenderedState=s}if(e=t.interleaved,e!==null){a=e;do i=a.lane,St.lanes|=i,qr|=i,a=a.next;while(a!==e)}else a===null&&(t.lanes=0);return[n.memoizedState,t.dispatch]}function Ul(e){var n=Pn(),t=n.queue;if(t===null)throw Error(je(311));t.lastRenderedReducer=e;var s=t.dispatch,a=t.pending,i=n.memoizedState;if(a!==null){t.pending=null;var l=a=a.next;do i=e(i,l.action),l=l.next;while(l!==a);zn(i,n.memoizedState)||(fn=!0),n.memoizedState=i,n.baseQueue===null&&(n.baseState=i),t.lastRenderedState=i}return[i,s]}function wm(){}function km(e,n){var t=St,s=Pn(),a=n(),i=!zn(s.memoizedState,a);if(i&&(s.memoizedState=a,fn=!0),s=s.queue,$c(Dm.bind(null,t,s,e),[e]),s.getSnapshot!==n||i||Ht!==null&&Ht.memoizedState.tag&1){if(t.flags|=2048,ba(9,Am.bind(null,t,s,a,n),void 0,null),Kt===null)throw Error(je(349));Yr&30||Em(t,n,a)}return a}function Em(e,n,t){e.flags|=16384,e={getSnapshot:n,value:t},n=St.updateQueue,n===null?(n={lastEffect:null,stores:null},St.updateQueue=n,n.stores=[e]):(t=n.stores,t===null?n.stores=[e]:t.push(e))}function Am(e,n,t,s){n.value=t,n.getSnapshot=s,Im(n)&&Pm(e)}function Dm(e,n,t){return t(function(){Im(n)&&Pm(e)})}function Im(e){var n=e.getSnapshot;e=e.value;try{var t=n();return!zn(e,t)}catch{return!0}}function Pm(e){var n=lr(e,1);n!==null&&Rn(n,e,1,-1)}function iu(e){var n=Yn();return typeof e=="function"&&(e=e()),n.memoizedState=n.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Na,lastRenderedState:e},n.queue=e,e=e.dispatch=kv.bind(null,St,e),[n.memoizedState,e]}function ba(e,n,t,s){return e={tag:e,create:n,destroy:t,deps:s,next:null},n=St.updateQueue,n===null?(n={lastEffect:null,stores:null},St.updateQueue=n,n.lastEffect=e.next=e):(t=n.lastEffect,t===null?n.lastEffect=e.next=e:(s=t.next,t.next=e,e.next=s,n.lastEffect=e)),e}function Tm(){return Pn().memoizedState}function hi(e,n,t,s){var a=Yn();St.flags|=e,a.memoizedState=ba(1|n,t,void 0,s===void 0?null:s)}function il(e,n,t,s){var a=Pn();s=s===void 0?null:s;var i=void 0;if(Vt!==null){var l=Vt.memoizedState;if(i=l.destroy,s!==null&&Tc(s,l.deps)){a.memoizedState=ba(n,t,i,s);return}}St.flags|=e,a.memoizedState=ba(1|n,t,i,s)}function lu(e,n){return hi(8390656,8,e,n)}function $c(e,n){return il(2048,8,e,n)}function Mm(e,n){return il(4,2,e,n)}function Om(e,n){return il(4,4,e,n)}function $m(e,n){if(typeof n=="function")return e=e(),n(e),function(){n(null)};if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function Lm(e,n,t){return t=t!=null?t.concat([e]):null,il(4,4,$m.bind(null,n,e),t)}function Lc(){}function Fm(e,n){var t=Pn();n=n===void 0?null:n;var s=t.memoizedState;return s!==null&&n!==null&&Tc(n,s[1])?s[0]:(t.memoizedState=[e,n],e)}function Rm(e,n){var t=Pn();n=n===void 0?null:n;var s=t.memoizedState;return s!==null&&n!==null&&Tc(n,s[1])?s[0]:(e=e(),t.memoizedState=[e,n],e)}function zm(e,n,t){return Yr&21?(zn(t,n)||(t=Bf(),St.lanes|=t,qr|=t,e.baseState=!0),n):(e.baseState&&(e.baseState=!1,fn=!0),e.memoizedState=t)}function Cv(e,n){var t=pt;pt=t!==0&&4>t?t:4,e(!0);var s=Rl.transition;Rl.transition={};try{e(!1),n()}finally{pt=t,Rl.transition=s}}function Um(){return Pn().memoizedState}function wv(e,n,t){var s=kr(e);if(t={lane:s,action:t,hasEagerState:!1,eagerState:null,next:null},Vm(e))Wm(n,t);else if(t=bm(e,n,t,s),t!==null){var a=ln();Rn(t,e,s,a),Hm(t,n,s)}}function kv(e,n,t){var s=kr(e),a={lane:s,action:t,hasEagerState:!1,eagerState:null,next:null};if(Vm(e))Wm(n,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=n.lastRenderedReducer,i!==null))try{var l=n.lastRenderedState,u=i(l,t);if(a.hasEagerState=!0,a.eagerState=u,zn(u,l)){var d=n.interleaved;d===null?(a.next=a,Ec(n)):(a.next=d.next,d.next=a),n.interleaved=a;return}}catch{}finally{}t=bm(e,n,a,s),t!==null&&(a=ln(),Rn(t,e,s,a),Hm(t,n,s))}}function Vm(e){var n=e.alternate;return e===St||n!==null&&n===St}function Wm(e,n){ra=Fi=!0;var t=e.pending;t===null?n.next=n:(n.next=t.next,t.next=n),e.pending=n}function Hm(e,n,t){if(t&4194240){var s=n.lanes;s&=e.pendingLanes,t|=s,n.lanes=t,pc(e,t)}}var Ri={readContext:In,useCallback:Gt,useContext:Gt,useEffect:Gt,useImperativeHandle:Gt,useInsertionEffect:Gt,useLayoutEffect:Gt,useMemo:Gt,useReducer:Gt,useRef:Gt,useState:Gt,useDebugValue:Gt,useDeferredValue:Gt,useTransition:Gt,useMutableSource:Gt,useSyncExternalStore:Gt,useId:Gt,unstable_isNewReconciler:!1},Ev={readContext:In,useCallback:function(e,n){return Yn().memoizedState=[e,n===void 0?null:n],e},useContext:In,useEffect:lu,useImperativeHandle:function(e,n,t){return t=t!=null?t.concat([e]):null,hi(4194308,4,$m.bind(null,n,e),t)},useLayoutEffect:function(e,n){return hi(4194308,4,e,n)},useInsertionEffect:function(e,n){return hi(4,2,e,n)},useMemo:function(e,n){var t=Yn();return n=n===void 0?null:n,e=e(),t.memoizedState=[e,n],e},useReducer:function(e,n,t){var s=Yn();return n=t!==void 0?t(n):n,s.memoizedState=s.baseState=n,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},s.queue=e,e=e.dispatch=wv.bind(null,St,e),[s.memoizedState,e]},useRef:function(e){var n=Yn();return e={current:e},n.memoizedState=e},useState:iu,useDebugValue:Lc,useDeferredValue:function(e){return Yn().memoizedState=e},useTransition:function(){var e=iu(!1),n=e[0];return e=Cv.bind(null,e[1]),Yn().memoizedState=e,[n,e]},useMutableSource:function(){},useSyncExternalStore:function(e,n,t){var s=St,a=Yn();if(Nt){if(t===void 0)throw Error(je(407));t=t()}else{if(t=n(),Kt===null)throw Error(je(349));Yr&30||Em(s,n,t)}a.memoizedState=t;var i={value:t,getSnapshot:n};return a.queue=i,lu(Dm.bind(null,s,i,e),[e]),s.flags|=2048,ba(9,Am.bind(null,s,i,t,n),void 0,null),t},useId:function(){var e=Yn(),n=Kt.identifierPrefix;if(Nt){var t=rr,s=nr;t=(s&~(1<<32-Fn(s)-1)).toString(32)+t,n=":"+n+"R"+t,t=_a++,0<t&&(n+="H"+t.toString(32)),n+=":"}else t=Sv++,n=":"+n+"r"+t.toString(32)+":";return e.memoizedState=n},unstable_isNewReconciler:!1},Av={readContext:In,useCallback:Fm,useContext:In,useEffect:$c,useImperativeHandle:Lm,useInsertionEffect:Mm,useLayoutEffect:Om,useMemo:Rm,useReducer:zl,useRef:Tm,useState:function(){return zl(Na)},useDebugValue:Lc,useDeferredValue:function(e){var n=Pn();return zm(n,Vt.memoizedState,e)},useTransition:function(){var e=zl(Na)[0],n=Pn().memoizedState;return[e,n]},useMutableSource:wm,useSyncExternalStore:km,useId:Um,unstable_isNewReconciler:!1},Dv={readContext:In,useCallback:Fm,useContext:In,useEffect:$c,useImperativeHandle:Lm,useInsertionEffect:Mm,useLayoutEffect:Om,useMemo:Rm,useReducer:Ul,useRef:Tm,useState:function(){return Ul(Na)},useDebugValue:Lc,useDeferredValue:function(e){var n=Pn();return Vt===null?n.memoizedState=e:zm(n,Vt.memoizedState,e)},useTransition:function(){var e=Ul(Na)[0],n=Pn().memoizedState;return[e,n]},useMutableSource:wm,useSyncExternalStore:km,useId:Um,unstable_isNewReconciler:!1};function On(e,n){if(e&&e.defaultProps){n=wt({},n),e=e.defaultProps;for(var t in e)n[t]===void 0&&(n[t]=e[t]);return n}return n}function Mo(e,n,t,s){n=e.memoizedState,t=t(s,n),t=t==null?n:wt({},n,t),e.memoizedState=t,e.lanes===0&&(e.updateQueue.baseState=t)}var ll={isMounted:function(e){return(e=e._reactInternals)?Zr(e)===e:!1},enqueueSetState:function(e,n,t){e=e._reactInternals;var s=ln(),a=kr(e),i=sr(s,a);i.payload=n,t!=null&&(i.callback=t),n=Cr(e,i,a),n!==null&&(Rn(n,e,a,s),mi(n,e,a))},enqueueReplaceState:function(e,n,t){e=e._reactInternals;var s=ln(),a=kr(e),i=sr(s,a);i.tag=1,i.payload=n,t!=null&&(i.callback=t),n=Cr(e,i,a),n!==null&&(Rn(n,e,a,s),mi(n,e,a))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var t=ln(),s=kr(e),a=sr(t,s);a.tag=2,n!=null&&(a.callback=n),n=Cr(e,a,s),n!==null&&(Rn(n,e,s,t),mi(n,e,s))}};function ou(e,n,t,s,a,i,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,i,l):n.prototype&&n.prototype.isPureReactComponent?!ha(t,s)||!ha(a,i):!0}function Bm(e,n,t){var s=!1,a=Ir,i=n.contextType;return typeof i=="object"&&i!==null?i=In(i):(a=pn(n)?Br:nn.current,s=n.contextTypes,i=(s=s!=null)?ws(e,a):Ir),n=new n(t,i),e.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=ll,e.stateNode=n,n._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),n}function cu(e,n,t,s){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(t,s),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(t,s),n.state!==e&&ll.enqueueReplaceState(n,n.state,null)}function Oo(e,n,t,s){var a=e.stateNode;a.props=t,a.state=e.memoizedState,a.refs={},Ac(e);var i=n.contextType;typeof i=="object"&&i!==null?a.context=In(i):(i=pn(n)?Br:nn.current,a.context=ws(e,i)),a.state=e.memoizedState,i=n.getDerivedStateFromProps,typeof i=="function"&&(Mo(e,n,i,t),a.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(n=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),n!==a.state&&ll.enqueueReplaceState(a,a.state,null),$i(e,t,a,s),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Ds(e,n){try{var t="",s=n;do t+=sg(s),s=s.return;while(s);var a=t}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:n,stack:a,digest:null}}function Vl(e,n,t){return{value:e,source:null,stack:t??null,digest:n??null}}function $o(e,n){try{console.error(n.value)}catch(t){setTimeout(function(){throw t})}}var Iv=typeof WeakMap=="function"?WeakMap:Map;function Km(e,n,t){t=sr(-1,t),t.tag=3,t.payload={element:null};var s=n.value;return t.callback=function(){Ui||(Ui=!0,Ko=s),$o(e,n)},t}function Ym(e,n,t){t=sr(-1,t),t.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var a=n.value;t.payload=function(){return s(a)},t.callback=function(){$o(e,n)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(t.callback=function(){$o(e,n),typeof s!="function"&&(wr===null?wr=new Set([this]):wr.add(this));var l=n.stack;this.componentDidCatch(n.value,{componentStack:l!==null?l:""})}),t}function du(e,n,t){var s=e.pingCache;if(s===null){s=e.pingCache=new Iv;var a=new Set;s.set(n,a)}else a=s.get(n),a===void 0&&(a=new Set,s.set(n,a));a.has(t)||(a.add(t),e=Bv.bind(null,e,n,t),n.then(e,e))}function uu(e){do{var n;if((n=e.tag===13)&&(n=e.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return e;e=e.return}while(e!==null);return null}function fu(e,n,t,s,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===n?e.flags|=65536:(e.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(n=sr(-1,1),n.tag=2,Cr(t,n,1))),t.lanes|=1),e)}var Pv=dr.ReactCurrentOwner,fn=!1;function an(e,n,t,s){n.child=e===null?Nm(n,null,t,s):Es(n,e.child,t,s)}function mu(e,n,t,s,a){t=t.render;var i=n.ref;return _s(n,a),s=Mc(e,n,t,s,i,a),t=Oc(),e!==null&&!fn?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~a,or(e,n,a)):(Nt&&t&&Nc(n),n.flags|=1,an(e,n,s,a),n.child)}function pu(e,n,t,s,a){if(e===null){var i=t.type;return typeof i=="function"&&!Bc(i)&&i.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(n.tag=15,n.type=i,qm(e,n,i,s,a)):(e=xi(t.type,null,s,n,n.mode,a),e.ref=n.ref,e.return=n,n.child=e)}if(i=e.child,!(e.lanes&a)){var l=i.memoizedProps;if(t=t.compare,t=t!==null?t:ha,t(l,s)&&e.ref===n.ref)return or(e,n,a)}return n.flags|=1,e=Er(i,s),e.ref=n.ref,e.return=n,n.child=e}function qm(e,n,t,s,a){if(e!==null){var i=e.memoizedProps;if(ha(i,s)&&e.ref===n.ref)if(fn=!1,n.pendingProps=s=i,(e.lanes&a)!==0)e.flags&131072&&(fn=!0);else return n.lanes=e.lanes,or(e,n,a)}return Lo(e,n,t,s,a)}function Qm(e,n,t){var s=n.pendingProps,a=s.children,i=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(n.mode&1))n.memoizedState={baseLanes:0,cachePool:null,transitions:null},xt(gs,yn),yn|=t;else{if(!(t&1073741824))return e=i!==null?i.baseLanes|t:t,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:e,cachePool:null,transitions:null},n.updateQueue=null,xt(gs,yn),yn|=e,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=i!==null?i.baseLanes:t,xt(gs,yn),yn|=s}else i!==null?(s=i.baseLanes|t,n.memoizedState=null):s=t,xt(gs,yn),yn|=s;return an(e,n,a,t),n.child}function Jm(e,n){var t=n.ref;(e===null&&t!==null||e!==null&&e.ref!==t)&&(n.flags|=512,n.flags|=2097152)}function Lo(e,n,t,s,a){var i=pn(t)?Br:nn.current;return i=ws(n,i),_s(n,a),t=Mc(e,n,t,s,i,a),s=Oc(),e!==null&&!fn?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~a,or(e,n,a)):(Nt&&s&&Nc(n),n.flags|=1,an(e,n,t,a),n.child)}function hu(e,n,t,s,a){if(pn(t)){var i=!0;Ii(n)}else i=!1;if(_s(n,a),n.stateNode===null)gi(e,n),Bm(n,t,s),Oo(n,t,s,a),s=!0;else if(e===null){var l=n.stateNode,u=n.memoizedProps;l.props=u;var d=l.context,x=t.contextType;typeof x=="object"&&x!==null?x=In(x):(x=pn(t)?Br:nn.current,x=ws(n,x));var _=t.getDerivedStateFromProps,C=typeof _=="function"||typeof l.getSnapshotBeforeUpdate=="function";C||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(u!==s||d!==x)&&cu(n,l,s,x),hr=!1;var N=n.memoizedState;l.state=N,$i(n,s,l,a),d=n.memoizedState,u!==s||N!==d||mn.current||hr?(typeof _=="function"&&(Mo(n,t,_,s),d=n.memoizedState),(u=hr||ou(n,t,u,s,N,d,x))?(C||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(n.flags|=4194308)):(typeof l.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=s,n.memoizedState=d),l.props=s,l.state=d,l.context=x,s=u):(typeof l.componentDidMount=="function"&&(n.flags|=4194308),s=!1)}else{l=n.stateNode,Sm(e,n),u=n.memoizedProps,x=n.type===n.elementType?u:On(n.type,u),l.props=x,C=n.pendingProps,N=l.context,d=t.contextType,typeof d=="object"&&d!==null?d=In(d):(d=pn(t)?Br:nn.current,d=ws(n,d));var F=t.getDerivedStateFromProps;(_=typeof F=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(u!==C||N!==d)&&cu(n,l,s,d),hr=!1,N=n.memoizedState,l.state=N,$i(n,s,l,a);var v=n.memoizedState;u!==C||N!==v||mn.current||hr?(typeof F=="function"&&(Mo(n,t,F,s),v=n.memoizedState),(x=hr||ou(n,t,x,s,N,v,d)||!1)?(_||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(s,v,d),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(s,v,d)),typeof l.componentDidUpdate=="function"&&(n.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof l.componentDidUpdate!="function"||u===e.memoizedProps&&N===e.memoizedState||(n.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&N===e.memoizedState||(n.flags|=1024),n.memoizedProps=s,n.memoizedState=v),l.props=s,l.state=v,l.context=d,s=x):(typeof l.componentDidUpdate!="function"||u===e.memoizedProps&&N===e.memoizedState||(n.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&N===e.memoizedState||(n.flags|=1024),s=!1)}return Fo(e,n,t,s,i,a)}function Fo(e,n,t,s,a,i){Jm(e,n);var l=(n.flags&128)!==0;if(!s&&!l)return a&&eu(n,t,!1),or(e,n,i);s=n.stateNode,Pv.current=n;var u=l&&typeof t.getDerivedStateFromError!="function"?null:s.render();return n.flags|=1,e!==null&&l?(n.child=Es(n,e.child,null,i),n.child=Es(n,null,u,i)):an(e,n,u,i),n.memoizedState=s.state,a&&eu(n,t,!0),n.child}function Gm(e){var n=e.stateNode;n.pendingContext?Zd(e,n.pendingContext,n.pendingContext!==n.context):n.context&&Zd(e,n.context,!1),Dc(e,n.containerInfo)}function gu(e,n,t,s,a){return ks(),Sc(a),n.flags|=256,an(e,n,t,s),n.child}var Ro={dehydrated:null,treeContext:null,retryLane:0};function zo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Xm(e,n,t){var s=n.pendingProps,a=bt.current,i=!1,l=(n.flags&128)!==0,u;if((u=l)||(u=e!==null&&e.memoizedState===null?!1:(a&2)!==0),u?(i=!0,n.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),xt(bt,a&1),e===null)return Po(n),e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(n.mode&1?e.data==="$!"?n.lanes=8:n.lanes=1073741824:n.lanes=1,null):(l=s.children,e=s.fallback,i?(s=n.mode,i=n.child,l={mode:"hidden",children:l},!(s&1)&&i!==null?(i.childLanes=0,i.pendingProps=l):i=dl(l,s,0,null),e=Hr(e,s,t,null),i.return=n,e.return=n,i.sibling=e,n.child=i,n.child.memoizedState=zo(t),n.memoizedState=Ro,e):Fc(n,l));if(a=e.memoizedState,a!==null&&(u=a.dehydrated,u!==null))return Tv(e,n,l,s,u,a,t);if(i){i=s.fallback,l=n.mode,a=e.child,u=a.sibling;var d={mode:"hidden",children:s.children};return!(l&1)&&n.child!==a?(s=n.child,s.childLanes=0,s.pendingProps=d,n.deletions=null):(s=Er(a,d),s.subtreeFlags=a.subtreeFlags&14680064),u!==null?i=Er(u,i):(i=Hr(i,l,t,null),i.flags|=2),i.return=n,s.return=n,s.sibling=i,n.child=s,s=i,i=n.child,l=e.child.memoizedState,l=l===null?zo(t):{baseLanes:l.baseLanes|t,cachePool:null,transitions:l.transitions},i.memoizedState=l,i.childLanes=e.childLanes&~t,n.memoizedState=Ro,s}return i=e.child,e=i.sibling,s=Er(i,{mode:"visible",children:s.children}),!(n.mode&1)&&(s.lanes=t),s.return=n,s.sibling=null,e!==null&&(t=n.deletions,t===null?(n.deletions=[e],n.flags|=16):t.push(e)),n.child=s,n.memoizedState=null,s}function Fc(e,n){return n=dl({mode:"visible",children:n},e.mode,0,null),n.return=e,e.child=n}function Ga(e,n,t,s){return s!==null&&Sc(s),Es(n,e.child,null,t),e=Fc(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function Tv(e,n,t,s,a,i,l){if(t)return n.flags&256?(n.flags&=-257,s=Vl(Error(je(422))),Ga(e,n,l,s)):n.memoizedState!==null?(n.child=e.child,n.flags|=128,null):(i=s.fallback,a=n.mode,s=dl({mode:"visible",children:s.children},a,0,null),i=Hr(i,a,l,null),i.flags|=2,s.return=n,i.return=n,s.sibling=i,n.child=s,n.mode&1&&Es(n,e.child,null,l),n.child.memoizedState=zo(l),n.memoizedState=Ro,i);if(!(n.mode&1))return Ga(e,n,l,null);if(a.data==="$!"){if(s=a.nextSibling&&a.nextSibling.dataset,s)var u=s.dgst;return s=u,i=Error(je(419)),s=Vl(i,s,void 0),Ga(e,n,l,s)}if(u=(l&e.childLanes)!==0,fn||u){if(s=Kt,s!==null){switch(l&-l){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(s.suspendedLanes|l)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,lr(e,a),Rn(s,e,a,-1))}return Hc(),s=Vl(Error(je(421))),Ga(e,n,l,s)}return a.data==="$?"?(n.flags|=128,n.child=e.child,n=Kv.bind(null,e),a._reactRetry=n,null):(e=i.treeContext,xn=Sr(a.nextSibling),jn=n,Nt=!0,Ln=null,e!==null&&(kn[En++]=nr,kn[En++]=rr,kn[En++]=Kr,nr=e.id,rr=e.overflow,Kr=n),n=Fc(n,s.children),n.flags|=4096,n)}function vu(e,n,t){e.lanes|=n;var s=e.alternate;s!==null&&(s.lanes|=n),To(e.return,n,t)}function Wl(e,n,t,s,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:s,tail:t,tailMode:a}:(i.isBackwards=n,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=t,i.tailMode=a)}function Zm(e,n,t){var s=n.pendingProps,a=s.revealOrder,i=s.tail;if(an(e,n,s.children,t),s=bt.current,s&2)s=s&1|2,n.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&vu(e,t,n);else if(e.tag===19)vu(e,t,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(xt(bt,s),!(n.mode&1))n.memoizedState=null;else switch(a){case"forwards":for(t=n.child,a=null;t!==null;)e=t.alternate,e!==null&&Li(e)===null&&(a=t),t=t.sibling;t=a,t===null?(a=n.child,n.child=null):(a=t.sibling,t.sibling=null),Wl(n,!1,a,t,i);break;case"backwards":for(t=null,a=n.child,n.child=null;a!==null;){if(e=a.alternate,e!==null&&Li(e)===null){n.child=a;break}e=a.sibling,a.sibling=t,t=a,a=e}Wl(n,!0,t,null,i);break;case"together":Wl(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function gi(e,n){!(n.mode&1)&&e!==null&&(e.alternate=null,n.alternate=null,n.flags|=2)}function or(e,n,t){if(e!==null&&(n.dependencies=e.dependencies),qr|=n.lanes,!(t&n.childLanes))return null;if(e!==null&&n.child!==e.child)throw Error(je(153));if(n.child!==null){for(e=n.child,t=Er(e,e.pendingProps),n.child=t,t.return=n;e.sibling!==null;)e=e.sibling,t=t.sibling=Er(e,e.pendingProps),t.return=n;t.sibling=null}return n.child}function Mv(e,n,t){switch(n.tag){case 3:Gm(n),ks();break;case 5:Cm(n);break;case 1:pn(n.type)&&Ii(n);break;case 4:Dc(n,n.stateNode.containerInfo);break;case 10:var s=n.type._context,a=n.memoizedProps.value;xt(Mi,s._currentValue),s._currentValue=a;break;case 13:if(s=n.memoizedState,s!==null)return s.dehydrated!==null?(xt(bt,bt.current&1),n.flags|=128,null):t&n.child.childLanes?Xm(e,n,t):(xt(bt,bt.current&1),e=or(e,n,t),e!==null?e.sibling:null);xt(bt,bt.current&1);break;case 19:if(s=(t&n.childLanes)!==0,e.flags&128){if(s)return Zm(e,n,t);n.flags|=128}if(a=n.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),xt(bt,bt.current),s)break;return null;case 22:case 23:return n.lanes=0,Qm(e,n,t)}return or(e,n,t)}var ep,Uo,tp,np;ep=function(e,n){for(var t=n.child;t!==null;){if(t.tag===5||t.tag===6)e.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break;for(;t.sibling===null;){if(t.return===null||t.return===n)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};Uo=function(){};tp=function(e,n,t,s){var a=e.memoizedProps;if(a!==s){e=n.stateNode,Vr(Jn.current);var i=null;switch(t){case"input":a=oo(e,a),s=oo(e,s),i=[];break;case"select":a=wt({},a,{value:void 0}),s=wt({},s,{value:void 0}),i=[];break;case"textarea":a=fo(e,a),s=fo(e,s),i=[];break;default:typeof a.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=Ai)}po(t,s);var l;t=null;for(x in a)if(!s.hasOwnProperty(x)&&a.hasOwnProperty(x)&&a[x]!=null)if(x==="style"){var u=a[x];for(l in u)u.hasOwnProperty(l)&&(t||(t={}),t[l]="")}else x!=="dangerouslySetInnerHTML"&&x!=="children"&&x!=="suppressContentEditableWarning"&&x!=="suppressHydrationWarning"&&x!=="autoFocus"&&(oa.hasOwnProperty(x)?i||(i=[]):(i=i||[]).push(x,null));for(x in s){var d=s[x];if(u=a!=null?a[x]:void 0,s.hasOwnProperty(x)&&d!==u&&(d!=null||u!=null))if(x==="style")if(u){for(l in u)!u.hasOwnProperty(l)||d&&d.hasOwnProperty(l)||(t||(t={}),t[l]="");for(l in d)d.hasOwnProperty(l)&&u[l]!==d[l]&&(t||(t={}),t[l]=d[l])}else t||(i||(i=[]),i.push(x,t)),t=d;else x==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,u=u?u.__html:void 0,d!=null&&u!==d&&(i=i||[]).push(x,d)):x==="children"?typeof d!="string"&&typeof d!="number"||(i=i||[]).push(x,""+d):x!=="suppressContentEditableWarning"&&x!=="suppressHydrationWarning"&&(oa.hasOwnProperty(x)?(d!=null&&x==="onScroll"&&jt("scroll",e),i||u===d||(i=[])):(i=i||[]).push(x,d))}t&&(i=i||[]).push("style",t);var x=i;(n.updateQueue=x)&&(n.flags|=4)}};np=function(e,n,t,s){t!==s&&(n.flags|=4)};function Hs(e,n){if(!Nt)switch(e.tailMode){case"hidden":n=e.tail;for(var t=null;n!==null;)n.alternate!==null&&(t=n),n=n.sibling;t===null?e.tail=null:t.sibling=null;break;case"collapsed":t=e.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function Xt(e){var n=e.alternate!==null&&e.alternate.child===e.child,t=0,s=0;if(n)for(var a=e.child;a!==null;)t|=a.lanes|a.childLanes,s|=a.subtreeFlags&14680064,s|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)t|=a.lanes|a.childLanes,s|=a.subtreeFlags,s|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=s,e.childLanes=t,n}function Ov(e,n,t){var s=n.pendingProps;switch(bc(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xt(n),null;case 1:return pn(n.type)&&Di(),Xt(n),null;case 3:return s=n.stateNode,As(),_t(mn),_t(nn),Pc(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(Qa(n)?n.flags|=4:e===null||e.memoizedState.isDehydrated&&!(n.flags&256)||(n.flags|=1024,Ln!==null&&(Qo(Ln),Ln=null))),Uo(e,n),Xt(n),null;case 5:Ic(n);var a=Vr(ja.current);if(t=n.type,e!==null&&n.stateNode!=null)tp(e,n,t,s,a),e.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!s){if(n.stateNode===null)throw Error(je(166));return Xt(n),null}if(e=Vr(Jn.current),Qa(n)){s=n.stateNode,t=n.type;var i=n.memoizedProps;switch(s[qn]=n,s[ya]=i,e=(n.mode&1)!==0,t){case"dialog":jt("cancel",s),jt("close",s);break;case"iframe":case"object":case"embed":jt("load",s);break;case"video":case"audio":for(a=0;a<Gs.length;a++)jt(Gs[a],s);break;case"source":jt("error",s);break;case"img":case"image":case"link":jt("error",s),jt("load",s);break;case"details":jt("toggle",s);break;case"input":wd(s,i),jt("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!i.multiple},jt("invalid",s);break;case"textarea":Ed(s,i),jt("invalid",s)}po(t,i),a=null;for(var l in i)if(i.hasOwnProperty(l)){var u=i[l];l==="children"?typeof u=="string"?s.textContent!==u&&(i.suppressHydrationWarning!==!0&&qa(s.textContent,u,e),a=["children",u]):typeof u=="number"&&s.textContent!==""+u&&(i.suppressHydrationWarning!==!0&&qa(s.textContent,u,e),a=["children",""+u]):oa.hasOwnProperty(l)&&u!=null&&l==="onScroll"&&jt("scroll",s)}switch(t){case"input":za(s),kd(s,i,!0);break;case"textarea":za(s),Ad(s);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(s.onclick=Ai)}s=a,n.updateQueue=s,s!==null&&(n.flags|=4)}else{l=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Df(t)),e==="http://www.w3.org/1999/xhtml"?t==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=l.createElement(t,{is:s.is}):(e=l.createElement(t),t==="select"&&(l=e,s.multiple?l.multiple=!0:s.size&&(l.size=s.size))):e=l.createElementNS(e,t),e[qn]=n,e[ya]=s,ep(e,n,!1,!1),n.stateNode=e;e:{switch(l=ho(t,s),t){case"dialog":jt("cancel",e),jt("close",e),a=s;break;case"iframe":case"object":case"embed":jt("load",e),a=s;break;case"video":case"audio":for(a=0;a<Gs.length;a++)jt(Gs[a],e);a=s;break;case"source":jt("error",e),a=s;break;case"img":case"image":case"link":jt("error",e),jt("load",e),a=s;break;case"details":jt("toggle",e),a=s;break;case"input":wd(e,s),a=oo(e,s),jt("invalid",e);break;case"option":a=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},a=wt({},s,{value:void 0}),jt("invalid",e);break;case"textarea":Ed(e,s),a=fo(e,s),jt("invalid",e);break;default:a=s}po(t,a),u=a;for(i in u)if(u.hasOwnProperty(i)){var d=u[i];i==="style"?Tf(e,d):i==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&If(e,d)):i==="children"?typeof d=="string"?(t!=="textarea"||d!=="")&&ca(e,d):typeof d=="number"&&ca(e,""+d):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(oa.hasOwnProperty(i)?d!=null&&i==="onScroll"&&jt("scroll",e):d!=null&&oc(e,i,d,l))}switch(t){case"input":za(e),kd(e,s,!1);break;case"textarea":za(e),Ad(e);break;case"option":s.value!=null&&e.setAttribute("value",""+Dr(s.value));break;case"select":e.multiple=!!s.multiple,i=s.value,i!=null?vs(e,!!s.multiple,i,!1):s.defaultValue!=null&&vs(e,!!s.multiple,s.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Ai)}switch(t){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return Xt(n),null;case 6:if(e&&n.stateNode!=null)np(e,n,e.memoizedProps,s);else{if(typeof s!="string"&&n.stateNode===null)throw Error(je(166));if(t=Vr(ja.current),Vr(Jn.current),Qa(n)){if(s=n.stateNode,t=n.memoizedProps,s[qn]=n,(i=s.nodeValue!==t)&&(e=jn,e!==null))switch(e.tag){case 3:qa(s.nodeValue,t,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&qa(s.nodeValue,t,(e.mode&1)!==0)}i&&(n.flags|=4)}else s=(t.nodeType===9?t:t.ownerDocument).createTextNode(s),s[qn]=n,n.stateNode=s}return Xt(n),null;case 13:if(_t(bt),s=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Nt&&xn!==null&&n.mode&1&&!(n.flags&128))jm(),ks(),n.flags|=98560,i=!1;else if(i=Qa(n),s!==null&&s.dehydrated!==null){if(e===null){if(!i)throw Error(je(318));if(i=n.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(je(317));i[qn]=n}else ks(),!(n.flags&128)&&(n.memoizedState=null),n.flags|=4;Xt(n),i=!1}else Ln!==null&&(Qo(Ln),Ln=null),i=!0;if(!i)return n.flags&65536?n:null}return n.flags&128?(n.lanes=t,n):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(n.child.flags|=8192,n.mode&1&&(e===null||bt.current&1?Wt===0&&(Wt=3):Hc())),n.updateQueue!==null&&(n.flags|=4),Xt(n),null);case 4:return As(),Uo(e,n),e===null&&ga(n.stateNode.containerInfo),Xt(n),null;case 10:return kc(n.type._context),Xt(n),null;case 17:return pn(n.type)&&Di(),Xt(n),null;case 19:if(_t(bt),i=n.memoizedState,i===null)return Xt(n),null;if(s=(n.flags&128)!==0,l=i.rendering,l===null)if(s)Hs(i,!1);else{if(Wt!==0||e!==null&&e.flags&128)for(e=n.child;e!==null;){if(l=Li(e),l!==null){for(n.flags|=128,Hs(i,!1),s=l.updateQueue,s!==null&&(n.updateQueue=s,n.flags|=4),n.subtreeFlags=0,s=t,t=n.child;t!==null;)i=t,e=s,i.flags&=14680066,l=i.alternate,l===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t=t.sibling;return xt(bt,bt.current&1|2),n.child}e=e.sibling}i.tail!==null&&Ot()>Is&&(n.flags|=128,s=!0,Hs(i,!1),n.lanes=4194304)}else{if(!s)if(e=Li(l),e!==null){if(n.flags|=128,s=!0,t=e.updateQueue,t!==null&&(n.updateQueue=t,n.flags|=4),Hs(i,!0),i.tail===null&&i.tailMode==="hidden"&&!l.alternate&&!Nt)return Xt(n),null}else 2*Ot()-i.renderingStartTime>Is&&t!==1073741824&&(n.flags|=128,s=!0,Hs(i,!1),n.lanes=4194304);i.isBackwards?(l.sibling=n.child,n.child=l):(t=i.last,t!==null?t.sibling=l:n.child=l,i.last=l)}return i.tail!==null?(n=i.tail,i.rendering=n,i.tail=n.sibling,i.renderingStartTime=Ot(),n.sibling=null,t=bt.current,xt(bt,s?t&1|2:t&1),n):(Xt(n),null);case 22:case 23:return Wc(),s=n.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(n.flags|=8192),s&&n.mode&1?yn&1073741824&&(Xt(n),n.subtreeFlags&6&&(n.flags|=8192)):Xt(n),null;case 24:return null;case 25:return null}throw Error(je(156,n.tag))}function $v(e,n){switch(bc(n),n.tag){case 1:return pn(n.type)&&Di(),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return As(),_t(mn),_t(nn),Pc(),e=n.flags,e&65536&&!(e&128)?(n.flags=e&-65537|128,n):null;case 5:return Ic(n),null;case 13:if(_t(bt),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(je(340));ks()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return _t(bt),null;case 4:return As(),null;case 10:return kc(n.type._context),null;case 22:case 23:return Wc(),null;case 24:return null;default:return null}}var Xa=!1,en=!1,Lv=typeof WeakSet=="function"?WeakSet:Set,Me=null;function hs(e,n){var t=e.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(s){At(e,n,s)}else t.current=null}function Vo(e,n,t){try{t()}catch(s){At(e,n,s)}}var yu=!1;function Fv(e,n){if(Co=wi,e=lm(),_c(e)){if("selectionStart"in e)var t={start:e.selectionStart,end:e.selectionEnd};else e:{t=(t=e.ownerDocument)&&t.defaultView||window;var s=t.getSelection&&t.getSelection();if(s&&s.rangeCount!==0){t=s.anchorNode;var a=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{t.nodeType,i.nodeType}catch{t=null;break e}var l=0,u=-1,d=-1,x=0,_=0,C=e,N=null;t:for(;;){for(var F;C!==t||a!==0&&C.nodeType!==3||(u=l+a),C!==i||s!==0&&C.nodeType!==3||(d=l+s),C.nodeType===3&&(l+=C.nodeValue.length),(F=C.firstChild)!==null;)N=C,C=F;for(;;){if(C===e)break t;if(N===t&&++x===a&&(u=l),N===i&&++_===s&&(d=l),(F=C.nextSibling)!==null)break;C=N,N=C.parentNode}C=F}t=u===-1||d===-1?null:{start:u,end:d}}else t=null}t=t||{start:0,end:0}}else t=null;for(wo={focusedElem:e,selectionRange:t},wi=!1,Me=n;Me!==null;)if(n=Me,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,Me=e;else for(;Me!==null;){n=Me;try{var v=n.alternate;if(n.flags&1024)switch(n.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var b=v.memoizedProps,E=v.memoizedState,p=n.stateNode,m=p.getSnapshotBeforeUpdate(n.elementType===n.type?b:On(n.type,b),E);p.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var y=n.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(je(163))}}catch(j){At(n,n.return,j)}if(e=n.sibling,e!==null){e.return=n.return,Me=e;break}Me=n.return}return v=yu,yu=!1,v}function sa(e,n,t){var s=n.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&Vo(n,t,i)}a=a.next}while(a!==s)}}function ol(e,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var t=n=n.next;do{if((t.tag&e)===e){var s=t.create;t.destroy=s()}t=t.next}while(t!==n)}}function Wo(e){var n=e.ref;if(n!==null){var t=e.stateNode;switch(e.tag){case 5:e=t;break;default:e=t}typeof n=="function"?n(e):n.current=e}}function rp(e){var n=e.alternate;n!==null&&(e.alternate=null,rp(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&(delete n[qn],delete n[ya],delete n[Ao],delete n[jv],delete n[_v])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function sp(e){return e.tag===5||e.tag===3||e.tag===4}function xu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||sp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ho(e,n,t){var s=e.tag;if(s===5||s===6)e=e.stateNode,n?t.nodeType===8?t.parentNode.insertBefore(e,n):t.insertBefore(e,n):(t.nodeType===8?(n=t.parentNode,n.insertBefore(e,t)):(n=t,n.appendChild(e)),t=t._reactRootContainer,t!=null||n.onclick!==null||(n.onclick=Ai));else if(s!==4&&(e=e.child,e!==null))for(Ho(e,n,t),e=e.sibling;e!==null;)Ho(e,n,t),e=e.sibling}function Bo(e,n,t){var s=e.tag;if(s===5||s===6)e=e.stateNode,n?t.insertBefore(e,n):t.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(Bo(e,n,t),e=e.sibling;e!==null;)Bo(e,n,t),e=e.sibling}var Yt=null,$n=!1;function fr(e,n,t){for(t=t.child;t!==null;)ap(e,n,t),t=t.sibling}function ap(e,n,t){if(Qn&&typeof Qn.onCommitFiberUnmount=="function")try{Qn.onCommitFiberUnmount(el,t)}catch{}switch(t.tag){case 5:en||hs(t,n);case 6:var s=Yt,a=$n;Yt=null,fr(e,n,t),Yt=s,$n=a,Yt!==null&&($n?(e=Yt,t=t.stateNode,e.nodeType===8?e.parentNode.removeChild(t):e.removeChild(t)):Yt.removeChild(t.stateNode));break;case 18:Yt!==null&&($n?(e=Yt,t=t.stateNode,e.nodeType===8?$l(e.parentNode,t):e.nodeType===1&&$l(e,t),ma(e)):$l(Yt,t.stateNode));break;case 4:s=Yt,a=$n,Yt=t.stateNode.containerInfo,$n=!0,fr(e,n,t),Yt=s,$n=a;break;case 0:case 11:case 14:case 15:if(!en&&(s=t.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){a=s=s.next;do{var i=a,l=i.destroy;i=i.tag,l!==void 0&&(i&2||i&4)&&Vo(t,n,l),a=a.next}while(a!==s)}fr(e,n,t);break;case 1:if(!en&&(hs(t,n),s=t.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=t.memoizedProps,s.state=t.memoizedState,s.componentWillUnmount()}catch(u){At(t,n,u)}fr(e,n,t);break;case 21:fr(e,n,t);break;case 22:t.mode&1?(en=(s=en)||t.memoizedState!==null,fr(e,n,t),en=s):fr(e,n,t);break;default:fr(e,n,t)}}function ju(e){var n=e.updateQueue;if(n!==null){e.updateQueue=null;var t=e.stateNode;t===null&&(t=e.stateNode=new Lv),n.forEach(function(s){var a=Yv.bind(null,e,s);t.has(s)||(t.add(s),s.then(a,a))})}}function Mn(e,n){var t=n.deletions;if(t!==null)for(var s=0;s<t.length;s++){var a=t[s];try{var i=e,l=n,u=l;e:for(;u!==null;){switch(u.tag){case 5:Yt=u.stateNode,$n=!1;break e;case 3:Yt=u.stateNode.containerInfo,$n=!0;break e;case 4:Yt=u.stateNode.containerInfo,$n=!0;break e}u=u.return}if(Yt===null)throw Error(je(160));ap(i,l,a),Yt=null,$n=!1;var d=a.alternate;d!==null&&(d.return=null),a.return=null}catch(x){At(a,n,x)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)ip(n,e),n=n.sibling}function ip(e,n){var t=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Mn(n,e),Bn(e),s&4){try{sa(3,e,e.return),ol(3,e)}catch(b){At(e,e.return,b)}try{sa(5,e,e.return)}catch(b){At(e,e.return,b)}}break;case 1:Mn(n,e),Bn(e),s&512&&t!==null&&hs(t,t.return);break;case 5:if(Mn(n,e),Bn(e),s&512&&t!==null&&hs(t,t.return),e.flags&32){var a=e.stateNode;try{ca(a,"")}catch(b){At(e,e.return,b)}}if(s&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,l=t!==null?t.memoizedProps:i,u=e.type,d=e.updateQueue;if(e.updateQueue=null,d!==null)try{u==="input"&&i.type==="radio"&&i.name!=null&&Ef(a,i),ho(u,l);var x=ho(u,i);for(l=0;l<d.length;l+=2){var _=d[l],C=d[l+1];_==="style"?Tf(a,C):_==="dangerouslySetInnerHTML"?If(a,C):_==="children"?ca(a,C):oc(a,_,C,x)}switch(u){case"input":co(a,i);break;case"textarea":Af(a,i);break;case"select":var N=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var F=i.value;F!=null?vs(a,!!i.multiple,F,!1):N!==!!i.multiple&&(i.defaultValue!=null?vs(a,!!i.multiple,i.defaultValue,!0):vs(a,!!i.multiple,i.multiple?[]:"",!1))}a[ya]=i}catch(b){At(e,e.return,b)}}break;case 6:if(Mn(n,e),Bn(e),s&4){if(e.stateNode===null)throw Error(je(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(b){At(e,e.return,b)}}break;case 3:if(Mn(n,e),Bn(e),s&4&&t!==null&&t.memoizedState.isDehydrated)try{ma(n.containerInfo)}catch(b){At(e,e.return,b)}break;case 4:Mn(n,e),Bn(e);break;case 13:Mn(n,e),Bn(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(Uc=Ot())),s&4&&ju(e);break;case 22:if(_=t!==null&&t.memoizedState!==null,e.mode&1?(en=(x=en)||_,Mn(n,e),en=x):Mn(n,e),Bn(e),s&8192){if(x=e.memoizedState!==null,(e.stateNode.isHidden=x)&&!_&&e.mode&1)for(Me=e,_=e.child;_!==null;){for(C=Me=_;Me!==null;){switch(N=Me,F=N.child,N.tag){case 0:case 11:case 14:case 15:sa(4,N,N.return);break;case 1:hs(N,N.return);var v=N.stateNode;if(typeof v.componentWillUnmount=="function"){s=N,t=N.return;try{n=s,v.props=n.memoizedProps,v.state=n.memoizedState,v.componentWillUnmount()}catch(b){At(s,t,b)}}break;case 5:hs(N,N.return);break;case 22:if(N.memoizedState!==null){Nu(C);continue}}F!==null?(F.return=N,Me=F):Nu(C)}_=_.sibling}e:for(_=null,C=e;;){if(C.tag===5){if(_===null){_=C;try{a=C.stateNode,x?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(u=C.stateNode,d=C.memoizedProps.style,l=d!=null&&d.hasOwnProperty("display")?d.display:null,u.style.display=Pf("display",l))}catch(b){At(e,e.return,b)}}}else if(C.tag===6){if(_===null)try{C.stateNode.nodeValue=x?"":C.memoizedProps}catch(b){At(e,e.return,b)}}else if((C.tag!==22&&C.tag!==23||C.memoizedState===null||C===e)&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===e)break e;for(;C.sibling===null;){if(C.return===null||C.return===e)break e;_===C&&(_=null),C=C.return}_===C&&(_=null),C.sibling.return=C.return,C=C.sibling}}break;case 19:Mn(n,e),Bn(e),s&4&&ju(e);break;case 21:break;default:Mn(n,e),Bn(e)}}function Bn(e){var n=e.flags;if(n&2){try{e:{for(var t=e.return;t!==null;){if(sp(t)){var s=t;break e}t=t.return}throw Error(je(160))}switch(s.tag){case 5:var a=s.stateNode;s.flags&32&&(ca(a,""),s.flags&=-33);var i=xu(e);Bo(e,i,a);break;case 3:case 4:var l=s.stateNode.containerInfo,u=xu(e);Ho(e,u,l);break;default:throw Error(je(161))}}catch(d){At(e,e.return,d)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function Rv(e,n,t){Me=e,lp(e)}function lp(e,n,t){for(var s=(e.mode&1)!==0;Me!==null;){var a=Me,i=a.child;if(a.tag===22&&s){var l=a.memoizedState!==null||Xa;if(!l){var u=a.alternate,d=u!==null&&u.memoizedState!==null||en;u=Xa;var x=en;if(Xa=l,(en=d)&&!x)for(Me=a;Me!==null;)l=Me,d=l.child,l.tag===22&&l.memoizedState!==null?bu(a):d!==null?(d.return=l,Me=d):bu(a);for(;i!==null;)Me=i,lp(i),i=i.sibling;Me=a,Xa=u,en=x}_u(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,Me=i):_u(e)}}function _u(e){for(;Me!==null;){var n=Me;if(n.flags&8772){var t=n.alternate;try{if(n.flags&8772)switch(n.tag){case 0:case 11:case 15:en||ol(5,n);break;case 1:var s=n.stateNode;if(n.flags&4&&!en)if(t===null)s.componentDidMount();else{var a=n.elementType===n.type?t.memoizedProps:On(n.type,t.memoizedProps);s.componentDidUpdate(a,t.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var i=n.updateQueue;i!==null&&au(n,i,s);break;case 3:var l=n.updateQueue;if(l!==null){if(t=null,n.child!==null)switch(n.child.tag){case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}au(n,l,t)}break;case 5:var u=n.stateNode;if(t===null&&n.flags&4){t=u;var d=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&t.focus();break;case"img":d.src&&(t.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var x=n.alternate;if(x!==null){var _=x.memoizedState;if(_!==null){var C=_.dehydrated;C!==null&&ma(C)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(je(163))}en||n.flags&512&&Wo(n)}catch(N){At(n,n.return,N)}}if(n===e){Me=null;break}if(t=n.sibling,t!==null){t.return=n.return,Me=t;break}Me=n.return}}function Nu(e){for(;Me!==null;){var n=Me;if(n===e){Me=null;break}var t=n.sibling;if(t!==null){t.return=n.return,Me=t;break}Me=n.return}}function bu(e){for(;Me!==null;){var n=Me;try{switch(n.tag){case 0:case 11:case 15:var t=n.return;try{ol(4,n)}catch(d){At(n,t,d)}break;case 1:var s=n.stateNode;if(typeof s.componentDidMount=="function"){var a=n.return;try{s.componentDidMount()}catch(d){At(n,a,d)}}var i=n.return;try{Wo(n)}catch(d){At(n,i,d)}break;case 5:var l=n.return;try{Wo(n)}catch(d){At(n,l,d)}}}catch(d){At(n,n.return,d)}if(n===e){Me=null;break}var u=n.sibling;if(u!==null){u.return=n.return,Me=u;break}Me=n.return}}var zv=Math.ceil,zi=dr.ReactCurrentDispatcher,Rc=dr.ReactCurrentOwner,Dn=dr.ReactCurrentBatchConfig,ot=0,Kt=null,zt=null,qt=0,yn=0,gs=Mr(0),Wt=0,Sa=null,qr=0,cl=0,zc=0,aa=null,un=null,Uc=0,Is=1/0,er=null,Ui=!1,Ko=null,wr=null,Za=!1,xr=null,Vi=0,ia=0,Yo=null,vi=-1,yi=0;function ln(){return ot&6?Ot():vi!==-1?vi:vi=Ot()}function kr(e){return e.mode&1?ot&2&&qt!==0?qt&-qt:bv.transition!==null?(yi===0&&(yi=Bf()),yi):(e=pt,e!==0||(e=window.event,e=e===void 0?16:Xf(e.type)),e):1}function Rn(e,n,t,s){if(50<ia)throw ia=0,Yo=null,Error(je(185));Pa(e,t,s),(!(ot&2)||e!==Kt)&&(e===Kt&&(!(ot&2)&&(cl|=t),Wt===4&&vr(e,qt)),hn(e,s),t===1&&ot===0&&!(n.mode&1)&&(Is=Ot()+500,al&&Or()))}function hn(e,n){var t=e.callbackNode;bg(e,n);var s=Ci(e,e===Kt?qt:0);if(s===0)t!==null&&Pd(t),e.callbackNode=null,e.callbackPriority=0;else if(n=s&-s,e.callbackPriority!==n){if(t!=null&&Pd(t),n===1)e.tag===0?Nv(Su.bind(null,e)):vm(Su.bind(null,e)),yv(function(){!(ot&6)&&Or()}),t=null;else{switch(Kf(s)){case 1:t=mc;break;case 4:t=Wf;break;case 16:t=Si;break;case 536870912:t=Hf;break;default:t=Si}t=hp(t,op.bind(null,e))}e.callbackPriority=n,e.callbackNode=t}}function op(e,n){if(vi=-1,yi=0,ot&6)throw Error(je(327));var t=e.callbackNode;if(Ns()&&e.callbackNode!==t)return null;var s=Ci(e,e===Kt?qt:0);if(s===0)return null;if(s&30||s&e.expiredLanes||n)n=Wi(e,s);else{n=s;var a=ot;ot|=2;var i=dp();(Kt!==e||qt!==n)&&(er=null,Is=Ot()+500,Wr(e,n));do try{Wv();break}catch(u){cp(e,u)}while(!0);wc(),zi.current=i,ot=a,zt!==null?n=0:(Kt=null,qt=0,n=Wt)}if(n!==0){if(n===2&&(a=jo(e),a!==0&&(s=a,n=qo(e,a))),n===1)throw t=Sa,Wr(e,0),vr(e,s),hn(e,Ot()),t;if(n===6)vr(e,s);else{if(a=e.current.alternate,!(s&30)&&!Uv(a)&&(n=Wi(e,s),n===2&&(i=jo(e),i!==0&&(s=i,n=qo(e,i))),n===1))throw t=Sa,Wr(e,0),vr(e,s),hn(e,Ot()),t;switch(e.finishedWork=a,e.finishedLanes=s,n){case 0:case 1:throw Error(je(345));case 2:Fr(e,un,er);break;case 3:if(vr(e,s),(s&130023424)===s&&(n=Uc+500-Ot(),10<n)){if(Ci(e,0)!==0)break;if(a=e.suspendedLanes,(a&s)!==s){ln(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Eo(Fr.bind(null,e,un,er),n);break}Fr(e,un,er);break;case 4:if(vr(e,s),(s&4194240)===s)break;for(n=e.eventTimes,a=-1;0<s;){var l=31-Fn(s);i=1<<l,l=n[l],l>a&&(a=l),s&=~i}if(s=a,s=Ot()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*zv(s/1960))-s,10<s){e.timeoutHandle=Eo(Fr.bind(null,e,un,er),s);break}Fr(e,un,er);break;case 5:Fr(e,un,er);break;default:throw Error(je(329))}}}return hn(e,Ot()),e.callbackNode===t?op.bind(null,e):null}function qo(e,n){var t=aa;return e.current.memoizedState.isDehydrated&&(Wr(e,n).flags|=256),e=Wi(e,n),e!==2&&(n=un,un=t,n!==null&&Qo(n)),e}function Qo(e){un===null?un=e:un.push.apply(un,e)}function Uv(e){for(var n=e;;){if(n.flags&16384){var t=n.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var s=0;s<t.length;s++){var a=t[s],i=a.getSnapshot;a=a.value;try{if(!zn(i(),a))return!1}catch{return!1}}}if(t=n.child,n.subtreeFlags&16384&&t!==null)t.return=n,n=t;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function vr(e,n){for(n&=~zc,n&=~cl,e.suspendedLanes|=n,e.pingedLanes&=~n,e=e.expirationTimes;0<n;){var t=31-Fn(n),s=1<<t;e[t]=-1,n&=~s}}function Su(e){if(ot&6)throw Error(je(327));Ns();var n=Ci(e,0);if(!(n&1))return hn(e,Ot()),null;var t=Wi(e,n);if(e.tag!==0&&t===2){var s=jo(e);s!==0&&(n=s,t=qo(e,s))}if(t===1)throw t=Sa,Wr(e,0),vr(e,n),hn(e,Ot()),t;if(t===6)throw Error(je(345));return e.finishedWork=e.current.alternate,e.finishedLanes=n,Fr(e,un,er),hn(e,Ot()),null}function Vc(e,n){var t=ot;ot|=1;try{return e(n)}finally{ot=t,ot===0&&(Is=Ot()+500,al&&Or())}}function Qr(e){xr!==null&&xr.tag===0&&!(ot&6)&&Ns();var n=ot;ot|=1;var t=Dn.transition,s=pt;try{if(Dn.transition=null,pt=1,e)return e()}finally{pt=s,Dn.transition=t,ot=n,!(ot&6)&&Or()}}function Wc(){yn=gs.current,_t(gs)}function Wr(e,n){e.finishedWork=null,e.finishedLanes=0;var t=e.timeoutHandle;if(t!==-1&&(e.timeoutHandle=-1,vv(t)),zt!==null)for(t=zt.return;t!==null;){var s=t;switch(bc(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&Di();break;case 3:As(),_t(mn),_t(nn),Pc();break;case 5:Ic(s);break;case 4:As();break;case 13:_t(bt);break;case 19:_t(bt);break;case 10:kc(s.type._context);break;case 22:case 23:Wc()}t=t.return}if(Kt=e,zt=e=Er(e.current,null),qt=yn=n,Wt=0,Sa=null,zc=cl=qr=0,un=aa=null,Ur!==null){for(n=0;n<Ur.length;n++)if(t=Ur[n],s=t.interleaved,s!==null){t.interleaved=null;var a=s.next,i=t.pending;if(i!==null){var l=i.next;i.next=a,s.next=l}t.pending=s}Ur=null}return e}function cp(e,n){do{var t=zt;try{if(wc(),pi.current=Ri,Fi){for(var s=St.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}Fi=!1}if(Yr=0,Ht=Vt=St=null,ra=!1,_a=0,Rc.current=null,t===null||t.return===null){Wt=1,Sa=n,zt=null;break}e:{var i=e,l=t.return,u=t,d=n;if(n=qt,u.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var x=d,_=u,C=_.tag;if(!(_.mode&1)&&(C===0||C===11||C===15)){var N=_.alternate;N?(_.updateQueue=N.updateQueue,_.memoizedState=N.memoizedState,_.lanes=N.lanes):(_.updateQueue=null,_.memoizedState=null)}var F=uu(l);if(F!==null){F.flags&=-257,fu(F,l,u,i,n),F.mode&1&&du(i,x,n),n=F,d=x;var v=n.updateQueue;if(v===null){var b=new Set;b.add(d),n.updateQueue=b}else v.add(d);break e}else{if(!(n&1)){du(i,x,n),Hc();break e}d=Error(je(426))}}else if(Nt&&u.mode&1){var E=uu(l);if(E!==null){!(E.flags&65536)&&(E.flags|=256),fu(E,l,u,i,n),Sc(Ds(d,u));break e}}i=d=Ds(d,u),Wt!==4&&(Wt=2),aa===null?aa=[i]:aa.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,n&=-n,i.lanes|=n;var p=Km(i,d,n);su(i,p);break e;case 1:u=d;var m=i.type,y=i.stateNode;if(!(i.flags&128)&&(typeof m.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(wr===null||!wr.has(y)))){i.flags|=65536,n&=-n,i.lanes|=n;var j=Ym(i,u,n);su(i,j);break e}}i=i.return}while(i!==null)}fp(t)}catch(O){n=O,zt===t&&t!==null&&(zt=t=t.return);continue}break}while(!0)}function dp(){var e=zi.current;return zi.current=Ri,e===null?Ri:e}function Hc(){(Wt===0||Wt===3||Wt===2)&&(Wt=4),Kt===null||!(qr&268435455)&&!(cl&268435455)||vr(Kt,qt)}function Wi(e,n){var t=ot;ot|=2;var s=dp();(Kt!==e||qt!==n)&&(er=null,Wr(e,n));do try{Vv();break}catch(a){cp(e,a)}while(!0);if(wc(),ot=t,zi.current=s,zt!==null)throw Error(je(261));return Kt=null,qt=0,Wt}function Vv(){for(;zt!==null;)up(zt)}function Wv(){for(;zt!==null&&!pg();)up(zt)}function up(e){var n=pp(e.alternate,e,yn);e.memoizedProps=e.pendingProps,n===null?fp(e):zt=n,Rc.current=null}function fp(e){var n=e;do{var t=n.alternate;if(e=n.return,n.flags&32768){if(t=$v(t,n),t!==null){t.flags&=32767,zt=t;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Wt=6,zt=null;return}}else if(t=Ov(t,n,yn),t!==null){zt=t;return}if(n=n.sibling,n!==null){zt=n;return}zt=n=e}while(n!==null);Wt===0&&(Wt=5)}function Fr(e,n,t){var s=pt,a=Dn.transition;try{Dn.transition=null,pt=1,Hv(e,n,t,s)}finally{Dn.transition=a,pt=s}return null}function Hv(e,n,t,s){do Ns();while(xr!==null);if(ot&6)throw Error(je(327));t=e.finishedWork;var a=e.finishedLanes;if(t===null)return null;if(e.finishedWork=null,e.finishedLanes=0,t===e.current)throw Error(je(177));e.callbackNode=null,e.callbackPriority=0;var i=t.lanes|t.childLanes;if(Sg(e,i),e===Kt&&(zt=Kt=null,qt=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Za||(Za=!0,hp(Si,function(){return Ns(),null})),i=(t.flags&15990)!==0,t.subtreeFlags&15990||i){i=Dn.transition,Dn.transition=null;var l=pt;pt=1;var u=ot;ot|=4,Rc.current=null,Fv(e,t),ip(t,e),dv(wo),wi=!!Co,wo=Co=null,e.current=t,Rv(t),hg(),ot=u,pt=l,Dn.transition=i}else e.current=t;if(Za&&(Za=!1,xr=e,Vi=a),i=e.pendingLanes,i===0&&(wr=null),yg(t.stateNode),hn(e,Ot()),n!==null)for(s=e.onRecoverableError,t=0;t<n.length;t++)a=n[t],s(a.value,{componentStack:a.stack,digest:a.digest});if(Ui)throw Ui=!1,e=Ko,Ko=null,e;return Vi&1&&e.tag!==0&&Ns(),i=e.pendingLanes,i&1?e===Yo?ia++:(ia=0,Yo=e):ia=0,Or(),null}function Ns(){if(xr!==null){var e=Kf(Vi),n=Dn.transition,t=pt;try{if(Dn.transition=null,pt=16>e?16:e,xr===null)var s=!1;else{if(e=xr,xr=null,Vi=0,ot&6)throw Error(je(331));var a=ot;for(ot|=4,Me=e.current;Me!==null;){var i=Me,l=i.child;if(Me.flags&16){var u=i.deletions;if(u!==null){for(var d=0;d<u.length;d++){var x=u[d];for(Me=x;Me!==null;){var _=Me;switch(_.tag){case 0:case 11:case 15:sa(8,_,i)}var C=_.child;if(C!==null)C.return=_,Me=C;else for(;Me!==null;){_=Me;var N=_.sibling,F=_.return;if(rp(_),_===x){Me=null;break}if(N!==null){N.return=F,Me=N;break}Me=F}}}var v=i.alternate;if(v!==null){var b=v.child;if(b!==null){v.child=null;do{var E=b.sibling;b.sibling=null,b=E}while(b!==null)}}Me=i}}if(i.subtreeFlags&2064&&l!==null)l.return=i,Me=l;else e:for(;Me!==null;){if(i=Me,i.flags&2048)switch(i.tag){case 0:case 11:case 15:sa(9,i,i.return)}var p=i.sibling;if(p!==null){p.return=i.return,Me=p;break e}Me=i.return}}var m=e.current;for(Me=m;Me!==null;){l=Me;var y=l.child;if(l.subtreeFlags&2064&&y!==null)y.return=l,Me=y;else e:for(l=m;Me!==null;){if(u=Me,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:ol(9,u)}}catch(O){At(u,u.return,O)}if(u===l){Me=null;break e}var j=u.sibling;if(j!==null){j.return=u.return,Me=j;break e}Me=u.return}}if(ot=a,Or(),Qn&&typeof Qn.onPostCommitFiberRoot=="function")try{Qn.onPostCommitFiberRoot(el,e)}catch{}s=!0}return s}finally{pt=t,Dn.transition=n}}return!1}function Cu(e,n,t){n=Ds(t,n),n=Km(e,n,1),e=Cr(e,n,1),n=ln(),e!==null&&(Pa(e,1,n),hn(e,n))}function At(e,n,t){if(e.tag===3)Cu(e,e,t);else for(;n!==null;){if(n.tag===3){Cu(n,e,t);break}else if(n.tag===1){var s=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(wr===null||!wr.has(s))){e=Ds(t,e),e=Ym(n,e,1),n=Cr(n,e,1),e=ln(),n!==null&&(Pa(n,1,e),hn(n,e));break}}n=n.return}}function Bv(e,n,t){var s=e.pingCache;s!==null&&s.delete(n),n=ln(),e.pingedLanes|=e.suspendedLanes&t,Kt===e&&(qt&t)===t&&(Wt===4||Wt===3&&(qt&130023424)===qt&&500>Ot()-Uc?Wr(e,0):zc|=t),hn(e,n)}function mp(e,n){n===0&&(e.mode&1?(n=Wa,Wa<<=1,!(Wa&130023424)&&(Wa=4194304)):n=1);var t=ln();e=lr(e,n),e!==null&&(Pa(e,n,t),hn(e,t))}function Kv(e){var n=e.memoizedState,t=0;n!==null&&(t=n.retryLane),mp(e,t)}function Yv(e,n){var t=0;switch(e.tag){case 13:var s=e.stateNode,a=e.memoizedState;a!==null&&(t=a.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(je(314))}s!==null&&s.delete(n),mp(e,t)}var pp;pp=function(e,n,t){if(e!==null)if(e.memoizedProps!==n.pendingProps||mn.current)fn=!0;else{if(!(e.lanes&t)&&!(n.flags&128))return fn=!1,Mv(e,n,t);fn=!!(e.flags&131072)}else fn=!1,Nt&&n.flags&1048576&&ym(n,Ti,n.index);switch(n.lanes=0,n.tag){case 2:var s=n.type;gi(e,n),e=n.pendingProps;var a=ws(n,nn.current);_s(n,t),a=Mc(null,n,s,e,a,t);var i=Oc();return n.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,pn(s)?(i=!0,Ii(n)):i=!1,n.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Ac(n),a.updater=ll,n.stateNode=a,a._reactInternals=n,Oo(n,s,e,t),n=Fo(null,n,s,!0,i,t)):(n.tag=0,Nt&&i&&Nc(n),an(null,n,a,t),n=n.child),n;case 16:s=n.elementType;e:{switch(gi(e,n),e=n.pendingProps,a=s._init,s=a(s._payload),n.type=s,a=n.tag=Qv(s),e=On(s,e),a){case 0:n=Lo(null,n,s,e,t);break e;case 1:n=hu(null,n,s,e,t);break e;case 11:n=mu(null,n,s,e,t);break e;case 14:n=pu(null,n,s,On(s.type,e),t);break e}throw Error(je(306,s,""))}return n;case 0:return s=n.type,a=n.pendingProps,a=n.elementType===s?a:On(s,a),Lo(e,n,s,a,t);case 1:return s=n.type,a=n.pendingProps,a=n.elementType===s?a:On(s,a),hu(e,n,s,a,t);case 3:e:{if(Gm(n),e===null)throw Error(je(387));s=n.pendingProps,i=n.memoizedState,a=i.element,Sm(e,n),$i(n,s,null,t);var l=n.memoizedState;if(s=l.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},n.updateQueue.baseState=i,n.memoizedState=i,n.flags&256){a=Ds(Error(je(423)),n),n=gu(e,n,s,t,a);break e}else if(s!==a){a=Ds(Error(je(424)),n),n=gu(e,n,s,t,a);break e}else for(xn=Sr(n.stateNode.containerInfo.firstChild),jn=n,Nt=!0,Ln=null,t=Nm(n,null,s,t),n.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(ks(),s===a){n=or(e,n,t);break e}an(e,n,s,t)}n=n.child}return n;case 5:return Cm(n),e===null&&Po(n),s=n.type,a=n.pendingProps,i=e!==null?e.memoizedProps:null,l=a.children,ko(s,a)?l=null:i!==null&&ko(s,i)&&(n.flags|=32),Jm(e,n),an(e,n,l,t),n.child;case 6:return e===null&&Po(n),null;case 13:return Xm(e,n,t);case 4:return Dc(n,n.stateNode.containerInfo),s=n.pendingProps,e===null?n.child=Es(n,null,s,t):an(e,n,s,t),n.child;case 11:return s=n.type,a=n.pendingProps,a=n.elementType===s?a:On(s,a),mu(e,n,s,a,t);case 7:return an(e,n,n.pendingProps,t),n.child;case 8:return an(e,n,n.pendingProps.children,t),n.child;case 12:return an(e,n,n.pendingProps.children,t),n.child;case 10:e:{if(s=n.type._context,a=n.pendingProps,i=n.memoizedProps,l=a.value,xt(Mi,s._currentValue),s._currentValue=l,i!==null)if(zn(i.value,l)){if(i.children===a.children&&!mn.current){n=or(e,n,t);break e}}else for(i=n.child,i!==null&&(i.return=n);i!==null;){var u=i.dependencies;if(u!==null){l=i.child;for(var d=u.firstContext;d!==null;){if(d.context===s){if(i.tag===1){d=sr(-1,t&-t),d.tag=2;var x=i.updateQueue;if(x!==null){x=x.shared;var _=x.pending;_===null?d.next=d:(d.next=_.next,_.next=d),x.pending=d}}i.lanes|=t,d=i.alternate,d!==null&&(d.lanes|=t),To(i.return,t,n),u.lanes|=t;break}d=d.next}}else if(i.tag===10)l=i.type===n.type?null:i.child;else if(i.tag===18){if(l=i.return,l===null)throw Error(je(341));l.lanes|=t,u=l.alternate,u!==null&&(u.lanes|=t),To(l,t,n),l=i.sibling}else l=i.child;if(l!==null)l.return=i;else for(l=i;l!==null;){if(l===n){l=null;break}if(i=l.sibling,i!==null){i.return=l.return,l=i;break}l=l.return}i=l}an(e,n,a.children,t),n=n.child}return n;case 9:return a=n.type,s=n.pendingProps.children,_s(n,t),a=In(a),s=s(a),n.flags|=1,an(e,n,s,t),n.child;case 14:return s=n.type,a=On(s,n.pendingProps),a=On(s.type,a),pu(e,n,s,a,t);case 15:return qm(e,n,n.type,n.pendingProps,t);case 17:return s=n.type,a=n.pendingProps,a=n.elementType===s?a:On(s,a),gi(e,n),n.tag=1,pn(s)?(e=!0,Ii(n)):e=!1,_s(n,t),Bm(n,s,a),Oo(n,s,a,t),Fo(null,n,s,!0,e,t);case 19:return Zm(e,n,t);case 22:return Qm(e,n,t)}throw Error(je(156,n.tag))};function hp(e,n){return Vf(e,n)}function qv(e,n,t,s){this.tag=e,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function An(e,n,t,s){return new qv(e,n,t,s)}function Bc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Qv(e){if(typeof e=="function")return Bc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===dc)return 11;if(e===uc)return 14}return 2}function Er(e,n){var t=e.alternate;return t===null?(t=An(e.tag,n,e.key,e.mode),t.elementType=e.elementType,t.type=e.type,t.stateNode=e.stateNode,t.alternate=e,e.alternate=t):(t.pendingProps=n,t.type=e.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=e.flags&14680064,t.childLanes=e.childLanes,t.lanes=e.lanes,t.child=e.child,t.memoizedProps=e.memoizedProps,t.memoizedState=e.memoizedState,t.updateQueue=e.updateQueue,n=e.dependencies,t.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},t.sibling=e.sibling,t.index=e.index,t.ref=e.ref,t}function xi(e,n,t,s,a,i){var l=2;if(s=e,typeof e=="function")Bc(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case is:return Hr(t.children,a,i,n);case cc:l=8,a|=8;break;case so:return e=An(12,t,n,a|2),e.elementType=so,e.lanes=i,e;case ao:return e=An(13,t,n,a),e.elementType=ao,e.lanes=i,e;case io:return e=An(19,t,n,a),e.elementType=io,e.lanes=i,e;case Cf:return dl(t,a,i,n);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case bf:l=10;break e;case Sf:l=9;break e;case dc:l=11;break e;case uc:l=14;break e;case pr:l=16,s=null;break e}throw Error(je(130,e==null?e:typeof e,""))}return n=An(l,t,n,a),n.elementType=e,n.type=s,n.lanes=i,n}function Hr(e,n,t,s){return e=An(7,e,s,n),e.lanes=t,e}function dl(e,n,t,s){return e=An(22,e,s,n),e.elementType=Cf,e.lanes=t,e.stateNode={isHidden:!1},e}function Hl(e,n,t){return e=An(6,e,null,n),e.lanes=t,e}function Bl(e,n,t){return n=An(4,e.children!==null?e.children:[],e.key,n),n.lanes=t,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}function Jv(e,n,t,s,a){this.tag=n,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Cl(0),this.expirationTimes=Cl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Cl(0),this.identifierPrefix=s,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Kc(e,n,t,s,a,i,l,u,d){return e=new Jv(e,n,t,u,d),n===1?(n=1,i===!0&&(n|=8)):n=0,i=An(3,null,null,n),e.current=i,i.stateNode=e,i.memoizedState={element:s,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ac(i),e}function Gv(e,n,t){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:as,key:s==null?null:""+s,children:e,containerInfo:n,implementation:t}}function gp(e){if(!e)return Ir;e=e._reactInternals;e:{if(Zr(e)!==e||e.tag!==1)throw Error(je(170));var n=e;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(pn(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error(je(171))}if(e.tag===1){var t=e.type;if(pn(t))return gm(e,t,n)}return n}function vp(e,n,t,s,a,i,l,u,d){return e=Kc(t,s,!0,e,a,i,l,u,d),e.context=gp(null),t=e.current,s=ln(),a=kr(t),i=sr(s,a),i.callback=n??null,Cr(t,i,a),e.current.lanes=a,Pa(e,a,s),hn(e,s),e}function ul(e,n,t,s){var a=n.current,i=ln(),l=kr(a);return t=gp(t),n.context===null?n.context=t:n.pendingContext=t,n=sr(i,l),n.payload={element:e},s=s===void 0?null:s,s!==null&&(n.callback=s),e=Cr(a,n,l),e!==null&&(Rn(e,a,l,i),mi(e,a,l)),l}function Hi(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function wu(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var t=e.retryLane;e.retryLane=t!==0&&t<n?t:n}}function Yc(e,n){wu(e,n),(e=e.alternate)&&wu(e,n)}function Xv(){return null}var yp=typeof reportError=="function"?reportError:function(e){console.error(e)};function qc(e){this._internalRoot=e}fl.prototype.render=qc.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(je(409));ul(e,n,null,null)};fl.prototype.unmount=qc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;Qr(function(){ul(null,e,null,null)}),n[ir]=null}};function fl(e){this._internalRoot=e}fl.prototype.unstable_scheduleHydration=function(e){if(e){var n=Qf();e={blockedOn:null,target:e,priority:n};for(var t=0;t<gr.length&&n!==0&&n<gr[t].priority;t++);gr.splice(t,0,e),t===0&&Gf(e)}};function Qc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ml(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function ku(){}function Zv(e,n,t,s,a){if(a){if(typeof s=="function"){var i=s;s=function(){var x=Hi(l);i.call(x)}}var l=vp(n,s,e,0,null,!1,!1,"",ku);return e._reactRootContainer=l,e[ir]=l.current,ga(e.nodeType===8?e.parentNode:e),Qr(),l}for(;a=e.lastChild;)e.removeChild(a);if(typeof s=="function"){var u=s;s=function(){var x=Hi(d);u.call(x)}}var d=Kc(e,0,!1,null,null,!1,!1,"",ku);return e._reactRootContainer=d,e[ir]=d.current,ga(e.nodeType===8?e.parentNode:e),Qr(function(){ul(n,d,t,s)}),d}function pl(e,n,t,s,a){var i=t._reactRootContainer;if(i){var l=i;if(typeof a=="function"){var u=a;a=function(){var d=Hi(l);u.call(d)}}ul(n,l,e,a)}else l=Zv(t,n,e,a,s);return Hi(l)}Yf=function(e){switch(e.tag){case 3:var n=e.stateNode;if(n.current.memoizedState.isDehydrated){var t=Js(n.pendingLanes);t!==0&&(pc(n,t|1),hn(n,Ot()),!(ot&6)&&(Is=Ot()+500,Or()))}break;case 13:Qr(function(){var s=lr(e,1);if(s!==null){var a=ln();Rn(s,e,1,a)}}),Yc(e,1)}};hc=function(e){if(e.tag===13){var n=lr(e,134217728);if(n!==null){var t=ln();Rn(n,e,134217728,t)}Yc(e,134217728)}};qf=function(e){if(e.tag===13){var n=kr(e),t=lr(e,n);if(t!==null){var s=ln();Rn(t,e,n,s)}Yc(e,n)}};Qf=function(){return pt};Jf=function(e,n){var t=pt;try{return pt=e,n()}finally{pt=t}};vo=function(e,n,t){switch(n){case"input":if(co(e,t),n=t.name,t.type==="radio"&&n!=null){for(t=e;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<t.length;n++){var s=t[n];if(s!==e&&s.form===e.form){var a=sl(s);if(!a)throw Error(je(90));kf(s),co(s,a)}}}break;case"textarea":Af(e,t);break;case"select":n=t.value,n!=null&&vs(e,!!t.multiple,n,!1)}};$f=Vc;Lf=Qr;var ey={usingClientEntryPoint:!1,Events:[Ma,ds,sl,Mf,Of,Vc]},Bs={findFiberByHostInstance:zr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ty={bundleType:Bs.bundleType,version:Bs.version,rendererPackageName:Bs.rendererPackageName,rendererConfig:Bs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:dr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=zf(e),e===null?null:e.stateNode},findFiberByHostInstance:Bs.findFiberByHostInstance||Xv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ei=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ei.isDisabled&&ei.supportsFiber)try{el=ei.inject(ty),Qn=ei}catch{}}Nn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ey;Nn.createPortal=function(e,n){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Qc(n))throw Error(je(200));return Gv(e,n,null,t)};Nn.createRoot=function(e,n){if(!Qc(e))throw Error(je(299));var t=!1,s="",a=yp;return n!=null&&(n.unstable_strictMode===!0&&(t=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),n=Kc(e,1,!1,null,null,t,!1,s,a),e[ir]=n.current,ga(e.nodeType===8?e.parentNode:e),new qc(n)};Nn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(je(188)):(e=Object.keys(e).join(","),Error(je(268,e)));return e=zf(n),e=e===null?null:e.stateNode,e};Nn.flushSync=function(e){return Qr(e)};Nn.hydrate=function(e,n,t){if(!ml(n))throw Error(je(200));return pl(null,e,n,!0,t)};Nn.hydrateRoot=function(e,n,t){if(!Qc(e))throw Error(je(405));var s=t!=null&&t.hydratedSources||null,a=!1,i="",l=yp;if(t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(l=t.onRecoverableError)),n=vp(n,null,e,1,t??null,a,!1,i,l),e[ir]=n.current,ga(e),s)for(e=0;e<s.length;e++)t=s[e],a=t._getVersion,a=a(t._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[t,a]:n.mutableSourceEagerHydrationData.push(t,a);return new fl(n)};Nn.render=function(e,n,t){if(!ml(n))throw Error(je(200));return pl(null,e,n,!1,t)};Nn.unmountComponentAtNode=function(e){if(!ml(e))throw Error(je(40));return e._reactRootContainer?(Qr(function(){pl(null,null,e,!1,function(){e._reactRootContainer=null,e[ir]=null})}),!0):!1};Nn.unstable_batchedUpdates=Vc;Nn.unstable_renderSubtreeIntoContainer=function(e,n,t,s){if(!ml(t))throw Error(je(200));if(e==null||e._reactInternals===void 0)throw Error(je(38));return pl(e,n,t,!1,s)};Nn.version="18.3.1-next-f1338f8080-20240426";function xp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(xp)}catch(e){console.error(e)}}xp(),xf.exports=Nn;var Bi=xf.exports,Eu=Bi;no.createRoot=Eu.createRoot,no.hydrateRoot=Eu.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ca(){return Ca=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Ca.apply(this,arguments)}var jr;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(jr||(jr={}));const Au="popstate";function ny(e){e===void 0&&(e={});function n(s,a){let{pathname:i,search:l,hash:u}=s.location;return Jo("",{pathname:i,search:l,hash:u},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(s,a){return typeof a=="string"?a:Ki(a)}return sy(n,t,null,e)}function Ct(e,n){if(e===!1||e===null||typeof e>"u")throw new Error(n)}function Jc(e,n){if(!e){typeof console<"u"&&console.warn(n);try{throw new Error(n)}catch{}}}function ry(){return Math.random().toString(36).substr(2,8)}function Du(e,n){return{usr:e.state,key:e.key,idx:n}}function Jo(e,n,t,s){return t===void 0&&(t=null),Ca({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof n=="string"?$s(n):n,{state:t,key:n&&n.key||s||ry()})}function Ki(e){let{pathname:n="/",search:t="",hash:s=""}=e;return t&&t!=="?"&&(n+=t.charAt(0)==="?"?t:"?"+t),s&&s!=="#"&&(n+=s.charAt(0)==="#"?s:"#"+s),n}function $s(e){let n={};if(e){let t=e.indexOf("#");t>=0&&(n.hash=e.substr(t),e=e.substr(0,t));let s=e.indexOf("?");s>=0&&(n.search=e.substr(s),e=e.substr(0,s)),e&&(n.pathname=e)}return n}function sy(e,n,t,s){s===void 0&&(s={});let{window:a=document.defaultView,v5Compat:i=!1}=s,l=a.history,u=jr.Pop,d=null,x=_();x==null&&(x=0,l.replaceState(Ca({},l.state,{idx:x}),""));function _(){return(l.state||{idx:null}).idx}function C(){u=jr.Pop;let E=_(),p=E==null?null:E-x;x=E,d&&d({action:u,location:b.location,delta:p})}function N(E,p){u=jr.Push;let m=Jo(b.location,E,p);x=_()+1;let y=Du(m,x),j=b.createHref(m);try{l.pushState(y,"",j)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;a.location.assign(j)}i&&d&&d({action:u,location:b.location,delta:1})}function F(E,p){u=jr.Replace;let m=Jo(b.location,E,p);x=_();let y=Du(m,x),j=b.createHref(m);l.replaceState(y,"",j),i&&d&&d({action:u,location:b.location,delta:0})}function v(E){let p=a.location.origin!=="null"?a.location.origin:a.location.href,m=typeof E=="string"?E:Ki(E);return m=m.replace(/ $/,"%20"),Ct(p,"No window.location.(origin|href) available to create URL for href: "+m),new URL(m,p)}let b={get action(){return u},get location(){return e(a,l)},listen(E){if(d)throw new Error("A history only accepts one active listener");return a.addEventListener(Au,C),d=E,()=>{a.removeEventListener(Au,C),d=null}},createHref(E){return n(a,E)},createURL:v,encodeLocation(E){let p=v(E);return{pathname:p.pathname,search:p.search,hash:p.hash}},push:N,replace:F,go(E){return l.go(E)}};return b}var Iu;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Iu||(Iu={}));function ay(e,n,t){return t===void 0&&(t="/"),iy(e,n,t)}function iy(e,n,t,s){let a=typeof n=="string"?$s(n):n,i=Ps(a.pathname||"/",t);if(i==null)return null;let l=jp(e);ly(l);let u=null;for(let d=0;u==null&&d<l.length;++d){let x=yy(i);u=gy(l[d],x)}return u}function jp(e,n,t,s){n===void 0&&(n=[]),t===void 0&&(t=[]),s===void 0&&(s="");let a=(i,l,u)=>{let d={relativePath:u===void 0?i.path||"":u,caseSensitive:i.caseSensitive===!0,childrenIndex:l,route:i};d.relativePath.startsWith("/")&&(Ct(d.relativePath.startsWith(s),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(s.length));let x=Ar([s,d.relativePath]),_=t.concat(d);i.children&&i.children.length>0&&(Ct(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+x+'".')),jp(i.children,n,_,x)),!(i.path==null&&!i.index)&&n.push({path:x,score:py(x,i.index),routesMeta:_})};return e.forEach((i,l)=>{var u;if(i.path===""||!((u=i.path)!=null&&u.includes("?")))a(i,l);else for(let d of _p(i.path))a(i,l,d)}),n}function _p(e){let n=e.split("/");if(n.length===0)return[];let[t,...s]=n,a=t.endsWith("?"),i=t.replace(/\?$/,"");if(s.length===0)return a?[i,""]:[i];let l=_p(s.join("/")),u=[];return u.push(...l.map(d=>d===""?i:[i,d].join("/"))),a&&u.push(...l),u.map(d=>e.startsWith("/")&&d===""?"/":d)}function ly(e){e.sort((n,t)=>n.score!==t.score?t.score-n.score:hy(n.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}const oy=/^:[\w-]+$/,cy=3,dy=2,uy=1,fy=10,my=-2,Pu=e=>e==="*";function py(e,n){let t=e.split("/"),s=t.length;return t.some(Pu)&&(s+=my),n&&(s+=dy),t.filter(a=>!Pu(a)).reduce((a,i)=>a+(oy.test(i)?cy:i===""?uy:fy),s)}function hy(e,n){return e.length===n.length&&e.slice(0,-1).every((s,a)=>s===n[a])?e[e.length-1]-n[n.length-1]:0}function gy(e,n,t){let{routesMeta:s}=e,a={},i="/",l=[];for(let u=0;u<s.length;++u){let d=s[u],x=u===s.length-1,_=i==="/"?n:n.slice(i.length)||"/",C=Go({path:d.relativePath,caseSensitive:d.caseSensitive,end:x},_),N=d.route;if(!C)return null;Object.assign(a,C.params),l.push({params:a,pathname:Ar([i,C.pathname]),pathnameBase:by(Ar([i,C.pathnameBase])),route:N}),C.pathnameBase!=="/"&&(i=Ar([i,C.pathnameBase]))}return l}function Go(e,n){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[t,s]=vy(e.path,e.caseSensitive,e.end),a=n.match(t);if(!a)return null;let i=a[0],l=i.replace(/(.)\/+$/,"$1"),u=a.slice(1);return{params:s.reduce((x,_,C)=>{let{paramName:N,isOptional:F}=_;if(N==="*"){let b=u[C]||"";l=i.slice(0,i.length-b.length).replace(/(.)\/+$/,"$1")}const v=u[C];return F&&!v?x[N]=void 0:x[N]=(v||"").replace(/%2F/g,"/"),x},{}),pathname:i,pathnameBase:l,pattern:e}}function vy(e,n,t){n===void 0&&(n=!1),t===void 0&&(t=!0),Jc(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let s=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,d)=>(s.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(s.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,n?void 0:"i"),s]}function yy(e){try{return e.split("/").map(n=>decodeURIComponent(n).replace(/\//g,"%2F")).join("/")}catch(n){return Jc(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+n+").")),e}}function Ps(e,n){if(n==="/")return e;if(!e.toLowerCase().startsWith(n.toLowerCase()))return null;let t=n.endsWith("/")?n.length-1:n.length,s=e.charAt(t);return s&&s!=="/"?null:e.slice(t)||"/"}const xy=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,jy=e=>xy.test(e);function _y(e,n){n===void 0&&(n="/");let{pathname:t,search:s="",hash:a=""}=typeof e=="string"?$s(e):e,i;if(t)if(jy(t))i=t;else{if(t.includes("//")){let l=t;t=t.replace(/\/\/+/g,"/"),Jc(!1,"Pathnames cannot have embedded double slashes - normalizing "+(l+" -> "+t))}t.startsWith("/")?i=Tu(t.substring(1),"/"):i=Tu(t,n)}else i=n;return{pathname:i,search:Sy(s),hash:Cy(a)}}function Tu(e,n){let t=n.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function Kl(e,n,t,s){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+n+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Ny(e){return e.filter((n,t)=>t===0||n.route.path&&n.route.path.length>0)}function Gc(e,n){let t=Ny(e);return n?t.map((s,a)=>a===t.length-1?s.pathname:s.pathnameBase):t.map(s=>s.pathnameBase)}function Xc(e,n,t,s){s===void 0&&(s=!1);let a;typeof e=="string"?a=$s(e):(a=Ca({},e),Ct(!a.pathname||!a.pathname.includes("?"),Kl("?","pathname","search",a)),Ct(!a.pathname||!a.pathname.includes("#"),Kl("#","pathname","hash",a)),Ct(!a.search||!a.search.includes("#"),Kl("#","search","hash",a)));let i=e===""||a.pathname==="",l=i?"/":a.pathname,u;if(l==null)u=t;else{let C=n.length-1;if(!s&&l.startsWith("..")){let N=l.split("/");for(;N[0]==="..";)N.shift(),C-=1;a.pathname=N.join("/")}u=C>=0?n[C]:"/"}let d=_y(a,u),x=l&&l!=="/"&&l.endsWith("/"),_=(i||l===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(x||_)&&(d.pathname+="/"),d}const Ar=e=>e.join("/").replace(/\/\/+/g,"/"),by=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Sy=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Cy=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function wy(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Np=["post","put","patch","delete"];new Set(Np);const ky=["get",...Np];new Set(ky);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function wa(){return wa=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},wa.apply(this,arguments)}const hl=o.createContext(null),bp=o.createContext(null),ur=o.createContext(null),gl=o.createContext(null),Xn=o.createContext({outlet:null,matches:[],isDataRoute:!1}),Sp=o.createContext(null);function Ey(e,n){let{relative:t}=n===void 0?{}:n;Ls()||Ct(!1);let{basename:s,navigator:a}=o.useContext(ur),{hash:i,pathname:l,search:u}=vl(e,{relative:t}),d=l;return s!=="/"&&(d=l==="/"?s:Ar([s,l])),a.createHref({pathname:d,search:u,hash:i})}function Ls(){return o.useContext(gl)!=null}function Jt(){return Ls()||Ct(!1),o.useContext(gl).location}function Cp(e){o.useContext(ur).static||o.useLayoutEffect(e)}function gt(){let{isDataRoute:e}=o.useContext(Xn);return e?Wy():Ay()}function Ay(){Ls()||Ct(!1);let e=o.useContext(hl),{basename:n,future:t,navigator:s}=o.useContext(ur),{matches:a}=o.useContext(Xn),{pathname:i}=Jt(),l=JSON.stringify(Gc(a,t.v7_relativeSplatPath)),u=o.useRef(!1);return Cp(()=>{u.current=!0}),o.useCallback(function(x,_){if(_===void 0&&(_={}),!u.current)return;if(typeof x=="number"){s.go(x);return}let C=Xc(x,JSON.parse(l),i,_.relative==="path");e==null&&n!=="/"&&(C.pathname=C.pathname==="/"?n:Ar([n,C.pathname])),(_.replace?s.replace:s.push)(C,_.state,_)},[n,s,l,i,e])}const Dy=o.createContext(null);function Iy(e){let n=o.useContext(Xn).outlet;return n&&o.createElement(Dy.Provider,{value:e},n)}function Tn(){let{matches:e}=o.useContext(Xn),n=e[e.length-1];return n?n.params:{}}function vl(e,n){let{relative:t}=n===void 0?{}:n,{future:s}=o.useContext(ur),{matches:a}=o.useContext(Xn),{pathname:i}=Jt(),l=JSON.stringify(Gc(a,s.v7_relativeSplatPath));return o.useMemo(()=>Xc(e,JSON.parse(l),i,t==="path"),[e,l,i,t])}function Py(e,n){return Ty(e,n)}function Ty(e,n,t,s){Ls()||Ct(!1);let{navigator:a}=o.useContext(ur),{matches:i}=o.useContext(Xn),l=i[i.length-1],u=l?l.params:{};l&&l.pathname;let d=l?l.pathnameBase:"/";l&&l.route;let x=Jt(),_;if(n){var C;let E=typeof n=="string"?$s(n):n;d==="/"||(C=E.pathname)!=null&&C.startsWith(d)||Ct(!1),_=E}else _=x;let N=_.pathname||"/",F=N;if(d!=="/"){let E=d.replace(/^\//,"").split("/");F="/"+N.replace(/^\//,"").split("/").slice(E.length).join("/")}let v=ay(e,{pathname:F}),b=Fy(v&&v.map(E=>Object.assign({},E,{params:Object.assign({},u,E.params),pathname:Ar([d,a.encodeLocation?a.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?d:Ar([d,a.encodeLocation?a.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),i,t,s);return n&&b?o.createElement(gl.Provider,{value:{location:wa({pathname:"/",search:"",hash:"",state:null,key:"default"},_),navigationType:jr.Pop}},b):b}function My(){let e=Vy(),n=wy(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),t=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return o.createElement(o.Fragment,null,o.createElement("h2",null,"Unexpected Application Error!"),o.createElement("h3",{style:{fontStyle:"italic"}},n),t?o.createElement("pre",{style:a},t):null,null)}const Oy=o.createElement(My,null);class $y extends o.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,t){return t.location!==n.location||t.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:t.error,location:t.location,revalidation:n.revalidation||t.revalidation}}componentDidCatch(n,t){console.error("React Router caught the following error during render",n,t)}render(){return this.state.error!==void 0?o.createElement(Xn.Provider,{value:this.props.routeContext},o.createElement(Sp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Ly(e){let{routeContext:n,match:t,children:s}=e,a=o.useContext(hl);return a&&a.static&&a.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=t.route.id),o.createElement(Xn.Provider,{value:n},s)}function Fy(e,n,t,s){var a;if(n===void 0&&(n=[]),t===void 0&&(t=null),s===void 0&&(s=null),e==null){var i;if(!t)return null;if(t.errors)e=t.matches;else if((i=s)!=null&&i.v7_partialHydration&&n.length===0&&!t.initialized&&t.matches.length>0)e=t.matches;else return null}let l=e,u=(a=t)==null?void 0:a.errors;if(u!=null){let _=l.findIndex(C=>C.route.id&&(u==null?void 0:u[C.route.id])!==void 0);_>=0||Ct(!1),l=l.slice(0,Math.min(l.length,_+1))}let d=!1,x=-1;if(t&&s&&s.v7_partialHydration)for(let _=0;_<l.length;_++){let C=l[_];if((C.route.HydrateFallback||C.route.hydrateFallbackElement)&&(x=_),C.route.id){let{loaderData:N,errors:F}=t,v=C.route.loader&&N[C.route.id]===void 0&&(!F||F[C.route.id]===void 0);if(C.route.lazy||v){d=!0,x>=0?l=l.slice(0,x+1):l=[l[0]];break}}}return l.reduceRight((_,C,N)=>{let F,v=!1,b=null,E=null;t&&(F=u&&C.route.id?u[C.route.id]:void 0,b=C.route.errorElement||Oy,d&&(x<0&&N===0?(Hy("route-fallback"),v=!0,E=null):x===N&&(v=!0,E=C.route.hydrateFallbackElement||null)));let p=n.concat(l.slice(0,N+1)),m=()=>{let y;return F?y=b:v?y=E:C.route.Component?y=o.createElement(C.route.Component,null):C.route.element?y=C.route.element:y=_,o.createElement(Ly,{match:C,routeContext:{outlet:_,matches:p,isDataRoute:t!=null},children:y})};return t&&(C.route.ErrorBoundary||C.route.errorElement||N===0)?o.createElement($y,{location:t.location,revalidation:t.revalidation,component:b,error:F,children:m(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):m()},null)}var wp=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(wp||{}),kp=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(kp||{});function Ry(e){let n=o.useContext(hl);return n||Ct(!1),n}function zy(e){let n=o.useContext(bp);return n||Ct(!1),n}function Uy(e){let n=o.useContext(Xn);return n||Ct(!1),n}function Ep(e){let n=Uy(),t=n.matches[n.matches.length-1];return t.route.id||Ct(!1),t.route.id}function Vy(){var e;let n=o.useContext(Sp),t=zy(),s=Ep();return n!==void 0?n:(e=t.errors)==null?void 0:e[s]}function Wy(){let{router:e}=Ry(wp.UseNavigateStable),n=Ep(kp.UseNavigateStable),t=o.useRef(!1);return Cp(()=>{t.current=!0}),o.useCallback(function(a,i){i===void 0&&(i={}),t.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,wa({fromRouteId:n},i)))},[e,n])}const Mu={};function Hy(e,n,t){Mu[e]||(Mu[e]=!0)}function By(e,n){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Ou(e){let{to:n,replace:t,state:s,relative:a}=e;Ls()||Ct(!1);let{future:i,static:l}=o.useContext(ur),{matches:u}=o.useContext(Xn),{pathname:d}=Jt(),x=gt(),_=Xc(n,Gc(u,i.v7_relativeSplatPath),d,a==="path"),C=JSON.stringify(_);return o.useEffect(()=>x(JSON.parse(C),{replace:t,state:s,relative:a}),[x,C,a,t,s]),null}function Ky(e){return Iy(e.context)}function rt(e){Ct(!1)}function Yy(e){let{basename:n="/",children:t=null,location:s,navigationType:a=jr.Pop,navigator:i,static:l=!1,future:u}=e;Ls()&&Ct(!1);let d=n.replace(/^\/*/,"/"),x=o.useMemo(()=>({basename:d,navigator:i,static:l,future:wa({v7_relativeSplatPath:!1},u)}),[d,u,i,l]);typeof s=="string"&&(s=$s(s));let{pathname:_="/",search:C="",hash:N="",state:F=null,key:v="default"}=s,b=o.useMemo(()=>{let E=Ps(_,d);return E==null?null:{location:{pathname:E,search:C,hash:N,state:F,key:v},navigationType:a}},[d,_,C,N,F,v,a]);return b==null?null:o.createElement(ur.Provider,{value:x},o.createElement(gl.Provider,{children:t,value:b}))}function qy(e){let{children:n,location:t}=e;return Py(Xo(n),t)}new Promise(()=>{});function Xo(e,n){n===void 0&&(n=[]);let t=[];return o.Children.forEach(e,(s,a)=>{if(!o.isValidElement(s))return;let i=[...n,a];if(s.type===o.Fragment){t.push.apply(t,Xo(s.props.children,i));return}s.type!==rt&&Ct(!1),!s.props.index||!s.props.children||Ct(!1);let l={id:s.props.id||i.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(l.children=Xo(s.props.children,i)),t.push(l)}),t}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Yi(){return Yi=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Yi.apply(this,arguments)}function Ap(e,n){if(e==null)return{};var t={},s=Object.keys(e),a,i;for(i=0;i<s.length;i++)a=s[i],!(n.indexOf(a)>=0)&&(t[a]=e[a]);return t}function Qy(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Jy(e,n){return e.button===0&&(!n||n==="_self")&&!Qy(e)}function Zo(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((n,t)=>{let s=e[t];return n.concat(Array.isArray(s)?s.map(a=>[t,a]):[[t,s]])},[]))}function Gy(e,n){let t=Zo(e);return n&&n.forEach((s,a)=>{t.has(a)||n.getAll(a).forEach(i=>{t.append(a,i)})}),t}const Xy=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Zy=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],ex="6";try{window.__reactRouterVersion=ex}catch{}const tx=o.createContext({isTransitioning:!1}),nx="startTransition",$u=Bh[nx];function rx(e){let{basename:n,children:t,future:s,window:a}=e,i=o.useRef();i.current==null&&(i.current=ny({window:a,v5Compat:!0}));let l=i.current,[u,d]=o.useState({action:l.action,location:l.location}),{v7_startTransition:x}=s||{},_=o.useCallback(C=>{x&&$u?$u(()=>d(C)):d(C)},[d,x]);return o.useLayoutEffect(()=>l.listen(_),[l,_]),o.useEffect(()=>By(s),[s]),o.createElement(Yy,{basename:n,children:t,location:u.location,navigationType:u.action,navigator:l,future:s})}const sx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ax=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,et=o.forwardRef(function(n,t){let{onClick:s,relative:a,reloadDocument:i,replace:l,state:u,target:d,to:x,preventScrollReset:_,viewTransition:C}=n,N=Ap(n,Xy),{basename:F}=o.useContext(ur),v,b=!1;if(typeof x=="string"&&ax.test(x)&&(v=x,sx))try{let y=new URL(window.location.href),j=x.startsWith("//")?new URL(y.protocol+x):new URL(x),O=Ps(j.pathname,F);j.origin===y.origin&&O!=null?x=O+j.search+j.hash:b=!0}catch{}let E=Ey(x,{relative:a}),p=lx(x,{replace:l,state:u,target:d,preventScrollReset:_,relative:a,viewTransition:C});function m(y){s&&s(y),y.defaultPrevented||p(y)}return o.createElement("a",Yi({},N,{href:v||E,onClick:b||i?s:m,ref:t,target:d}))}),Lu=o.forwardRef(function(n,t){let{"aria-current":s="page",caseSensitive:a=!1,className:i="",end:l=!1,style:u,to:d,viewTransition:x,children:_}=n,C=Ap(n,Zy),N=vl(d,{relative:C.relative}),F=Jt(),v=o.useContext(bp),{navigator:b,basename:E}=o.useContext(ur),p=v!=null&&ox(N)&&x===!0,m=b.encodeLocation?b.encodeLocation(N).pathname:N.pathname,y=F.pathname,j=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;a||(y=y.toLowerCase(),j=j?j.toLowerCase():null,m=m.toLowerCase()),j&&E&&(j=Ps(j,E)||j);const O=m!=="/"&&m.endsWith("/")?m.length-1:m.length;let k=y===m||!l&&y.startsWith(m)&&y.charAt(O)==="/",I=j!=null&&(j===m||!l&&j.startsWith(m)&&j.charAt(m.length)==="/"),M={isActive:k,isPending:I,isTransitioning:p},X=k?s:void 0,se;typeof i=="function"?se=i(M):se=[i,k?"active":null,I?"pending":null,p?"transitioning":null].filter(Boolean).join(" ");let R=typeof u=="function"?u(M):u;return o.createElement(et,Yi({},C,{"aria-current":X,className:se,ref:t,style:R,to:d,viewTransition:x}),typeof _=="function"?_(M):_)});var ec;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(ec||(ec={}));var Fu;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Fu||(Fu={}));function ix(e){let n=o.useContext(hl);return n||Ct(!1),n}function lx(e,n){let{target:t,replace:s,state:a,preventScrollReset:i,relative:l,viewTransition:u}=n===void 0?{}:n,d=gt(),x=Jt(),_=vl(e,{relative:l});return o.useCallback(C=>{if(Jy(C,t)){C.preventDefault();let N=s!==void 0?s:Ki(x)===Ki(_);d(e,{replace:N,state:a,preventScrollReset:i,relative:l,viewTransition:u})}},[x,d,_,s,a,t,e,i,l,u])}function Zc(e){let n=o.useRef(Zo(e)),t=o.useRef(!1),s=Jt(),a=o.useMemo(()=>Gy(s.search,t.current?null:n.current),[s.search]),i=gt(),l=o.useCallback((u,d)=>{const x=Zo(typeof u=="function"?u(a):u);t.current=!0,i("?"+x,d)},[i,a]);return[a,l]}function ox(e,n){n===void 0&&(n={});let t=o.useContext(tx);t==null&&Ct(!1);let{basename:s}=ix(ec.useViewTransitionState),a=vl(e,{relative:n.relative});if(!t.isTransitioning)return!1;let i=Ps(t.currentLocation.pathname,s)||t.currentLocation.pathname,l=Ps(t.nextLocation.pathname,s)||t.nextLocation.pathname;return Go(a.pathname,l)!=null||Go(a.pathname,i)!=null}const Dp="/assets/logo-BJZLLN_u.webp",cx=[{to:"/events",label:"Events"},{to:"/participants",label:"Participants"},{to:"/logistics",label:"Logistics"}],dx=()=>{const[e,n]=o.useState(!1),[t,s]=o.useState(()=>typeof window>"u"?"dark":window.localStorage.getItem("innhopp-theme")==="light"?"light":"dark");o.useEffect(()=>{const l=u=>{const d=u.target,x=d==null?void 0:d.closest('input[type="number"]');x&&document.activeElement===x&&u.preventDefault()};return window.addEventListener("wheel",l,{passive:!1}),()=>window.removeEventListener("wheel",l)},[]),o.useEffect(()=>{typeof document>"u"||(document.documentElement.setAttribute("data-theme",t),window.localStorage.setItem("innhopp-theme",t))},[t]),o.useEffect(()=>{if(typeof document>"u")return;const l=e&&window.matchMedia&&window.matchMedia("(max-width: 960px)").matches;return document.body.classList.toggle("nav-open",l),()=>document.body.classList.remove("nav-open")},[e]);const a=()=>n(!1),i=()=>s(l=>l==="dark"?"light":"dark");return r.jsxs("div",{className:"app-shell",children:[r.jsxs("header",{className:"app-header",children:[r.jsx("div",{className:"brand",children:r.jsx("img",{src:Dp,alt:"Innhopp Central logo",className:"brand-logo"})}),r.jsx("div",{className:"header-actions",children:r.jsx("button",{type:"button",className:`ghost menu-toggle ${e?"open":""}`,"aria-label":e?"Close menu":"Open menu","aria-expanded":e,onClick:()=>n(l=>!l),children:r.jsxs("span",{className:"menu-icon","aria-hidden":"true",children:[r.jsx("span",{className:"bar"}),r.jsx("span",{className:"bar"}),r.jsx("span",{className:"bar"})]})})})]}),r.jsxs("div",{className:"app-body",children:[r.jsxs("nav",{className:`app-nav ${e?"open":""}`,children:[r.jsx("ul",{children:cx.map(l=>r.jsx("li",{children:r.jsx(Lu,{to:l.to,className:({isActive:u})=>u?"nav-link active":"nav-link",onClick:a,children:l.label})},l.to))}),r.jsxs("div",{className:"nav-bottom",children:[r.jsx(Lu,{to:"/login",className:"nav-link logout-link",children:"Sign out"}),r.jsx("div",{className:"nav-footer",children:r.jsx("button",{type:"button",className:"theme-toggle-btn",onClick:i,"aria-pressed":t==="light",children:t==="dark"?"Light mode":"Dark mode"})})]})]}),e&&r.jsx("div",{className:"nav-backdrop",onClick:()=>n(!1)}),r.jsx("main",{className:"app-content",children:r.jsx(Ky,{})})]})]})},ux="YOUR_GOOGLE_CLIENT_ID.apps.googleusercontent.com",fx="97907096881-j3u1fsum801oduk0qeb1pqciph44php4.apps.googleusercontent.com".trim()||ux,mx=e=>{try{const[,n]=e.split("."),t=n.replace(/-/g,"+").replace(/_/g,"/"),s=t.padEnd(t.length+(4-t.length%4)%4,"=");return JSON.parse(atob(s))}catch(n){return console.error("Failed to decode Google credential",n),null}},Ru="https://accounts.google.com/gsi/client",px=()=>{const[e,n]=o.useState(null),[t,s]=o.useState(null),[a,i]=o.useState(null),[l,u]=o.useState(!1),[d,x]=o.useState(""),[_,C]=o.useState(""),N=o.useRef(null),F=gt(),v=o.useMemo(()=>!!(e!=null&&e.email)||l,[e,l]);o.useEffect(()=>{if(!N.current)return;const E=()=>{var y,j;if(!((j=(y=window.google)==null?void 0:y.accounts)!=null&&j.id)){s("Google Identity Services SDK is unavailable.");return}N.current.innerHTML="",window.google.accounts.id.initialize({client_id:fx,callback:O=>{const k=mx(O.credential);if(!k){s("Unable to decode Google credential.");return}n(k),s(null),i(null)}}),window.google.accounts.id.renderButton(N.current,{type:"standard",theme:"outline",size:"large",text:"signin_with"}),window.google.accounts.id.prompt()},p=document.querySelector(`script[src="${Ru}"]`);if(p!=null&&p.getAttribute("data-loaded")){E();return}const m=p??document.createElement("script");return m.src=Ru,m.async=!0,m.defer=!0,m.onload=()=>{m.setAttribute("data-loaded","true"),E()},p||document.head.appendChild(m),()=>{}},[]),o.useEffect(()=>{if(v){const E=window.setTimeout(()=>F("/events"),800);return()=>window.clearTimeout(E)}},[v,F]);const b=E=>{if(E.preventDefault(),d==="admin"&&_==="admin"){u(!0),i(null),x(""),C("");return}u(!1),i("Invalid debug credentials. Use admin/admin.")};return r.jsx("div",{className:"login-layout",children:r.jsxs("section",{className:"login-panel",children:[r.jsx("img",{src:Dp,alt:"Innhopp Central logo",className:"login-logo"}),r.jsx("div",{ref:N,className:"google-button","aria-live":"polite"}),r.jsxs("div",{className:"debug-login",role:"group","aria-labelledby":"debug-login-heading",children:[r.jsx("h2",{id:"debug-login-heading",children:"Testing credentials"}),r.jsxs("form",{onSubmit:b,className:"debug-login-form",children:[r.jsxs("label",{className:"field",children:[r.jsx("span",{children:"Username"}),r.jsx("input",{type:"text",value:d,onChange:E=>x(E.target.value),autoComplete:"username",placeholder:"admin",required:!0})]}),r.jsxs("label",{className:"field",children:[r.jsx("span",{children:"Password"}),r.jsx("input",{type:"password",value:_,onChange:E=>C(E.target.value),autoComplete:"current-password",placeholder:"admin",required:!0})]}),r.jsx("button",{type:"submit",className:"primary",children:"Log in"})]}),a&&r.jsx("p",{className:"error-text",children:a}),l&&!a&&r.jsx("p",{className:"success-text",children:"Debug login successful. Redirecting"})]}),e&&r.jsxs("div",{className:"profile-preview",children:[r.jsx("img",{src:e.picture,alt:e.name}),r.jsxs("div",{children:[r.jsx("p",{className:"profile-name",children:e.name}),r.jsx("p",{className:"profile-email",children:e.email})]})]}),t&&r.jsx("p",{className:"error-text",children:t})]})})},hx="/api",gx=e=>{const n=new Headers((e==null?void 0:e.headers)||{});return!n.has("Content-Type")&&(e!=null&&e.body)&&n.set("Content-Type","application/json"),n},Ve=async(e,n)=>{var l;const t=`${hx}${e}`,s=await fetch(t,{...n,credentials:"include",headers:gx(n)});if(s.status===204||s.status===205){if(!s.ok)throw new Error("Request failed");return}const i=((l=s.headers.get("content-type"))==null?void 0:l.includes("application/json"))?await s.json():await s.text();if(!s.ok){const u=typeof i=="string"?i:(i==null?void 0:i.error)||"Request failed",d=new Error(u);throw d.status=s.status,d}return i},Zn=()=>Ve("/events/seasons"),vx=e=>Ve("/events/seasons",{method:"POST",body:JSON.stringify(e)}),$t=()=>Ve("/events/events"),yx=e=>Ve("/events/events",{method:"POST",body:JSON.stringify(e)}),Jr=e=>Ve(`/events/events/${e}`),Ip=e=>Ve(`/events/events/${e}/copy`,{method:"POST"}),Pp=e=>Ve(`/events/events/${e}`,{method:"DELETE"}),cr=e=>Ve(`/events/events/${e}/accommodations`),Tp=()=>Ve("/events/accommodations"),Mp=(e,n)=>Ve(`/events/events/${e}/accommodations`,{method:"POST",body:JSON.stringify(n)}),Op=(e,n)=>Ve(`/events/events/${e}/accommodations/${n}`),$p=(e,n,t)=>Ve(`/events/events/${e}/accommodations/${n}`,{method:"PUT",body:JSON.stringify(t)}),xx=(e,n)=>Ve(`/events/events/${e}/accommodations/${n}`,{method:"DELETE"}),Lp=(e,n)=>Ve(`/events/events/${e}`,{method:"PUT",body:JSON.stringify(n)}),Fp=e=>Ve(`/innhopps/${e}`),jx=(e,n)=>Ve(`/events/events/${e}/innhopps`,{method:"POST",body:JSON.stringify(n)}),ji=(e,n)=>Ve(`/innhopps/${e}`,{method:"PUT",body:JSON.stringify(n)}),_x=e=>Ve(`/innhopps/${e}`,{method:"DELETE"}),Rp=()=>Ve("/events/manifests"),Nx=e=>Ve("/events/manifests",{method:"POST",body:JSON.stringify(e)}),bx=e=>Ve(`/events/manifests/${e}`),Sx=(e,n)=>Ve(`/events/manifests/${e}`,{method:"PUT",body:JSON.stringify(n)}),Gr=()=>Ve("/participants/profiles"),ka=e=>Ve("/participants/profiles",{method:"POST",body:JSON.stringify(e)}),Cx=e=>Ve(`/participants/profiles/${e}`),wx=(e,n)=>Ve(`/participants/profiles/${e}`,{method:"PUT",body:JSON.stringify(n)}),kx=e=>Ve(`/participants/profiles/${e}`,{method:"DELETE"}),Ex=/([+-]\d{2}:?\d{2}|Z)$/i,Ax=/^(\d{4})-(\d{2})-(\d{2})(?:[ T](\d{2}):(\d{2})(?::(\d{2})(?:\.\d+)?)?)?$/,tn=e=>String(e).padStart(2,"0"),Dx=e=>e.replace(Ex,""),zp=e=>{if(!e)return null;const n=Dx(e.trim());if(!n)return null;const t=n.match(Ax);if(!t)return null;const[,s,a,i,l,u,d]=t,x=Number(s),_=Number(a),C=Number(i),N=Number(l??"0"),F=Number(u??"0"),v=Number(d??"0");return[x,_,C,N,F,v].some(b=>Number.isNaN(b))?null:{year:x,month:_,day:C,hour:N,minute:F,second:v}},ft=e=>{const n=zp(e);if(!n)return null;const t=new Date(Date.UTC(n.year,n.month-1,n.day,n.hour,n.minute,n.second));return Number.isNaN(t.getTime())?null:t},Je=e=>{const n=zp(e);if(!n)return;const t=new Date(n.year,n.month-1,n.day,n.hour,n.minute,n.second);return Number.isNaN(t.getTime())?void 0:t},Bt=e=>new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds())).toISOString(),Un=(e,n={})=>{const t=ft(e);return t?new Intl.DateTimeFormat(void 0,{timeZone:"UTC",...n}).format(t):""},Ix=e=>{const n=ft(e);return n?`${n.getUTCFullYear()}-${tn(n.getUTCMonth()+1)}-${tn(n.getUTCDate())}`:""},ed=e=>{const n=ft(e);return n?`${n.getUTCFullYear()}-${tn(n.getUTCMonth()+1)}-${tn(n.getUTCDate())}T${tn(n.getUTCHours())}:${tn(n.getUTCMinutes())}`:""},Px=e=>`${e.getUTCFullYear()}-${tn(e.getUTCMonth()+1)}-${tn(e.getUTCDate())}T${tn(e.getUTCHours())}:${tn(e.getUTCMinutes())}`,Up=e=>`${e.getFullYear()}-${tn(e.getMonth()+1)}-${tn(e.getDate())} ${tn(e.getHours())}:${tn(e.getMinutes())}`,Vp=e=>{const n=ft(e);return n?n.toISOString():""},Wp=e=>Vp(e?`${e}T00:00`:""),td=e=>{const n=ft(e);if(n)return{hour:n.getUTCHours(),minute:n.getUTCMinutes()};if(!e)return null;const t=e.match(/(?:T|\s)(\d{2}):(\d{2})/);if(!t)return null;const s=Number(t[1]),a=Number(t[2]);return Number.isNaN(s)||Number.isNaN(a)?null:{hour:s,minute:a}},Tx=e=>{if(!e)return"";const n=e.match(/^(\d{4})-(\d{2})-(\d{2})/);if(n)return`${n[1]}-${n[2]}-${n[3]}`;const t=ft(e);return t?`${t.getUTCFullYear()}-${tn(t.getUTCMonth()+1)}-${tn(t.getUTCDate())}`:""},Mx=e=>(Array.isArray(e)?e:[]).map(n=>({...n,slots:typeof n.slots=="number"?n.slots:0,airfield_ids:Array.isArray(n.airfield_ids)?n.airfield_ids:[],participant_ids:Array.isArray(n.participant_ids)?n.participant_ids:[],innhopps:Array.isArray(n.innhopps)?n.innhopps:[]})),zu=e=>e?Un(e,{month:"short",day:"numeric",year:"numeric"}):"TBD",Ox=()=>{var O;const[e,n]=o.useState([]),[t,s]=o.useState([]),[a,i]=o.useState(!0),[l,u]=o.useState(null),[d,x]=o.useState(!1),[_,C]=o.useState(""),[N,F]=o.useState([]),v=o.useMemo(()=>{const k=new Map;return(Array.isArray(e)?e:[]).forEach(I=>k.set(I.id,I)),k},[e]);o.useEffect(()=>{let k=!1;return(async()=>{i(!0),u(null);try{const[M,X,se]=await Promise.all([Zn(),$t(),Gr()]);if(k)return;n(Array.isArray(M)?M:[]),s(Mx(X)),F(Array.isArray(se)?se:[])}catch(M){k||u(M instanceof Error?M.message:"Failed to load events")}finally{k||i(!1)}})(),()=>{k=!0}},[]);const b=k=>{if(k.status==="past")return!0;const I=ft(k.ends_at),M=ft(k.starts_at);return I?I.getTime()<Date.now():M?M.getTime()<Date.now():!1},E=t.filter(k=>!(!d&&b(k)||_&&k.season_id!==Number(_))),p=o.useMemo(()=>{const k=new Map;E.forEach(M=>{const X=k.get(M.season_id)||[];X.push(M),k.set(M.season_id,X)});const I=(M,X)=>{var de,Ne;const se=((de=v.get(M))==null?void 0:de.name)||`Season ${M}`,ae=(((Ne=v.get(X))==null?void 0:Ne.name)||`Season ${X}`).localeCompare(se);return ae!==0?ae:X-M};return Array.from(k.entries()).sort(([M],[X])=>I(M,X)).map(([M,X])=>{var se;return{seasonId:M,label:((se=v.get(M))==null?void 0:se.name)||`Season ${M}`,events:X}})},[E,v]),m=o.useMemo(()=>{const k=new Map;return N.forEach(I=>k.set(I.id,I)),k},[N]),y=k=>Array.isArray(k)?k.reduce((I,M)=>{var se,R;return(Array.isArray((se=m.get(M))==null?void 0:se.roles)?((R=m.get(M))==null?void 0:R.roles)||[]:[]).includes("Staff")?I:I+1},0):0;o.useEffect(()=>{if(!_)return;const k=Number(_),I=t.filter(X=>X.season_id===k);if(I.length===0){x(!1);return}const M=I.every(X=>b(X));x(M)},[t,_]);const j=((O=p[0])==null?void 0:O.label)||null;return r.jsxs("section",{className:"stack",children:[r.jsx("header",{className:"page-header",children:r.jsx("div",{children:r.jsx("h2",{style:{margin:0},children:"Event Calendar"})})}),r.jsxs("div",{className:"stack",children:[r.jsxs("article",{className:"card",children:[r.jsxs("header",{className:"card-header",style:{alignItems:"center",gap:"0.75rem"},children:[r.jsx("div",{style:{flex:1,fontWeight:800,fontSize:"1.25rem"},children:j||"Events"}),r.jsxs("span",{className:"badge neutral",children:[E.length," ",E.length===1?"event":"events"]})]}),a?r.jsx("p",{className:"muted",children:"Loading schedule"}):l?r.jsx("p",{className:"error-text",children:l}):E.length===0?r.jsx("p",{className:"muted",children:"No events yet. Use the actions below to add one."}):r.jsx("div",{className:"stack",children:p.map((k,I)=>r.jsxs("div",{className:"stack",children:[I===0?null:r.jsx("p",{className:"muted",style:{margin:"0 0 0.5rem"},children:r.jsx("span",{style:{fontSize:"1.25rem",fontWeight:800},children:k.label})}),r.jsx("div",{className:"stack",children:k.events.map(M=>r.jsx(et,{className:"card-link",to:`/events/${M.id}`,state:{suppressHighlight:!0},children:r.jsx("article",{className:"card event-summary-card",children:(()=>{var Ne;const X=y(M.participant_ids),se=M.slots??0,R=Math.max(se-X,0),ae=R===0,de=b(M);return r.jsxs(r.Fragment,{children:[r.jsxs("header",{className:"card-header event-card-header",children:[r.jsxs("div",{children:[r.jsx("h3",{children:M.name}),r.jsx("p",{className:"muted event-location",children:M.location||"Location TBD"})]}),r.jsxs("div",{className:"event-card-badges",children:[r.jsx("span",{className:`badge status-${M.status}`,children:M.status}),!de&&r.jsx("span",{className:`badge ${ae?"danger":"success"}`,children:ae?"FULL":`${R} SLOTS AVAILABLE`})]})]}),r.jsxs("dl",{className:"card-details",children:[r.jsxs("div",{children:[r.jsx("dt",{children:"Starts"}),r.jsx("dd",{children:zu(M.starts_at)})]}),r.jsxs("div",{children:[r.jsx("dt",{children:"Ends"}),r.jsx("dd",{children:zu(M.ends_at)})]}),r.jsxs("div",{children:[r.jsx("dt",{children:"Participants"}),r.jsx("dd",{children:y(M.participant_ids)})]}),r.jsxs("div",{children:[r.jsx("dt",{children:"INNHOPPS"}),r.jsx("dd",{children:((Ne=M.innhopps)==null?void 0:Ne.length)??0})]}),r.jsxs("div",{children:[r.jsx("dt",{children:"Slots"}),r.jsx("dd",{children:se})]})]})]})})()})},M.id))})]},k.seasonId))}),r.jsx("footer",{className:"card-footer",children:r.jsxs("div",{className:"card-actions",children:[r.jsx(et,{className:"primary button-link",to:"/events/new",children:"Create event"}),r.jsx("button",{className:"ghost",type:"button",onClick:()=>x(k=>!k),children:d?"Hide past events":"Show past events"})]})})]}),r.jsxs("article",{className:"card",children:[r.jsxs("div",{className:"form-grid",children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Season"}),r.jsxs("select",{value:_,onChange:k=>C(k.target.value),style:{width:"16.666%",minWidth:"140px"},children:[r.jsx("option",{value:"",children:"All seasons"}),[...e].sort((k,I)=>I.name.localeCompare(k.name)).map(k=>r.jsx("option",{value:k.id,children:k.name},k.id))]})]}),e.length===0&&r.jsx("p",{className:"muted",children:"No seasons yet. Create one to get started."})]}),r.jsx("footer",{className:"card-footer",children:r.jsx(et,{className:"primary button-link",to:"/seasons/new",children:"Create season"})})]})]})]})},$x=[{value:"draft",label:"Draft"},{value:"planned",label:"Planned"},{value:"scouted",label:"Scouted"},{value:"launched",label:"Launched"},{value:"live",label:"Live"},{value:"past",label:"Past"}],Uu=e=>Wp(e),Lx=()=>{const[e,n]=o.useState([]),[t,s]=o.useState(!0),[a,i]=o.useState(null),[l,u]=o.useState(null),[d,x]=o.useState(!1),[_,C]=o.useState({season_id:"",name:"",location:"",slots:"",status:"draft",starts_at:"",ends_at:""}),N=gt();o.useEffect(()=>{let v=!1;return(async()=>{try{const E=await Zn();if(v)return;n(Array.isArray(E)?E:[])}catch(E){v||i(E instanceof Error?E.message:"Failed to load seasons")}finally{v||s(!1)}})(),()=>{v=!0}},[]);const F=async v=>{v.preventDefault(),x(!0),u(null);try{const b={season_id:Number(_.season_id),name:_.name.trim(),status:_.status,starts_at:Uu(_.starts_at)};_.location.trim()&&(b.location=_.location.trim()),_.ends_at&&(b.ends_at=Uu(_.ends_at)),_.slots&&(b.slots=Number(_.slots)),await yx(b),u("Event created"),C({season_id:"",name:"",location:"",slots:"",status:"draft",starts_at:"",ends_at:""}),N("/events")}catch(b){u(b instanceof Error?b.message:"Failed to create event")}finally{x(!1)}};return r.jsxs("section",{children:[r.jsxs("header",{className:"page-header",children:[r.jsxs("div",{children:[r.jsx("h2",{children:"Create event"}),r.jsx("p",{children:"Attach a new event to a season with timing and status."})]}),r.jsx("button",{className:"ghost",type:"button",onClick:()=>N("/events"),children:"Back to events"})]}),r.jsxs("article",{className:"card",children:[r.jsx("header",{className:"card-header",children:r.jsxs("div",{children:[r.jsx("h3",{children:"Event details"}),r.jsx("p",{children:"Define the schedule and context."})]})}),t?r.jsx("p",{className:"muted",children:"Loading seasons"}):a?r.jsx("p",{className:"error-text",children:a}):e.length===0?r.jsx("p",{className:"muted",children:"Create a season first before scheduling events."}):r.jsxs("form",{className:"form-grid",onSubmit:F,children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Season"}),r.jsxs("select",{required:!0,value:_.season_id,onChange:v=>C(b=>({...b,season_id:v.target.value})),children:[r.jsx("option",{value:"",children:"Select season"}),e.map(v=>r.jsx("option",{value:v.id,children:v.name},v.id))]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Event name"}),r.jsx("input",{type:"text",value:_.name,onChange:v=>C(b=>({...b,name:v.target.value})),placeholder:"Enter a name for the event",required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Location"}),r.jsx("input",{type:"text",value:_.location,onChange:v=>C(b=>({...b,location:v.target.value})),placeholder:"The overall location the event takes place"})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Slots"}),r.jsx("input",{type:"number",min:"0",value:_.slots,onChange:v=>C(b=>({...b,slots:v.target.value})),placeholder:"Total participant slots"})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Status"}),r.jsx("select",{value:_.status,onChange:v=>C(b=>({...b,status:v.target.value})),children:$x.map(v=>r.jsx("option",{value:v.value,children:v.label},v.value))})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Starts on"}),r.jsx("input",{type:"date",value:_.starts_at,onChange:v=>C(b=>({...b,starts_at:v.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Ends on"}),r.jsx("input",{type:"date",value:_.ends_at,onChange:v=>C(b=>({...b,ends_at:v.target.value})),placeholder:"Optional"})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"submit",className:"primary",disabled:d,children:d?"Creating":"Create event"}),l&&r.jsx("span",{className:"muted",children:l})]})]})]})]})};var Hp={},Bp={exports:{}},Fx="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Rx=Fx,zx=Rx;function Kp(){}function Yp(){}Yp.resetWarningCache=Kp;var Ux=function(){function e(s,a,i,l,u,d){if(d!==zx){var x=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw x.name="Invariant Violation",x}}e.isRequired=e;function n(){return e}var t={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:n,element:e,elementType:e,instanceOf:n,node:e,objectOf:n,oneOf:n,oneOfType:n,shape:n,exact:n,checkPropTypes:Yp,resetWarningCache:Kp};return t.PropTypes=t,t};Bp.exports=Ux();var Vx=Bp.exports,Yl=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],bs={_disable:[],allowInput:!1,allowInvalidPreload:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:typeof window=="object"&&window.navigator.userAgent.indexOf("MSIE")===-1,ariaDateFormat:"F j, Y",autoFillDefaultTime:!0,clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enableSeconds:!1,enableTime:!1,errorHandler:function(e){return typeof console<"u"&&console.warn(e)},getWeek:function(e){var n=new Date(e.getTime());n.setHours(0,0,0,0),n.setDate(n.getDate()+3-(n.getDay()+6)%7);var t=new Date(n.getFullYear(),0,4);return 1+Math.round(((n.getTime()-t.getTime())/864e5-3+(t.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",monthSelectorType:"dropdown",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1},Ea={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(e){var n=e%100;if(n>3&&n<21)return"th";switch(n%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year",monthAriaLabel:"Month",hourAriaLabel:"Hour",minuteAriaLabel:"Minute",time_24hr:!1},dn=function(e,n){return n===void 0&&(n=2),("000"+e).slice(n*-1)},wn=function(e){return e===!0?1:0};function Vu(e,n){var t;return function(){var s=this,a=arguments;clearTimeout(t),t=setTimeout(function(){return e.apply(s,a)},n)}}var ql=function(e){return e instanceof Array?e:[e]};function sn(e,n,t){if(t===!0)return e.classList.add(n);e.classList.remove(n)}function ut(e,n,t){var s=window.document.createElement(e);return n=n||"",t=t||"",s.className=n,t!==void 0&&(s.textContent=t),s}function ti(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function qp(e,n){if(n(e))return e;if(e.parentNode)return qp(e.parentNode,n)}function ni(e,n){var t=ut("div","numInputWrapper"),s=ut("input","numInput "+e),a=ut("span","arrowUp"),i=ut("span","arrowDown");if(navigator.userAgent.indexOf("MSIE 9.0")===-1?s.type="number":(s.type="text",s.pattern="\\d*"),n!==void 0)for(var l in n)s.setAttribute(l,n[l]);return t.appendChild(s),t.appendChild(a),t.appendChild(i),t}function gn(e){try{if(typeof e.composedPath=="function"){var n=e.composedPath();return n[0]}return e.target}catch{return e.target}}var Ql=function(){},qi=function(e,n,t){return t.months[n?"shorthand":"longhand"][e]},Wx={D:Ql,F:function(e,n,t){e.setMonth(t.months.longhand.indexOf(n))},G:function(e,n){e.setHours((e.getHours()>=12?12:0)+parseFloat(n))},H:function(e,n){e.setHours(parseFloat(n))},J:function(e,n){e.setDate(parseFloat(n))},K:function(e,n,t){e.setHours(e.getHours()%12+12*wn(new RegExp(t.amPM[1],"i").test(n)))},M:function(e,n,t){e.setMonth(t.months.shorthand.indexOf(n))},S:function(e,n){e.setSeconds(parseFloat(n))},U:function(e,n){return new Date(parseFloat(n)*1e3)},W:function(e,n,t){var s=parseInt(n),a=new Date(e.getFullYear(),0,2+(s-1)*7,0,0,0,0);return a.setDate(a.getDate()-a.getDay()+t.firstDayOfWeek),a},Y:function(e,n){e.setFullYear(parseFloat(n))},Z:function(e,n){return new Date(n)},d:function(e,n){e.setDate(parseFloat(n))},h:function(e,n){e.setHours((e.getHours()>=12?12:0)+parseFloat(n))},i:function(e,n){e.setMinutes(parseFloat(n))},j:function(e,n){e.setDate(parseFloat(n))},l:Ql,m:function(e,n){e.setMonth(parseFloat(n)-1)},n:function(e,n){e.setMonth(parseFloat(n)-1)},s:function(e,n){e.setSeconds(parseFloat(n))},u:function(e,n){return new Date(parseFloat(n))},w:Ql,y:function(e,n){e.setFullYear(2e3+parseFloat(n))}},Rr={D:"",F:"",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},la={Z:function(e){return e.toISOString()},D:function(e,n,t){return n.weekdays.shorthand[la.w(e,n,t)]},F:function(e,n,t){return qi(la.n(e,n,t)-1,!1,n)},G:function(e,n,t){return dn(la.h(e,n,t))},H:function(e){return dn(e.getHours())},J:function(e,n){return n.ordinal!==void 0?e.getDate()+n.ordinal(e.getDate()):e.getDate()},K:function(e,n){return n.amPM[wn(e.getHours()>11)]},M:function(e,n){return qi(e.getMonth(),!0,n)},S:function(e){return dn(e.getSeconds())},U:function(e){return e.getTime()/1e3},W:function(e,n,t){return t.getWeek(e)},Y:function(e){return dn(e.getFullYear(),4)},d:function(e){return dn(e.getDate())},h:function(e){return e.getHours()%12?e.getHours()%12:12},i:function(e){return dn(e.getMinutes())},j:function(e){return e.getDate()},l:function(e,n){return n.weekdays.longhand[e.getDay()]},m:function(e){return dn(e.getMonth()+1)},n:function(e){return e.getMonth()+1},s:function(e){return e.getSeconds()},u:function(e){return e.getTime()},w:function(e){return e.getDay()},y:function(e){return String(e.getFullYear()).substring(2)}},Qp=function(e){var n=e.config,t=n===void 0?bs:n,s=e.l10n,a=s===void 0?Ea:s,i=e.isMobile,l=i===void 0?!1:i;return function(u,d,x){var _=x||a;return t.formatDate!==void 0&&!l?t.formatDate(u,d,_):d.split("").map(function(C,N,F){return la[C]&&F[N-1]!=="\\"?la[C](u,_,t):C!=="\\"?C:""}).join("")}},tc=function(e){var n=e.config,t=n===void 0?bs:n,s=e.l10n,a=s===void 0?Ea:s;return function(i,l,u,d){if(!(i!==0&&!i)){var x=d||a,_,C=i;if(i instanceof Date)_=new Date(i.getTime());else if(typeof i!="string"&&i.toFixed!==void 0)_=new Date(i);else if(typeof i=="string"){var N=l||(t||bs).dateFormat,F=String(i).trim();if(F==="today")_=new Date,u=!0;else if(t&&t.parseDate)_=t.parseDate(i,N);else if(/Z$/.test(F)||/GMT$/.test(F))_=new Date(i);else{for(var v=void 0,b=[],E=0,p=0,m="";E<N.length;E++){var y=N[E],j=y==="\\",O=N[E-1]==="\\"||j;if(Rr[y]&&!O){m+=Rr[y];var k=new RegExp(m).exec(i);k&&(v=!0)&&b[y!=="Y"?"push":"unshift"]({fn:Wx[y],val:k[++p]})}else j||(m+=".")}_=!t||!t.noCalendar?new Date(new Date().getFullYear(),0,1,0,0,0,0):new Date(new Date().setHours(0,0,0,0)),b.forEach(function(I){var M=I.fn,X=I.val;return _=M(_,X,x)||_}),_=v?_:void 0}}if(!(_ instanceof Date&&!isNaN(_.getTime()))){t.errorHandler(new Error("Invalid date provided: "+C));return}return u===!0&&_.setHours(0,0,0,0),_}}};function vn(e,n,t){return t===void 0&&(t=!0),t!==!1?new Date(e.getTime()).setHours(0,0,0,0)-new Date(n.getTime()).setHours(0,0,0,0):e.getTime()-n.getTime()}var Hx=function(e,n,t){return e>Math.min(n,t)&&e<Math.max(n,t)},Jl=function(e,n,t){return e*3600+n*60+t},Bx=function(e){var n=Math.floor(e/3600),t=(e-n*3600)/60;return[n,t,e-n*3600-t*60]},Kx={DAY:864e5};function Gl(e){var n=e.defaultHour,t=e.defaultMinute,s=e.defaultSeconds;if(e.minDate!==void 0){var a=e.minDate.getHours(),i=e.minDate.getMinutes(),l=e.minDate.getSeconds();n<a&&(n=a),n===a&&t<i&&(t=i),n===a&&t===i&&s<l&&(s=e.minDate.getSeconds())}if(e.maxDate!==void 0){var u=e.maxDate.getHours(),d=e.maxDate.getMinutes();n=Math.min(n,u),n===u&&(t=Math.min(d,t)),n===u&&t===d&&(s=e.maxDate.getSeconds())}return{hours:n,minutes:t,seconds:s}}typeof Object.assign!="function"&&(Object.assign=function(e){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];if(!e)throw TypeError("Cannot convert undefined or null to object");for(var s=function(u){u&&Object.keys(u).forEach(function(d){return e[d]=u[d]})},a=0,i=n;a<i.length;a++){var l=i[a];s(l)}return e});var Zt=function(){return Zt=Object.assign||function(e){for(var n,t=1,s=arguments.length;t<s;t++){n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Zt.apply(this,arguments)},Wu=function(){for(var e=0,n=0,t=arguments.length;n<t;n++)e+=arguments[n].length;for(var s=Array(e),a=0,n=0;n<t;n++)for(var i=arguments[n],l=0,u=i.length;l<u;l++,a++)s[a]=i[l];return s},Yx=300;function qx(e,n){var t={config:Zt(Zt({},bs),Rt.defaultConfig),l10n:Ea};t.parseDate=tc({config:t.config,l10n:t.l10n}),t._handlers=[],t.pluginElements=[],t.loadedPlugins=[],t._bind=b,t._setHoursFromDate=N,t._positionCalendar=Fe,t.changeMonth=Y,t.changeYear=_e,t.clear=Z,t.close=ne,t.onMouseOver=Qe,t._createElement=ut,t.createDay=k,t.destroy=oe,t.isEnabled=Le,t.jumpToDate=m,t.updateValue=$e,t.open=P,t.redraw=ht,t.set=ce,t.setDate=We,t.toggle=Ut;function s(){t.utils={getDaysInMonth:function(h,g){return h===void 0&&(h=t.currentMonth),g===void 0&&(g=t.currentYear),h===1&&(g%4===0&&g%100!==0||g%400===0)?29:t.l10n.daysInMonth[h]}}}function a(){t.element=t.input=e,t.isOpen=!1,V(),De(),vt(),Ze(),s(),t.isMobile||O(),p(),(t.selectedDates.length||t.config.noCalendar)&&(t.config.enableTime&&N(t.config.noCalendar?t.latestSelectedDateObj:void 0),$e(!1)),u();var h=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!t.isMobile&&h&&Fe(),Xe("onReady")}function i(){var h;return((h=t.calendarContainer)===null||h===void 0?void 0:h.getRootNode()).activeElement||document.activeElement}function l(h){return h.bind(t)}function u(){var h=t.config;h.weekNumbers===!1&&h.showMonths===1||h.noCalendar!==!0&&window.requestAnimationFrame(function(){if(t.calendarContainer!==void 0&&(t.calendarContainer.style.visibility="hidden",t.calendarContainer.style.display="block"),t.daysContainer!==void 0){var g=(t.days.offsetWidth+1)*h.showMonths;t.daysContainer.style.width=g+"px",t.calendarContainer.style.width=g+(t.weekWrapper!==void 0?t.weekWrapper.offsetWidth:0)+"px",t.calendarContainer.style.removeProperty("visibility"),t.calendarContainer.style.removeProperty("display")}})}function d(h){if(t.selectedDates.length===0){var g=t.config.minDate===void 0||vn(new Date,t.config.minDate)>=0?new Date:new Date(t.config.minDate.getTime()),L=Gl(t.config);g.setHours(L.hours,L.minutes,L.seconds,g.getMilliseconds()),t.selectedDates=[g],t.latestSelectedDateObj=g}h!==void 0&&h.type!=="blur"&&K(h);var U=t._input.value;C(),$e(),t._input.value!==U&&t._debouncedChange()}function x(h,g){return h%12+12*wn(g===t.l10n.amPM[1])}function _(h){switch(h%24){case 0:case 12:return 12;default:return h%12}}function C(){if(!(t.hourElement===void 0||t.minuteElement===void 0)){var h=(parseInt(t.hourElement.value.slice(-2),10)||0)%24,g=(parseInt(t.minuteElement.value,10)||0)%60,L=t.secondElement!==void 0?(parseInt(t.secondElement.value,10)||0)%60:0;t.amPM!==void 0&&(h=x(h,t.amPM.textContent));var U=t.config.minTime!==void 0||t.config.minDate&&t.minDateHasTime&&t.latestSelectedDateObj&&vn(t.latestSelectedDateObj,t.config.minDate,!0)===0,le=t.config.maxTime!==void 0||t.config.maxDate&&t.maxDateHasTime&&t.latestSelectedDateObj&&vn(t.latestSelectedDateObj,t.config.maxDate,!0)===0;if(t.config.maxTime!==void 0&&t.config.minTime!==void 0&&t.config.minTime>t.config.maxTime){var be=Jl(t.config.minTime.getHours(),t.config.minTime.getMinutes(),t.config.minTime.getSeconds()),He=Jl(t.config.maxTime.getHours(),t.config.maxTime.getMinutes(),t.config.maxTime.getSeconds()),Te=Jl(h,g,L);if(Te>He&&Te<be){var Ke=Bx(be);h=Ke[0],g=Ke[1],L=Ke[2]}}else{if(le){var Ie=t.config.maxTime!==void 0?t.config.maxTime:t.config.maxDate;h=Math.min(h,Ie.getHours()),h===Ie.getHours()&&(g=Math.min(g,Ie.getMinutes())),g===Ie.getMinutes()&&(L=Math.min(L,Ie.getSeconds()))}if(U){var A=t.config.minTime!==void 0?t.config.minTime:t.config.minDate;h=Math.max(h,A.getHours()),h===A.getHours()&&g<A.getMinutes()&&(g=A.getMinutes()),g===A.getMinutes()&&(L=Math.max(L,A.getSeconds()))}}F(h,g,L)}}function N(h){var g=h||t.latestSelectedDateObj;g&&g instanceof Date&&F(g.getHours(),g.getMinutes(),g.getSeconds())}function F(h,g,L){t.latestSelectedDateObj!==void 0&&t.latestSelectedDateObj.setHours(h%24,g,L||0,0),!(!t.hourElement||!t.minuteElement||t.isMobile)&&(t.hourElement.value=dn(t.config.time_24hr?h:(12+h)%12+12*wn(h%12===0)),t.minuteElement.value=dn(g),t.amPM!==void 0&&(t.amPM.textContent=t.l10n.amPM[wn(h>=12)]),t.secondElement!==void 0&&(t.secondElement.value=dn(L)))}function v(h){var g=gn(h),L=parseInt(g.value)+(h.delta||0);(L/1e3>1||h.key==="Enter"&&!/[^\d]/.test(L.toString()))&&_e(L)}function b(h,g,L,U){if(g instanceof Array)return g.forEach(function(le){return b(h,le,L,U)});if(h instanceof Array)return h.forEach(function(le){return b(le,g,L,U)});h.addEventListener(g,L,U),t._handlers.push({remove:function(){return h.removeEventListener(g,L,U)}})}function E(){Xe("onChange")}function p(){if(t.config.wrap&&["open","close","toggle","clear"].forEach(function(L){Array.prototype.forEach.call(t.element.querySelectorAll("[data-"+L+"]"),function(U){return b(U,"click",t[L])})}),t.isMobile){It();return}var h=Vu(Q,50);if(t._debouncedChange=Vu(E,Yx),t.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&b(t.daysContainer,"mouseover",function(L){t.config.mode==="range"&&Qe(gn(L))}),b(t._input,"keydown",Ye),t.calendarContainer!==void 0&&b(t.calendarContainer,"keydown",Ye),!t.config.inline&&!t.config.static&&b(window,"resize",h),window.ontouchstart!==void 0?b(window.document,"touchstart",Ae):b(window.document,"mousedown",Ae),b(window.document,"focus",Ae,{capture:!0}),t.config.clickOpens===!0&&(b(t._input,"focus",t.open),b(t._input,"click",t.open)),t.daysContainer!==void 0&&(b(t.monthNav,"click",D),b(t.monthNav,["keyup","increment"],v),b(t.daysContainer,"click",Lt)),t.timeContainer!==void 0&&t.minuteElement!==void 0&&t.hourElement!==void 0){var g=function(L){return gn(L).select()};b(t.timeContainer,["increment"],d),b(t.timeContainer,"blur",d,{capture:!0}),b(t.timeContainer,"click",y),b([t.hourElement,t.minuteElement],["focus","click"],g),t.secondElement!==void 0&&b(t.secondElement,"focus",function(){return t.secondElement&&t.secondElement.select()}),t.amPM!==void 0&&b(t.amPM,"click",function(L){d(L)})}t.config.allowInput&&b(t._input,"blur",qe)}function m(h,g){var L=h!==void 0?t.parseDate(h):t.latestSelectedDateObj||(t.config.minDate&&t.config.minDate>t.now?t.config.minDate:t.config.maxDate&&t.config.maxDate<t.now?t.config.maxDate:t.now),U=t.currentYear,le=t.currentMonth;try{L!==void 0&&(t.currentYear=L.getFullYear(),t.currentMonth=L.getMonth())}catch(be){be.message="Invalid date supplied: "+L,t.config.errorHandler(be)}g&&t.currentYear!==U&&(Xe("onYearChange"),de()),g&&(t.currentYear!==U||t.currentMonth!==le)&&Xe("onMonthChange"),t.redraw()}function y(h){var g=gn(h);~g.className.indexOf("arrow")&&j(h,g.classList.contains("arrowUp")?1:-1)}function j(h,g,L){var U=h&&gn(h),le=L||U&&U.parentNode&&U.parentNode.firstChild,be=f("increment");be.delta=g,le&&le.dispatchEvent(be)}function O(){var h=window.document.createDocumentFragment();if(t.calendarContainer=ut("div","flatpickr-calendar"),t.calendarContainer.tabIndex=-1,!t.config.noCalendar){if(h.appendChild(he()),t.innerContainer=ut("div","flatpickr-innerContainer"),t.config.weekNumbers){var g=fe(),L=g.weekWrapper,U=g.weekNumbers;t.innerContainer.appendChild(L),t.weekNumbers=U,t.weekWrapper=L}t.rContainer=ut("div","flatpickr-rContainer"),t.rContainer.appendChild(ue()),t.daysContainer||(t.daysContainer=ut("div","flatpickr-days"),t.daysContainer.tabIndex=-1),ae(),t.rContainer.appendChild(t.daysContainer),t.innerContainer.appendChild(t.rContainer),h.appendChild(t.innerContainer)}t.config.enableTime&&h.appendChild(we()),sn(t.calendarContainer,"rangeMode",t.config.mode==="range"),sn(t.calendarContainer,"animate",t.config.animate===!0),sn(t.calendarContainer,"multiMonth",t.config.showMonths>1),t.calendarContainer.appendChild(h);var le=t.config.appendTo!==void 0&&t.config.appendTo.nodeType!==void 0;if((t.config.inline||t.config.static)&&(t.calendarContainer.classList.add(t.config.inline?"inline":"static"),t.config.inline&&(!le&&t.element.parentNode?t.element.parentNode.insertBefore(t.calendarContainer,t._input.nextSibling):t.config.appendTo!==void 0&&t.config.appendTo.appendChild(t.calendarContainer)),t.config.static)){var be=ut("div","flatpickr-wrapper");t.element.parentNode&&t.element.parentNode.insertBefore(be,t.element),be.appendChild(t.element),t.altInput&&be.appendChild(t.altInput),be.appendChild(t.calendarContainer)}!t.config.static&&!t.config.inline&&(t.config.appendTo!==void 0?t.config.appendTo:window.document.body).appendChild(t.calendarContainer)}function k(h,g,L,U){var le=Le(g,!0),be=ut("span",h,g.getDate().toString());return be.dateObj=g,be.$i=U,be.setAttribute("aria-label",t.formatDate(g,t.config.ariaDateFormat)),h.indexOf("hidden")===-1&&vn(g,t.now)===0&&(t.todayDateElem=be,be.classList.add("today"),be.setAttribute("aria-current","date")),le?(be.tabIndex=-1,w(g)&&(be.classList.add("selected"),t.selectedDateElem=be,t.config.mode==="range"&&(sn(be,"startRange",t.selectedDates[0]&&vn(g,t.selectedDates[0],!0)===0),sn(be,"endRange",t.selectedDates[1]&&vn(g,t.selectedDates[1],!0)===0),h==="nextMonthDay"&&be.classList.add("inRange")))):be.classList.add("flatpickr-disabled"),t.config.mode==="range"&&z(g)&&!w(g)&&be.classList.add("inRange"),t.weekNumbers&&t.config.showMonths===1&&h!=="prevMonthDay"&&U%7===6&&t.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+t.config.getWeek(g)+"</span>"),Xe("onDayCreate",be),be}function I(h){h.focus(),t.config.mode==="range"&&Qe(h)}function M(h){for(var g=h>0?0:t.config.showMonths-1,L=h>0?t.config.showMonths:-1,U=g;U!=L;U+=h)for(var le=t.daysContainer.children[U],be=h>0?0:le.children.length-1,He=h>0?le.children.length:-1,Te=be;Te!=He;Te+=h){var Ke=le.children[Te];if(Ke.className.indexOf("hidden")===-1&&Le(Ke.dateObj))return Ke}}function X(h,g){for(var L=h.className.indexOf("Month")===-1?h.dateObj.getMonth():t.currentMonth,U=g>0?t.config.showMonths:-1,le=g>0?1:-1,be=L-t.currentMonth;be!=U;be+=le)for(var He=t.daysContainer.children[be],Te=L-t.currentMonth===be?h.$i+g:g<0?He.children.length-1:0,Ke=He.children.length,Ie=Te;Ie>=0&&Ie<Ke&&Ie!=(g>0?Ke:-1);Ie+=le){var A=He.children[Ie];if(A.className.indexOf("hidden")===-1&&Le(A.dateObj)&&Math.abs(h.$i-Ie)>=Math.abs(g))return I(A)}t.changeMonth(le),se(M(le),0)}function se(h,g){var L=i(),U=Pe(L||document.body),le=h!==void 0?h:U?L:t.selectedDateElem!==void 0&&Pe(t.selectedDateElem)?t.selectedDateElem:t.todayDateElem!==void 0&&Pe(t.todayDateElem)?t.todayDateElem:M(g>0?1:-1);le===void 0?t._input.focus():U?X(le,g):I(le)}function R(h,g){for(var L=(new Date(h,g,1).getDay()-t.l10n.firstDayOfWeek+7)%7,U=t.utils.getDaysInMonth((g-1+12)%12,h),le=t.utils.getDaysInMonth(g,h),be=window.document.createDocumentFragment(),He=t.config.showMonths>1,Te=He?"prevMonthDay hidden":"prevMonthDay",Ke=He?"nextMonthDay hidden":"nextMonthDay",Ie=U+1-L,A=0;Ie<=U;Ie++,A++)be.appendChild(k("flatpickr-day "+Te,new Date(h,g-1,Ie),Ie,A));for(Ie=1;Ie<=le;Ie++,A++)be.appendChild(k("flatpickr-day",new Date(h,g,Ie),Ie,A));for(var H=le+1;H<=42-L&&(t.config.showMonths===1||A%7!==0);H++,A++)be.appendChild(k("flatpickr-day "+Ke,new Date(h,g+1,H%le),H,A));var J=ut("div","dayContainer");return J.appendChild(be),J}function ae(){if(t.daysContainer!==void 0){ti(t.daysContainer),t.weekNumbers&&ti(t.weekNumbers);for(var h=document.createDocumentFragment(),g=0;g<t.config.showMonths;g++){var L=new Date(t.currentYear,t.currentMonth,1);L.setMonth(t.currentMonth+g),h.appendChild(R(L.getFullYear(),L.getMonth()))}t.daysContainer.appendChild(h),t.days=t.daysContainer.firstChild,t.config.mode==="range"&&t.selectedDates.length===1&&Qe()}}function de(){if(!(t.config.showMonths>1||t.config.monthSelectorType!=="dropdown")){var h=function(U){return t.config.minDate!==void 0&&t.currentYear===t.config.minDate.getFullYear()&&U<t.config.minDate.getMonth()?!1:!(t.config.maxDate!==void 0&&t.currentYear===t.config.maxDate.getFullYear()&&U>t.config.maxDate.getMonth())};t.monthsDropdownContainer.tabIndex=-1,t.monthsDropdownContainer.innerHTML="";for(var g=0;g<12;g++)if(h(g)){var L=ut("option","flatpickr-monthDropdown-month");L.value=new Date(t.currentYear,g).getMonth().toString(),L.textContent=qi(g,t.config.shorthandCurrentMonth,t.l10n),L.tabIndex=-1,t.currentMonth===g&&(L.selected=!0),t.monthsDropdownContainer.appendChild(L)}}}function Ne(){var h=ut("div","flatpickr-month"),g=window.document.createDocumentFragment(),L;t.config.showMonths>1||t.config.monthSelectorType==="static"?L=ut("span","cur-month"):(t.monthsDropdownContainer=ut("select","flatpickr-monthDropdown-months"),t.monthsDropdownContainer.setAttribute("aria-label",t.l10n.monthAriaLabel),b(t.monthsDropdownContainer,"change",function(He){var Te=gn(He),Ke=parseInt(Te.value,10);t.changeMonth(Ke-t.currentMonth),Xe("onMonthChange")}),de(),L=t.monthsDropdownContainer);var U=ni("cur-year",{tabindex:"-1"}),le=U.getElementsByTagName("input")[0];le.setAttribute("aria-label",t.l10n.yearAriaLabel),t.config.minDate&&le.setAttribute("min",t.config.minDate.getFullYear().toString()),t.config.maxDate&&(le.setAttribute("max",t.config.maxDate.getFullYear().toString()),le.disabled=!!t.config.minDate&&t.config.minDate.getFullYear()===t.config.maxDate.getFullYear());var be=ut("div","flatpickr-current-month");return be.appendChild(L),be.appendChild(U),g.appendChild(be),h.appendChild(g),{container:h,yearElement:le,monthElement:L}}function me(){ti(t.monthNav),t.monthNav.appendChild(t.prevMonthNav),t.config.showMonths&&(t.yearElements=[],t.monthElements=[]);for(var h=t.config.showMonths;h--;){var g=Ne();t.yearElements.push(g.yearElement),t.monthElements.push(g.monthElement),t.monthNav.appendChild(g.container)}t.monthNav.appendChild(t.nextMonthNav)}function he(){return t.monthNav=ut("div","flatpickr-months"),t.yearElements=[],t.monthElements=[],t.prevMonthNav=ut("span","flatpickr-prev-month"),t.prevMonthNav.innerHTML=t.config.prevArrow,t.nextMonthNav=ut("span","flatpickr-next-month"),t.nextMonthNav.innerHTML=t.config.nextArrow,me(),Object.defineProperty(t,"_hidePrevMonthArrow",{get:function(){return t.__hidePrevMonthArrow},set:function(h){t.__hidePrevMonthArrow!==h&&(sn(t.prevMonthNav,"flatpickr-disabled",h),t.__hidePrevMonthArrow=h)}}),Object.defineProperty(t,"_hideNextMonthArrow",{get:function(){return t.__hideNextMonthArrow},set:function(h){t.__hideNextMonthArrow!==h&&(sn(t.nextMonthNav,"flatpickr-disabled",h),t.__hideNextMonthArrow=h)}}),t.currentYearElement=t.yearElements[0],W(),t.monthNav}function we(){t.calendarContainer.classList.add("hasTime"),t.config.noCalendar&&t.calendarContainer.classList.add("noCalendar");var h=Gl(t.config);t.timeContainer=ut("div","flatpickr-time"),t.timeContainer.tabIndex=-1;var g=ut("span","flatpickr-time-separator",":"),L=ni("flatpickr-hour",{"aria-label":t.l10n.hourAriaLabel});t.hourElement=L.getElementsByTagName("input")[0];var U=ni("flatpickr-minute",{"aria-label":t.l10n.minuteAriaLabel});if(t.minuteElement=U.getElementsByTagName("input")[0],t.hourElement.tabIndex=t.minuteElement.tabIndex=-1,t.hourElement.value=dn(t.latestSelectedDateObj?t.latestSelectedDateObj.getHours():t.config.time_24hr?h.hours:_(h.hours)),t.minuteElement.value=dn(t.latestSelectedDateObj?t.latestSelectedDateObj.getMinutes():h.minutes),t.hourElement.setAttribute("step",t.config.hourIncrement.toString()),t.minuteElement.setAttribute("step",t.config.minuteIncrement.toString()),t.hourElement.setAttribute("min",t.config.time_24hr?"0":"1"),t.hourElement.setAttribute("max",t.config.time_24hr?"23":"12"),t.hourElement.setAttribute("maxlength","2"),t.minuteElement.setAttribute("min","0"),t.minuteElement.setAttribute("max","59"),t.minuteElement.setAttribute("maxlength","2"),t.timeContainer.appendChild(L),t.timeContainer.appendChild(g),t.timeContainer.appendChild(U),t.config.time_24hr&&t.timeContainer.classList.add("time24hr"),t.config.enableSeconds){t.timeContainer.classList.add("hasSeconds");var le=ni("flatpickr-second");t.secondElement=le.getElementsByTagName("input")[0],t.secondElement.value=dn(t.latestSelectedDateObj?t.latestSelectedDateObj.getSeconds():h.seconds),t.secondElement.setAttribute("step",t.minuteElement.getAttribute("step")),t.secondElement.setAttribute("min","0"),t.secondElement.setAttribute("max","59"),t.secondElement.setAttribute("maxlength","2"),t.timeContainer.appendChild(ut("span","flatpickr-time-separator",":")),t.timeContainer.appendChild(le)}return t.config.time_24hr||(t.amPM=ut("span","flatpickr-am-pm",t.l10n.amPM[wn((t.latestSelectedDateObj?t.hourElement.value:t.config.defaultHour)>11)]),t.amPM.title=t.l10n.toggleTitle,t.amPM.tabIndex=-1,t.timeContainer.appendChild(t.amPM)),t.timeContainer}function ue(){t.weekdayContainer?ti(t.weekdayContainer):t.weekdayContainer=ut("div","flatpickr-weekdays");for(var h=t.config.showMonths;h--;){var g=ut("div","flatpickr-weekdaycontainer");t.weekdayContainer.appendChild(g)}return ge(),t.weekdayContainer}function ge(){if(t.weekdayContainer){var h=t.l10n.firstDayOfWeek,g=Wu(t.l10n.weekdays.shorthand);h>0&&h<g.length&&(g=Wu(g.splice(h,g.length),g.splice(0,h)));for(var L=t.config.showMonths;L--;)t.weekdayContainer.children[L].innerHTML=`
      <span class='flatpickr-weekday'>
        `+g.join("</span><span class='flatpickr-weekday'>")+`
      </span>
      `}}function fe(){t.calendarContainer.classList.add("hasWeeks");var h=ut("div","flatpickr-weekwrapper");h.appendChild(ut("span","flatpickr-weekday",t.l10n.weekAbbreviation));var g=ut("div","flatpickr-weeks");return h.appendChild(g),{weekWrapper:h,weekNumbers:g}}function Y(h,g){g===void 0&&(g=!0);var L=g?h:h-t.currentMonth;L<0&&t._hidePrevMonthArrow===!0||L>0&&t._hideNextMonthArrow===!0||(t.currentMonth+=L,(t.currentMonth<0||t.currentMonth>11)&&(t.currentYear+=t.currentMonth>11?1:-1,t.currentMonth=(t.currentMonth+12)%12,Xe("onYearChange"),de()),ae(),Xe("onMonthChange"),W())}function Z(h,g){if(h===void 0&&(h=!0),g===void 0&&(g=!0),t.input.value="",t.altInput!==void 0&&(t.altInput.value=""),t.mobileInput!==void 0&&(t.mobileInput.value=""),t.selectedDates=[],t.latestSelectedDateObj=void 0,g===!0&&(t.currentYear=t._initialDate.getFullYear(),t.currentMonth=t._initialDate.getMonth()),t.config.enableTime===!0){var L=Gl(t.config),U=L.hours,le=L.minutes,be=L.seconds;F(U,le,be)}t.redraw(),h&&Xe("onChange")}function ne(){t.isOpen=!1,t.isMobile||(t.calendarContainer!==void 0&&t.calendarContainer.classList.remove("open"),t._input!==void 0&&t._input.classList.remove("active")),Xe("onClose")}function oe(){t.config!==void 0&&Xe("onDestroy");for(var h=t._handlers.length;h--;)t._handlers[h].remove();if(t._handlers=[],t.mobileInput)t.mobileInput.parentNode&&t.mobileInput.parentNode.removeChild(t.mobileInput),t.mobileInput=void 0;else if(t.calendarContainer&&t.calendarContainer.parentNode)if(t.config.static&&t.calendarContainer.parentNode){var g=t.calendarContainer.parentNode;if(g.lastChild&&g.removeChild(g.lastChild),g.parentNode){for(;g.firstChild;)g.parentNode.insertBefore(g.firstChild,g);g.parentNode.removeChild(g)}}else t.calendarContainer.parentNode.removeChild(t.calendarContainer);t.altInput&&(t.input.type="text",t.altInput.parentNode&&t.altInput.parentNode.removeChild(t.altInput),delete t.altInput),t.input&&(t.input.type=t.input._type,t.input.classList.remove("flatpickr-input"),t.input.removeAttribute("readonly")),["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","monthsDropdownContainer","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach(function(L){try{delete t[L]}catch{}})}function pe(h){return t.calendarContainer.contains(h)}function Ae(h){if(t.isOpen&&!t.config.inline){var g=gn(h),L=pe(g),U=g===t.input||g===t.altInput||t.element.contains(g)||h.path&&h.path.indexOf&&(~h.path.indexOf(t.input)||~h.path.indexOf(t.altInput)),le=!U&&!L&&!pe(h.relatedTarget),be=!t.config.ignoredFocusElements.some(function(He){return He.contains(g)});le&&be&&(t.config.allowInput&&t.setDate(t._input.value,!1,t.config.altInput?t.config.altFormat:t.config.dateFormat),t.timeContainer!==void 0&&t.minuteElement!==void 0&&t.hourElement!==void 0&&t.input.value!==""&&t.input.value!==void 0&&d(),t.close(),t.config&&t.config.mode==="range"&&t.selectedDates.length===1&&t.clear(!1))}}function _e(h){if(!(!h||t.config.minDate&&h<t.config.minDate.getFullYear()||t.config.maxDate&&h>t.config.maxDate.getFullYear())){var g=h,L=t.currentYear!==g;t.currentYear=g||t.currentYear,t.config.maxDate&&t.currentYear===t.config.maxDate.getFullYear()?t.currentMonth=Math.min(t.config.maxDate.getMonth(),t.currentMonth):t.config.minDate&&t.currentYear===t.config.minDate.getFullYear()&&(t.currentMonth=Math.max(t.config.minDate.getMonth(),t.currentMonth)),L&&(t.redraw(),Xe("onYearChange"),de())}}function Le(h,g){var L;g===void 0&&(g=!0);var U=t.parseDate(h,void 0,g);if(t.config.minDate&&U&&vn(U,t.config.minDate,g!==void 0?g:!t.minDateHasTime)<0||t.config.maxDate&&U&&vn(U,t.config.maxDate,g!==void 0?g:!t.maxDateHasTime)>0)return!1;if(!t.config.enable&&t.config.disable.length===0)return!0;if(U===void 0)return!1;for(var le=!!t.config.enable,be=(L=t.config.enable)!==null&&L!==void 0?L:t.config.disable,He=0,Te=void 0;He<be.length;He++){if(Te=be[He],typeof Te=="function"&&Te(U))return le;if(Te instanceof Date&&U!==void 0&&Te.getTime()===U.getTime())return le;if(typeof Te=="string"){var Ke=t.parseDate(Te,void 0,!0);return Ke&&Ke.getTime()===U.getTime()?le:!le}else if(typeof Te=="object"&&U!==void 0&&Te.from&&Te.to&&U.getTime()>=Te.from.getTime()&&U.getTime()<=Te.to.getTime())return le}return!le}function Pe(h){return t.daysContainer!==void 0?h.className.indexOf("hidden")===-1&&h.className.indexOf("flatpickr-disabled")===-1&&t.daysContainer.contains(h):!1}function qe(h){var g=h.target===t._input,L=t._input.value.trimEnd()!==Re();g&&L&&!(h.relatedTarget&&pe(h.relatedTarget))&&t.setDate(t._input.value,!0,h.target===t.altInput?t.config.altFormat:t.config.dateFormat)}function Ye(h){var g=gn(h),L=t.config.wrap?e.contains(g):g===t._input,U=t.config.allowInput,le=t.isOpen&&(!U||!L),be=t.config.inline&&L&&!U;if(h.keyCode===13&&L){if(U)return t.setDate(t._input.value,!0,g===t.altInput?t.config.altFormat:t.config.dateFormat),t.close(),g.blur();t.open()}else if(pe(g)||le||be){var He=!!t.timeContainer&&t.timeContainer.contains(g);switch(h.keyCode){case 13:He?(h.preventDefault(),d(),Dt()):Lt(h);break;case 27:h.preventDefault(),Dt();break;case 8:case 46:L&&!t.config.allowInput&&(h.preventDefault(),t.clear());break;case 37:case 39:if(!He&&!L){h.preventDefault();var Te=i();if(t.daysContainer!==void 0&&(U===!1||Te&&Pe(Te))){var Ke=h.keyCode===39?1:-1;h.ctrlKey?(h.stopPropagation(),Y(Ke),se(M(1),0)):se(void 0,Ke)}}else t.hourElement&&t.hourElement.focus();break;case 38:case 40:h.preventDefault();var Ie=h.keyCode===40?1:-1;t.daysContainer&&g.$i!==void 0||g===t.input||g===t.altInput?h.ctrlKey?(h.stopPropagation(),_e(t.currentYear-Ie),se(M(1),0)):He||se(void 0,Ie*7):g===t.currentYearElement?_e(t.currentYear-Ie):t.config.enableTime&&(!He&&t.hourElement&&t.hourElement.focus(),d(h),t._debouncedChange());break;case 9:if(He){var A=[t.hourElement,t.minuteElement,t.secondElement,t.amPM].concat(t.pluginElements).filter(function(q){return q}),H=A.indexOf(g);if(H!==-1){var J=A[H+(h.shiftKey?-1:1)];h.preventDefault(),(J||t._input).focus()}}else!t.config.noCalendar&&t.daysContainer&&t.daysContainer.contains(g)&&h.shiftKey&&(h.preventDefault(),t._input.focus());break}}if(t.amPM!==void 0&&g===t.amPM)switch(h.key){case t.l10n.amPM[0].charAt(0):case t.l10n.amPM[0].charAt(0).toLowerCase():t.amPM.textContent=t.l10n.amPM[0],C(),$e();break;case t.l10n.amPM[1].charAt(0):case t.l10n.amPM[1].charAt(0).toLowerCase():t.amPM.textContent=t.l10n.amPM[1],C(),$e();break}(L||pe(g))&&Xe("onKeyDown",h)}function Qe(h,g){if(g===void 0&&(g="flatpickr-day"),!(t.selectedDates.length!==1||h&&(!h.classList.contains(g)||h.classList.contains("flatpickr-disabled")))){for(var L=h?h.dateObj.getTime():t.days.firstElementChild.dateObj.getTime(),U=t.parseDate(t.selectedDates[0],void 0,!0).getTime(),le=Math.min(L,t.selectedDates[0].getTime()),be=Math.max(L,t.selectedDates[0].getTime()),He=!1,Te=0,Ke=0,Ie=le;Ie<be;Ie+=Kx.DAY)Le(new Date(Ie),!0)||(He=He||Ie>le&&Ie<be,Ie<U&&(!Te||Ie>Te)?Te=Ie:Ie>U&&(!Ke||Ie<Ke)&&(Ke=Ie));var A=Array.from(t.rContainer.querySelectorAll("*:nth-child(-n+"+t.config.showMonths+") > ."+g));A.forEach(function(H){var J=H.dateObj,q=J.getTime(),ve=Te>0&&q<Te||Ke>0&&q>Ke;if(ve){H.classList.add("notAllowed"),["inRange","startRange","endRange"].forEach(function(Se){H.classList.remove(Se)});return}else if(He&&!ve)return;["startRange","inRange","endRange","notAllowed"].forEach(function(Se){H.classList.remove(Se)}),h!==void 0&&(h.classList.add(L<=t.selectedDates[0].getTime()?"startRange":"endRange"),U<L&&q===U?H.classList.add("startRange"):U>L&&q===U&&H.classList.add("endRange"),q>=Te&&(Ke===0||q<=Ke)&&Hx(q,U,L)&&H.classList.add("inRange"))})}}function Q(){t.isOpen&&!t.config.static&&!t.config.inline&&Fe()}function P(h,g){if(g===void 0&&(g=t._positionElement),t.isMobile===!0){if(h){h.preventDefault();var L=gn(h);L&&L.blur()}t.mobileInput!==void 0&&(t.mobileInput.focus(),t.mobileInput.click()),Xe("onOpen");return}else if(t._input.disabled||t.config.inline)return;var U=t.isOpen;t.isOpen=!0,U||(t.calendarContainer.classList.add("open"),t._input.classList.add("active"),Xe("onOpen"),Fe(g)),t.config.enableTime===!0&&t.config.noCalendar===!0&&t.config.allowInput===!1&&(h===void 0||!t.timeContainer.contains(h.relatedTarget))&&setTimeout(function(){return t.hourElement.select()},50)}function $(h){return function(g){var L=t.config["_"+h+"Date"]=t.parseDate(g,t.config.dateFormat),U=t.config["_"+(h==="min"?"max":"min")+"Date"];L!==void 0&&(t[h==="min"?"minDateHasTime":"maxDateHasTime"]=L.getHours()>0||L.getMinutes()>0||L.getSeconds()>0),t.selectedDates&&(t.selectedDates=t.selectedDates.filter(function(le){return Le(le)}),!t.selectedDates.length&&h==="min"&&N(L),$e()),t.daysContainer&&(ht(),L!==void 0?t.currentYearElement[h]=L.getFullYear().toString():t.currentYearElement.removeAttribute(h),t.currentYearElement.disabled=!!U&&L!==void 0&&U.getFullYear()===L.getFullYear())}}function V(){var h=["wrap","weekNumbers","allowInput","allowInvalidPreload","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],g=Zt(Zt({},JSON.parse(JSON.stringify(e.dataset||{}))),n),L={};t.config.parseDate=g.parseDate,t.config.formatDate=g.formatDate,Object.defineProperty(t.config,"enable",{get:function(){return t.config._enable},set:function(A){t.config._enable=it(A)}}),Object.defineProperty(t.config,"disable",{get:function(){return t.config._disable},set:function(A){t.config._disable=it(A)}});var U=g.mode==="time";if(!g.dateFormat&&(g.enableTime||U)){var le=Rt.defaultConfig.dateFormat||bs.dateFormat;L.dateFormat=g.noCalendar||U?"H:i"+(g.enableSeconds?":S":""):le+" H:i"+(g.enableSeconds?":S":"")}if(g.altInput&&(g.enableTime||U)&&!g.altFormat){var be=Rt.defaultConfig.altFormat||bs.altFormat;L.altFormat=g.noCalendar||U?"h:i"+(g.enableSeconds?":S K":" K"):be+(" h:i"+(g.enableSeconds?":S":"")+" K")}Object.defineProperty(t.config,"minDate",{get:function(){return t.config._minDate},set:$("min")}),Object.defineProperty(t.config,"maxDate",{get:function(){return t.config._maxDate},set:$("max")});var He=function(A){return function(H){t.config[A==="min"?"_minTime":"_maxTime"]=t.parseDate(H,"H:i:S")}};Object.defineProperty(t.config,"minTime",{get:function(){return t.config._minTime},set:He("min")}),Object.defineProperty(t.config,"maxTime",{get:function(){return t.config._maxTime},set:He("max")}),g.mode==="time"&&(t.config.noCalendar=!0,t.config.enableTime=!0),Object.assign(t.config,L,g);for(var Te=0;Te<h.length;Te++)t.config[h[Te]]=t.config[h[Te]]===!0||t.config[h[Te]]==="true";Yl.filter(function(A){return t.config[A]!==void 0}).forEach(function(A){t.config[A]=ql(t.config[A]||[]).map(l)}),t.isMobile=!t.config.disableMobile&&!t.config.inline&&t.config.mode==="single"&&!t.config.disable.length&&!t.config.enable&&!t.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);for(var Te=0;Te<t.config.plugins.length;Te++){var Ke=t.config.plugins[Te](t)||{};for(var Ie in Ke)Yl.indexOf(Ie)>-1?t.config[Ie]=ql(Ke[Ie]).map(l).concat(t.config[Ie]):typeof g[Ie]>"u"&&(t.config[Ie]=Ke[Ie])}g.altInputClass||(t.config.altInputClass=ee().className+" "+t.config.altInputClass),Xe("onParseConfig")}function ee(){return t.config.wrap?e.querySelector("[data-input]"):e}function De(){typeof t.config.locale!="object"&&typeof Rt.l10ns[t.config.locale]>"u"&&t.config.errorHandler(new Error("flatpickr: invalid locale "+t.config.locale)),t.l10n=Zt(Zt({},Rt.l10ns.default),typeof t.config.locale=="object"?t.config.locale:t.config.locale!=="default"?Rt.l10ns[t.config.locale]:void 0),Rr.D="("+t.l10n.weekdays.shorthand.join("|")+")",Rr.l="("+t.l10n.weekdays.longhand.join("|")+")",Rr.M="("+t.l10n.months.shorthand.join("|")+")",Rr.F="("+t.l10n.months.longhand.join("|")+")",Rr.K="("+t.l10n.amPM[0]+"|"+t.l10n.amPM[1]+"|"+t.l10n.amPM[0].toLowerCase()+"|"+t.l10n.amPM[1].toLowerCase()+")";var h=Zt(Zt({},n),JSON.parse(JSON.stringify(e.dataset||{})));h.time_24hr===void 0&&Rt.defaultConfig.time_24hr===void 0&&(t.config.time_24hr=t.l10n.time_24hr),t.formatDate=Qp(t),t.parseDate=tc({config:t.config,l10n:t.l10n})}function Fe(h){if(typeof t.config.position=="function")return void t.config.position(t,h);if(t.calendarContainer!==void 0){Xe("onPreCalendarPosition");var g=h||t._positionElement,L=Array.prototype.reduce.call(t.calendarContainer.children,function(lt,at){return lt+at.offsetHeight},0),U=t.calendarContainer.offsetWidth,le=t.config.position.split(" "),be=le[0],He=le.length>1?le[1]:null,Te=g.getBoundingClientRect(),Ke=window.innerHeight-Te.bottom,Ie=be==="above"||be!=="below"&&Ke<L&&Te.top>L,A=window.pageYOffset+Te.top+(Ie?-L-2:g.offsetHeight+2);if(sn(t.calendarContainer,"arrowTop",!Ie),sn(t.calendarContainer,"arrowBottom",Ie),!t.config.inline){var H=window.pageXOffset+Te.left,J=!1,q=!1;He==="center"?(H-=(U-Te.width)/2,J=!0):He==="right"&&(H-=U-Te.width,q=!0),sn(t.calendarContainer,"arrowLeft",!J&&!q),sn(t.calendarContainer,"arrowCenter",J),sn(t.calendarContainer,"arrowRight",q);var ve=window.document.body.offsetWidth-(window.pageXOffset+Te.right),Se=H+U>window.document.body.offsetWidth,T=ve+U>window.document.body.offsetWidth;if(sn(t.calendarContainer,"rightMost",Se),!t.config.static)if(t.calendarContainer.style.top=A+"px",!Se)t.calendarContainer.style.left=H+"px",t.calendarContainer.style.right="auto";else if(!T)t.calendarContainer.style.left="auto",t.calendarContainer.style.right=ve+"px";else{var Ce=re();if(Ce===void 0)return;var Ge=window.document.body.offsetWidth,Ee=Math.max(0,Ge/2-U/2),ke=".flatpickr-calendar.centerMost:before",ze=".flatpickr-calendar.centerMost:after",Ue=Ce.cssRules.length,tt="{left:"+Te.left+"px;right:auto;}";sn(t.calendarContainer,"rightMost",!1),sn(t.calendarContainer,"centerMost",!0),Ce.insertRule(ke+","+ze+tt,Ue),t.calendarContainer.style.left=Ee+"px",t.calendarContainer.style.right="auto"}}}}function re(){for(var h=null,g=0;g<document.styleSheets.length;g++){var L=document.styleSheets[g];if(L.cssRules){try{L.cssRules}catch{continue}h=L;break}}return h??st()}function st(){var h=document.createElement("style");return document.head.appendChild(h),h.sheet}function ht(){t.config.noCalendar||t.isMobile||(de(),W(),ae())}function Dt(){t._input.focus(),window.navigator.userAgent.indexOf("MSIE")!==-1||navigator.msMaxTouchPoints!==void 0?setTimeout(t.close,0):t.close()}function Lt(h){h.preventDefault(),h.stopPropagation();var g=function(A){return A.classList&&A.classList.contains("flatpickr-day")&&!A.classList.contains("flatpickr-disabled")&&!A.classList.contains("notAllowed")},L=qp(gn(h),g);if(L!==void 0){var U=L,le=t.latestSelectedDateObj=new Date(U.dateObj.getTime()),be=(le.getMonth()<t.currentMonth||le.getMonth()>t.currentMonth+t.config.showMonths-1)&&t.config.mode!=="range";if(t.selectedDateElem=U,t.config.mode==="single")t.selectedDates=[le];else if(t.config.mode==="multiple"){var He=w(le);He?t.selectedDates.splice(parseInt(He),1):t.selectedDates.push(le)}else t.config.mode==="range"&&(t.selectedDates.length===2&&t.clear(!1,!1),t.latestSelectedDateObj=le,t.selectedDates.push(le),vn(le,t.selectedDates[0],!0)!==0&&t.selectedDates.sort(function(A,H){return A.getTime()-H.getTime()}));if(C(),be){var Te=t.currentYear!==le.getFullYear();t.currentYear=le.getFullYear(),t.currentMonth=le.getMonth(),Te&&(Xe("onYearChange"),de()),Xe("onMonthChange")}if(W(),ae(),$e(),!be&&t.config.mode!=="range"&&t.config.showMonths===1?I(U):t.selectedDateElem!==void 0&&t.hourElement===void 0&&t.selectedDateElem&&t.selectedDateElem.focus(),t.hourElement!==void 0&&t.hourElement!==void 0&&t.hourElement.focus(),t.config.closeOnSelect){var Ke=t.config.mode==="single"&&!t.config.enableTime,Ie=t.config.mode==="range"&&t.selectedDates.length===2&&!t.config.enableTime;(Ke||Ie)&&Dt()}E()}}var G={locale:[De,ge],showMonths:[me,u,ue],minDate:[m],maxDate:[m],positionElement:[ct],clickOpens:[function(){t.config.clickOpens===!0?(b(t._input,"focus",t.open),b(t._input,"click",t.open)):(t._input.removeEventListener("focus",t.open),t._input.removeEventListener("click",t.open))}]};function ce(h,g){if(h!==null&&typeof h=="object"){Object.assign(t.config,h);for(var L in h)G[L]!==void 0&&G[L].forEach(function(U){return U()})}else t.config[h]=g,G[h]!==void 0?G[h].forEach(function(U){return U()}):Yl.indexOf(h)>-1&&(t.config[h]=ql(g));t.redraw(),$e(!0)}function ye(h,g){var L=[];if(h instanceof Array)L=h.map(function(U){return t.parseDate(U,g)});else if(h instanceof Date||typeof h=="number")L=[t.parseDate(h,g)];else if(typeof h=="string")switch(t.config.mode){case"single":case"time":L=[t.parseDate(h,g)];break;case"multiple":L=h.split(t.config.conjunction).map(function(U){return t.parseDate(U,g)});break;case"range":L=h.split(t.l10n.rangeSeparator).map(function(U){return t.parseDate(U,g)});break}else t.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(h)));t.selectedDates=t.config.allowInvalidPreload?L:L.filter(function(U){return U instanceof Date&&Le(U,!1)}),t.config.mode==="range"&&t.selectedDates.sort(function(U,le){return U.getTime()-le.getTime()})}function We(h,g,L){if(g===void 0&&(g=!1),L===void 0&&(L=t.config.dateFormat),h!==0&&!h||h instanceof Array&&h.length===0)return t.clear(g);ye(h,L),t.latestSelectedDateObj=t.selectedDates[t.selectedDates.length-1],t.redraw(),m(void 0,g),N(),t.selectedDates.length===0&&t.clear(!1),$e(g),g&&Xe("onChange")}function it(h){return h.slice().map(function(g){return typeof g=="string"||typeof g=="number"||g instanceof Date?t.parseDate(g,void 0,!0):g&&typeof g=="object"&&g.from&&g.to?{from:t.parseDate(g.from,void 0),to:t.parseDate(g.to,void 0)}:g}).filter(function(g){return g})}function Ze(){t.selectedDates=[],t.now=t.parseDate(t.config.now)||new Date;var h=t.config.defaultDate||((t.input.nodeName==="INPUT"||t.input.nodeName==="TEXTAREA")&&t.input.placeholder&&t.input.value===t.input.placeholder?null:t.input.value);h&&ye(h,t.config.dateFormat),t._initialDate=t.selectedDates.length>0?t.selectedDates[0]:t.config.minDate&&t.config.minDate.getTime()>t.now.getTime()?t.config.minDate:t.config.maxDate&&t.config.maxDate.getTime()<t.now.getTime()?t.config.maxDate:t.now,t.currentYear=t._initialDate.getFullYear(),t.currentMonth=t._initialDate.getMonth(),t.selectedDates.length>0&&(t.latestSelectedDateObj=t.selectedDates[0]),t.config.minTime!==void 0&&(t.config.minTime=t.parseDate(t.config.minTime,"H:i")),t.config.maxTime!==void 0&&(t.config.maxTime=t.parseDate(t.config.maxTime,"H:i")),t.minDateHasTime=!!t.config.minDate&&(t.config.minDate.getHours()>0||t.config.minDate.getMinutes()>0||t.config.minDate.getSeconds()>0),t.maxDateHasTime=!!t.config.maxDate&&(t.config.maxDate.getHours()>0||t.config.maxDate.getMinutes()>0||t.config.maxDate.getSeconds()>0)}function vt(){if(t.input=ee(),!t.input){t.config.errorHandler(new Error("Invalid input element specified"));return}t.input._type=t.input.type,t.input.type="text",t.input.classList.add("flatpickr-input"),t._input=t.input,t.config.altInput&&(t.altInput=ut(t.input.nodeName,t.config.altInputClass),t._input=t.altInput,t.altInput.placeholder=t.input.placeholder,t.altInput.disabled=t.input.disabled,t.altInput.required=t.input.required,t.altInput.tabIndex=t.input.tabIndex,t.altInput.type="text",t.input.setAttribute("type","hidden"),!t.config.static&&t.input.parentNode&&t.input.parentNode.insertBefore(t.altInput,t.input.nextSibling)),t.config.allowInput||t._input.setAttribute("readonly","readonly"),ct()}function ct(){t._positionElement=t.config.positionElement||t._input}function It(){var h=t.config.enableTime?t.config.noCalendar?"time":"datetime-local":"date";t.mobileInput=ut("input",t.input.className+" flatpickr-mobile"),t.mobileInput.tabIndex=1,t.mobileInput.type=h,t.mobileInput.disabled=t.input.disabled,t.mobileInput.required=t.input.required,t.mobileInput.placeholder=t.input.placeholder,t.mobileFormatStr=h==="datetime-local"?"Y-m-d\\TH:i:S":h==="date"?"Y-m-d":"H:i:S",t.selectedDates.length>0&&(t.mobileInput.defaultValue=t.mobileInput.value=t.formatDate(t.selectedDates[0],t.mobileFormatStr)),t.config.minDate&&(t.mobileInput.min=t.formatDate(t.config.minDate,"Y-m-d")),t.config.maxDate&&(t.mobileInput.max=t.formatDate(t.config.maxDate,"Y-m-d")),t.input.getAttribute("step")&&(t.mobileInput.step=String(t.input.getAttribute("step"))),t.input.type="hidden",t.altInput!==void 0&&(t.altInput.type="hidden");try{t.input.parentNode&&t.input.parentNode.insertBefore(t.mobileInput,t.input.nextSibling)}catch{}b(t.mobileInput,"change",function(g){t.setDate(gn(g).value,!1,t.mobileFormatStr),Xe("onChange"),Xe("onClose")})}function Ut(h){if(t.isOpen===!0)return t.close();t.open(h)}function Xe(h,g){if(t.config!==void 0){var L=t.config[h];if(L!==void 0&&L.length>0)for(var U=0;L[U]&&U<L.length;U++)L[U](t.selectedDates,t.input.value,t,g);h==="onChange"&&(t.input.dispatchEvent(f("change")),t.input.dispatchEvent(f("input")))}}function f(h){var g=document.createEvent("Event");return g.initEvent(h,!0,!0),g}function w(h){for(var g=0;g<t.selectedDates.length;g++){var L=t.selectedDates[g];if(L instanceof Date&&vn(L,h)===0)return""+g}return!1}function z(h){return t.config.mode!=="range"||t.selectedDates.length<2?!1:vn(h,t.selectedDates[0])>=0&&vn(h,t.selectedDates[1])<=0}function W(){t.config.noCalendar||t.isMobile||!t.monthNav||(t.yearElements.forEach(function(h,g){var L=new Date(t.currentYear,t.currentMonth,1);L.setMonth(t.currentMonth+g),t.config.showMonths>1||t.config.monthSelectorType==="static"?t.monthElements[g].textContent=qi(L.getMonth(),t.config.shorthandCurrentMonth,t.l10n)+" ":t.monthsDropdownContainer.value=L.getMonth().toString(),h.value=L.getFullYear().toString()}),t._hidePrevMonthArrow=t.config.minDate!==void 0&&(t.currentYear===t.config.minDate.getFullYear()?t.currentMonth<=t.config.minDate.getMonth():t.currentYear<t.config.minDate.getFullYear()),t._hideNextMonthArrow=t.config.maxDate!==void 0&&(t.currentYear===t.config.maxDate.getFullYear()?t.currentMonth+1>t.config.maxDate.getMonth():t.currentYear>t.config.maxDate.getFullYear()))}function Re(h){var g=h||(t.config.altInput?t.config.altFormat:t.config.dateFormat);return t.selectedDates.map(function(L){return t.formatDate(L,g)}).filter(function(L,U,le){return t.config.mode!=="range"||t.config.enableTime||le.indexOf(L)===U}).join(t.config.mode!=="range"?t.config.conjunction:t.l10n.rangeSeparator)}function $e(h){h===void 0&&(h=!0),t.mobileInput!==void 0&&t.mobileFormatStr&&(t.mobileInput.value=t.latestSelectedDateObj!==void 0?t.formatDate(t.latestSelectedDateObj,t.mobileFormatStr):""),t.input.value=Re(t.config.dateFormat),t.altInput!==void 0&&(t.altInput.value=Re(t.config.altFormat)),h!==!1&&Xe("onValueUpdate")}function D(h){var g=gn(h),L=t.prevMonthNav.contains(g),U=t.nextMonthNav.contains(g);L||U?Y(L?-1:1):t.yearElements.indexOf(g)>=0?g.select():g.classList.contains("arrowUp")?t.changeYear(t.currentYear+1):g.classList.contains("arrowDown")&&t.changeYear(t.currentYear-1)}function K(h){h.preventDefault();var g=h.type==="keydown",L=gn(h),U=L;t.amPM!==void 0&&L===t.amPM&&(t.amPM.textContent=t.l10n.amPM[wn(t.amPM.textContent===t.l10n.amPM[0])]);var le=parseFloat(U.getAttribute("min")),be=parseFloat(U.getAttribute("max")),He=parseFloat(U.getAttribute("step")),Te=parseInt(U.value,10),Ke=h.delta||(g?h.which===38?1:-1:0),Ie=Te+He*Ke;if(typeof U.value<"u"&&U.value.length===2){var A=U===t.hourElement,H=U===t.minuteElement;Ie<le?(Ie=be+Ie+wn(!A)+(wn(A)&&wn(!t.amPM)),H&&j(void 0,-1,t.hourElement)):Ie>be&&(Ie=U===t.hourElement?Ie-be-wn(!t.amPM):le,H&&j(void 0,1,t.hourElement)),t.amPM&&A&&(He===1?Ie+Te===23:Math.abs(Ie-Te)>He)&&(t.amPM.textContent=t.l10n.amPM[wn(t.amPM.textContent===t.l10n.amPM[0])]),U.value=dn(Ie)}}return a(),t}function Ss(e,n){for(var t=Array.prototype.slice.call(e).filter(function(l){return l instanceof HTMLElement}),s=[],a=0;a<t.length;a++){var i=t[a];try{if(i.getAttribute("data-fp-omit")!==null)continue;i._flatpickr!==void 0&&(i._flatpickr.destroy(),i._flatpickr=void 0),i._flatpickr=qx(i,n||{}),s.push(i._flatpickr)}catch(l){console.error(l)}}return s.length===1?s[0]:s}typeof HTMLElement<"u"&&typeof HTMLCollection<"u"&&typeof NodeList<"u"&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(e){return Ss(this,e)},HTMLElement.prototype.flatpickr=function(e){return Ss([this],e)});var Rt=function(e,n){return typeof e=="string"?Ss(window.document.querySelectorAll(e),n):e instanceof Node?Ss([e],n):Ss(e,n)};Rt.defaultConfig={};Rt.l10ns={en:Zt({},Ea),default:Zt({},Ea)};Rt.localize=function(e){Rt.l10ns.default=Zt(Zt({},Rt.l10ns.default),e)};Rt.setDefaults=function(e){Rt.defaultConfig=Zt(Zt({},Rt.defaultConfig),e)};Rt.parseDate=tc({});Rt.formatDate=Qp({});Rt.compareDates=vn;typeof jQuery<"u"&&typeof jQuery.fn<"u"&&(jQuery.fn.flatpickr=function(e){return Ss(this,e)});Date.prototype.fp_incr=function(e){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+(typeof e=="string"?parseInt(e,10):e))};typeof window<"u"&&(window.flatpickr=Rt);const Qx=Object.freeze(Object.defineProperty({__proto__:null,default:Rt},Symbol.toStringTag,{value:"Module"})),Jx=Ah(Qx);(function(e){function n(Y){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?n=function(ne){return typeof ne}:n=function(ne){return ne&&typeof Symbol=="function"&&ne.constructor===Symbol&&ne!==Symbol.prototype?"symbol":typeof ne},n(Y)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=u(o),s=i(Vx),a=i(Jx);function i(Y){return Y&&Y.__esModule?Y:{default:Y}}function l(){if(typeof WeakMap!="function")return null;var Y=new WeakMap;return l=function(){return Y},Y}function u(Y){if(Y&&Y.__esModule)return Y;if(Y===null||n(Y)!=="object"&&typeof Y!="function")return{default:Y};var Z=l();if(Z&&Z.has(Y))return Z.get(Y);var ne={},oe=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var pe in Y)if(Object.prototype.hasOwnProperty.call(Y,pe)){var Ae=oe?Object.getOwnPropertyDescriptor(Y,pe):null;Ae&&(Ae.get||Ae.set)?Object.defineProperty(ne,pe,Ae):ne[pe]=Y[pe]}return ne.default=Y,Z&&Z.set(Y,ne),ne}function d(Y){return N(Y)||C(Y)||_(Y)||x()}function x(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _(Y,Z){if(Y){if(typeof Y=="string")return F(Y,Z);var ne=Object.prototype.toString.call(Y).slice(8,-1);if(ne==="Object"&&Y.constructor&&(ne=Y.constructor.name),ne==="Map"||ne==="Set")return Array.from(Y);if(ne==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ne))return F(Y,Z)}}function C(Y){if(typeof Symbol<"u"&&Symbol.iterator in Object(Y))return Array.from(Y)}function N(Y){if(Array.isArray(Y))return F(Y)}function F(Y,Z){(Z==null||Z>Y.length)&&(Z=Y.length);for(var ne=0,oe=new Array(Z);ne<Z;ne++)oe[ne]=Y[ne];return oe}function v(){return v=Object.assign||function(Y){for(var Z=1;Z<arguments.length;Z++){var ne=arguments[Z];for(var oe in ne)Object.prototype.hasOwnProperty.call(ne,oe)&&(Y[oe]=ne[oe])}return Y},v.apply(this,arguments)}function b(Y,Z){if(Y==null)return{};var ne=E(Y,Z),oe,pe;if(Object.getOwnPropertySymbols){var Ae=Object.getOwnPropertySymbols(Y);for(pe=0;pe<Ae.length;pe++)oe=Ae[pe],!(Z.indexOf(oe)>=0)&&Object.prototype.propertyIsEnumerable.call(Y,oe)&&(ne[oe]=Y[oe])}return ne}function E(Y,Z){if(Y==null)return{};var ne={},oe=Object.keys(Y),pe,Ae;for(Ae=0;Ae<oe.length;Ae++)pe=oe[Ae],!(Z.indexOf(pe)>=0)&&(ne[pe]=Y[pe]);return ne}function p(Y,Z){var ne=Object.keys(Y);if(Object.getOwnPropertySymbols){var oe=Object.getOwnPropertySymbols(Y);Z&&(oe=oe.filter(function(pe){return Object.getOwnPropertyDescriptor(Y,pe).enumerable})),ne.push.apply(ne,oe)}return ne}function m(Y){for(var Z=1;Z<arguments.length;Z++){var ne=arguments[Z]!=null?arguments[Z]:{};Z%2?p(Object(ne),!0).forEach(function(oe){de(Y,oe,ne[oe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Y,Object.getOwnPropertyDescriptors(ne)):p(Object(ne)).forEach(function(oe){Object.defineProperty(Y,oe,Object.getOwnPropertyDescriptor(ne,oe))})}return Y}function y(Y,Z){if(!(Y instanceof Z))throw new TypeError("Cannot call a class as a function")}function j(Y,Z){for(var ne=0;ne<Z.length;ne++){var oe=Z[ne];oe.enumerable=oe.enumerable||!1,oe.configurable=!0,"value"in oe&&(oe.writable=!0),Object.defineProperty(Y,oe.key,oe)}}function O(Y,Z,ne){return Z&&j(Y.prototype,Z),Y}function k(Y,Z){if(typeof Z!="function"&&Z!==null)throw new TypeError("Super expression must either be null or a function");Y.prototype=Object.create(Z&&Z.prototype,{constructor:{value:Y,writable:!0,configurable:!0}}),Z&&I(Y,Z)}function I(Y,Z){return I=Object.setPrototypeOf||function(oe,pe){return oe.__proto__=pe,oe},I(Y,Z)}function M(Y){var Z=R();return function(){var oe=ae(Y),pe;if(Z){var Ae=ae(this).constructor;pe=Reflect.construct(oe,arguments,Ae)}else pe=oe.apply(this,arguments);return X(this,pe)}}function X(Y,Z){return Z&&(n(Z)==="object"||typeof Z=="function")?Z:se(Y)}function se(Y){if(Y===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Y}function R(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ae(Y){return ae=Object.setPrototypeOf?Object.getPrototypeOf:function(ne){return ne.__proto__||Object.getPrototypeOf(ne)},ae(Y)}function de(Y,Z,ne){return Z in Y?Object.defineProperty(Y,Z,{value:ne,enumerable:!0,configurable:!0,writable:!0}):Y[Z]=ne,Y}var Ne=["onChange","onOpen","onClose","onMonthChange","onYearChange","onReady","onValueUpdate","onDayCreate"],me=s.default.oneOfType([s.default.func,s.default.arrayOf(s.default.func)]),he=["onCreate","onDestroy"],we=s.default.func,ue=function(Y){k(ne,Y);var Z=M(ne);function ne(){var oe;y(this,ne);for(var pe=arguments.length,Ae=new Array(pe),_e=0;_e<pe;_e++)Ae[_e]=arguments[_e];return oe=Z.call.apply(Z,[this].concat(Ae)),de(se(oe),"createFlatpickrInstance",function(){var Le=m({onClose:function(){oe.node.blur&&oe.node.blur()}},oe.props.options);Le=ge(Le,oe.props),oe.flatpickr=(0,a.default)(oe.node,Le),oe.props.hasOwnProperty("value")&&oe.flatpickr.setDate(oe.props.value,!1);var Pe=oe.props.onCreate;Pe&&Pe(oe.flatpickr)}),de(se(oe),"destroyFlatpickrInstance",function(){var Le=oe.props.onDestroy;Le&&Le(oe.flatpickr),oe.flatpickr.destroy(),oe.flatpickr=null}),de(se(oe),"handleNodeChange",function(Le){oe.node=Le,oe.flatpickr&&(oe.destroyFlatpickrInstance(),oe.createFlatpickrInstance())}),oe}return O(ne,[{key:"componentDidUpdate",value:function(pe){var Ae=this.props.options,_e=pe.options;Ae=ge(Ae,this.props),_e=ge(_e,pe);for(var Le=Object.getOwnPropertyNames(Ae),Pe=Le.length-1;Pe>=0;Pe--){var qe=Le[Pe],Ye=Ae[qe];Ye!==_e[qe]&&(Ne.indexOf(qe)!==-1&&!Array.isArray(Ye)&&(Ye=[Ye]),this.flatpickr.set(qe,Ye))}this.props.hasOwnProperty("value")&&!(this.props.value&&Array.isArray(this.props.value)&&pe.value&&Array.isArray(pe.value)&&this.props.value.every(function(Qe,Q){pe[Q]}))&&this.props.value!==pe.value&&this.flatpickr.setDate(this.props.value,!1)}},{key:"componentDidMount",value:function(){this.createFlatpickrInstance()}},{key:"componentWillUnmount",value:function(){this.destroyFlatpickrInstance()}},{key:"render",value:function(){var pe=this.props,Ae=pe.options,_e=pe.defaultValue,Le=pe.value,Pe=pe.children,qe=pe.render,Ye=b(pe,["options","defaultValue","value","children","render"]);return Ne.forEach(function(Qe){delete Ye[Qe]}),he.forEach(function(Qe){delete Ye[Qe]}),qe?qe(m(m({},Ye),{},{defaultValue:_e,value:Le}),this.handleNodeChange):Ae.wrap?t.default.createElement("div",v({},Ye,{ref:this.handleNodeChange}),Pe):t.default.createElement("input",v({},Ye,{defaultValue:_e,ref:this.handleNodeChange}))}}]),ne}(t.Component);de(ue,"propTypes",{defaultValue:s.default.string,options:s.default.object,onChange:me,onOpen:me,onClose:me,onMonthChange:me,onYearChange:me,onReady:me,onValueUpdate:me,onDayCreate:me,onCreate:we,onDestroy:we,value:s.default.oneOfType([s.default.string,s.default.array,s.default.object,s.default.number]),children:s.default.node,className:s.default.string,render:s.default.func}),de(ue,"defaultProps",{options:{}});function ge(Y,Z){var ne=m({},Y);return Ne.forEach(function(oe){if(Z.hasOwnProperty(oe)){var pe;ne[oe]&&!Array.isArray(ne[oe])?ne[oe]=[ne[oe]]:ne[oe]||(ne[oe]=[]);var Ae=Array.isArray(Z[oe])?Z[oe]:[Z[oe]];(pe=ne[oe]).push.apply(pe,d(Ae))}}),ne}var fe=ue;e.default=fe})(Hp);const Mt=af(Hp),Pr=()=>Ve("/events/airfields"),Qi=e=>Ve("/events/airfields",{method:"POST",body:JSON.stringify(e)}),Gx=e=>Ve(`/events/airfields/${e}`),Xx=(e,n)=>Ve(`/events/airfields/${e}`,{method:"PUT",body:JSON.stringify(n)}),Zx=e=>Ve(`/events/airfields/${e}`,{method:"DELETE"}),Sn=e=>!!e&&e.trim().length>0,ri=e=>e!=null&&Number.isFinite(e),e0=e=>e!=null,Jp=e=>{const n=e.primary_landing_area||{};return(e.sequence??0)>0&&Sn(e.name)&&Sn(e.coordinates)&&ri(e.elevation)&&Sn(e.scheduled_at)&&ri(e.takeoff_airfield_id)&&ri(e.distance_by_air)&&ri(e.distance_by_road)&&Sn(e.jumprun)&&Sn(n.name)&&Sn(n.description)&&Sn(n.size)&&Sn(n.obstacles)&&Sn(e.risk_assessment)&&Sn(e.safety_precautions)&&Sn(e.minimum_requirements)&&Sn(e.hospital)&&e0(e.rescue_boat)},Ji=["Participant","Skydiver","Staff","Ground Crew","Jump Master","Jump Leader","Photo","Pilot","COP","Driver"],nd=e=>Math.round(e*3.28084),Gi=e=>{if(e==null||Number.isNaN(e))return"";const n=nd(e);return`${e} m / ${n} ft`},Aa=()=>Ve("/logistics/transports"),Gp=e=>Ve(`/logistics/transports/${e}`),Xp=e=>Ve("/logistics/transports",{method:"POST",body:JSON.stringify(e)}),Zp=(e,n)=>Ve(`/logistics/transports/${e}`,{method:"PUT",body:JSON.stringify(n)}),t0=e=>Ve(`/logistics/transports/${e}`,{method:"DELETE"}),Da=()=>Ve("/logistics/ground-crews"),eh=e=>Ve(`/logistics/ground-crews/${e}`),n0=e=>Ve("/logistics/ground-crews",{method:"POST",body:JSON.stringify(e)}),th=(e,n)=>Ve(`/logistics/ground-crews/${e}`,{method:"PUT",body:JSON.stringify(n)}),r0=e=>Ve(`/logistics/ground-crews/${e}`,{method:"DELETE"}),$a=()=>Ve("/logistics/vehicles"),Gn=e=>Ve("/logistics/vehicles",{method:"POST",body:JSON.stringify(e)}),s0=e=>Ve(`/logistics/vehicles/${e}`),a0=(e,n)=>Ve(`/logistics/vehicles/${e}`,{method:"PUT",body:JSON.stringify(n)}),i0=e=>Ve(`/logistics/vehicles/${e}`,{method:"DELETE"}),Vn=()=>Ve("/logistics/others"),nh=e=>Ve(`/logistics/others/${e}`),rd=e=>Ve("/logistics/others",{method:"POST",body:JSON.stringify(e)}),rh=(e,n)=>Ve(`/logistics/others/${e}`,{method:"PUT",body:JSON.stringify(n)}),l0=e=>Ve(`/logistics/others/${e}`,{method:"DELETE"}),Wn=()=>Ve("/logistics/meals"),sh=e=>Ve(`/logistics/meals/${e}`),o0=e=>Ve("/logistics/meals",{method:"POST",body:JSON.stringify(e)}),ah=(e,n)=>Ve(`/logistics/meals/${e}`,{method:"PUT",body:JSON.stringify(n)}),c0=e=>Ve(`/logistics/meals/${e}`,{method:"DELETE"}),kt=e=>!!e&&e.trim().length>0,d0=[{value:"draft",label:"Draft"},{value:"planned",label:"Planned"},{value:"launched",label:"Launched"},{value:"scouted",label:"Scouted"},{value:"live",label:"Live"},{value:"past",label:"Past"}],u0=e=>ed(e),ih=e=>Px(e),Hu=e=>Ix(e),Bu=e=>Wp(e),Ku=e=>{const n=t=>String(t).padStart(2,"0");return`${e.getFullYear()}-${n(e.getMonth()+1)}-${n(e.getDate())}`},Yu=e=>e?ed(e).replace("T"," "):"",ts=e=>e?Un(e,{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1}):"",Ks=e=>e.replace(/^#\s*\d+\s*/,"").trim().toLowerCase(),qu=()=>({name:"",description:"",size:"",obstacles:""}),Xi=e=>({name:(e==null?void 0:e.name)||"",description:(e==null?void 0:e.description)||"",size:(e==null?void 0:e.size)||"",obstacles:(e==null?void 0:e.obstacles)||""}),lh=e=>Array.isArray(e)?e.map(n=>({name:n.name||"",telephone:n.telephone||"",email:n.email||""})):[],f0=e=>e.filter(n=>{var i,l,u;const t=(i=n.name)==null?void 0:i.trim(),s=(l=n.telephone)==null?void 0:l.trim(),a=(u=n.email)==null?void 0:u.trim();return!!(t||s||a)}),Qu=e=>{var n,t,s,a;return{name:((n=e==null?void 0:e.name)==null?void 0:n.trim())||"",description:((t=e==null?void 0:e.description)==null?void 0:t.trim())||"",size:((s=e==null?void 0:e.size)==null?void 0:s.trim())||"",obstacles:((a=e==null?void 0:e.obstacles)==null?void 0:a.trim())||""}},m0=e=>f0(e).map(n=>({name:n.name.trim(),telephone:n.telephone.trim(),email:n.email.trim()})),Ju=e=>{const n=ft(e.starts_at);n&&n.setUTCHours(9,0,0,0);const t=n?ih(n):"";return(Array.isArray(e.innhopps)?e.innhopps:[]).map((s,a)=>({id:s.id,sequence:s.sequence??a+1,name:s.name||"",coordinates:s.coordinates||"",elevation:s.elevation??void 0,takeoff_airfield_id:s.takeoff_airfield_id||void 0,scheduled_at:u0(s.scheduled_at)||t,notes:s.notes||"",reason_for_choice:s.reason_for_choice||"",adjust_altimeter_aad:s.adjust_altimeter_aad||"",notam:s.notam||"",distance_by_air:s.distance_by_air??void 0,distance_by_road:s.distance_by_road??void 0,primary_landing_area:Xi(s.primary_landing_area),secondary_landing_area:Xi(s.secondary_landing_area),risk_assessment:s.risk_assessment||"",safety_precautions:s.safety_precautions||"",jumprun:s.jumprun||"",hospital:s.hospital||"",rescue_boat:s.rescue_boat??void 0,minimum_requirements:s.minimum_requirements||"",land_owners:lh(s.land_owners),land_owner_permission:s.land_owner_permission??void 0,image_files:Array.isArray(s.image_files)?s.image_files.filter(i=>!!(i!=null&&i.data)):[]}))},p0=()=>{const{eventId:e}=Tn(),n=gt(),t=Jt(),s=o.useRef(!1),[a,i]=o.useState(null),[l,u]=o.useState([]),[d,x]=o.useState([]),[_,C]=o.useState([]),[N,F]=o.useState([]),[v,b]=o.useState([]),[E,p]=o.useState([]),[m,y]=o.useState(""),[j,O]=o.useState(""),[k,I]=o.useState(""),[M,X]=o.useState({season_id:"",name:"",location:"",slots:"",status:"draft",starts_at:"",ends_at:""}),[se,R]=o.useState({full_name:"",email:"",phone:"",experience_level:"",emergency_contact:"",roles:["Participant","Skydiver"]}),[ae,de]=o.useState({full_name:"",email:"",phone:"",experience_level:"",emergency_contact:"",roles:["Participant","Staff"]}),[Ne,me]=o.useState(!1),[he,we]=o.useState(!1),[ue,ge]=o.useState(!1),[fe,Y]=o.useState(!1),[Z,ne]=o.useState(!1),[oe,pe]=o.useState(!1),[Ae,_e]=o.useState({}),[Le,Pe]=o.useState({}),[qe,Ye]=o.useState({}),[Qe,Q]=o.useState([]),[P,$]=o.useState(!0),[V,ee]=o.useState(null),[De,Fe]=o.useState(null),[re,st]=o.useState(!1),[ht,Dt]=o.useState(!1),[Lt,G]=o.useState(!1),ce={boxShadow:"inset 0 0 0 2px #3b82f6",borderRadius:"8px"},ye={padding:"0.4rem 0.5rem",borderRadius:"8px"},[We,it]=o.useState(!1),[Ze,vt]=o.useState(""),ct=`primary ${We?"saved":""}`,It=re?"Saving":We?"Saved":"Save",Ut=o.useCallback((c,S,B,te)=>{const ie=[...S].sort((Oe,dt)=>Oe-dt),xe=[...B].sort((Oe,dt)=>Oe-dt);return JSON.stringify({form:c,participants:ie,airfields:xe,innhopps:te})},[]),Xe=o.useMemo(()=>Ut(M,v,E,Qe),[Ut,M,v,E,Qe]),[f,w]=o.useState({name:"",elevation:"",coordinates:"",description:""}),[z,W]=o.useState([]),[Re,$e]=o.useState(!1),[D,K]=o.useState({name:"",capacity:"",coordinates:"",booked:!1,check_in_at:"",check_out_at:"",notes:""}),[h,g]=o.useState([]),[L,U]=o.useState([]),[le,be]=o.useState([]),[He,Te]=o.useState([]),[Ke,Ie]=o.useState(!1),[A,H]=o.useState({pickup_location:"",destination:"",passenger_count:"",scheduled_at:""}),[J,q]=o.useState(!1),[ve,Se]=o.useState({name:"",coordinates:"",scheduled_at:"",description:"",notes:""}),T=!kt(f.coordinates),Ce=!kt(D.coordinates),Ge=!kt(ve.coordinates),Ee=o.useMemo(()=>{const c=Array.isArray(z)?[...z]:[],S=B=>{const te=B.check_in_at||B.check_out_at||B.created_at||"",ie=ft(te),xe=ie?ie.getTime():Number.POSITIVE_INFINITY;return Number.isNaN(xe)?Number.POSITIVE_INFINITY:xe};return c.sort((B,te)=>{const ie=S(B)-S(te);return ie!==0?ie:(B.name||"").localeCompare(te.name||"")})},[z]),ke=o.useMemo(()=>(Array.isArray(He)?[...He]:[]).sort((S,B)=>{var xe,Oe;const te=((xe=ft(S.scheduled_at))==null?void 0:xe.getTime())??Number.POSITIVE_INFINITY,ie=((Oe=ft(B.scheduled_at))==null?void 0:Oe.getTime())??Number.POSITIVE_INFINITY;return te!==ie?te-ie:(S.name||"").localeCompare(B.name||"")}),[He]),ze=o.useCallback(c=>{var Oe;const S=Ks(c||"");if(!S)return null;const B=(Oe=a==null?void 0:a.innhopps)==null?void 0:Oe.find(dt=>Ks(dt.name)===S);if(B!=null&&B.coordinates)return B.coordinates;const te=z.find(dt=>Ks(dt.name||"")===S);if(te!=null&&te.coordinates)return te.coordinates;const ie=le.find(dt=>Ks(dt.name||"")===S);if(ie!=null&&ie.coordinates)return ie.coordinates;const xe=_.find(dt=>Ks(dt.name||"")===S);return xe!=null&&xe.coordinates?xe.coordinates:null},[z,_,a==null?void 0:a.innhopps,le]),[Ue,tt]=o.useState({details:!0,innhopps:!1,airfields:!1,participants:!1,staff:!1,accommodations:!1,transports:!1,groundCrews:!1,meals:!1,others:!1}),lt=o.useRef(Ue),at=o.useRef(!1),[yt,mt]=o.useState(null),Pt=o.useCallback(()=>{if(e)try{sessionStorage.setItem(`event-detail-state:${e}`,JSON.stringify({openSections:lt.current,scrollY:window.scrollY}))}catch{}},[e]);o.useEffect(()=>{lt.current=Ue},[Ue]),o.useEffect(()=>{if(!yt)return;const c=setTimeout(()=>mt(null),1800);return()=>clearTimeout(c)},[yt]),o.useEffect(()=>{if(!e||at.current)return;const c=`event-detail-state:${e}`,S=sessionStorage.getItem(c);if(S)try{const te=JSON.parse(S);te!=null&&te.openSections&&tt(ie=>({...ie,...te.openSections})),typeof(te==null?void 0:te.scrollY)=="number"&&setTimeout(()=>window.scrollTo(0,te.scrollY),0)}catch{}const B=sessionStorage.getItem(`event-detail-highlight:${e}`);return B&&(mt(B),sessionStorage.removeItem(`event-detail-highlight:${e}`)),at.current=!0,()=>{Pt()}},[e,Pt]),o.useEffect(()=>{if(!yt)return;let c=0;const S=setInterval(()=>{const B=document.getElementById(yt);B?(B.scrollIntoView({behavior:"smooth",block:"center"}),clearInterval(S)):c>10&&clearInterval(S),c+=1},120);return()=>clearInterval(S)},[yt,Qe,E,v,z,h,L,le]),o.useEffect(()=>{var S;const c=(S=t.state)==null?void 0:S.copyInnhopp;!c||s.current||(Q(B=>[...B,{id:void 0,sequence:(B.length||0)+1,name:c.name||"",coordinates:c.coordinates||"",elevation:c.elevation??void 0,takeoff_airfield_id:c.takeoff_airfield_id||void 0,scheduled_at:c.scheduled_at||"",notes:c.notes||"",reason_for_choice:c.reason_for_choice||"",adjust_altimeter_aad:c.adjust_altimeter_aad||"",notam:c.notam||"",distance_by_air:c.distance_by_air??void 0,distance_by_road:c.distance_by_road??void 0,primary_landing_area:Xi(c.primary_landing_area),secondary_landing_area:Xi(c.secondary_landing_area),risk_assessment:c.risk_assessment||"",safety_precautions:c.safety_precautions||"",jumprun:c.jumprun||"",hospital:c.hospital||"",rescue_boat:c.rescue_boat??void 0,minimum_requirements:c.minimum_requirements||"",land_owners:lh(c.land_owners),land_owner_permission:c.land_owner_permission??void 0,image_files:Array.isArray(c.image_files)?c.image_files.filter(te=>!!(te!=null&&te.data)):[]}]),s.current=!0)},[t.state,s]);const Ft=c=>tt(S=>({...S,[c]:!S[c]})),ch=async()=>{if(e&&!(!A.pickup_location.trim()||!A.destination.trim()))try{const c=await Xp({pickup_location:A.pickup_location.trim(),destination:A.destination.trim(),passenger_count:Number(A.passenger_count)||0,scheduled_at:A.scheduled_at||void 0,event_id:Number(e),vehicle_ids:[]});g(S=>[c,...S]),H({pickup_location:"",destination:"",passenger_count:"",scheduled_at:""}),Ie(!1)}catch(c){ee(c instanceof Error?c.message:"Failed to create transport")}};o.useEffect(()=>{let c=!1;return(async()=>{try{const B=await $t();!c&&Array.isArray(B)&&F(B)}catch{}})(),()=>{c=!0}},[]);const sd=o.useMemo(()=>{const c=[],S=Array.isArray(a==null?void 0:a.innhopps)&&(a!=null&&a.innhopps.length)?a==null?void 0:a.innhopps.map(te=>({value:`${te.sequence?`#${te.sequence} `:""}${te.name||"Untitled innhopp"}`.trim(),label:`${te.sequence?`#${te.sequence} `:""}${te.name||"Untitled innhopp"}`.trim()})):[];S.length&&c.push({label:"Innhopps",options:S});const B=Array.isArray(a==null?void 0:a.airfield_ids)?_.filter(te=>a==null?void 0:a.airfield_ids.includes(te.id)):[];return B.length&&c.push({label:"Airfields",options:B.map(te=>({value:te.name||`Airfield #${te.id}`,label:te.name||`Airfield #${te.id}`}))}),z.length&&c.push({label:"Accommodations",options:z.map(te=>({value:te.name||`Accommodation #${te.id}`,label:te.name||`Accommodation #${te.id}`}))}),le.length&&c.push({label:"Other",options:le.map(te=>({value:te.name||`Other #${te.id}`,label:te.name||`Other #${te.id}`}))}),c},[z,_,a==null?void 0:a.airfield_ids,a==null?void 0:a.innhopps,le]),dh=async()=>{if(e&&!(!ve.name.trim()||!ve.coordinates.trim()))try{const c=await rd({name:ve.name.trim(),coordinates:ve.coordinates.trim(),scheduled_at:ve.scheduled_at||void 0,description:ve.description.trim()||void 0,notes:ve.notes.trim()||void 0,event_id:Number(e)});be(S=>[c,...S]),Se({name:"",coordinates:"",scheduled_at:"",description:"",notes:""}),q(!1)}catch(c){ee(c instanceof Error?c.message:"Failed to create entry")}};o.useEffect(()=>{let c=!1;return(async()=>{if(e){$(!0),Fe(null);try{const B=await Jr(Number(e));if(c)return;i(B),Q(Ju(B)),b(Array.isArray(B.participant_ids)?B.participant_ids:[]),p(Array.isArray(B.airfield_ids)?B.airfield_ids:[]),X({season_id:String(B.season_id),name:B.name,location:B.location||"",slots:B.slots?String(B.slots):"",status:B.status,starts_at:Hu(B.starts_at),ends_at:Hu(B.ends_at)})}catch(B){c||Fe(B instanceof Error?B.message:"Failed to load event")}finally{c||$(!1)}}})(),()=>{c=!0}},[e]),o.useEffect(()=>{let c=!1;return(async()=>{if(e)try{const B=await cr(Number(e));c||W(Array.isArray(B)?B:[])}catch{c||W([])}})(),()=>{c=!0}},[e]),o.useEffect(()=>{let c=!1;return(async()=>{if(e)try{const[B,te,ie,xe]=await Promise.all([Aa(),Da(),Vn(),Wn()]);if(c)return;g(Array.isArray(B)?B.filter(Oe=>Oe.event_id===Number(e)):[]),U(Array.isArray(te)?te.filter(Oe=>Oe.event_id===Number(e)):[]),be(Array.isArray(ie)?ie.filter(Oe=>Oe.event_id===Number(e)):[]),Te(Array.isArray(xe)?xe.filter(Oe=>Oe.event_id===Number(e)):[])}catch{c||(g([]),U([]),be([]),Te([]))}})(),()=>{c=!0}},[e]),o.useEffect(()=>{let c=!1;return(async()=>{try{const B=await Zn();c||u(Array.isArray(B)?B:[])}catch{}})(),()=>{c=!0}},[]),o.useEffect(()=>{let c=!1;return(async()=>{try{const B=await Gr();c||x(Array.isArray(B)?B:[])}catch{}})(),()=>{c=!0}},[]),o.useEffect(()=>{let c=!1;return(async()=>{try{const B=await Pr();c||C(Array.isArray(B)?B:[])}catch{}})(),()=>{c=!0}},[]),o.useEffect(()=>{Pe(c=>{const S={...c};return Qe.forEach((B,te)=>{B.takeoff_airfield_id&&(S[te]=!0)}),S}),Ye(c=>{const S={...c};return Qe.forEach((B,te)=>{if(B.takeoff_airfield_id){S[te]="existing";const ie=_.find(xe=>xe.id===B.takeoff_airfield_id);ie&&_e(xe=>({...xe,[te]:{name:ie.name,elevation:ie.elevation,coordinates:ie.coordinates,description:ie.description||""}}))}}),S})},[Qe,_]);const ad=c=>{var S;return((S=d.find(B=>B.id===c))==null?void 0:S.full_name)||`Participant #${c}`},uh=d.filter(c=>{const B=(Array.isArray(c.roles)?c.roles:[]).includes("Staff");return!v.includes(c.id)&&!B}).sort((c,S)=>c.full_name.localeCompare(S.full_name,void 0,{sensitivity:"base"})),fh=_.filter(c=>!E.includes(c.id)),id=o.useMemo(()=>{const c=new Map;return _.forEach(S=>{const B=N.filter(ie=>Array.isArray(ie.airfield_ids)&&ie.airfield_ids.includes(S.id));(B.length?B.map(ie=>ie.location||"Location TBD"):["Unassigned location"]).forEach((ie,xe)=>{const Oe=ie||"Location TBD";c.has(Oe)||c.set(Oe,{label:Oe,options:[]}),c.get(Oe).options.push({key:`${S.id}-${xe}-${Oe}`,value:S.id,label:`${S.name}${S.elevation!=null?` (${S.elevation} m)`:""}`})})}),Array.from(c.values())},[_,N]);o.useEffect(()=>{We&&Xe!==Ze&&it(!1)},[Xe,Ze,We]);const Hn=async(c,S,B)=>{if(a){st(!0),ee(null),it(!1);try{const te={season_id:Number(M.season_id||a.season_id),name:M.name.trim()||a.name,location:M.location.trim()||void 0,slots:M.slots?Number(M.slots):a.slots||0,status:M.status,starts_at:Bu(M.starts_at)||a.starts_at,ends_at:M.ends_at?Bu(M.ends_at):void 0,airfield_ids:S,participant_ids:c,innhopps:(B??Qe).filter(Be=>Be.name.trim()!=="").map((Be,rn)=>{var cd,dd,ud,fd,md,pd,hd,gd,vd;return{sequence:Be.sequence||rn+1,name:Be.name.trim(),coordinates:(cd=Be.coordinates)==null?void 0:cd.trim(),elevation:Be.elevation,takeoff_airfield_id:Be.takeoff_airfield_id,scheduled_at:Be.scheduled_at?ed(Be.scheduled_at):"",notes:Be.notes,reason_for_choice:(dd=Be.reason_for_choice)==null?void 0:dd.trim(),adjust_altimeter_aad:(ud=Be.adjust_altimeter_aad)==null?void 0:ud.trim(),notam:(fd=Be.notam)==null?void 0:fd.trim(),distance_by_air:Be.distance_by_air,distance_by_road:Be.distance_by_road,primary_landing_area:Qu(Be.primary_landing_area),secondary_landing_area:Qu(Be.secondary_landing_area),risk_assessment:(md=Be.risk_assessment)==null?void 0:md.trim(),safety_precautions:(pd=Be.safety_precautions)==null?void 0:pd.trim(),jumprun:(hd=Be.jumprun)==null?void 0:hd.trim(),hospital:(gd=Be.hospital)==null?void 0:gd.trim(),rescue_boat:Be.rescue_boat,minimum_requirements:(vd=Be.minimum_requirements)==null?void 0:vd.trim(),land_owners:m0(Be.land_owners||[]),land_owner_permission:Be.land_owner_permission,image_files:(Be.image_files||[]).map(xl=>{var yd,xd;return{name:((yd=xl.name)==null?void 0:yd.trim())||void 0,mime_type:((xd=xl.mime_type)==null?void 0:xd.trim())||void 0,data:xl.data}})}})},ie=await Lp(a.id,te),xe=Ju(ie),Oe=Array.isArray(ie.participant_ids)?ie.participant_ids:[],dt=Array.isArray(ie.airfield_ids)?ie.airfield_ids:[];i(ie),b(Oe),p(dt),Q(xe),ee("Event updated"),vt(Ut(M,Oe,dt,xe)),it(!0)}catch(te){ee(te instanceof Error?te.message:"Failed to update event"),it(!1)}finally{st(!1)}}},$r=async()=>{await Hn(v,E,Qe)},mh=(c,S)=>{if(S==="__new__"){Pe(ie=>({...ie,[c]:!0})),Ye(ie=>({...ie,[c]:"new"})),Q(ie=>{const xe=[...ie];return xe[c]={...xe[c],takeoff_airfield_id:void 0},xe}),_e(ie=>({...ie,[c]:ie[c]||{name:"",elevation:0,coordinates:"",description:""}}));return}if(S===""){Q(ie=>{const xe=[...ie];return xe[c]={...xe[c],takeoff_airfield_id:void 0},xe}),Pe(ie=>{const xe={...ie};return delete xe[c],xe}),Ye(ie=>{const xe={...ie};return delete xe[c],xe});return}const B=Number(S);Q(ie=>{const xe=[...ie];return xe[c]={...xe[c],takeoff_airfield_id:B||void 0},xe}),Pe(ie=>{const xe={...ie};return delete xe[c],xe}),Ye(ie=>{const xe={...ie};return delete xe[c],xe});const te=_.find(ie=>ie.id===B);te&&_e(ie=>({...ie,[c]:{name:te.name,elevation:te.elevation,coordinates:te.coordinates,description:te.description||""}}))},ph=async c=>{var B;const S=Ae[c];if(S){ne(!0),ee(null);try{const te={name:S.name.trim(),elevation:Number(S.elevation)||0,coordinates:S.coordinates.trim(),description:((B=S.description)==null?void 0:B.trim())||void 0},ie=await Qi(te),xe=[..._,ie];C(xe);const Oe=E.includes(ie.id)?E:[...E,ie.id];p(Oe),Q(Be=>{const rn=[...Be];return rn[c]={...rn[c],takeoff_airfield_id:ie.id},rn});const dt=Qe.map((Be,rn)=>rn===c?{...Be,takeoff_airfield_id:ie.id}:Be);_e(Be=>({...Be,[c]:{name:ie.name,elevation:ie.elevation,coordinates:ie.coordinates,description:ie.description||""}})),Ye(Be=>({...Be,[c]:"existing"})),await Hn(v,Oe,dt),ee("Airfield added as takeoff and saved to event.")}catch(te){ee(te instanceof Error?te.message:"Failed to add airfield")}finally{ne(!1)}}},hh=async()=>{const c=Number(m);if(!c||v.includes(c)||!a)return;const S=[...v,c];b(S),y(""),await Hn(S,E)},yl=o.useMemo(()=>v.map(S=>d.find(B=>B.id===S)).filter(S=>!!S&&Array.isArray(S.roles)&&S.roles.includes("Staff")).sort((S,B)=>S.full_name.localeCompare(B.full_name,void 0,{sensitivity:"base"})),[v,d]),gh=o.useMemo(()=>d.filter(c=>v.includes(c.id)?!1:(Array.isArray(c.roles)?c.roles:[]).includes("Staff")),[d,v]),vh=async()=>{const c=Number(j);if(!c||v.includes(c)||!a)return;const S=[...v,c];b(S),O(""),await Hn(S,E)},yh=async c=>{c.preventDefault(),Y(!0),ee(null);try{const S=ae.roles&&ae.roles.length>0?ae.roles:["Participant","Staff"],B={full_name:ae.full_name.trim(),email:ae.email.trim(),phone:ae.phone.trim()||void 0,experience_level:ae.experience_level.trim()||void 0,emergency_contact:ae.emergency_contact.trim()||void 0,roles:S},te=await ka(B),ie=[...v,te.id];x(xe=>[...xe,te]),b(ie),await Hn(ie,E),de({full_name:"",email:"",phone:"",experience_level:"",emergency_contact:"",roles:["Participant","Staff"]}),we(!1),ee("Staff participant added and saved to event.")}catch(S){ee(S instanceof Error?S.message:"Failed to add staff participant")}finally{Y(!1)}},ld=async c=>{const S=v.filter(B=>B!==c);b(S),await Hn(S,E)},xh=async c=>{c.preventDefault(),ge(!0),ee(null);try{const S=se.roles&&se.roles.length>0?se.roles:["Participant","Skydiver"],B={full_name:se.full_name.trim(),email:se.email.trim(),phone:se.phone.trim()||void 0,experience_level:se.experience_level.trim()||void 0,emergency_contact:se.emergency_contact.trim()||void 0,roles:S},te=await ka(B);x(ie=>[...ie,te]),b(ie=>[...ie,te.id]),R({full_name:"",email:"",phone:"",experience_level:"",emergency_contact:"",roles:["Participant","Skydiver"]}),me(!1),ee("Participant added. Save to persist with event.")}catch(S){ee(S instanceof Error?S.message:"Failed to add participant")}finally{ge(!1)}},jh=()=>{const c=M.starts_at&&M.starts_at.length>=10?ft(`${M.starts_at}T09:00`):null;c&&c.setUTCHours(9,0,0,0),Q(S=>[...S,{sequence:S.length+1,name:"",coordinates:"",scheduled_at:c?ih(c):"",notes:"",reason_for_choice:"",adjust_altimeter_aad:"",notam:"",distance_by_air:void 0,distance_by_road:void 0,primary_landing_area:qu(),secondary_landing_area:qu(),risk_assessment:"",safety_precautions:"",jumprun:"",hospital:"",rescue_boat:void 0,minimum_requirements:"",land_owners:[],land_owner_permission:void 0,image_files:[]}])},_h=c=>{Q(S=>S.filter((B,te)=>te!==c).map((B,te)=>({...B,sequence:te+1}))),_e(S=>{const B={...S};return delete B[c],B}),Pe(S=>{const B={...S};return delete B[c],B}),Ye(S=>{const B={...S};return delete B[c],B})},La=(c,S,B)=>{Q(te=>{const ie=[...te];return ie[c]={...ie[c],[S]:S==="sequence"?Number(B)||c+1:B},ie})},od=async c=>{c.preventDefault(),await Hn(v,E)},Nh=async()=>{const c=Number(k);if(!c||E.includes(c)||!a)return;const S=[...E,c];p(S),I(""),await Hn(v,S)},bh=async c=>{const S=E.filter(B=>B!==c);p(S),await Hn(v,S)},Sh=async c=>{c.preventDefault(),ne(!0),ee(null);try{const S={name:f.name.trim(),elevation:Number(f.elevation)||0,coordinates:f.coordinates.trim(),description:f.description.trim()||void 0},B=await Qi(S);C(te=>[...te,B]),p(te=>[...te,B.id]),w({name:"",elevation:"",coordinates:"",description:""}),pe(!1),await Hn(v,E.includes(B.id)?E:[...E,B.id]),ee("Airfield added and saved to event.")}catch(S){ee(S instanceof Error?S.message:"Failed to add airfield")}finally{ne(!1)}};if(P)return r.jsx("p",{className:"muted",children:"Loading event"});if(De)return r.jsx("p",{className:"error-text",children:De});if(!a)return r.jsx("p",{className:"error-text",children:"Event not found."});const Ch=a.status==="past",wh=async()=>{if(!(!a||ht)&&window.confirm("Are you sure you want to delete this event?")){Dt(!0),ee(null);try{await Pp(a.id),n("/events")}catch(c){ee(c instanceof Error?c.message:"Failed to delete event"),Dt(!1)}}},kh=async()=>{if(!(!a||Lt)){G(!0),ee(null);try{const c=await Ip(a.id);n(`/events/${c.id}`)}catch(c){ee(c instanceof Error?c.message:"Failed to copy event")}finally{G(!1)}}};return r.jsxs("section",{children:[r.jsxs("header",{className:"page-header",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"event-header-top",children:[r.jsx("h2",{style:{margin:0},children:a.name}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap",alignItems:"center"},children:[r.jsx("span",{className:`badge status-${a.status}`,children:a.status}),!Ch&&(()=>{const c=a.slots??0,S=v.reduce((ie,xe)=>{var dt;return(((dt=d.find(Be=>Be.id===xe))==null?void 0:dt.roles)||[]).includes("Staff")?ie:ie+1},0),B=Math.max(c-S,0),te=B===0;return r.jsx("span",{className:`badge ${te?"danger":"success"}`,children:te?"FULL":`${B} SLOTS AVAILABLE`})})()]})]}),r.jsx("p",{className:"event-location",children:a.location||"Location TBD"})]}),r.jsxs("div",{className:"card-actions",children:[r.jsx("button",{className:"ghost",type:"button",onClick:()=>n(`/events/${a.id}`),children:"Schedule"}),r.jsx("button",{className:"ghost",type:"button",onClick:()=>n(`/manifests?eventId=${a.id}`),children:"Manifest"}),r.jsx("button",{className:"ghost",type:"button",onClick:kh,disabled:Lt,children:Lt?"Copying":"Copy"}),r.jsx("button",{className:"ghost danger",type:"button",onClick:wh,disabled:ht,children:ht?"Deleting":"Delete"}),r.jsx("button",{className:"ghost",type:"button",onClick:()=>n("/events"),children:"Back"})]})]}),r.jsxs("article",{className:"card",children:[r.jsx("header",{className:"card-header",onClick:()=>Ft("details"),style:{cursor:"pointer"},children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flex:1},children:[r.jsx("button",{className:"ghost",type:"button",onClick:c=>{c.stopPropagation(),Ft("details")},children:Ue.details?"":""}),r.jsx("h3",{style:{margin:0},children:"Event details"})]})}),Ue.details&&r.jsxs("form",{className:"form-grid",onSubmit:od,children:[r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"minmax(0, 1fr) minmax(0, 1fr) minmax(0, 0.5fr) minmax(0, 1fr) minmax(0, 1fr) minmax(0, 0.5fr)",gap:"0.75rem",gridColumn:"1 / -1",alignItems:"end"},children:[r.jsxs("label",{className:"form-field",style:{margin:0,gridColumn:"1 / 3"},children:[r.jsx("span",{children:"Name"}),r.jsx("input",{type:"text",value:M.name,onChange:c=>X(S=>({...S,name:c.target.value})),required:!0})]}),r.jsx("div",{"aria-hidden":"true",style:{gridColumn:"3 / 4"}}),r.jsxs("label",{className:"form-field",style:{margin:0,gridColumn:"4 / 5"},children:[r.jsx("span",{children:"Season"}),r.jsxs("select",{style:{width:"100%",minWidth:"120px"},value:M.season_id,onChange:c=>X(S=>({...S,season_id:c.target.value})),required:!0,children:[r.jsx("option",{value:"",children:"Select season"}),l.map(c=>r.jsx("option",{value:c.id,children:c.name},c.id))]})]}),r.jsx("div",{"aria-hidden":"true",style:{gridColumn:"5 / 7"}}),r.jsxs("label",{className:"form-field",style:{margin:0,gridColumn:"1 / 3"},children:[r.jsx("span",{children:"Location"}),r.jsx("input",{type:"text",value:M.location,onChange:c=>X(S=>({...S,location:c.target.value})),placeholder:"The overall location the event takes place"})]}),r.jsx("div",{"aria-hidden":"true",style:{gridColumn:"3 / 4"}}),r.jsxs("label",{className:"form-field",style:{margin:0,gridColumn:"4 / 5"},children:[r.jsx("span",{children:"Status"}),r.jsx("select",{value:M.status,onChange:c=>X(S=>({...S,status:c.target.value})),children:d0.map(c=>r.jsx("option",{value:c.value,children:c.label},c.value))})]}),r.jsxs("label",{className:"form-field",style:{margin:0,gridColumn:"5 / 6",maxWidth:"220px",justifySelf:"start",width:"100%"},children:[r.jsx("span",{children:"Slots"}),r.jsx("input",{type:"number",min:0,value:M.slots,onChange:c=>X(S=>({...S,slots:c.target.value})),placeholder:"Total slots",style:{width:"100%",maxWidth:"220px"}})]}),r.jsx("div",{"aria-hidden":"true",style:{gridColumn:"6 / 7"}}),r.jsxs("label",{className:"form-field",style:{margin:0,gridColumn:"1 / 3"},children:[r.jsx("span",{children:"Starts on"}),r.jsx(Mt,{value:Je(M.starts_at),options:{dateFormat:"Y-m-d",altInput:!0,altFormat:"M j, Y",allowInput:!0},onChange:c=>{const S=c[0];X(B=>({...B,starts_at:S?Ku(S):""}))}})]}),r.jsx("div",{"aria-hidden":"true",style:{gridColumn:"3 / 4"}}),r.jsxs("label",{className:"form-field",style:{margin:0,gridColumn:"4 / 6"},children:[r.jsx("span",{children:"Ends on"}),r.jsx(Mt,{value:Je(M.ends_at),options:{dateFormat:"Y-m-d",altInput:!0,altFormat:"M j, Y",allowInput:!0},onChange:c=>{const S=c[0];X(B=>({...B,ends_at:S?Ku(S):""}))}})]}),r.jsx("div",{"aria-hidden":"true",style:{gridColumn:"6 / 7"}})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"submit",className:ct,disabled:re||We,children:It}),V&&r.jsx("span",{className:"muted",children:V})]})]})]}),r.jsxs("article",{className:"card",children:[r.jsxs("header",{className:"card-header",onClick:()=>Ft("innhopps"),style:{cursor:"pointer"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flex:1},children:[r.jsx("button",{className:"ghost",type:"button",onClick:c=>{c.stopPropagation(),Ft("innhopps")},children:Ue.innhopps?"":""}),r.jsx("h3",{style:{margin:0},children:"Innhopps"})]}),r.jsxs("span",{className:"badge neutral",children:[Qe.length," INNHOPPS"]})]}),Ue.innhopps&&(Qe.length===0?r.jsx("p",{className:"muted",children:"No innhopps yet."}):r.jsx("ul",{className:"status-list",style:{maxHeight:"24rem",overflowY:"auto"},children:Qe.filter(c=>c.id).map(c=>{const S=c.takeoff_airfield_id?_.find(te=>te.id===c.takeoff_airfield_id):void 0,B=Jp(c);return r.jsx("li",{id:`innhopp-${c.id}`,style:{...ye,...yt===`innhopp-${c.id}`?ce:{}},children:r.jsxs(et,{to:`/events/${a.id}/innhopps/${c.id}`,className:"card-link",style:{flex:1},onClick:()=>{if(e)try{sessionStorage.setItem(`event-detail-highlight:${e}`,`innhopp-${c.id}`)}catch{}Pt()},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"0.5rem"},children:[r.jsxs("strong",{children:["#",c.sequence,"  ",c.name]}),r.jsx("span",{className:`badge ${B?"success":"danger"}`,children:B?"OP READY":"MISSING INFO"})]}),Yu(c.scheduled_at)&&r.jsx("div",{className:"muted",children:Yu(c.scheduled_at)}),c.elevation!==void 0&&c.elevation!==null&&r.jsxs("div",{className:"muted",children:["Elevation: ",Gi(c.elevation)]}),r.jsxs("div",{className:"muted",children:["Takeoff: ",S?S.name:c.takeoff_airfield_id?`Airfield #${c.takeoff_airfield_id}`:"Not set"]}),c.notes&&r.jsx("div",{className:"muted",children:c.notes})]})},c.id)})})),Ue.innhopps&&r.jsxs(r.Fragment,{children:[r.jsx("div",{style:{height:"1rem"}}),r.jsxs("form",{className:"form-grid",onSubmit:od,children:[Qe.filter(c=>!c.id).map((c,S)=>{const B=Qe.findIndex(te=>te===c);return r.jsxs("div",{className:"innhopp-row",children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Sequence"}),r.jsx("input",{type:"number",min:1,value:c.sequence,onChange:te=>La(B,"sequence",te.target.value),style:{width:"8ch"}})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Name"}),r.jsx("input",{type:"text",value:c.name,onChange:te=>La(B,"name",te.target.value),placeholder:"Describe the innhopp",required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Scheduled at"}),r.jsx(Mt,{value:Je(c.scheduled_at),options:{enableTime:!0,dateFormat:"Y-m-d H:i",time_24hr:!0},onChange:te=>{const ie=te[0];La(B,"scheduled_at",ie?Up(ie):"")}})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Takeoff airfield"}),r.jsxs("select",{value:c.takeoff_airfield_id??"",onChange:te=>mh(B,te.target.value),children:[r.jsx("option",{value:"",children:"Select airfield"}),r.jsx("option",{value:"__new__",children:"Create new airfield"}),id.map(te=>r.jsx("optgroup",{label:te.label,children:te.options.map(ie=>r.jsx("option",{value:ie.value,children:ie.label},ie.key))},te.label))]})]}),r.jsxs("label",{className:"form-field notes-field",children:[r.jsx("span",{children:"Notes"}),r.jsx("input",{type:"text",value:c.notes,onChange:te=>La(B,"notes",te.target.value),placeholder:"Exit altitude, landing brief"})]}),Le[B]&&r.jsx("div",{className:"form-grid",style:{gridTemplateColumns:"repeat(auto-fit,minmax(200px,1fr))",border:"1px dashed #c6d1dd",padding:"1rem",borderRadius:"10px",marginTop:"0.5rem",gridColumn:"1 / -1"},children:(()=>{const te=qe[B],ie=c.takeoff_airfield_id!=null?_.find(Be=>Be.id===c.takeoff_airfield_id):void 0,xe=Ae[B]||{name:(ie==null?void 0:ie.name)||"",elevation:(ie==null?void 0:ie.elevation)||0,coordinates:(ie==null?void 0:ie.coordinates)||"",description:(ie==null?void 0:ie.description)||""},Oe=te==="existing"&&!!ie,dt=!kt(xe.coordinates);return r.jsxs(r.Fragment,{children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Name"}),r.jsx("input",{type:"text",value:xe.name,disabled:Oe,onChange:Be=>_e(rn=>({...rn,[B]:{...xe,name:Be.target.value}})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Elevation (m)"}),r.jsx("input",{type:"number",min:0,value:xe.elevation,disabled:Oe,onChange:Be=>_e(rn=>({...rn,[B]:{...xe,elevation:Number(Be.target.value)}})),required:!0})]}),r.jsxs("label",{className:`form-field ${dt?"field-missing":""}`,children:[r.jsx("span",{children:"Coordinates"}),r.jsxs("div",{className:"input-with-button",children:[r.jsx("input",{type:"text",value:xe.coordinates,disabled:Oe,onChange:Be=>_e(rn=>({...rn,[B]:{...xe,coordinates:Be.target.value}})),required:!0}),r.jsx("button",{type:"button",className:"ghost",disabled:!xe.coordinates.trim(),onClick:()=>{const Be=xe.coordinates.trim();Be&&window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(Be)}`,"_blank")},children:"Open in Maps"})]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Description"}),r.jsx("input",{type:"text",value:xe.description||"",disabled:Oe,onChange:Be=>_e(rn=>({...rn,[B]:{...xe,description:Be.target.value}})),placeholder:"Optional"})]}),r.jsxs("div",{className:"form-actions",style:{gridColumn:"1 / -1"},children:[te==="new"&&r.jsx("button",{type:"button",className:"ghost",onClick:()=>ph(B),disabled:Z,children:Z?"Adding":"Create & attach"}),te==="existing"&&ie&&r.jsxs("span",{className:"muted",children:["Viewing details of ",ie.name]}),r.jsx("button",{type:"button",className:"ghost",onClick:()=>Pe(Be=>({...Be,[B]:!1})),disabled:Z,children:"Close"})]})]})})()}),r.jsx("div",{className:"innhopp-actions"}),r.jsx("button",{type:"button",className:"ghost danger",onClick:()=>_h(B),children:"Remove"})]},S)}),r.jsxs("div",{className:"form-actions",style:{flexWrap:"wrap",gap:"0.75rem",marginTop:"1rem"},children:[r.jsx("button",{type:"button",className:"primary",onClick:jh,disabled:re,children:"Create new Innhopp"}),r.jsx("button",{type:"submit",className:ct,disabled:re||We,children:It}),V&&r.jsx("span",{className:"muted",children:V})]})]})]})]}),r.jsxs("article",{className:"card",children:[r.jsxs("header",{className:"card-header",onClick:()=>Ft("airfields"),style:{cursor:"pointer"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flex:1},children:[r.jsx("button",{className:"ghost",type:"button",onClick:c=>{c.stopPropagation(),Ft("airfields")},children:Ue.airfields?"":""}),r.jsx("h3",{style:{margin:0},children:"Airfields"})]}),r.jsxs("span",{className:"badge neutral",children:[E.length," AIRFIELDS"]})]}),Ue.airfields&&(E.length===0?r.jsx("p",{className:"muted",children:"No airfields linked yet."}):r.jsx("ul",{className:"status-list",style:{maxHeight:"24rem",overflowY:"auto"},children:E.map(c=>{const S=_.find(B=>B.id===c);return r.jsxs("li",{id:`airfield-${c}`,style:{...ye,...yt===`airfield-${c}`?ce:{}},children:[r.jsxs(et,{to:`/airfields/${c}`,className:"card-link",style:{flex:1},onClick:()=>{if(e)try{sessionStorage.setItem(`event-detail-highlight:${e}`,`airfield-${c}`)}catch{}Pt()},children:[r.jsx("strong",{children:(S==null?void 0:S.name)||`Airfield #${c}`}),(S==null?void 0:S.coordinates)&&r.jsxs("div",{className:"muted",children:["Coords: ",S.coordinates]}),r.jsxs("div",{className:"muted",children:["Elevation: ",(S==null?void 0:S.elevation)!==void 0?Gi(S.elevation):"Unknown",S!=null&&S.description?`  ${S.description}`:""]})]}),r.jsx("button",{type:"button",className:"ghost danger",onClick:()=>bh(c),children:"Remove"})]},c)})})),Ue.airfields&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"form-grid",style:{marginTop:"1rem"},children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Select airfield"}),r.jsxs("select",{value:k,onChange:c=>{const S=c.target.value;I(S),S==="__new__"&&(pe(!0),I(""))},children:[r.jsx("option",{value:"",children:"Choose an airfield"}),r.jsx("option",{value:"__new__",children:"Create new airfield"}),id.map(c=>r.jsx("optgroup",{label:c.label,children:c.options.filter(S=>fh.some(B=>B.id===S.value)).map(S=>r.jsx("option",{value:S.value,children:S.label},S.key))},c.label))]})]}),r.jsxs("div",{className:"form-actions",style:{gap:"0.75rem",alignItems:"center"},children:[r.jsx("button",{type:"button",className:"primary",onClick:Nh,disabled:!k,children:"Add"}),r.jsx("button",{type:"button",className:ct,onClick:$r,disabled:re||We,children:It})]})]}),oe&&r.jsxs("form",{className:"form-grid",style:{marginTop:"1rem"},onSubmit:Sh,children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Name"}),r.jsx("input",{type:"text",value:f.name,onChange:c=>w(S=>({...S,name:c.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Elevation (m)"}),r.jsx("input",{type:"number",min:0,step:1,value:f.elevation,onChange:c=>w(S=>({...S,elevation:c.target.value})),required:!0})]}),r.jsxs("label",{className:`form-field ${T?"field-missing":""}`,children:[r.jsx("span",{children:"Coordinates (DMS)"}),r.jsxs("div",{className:"input-with-button",children:[r.jsx("input",{type:"text",value:f.coordinates,onChange:c=>w(S=>({...S,coordinates:c.target.value})),pattern:`^[0-9]{1,3}[0-9]{1,2}'[0-9]{1,2}(?:\\.\\d+)?"[NS]\\s[0-9]{1,3}[0-9]{1,2}'[0-9]{1,2}(?:\\.\\d+)?"[EW]$`,title:`Use DMS format like 1114'30.0"N 7342'59.7"W`,required:!0}),r.jsx("button",{type:"button",className:"ghost",disabled:!f.coordinates.trim(),onClick:()=>{const c=f.coordinates.trim();c&&window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(c)}`,"_blank")},children:"Open in Maps"})]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Description"}),r.jsx("input",{type:"text",value:f.description,onChange:c=>w(S=>({...S,description:c.target.value})),placeholder:"Optional notes"})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"submit",className:"ghost",disabled:Z,children:Z?"Adding":"Create & attach"}),r.jsx("button",{type:"button",className:"ghost",onClick:()=>pe(!1),disabled:Z,children:"Cancel"})]})]})]})]}),r.jsxs("article",{className:"card",children:[r.jsxs("header",{className:"card-header",onClick:()=>Ft("participants"),style:{cursor:"pointer"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flex:1},children:[r.jsx("button",{className:"ghost",type:"button",onClick:c=>{c.stopPropagation(),Ft("participants")},children:Ue.participants?"":""}),r.jsx("h3",{style:{margin:0},children:"Participants"})]}),r.jsxs("span",{className:"badge neutral",children:[v.filter(c=>{var B;return!(((B=d.find(te=>te.id===c))==null?void 0:B.roles)||[]).includes("Staff")}).length," ","Participants"]})]}),Ue.participants&&(v.filter(c=>{var B;return!(((B=d.find(te=>te.id===c))==null?void 0:B.roles)||[]).includes("Staff")}).length===0?r.jsx("p",{className:"muted",children:"No participants yet."}):r.jsx("ul",{className:"status-list",style:{maxHeight:"24rem",overflowY:"auto"},children:v.map(c=>d.find(S=>S.id===c)).filter(c=>!!c&&!(Array.isArray(c.roles)&&c.roles.includes("Staff"))).sort((c,S)=>c.full_name.localeCompare(S.full_name,void 0,{sensitivity:"base"})).map(c=>{const S=c.id,B=Array.isArray(c.roles)?c.roles:[],te=B.includes("Jump Leader"),ie=B.includes("Jump Master"),xe=B.filter(Oe=>!(Oe==="Participant"||Oe==="Staff"||te&&(Oe==="Jump Master"||Oe==="Skydiver")||ie&&Oe==="Skydiver"));return r.jsxs("li",{id:`participant-${S}`,style:{...ye,...yt===`participant-${S}`?ce:{}},children:[r.jsxs(et,{to:`/participants/${S}`,state:{fromEventId:e,highlightId:`participant-${S}`},className:"card-link",style:{flex:1},onClick:()=>{if(e)try{sessionStorage.setItem(`event-detail-highlight:${e}`,`participant-${S}`)}catch{}Pt()},children:[r.jsx("strong",{children:ad(S)}),r.jsx("div",{className:"muted",children:c.email||"No email on file"}),r.jsxs("div",{className:"muted",children:["Experience: ",c.experience_level||"Not provided"]}),xe.length>0&&r.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.35rem",marginTop:"0.25rem"},children:xe.map(Oe=>r.jsx("span",{className:"badge neutral",children:Oe},Oe))})]}),r.jsx("button",{type:"button",className:"ghost danger",onClick:()=>ld(S),children:"Remove"})]},S)})})),Ue.participants&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"form-grid",style:{marginTop:"1rem"},children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Select participant"}),r.jsxs("select",{value:m,onChange:c=>{const S=c.target.value;S==="__new__"?(me(!0),y("")):y(S)},children:[r.jsx("option",{value:"",children:"Choose a participant"}),r.jsx("option",{value:"__new__",children:"Create new participant"}),uh.map(c=>r.jsxs("option",{value:c.id,children:[c.full_name," (",c.email||"No email",")"]},c.id))]})]}),r.jsxs("div",{className:"form-actions",style:{gap:"0.5rem",alignItems:"center"},children:[r.jsx("button",{type:"button",className:"primary",onClick:hh,disabled:!m,children:"Add"}),r.jsx("button",{type:"button",className:ct,onClick:$r,disabled:re||We,children:It})]})]}),Ne&&r.jsxs("form",{className:"form-grid",style:{marginTop:"1rem"},onSubmit:xh,children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Full name"}),r.jsx("input",{type:"text",value:se.full_name,onChange:c=>R(S=>({...S,full_name:c.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Email"}),r.jsx("input",{type:"email",value:se.email,onChange:c=>R(S=>({...S,email:c.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Phone"}),r.jsx("input",{type:"text",value:se.phone,onChange:c=>R(S=>({...S,phone:c.target.value})),placeholder:"Optional"})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Experience level"}),r.jsx("input",{type:"text",value:se.experience_level,onChange:c=>R(S=>({...S,experience_level:c.target.value})),placeholder:"Optional"})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Emergency contact"}),r.jsx("input",{type:"text",value:se.emergency_contact,onChange:c=>R(S=>({...S,emergency_contact:c.target.value})),placeholder:"Optional"})]}),r.jsxs("div",{className:"form-field",style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Roles"}),r.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:Ji.map(c=>{var te;const S=(te=se.roles)==null?void 0:te.includes(c),B=c==="Staff";return r.jsxs("label",{className:"badge neutral",style:{display:"inline-flex",alignItems:"center",gap:"0.35rem"},children:[r.jsx("input",{type:"checkbox",checked:S,disabled:B,onChange:ie=>{R(xe=>{const Oe=new Set(xe.roles||[]);ie.target.checked?Oe.add(c):Oe.delete(c);const dt=Array.from(Oe);return{...xe,roles:dt.length>0?dt:["Participant","Skydiver"]}})}}),c]},c)})}),r.jsx("p",{className:"muted",style:{margin:0},children:"Staff cannot be assigned here."})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"submit",className:"primary",disabled:ue,children:ue?"Adding":"Add participant"}),r.jsx("button",{type:"button",className:"ghost",onClick:()=>me(!1),disabled:ue,children:"Cancel"})]})]})]})]}),r.jsxs("article",{className:"card",children:[r.jsxs("header",{className:"card-header",onClick:()=>Ft("staff"),style:{cursor:"pointer"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flex:1},children:[r.jsx("button",{className:"ghost",type:"button",onClick:c=>{c.stopPropagation(),Ft("staff")},children:Ue.staff?"":""}),r.jsx("h3",{style:{margin:0},children:"Staff"})]}),r.jsxs("span",{className:"badge neutral",children:[yl.length," staff"]})]}),Ue.staff&&(yl.length===0?r.jsx("p",{className:"muted",children:"No staff yet."}):r.jsx("ul",{className:"status-list",style:{maxHeight:"24rem",overflowY:"auto"},children:yl.map(c=>{const S=c.id,B=Array.isArray(c.roles)?c.roles:[],te=B.includes("Jump Leader"),ie=B.includes("Jump Master"),xe=B.filter(Oe=>!(Oe==="Participant"||Oe==="Staff"||te&&(Oe==="Jump Master"||Oe==="Skydiver")||ie&&Oe==="Skydiver"));return r.jsxs("li",{id:`staff-${S}`,style:{...ye,...yt===`staff-${S}`?ce:{}},children:[r.jsxs(et,{to:`/participants/${S}`,className:"card-link",style:{flex:1},onClick:()=>{if(e)try{sessionStorage.setItem(`event-detail-highlight:${e}`,`staff-${S}`)}catch{}Pt()},state:{fromEventId:e,highlightId:`staff-${S}`},children:[r.jsx("strong",{children:c.full_name||ad(S)}),r.jsx("div",{className:"muted",children:c.email||"No email on file"}),r.jsxs("div",{className:"muted",children:["Experience: ",c.experience_level||"Not provided"]}),xe.length>0&&r.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.35rem",marginTop:"0.25rem"},children:xe.map(Oe=>r.jsx("span",{className:"badge neutral",children:Oe},Oe))})]}),r.jsx("button",{type:"button",className:"ghost danger",onClick:()=>ld(S),disabled:re,children:"Remove"})]},S)})})),Ue.staff&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"form-grid",style:{marginTop:"1rem"},children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Select staff"}),r.jsxs("select",{value:j,onChange:c=>{const S=c.target.value;S==="__new__"?(we(!0),O("")):O(S)},children:[r.jsx("option",{value:"",children:"Choose staff"}),r.jsx("option",{value:"__new__",children:"Create new staff"}),gh.map(c=>r.jsxs("option",{value:c.id,children:[c.full_name," (",c.email||"No email",")"]},c.id))]})]}),r.jsxs("div",{className:"form-actions",style:{gap:"0.5rem",alignItems:"center"},children:[r.jsx("button",{type:"button",className:"primary",onClick:vh,disabled:!j,children:"Add"}),r.jsx("button",{type:"button",className:ct,onClick:$r,disabled:re||We,children:It})]})]}),he&&r.jsxs("form",{className:"form-grid",style:{marginTop:"1rem"},onSubmit:yh,children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Full name"}),r.jsx("input",{type:"text",value:ae.full_name,onChange:c=>de(S=>({...S,full_name:c.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Email"}),r.jsx("input",{type:"email",value:ae.email,onChange:c=>de(S=>({...S,email:c.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Phone"}),r.jsx("input",{type:"text",value:ae.phone,onChange:c=>de(S=>({...S,phone:c.target.value})),placeholder:"Optional"})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Experience level"}),r.jsx("input",{type:"text",value:ae.experience_level,onChange:c=>de(S=>({...S,experience_level:c.target.value})),placeholder:"Optional"})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Emergency contact"}),r.jsx("input",{type:"text",value:ae.emergency_contact,onChange:c=>de(S=>({...S,emergency_contact:c.target.value})),placeholder:"Optional"})]}),r.jsxs("div",{className:"form-field",style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Roles"}),r.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:Ji.map(c=>{var te;const S=(te=ae.roles)==null?void 0:te.includes(c),B=c==="Participant"||c==="Staff";return r.jsxs("label",{className:"badge neutral",style:{display:"inline-flex",alignItems:"center",gap:"0.35rem"},children:[r.jsx("input",{type:"checkbox",checked:S,disabled:B,onChange:ie=>{de(xe=>{const Oe=new Set(xe.roles||[]);ie.target.checked?Oe.add(c):Oe.delete(c);const dt=Array.from(Oe);return{...xe,roles:dt.length>0?dt:["Participant","Staff"]}})}}),c]},c)})})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"submit",className:"primary",disabled:fe,children:fe?"Adding":"Add staff"}),r.jsx("button",{type:"button",className:"ghost",onClick:()=>we(!1),disabled:fe,children:"Cancel"})]})]})]})]}),r.jsxs("article",{className:"card",children:[r.jsxs("header",{className:"card-header",onClick:()=>Ft("accommodations"),style:{cursor:"pointer"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flex:1},children:[r.jsx("button",{className:"ghost",type:"button",onClick:c=>{c.stopPropagation(),Ft("accommodations")},children:Ue.accommodations?"":""}),r.jsx("h3",{style:{margin:0},children:"Accommodation"})]}),r.jsxs("span",{className:"badge neutral",children:[z.length," ACCOMMODATIONS"]})]}),Ue.accommodations&&r.jsxs(r.Fragment,{children:[z.length>0?r.jsx("ul",{className:"status-list",style:{maxHeight:"24rem",overflowY:"auto"},children:Ee.map((c,S)=>r.jsx("li",{id:`accommodation-${c.id}`,style:{...ye,...yt===`accommodation-${c.id}`?ce:{}},children:r.jsxs(et,{to:`/events/${e}/accommodations/${c.id}`,state:{fromEventId:e,highlightId:`accommodation-${c.id}`},className:"card-link",style:{display:"flex",flexDirection:"column",gap:"0.25rem",width:"100%"},onClick:()=>{if(e)try{sessionStorage.setItem(`event-detail-highlight:${e}`,`accommodation-${c.id}`)}catch{}Pt()},children:[r.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",gap:"0.75rem",width:"100%"},children:[r.jsx("strong",{children:c.name||"Accommodation"}),r.jsx("span",{className:`badge ${c.booked&&kt(c.coordinates)?"success":"danger"}`,"aria-label":c.booked?"Booked":"Not booked",style:{flexShrink:0},children:c.booked&&kt(c.coordinates)?"":"NOT BOOKED"})]}),r.jsx("div",{className:"muted",style:{marginTop:"0.2rem"},children:c.capacity?`Capacity: ${c.capacity}`:"Capacity: n/a"}),(c.check_in_at||c.check_out_at)&&r.jsxs("div",{className:"muted",style:{marginTop:"0.1rem"},children:[c.check_in_at?`${ts(c.check_in_at)}`:"",c.check_in_at&&c.check_out_at?"  ":"",c.check_out_at?`${ts(c.check_out_at)}`:""]}),c.notes?r.jsx("div",{className:"muted",style:{marginTop:"0.1rem"},children:c.notes}):null]})},c.id||S))}):r.jsx("p",{className:"muted",children:"No accommodation linked yet."}),r.jsx("div",{className:"form-actions",style:{marginTop:"0.5rem"},children:r.jsx("button",{type:"button",className:"ghost",onClick:()=>$e(c=>!c),children:Re?"Cancel":"Create new accommodation"})}),Re&&r.jsxs("div",{className:"form-grid",style:{marginTop:"0.5rem"},children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Name"}),r.jsx("input",{type:"text",value:D.name,onChange:c=>K(S=>({...S,name:c.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Capacity"}),r.jsx("input",{type:"number",min:0,value:D.capacity,onChange:c=>K(S=>({...S,capacity:c.target.value}))})]}),r.jsxs("label",{className:`form-field ${Ce?"field-missing":""}`,children:[r.jsx("span",{children:"Coordinates (DMS)"}),r.jsxs("div",{className:"input-with-button",children:[r.jsx("input",{type:"text",value:D.coordinates,onChange:c=>K(S=>({...S,coordinates:c.target.value}))}),r.jsx("button",{type:"button",className:"ghost",disabled:!D.coordinates.trim(),onClick:()=>{const c=D.coordinates.trim();c&&window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(c)}`,"_blank")},children:"Open in Maps"})]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Check-in"}),r.jsx(Mt,{value:Je(D.check_in_at),options:{enableTime:!0,dateFormat:"Y-m-d H:i"},onChange:c=>{const S=c[0];K(B=>({...B,check_in_at:S?Bt(S):""}))}})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Check-out"}),r.jsx(Mt,{value:Je(D.check_out_at),options:{enableTime:!0,dateFormat:"Y-m-d H:i"},onChange:c=>{const S=c[0];K(B=>({...B,check_out_at:S?Bt(S):""}))}})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Booked"}),r.jsxs("div",{className:"checkbox-field",children:[r.jsx("input",{type:"checkbox",checked:D.booked,onChange:c=>K(S=>({...S,booked:c.target.checked}))}),r.jsx("span",{children:"Mark as booked"})]})]}),r.jsxs("label",{className:"form-field",style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Notes"}),r.jsx("input",{type:"text",value:D.notes,onChange:c=>K(S=>({...S,notes:c.target.value}))})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"button",className:"primary",onClick:()=>{D.name.trim()&&(async()=>{try{const c=await Mp(Number(e),{name:D.name.trim(),capacity:Number(D.capacity)||0,coordinates:D.coordinates.trim()||void 0,booked:D.booked,check_in_at:D.check_in_at||void 0,check_out_at:D.check_out_at||void 0,notes:D.notes.trim()||void 0});W(S=>[c,...S]),K({name:"",capacity:"",coordinates:"",booked:!1,check_in_at:"",check_out_at:"",notes:""}),$e(!1)}catch(c){ee(c instanceof Error?c.message:"Failed to create accommodation")}})()},children:"Save accommodation"}),r.jsx("button",{type:"button",className:"ghost",onClick:()=>{$e(!1),K({name:"",capacity:"",coordinates:"",booked:!1,check_in_at:"",check_out_at:"",notes:""})},children:"Cancel"})]})]}),r.jsx("div",{className:"form-actions",style:{marginTop:"0.75rem"},children:r.jsx("button",{type:"button",className:ct,onClick:$r,disabled:re||We,children:It})})]})]}),r.jsxs("article",{className:"card",children:[r.jsxs("header",{className:"card-header",onClick:()=>Ft("transports"),style:{cursor:"pointer"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flex:1},children:[r.jsx("button",{className:"ghost",type:"button",onClick:c=>{c.stopPropagation(),Ft("transports")},children:Ue.transports?"":""}),r.jsx("h3",{style:{margin:0},children:"Transport"})]}),r.jsxs("span",{className:"badge neutral",children:[h.length," ROUTES"]})]}),Ue.transports&&r.jsxs(r.Fragment,{children:[h.length>0?r.jsx("ul",{className:"status-list",style:{maxHeight:"24rem",overflowY:"auto"},children:h.slice().sort((c,S)=>{var ie,xe;const B=((ie=ft(c.scheduled_at))==null?void 0:ie.getTime())??Number.POSITIVE_INFINITY,te=((xe=ft(S.scheduled_at))==null?void 0:xe.getTime())??Number.POSITIVE_INFINITY;return B-te}).map(c=>{const S=ze(c.pickup_location),B=ze(c.destination),te=Number.isFinite(c.passenger_count)&&c.passenger_count>=0,ie=Array.isArray(c.vehicles)&&c.vehicles.length>0,xe=kt(c.pickup_location)&&kt(c.destination)&&kt(c.scheduled_at)&&te&&ie&&kt(S)&&kt(B);return r.jsx("li",{id:`transport-${c.id}`,style:{...ye,...yt===`transport-${c.id}`?ce:{}},children:r.jsxs(et,{to:`/logistics/${c.id}`,state:{fromEventId:e,highlightId:`transport-${c.id}`},className:"card-link",style:{display:"flex",flexDirection:"column",gap:"0.25rem",width:"100%"},onClick:()=>{if(e)try{sessionStorage.setItem(`event-detail-highlight:${e}`,`transport-${c.id}`)}catch{}Pt()},children:[r.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",gap:"0.75rem",width:"100%"},children:[r.jsxs("strong",{style:{display:"block"},children:[c.pickup_location,"  ",c.destination]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.35rem",flexShrink:0},children:[r.jsx("span",{className:`badge ${xe?"success":"danger"}`,style:{minWidth:"2.4ch",textAlign:"center"},children:xe?"":"!"}),r.jsxs("span",{className:"badge neutral",children:[c.passenger_count," PAX"]})]})]}),r.jsx("div",{className:"muted",style:{display:"flex",gap:"0.35rem",flexWrap:"wrap"},children:c.scheduled_at?`${ts(c.scheduled_at)}`:"Unscheduled"}),Array.isArray(c.vehicles)&&c.vehicles.length>0?r.jsx("div",{className:"muted",style:{display:"flex",flexDirection:"column",gap:"0.15rem"},children:c.vehicles.map((Oe,dt)=>r.jsx("div",{style:{display:"flex",gap:"0.35rem",alignItems:"center",flexWrap:"wrap"},children:r.jsx("strong",{children:Oe.name})},dt))}):null]})},c.id)})}):r.jsx("p",{className:"muted",children:"No transport routes yet."}),r.jsx("div",{className:"form-actions",style:{marginTop:"0.5rem"},children:r.jsx("button",{type:"button",className:"ghost",onClick:()=>Ie(c=>!c),children:Ke?"Cancel":"Create new transport route"})}),Ke&&r.jsxs("div",{className:"form-grid",style:{marginTop:"0.5rem"},children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Pickup location"}),r.jsxs("select",{value:A.pickup_location,onChange:c=>H(S=>({...S,pickup_location:c.target.value})),required:!0,children:[r.jsx("option",{value:"",children:"Select pickup"}),sd.map(c=>c.options.length>0&&r.jsx("optgroup",{label:c.label,children:c.options.map(S=>r.jsx("option",{value:S.value,children:S.label},`${c.label}-${S.value}`))},c.label))]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Destination"}),r.jsxs("select",{value:A.destination,onChange:c=>H(S=>({...S,destination:c.target.value})),required:!0,children:[r.jsx("option",{value:"",children:"Select destination"}),sd.map(c=>c.options.length>0&&r.jsx("optgroup",{label:c.label,children:c.options.map(S=>r.jsx("option",{value:S.value,children:S.label},`${c.label}-${S.value}`))},c.label))]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Passenger count"}),r.jsx("input",{type:"number",min:0,value:A.passenger_count,onChange:c=>H(S=>({...S,passenger_count:c.target.value}))})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Scheduled at"}),r.jsx(Mt,{value:Je(A.scheduled_at),options:{enableTime:!0,dateFormat:"Y-m-d H:i",time_24hr:!0},onChange:c=>{const S=c[0];H(B=>({...B,scheduled_at:S?Bt(S):""}))}})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"button",className:"primary",onClick:ch,children:"Save transport"}),r.jsx("button",{type:"button",className:"ghost",onClick:()=>Ie(!1),children:"Cancel"})]})]}),r.jsx("div",{className:"form-actions",style:{marginTop:"0.75rem"},children:r.jsx("button",{type:"button",className:ct,onClick:$r,disabled:re||We,children:It})})]})]}),r.jsxs("article",{className:"card",children:[r.jsxs("header",{className:"card-header",onClick:()=>Ft("groundCrews"),style:{cursor:"pointer"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flex:1},children:[r.jsx("button",{className:"ghost",type:"button",onClick:c=>{c.stopPropagation(),Ft("groundCrews")},children:Ue.groundCrews?"":""}),r.jsx("h3",{style:{margin:0},children:"Ground Crew"})]}),r.jsxs("span",{className:"badge neutral",children:[L.length," ENTRIES"]})]}),Ue.groundCrews&&r.jsxs(r.Fragment,{children:[L.length>0?r.jsx("ul",{className:"status-list",style:{maxHeight:"24rem",overflowY:"auto"},children:L.slice().sort((c,S)=>{var ie,xe;const B=((ie=ft(c.scheduled_at))==null?void 0:ie.getTime())??Number.POSITIVE_INFINITY,te=((xe=ft(S.scheduled_at))==null?void 0:xe.getTime())??Number.POSITIVE_INFINITY;return B-te}).map(c=>{const S=ze(c.pickup_location),B=ze(c.destination),te=Number.isFinite(c.passenger_count)&&c.passenger_count>=0,ie=Array.isArray(c.vehicles)&&c.vehicles.length>0,xe=kt(c.pickup_location)&&kt(c.destination)&&kt(c.scheduled_at)&&te&&ie&&kt(S)&&kt(B);return r.jsx("li",{id:`ground-crew-${c.id}`,style:{...ye,...yt===`ground-crew-${c.id}`?ce:{}},children:r.jsxs(et,{to:`/logistics/ground-crew/${c.id}`,state:{fromEventId:e,highlightId:`ground-crew-${c.id}`},className:"card-link",style:{display:"flex",flexDirection:"column",gap:"0.25rem",width:"100%"},onClick:()=>{if(e)try{sessionStorage.setItem(`event-detail-highlight:${e}`,`ground-crew-${c.id}`)}catch{}Pt()},children:[r.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",gap:"0.75rem",width:"100%"},children:[r.jsxs("strong",{style:{display:"block"},children:[c.pickup_location,"  ",c.destination]}),r.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.35rem",flexShrink:0},children:r.jsx("span",{className:`badge ${xe?"success":"danger"}`,style:{minWidth:"2.4ch",textAlign:"center"},children:xe?"":"!"})})]}),r.jsx("div",{className:"muted",style:{display:"flex",gap:"0.35rem",flexWrap:"wrap"},children:c.scheduled_at?`${ts(c.scheduled_at)}`:"Unscheduled"}),Array.isArray(c.vehicles)&&c.vehicles.length>0?r.jsx("div",{className:"muted",style:{display:"flex",flexDirection:"column",gap:"0.15rem"},children:c.vehicles.map((Oe,dt)=>r.jsx("div",{style:{display:"flex",gap:"0.35rem",alignItems:"center",flexWrap:"wrap"},children:r.jsx("strong",{children:Oe.name})},dt))}):null]})},c.id)})}):r.jsx("p",{className:"muted",children:"No ground crew entries yet."}),r.jsx("div",{className:"form-actions",style:{marginTop:"0.75rem"},children:r.jsx("button",{type:"button",className:ct,onClick:$r,disabled:re||We,children:It})})]})]}),r.jsxs("article",{className:"card",children:[r.jsxs("header",{className:"card-header",onClick:()=>Ft("meals"),style:{cursor:"pointer"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flex:1},children:[r.jsx("button",{className:"ghost",type:"button",onClick:c=>{c.stopPropagation(),Ft("meals")},children:Ue.meals?"":""}),r.jsx("h3",{style:{margin:0},children:"Meals"})]}),r.jsxs("span",{className:"badge neutral",children:[He.length," MEALS"]})]}),Ue.meals&&r.jsx(r.Fragment,{children:He.length>0?r.jsx("ul",{className:"status-list",style:{maxHeight:"24rem",overflowY:"auto"},children:ke.map(c=>{const S=kt(c.name)&&kt(c.location)&&kt(c.scheduled_at);return r.jsx("li",{id:`meal-${c.id}`,style:{...ye,...yt===`meal-${c.id}`?ce:{}},children:r.jsxs(et,{to:`/logistics/meals/${c.id}`,state:{fromEventId:e,highlightId:`meal-${c.id}`},className:"card-link",style:{display:"grid",gridTemplateColumns:"1fr",gap:"0.2rem",flex:1},onClick:()=>{if(e)try{sessionStorage.setItem(`event-detail-highlight:${e}`,`meal-${c.id}`)}catch{}Pt()},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[r.jsx("strong",{style:{flex:1},children:c.name}),r.jsx("span",{className:`badge ${S?"success":"danger"}`,style:{minWidth:"2.4ch",textAlign:"center",flexShrink:0},children:S?"":"!"})]}),r.jsxs("div",{className:"muted",style:{display:"flex",gap:"0.35rem",flexWrap:"wrap"},children:[c.location?c.location:"Location required",c.scheduled_at?` ${ts(c.scheduled_at)}`:""]}),c.notes?r.jsx("div",{className:"muted",children:c.notes}):null]})},c.id)})}):r.jsx("p",{className:"muted",children:"No meals yet."})})]}),r.jsxs("article",{className:"card",children:[r.jsxs("header",{className:"card-header",onClick:()=>Ft("others"),style:{cursor:"pointer"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flex:1},children:[r.jsx("button",{className:"ghost",type:"button",onClick:c=>{c.stopPropagation(),Ft("others")},children:Ue.others?"":""}),r.jsx("h3",{style:{margin:0},children:"Other logistics"})]}),r.jsxs("span",{className:"badge neutral",children:[le.length," ENTRIES"]})]}),Ue.others&&r.jsxs(r.Fragment,{children:[le.length>0?r.jsx("ul",{className:"status-list",style:{maxHeight:"24rem",overflowY:"auto"},children:le.slice().sort((c,S)=>{var ie,xe;const B=((ie=ft(c.scheduled_at))==null?void 0:ie.getTime())??Number.POSITIVE_INFINITY,te=((xe=ft(S.scheduled_at))==null?void 0:xe.getTime())??Number.POSITIVE_INFINITY;return B-te}).map(c=>{const S=kt(c.name)&&kt(c.coordinates)&&kt(c.scheduled_at);return r.jsx("li",{id:`other-${c.id}`,style:{...ye,...yt===`other-${c.id}`?ce:{}},children:r.jsxs(et,{to:`/logistics/others/${c.id}`,state:{fromEventId:e,highlightId:`other-${c.id}`},className:"card-link",style:{display:"grid",gridTemplateColumns:"1fr",gap:"0.25rem",flex:1},onClick:()=>{if(e)try{sessionStorage.setItem(`event-detail-highlight:${e}`,`other-${c.id}`)}catch{}Pt()},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"0.75rem"},children:[r.jsx("strong",{children:c.name}),r.jsx("span",{className:`badge ${S?"success":"danger"}`,style:{minWidth:"2.4ch",textAlign:"center",marginLeft:"auto",flexShrink:0},children:S?"":"!"})]}),r.jsx("div",{className:"muted",style:{display:"flex",gap:"0.35rem",flexWrap:"wrap"},children:c.scheduled_at?ts(c.scheduled_at):"Unscheduled"}),c.notes&&r.jsxs("div",{className:"muted",children:["Notes: ",c.notes]})]})},c.id)})}):r.jsx("p",{className:"muted",children:"No other logistics yet."}),r.jsx("div",{className:"form-actions",style:{marginTop:"0.5rem"},children:r.jsx("button",{type:"button",className:"ghost",onClick:()=>q(c=>!c),children:J?"Cancel":"Create new entry"})}),J&&r.jsxs("div",{className:"form-grid",style:{marginTop:"0.5rem"},children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Name"}),r.jsx("input",{type:"text",value:ve.name,onChange:c=>Se(S=>({...S,name:c.target.value})),required:!0})]}),r.jsxs("label",{className:`form-field ${Ge?"field-missing":""}`,children:[r.jsx("span",{children:"Coordinates"}),r.jsxs("div",{className:"input-with-button",children:[r.jsx("input",{type:"text",value:ve.coordinates,onChange:c=>Se(S=>({...S,coordinates:c.target.value}))}),r.jsx("button",{type:"button",className:"ghost",disabled:!ve.coordinates.trim(),onClick:()=>{const c=ve.coordinates.trim();c&&window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(c)}`,"_blank")},children:"Open in Maps"})]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Scheduled at"}),r.jsx(Mt,{value:Je(ve.scheduled_at),options:{enableTime:!0,dateFormat:"Y-m-d H:i",time_24hr:!0},onChange:c=>{const S=c[0];Se(B=>({...B,scheduled_at:S?Bt(S):""}))}})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Description"}),r.jsx("textarea",{value:ve.description,onChange:c=>Se(S=>({...S,description:c.target.value}))})]}),r.jsxs("label",{className:"form-field",style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Notes"}),r.jsx("input",{type:"text",value:ve.notes,onChange:c=>Se(S=>({...S,notes:c.target.value}))})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"button",className:"primary",onClick:dh,children:"Save entry"}),r.jsx("button",{type:"button",className:"ghost",onClick:()=>q(!1),children:"Cancel"})]})]}),r.jsx("div",{className:"form-actions",style:{marginTop:"0.75rem"},children:r.jsx("button",{type:"button",className:ct,onClick:$r,disabled:re||We,children:It})})]})]})]})},h0=()=>{const{airfieldId:e}=Tn(),n=gt(),[t,s]=o.useState(null),[a,i]=o.useState({name:"",elevation:0,coordinates:"",description:""}),[l,u]=o.useState(!0),[d,x]=o.useState(!1),[_,C]=o.useState(!1),[N,F]=o.useState(null),[v,b]=o.useState(null),E=!a.name.trim();o.useEffect(()=>{let j=!1;return(async()=>{if(e){u(!0),b(null);try{const k=await Gx(Number(e));if(j)return;s(k),i({name:k.name,elevation:k.elevation,coordinates:k.coordinates,description:k.description||""})}catch(k){j||b(k instanceof Error?k.message:"Failed to load airfield")}finally{j||u(!1)}}})(),()=>{j=!0}},[e]);const p=async j=>{var O;if(j.preventDefault(),!!e){x(!0),F(null);try{const k={name:a.name.trim(),elevation:Number(a.elevation)||0,coordinates:a.coordinates.trim(),description:((O=a.description)==null?void 0:O.trim())||void 0},I=await Xx(Number(e),k);s(I),i({name:I.name,elevation:I.elevation,coordinates:I.coordinates,description:I.description||""}),F("Airfield updated")}catch(k){F(k instanceof Error?k.message:"Failed to update airfield")}finally{x(!1)}}},m=async()=>{if(!(!e||_)&&window.confirm("Are you sure you want to delete this airfield?")){C(!0),F(null);try{await Zx(Number(e)),n(-1)}catch(j){F(j instanceof Error?j.message:"Failed to delete airfield"),C(!1)}}};if(l)return r.jsx("p",{className:"muted",children:"Loading airfield"});if(v)return r.jsx("p",{className:"error-text",children:v});if(!t)return r.jsx("p",{className:"error-text",children:"Airfield not found."});const y=Number.isFinite(a.elevation)?nd(a.elevation):null;return r.jsxs("section",{children:[r.jsxs("header",{className:"page-header",children:[r.jsx("div",{children:r.jsx("h2",{children:t.name})}),r.jsxs("div",{className:"card-actions",children:[r.jsx("button",{className:"ghost",type:"button",onClick:()=>n("/airfields/new",{state:{copyAirfield:{name:t.name,elevation:t.elevation,coordinates:t.coordinates,description:t.description}}}),children:"Make a copy"}),r.jsx("button",{className:"ghost",type:"button",onClick:()=>n(-1),children:"Back"}),r.jsx("button",{className:"ghost danger",type:"button",onClick:m,disabled:_,children:_?"Deleting":"Delete airfield"})]})]}),r.jsx("article",{className:"card",children:r.jsxs("form",{className:"form-grid",onSubmit:p,children:[r.jsxs("label",{className:`form-field ${E?"field-missing":""}`,children:[r.jsx("span",{children:"Name"}),r.jsx("input",{type:"text",value:a.name,onChange:j=>i(O=>({...O,name:j.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Elevation (m)"}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx("input",{type:"number",min:0,step:1,value:a.elevation,onChange:j=>i(O=>({...O,elevation:Number(j.target.value)})),required:!0}),r.jsx("span",{className:"muted",style:{whiteSpace:"nowrap"},children:y!==null?`${y} ft`:" ft"})]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Coordinates"}),r.jsxs("div",{className:"input-with-button",children:[r.jsx("input",{type:"text",value:a.coordinates,onChange:j=>i(O=>({...O,coordinates:j.target.value})),placeholder:"Lat, Long",required:!0,style:{minWidth:"22ch"}}),r.jsx("button",{type:"button",className:"ghost",onClick:()=>{a.coordinates.trim()&&window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(a.coordinates)}`,"_blank")},children:"Open in Maps"})]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Description"}),r.jsx("input",{type:"text",value:a.description,onChange:j=>i(O=>({...O,description:j.target.value})),placeholder:"Optional notes"})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"submit",className:"primary",disabled:d,children:d?"Saving":"Save airfield"}),N&&r.jsx("span",{className:"muted",children:N})]})]})})]})},g0=()=>{var _;const e=gt(),t=(_=Jt().state)==null?void 0:_.copyAirfield,[s,a]=o.useState({name:(t==null?void 0:t.name)||"",elevation:(t==null?void 0:t.elevation)??0,coordinates:(t==null?void 0:t.coordinates)||"",description:(t==null?void 0:t.description)||""}),[i,l]=o.useState(!1),[u,d]=o.useState(null);o.useEffect(()=>{d(null)},[]);const x=async C=>{var N;C.preventDefault(),l(!0),d(null);try{const F={name:s.name.trim(),elevation:Number(s.elevation)||0,coordinates:s.coordinates.trim(),description:((N=s.description)==null?void 0:N.trim())||void 0};await Qi(F),d("Airfield created"),e(-1)}catch(F){d(F instanceof Error?F.message:"Failed to create airfield")}finally{l(!1)}};return r.jsxs("section",{children:[r.jsxs("header",{className:"page-header",children:[r.jsx("div",{children:r.jsx("h2",{children:"Create airfield"})}),r.jsx("div",{className:"card-actions",children:r.jsx("button",{className:"ghost",type:"button",onClick:()=>e(-1),children:"Back"})})]}),r.jsx("article",{className:"card",children:r.jsxs("form",{className:"form-grid",onSubmit:x,children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Name"}),r.jsx("input",{type:"text",value:s.name,onChange:C=>a(N=>({...N,name:C.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Elevation (m)"}),r.jsx("input",{type:"number",min:0,step:1,value:s.elevation,onChange:C=>a(N=>({...N,elevation:Number(C.target.value)})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Coordinates"}),r.jsx("input",{type:"text",value:s.coordinates,onChange:C=>a(N=>({...N,coordinates:C.target.value})),placeholder:"Lat, Long",required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Description"}),r.jsx("input",{type:"text",value:s.description,onChange:C=>a(N=>({...N,description:C.target.value})),placeholder:"Optional notes"})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"submit",className:"primary",disabled:i,children:i?"Saving":"Save airfield"}),u&&r.jsx("span",{className:"muted",children:u})]})]})})]})},v0=()=>{const[e,n]=o.useState({name:"",starts_on:"",ends_on:""}),[t,s]=o.useState(null),[a,i]=o.useState(!1),l=gt(),u=async d=>{d.preventDefault(),i(!0),s(null);try{const x={name:e.name.trim(),starts_on:e.starts_on};e.ends_on&&(x.ends_on=e.ends_on),await vx(x),s("Season created"),n({name:"",starts_on:"",ends_on:""}),l("/events")}catch(x){s(x instanceof Error?x.message:"Failed to create season")}finally{i(!1)}};return r.jsxs("section",{children:[r.jsxs("header",{className:"page-header",children:[r.jsx("div",{children:r.jsx("h2",{children:"Create season"})}),r.jsx("button",{className:"ghost",type:"button",onClick:()=>l("/events"),children:"Back to events"})]}),r.jsx("article",{className:"card",children:r.jsxs("form",{className:"form-grid",onSubmit:u,children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Name"}),r.jsx("input",{type:"text",value:e.name,onChange:d=>n(x=>({...x,name:d.target.value})),placeholder:"Enter a name for this season",required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Starts on"}),r.jsx("input",{type:"date",value:e.starts_on,onChange:d=>n(x=>({...x,starts_on:d.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Ends on"}),r.jsx("input",{type:"date",value:e.ends_on,onChange:d=>n(x=>({...x,ends_on:d.target.value})),placeholder:"Optional"})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"submit",className:"primary",disabled:a,children:a?"Creating":"Create season"}),t&&r.jsx("span",{className:"muted",children:t})]})]})})]})},y0=()=>{const[e,n]=Zc(),t=gt(),s=e.get("eventId")??"",[a,i]=o.useState([]),[l,u]=o.useState([]),[d,x]=o.useState(s),[_,C]=o.useState(!0),[N,F]=o.useState(null),[v,b]=o.useState(null),[E,p]=o.useState(!1),[m,y]=o.useState(!1),[j,O]=o.useState([]),[k,I]=o.useState({load_number:"",notes:"",capacity:""});o.useEffect(()=>{let R=!1;return(async()=>{C(!0),F(null);try{const[de,Ne,me]=await Promise.all([$t(),Rp(),Gr()]);if(R)return;const he=Array.isArray(de)?de.map(we=>({id:we.id,name:we.name})):[];i(he),u(Array.isArray(Ne)?Ne:[]),O(Array.isArray(me)?me:[])}catch(de){R||F(de instanceof Error?de.message:"Failed to load manifests")}finally{R||C(!1)}})(),()=>{R=!0}},[]);const M=o.useMemo(()=>{const R=Number(d);return R?l.filter(ae=>ae.event_id===R).sort((ae,de)=>ae.load_number-de.load_number):[]},[l,d]),X=o.useMemo(()=>a.find(R=>R.id===Number(d)),[a,d]),se=async R=>{R.preventDefault();const ae=Number(d);if(ae){p(!0),b(null);try{const de={event_id:ae,load_number:Number(k.load_number),notes:k.notes.trim()||void 0,capacity:k.capacity?Number(k.capacity):void 0},Ne=await Nx(de);u(me=>[...me,Ne].sort((he,we)=>he.load_number-we.load_number)),I({load_number:"",notes:"",capacity:""}),y(!1),b("Manifest added")}catch(de){b(de instanceof Error?de.message:"Failed to create manifest")}finally{p(!1)}}};return r.jsxs("section",{children:[r.jsxs("header",{className:"page-header",children:[r.jsx("div",{children:r.jsx("h2",{children:"Manifest"})}),d&&r.jsxs("button",{type:"button",className:"ghost",onClick:()=>t(`/events/${d}`),children:["Back to event",X?`: ${X.name}`:""]})]}),r.jsxs("article",{className:"card",children:[r.jsx("div",{className:"form-grid",style:{marginBottom:"1rem"},children:r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Event"}),r.jsxs("select",{value:d,onChange:R=>{const ae=R.target.value;x(ae),n(ae?{eventId:ae}:{})},children:[r.jsx("option",{value:"",children:"Select an event"}),a.map(R=>r.jsx("option",{value:R.id,children:R.name},R.id))]})]})}),_?r.jsx("p",{className:"muted",children:"Loading manifests"}):N?r.jsx("p",{className:"error-text",children:N}):d?r.jsxs(r.Fragment,{children:[M.length===0?r.jsx("p",{className:"muted",children:"No manifests for this event yet."}):r.jsx("div",{className:"stack",children:M.map(R=>{const ae=Array.isArray(R.participant_ids)?R.participant_ids:[],de=ae.reduce((he,we)=>{const ue=j.find(fe=>fe.id===we);return((ue==null?void 0:ue.roles)||[]).includes("Staff")?he+1:he},0),Ne=ae.length-de,me=R.capacity!=null&&R.capacity>0?ae.length>=R.capacity:!1;return r.jsx(et,{to:`/manifests/${R.id}?eventId=${d}`,className:"card-link",style:{textDecoration:"none"},children:r.jsx("article",{className:"card",children:r.jsxs("header",{className:"card-header",children:[r.jsxs("div",{children:[r.jsxs("h3",{children:["Load ",R.load_number]}),r.jsxs("p",{className:"muted",style:{marginBottom:0},children:["Capacity: ",R.capacity??"Not set","  Participants: ",Ne,"  Staff: ",de]}),R.notes&&r.jsxs("p",{className:"muted",style:{margin:0},children:["Notes: ",R.notes]})]}),me?r.jsx("span",{className:"badge danger",children:"FULL"}):r.jsx("span",{className:"badge success",children:"Slots Available"})]})})},R.id)})}),r.jsx("hr",{}),!m&&r.jsx("div",{className:"form-actions",children:r.jsx("button",{type:"button",className:"ghost",onClick:()=>y(!0),children:"Add manifest"})}),m&&r.jsxs("form",{className:"form-grid",onSubmit:se,children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Load number"}),r.jsx("input",{type:"number",min:1,value:k.load_number,onChange:R=>I(ae=>({...ae,load_number:R.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Capacity"}),r.jsx("input",{type:"number",min:0,value:k.capacity,onChange:R=>I(ae=>({...ae,capacity:R.target.value})),placeholder:"Slots available"})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Notes"}),r.jsx("input",{type:"text",value:k.notes,onChange:R=>I(ae=>({...ae,notes:R.target.value})),placeholder:"Optional notes"})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"submit",className:"primary",disabled:E||!d,children:E?"Saving":"Add manifest"}),r.jsx("button",{type:"button",className:"ghost",onClick:()=>y(!1),disabled:E,children:"Cancel"}),v&&r.jsx("span",{className:"muted",children:v})]})]})]}):r.jsx("p",{className:"muted",children:"Choose an event to see its manifests."})]})]})},x0=e=>[...e].sort((n,t)=>t.name.localeCompare(n.name)),Xl=e=>[...e].sort((n,t)=>n.full_name.localeCompare(t.full_name,void 0,{sensitivity:"base"})),j0=()=>{const[e,n]=Zc(),[t,s]=o.useState([]),[a,i]=o.useState([]),[l,u]=o.useState([]),[d,x]=o.useState(()=>e.get("season")||""),[_,C]=o.useState(()=>e.get("event")||""),[N,F]=o.useState(()=>{const R=e.get("roles");return R?R.split(",").filter(Boolean):[]}),[v,b]=o.useState(()=>e.get("q")||""),[E,p]=o.useState(!0),[m,y]=o.useState(null),j=R=>R.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),O=R=>{if(!v.trim())return R;const ae=v.trim(),de=new RegExp(`(${j(ae)})`,"ig");return R.split(de).map((Ne,me)=>Ne.toLowerCase()===ae.toLowerCase()?r.jsx("mark",{children:Ne},me):r.jsx("span",{children:Ne},me))};o.useEffect(()=>{const R=new URLSearchParams;d&&R.set("season",d),_&&R.set("event",_),N.length&&R.set("roles",N.join(",")),v&&R.set("q",v),n(R,{replace:!0})},[d,_,N,v,n]),o.useEffect(()=>{let R=!1;return(async()=>{p(!0),y(null);try{const[de,Ne,me]=await Promise.all([Zn(),$t(),Gr()]);if(R)return;s(Array.isArray(de)?de:[]),i(Array.isArray(Ne)?Ne:[]),u(Array.isArray(me)?me:[])}catch(de){R||y(de instanceof Error?de.message:"Failed to load participants")}finally{R||p(!1)}})(),()=>{R=!0}},[]);const k=o.useMemo(()=>{const R=new Map;return l.forEach(ae=>R.set(ae.id,ae)),R},[l]),I=o.useMemo(()=>{const R=new Map;return a.forEach(ae=>{(Array.isArray(ae.participant_ids)?ae.participant_ids:[]).forEach(de=>{const Ne=R.get(de)||[];Ne.push(ae),R.set(de,Ne)})}),R},[a]),M=o.useMemo(()=>{if(!d)return a;const R=Number(d);return a.filter(ae=>ae.season_id===R)},[a,d]),X=o.useMemo(()=>{const R=he=>{const we=N.filter(ge=>ge!=="Participant");if(!we.length)return!0;const ue=Array.isArray(he==null?void 0:he.roles)?he==null?void 0:he.roles:[];return we.every(ge=>ue.includes(ge))},ae=he=>v.trim()?((he==null?void 0:he.full_name)||"").toLowerCase().includes(v.trim().toLowerCase()):!0,de=(he,we,ue)=>{var Y;if(ue.has(he))return;ue.add(he);const ge=k.get(he);if(!R(ge)||!ae(ge))return;const fe=((Y=I.get(he))==null?void 0:Y.length)||0;we.push({id:he,full_name:(ge==null?void 0:ge.full_name)||`Participant #${he}`,email:ge==null?void 0:ge.email,phone:ge==null?void 0:ge.phone,experience_level:ge==null?void 0:ge.experience_level,emergency_contact:ge==null?void 0:ge.emergency_contact,eventCount:fe})},Ne=new Set,me=[];if(_){const he=a.find(we=>we.id===Number(_));return he?((Array.isArray(he.participant_ids)?he.participant_ids:[]).forEach(we=>de(we,me,Ne)),Xl(me)):[]}return d?(M.forEach(he=>{(Array.isArray(he.participant_ids)?he.participant_ids:[]).forEach(we=>de(we,me,Ne))}),Xl(me)):(l.forEach(he=>de(he.id,me,Ne)),Xl(me))},[_,d,N,v,a,M,l,k,I]),se=o.useMemo(()=>{const R=new URLSearchParams;d&&R.set("season",d),_&&R.set("event",_),N.length&&R.set("roles",N.join(",")),v&&R.set("q",v);const ae=R.toString();return ae?`?${ae}`:""},[d,_,N,v]);return r.jsxs("section",{className:"stack",children:[r.jsxs("header",{className:"page-header",style:{position:"relative",paddingRight:"10rem"},children:[r.jsx("div",{children:r.jsx("h2",{children:"Participants"})}),r.jsx(et,{className:"primary button-link",to:"/participants/new",style:{position:"absolute",right:0,top:0},children:"Add participant"})]}),r.jsxs("article",{className:"card",children:[r.jsxs("div",{className:"form-grid",style:{gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",alignItems:"end"},children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Season"}),r.jsxs("select",{value:d,onChange:R=>{x(R.target.value),C("")},style:{width:"100%",minWidth:"140px"},children:[r.jsx("option",{value:"",children:"All seasons"}),x0(t).map(R=>r.jsx("option",{value:R.id,children:R.name},R.id))]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Event"}),r.jsxs("select",{value:_,onChange:R=>C(R.target.value),style:{width:"100%",minWidth:"160px"},children:[r.jsx("option",{value:"",children:"All events"}),M.map(R=>r.jsx("option",{value:R.id,children:R.name},R.id))]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Name"}),r.jsx("input",{type:"text",placeholder:"Search by name",value:v,onChange:R=>b(R.target.value)})]}),r.jsxs("div",{className:"form-field",style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Roles"}),r.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem",width:"100%"},children:[Ji.filter(R=>R!=="Participant").map(R=>{const ae=N.includes(R);return r.jsxs("label",{className:"badge neutral",style:{display:"inline-flex",alignItems:"center",gap:"0.35rem"},children:[r.jsx("input",{type:"checkbox",checked:ae,onChange:de=>{F(Ne=>{const me=new Set(Ne);return de.target.checked?me.add(R):me.delete(R),Array.from(me)})}}),R]},R)}),N.length>0&&r.jsx("button",{type:"button",className:"ghost",onClick:()=>F([]),style:{padding:"0.2rem 0.6rem"},children:"Clear"})]})]})]}),d&&M.length===0&&r.jsx("p",{className:"muted",children:"No events for this season."})]}),r.jsxs("article",{className:"card",children:[r.jsxs("header",{className:"card-header",children:[r.jsx("div",{children:r.jsx("h3",{children:"Participants"})}),r.jsxs("span",{className:"badge neutral",children:[X.length," ",X.length===1?"participant":"participants"]})]}),E?r.jsx("p",{className:"muted",children:"Loading participants"}):m?r.jsx("p",{className:"error-text",children:m}):X.length===0?r.jsx("p",{className:"muted",children:"No participants match the selected filters."}):r.jsx("ul",{className:"status-list",children:X.map(R=>r.jsxs("li",{children:[r.jsxs(et,{to:{pathname:`/participants/${R.id}`,search:se},className:"card-link",style:{flex:1},children:[r.jsx("strong",{children:O(R.full_name)}),r.jsx("div",{className:"muted",children:R.email||"No email on file"}),r.jsxs("div",{className:"muted",children:["Experience: ",R.experience_level||"Not provided"]})]}),r.jsxs("span",{className:"badge neutral",children:[R.eventCount," ",R.eventCount===1?"event":"events"]})]},R.id))})]})]})},_0=()=>{const[e,n]=o.useState({full_name:"",email:"",phone:"",experience_level:"",emergency_contact:"",roles:["Participant"]}),[t,s]=o.useState(!1),[a,i]=o.useState(null),l=gt(),u=async d=>{var x,_,C;d.preventDefault(),s(!0),i(null);try{await ka({full_name:e.full_name.trim(),email:e.email.trim(),phone:((x=e.phone)==null?void 0:x.trim())||void 0,experience_level:((_=e.experience_level)==null?void 0:_.trim())||void 0,emergency_contact:((C=e.emergency_contact)==null?void 0:C.trim())||void 0,roles:e.roles&&e.roles.length>0?e.roles:["Participant"]}),i("Participant created"),l("/participants")}catch(N){i(N instanceof Error?N.message:"Failed to create participant")}finally{s(!1)}};return r.jsxs("section",{children:[r.jsxs("header",{className:"page-header",children:[r.jsxs("div",{children:[r.jsx("h2",{children:"Create participant"}),r.jsx("p",{children:"Add a new member to the Innhopp Family."})]}),r.jsx("button",{className:"ghost",type:"button",onClick:()=>l("/participants"),children:"Back to participants"})]}),r.jsx("article",{className:"card",children:r.jsxs("form",{className:"form-grid",onSubmit:u,children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Full name"}),r.jsx("input",{type:"text",value:e.full_name,onChange:d=>n(x=>({...x,full_name:d.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Email"}),r.jsx("input",{type:"email",value:e.email,onChange:d=>n(x=>({...x,email:d.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Phone"}),r.jsx("input",{type:"text",value:e.phone,onChange:d=>n(x=>({...x,phone:d.target.value})),placeholder:"Optional"})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Experience level"}),r.jsx("input",{type:"text",value:e.experience_level,onChange:d=>n(x=>({...x,experience_level:d.target.value})),placeholder:"Optional"})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Emergency contact"}),r.jsx("input",{type:"text",value:e.emergency_contact,onChange:d=>n(x=>({...x,emergency_contact:d.target.value})),placeholder:"Optional"})]}),r.jsxs("div",{className:"form-field",style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Roles"}),r.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:Ji.map(d=>{var _;const x=(_=e.roles)==null?void 0:_.includes(d);return r.jsxs("label",{className:"badge neutral",style:{display:"inline-flex",alignItems:"center",gap:"0.35rem"},children:[r.jsx("input",{type:"checkbox",checked:x,onChange:C=>{n(N=>{const F=new Set(N.roles||[]);C.target.checked?F.add(d):F.delete(d);const v=Array.from(F);return{...N,roles:v.length>0?v:["Participant"]}})}}),d]},d)})})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"submit",className:"primary",disabled:t,children:t?"Creating":"Create participant"}),a&&r.jsx("span",{className:"muted",children:a})]})]})})]})},N0=["Participant","Skydiver","Staff","Ground Crew","Jump Master","Jump Leader","Photo","Pilot","COP","Driver"],b0=()=>{const{participantId:e}=Tn(),n=gt(),t=Jt();t.search&&`${t.search}`;const[s,a]=o.useState(null),[i,l]=o.useState({full_name:"",email:"",phone:"",experience_level:"",emergency_contact:"",roles:["Participant"]}),[u,d]=o.useState(!0),[x,_]=o.useState(null),[C,N]=o.useState(null),[F,v]=o.useState(!1),[b,E]=o.useState(!1);o.useEffect(()=>{let m=!1;return(async()=>{if(e){d(!0),N(null);try{const j=await Cx(Number(e));if(m)return;a(j),l({full_name:j.full_name,email:j.email,phone:j.phone||"",experience_level:j.experience_level||"",emergency_contact:j.emergency_contact||"",roles:Array.isArray(j.roles)&&j.roles.length>0?j.roles:["Participant"]})}catch(j){m||N(j instanceof Error?j.message:"Failed to load participant")}finally{m||d(!1)}}})(),()=>{m=!0}},[e]);const p=async m=>{var j,O,k;if(m.preventDefault(),!e)return;const y=i.roles&&i.roles.length>0?i.roles:["Participant"];v(!0),_(null);try{const I=await wx(Number(e),{full_name:i.full_name.trim(),email:i.email.trim(),phone:((j=i.phone)==null?void 0:j.trim())||void 0,experience_level:((O=i.experience_level)==null?void 0:O.trim())||void 0,emergency_contact:((k=i.emergency_contact)==null?void 0:k.trim())||void 0,roles:y});a(I),_("Participant updated")}catch(I){_(I instanceof Error?I.message:"Failed to update participant")}finally{v(!1)}};return u?r.jsx("p",{className:"muted",children:"Loading participant"}):C?r.jsx("p",{className:"error-text",children:C}):s?r.jsxs("section",{children:[r.jsxs("header",{className:"page-header",children:[r.jsxs("div",{children:[r.jsx("h2",{children:s.full_name}),r.jsx("p",{className:"muted",children:s.email})]}),r.jsxs("div",{className:"card-actions",children:[r.jsx("button",{className:"ghost",type:"button",onClick:()=>{var j,O;const m=(j=t.state)==null?void 0:j.fromEventId,y=(O=t.state)==null?void 0:O.highlightId;if(m&&y)try{sessionStorage.setItem(`event-detail-highlight:${m}`,y)}catch{}n(-1)},children:"Back"}),r.jsx("button",{className:"ghost danger",type:"button",disabled:b,onClick:async()=>{if(e&&window.confirm("Delete this participant? This cannot be undone."))try{E(!0),await kx(Number(e)),n(-1)}catch(m){if((m==null?void 0:m.status)===404){n(-1);return}_(m instanceof Error?m.message:"Failed to delete participant"),E(!1)}},children:b?"Deleting":"Delete"})]})]}),r.jsx("article",{className:"card",children:r.jsxs("form",{className:"form-grid",onSubmit:p,children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Full name"}),r.jsx("input",{type:"text",value:i.full_name,onChange:m=>l(y=>({...y,full_name:m.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Email"}),r.jsx("input",{type:"email",value:i.email,onChange:m=>l(y=>({...y,email:m.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Phone"}),r.jsx("input",{type:"text",value:i.phone,onChange:m=>l(y=>({...y,phone:m.target.value})),placeholder:"Optional"})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Experience level"}),r.jsx("input",{type:"text",value:i.experience_level,onChange:m=>l(y=>({...y,experience_level:m.target.value})),placeholder:"Optional"})]}),r.jsxs("div",{className:"form-field",style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Roles"}),r.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:N0.map(m=>{var j;const y=(j=i.roles)==null?void 0:j.includes(m);return r.jsxs("label",{className:"badge neutral",style:{display:"inline-flex",alignItems:"center",gap:"0.35rem"},children:[r.jsx("input",{type:"checkbox",checked:y,onChange:O=>{l(k=>{const I=new Set(k.roles||[]);O.target.checked?I.add(m):I.delete(m);const M=Array.from(I);return{...k,roles:M.length>0?M:["Participant"]}})}}),m]},m)})})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Emergency contact"}),r.jsx("input",{type:"text",value:i.emergency_contact,onChange:m=>l(y=>({...y,emergency_contact:m.target.value})),placeholder:"Optional"})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"submit",className:"primary",disabled:F,children:F?"Saving":"Save participant"}),x&&r.jsx("span",{className:"muted",children:x})]})]})})]}):r.jsx("p",{className:"error-text",children:"Participant not found."})},S0=(e,n=!1)=>e?Un(e,{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:n?!1:void 0}):"Not scheduled",C0=()=>{const[e,n]=o.useState([]),[t,s]=o.useState([]),[a,i]=o.useState([]),[l,u]=o.useState(""),[d,x]=o.useState(""),[_,C]=o.useState(""),[N,F]=o.useState(""),[v,b]=o.useState(!0),[E,p]=o.useState(null);o.useEffect(()=>{let j=!1;return(async()=>{b(!0),p(null);try{const[k,I,M]=await Promise.all([Zn(),$t(),Aa()]);if(j)return;n(Array.isArray(k)?k:[]),s(Array.isArray(I)?I:[]),i(Array.isArray(M)?M:[])}catch(k){j||p(k instanceof Error?k.message:"Failed to load logistics")}finally{j||b(!1)}})(),()=>{j=!0}},[]);const m=o.useMemo(()=>{if(!l)return t;const j=Number(l);return t.filter(O=>O.season_id===j)},[t,l]),y=o.useMemo(()=>a.filter(j=>!(l&&j.season_id!==Number(l)||d&&j.event_id!==Number(d)||_&&!j.pickup_location.toLowerCase().includes(_.toLowerCase())||N&&!j.destination.toLowerCase().includes(N.toLowerCase()))),[a,l,d,_,N]);return r.jsxs("section",{children:[r.jsxs("header",{className:"page-header",children:[r.jsx("div",{children:r.jsx("h2",{children:"Transport"})}),r.jsxs("div",{className:"card-actions",children:[r.jsx(et,{className:"ghost",to:"/logistics",style:{fontWeight:700,fontSize:"1.05rem"},children:"Back to logistics"}),r.jsx(et,{className:"primary button-link",to:"/logistics/new",children:"Create route"})]})]}),r.jsxs("div",{className:"stack",children:[r.jsx("article",{className:"card",children:r.jsxs("div",{className:"form-grid",style:{gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",alignItems:"end",gap:"0.75rem"},children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Season"}),r.jsxs("select",{value:l,onChange:j=>{u(j.target.value),x("")},style:{width:"100%",minWidth:"180px",maxWidth:"25%"},children:[r.jsx("option",{value:"",children:"All seasons"}),[...e].sort((j,O)=>O.name.localeCompare(j.name)).map(j=>r.jsx("option",{value:j.id,children:j.name},j.id))]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Event"}),r.jsxs("select",{value:d,onChange:j=>x(j.target.value),style:{width:"100%",minWidth:"180px"},children:[r.jsx("option",{value:"",children:"All events"}),m.map(j=>r.jsx("option",{value:j.id,children:j.name},j.id))]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Pickup location"}),r.jsx("input",{type:"text",value:_,onChange:j=>C(j.target.value),placeholder:"Filter pickup"})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Destination"}),r.jsx("input",{type:"text",value:N,onChange:j=>F(j.target.value),placeholder:"Filter destination"})]})]})}),r.jsxs("article",{className:"card",children:[r.jsxs("header",{className:"card-header",children:[r.jsx("div",{children:r.jsx("h3",{children:"Transport routes"})}),r.jsxs("span",{className:"badge neutral",children:[y.length," ",y.length===1?"route":"routes"]})]}),v?r.jsx("p",{className:"muted",children:"Loading transports"}):E?r.jsx("p",{className:"error-text",children:E}):y.length===0?r.jsx("p",{className:"muted",children:"No transports match the selected filters."}):r.jsx("ul",{className:"status-list",style:{maxHeight:"24rem",overflowY:"auto"},children:y.map(j=>{var O;return r.jsx("li",{children:r.jsxs(et,{to:`/logistics/${j.id}`,className:"card-link",style:{flex:1},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"0.5rem"},children:[r.jsxs("div",{children:[r.jsxs("strong",{children:[j.pickup_location,"  ",j.destination]}),r.jsx("div",{className:"muted",children:S0(j.scheduled_at)})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.35rem",flexShrink:0},children:[r.jsx("span",{className:"badge",style:{backgroundColor:"#2b8a3e",color:"#fff"},children:((O=t.find(k=>k.id===j.event_id))==null?void 0:O.name)||`Event #${j.event_id??""}`}),r.jsxs("span",{className:"badge neutral",children:[j.passenger_count," passenger",j.passenger_count===1?"":"s"]})]})]}),j.vehicles&&j.vehicles.length>0&&r.jsxs("div",{className:"muted",children:["Vehicles:"," ",j.vehicles.map(k=>`${k.name}${k.driver?` (Driver: ${k.driver})`:""}  Cap: ${k.passenger_capacity}`).join("; ")]})]})},j.id)})})]})]})]})},w0=()=>{var Q;const e=gt(),t=(Q=Jt().state)==null?void 0:Q.copyTransport,s=Array.isArray(t==null?void 0:t.vehicles)&&t.vehicles.length?t.vehicles.filter(P=>P&&typeof P.name=="string"&&typeof P.passenger_capacity<"u"):[],a=Array.isArray(t==null?void 0:t.vehicle_ids)?t.vehicle_ids.filter(P=>typeof P=="number"):[],[i,l]=o.useState({pickup_location:(t==null?void 0:t.pickup_location)||"",destination:(t==null?void 0:t.destination)||"",passenger_count:(t==null?void 0:t.passenger_count)??"",scheduled_at:(t==null?void 0:t.scheduled_at)||""}),[u,d]=o.useState([]),[x,_]=o.useState([]),[C,N]=o.useState([]),[F,v]=o.useState([]),[b,E]=o.useState([]),[p,m]=o.useState([]),[y,j]=o.useState(""),[O,k]=o.useState(""),[I,M]=o.useState(t!=null&&t.event_id?String(t.event_id):""),[X,se]=o.useState(a),[R,ae]=o.useState(!1),[de,Ne]=o.useState({name:"",driver:"",passenger_capacity:"",notes:""}),[me,he]=o.useState(!1),[we,ue]=o.useState(null),ge=o.useRef(!0),[fe,Y]=o.useState(s);o.useEffect(()=>{if(!t)return;ge.current=!0,M(t.event_id?String(t.event_id):""),l({pickup_location:t.pickup_location||"",destination:t.destination||"",passenger_count:t.passenger_count??"",scheduled_at:t.scheduled_at||""});const P=s.map(V=>typeof V.event_vehicle_id=="number"?V.event_vehicle_id:void 0).filter(V=>typeof V=="number"),$=a.length>0?a:P;se($),Y(s)},[t]),o.useEffect(()=>{let P=!1;return(async()=>{try{const[V,ee,De]=await Promise.all([$t(),$a(),Pr()]);if(P)return;d(Array.isArray(V)?V:[]),_(Array.isArray(ee)?ee:[]),N(Array.isArray(De)?De:[])}catch{}})(),()=>{P=!0}},[]),o.useEffect(()=>{if(ge.current){ge.current=!1;return}se([]),ae(!1),j(""),k(""),l(P=>({...P,pickup_location:"",destination:""}))},[I]),o.useEffect(()=>{if(!I||i.scheduled_at)return;const P=u.find($=>$.id===Number(I));if(P!=null&&P.starts_at){const $=ft(P.starts_at);$&&($.setUTCHours(9,0,0,0),l(V=>({...V,scheduled_at:$.toISOString()})))}},[I,u,i.scheduled_at]);const Z=()=>{ae(!0),Ne({name:"",driver:"",passenger_capacity:"",notes:""})},ne=P=>{se($=>$.filter(V=>V!==P))},oe=async()=>{if(!(!I||!de.name.trim()))try{const P=await Gn({event_id:Number(I),name:de.name.trim(),driver:de.driver.trim()||void 0,passenger_capacity:Number(de.passenger_capacity)||0,notes:de.notes.trim()||void 0});_($=>[P,...$]),se($=>$.includes(P.id)?$:[...$,P.id]),Ne({name:"",driver:"",passenger_capacity:"",notes:""}),ae(!1)}catch(P){ue(P instanceof Error?P.message:"Failed to create vehicle")}},pe=async P=>{P.preventDefault(),he(!0),ue(null);const $=!!t;try{let V=[...X];if(I){const Fe=fe;if(Fe.length>0){for(const re of Fe){if(re.event_vehicle_id&&!V.includes(re.event_vehicle_id)){V.push(re.event_vehicle_id);continue}if(!re.event_vehicle_id){const st=await Gn({event_id:Number(I),name:re.name,driver:re.driver||"",passenger_capacity:Number(re.passenger_capacity)||0,notes:re.notes||""});V.push(st.id)}}se(V),Y([])}}const ee={pickup_location:i.pickup_location.trim(),destination:i.destination.trim(),passenger_count:Number(i.passenger_count)||0,scheduled_at:i.scheduled_at?i.scheduled_at:void 0,event_id:Number(I),vehicle_ids:[...V]};if(R&&de.name.trim()){const Fe=await Gn({event_id:Number(I),name:de.name.trim(),driver:de.driver.trim()||void 0,passenger_capacity:Number(de.passenger_capacity)||0,notes:de.notes.trim()||void 0});V.push(Fe.id),ee.vehicle_ids=[...V]}const De=await Xp(ee);if(ue("Transport route created"),De!=null&&De.id&&I)try{sessionStorage.setItem(`event-schedule-highlight:${I}`,`t-${De.id}`)}catch{}e($?-2:-1)}catch(V){ue(V instanceof Error?V.message:"Failed to create transport")}finally{he(!1)}},Ae=i.pickup_location&&i.destination?`${i.pickup_location}  ${i.destination}`:"",_e=(P,$)=>`${P}::${$}`,Le=o.useMemo(()=>{var Fe;const P=[],$=new Set,V=u.find(re=>re.id===Number(I)),ee=(Fe=V==null?void 0:V.innhopps)!=null&&Fe.length&&Array.isArray(V.innhopps)?V.innhopps.map(re=>({valueKey:_e("Innhopp",`${re.sequence?`#${re.sequence} `:""}${re.name||"Untitled innhopp"}`.trim()),label:`${re.sequence?`#${re.sequence} `:""}${re.name||"Untitled innhopp"}`.trim(),type:"Innhopp"})):[];ee.length&&(ee.forEach(re=>$.add(re.label)),P.push({label:"Innhopps",options:ee}));const De=V&&Array.isArray(V.airfield_ids)?C.filter(re=>V.airfield_ids.includes(re.id)):[];return De.length&&(De.forEach(re=>$.add(re.name||`Airfield #${re.id}`)),P.push({label:"Airfields",options:De.map(re=>({valueKey:_e("Airfield",re.name||`Airfield #${re.id}`),label:re.name||`Airfield #${re.id}`,type:"Airfield"}))})),F.length&&(F.forEach(re=>$.add(re.name||`Accommodation #${re.id}`)),P.push({label:"Accommodations",options:F.map(re=>({valueKey:_e("Accommodation",re.name||`Accommodation #${re.id}`),label:re.name||`Accommodation #${re.id}`,type:"Accommodation"}))})),b.length&&(b.forEach(re=>$.add(re.name||`Other #${re.id}`)),P.push({label:"Other",options:b.map(re=>({valueKey:_e("Other",re.name||`Other #${re.id}`),label:re.name||`Other #${re.id}`,type:"Other"}))})),p.length&&(p.forEach(re=>$.add(re.name||`Meal #${re.id}`)),P.push({label:"Meals",options:p.map(re=>({valueKey:_e("Meal",re.name||`Meal #${re.id}`),label:re.name||`Meal #${re.id}`,type:"Meal"}))})),P},[F,C,u,b,p,I,i.pickup_location,i.destination]);o.useEffect(()=>{let P=!1;return(async()=>{if(!I){v([]),E([]),m([]);return}try{const[V,ee,De]=await Promise.all([cr(Number(I)),Vn(),Wn()]);if(P)return;v(Array.isArray(V)?V:[]),E(Array.isArray(ee)?ee.filter(Fe=>Fe.event_id===Number(I)):[]),m(Array.isArray(De)?De.filter(Fe=>Fe.event_id===Number(I)):[])}catch{P||(v([]),E([]),m([]))}})(),()=>{P=!0}},[I]);const Pe=P=>P.toLowerCase().replace(/^#?\s*\d+\s*/,"").trim(),qe=P=>Le.flatMap(V=>V.options).find(V=>V.valueKey===P),Ye=P=>{var V,ee;const $=Le.flatMap(De=>De.options);return((V=$.find(De=>De.label===P))==null?void 0:V.valueKey)||((ee=$.find(De=>Pe(De.label)===Pe(P)))==null?void 0:ee.valueKey)},Qe=P=>{const $=u.find(Fe=>Fe.id===Number(I)),V=Je($==null?void 0:$.starts_at)||null,ee=Je($==null?void 0:$.ends_at)||null;if(P){const Fe=Je(P);if(Fe)return Fe}const De=new Date;if(V&&ee)return De<V?V:De>ee?ee:De;if(V)return V;if(ee)return ee};return o.useEffect(()=>{if(!i.pickup_location){j("");return}const P=qe(y);if(P&&P.label===i.pickup_location)return;const $=Ye(i.pickup_location);if($&&$!==y){const V=qe($);j($),V&&l(ee=>({...ee,pickup_location:V.label}))}},[Le,i.pickup_location,y]),o.useEffect(()=>{if(!i.destination){k("");return}const P=qe(O);if(P&&P.label===i.destination)return;const $=Ye(i.destination);if($&&$!==O){const V=qe($);k($),V&&l(ee=>({...ee,destination:V.label}))}},[Le,i.destination,O]),r.jsxs("section",{children:[r.jsxs("header",{className:"page-header",children:[r.jsxs("div",{children:[r.jsx("h2",{children:"Create transport route"}),Ae&&r.jsx("p",{children:Ae})]}),r.jsx("button",{className:"ghost",type:"button",onClick:()=>e(-1),children:"Back"})]}),r.jsxs("form",{onSubmit:pe,children:[r.jsx("article",{className:"card",children:r.jsxs("div",{className:"form-grid",children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Event"}),r.jsxs("select",{value:I,onChange:P=>M(P.target.value),required:!0,children:[r.jsx("option",{value:"",children:"Select event"}),u.map(P=>r.jsx("option",{value:P.id,children:P.name},P.id))]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Pickup location"}),r.jsxs("select",{value:y,onChange:P=>{const $=P.target.value;j($);const V=qe($);l(ee=>({...ee,pickup_location:V?V.label:""}))},required:!0,children:[r.jsx("option",{value:"",children:"Select pickup"}),Le.map(P=>P.options.length>0&&r.jsx("optgroup",{label:P.label,children:P.options.map($=>{const V=$.valueKey;return r.jsx("option",{value:V,children:$.label},`${P.label}-${V}`)})},P.label))]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Destination"}),r.jsxs("select",{value:O,onChange:P=>{const $=P.target.value;k($);const V=qe($);l(ee=>({...ee,destination:V?V.label:""}))},required:!0,children:[r.jsx("option",{value:"",children:"Select destination"}),Le.map(P=>P.options.length>0&&r.jsx("optgroup",{label:P.label,children:P.options.map($=>{const V=$.valueKey;return r.jsx("option",{value:V,children:$.label},`${P.label}-${V}`)})},P.label))]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Passenger count"}),r.jsx("input",{type:"number",min:0,value:i.passenger_count,onChange:P=>l($=>({...$,passenger_count:P.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Scheduled at"}),r.jsx(Mt,{value:Je(i.scheduled_at),options:{enableTime:!0,dateFormat:"Y-m-d H:i",time_24hr:!0,defaultDate:Qe(i.scheduled_at)},onChange:P=>{const $=P[0];l(V=>({...V,scheduled_at:$?Bt($):""}))}})]})]})}),r.jsx("article",{className:"card",children:r.jsxs("div",{className:"form-field",style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Vehicles"}),X.length>0&&r.jsx("ul",{className:"status-list",style:{marginTop:"0.5rem"},children:X.map(P=>{const $=x.find(V=>V.id===P);return $?r.jsx("li",{children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",justifyContent:"space-between",width:"100%"},children:[r.jsxs(et,{to:`/logistics/vehicles/${$.id}`,className:"card-link",style:{flex:1,textDecoration:"none"},children:[r.jsx("strong",{children:$.name}),r.jsxs("div",{className:"muted",children:[$.driver?`Driver: ${$.driver}  `:"","Capacity: ",$.passenger_capacity]}),$.notes&&r.jsxs("div",{className:"muted",children:["Notes: ",$.notes]})]}),r.jsx("button",{type:"button",className:"ghost danger",onClick:()=>ne(P),children:"Remove"})]})},P):null})}),x.length>0&&r.jsx("div",{className:"form-grid",style:{marginTop:"0.5rem"},children:r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Add vehicle"}),r.jsx("div",{className:"form-actions",style:{gap:"0.5rem",alignItems:"center"},children:r.jsxs("select",{value:"",onChange:P=>{const $=Number(P.target.value);$&&(X.includes($)||se(V=>[...V,$]))},children:[r.jsx("option",{value:"",children:"Choose vehicle"}),x.filter(P=>P.event_id===Number(I)).map(P=>r.jsxs("option",{value:P.id,children:[P.name," ",P.driver?`(${P.driver})`:"","  ",P.passenger_capacity," pax"]},P.id))]})})]})}),r.jsx("div",{className:"form-actions",style:{marginTop:"0.5rem",justifyContent:"flex-start",marginLeft:"-1.5rem"},children:r.jsx("button",{type:"button",className:"ghost",onClick:Z,children:"Create new vehicle"})}),R&&r.jsxs("div",{className:"form-grid",style:{marginTop:"0.5rem"},children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Vehicle name"}),r.jsx("input",{type:"text",value:de.name,onChange:P=>Ne($=>({...$,name:P.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Driver"}),r.jsx("input",{type:"text",value:de.driver,onChange:P=>Ne($=>({...$,driver:P.target.value}))})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Passenger capacity"}),r.jsx("input",{type:"number",min:0,value:de.passenger_capacity,onChange:P=>Ne($=>({...$,passenger_capacity:P.target.value}))})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Notes"}),r.jsx("input",{type:"text",value:de.notes,onChange:P=>Ne($=>({...$,notes:P.target.value}))})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"button",className:"primary",onClick:oe,children:"Save vehicle"}),r.jsx("button",{type:"button",className:"ghost",onClick:()=>{ae(!1),Ne({name:"",driver:"",passenger_capacity:"",notes:""})},children:"Cancel"})]})]})]})}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"submit",className:"primary",disabled:me,children:me?"Creating":"Create transport"}),we&&r.jsx("span",{className:"muted",children:we})]})]})]})},ns=e=>!!e&&e.trim().length>0,si=e=>e.replace(/^#\s*\d+\s*/,"").trim().toLowerCase(),k0=()=>{const{transportId:e}=Tn(),n=gt(),[t,s]=o.useState({pickup_location:"",destination:"",passenger_count:"",scheduled_at:"",notes:""}),[a,i]=o.useState(!1),[l,u]=o.useState(""),[d,x]=o.useState(!1),[_,C]=o.useState([]),[N,F]=o.useState([]),[v,b]=o.useState([]),[E,p]=o.useState([]),[m,y]=o.useState([]),[j,O]=o.useState([]),[k,I]=o.useState([]),[M,X]=o.useState(""),[se,R]=o.useState(!0),[ae,de]=o.useState(!1),[Ne,me]=o.useState(null),[he,we]=o.useState([]),[ue,ge]=o.useState(!1),[fe,Y]=o.useState({name:"",driver:"",passenger_capacity:"",notes:""}),Z=o.useRef(!0),[ne,oe]=o.useState(""),[pe,Ae]=o.useState(""),_e=`primary ${a?"saved":""}`,Le=ae?"Saving":a?"Saved":"Save",Pe=()=>{a&&i(!1)};o.useEffect(()=>{let f=!1;return(async()=>{if(e){R(!0),me(null);try{Z.current=!0;const z=await Gp(Number(e)),[W,Re,$e,D,K,h]=await Promise.all([$t(),$a(),Pr(),z.event_id?cr(z.event_id):Promise.resolve([]),Vn(),Wn()]);if(f)return;C(Array.isArray(W)?W:[]),F(Array.isArray(Re)?Re:[]),y(Array.isArray($e)?$e:[]),p(Array.isArray(D)?D:[]),O(Array.isArray(K)?K.filter(U=>U.event_id===z.event_id):[]),I(Array.isArray(h)?h.filter(U=>U.event_id===z.event_id):[]),b(Array.isArray(z.vehicles)?z.vehicles:[]);const g=(()=>{if(z.scheduled_at)return z.scheduled_at;const U=W.find(le=>le.id===z.event_id);if(U!=null&&U.starts_at){const le=ft(U.starts_at);if(le)return le.setUTCHours(9,0,0,0),le.toISOString()}return""})();s({pickup_location:z.pickup_location,destination:z.destination,passenger_count:String(z.passenger_count),scheduled_at:g,notes:z.notes||""}),u(z.notes||""),x(!1),X(String(z.event_id||""));const L=Array.isArray(z.vehicles)&&z.vehicles.length>0?z.vehicles.map(U=>{if(typeof U.event_vehicle_id=="number")return U.event_vehicle_id;if(typeof U.id=="number")return U.id}).filter(U=>typeof U=="number"):[];we(L),i(!1)}catch(z){f||me(z instanceof Error?z.message:"Failed to load transport")}finally{f||R(!1)}}})(),()=>{f=!0}},[e]);const qe=()=>{Pe(),ge(!0),Y({name:"",driver:"",passenger_capacity:"",notes:""})},Ye=f=>{we(w=>w.filter(z=>z!==f)),b(w=>w.filter((z,W)=>!(z.event_vehicle_id===f||z.id&&typeof z.id=="number"&&z.id===f||!z.event_vehicle_id&&!z.id&&W===f))),Pe()};o.useEffect(()=>{if(Z.current){Z.current=!1;return}if(x(!1),we([]),ge(!1),oe(""),Ae(""),s(f=>({...f,pickup_location:"",destination:"",notes:""})),i(!1),M?Promise.all([cr(Number(M)),Vn(),Wn()]).then(([f,w,z])=>{p(Array.isArray(f)?f:[]),O(Array.isArray(w)?w.filter(W=>W.event_id===Number(M)):[]),I(Array.isArray(z)?z.filter(W=>W.event_id===Number(M)):[])}).catch(()=>{p([]),O([]),I([])}):(p([]),O([]),I([])),!t.scheduled_at&&M){const f=_.find(w=>w.id===Number(M));if(f!=null&&f.starts_at){const w=ft(f.starts_at);w&&(w.setUTCHours(9,0,0,0),s(z=>({...z,scheduled_at:w.toISOString()})))}}},[M]);const Qe=f=>{const w=si(f||"");if(!w)return null;const z=E.find($e=>si($e.name||"")===w);if(z!=null&&z.coordinates)return z.coordinates;const W=j.find($e=>si($e.name||"")===w);if(W!=null&&W.coordinates)return W.coordinates;const Re=m.find($e=>si($e.name||"")===w);return Re!=null&&Re.coordinates?Re.coordinates:null},Q=(f,w,z)=>`${f}#${w??z}`,P=f=>f.toLowerCase().replace(/^#?\s*\d+\s*/,"").trim(),$=(()=>{var z;const f=[],w=_.find(W=>W.id===Number(M));return(z=w==null?void 0:w.innhopps)!=null&&z.length&&w.innhopps.forEach(W=>{const Re=`${W.sequence?`#${W.sequence} `:""}${W.name}`;f.push({label:Re,valueKey:Q("Innhopp",W.id,Re),type:"Innhopp",coordinates:W.coordinates||null,detailUrl:w?`/events/${w.id}/innhopps/${W.id}`:void 0})}),w&&Array.isArray(w.airfield_ids)&&w.airfield_ids.length&&m.length&&m.filter(W=>w.airfield_ids.includes(W.id)).forEach(W=>{f.push({label:W.name,valueKey:Q("Airfield",W.id,W.name),type:"Airfield",coordinates:W.coordinates||null,detailUrl:`/airfields/${W.id}`})}),E.length&&E.forEach(W=>{f.push({label:W.name,valueKey:Q("Accommodation",W.id,W.name),type:"Accommodation",coordinates:W.coordinates||null,detailUrl:w?`/events/${w.id}/accommodations/${W.id}`:void 0})}),k.length&&k.forEach(W=>{f.push({label:W.name,valueKey:Q("Meal",W.id,W.name),type:"Meal",coordinates:W.coordinates||null,detailUrl:`/logistics/meals/${W.id}`})}),j.length&&j.forEach(W=>{f.push({label:W.name,valueKey:Q("Other",W.id,W.name),type:"Other",coordinates:W.coordinates||null,detailUrl:`/logistics/others/${W.id}`})}),f})(),V=$.filter(f=>f.valueKey!==ne),ee=f=>$.find(w=>w.valueKey===f),De=f=>{var w,z;return((w=$.find(W=>W.label===f))==null?void 0:w.valueKey)||((z=$.find(W=>P(W.label)===P(f)))==null?void 0:z.valueKey)},Fe=(()=>{const f=ee(ne);return!!f&&ns(f.coordinates)})(),re=(()=>{const f=ee(pe);return!!f&&ns(f.coordinates)})(),st=(()=>{var w;const f=ee(ne);return(w=f==null?void 0:f.coordinates)==null?void 0:w.trim()})(),ht=(()=>{var w;const f=ee(pe);return(w=f==null?void 0:f.coordinates)==null?void 0:w.trim()})(),Dt=(()=>{const f=ee(ne);return f==null?void 0:f.detailUrl})(),Lt=(()=>{const f=ee(pe);return f==null?void 0:f.detailUrl})(),G=async f=>{if(f.preventDefault(),!!e){de(!0),me(null);try{const w={pickup_location:t.pickup_location.trim(),destination:t.destination.trim(),passenger_count:Number(t.passenger_count)||0,scheduled_at:t.scheduled_at?t.scheduled_at:void 0,notes:t.notes.trim()||void 0,event_id:Number(M)},z=he.length>0?[...he]:v.map(W=>W.event_vehicle_id).filter(W=>typeof W=="number");if(w.vehicle_ids=z,ue&&fe.name.trim()){const W=await Gn({event_id:Number(M),name:fe.name.trim(),driver:fe.driver.trim()||void 0,passenger_capacity:Number(fe.passenger_capacity)||0,notes:fe.notes.trim()||void 0});w.vehicle_ids=[...w.vehicle_ids||[],W.id]}await Zp(Number(e),w),me("Transport updated"),i(!0)}catch(w){me(w instanceof Error?w.message:"Failed to update transport")}finally{de(!1)}}},ce=(()=>{const f=Qe(t.pickup_location),w=Qe(t.destination),z=Number(t.passenger_count),W=Number.isFinite(z)&&z>0,Re=Array.isArray(he)&&he.length>0||Array.isArray(v)&&v.length>0;return ns(f)&&ns(w)&&ns(t.scheduled_at)&&W&&Re})(),ye=async()=>{if(e&&window.confirm("Are you sure you want to delete this transport route?"))try{await t0(Number(e)),n(-1)}catch(f){me(f instanceof Error?f.message:"Failed to delete transport")}},We=async()=>{if(!(!M||!fe.name.trim()))try{const f=await Gn({event_id:Number(M),name:fe.name.trim(),driver:fe.driver.trim()||void 0,passenger_capacity:Number(fe.passenger_capacity)||0,notes:fe.notes.trim()||void 0});F(w=>[f,...w]),we(w=>w.includes(f.id)?w:[...w,f.id]),Y({name:"",driver:"",passenger_capacity:"",notes:""}),ge(!1),i(!1)}catch(f){me(f instanceof Error?f.message:"Failed to create vehicle")}};if(o.useEffect(()=>{if(!t.pickup_location){oe("");return}!d&&l&&!t.notes&&s(z=>({...z,notes:l}));const f=ee(ne);if(f&&f.label===t.pickup_location)return;const w=De(t.pickup_location);if(w&&w!==ne){const z=ee(w);oe(w),z&&s(W=>({...W,pickup_location:z.label}))}},[$,t.pickup_location,ne,l,d,t.notes]),o.useEffect(()=>{if(!t.destination){Ae("");return}!d&&l&&!t.notes&&s(z=>({...z,notes:l}));const f=ee(pe);if(f&&f.label===t.destination)return;const w=De(t.destination);if(w&&w!==pe){const z=ee(w);Ae(w),z&&s(W=>({...W,destination:z.label}))}},[$,t.destination,pe,l,d,t.notes]),se)return r.jsx("p",{className:"muted",children:"Loading transport"});const it=t.pickup_location&&t.destination?`${t.pickup_location}  ${t.destination}`:"",Ze=!!(st&&ht),vt=Ze?`https://www.google.com/maps/dir/?api=1&origin=${encodeURIComponent(st)}&destination=${encodeURIComponent(ht)}`:null,ct=t.passenger_count===""||Number.isNaN(Number(t.passenger_count)),It=!ns(t.scheduled_at),Ut=he.length===0&&v.length===0,Xe=f=>{const w=_.find($e=>$e.id===Number(M)),z=Je(w==null?void 0:w.starts_at)||null,W=Je(w==null?void 0:w.ends_at)||null;if(f){const $e=Je(f);if($e)return $e}const Re=new Date;if(z&&W)return Re<z?z:Re>W?W:Re;if(z)return z;if(W)return W};return r.jsxs("section",{children:[r.jsxs("header",{className:"page-header",children:[r.jsxs("div",{children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flexWrap:"wrap"},children:[r.jsx("h2",{style:{margin:0},children:it||"Transport Route"}),r.jsx("span",{className:`badge ${ce?"success":"danger"}`,"aria-label":ce?"Complete":"Missing info",title:ce?"Complete":"Missing info",style:{minWidth:"2.4ch",textAlign:"center"},children:ce?"":"!"})]}),it&&r.jsx("p",{children:r.jsx("button",{type:"button",className:"link-button",style:{fontSize:"1.25em"},disabled:!Ze,onClick:()=>{vt&&window.open(vt,"_blank")},children:"Open route in Maps"})})]}),r.jsxs("div",{className:"card-actions",children:[r.jsx("button",{className:"ghost",type:"button",onClick:()=>n("/logistics/new",{state:{copyTransport:{event_id:M,pickup_location:t.pickup_location,destination:t.destination,passenger_count:t.passenger_count,scheduled_at:t.scheduled_at,notes:t.notes,vehicle_ids:he,vehicles:v.map(f=>({event_vehicle_id:f.event_vehicle_id,name:f.name,driver:f.driver,passenger_capacity:f.passenger_capacity,notes:f.notes}))}}}),children:"Make a copy"}),r.jsx("button",{className:"ghost",type:"button",onClick:()=>n(-1),children:"Back"}),r.jsx("button",{className:"ghost danger",type:"button",onClick:ye,children:"Delete route"})]})]}),r.jsxs("form",{onSubmit:G,children:[r.jsxs("article",{className:"card",children:[r.jsxs("div",{className:"form-grid",children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Event"}),r.jsxs("div",{className:"input-with-button",children:[r.jsxs("select",{value:M,onChange:f=>{X(f.target.value),Pe()},required:!0,style:{flex:1,minWidth:0},children:[r.jsx("option",{value:"",children:"Select event"}),_.map(f=>r.jsx("option",{value:f.id,children:f.name},f.id))]}),r.jsx("span",{style:{visibility:"hidden"},children:"Open in Maps"})]})]}),r.jsxs("label",{className:`form-field ${ne&&!Fe?"field-missing":""}`,children:[r.jsx("span",{children:"Pickup location"}),r.jsxs("div",{className:"input-with-button",children:[r.jsxs("select",{value:ne,onChange:f=>{const w=f.target.value;oe(w);const z=ee(w);Pe(),s(W=>({...W,pickup_location:z?z.label:""}))},required:!0,style:{flex:1,minWidth:0},children:[r.jsx("option",{value:"",children:"Select pickup"}),$.filter(f=>f.type==="Innhopp"&&f.valueKey!==pe).length>0&&r.jsx("optgroup",{label:"Innhopps",children:$.filter(f=>f.type==="Innhopp"&&f.valueKey!==pe).map(f=>r.jsx("option",{value:f.valueKey,children:f.label},`inn-${f.valueKey}`))}),$.filter(f=>f.type==="Airfield"&&f.valueKey!==pe).length>0&&r.jsx("optgroup",{label:"Airfields",children:$.filter(f=>f.type==="Airfield"&&f.valueKey!==pe).map(f=>r.jsx("option",{value:f.valueKey,children:f.label},`af-${f.valueKey}`))}),$.filter(f=>f.type==="Accommodation"&&f.valueKey!==pe).length>0&&r.jsx("optgroup",{label:"Accommodations",children:$.filter(f=>f.type==="Accommodation"&&f.valueKey!==pe).map(f=>r.jsx("option",{value:f.valueKey,children:f.label},`acc-${f.valueKey}`))}),$.filter(f=>f.type==="Meal"&&f.valueKey!==pe).length>0&&r.jsx("optgroup",{label:"Meals",children:$.filter(f=>f.type==="Meal"&&f.valueKey!==pe).map(f=>r.jsx("option",{value:f.valueKey,children:f.label},`meal-${f.valueKey}`))}),$.filter(f=>f.type==="Other"&&f.valueKey!==pe).length>0&&r.jsx("optgroup",{label:"Other",children:$.filter(f=>f.type==="Other"&&f.valueKey!==pe).map(f=>r.jsx("option",{value:f.valueKey,children:f.label},`other-${f.valueKey}`))})]}),r.jsx("button",{type:"button",className:"ghost",disabled:!st&&!Dt,onClick:()=>{st?window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(st)}`,"_blank"):Dt&&n(Dt)},children:st?"Open in Maps":"Update location"})]})]}),r.jsxs("label",{className:`form-field ${pe&&!re?"field-missing":""}`,children:[r.jsx("span",{children:"Destination"}),r.jsxs("div",{className:"input-with-button",children:[r.jsxs("select",{value:pe,onChange:f=>{const w=f.target.value;Ae(w);const z=ee(w);Pe(),s(W=>({...W,destination:z?z.label:""}))},required:!0,style:{flex:1,minWidth:0},children:[r.jsx("option",{value:"",children:"Select destination"}),V.filter(f=>f.type==="Innhopp").length>0&&r.jsx("optgroup",{label:"Innhopps",children:V.filter(f=>f.type==="Innhopp"&&f.valueKey!==ne).map(f=>r.jsx("option",{value:f.valueKey,children:f.label},`inn-d-${f.valueKey}`))}),V.filter(f=>f.type==="Airfield").length>0&&r.jsx("optgroup",{label:"Airfields",children:V.filter(f=>f.type==="Airfield"&&f.valueKey!==ne).map(f=>r.jsx("option",{value:f.valueKey,children:f.label},`af-d-${f.valueKey}`))}),V.filter(f=>f.type==="Accommodation").length>0&&r.jsx("optgroup",{label:"Accommodations",children:V.filter(f=>f.type==="Accommodation"&&f.valueKey!==ne).map(f=>r.jsx("option",{value:f.valueKey,children:f.label},`acc-d-${f.valueKey}`))}),V.filter(f=>f.type==="Meal").length>0&&r.jsx("optgroup",{label:"Meals",children:V.filter(f=>f.type==="Meal"&&f.valueKey!==ne).map(f=>r.jsx("option",{value:f.valueKey,children:f.label},`meal-dest-${f.valueKey}`))}),V.filter(f=>f.type==="Other").length>0&&r.jsx("optgroup",{label:"Other",children:V.filter(f=>f.type==="Other"&&f.valueKey!==ne).map(f=>r.jsx("option",{value:f.valueKey,children:f.label},`other-dest-${f.valueKey}`))})]}),r.jsx("button",{type:"button",className:"ghost",disabled:!ht&&!Lt,onClick:()=>{ht?window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(ht)}`,"_blank"):Lt&&n(Lt)},children:ht?"Open in Maps":"Update location"})]})]}),r.jsx("div",{className:"form-field",style:{gridColumn:"1 / -1",padding:0},children:r.jsxs("div",{className:"form-grid",style:{gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",gap:"0.75rem"},children:[r.jsxs("label",{className:`form-field ${ct?"field-missing":""}`,style:{margin:0},children:[r.jsx("span",{children:"Passenger count"}),r.jsx("input",{type:"number",min:0,value:t.passenger_count,onChange:f=>{Pe(),s(w=>({...w,passenger_count:f.target.value}))},required:!0})]}),r.jsxs("label",{className:`form-field ${It?"field-missing":""}`,style:{margin:0},children:[r.jsx("span",{children:"Scheduled at"}),r.jsx(Mt,{value:Je(t.scheduled_at),options:{enableTime:!0,dateFormat:"Y-m-d H:i",time_24hr:!0,defaultDate:Xe(t.scheduled_at)},onChange:f=>{const w=f[0];Pe(),s(z=>({...z,scheduled_at:w?Bt(w):""}))}})]})]})})]}),r.jsx("div",{className:"form-actions",style:{marginTop:"0.5rem"},children:r.jsx("button",{type:"submit",className:_e,disabled:ae||a,children:Le})})]}),r.jsx("article",{className:"card",children:r.jsxs("div",{className:`form-field ${Ut?"field-missing":""}`,style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Vehicles"}),(()=>{const f=he.length>0?he.reduce((w,z)=>{const W=N.find($e=>$e.id===z);if(W)return w.push({id:z,name:W.name,driver:W.driver,passenger_capacity:W.passenger_capacity,notes:W.notes,removable:!0}),w;const Re=v.find($e=>$e.event_vehicle_id===z||$e.id&&typeof $e.id=="number"&&$e.id===z);return Re&&w.push({id:z,name:Re.name,driver:Re.driver,passenger_capacity:Re.passenger_capacity,notes:Re.notes,removable:!0}),w},[]):[];return f.length===0&&v.length>0&&v.forEach((w,z)=>{const W=typeof w.event_vehicle_id=="number"?w.event_vehicle_id:w.id&&typeof w.id=="number"?w.id:z;f.push({id:W,name:w.name,driver:w.driver,passenger_capacity:w.passenger_capacity,notes:w.notes,removable:typeof w.event_vehicle_id=="number"||typeof w.id=="number"})}),f.length===0?null:r.jsx("ul",{className:"status-list",style:{marginTop:"0.5rem"},children:f.map((w,z)=>r.jsx("li",{children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",justifyContent:"space-between",width:"100%"},children:[w.removable?r.jsxs(et,{to:{pathname:`/logistics/vehicles/${w.id}`,search:e?`?transportId=${e}`:void 0},className:"card-link",style:{flex:1},children:[r.jsx("strong",{children:w.name}),r.jsxs("div",{className:"muted",children:[w.driver?`Driver: ${w.driver}  `:"","Capacity: ",w.passenger_capacity]}),w.notes&&r.jsxs("div",{className:"muted",children:["Notes: ",w.notes]})]}):r.jsxs("div",{style:{flex:1},children:[r.jsx("strong",{children:w.name}),r.jsxs("div",{className:"muted",children:[w.driver?`Driver: ${w.driver}  `:"","Capacity: ",w.passenger_capacity]}),w.notes&&r.jsxs("div",{className:"muted",children:["Notes: ",w.notes]})]}),w.removable&&r.jsx("button",{type:"button",className:"ghost danger",onClick:()=>Ye(w.id),children:"Remove"})]})},`${w.id}-${z}`))})})(),N.length>0&&r.jsx("div",{className:"form-grid",style:{marginTop:"0.5rem"},children:r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Add vehicle"}),r.jsx("div",{className:"form-actions",style:{gap:"0.5rem",alignItems:"center"},children:r.jsxs("select",{value:"",onChange:f=>{const w=Number(f.target.value);w&&(he.includes(w)||(Pe(),we(z=>[...z,w])))},children:[r.jsx("option",{value:"",children:"Choose vehicle"}),N.filter(f=>f.event_id===Number(M)).map(f=>r.jsxs("option",{value:f.id,children:[f.name," ",f.driver?`(${f.driver})`:"","  ",f.passenger_capacity," pax"]},f.id))]})})]})}),r.jsx("div",{className:"form-actions",style:{marginTop:"0.5rem",justifyContent:"flex-start",marginLeft:"-1.5rem"},children:r.jsx("button",{type:"button",className:"ghost",onClick:qe,children:"Create new vehicle"})}),ue&&r.jsxs("div",{className:"form-grid",style:{marginTop:"0.5rem"},children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Vehicle name"}),r.jsx("input",{type:"text",value:fe.name,onChange:f=>{Pe(),Y(w=>({...w,name:f.target.value}))},required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Driver"}),r.jsx("input",{type:"text",value:fe.driver,onChange:f=>{Pe(),Y(w=>({...w,driver:f.target.value}))}})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Passenger capacity"}),r.jsx("input",{type:"number",min:0,value:fe.passenger_capacity,onChange:f=>{Pe(),Y(w=>({...w,passenger_capacity:f.target.value}))}})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Notes"}),r.jsx("input",{type:"text",value:fe.notes,onChange:f=>{Pe(),Y(w=>({...w,notes:f.target.value}))}})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"button",className:"primary",onClick:We,children:"Save vehicle"}),r.jsx("button",{type:"button",className:"ghost",onClick:()=>{ge(!1),Y({name:"",driver:"",passenger_capacity:"",notes:""})},children:"Cancel"})]})]}),r.jsx("div",{className:"form-actions",style:{marginTop:"0.5rem"},children:r.jsx("button",{type:"submit",className:_e,disabled:ae||a,children:Le})})]})}),r.jsxs("article",{className:"card",children:[r.jsxs("label",{className:"form-field",style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Notes"}),r.jsx("textarea",{value:t.notes,onChange:f=>{d||x(!0),Pe(),s(w=>({...w,notes:f.target.value}))},rows:3})]}),r.jsx("div",{className:"form-actions",style:{marginTop:"0.5rem"},children:r.jsx("button",{type:"submit",className:_e,disabled:ae||a,children:Le})})]}),Ne&&r.jsx("div",{className:"form-actions",style:{marginTop:"0.5rem"},children:r.jsx("span",{className:"muted",children:Ne})})]})]})},E0=(e,n=!1)=>e?Un(e,{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:n?!1:void 0}):"Not scheduled",A0=()=>{const[e,n]=o.useState([]),[t,s]=o.useState([]),[a,i]=o.useState([]),[l,u]=o.useState(""),[d,x]=o.useState(""),[_,C]=o.useState(""),[N,F]=o.useState(""),[v,b]=o.useState(!0),[E,p]=o.useState(null);o.useEffect(()=>{let j=!1;return(async()=>{b(!0),p(null);try{const[k,I,M]=await Promise.all([Zn(),$t(),Da()]);if(j)return;n(Array.isArray(k)?k:[]),s(Array.isArray(I)?I:[]),i(Array.isArray(M)?M:[])}catch(k){j||p(k instanceof Error?k.message:"Failed to load logistics")}finally{j||b(!1)}})(),()=>{j=!0}},[]);const m=o.useMemo(()=>{if(!l)return t;const j=Number(l);return t.filter(O=>O.season_id===j)},[t,l]),y=o.useMemo(()=>a.filter(j=>!(l&&j.season_id!==Number(l)||d&&j.event_id!==Number(d)||_&&!j.pickup_location.toLowerCase().includes(_.toLowerCase())||N&&!j.destination.toLowerCase().includes(N.toLowerCase()))),[a,l,d,_,N]);return r.jsxs("section",{children:[r.jsxs("header",{className:"page-header",children:[r.jsx("div",{children:r.jsx("h2",{children:"Ground Crew"})}),r.jsxs("div",{className:"card-actions",children:[r.jsx(et,{className:"ghost",to:"/logistics",style:{fontWeight:700,fontSize:"1.05rem"},children:"Back to logistics"}),r.jsx(et,{className:"primary button-link",to:"/logistics/ground-crew/new",children:"Create entry"})]})]}),r.jsxs("div",{className:"stack",children:[r.jsx("article",{className:"card",children:r.jsxs("div",{className:"form-grid",style:{gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",alignItems:"end",gap:"0.75rem"},children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Season"}),r.jsxs("select",{value:l,onChange:j=>{u(j.target.value),x("")},style:{width:"100%",minWidth:"180px",maxWidth:"25%"},children:[r.jsx("option",{value:"",children:"All seasons"}),[...e].sort((j,O)=>O.name.localeCompare(j.name)).map(j=>r.jsx("option",{value:j.id,children:j.name},j.id))]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Event"}),r.jsxs("select",{value:d,onChange:j=>x(j.target.value),style:{width:"100%",minWidth:"180px"},children:[r.jsx("option",{value:"",children:"All events"}),m.map(j=>r.jsx("option",{value:j.id,children:j.name},j.id))]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Start location"}),r.jsx("input",{type:"text",value:_,onChange:j=>C(j.target.value),placeholder:"Filter start location"})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Destination"}),r.jsx("input",{type:"text",value:N,onChange:j=>F(j.target.value),placeholder:"Filter destination"})]})]})}),r.jsxs("article",{className:"card",children:[r.jsxs("header",{className:"card-header",children:[r.jsx("div",{children:r.jsx("h3",{children:"Ground crew entries"})}),r.jsxs("span",{className:"badge neutral",children:[y.length," ",y.length===1?"entry":"entries"]})]}),v?r.jsx("p",{className:"muted",children:"Loading ground crew entries"}):E?r.jsx("p",{className:"error-text",children:E}):y.length===0?r.jsx("p",{className:"muted",children:"No ground crew entries match the selected filters."}):r.jsx("ul",{className:"status-list",style:{maxHeight:"24rem",overflowY:"auto"},children:y.map(j=>{var O;return r.jsx("li",{children:r.jsxs(et,{to:`/logistics/ground-crew/${j.id}`,className:"card-link",style:{flex:1},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"0.5rem"},children:[r.jsxs("div",{children:[r.jsxs("strong",{children:[j.pickup_location,"  ",j.destination]}),r.jsx("div",{className:"muted",children:E0(j.scheduled_at)})]}),r.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.35rem",flexShrink:0},children:r.jsx("span",{className:"badge",style:{backgroundColor:"#2b8a3e",color:"#fff"},children:((O=t.find(k=>k.id===j.event_id))==null?void 0:O.name)||`Event #${j.event_id??""}`})})]}),j.vehicles&&j.vehicles.length>0&&r.jsxs("div",{className:"muted",children:["Assigned vehicles:"," ",j.vehicles.map(k=>`${k.name}${k.driver?` (Driver: ${k.driver})`:""}  Cap: ${k.passenger_capacity}`).join("; ")]})]})},j.id)})})]})]})]})},D0=()=>{var Q;const e=gt(),t=(Q=Jt().state)==null?void 0:Q.copyGroundCrew,s=Array.isArray(t==null?void 0:t.vehicles)&&t.vehicles.length?t.vehicles.filter(P=>P&&typeof P.name=="string"&&typeof P.passenger_capacity<"u"):[],a=Array.isArray(t==null?void 0:t.vehicle_ids)?t.vehicle_ids.filter(P=>typeof P=="number"):[],[i,l]=o.useState({pickup_location:(t==null?void 0:t.pickup_location)||"",destination:(t==null?void 0:t.destination)||"",passenger_count:(t==null?void 0:t.passenger_count)??"",scheduled_at:(t==null?void 0:t.scheduled_at)||""}),[u,d]=o.useState([]),[x,_]=o.useState([]),[C,N]=o.useState([]),[F,v]=o.useState([]),[b,E]=o.useState([]),[p,m]=o.useState([]),[y,j]=o.useState(""),[O,k]=o.useState(""),[I,M]=o.useState(t!=null&&t.event_id?String(t.event_id):""),[X,se]=o.useState(a),[R,ae]=o.useState(!1),[de,Ne]=o.useState({name:"",driver:"",passenger_capacity:"",notes:""}),[me,he]=o.useState(!1),[we,ue]=o.useState(null),ge=o.useRef(!0),[fe,Y]=o.useState(s);o.useEffect(()=>{if(!t)return;ge.current=!0,M(t.event_id?String(t.event_id):""),l({pickup_location:t.pickup_location||"",destination:t.destination||"",passenger_count:t.passenger_count??"",scheduled_at:t.scheduled_at||""});const P=s.map(V=>typeof V.event_vehicle_id=="number"?V.event_vehicle_id:void 0).filter(V=>typeof V=="number"),$=a.length>0?a:P;se($),Y(s)},[t]),o.useEffect(()=>{let P=!1;return(async()=>{try{const[V,ee,De]=await Promise.all([$t(),$a(),Pr()]);if(P)return;d(Array.isArray(V)?V:[]),_(Array.isArray(ee)?ee:[]),N(Array.isArray(De)?De:[])}catch{}})(),()=>{P=!0}},[]),o.useEffect(()=>{if(ge.current){ge.current=!1;return}se([]),ae(!1),j(""),k(""),l(P=>({...P,pickup_location:"",destination:""}))},[I]),o.useEffect(()=>{if(!I||i.scheduled_at)return;const P=u.find($=>$.id===Number(I));if(P!=null&&P.starts_at){const $=ft(P.starts_at);$&&($.setUTCHours(9,0,0,0),l(V=>({...V,scheduled_at:$.toISOString()})))}},[I,u,i.scheduled_at]);const Z=()=>{ae(!0),Ne({name:"",driver:"",passenger_capacity:"",notes:""})},ne=P=>{se($=>$.filter(V=>V!==P))},oe=async()=>{if(!(!I||!de.name.trim()))try{const P=await Gn({event_id:Number(I),name:de.name.trim(),driver:de.driver.trim()||void 0,passenger_capacity:Number(de.passenger_capacity)||0,notes:de.notes.trim()||void 0});_($=>[P,...$]),se($=>$.includes(P.id)?$:[...$,P.id]),Ne({name:"",driver:"",passenger_capacity:"",notes:""}),ae(!1)}catch(P){ue(P instanceof Error?P.message:"Failed to create vehicle")}},pe=async P=>{P.preventDefault(),he(!0),ue(null);const $=!!t;try{let V=[...X];if(I){const Fe=fe;if(Fe.length>0){for(const re of Fe){if(re.event_vehicle_id&&!V.includes(re.event_vehicle_id)){V.push(re.event_vehicle_id);continue}if(!re.event_vehicle_id){const st=await Gn({event_id:Number(I),name:re.name,driver:re.driver||"",passenger_capacity:Number(re.passenger_capacity)||0,notes:re.notes||""});V.push(st.id)}}se(V),Y([])}}const ee={pickup_location:i.pickup_location.trim(),destination:i.destination.trim(),passenger_count:Number(i.passenger_count)||0,scheduled_at:i.scheduled_at?i.scheduled_at:void 0,event_id:Number(I),vehicle_ids:[...V]};if(R&&de.name.trim()){const Fe=await Gn({event_id:Number(I),name:de.name.trim(),driver:de.driver.trim()||void 0,passenger_capacity:Number(de.passenger_capacity)||0,notes:de.notes.trim()||void 0});V.push(Fe.id),ee.vehicle_ids=[...V]}const De=await n0(ee);if(ue("Ground crew entry created"),De!=null&&De.id&&I)try{sessionStorage.setItem(`event-schedule-highlight:${I}`,`gc-${De.id}`)}catch{}e($?-2:-1)}catch(V){ue(V instanceof Error?V.message:"Failed to create ground crew")}finally{he(!1)}},Ae=i.pickup_location&&i.destination?`${i.pickup_location}  ${i.destination}`:"",_e=(P,$)=>`${P}::${$}`,Le=o.useMemo(()=>{var Fe;const P=[],$=new Set,V=u.find(re=>re.id===Number(I)),ee=(Fe=V==null?void 0:V.innhopps)!=null&&Fe.length&&Array.isArray(V.innhopps)?V.innhopps.map(re=>({valueKey:_e("Innhopp",`${re.sequence?`#${re.sequence} `:""}${re.name||"Untitled innhopp"}`.trim()),label:`${re.sequence?`#${re.sequence} `:""}${re.name||"Untitled innhopp"}`.trim(),type:"Innhopp"})):[];ee.length&&(ee.forEach(re=>$.add(re.label)),P.push({label:"Innhopps",options:ee}));const De=V&&Array.isArray(V.airfield_ids)?C.filter(re=>V.airfield_ids.includes(re.id)):[];return De.length&&(De.forEach(re=>$.add(re.name||`Airfield #${re.id}`)),P.push({label:"Airfields",options:De.map(re=>({valueKey:_e("Airfield",re.name||`Airfield #${re.id}`),label:re.name||`Airfield #${re.id}`,type:"Airfield"}))})),F.length&&(F.forEach(re=>$.add(re.name||`Accommodation #${re.id}`)),P.push({label:"Accommodations",options:F.map(re=>({valueKey:_e("Accommodation",re.name||`Accommodation #${re.id}`),label:re.name||`Accommodation #${re.id}`,type:"Accommodation"}))})),b.length&&(b.forEach(re=>$.add(re.name||`Other #${re.id}`)),P.push({label:"Other",options:b.map(re=>({valueKey:_e("Other",re.name||`Other #${re.id}`),label:re.name||`Other #${re.id}`,type:"Other"}))})),p.length&&(p.forEach(re=>$.add(re.name||`Meal #${re.id}`)),P.push({label:"Meals",options:p.map(re=>({valueKey:_e("Meal",re.name||`Meal #${re.id}`),label:re.name||`Meal #${re.id}`,type:"Meal"}))})),P},[F,C,u,b,p,I,i.pickup_location,i.destination]);o.useEffect(()=>{let P=!1;return(async()=>{if(!I){v([]),E([]),m([]);return}try{const[V,ee,De]=await Promise.all([cr(Number(I)),Vn(),Wn()]);if(P)return;v(Array.isArray(V)?V:[]),E(Array.isArray(ee)?ee.filter(Fe=>Fe.event_id===Number(I)):[]),m(Array.isArray(De)?De.filter(Fe=>Fe.event_id===Number(I)):[])}catch{P||(v([]),E([]),m([]))}})(),()=>{P=!0}},[I]);const Pe=P=>P.toLowerCase().replace(/^#?\s*\d+\s*/,"").trim(),qe=P=>Le.flatMap(V=>V.options).find(V=>V.valueKey===P),Ye=P=>{var V,ee;const $=Le.flatMap(De=>De.options);return((V=$.find(De=>De.label===P))==null?void 0:V.valueKey)||((ee=$.find(De=>Pe(De.label)===Pe(P)))==null?void 0:ee.valueKey)},Qe=P=>{const $=u.find(Fe=>Fe.id===Number(I)),V=Je($==null?void 0:$.starts_at)||null,ee=Je($==null?void 0:$.ends_at)||null;if(P){const Fe=Je(P);if(Fe)return Fe}const De=new Date;if(V&&ee)return De<V?V:De>ee?ee:De;if(V)return V;if(ee)return ee};return o.useEffect(()=>{if(!i.pickup_location){j("");return}const P=qe(y);if(P&&P.label===i.pickup_location)return;const $=Ye(i.pickup_location);if($&&$!==y){const V=qe($);j($),V&&l(ee=>({...ee,pickup_location:V.label}))}},[Le,i.pickup_location,y]),o.useEffect(()=>{if(!i.destination){k("");return}const P=qe(O);if(P&&P.label===i.destination)return;const $=Ye(i.destination);if($&&$!==O){const V=qe($);k($),V&&l(ee=>({...ee,destination:V.label}))}},[Le,i.destination,O]),r.jsxs("section",{children:[r.jsxs("header",{className:"page-header",children:[r.jsxs("div",{children:[r.jsx("h2",{children:"Create ground crew entry"}),Ae&&r.jsx("p",{children:Ae})]}),r.jsx("button",{className:"ghost",type:"button",onClick:()=>e(-1),children:"Back"})]}),r.jsxs("form",{onSubmit:pe,children:[r.jsx("article",{className:"card",children:r.jsxs("div",{className:"form-grid",children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Event"}),r.jsxs("select",{value:I,onChange:P=>M(P.target.value),required:!0,children:[r.jsx("option",{value:"",children:"Select event"}),u.map(P=>r.jsx("option",{value:P.id,children:P.name},P.id))]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Start location"}),r.jsxs("select",{value:y,onChange:P=>{const $=P.target.value;j($);const V=qe($);l(ee=>({...ee,pickup_location:V?V.label:""}))},required:!0,children:[r.jsx("option",{value:"",children:"Select start location"}),Le.map(P=>P.options.length>0&&r.jsx("optgroup",{label:P.label,children:P.options.map($=>{const V=$.valueKey;return r.jsx("option",{value:V,children:$.label},`${P.label}-${V}`)})},P.label))]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Destination"}),r.jsxs("select",{value:O,onChange:P=>{const $=P.target.value;k($);const V=qe($);l(ee=>({...ee,destination:V?V.label:""}))},required:!0,children:[r.jsx("option",{value:"",children:"Select destination"}),Le.map(P=>P.options.length>0&&r.jsx("optgroup",{label:P.label,children:P.options.map($=>{const V=$.valueKey;return r.jsx("option",{value:V,children:$.label},`${P.label}-${V}`)})},P.label))]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Passenger count"}),r.jsx("input",{type:"number",min:0,value:i.passenger_count,onChange:P=>l($=>({...$,passenger_count:P.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Scheduled at"}),r.jsx(Mt,{value:Je(i.scheduled_at),options:{enableTime:!0,dateFormat:"Y-m-d H:i",time_24hr:!0,defaultDate:Qe(i.scheduled_at)},onChange:P=>{const $=P[0];l(V=>({...V,scheduled_at:$?Bt($):""}))}})]})]})}),r.jsx("article",{className:"card",children:r.jsxs("div",{className:"form-field",style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Vehicles"}),X.length>0&&r.jsx("ul",{className:"status-list",style:{marginTop:"0.5rem"},children:X.map(P=>{const $=x.find(V=>V.id===P);return $?r.jsx("li",{children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",justifyContent:"space-between",width:"100%"},children:[r.jsxs(et,{to:`/logistics/vehicles/${$.id}`,className:"card-link",style:{flex:1,textDecoration:"none"},children:[r.jsx("strong",{children:$.name}),r.jsxs("div",{className:"muted",children:[$.driver?`Driver: ${$.driver}  `:"","Capacity: ",$.passenger_capacity]}),$.notes&&r.jsxs("div",{className:"muted",children:["Notes: ",$.notes]})]}),r.jsx("button",{type:"button",className:"ghost danger",onClick:()=>ne(P),children:"Remove"})]})},P):null})}),x.length>0&&r.jsx("div",{className:"form-grid",style:{marginTop:"0.5rem"},children:r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Add vehicle"}),r.jsx("div",{className:"form-actions",style:{gap:"0.5rem",alignItems:"center"},children:r.jsxs("select",{value:"",onChange:P=>{const $=Number(P.target.value);$&&(X.includes($)||se(V=>[...V,$]))},children:[r.jsx("option",{value:"",children:"Choose vehicle"}),x.filter(P=>P.event_id===Number(I)).map(P=>r.jsxs("option",{value:P.id,children:[P.name," ",P.driver?`(${P.driver})`:"","  ",P.passenger_capacity," pax"]},P.id))]})})]})}),r.jsx("div",{className:"form-actions",style:{marginTop:"0.5rem",justifyContent:"flex-start",marginLeft:"-1.5rem"},children:r.jsx("button",{type:"button",className:"ghost",onClick:Z,children:"Create new vehicle"})}),R&&r.jsxs("div",{className:"form-grid",style:{marginTop:"0.5rem"},children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Vehicle name"}),r.jsx("input",{type:"text",value:de.name,onChange:P=>Ne($=>({...$,name:P.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Driver"}),r.jsx("input",{type:"text",value:de.driver,onChange:P=>Ne($=>({...$,driver:P.target.value}))})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Passenger capacity"}),r.jsx("input",{type:"number",min:0,value:de.passenger_capacity,onChange:P=>Ne($=>({...$,passenger_capacity:P.target.value}))})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Notes"}),r.jsx("input",{type:"text",value:de.notes,onChange:P=>Ne($=>({...$,notes:P.target.value}))})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"button",className:"primary",onClick:oe,children:"Save vehicle"}),r.jsx("button",{type:"button",className:"ghost",onClick:()=>{ae(!1),Ne({name:"",driver:"",passenger_capacity:"",notes:""})},children:"Cancel"})]})]})]})}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"submit",className:"primary",disabled:me,children:me?"Creating":"Create ground crew"}),we&&r.jsx("span",{className:"muted",children:we})]})]})]})},rs=e=>!!e&&e.trim().length>0,ai=e=>e.replace(/^#\s*\d+\s*/,"").trim().toLowerCase(),I0=()=>{const{groundCrewId:e}=Tn(),n=gt(),[t,s]=o.useState({pickup_location:"",destination:"",passenger_count:"",scheduled_at:"",notes:""}),[a,i]=o.useState(!1),[l,u]=o.useState(""),[d,x]=o.useState(!1),[_,C]=o.useState([]),[N,F]=o.useState([]),[v,b]=o.useState([]),[E,p]=o.useState([]),[m,y]=o.useState([]),[j,O]=o.useState([]),[k,I]=o.useState([]),[M,X]=o.useState(""),[se,R]=o.useState(!0),[ae,de]=o.useState(!1),[Ne,me]=o.useState(null),[he,we]=o.useState([]),[ue,ge]=o.useState(!1),[fe,Y]=o.useState({name:"",driver:"",passenger_capacity:"",notes:""}),Z=o.useRef(!0),[ne,oe]=o.useState(""),[pe,Ae]=o.useState(""),_e=`primary ${a?"saved":""}`,Le=ae?"Saving":a?"Saved":"Save",Pe=()=>{a&&i(!1)};o.useEffect(()=>{let f=!1;return(async()=>{if(e){R(!0),me(null);try{Z.current=!0;const z=await eh(Number(e)),[W,Re,$e,D,K,h]=await Promise.all([$t(),$a(),Pr(),z.event_id?cr(z.event_id):Promise.resolve([]),Vn(),Wn()]);if(f)return;C(Array.isArray(W)?W:[]),F(Array.isArray(Re)?Re:[]),y(Array.isArray($e)?$e:[]),p(Array.isArray(D)?D:[]),O(Array.isArray(K)?K.filter(U=>U.event_id===z.event_id):[]),I(Array.isArray(h)?h.filter(U=>U.event_id===z.event_id):[]),b(Array.isArray(z.vehicles)?z.vehicles:[]);const g=(()=>{if(z.scheduled_at)return z.scheduled_at;const U=W.find(le=>le.id===z.event_id);if(U!=null&&U.starts_at){const le=ft(U.starts_at);if(le)return le.setUTCHours(9,0,0,0),le.toISOString()}return""})();s({pickup_location:z.pickup_location,destination:z.destination,passenger_count:String(z.passenger_count),scheduled_at:g,notes:z.notes||""}),u(z.notes||""),x(!1),X(String(z.event_id||""));const L=Array.isArray(z.vehicles)&&z.vehicles.length>0?z.vehicles.map(U=>{if(typeof U.event_vehicle_id=="number")return U.event_vehicle_id;if(typeof U.id=="number")return U.id}).filter(U=>typeof U=="number"):[];we(L),i(!1)}catch(z){f||me(z instanceof Error?z.message:"Failed to load ground crew")}finally{f||R(!1)}}})(),()=>{f=!0}},[e]);const qe=()=>{Pe(),ge(!0),Y({name:"",driver:"",passenger_capacity:"",notes:""})},Ye=f=>{we(w=>w.filter(z=>z!==f)),b(w=>w.filter((z,W)=>!(z.event_vehicle_id===f||z.id&&typeof z.id=="number"&&z.id===f||!z.event_vehicle_id&&!z.id&&W===f))),Pe()};o.useEffect(()=>{if(Z.current){Z.current=!1;return}if(x(!1),we([]),ge(!1),oe(""),Ae(""),s(f=>({...f,pickup_location:"",destination:"",notes:""})),i(!1),M?Promise.all([cr(Number(M)),Vn(),Wn()]).then(([f,w,z])=>{p(Array.isArray(f)?f:[]),O(Array.isArray(w)?w.filter(W=>W.event_id===Number(M)):[]),I(Array.isArray(z)?z.filter(W=>W.event_id===Number(M)):[])}).catch(()=>{p([]),O([]),I([])}):(p([]),O([]),I([])),!t.scheduled_at&&M){const f=_.find(w=>w.id===Number(M));if(f!=null&&f.starts_at){const w=ft(f.starts_at);w&&(w.setUTCHours(9,0,0,0),s(z=>({...z,scheduled_at:w.toISOString()})))}}},[M]);const Qe=f=>{const w=ai(f||"");if(!w)return null;const z=E.find($e=>ai($e.name||"")===w);if(z!=null&&z.coordinates)return z.coordinates;const W=j.find($e=>ai($e.name||"")===w);if(W!=null&&W.coordinates)return W.coordinates;const Re=m.find($e=>ai($e.name||"")===w);return Re!=null&&Re.coordinates?Re.coordinates:null},Q=(f,w,z)=>`${f}#${w??z}`,P=f=>f.toLowerCase().replace(/^#?\s*\d+\s*/,"").trim(),$=(()=>{var z;const f=[],w=_.find(W=>W.id===Number(M));return(z=w==null?void 0:w.innhopps)!=null&&z.length&&w.innhopps.forEach(W=>{const Re=`${W.sequence?`#${W.sequence} `:""}${W.name}`;f.push({label:Re,valueKey:Q("Innhopp",W.id,Re),type:"Innhopp",coordinates:W.coordinates||null,detailUrl:w?`/events/${w.id}/innhopps/${W.id}`:void 0})}),w&&Array.isArray(w.airfield_ids)&&w.airfield_ids.length&&m.length&&m.filter(W=>w.airfield_ids.includes(W.id)).forEach(W=>{f.push({label:W.name,valueKey:Q("Airfield",W.id,W.name),type:"Airfield",coordinates:W.coordinates||null,detailUrl:`/airfields/${W.id}`})}),E.length&&E.forEach(W=>{f.push({label:W.name,valueKey:Q("Accommodation",W.id,W.name),type:"Accommodation",coordinates:W.coordinates||null,detailUrl:w?`/events/${w.id}/accommodations/${W.id}`:void 0})}),k.length&&k.forEach(W=>{f.push({label:W.name,valueKey:Q("Meal",W.id,W.name),type:"Meal",coordinates:W.coordinates||null,detailUrl:`/logistics/meals/${W.id}`})}),j.length&&j.forEach(W=>{f.push({label:W.name,valueKey:Q("Other",W.id,W.name),type:"Other",coordinates:W.coordinates||null,detailUrl:`/logistics/others/${W.id}`})}),f})(),V=$.filter(f=>f.valueKey!==ne),ee=f=>$.find(w=>w.valueKey===f),De=f=>{var w,z;return((w=$.find(W=>W.label===f))==null?void 0:w.valueKey)||((z=$.find(W=>P(W.label)===P(f)))==null?void 0:z.valueKey)},Fe=(()=>{const f=ee(ne);return!!f&&rs(f.coordinates)})(),re=(()=>{const f=ee(pe);return!!f&&rs(f.coordinates)})(),st=(()=>{var w;const f=ee(ne);return(w=f==null?void 0:f.coordinates)==null?void 0:w.trim()})(),ht=(()=>{var w;const f=ee(pe);return(w=f==null?void 0:f.coordinates)==null?void 0:w.trim()})(),Dt=(()=>{const f=ee(ne);return f==null?void 0:f.detailUrl})(),Lt=(()=>{const f=ee(pe);return f==null?void 0:f.detailUrl})(),G=async f=>{if(f.preventDefault(),!!e){de(!0),me(null);try{const w={pickup_location:t.pickup_location.trim(),destination:t.destination.trim(),passenger_count:Number(t.passenger_count)||0,scheduled_at:t.scheduled_at?t.scheduled_at:void 0,notes:t.notes.trim()||void 0,event_id:Number(M)},z=he.length>0?[...he]:v.map(W=>W.event_vehicle_id).filter(W=>typeof W=="number");if(w.vehicle_ids=z,ue&&fe.name.trim()){const W=await Gn({event_id:Number(M),name:fe.name.trim(),driver:fe.driver.trim()||void 0,passenger_capacity:Number(fe.passenger_capacity)||0,notes:fe.notes.trim()||void 0});w.vehicle_ids=[...w.vehicle_ids||[],W.id]}await th(Number(e),w),me("Ground crew updated"),i(!0)}catch(w){me(w instanceof Error?w.message:"Failed to update ground crew")}finally{de(!1)}}},ce=(()=>{const f=Qe(t.pickup_location),w=Qe(t.destination),z=Number(t.passenger_count),W=Number.isFinite(z)&&z>0,Re=Array.isArray(he)&&he.length>0||Array.isArray(v)&&v.length>0;return rs(f)&&rs(w)&&rs(t.scheduled_at)&&W&&Re})(),ye=async()=>{if(e&&window.confirm("Are you sure you want to delete this ground crew entry?"))try{await r0(Number(e)),n(-1)}catch(f){me(f instanceof Error?f.message:"Failed to delete ground crew")}},We=async()=>{if(!(!M||!fe.name.trim()))try{const f=await Gn({event_id:Number(M),name:fe.name.trim(),driver:fe.driver.trim()||void 0,passenger_capacity:Number(fe.passenger_capacity)||0,notes:fe.notes.trim()||void 0});F(w=>[f,...w]),we(w=>w.includes(f.id)?w:[...w,f.id]),Y({name:"",driver:"",passenger_capacity:"",notes:""}),ge(!1),i(!1)}catch(f){me(f instanceof Error?f.message:"Failed to create vehicle")}};if(o.useEffect(()=>{if(!t.pickup_location){oe("");return}!d&&l&&!t.notes&&s(z=>({...z,notes:l}));const f=ee(ne);if(f&&f.label===t.pickup_location)return;const w=De(t.pickup_location);if(w&&w!==ne){const z=ee(w);oe(w),z&&s(W=>({...W,pickup_location:z.label}))}},[$,t.pickup_location,ne,l,d,t.notes]),o.useEffect(()=>{if(!t.destination){Ae("");return}!d&&l&&!t.notes&&s(z=>({...z,notes:l}));const f=ee(pe);if(f&&f.label===t.destination)return;const w=De(t.destination);if(w&&w!==pe){const z=ee(w);Ae(w),z&&s(W=>({...W,destination:z.label}))}},[$,t.destination,pe,l,d,t.notes]),se)return r.jsx("p",{className:"muted",children:"Loading ground crew"});const it=t.pickup_location&&t.destination?`${t.pickup_location}  ${t.destination}`:"",Ze=!!(st&&ht),vt=Ze?`https://www.google.com/maps/dir/?api=1&origin=${encodeURIComponent(st)}&destination=${encodeURIComponent(ht)}`:null,ct=t.passenger_count===""||Number.isNaN(Number(t.passenger_count)),It=!rs(t.scheduled_at),Ut=he.length===0&&v.length===0,Xe=f=>{const w=_.find($e=>$e.id===Number(M)),z=Je(w==null?void 0:w.starts_at)||null,W=Je(w==null?void 0:w.ends_at)||null;if(f){const $e=Je(f);if($e)return $e}const Re=new Date;if(z&&W)return Re<z?z:Re>W?W:Re;if(z)return z;if(W)return W};return r.jsxs("section",{children:[r.jsxs("header",{className:"page-header",children:[r.jsxs("div",{children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flexWrap:"wrap"},children:[r.jsx("h2",{style:{margin:0},children:it||"Ground Crew Entry"}),r.jsx("span",{className:`badge ${ce?"success":"danger"}`,"aria-label":ce?"Complete":"Missing info",title:ce?"Complete":"Missing info",style:{minWidth:"2.4ch",textAlign:"center"},children:ce?"":"!"})]}),it&&r.jsx("p",{children:r.jsx("button",{type:"button",className:"link-button",style:{fontSize:"1.25em"},disabled:!Ze,onClick:()=>{vt&&window.open(vt,"_blank")},children:"Open route in Maps"})})]}),r.jsxs("div",{className:"card-actions",children:[r.jsx("button",{className:"ghost",type:"button",onClick:()=>n("/logistics/ground-crew/new",{state:{copyGroundCrew:{event_id:M,pickup_location:t.pickup_location,destination:t.destination,passenger_count:t.passenger_count,scheduled_at:t.scheduled_at,notes:t.notes,vehicle_ids:he,vehicles:v.map(f=>({event_vehicle_id:f.event_vehicle_id,name:f.name,driver:f.driver,passenger_capacity:f.passenger_capacity,notes:f.notes}))}}}),children:"Make a copy"}),r.jsx("button",{className:"ghost",type:"button",onClick:()=>n(-1),children:"Back"}),r.jsx("button",{className:"ghost danger",type:"button",onClick:ye,children:"Delete route"})]})]}),r.jsxs("form",{onSubmit:G,children:[r.jsxs("article",{className:"card",children:[r.jsxs("div",{className:"form-grid",children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Event"}),r.jsxs("div",{className:"input-with-button",children:[r.jsxs("select",{value:M,onChange:f=>{X(f.target.value),Pe()},required:!0,style:{flex:1,minWidth:0},children:[r.jsx("option",{value:"",children:"Select event"}),_.map(f=>r.jsx("option",{value:f.id,children:f.name},f.id))]}),r.jsx("span",{style:{visibility:"hidden"},children:"Open in Maps"})]})]}),r.jsxs("label",{className:`form-field ${ne&&!Fe?"field-missing":""}`,children:[r.jsx("span",{children:"Start location"}),r.jsxs("div",{className:"input-with-button",children:[r.jsxs("select",{value:ne,onChange:f=>{const w=f.target.value;oe(w);const z=ee(w);Pe(),s(W=>({...W,pickup_location:z?z.label:""}))},required:!0,style:{flex:1,minWidth:0},children:[r.jsx("option",{value:"",children:"Select start location"}),$.filter(f=>f.type==="Innhopp"&&f.valueKey!==pe).length>0&&r.jsx("optgroup",{label:"Innhopps",children:$.filter(f=>f.type==="Innhopp"&&f.valueKey!==pe).map(f=>r.jsx("option",{value:f.valueKey,children:f.label},`inn-${f.valueKey}`))}),$.filter(f=>f.type==="Airfield"&&f.valueKey!==pe).length>0&&r.jsx("optgroup",{label:"Airfields",children:$.filter(f=>f.type==="Airfield"&&f.valueKey!==pe).map(f=>r.jsx("option",{value:f.valueKey,children:f.label},`af-${f.valueKey}`))}),$.filter(f=>f.type==="Accommodation"&&f.valueKey!==pe).length>0&&r.jsx("optgroup",{label:"Accommodations",children:$.filter(f=>f.type==="Accommodation"&&f.valueKey!==pe).map(f=>r.jsx("option",{value:f.valueKey,children:f.label},`acc-${f.valueKey}`))}),$.filter(f=>f.type==="Meal"&&f.valueKey!==pe).length>0&&r.jsx("optgroup",{label:"Meals",children:$.filter(f=>f.type==="Meal"&&f.valueKey!==pe).map(f=>r.jsx("option",{value:f.valueKey,children:f.label},`meal-${f.valueKey}`))}),$.filter(f=>f.type==="Other"&&f.valueKey!==pe).length>0&&r.jsx("optgroup",{label:"Other",children:$.filter(f=>f.type==="Other"&&f.valueKey!==pe).map(f=>r.jsx("option",{value:f.valueKey,children:f.label},`other-${f.valueKey}`))})]}),r.jsx("button",{type:"button",className:"ghost",disabled:!st&&!Dt,onClick:()=>{st?window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(st)}`,"_blank"):Dt&&n(Dt)},children:st?"Open in Maps":"Update location"})]})]}),r.jsxs("label",{className:`form-field ${pe&&!re?"field-missing":""}`,children:[r.jsx("span",{children:"Destination"}),r.jsxs("div",{className:"input-with-button",children:[r.jsxs("select",{value:pe,onChange:f=>{const w=f.target.value;Ae(w);const z=ee(w);Pe(),s(W=>({...W,destination:z?z.label:""}))},required:!0,style:{flex:1,minWidth:0},children:[r.jsx("option",{value:"",children:"Select destination"}),V.filter(f=>f.type==="Innhopp").length>0&&r.jsx("optgroup",{label:"Innhopps",children:V.filter(f=>f.type==="Innhopp"&&f.valueKey!==ne).map(f=>r.jsx("option",{value:f.valueKey,children:f.label},`inn-d-${f.valueKey}`))}),V.filter(f=>f.type==="Airfield").length>0&&r.jsx("optgroup",{label:"Airfields",children:V.filter(f=>f.type==="Airfield"&&f.valueKey!==ne).map(f=>r.jsx("option",{value:f.valueKey,children:f.label},`af-d-${f.valueKey}`))}),V.filter(f=>f.type==="Accommodation").length>0&&r.jsx("optgroup",{label:"Accommodations",children:V.filter(f=>f.type==="Accommodation"&&f.valueKey!==ne).map(f=>r.jsx("option",{value:f.valueKey,children:f.label},`acc-d-${f.valueKey}`))}),V.filter(f=>f.type==="Meal").length>0&&r.jsx("optgroup",{label:"Meals",children:V.filter(f=>f.type==="Meal"&&f.valueKey!==ne).map(f=>r.jsx("option",{value:f.valueKey,children:f.label},`meal-dest-${f.valueKey}`))}),V.filter(f=>f.type==="Other").length>0&&r.jsx("optgroup",{label:"Other",children:V.filter(f=>f.type==="Other"&&f.valueKey!==ne).map(f=>r.jsx("option",{value:f.valueKey,children:f.label},`other-dest-${f.valueKey}`))})]}),r.jsx("button",{type:"button",className:"ghost",disabled:!ht&&!Lt,onClick:()=>{ht?window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(ht)}`,"_blank"):Lt&&n(Lt)},children:ht?"Open in Maps":"Update location"})]})]}),r.jsx("div",{className:"form-field",style:{gridColumn:"1 / -1",padding:0},children:r.jsxs("div",{className:"form-grid",style:{gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",gap:"0.75rem"},children:[r.jsxs("label",{className:`form-field ${ct?"field-missing":""}`,style:{margin:0},children:[r.jsx("span",{children:"Passenger count"}),r.jsx("input",{type:"number",min:0,value:t.passenger_count,onChange:f=>{Pe(),s(w=>({...w,passenger_count:f.target.value}))},required:!0})]}),r.jsxs("label",{className:`form-field ${It?"field-missing":""}`,style:{margin:0},children:[r.jsx("span",{children:"Scheduled at"}),r.jsx(Mt,{value:Je(t.scheduled_at),options:{enableTime:!0,dateFormat:"Y-m-d H:i",time_24hr:!0,defaultDate:Xe(t.scheduled_at)},onChange:f=>{const w=f[0];Pe(),s(z=>({...z,scheduled_at:w?Bt(w):""}))}})]})]})})]}),r.jsx("div",{className:"form-actions",style:{marginTop:"0.5rem"},children:r.jsx("button",{type:"submit",className:_e,disabled:ae||a,children:Le})})]}),r.jsx("article",{className:"card",children:r.jsxs("div",{className:`form-field ${Ut?"field-missing":""}`,style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Vehicles"}),(()=>{const f=he.length>0?he.reduce((w,z)=>{const W=N.find($e=>$e.id===z);if(W)return w.push({id:z,name:W.name,driver:W.driver,passenger_capacity:W.passenger_capacity,notes:W.notes,removable:!0}),w;const Re=v.find($e=>$e.event_vehicle_id===z||$e.id&&typeof $e.id=="number"&&$e.id===z);return Re&&w.push({id:z,name:Re.name,driver:Re.driver,passenger_capacity:Re.passenger_capacity,notes:Re.notes,removable:!0}),w},[]):[];return f.length===0&&v.length>0&&v.forEach((w,z)=>{const W=typeof w.event_vehicle_id=="number"?w.event_vehicle_id:w.id&&typeof w.id=="number"?w.id:z;f.push({id:W,name:w.name,driver:w.driver,passenger_capacity:w.passenger_capacity,notes:w.notes,removable:typeof w.event_vehicle_id=="number"||typeof w.id=="number"})}),f.length===0?null:r.jsx("ul",{className:"status-list",style:{marginTop:"0.5rem"},children:f.map((w,z)=>r.jsx("li",{children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",justifyContent:"space-between",width:"100%"},children:[w.removable?r.jsxs(et,{to:{pathname:`/logistics/vehicles/${w.id}`,search:e?`?groundCrewId=${e}`:void 0},className:"card-link",style:{flex:1},children:[r.jsx("strong",{children:w.name}),r.jsxs("div",{className:"muted",children:[w.driver?`Driver: ${w.driver}  `:"","Capacity: ",w.passenger_capacity]}),w.notes&&r.jsxs("div",{className:"muted",children:["Notes: ",w.notes]})]}):r.jsxs("div",{style:{flex:1},children:[r.jsx("strong",{children:w.name}),r.jsxs("div",{className:"muted",children:[w.driver?`Driver: ${w.driver}  `:"","Capacity: ",w.passenger_capacity]}),w.notes&&r.jsxs("div",{className:"muted",children:["Notes: ",w.notes]})]}),w.removable&&r.jsx("button",{type:"button",className:"ghost danger",onClick:()=>Ye(w.id),children:"Remove"})]})},`${w.id}-${z}`))})})(),N.length>0&&r.jsx("div",{className:"form-grid",style:{marginTop:"0.5rem"},children:r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Add vehicle"}),r.jsx("div",{className:"form-actions",style:{gap:"0.5rem",alignItems:"center"},children:r.jsxs("select",{value:"",onChange:f=>{const w=Number(f.target.value);w&&(he.includes(w)||(Pe(),we(z=>[...z,w])))},children:[r.jsx("option",{value:"",children:"Choose vehicle"}),N.filter(f=>f.event_id===Number(M)).map(f=>r.jsxs("option",{value:f.id,children:[f.name," ",f.driver?`(${f.driver})`:"","  ",f.passenger_capacity," pax"]},f.id))]})})]})}),r.jsx("div",{className:"form-actions",style:{marginTop:"0.5rem",justifyContent:"flex-start",marginLeft:"-1.5rem"},children:r.jsx("button",{type:"button",className:"ghost",onClick:qe,children:"Create new vehicle"})}),ue&&r.jsxs("div",{className:"form-grid",style:{marginTop:"0.5rem"},children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Vehicle name"}),r.jsx("input",{type:"text",value:fe.name,onChange:f=>{Pe(),Y(w=>({...w,name:f.target.value}))},required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Driver"}),r.jsx("input",{type:"text",value:fe.driver,onChange:f=>{Pe(),Y(w=>({...w,driver:f.target.value}))}})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Passenger capacity"}),r.jsx("input",{type:"number",min:0,value:fe.passenger_capacity,onChange:f=>{Pe(),Y(w=>({...w,passenger_capacity:f.target.value}))}})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Notes"}),r.jsx("input",{type:"text",value:fe.notes,onChange:f=>{Pe(),Y(w=>({...w,notes:f.target.value}))}})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"button",className:"primary",onClick:We,children:"Save vehicle"}),r.jsx("button",{type:"button",className:"ghost",onClick:()=>{ge(!1),Y({name:"",driver:"",passenger_capacity:"",notes:""})},children:"Cancel"})]})]}),r.jsx("div",{className:"form-actions",style:{marginTop:"0.5rem"},children:r.jsx("button",{type:"submit",className:_e,disabled:ae||a,children:Le})})]})}),r.jsxs("article",{className:"card",children:[r.jsxs("label",{className:"form-field",style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Notes"}),r.jsx("textarea",{value:t.notes,onChange:f=>{d||x(!0),Pe(),s(w=>({...w,notes:f.target.value}))},rows:3})]}),r.jsx("div",{className:"form-actions",style:{marginTop:"0.5rem"},children:r.jsx("button",{type:"submit",className:_e,disabled:ae||a,children:Le})})]}),Ne&&r.jsx("div",{className:"form-actions",style:{marginTop:"0.5rem"},children:r.jsx("span",{className:"muted",children:Ne})})]})]})},P0=()=>{const e=gt(),[n,t]=o.useState([]),[s,a]=o.useState([]),[i,l]=o.useState([]),[u,d]=o.useState([]),[x,_]=o.useState([]),[C,N]=o.useState([]),[F,v]=o.useState([]),[b,E]=o.useState([]),[p,m]=o.useState(""),[y,j]=o.useState(""),[O,k]=o.useState(!0),[I,M]=o.useState(null);o.useEffect(()=>{let me=!1;return(async()=>{k(!0),M(null);try{const[we,ue,ge,fe,Y,Z,ne,oe]=await Promise.all([Zn(),$t(),Aa(),Da(),Tp(),$a(),Vn(),Wn()]);if(me)return;t(Array.isArray(we)?we:[]),a(Array.isArray(ue)?ue:[]),l(Array.isArray(ge)?ge:[]),d(Array.isArray(fe)?fe:[]),_(Array.isArray(Y)?Y:[]),E(Array.isArray(Z)?Z:[]),N(Array.isArray(ne)?ne:[]),v(Array.isArray(oe)?oe:[])}catch(we){me||M(we instanceof Error?we.message:"Failed to load logistics")}finally{me||k(!1)}})(),()=>{me=!0}},[]);const X=o.useMemo(()=>p?s.filter(me=>me.season_id===Number(p)):s,[s,p]),se=o.useMemo(()=>i.filter(me=>{if(y)return me.event_id===Number(y);if(p){const he=s.find(we=>we.id===me.event_id);return(he==null?void 0:he.season_id)===Number(p)}return!0}),[i,y,p,s]),R=o.useMemo(()=>x.filter(me=>{if(y)return me.event_id===Number(y);if(p){const he=s.find(we=>we.id===me.event_id);return(he==null?void 0:he.season_id)===Number(p)}return!0}),[x,y,p,s]),ae=o.useMemo(()=>u.filter(me=>{if(y)return me.event_id===Number(y);if(p){const he=s.find(we=>we.id===me.event_id);return(he==null?void 0:he.season_id)===Number(p)}return!0}),[u,y,p,s]);o.useMemo(()=>b.filter(me=>{if(y)return me.event_id===Number(y);if(p){const he=s.find(we=>we.id===me.event_id);return(he==null?void 0:he.season_id)===Number(p)}return!0}),[b,y,p,s]);const de=o.useMemo(()=>C.filter(me=>{if(y)return me.event_id===Number(y);if(p){const he=s.find(we=>we.id===me.event_id);return(he==null?void 0:he.season_id)===Number(p)}return!0}),[C,y,p,s]),Ne=o.useMemo(()=>F.filter(me=>{if(y)return me.event_id===Number(y);if(p){const he=s.find(we=>we.id===me.event_id);return(he==null?void 0:he.season_id)===Number(p)}return!0}),[F,y,p,s]);return r.jsxs("section",{className:"stack",children:[r.jsx("header",{className:"page-header",children:r.jsx("div",{children:r.jsx("h2",{children:"Logistics"})})}),r.jsx("article",{className:"card",children:r.jsxs("div",{className:"form-grid",style:{gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",alignItems:"end",gap:"0.75rem"},children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Season"}),r.jsxs("select",{value:p,onChange:me=>{m(me.target.value),j("")},style:{width:"100%",minWidth:"140px",maxWidth:"180px"},children:[r.jsx("option",{value:"",children:"All seasons"}),n.map(me=>r.jsx("option",{value:me.id,children:me.name},me.id))]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Event"}),r.jsxs("select",{value:y,onChange:me=>j(me.target.value),style:{width:"100%",minWidth:"160px"},children:[r.jsx("option",{value:"",children:"All events"}),X.map(me=>r.jsx("option",{value:me.id,children:me.name},me.id))]})]})]})}),I&&r.jsx("p",{className:"error-text",children:I}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",gap:"1rem"},children:[r.jsxs("article",{className:"card clickable",onClick:()=>e("/logistics/transport"),children:[r.jsxs("header",{className:"card-header",children:[r.jsx("h3",{children:"Transport"}),r.jsx("span",{className:"badge neutral",children:se.length})]}),r.jsx("p",{className:"muted",children:"View and manage transport routes."})]}),r.jsxs("article",{className:"card clickable",onClick:()=>e("/logistics/ground-crew"),children:[r.jsxs("header",{className:"card-header",children:[r.jsx("h3",{children:"Ground Crew"}),r.jsx("span",{className:"badge neutral",children:ae.length})]}),r.jsx("p",{className:"muted",children:"View and manage ground crew entries."})]}),r.jsxs("article",{className:"card clickable",onClick:()=>e("/logistics/accommodations"),children:[r.jsxs("header",{className:"card-header",children:[r.jsx("h3",{children:"Accommodations"}),r.jsx("span",{className:"badge neutral",children:R.length})]}),r.jsx("p",{className:"muted",children:"Manage accommodations."})]}),r.jsxs("article",{className:"card clickable",onClick:()=>e("/logistics/meals"),children:[r.jsxs("header",{className:"card-header",children:[r.jsx("h3",{children:"Meals"}),r.jsx("span",{className:"badge neutral",children:Ne.length})]}),r.jsx("p",{className:"muted",children:"Plan meals and service times."})]}),r.jsxs("article",{className:"card clickable",onClick:()=>e("/logistics/others"),children:[r.jsxs("header",{className:"card-header",children:[r.jsx("h3",{children:"Other"}),r.jsx("span",{className:"badge neutral",children:de.length})]}),r.jsx("p",{className:"muted",children:"Activities, other points of Interest, etc."})]})]})]})},Gu=(e,n=!1)=>e?Un(e,{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:n?!1:void 0}):"Not scheduled",T0=()=>{const[e,n]=o.useState([]),[t,s]=o.useState([]),[a,i]=o.useState([]),[l,u]=o.useState(""),[d,x]=o.useState(""),[_,C]=o.useState(!0),[N,F]=o.useState(null);o.useEffect(()=>{let E=!1;return(async()=>{C(!0),F(null);try{const[m,y,j]=await Promise.all([Zn(),$t(),Tp()]);if(E)return;n(Array.isArray(m)?m:[]),s(Array.isArray(y)?y:[]),i(Array.isArray(j)?j:[])}catch(m){E||F(m instanceof Error?m.message:"Failed to load accommodations")}finally{E||C(!1)}})(),()=>{E=!0}},[]);const v=o.useMemo(()=>l?t.filter(E=>E.season_id===Number(l)):t,[t,l]),b=o.useMemo(()=>a.filter(E=>{if(d)return E.event_id===Number(d);if(l){const p=t.find(m=>m.id===E.event_id);return(p==null?void 0:p.season_id)===Number(l)}return!0}),[a,d,l,t]);return r.jsxs("section",{children:[r.jsxs("header",{className:"page-header",children:[r.jsx("div",{children:r.jsx("h2",{children:"Accommodations"})}),r.jsxs("div",{className:"card-actions",style:{gap:"0.5rem"},children:[r.jsx(et,{className:"ghost",to:"/logistics",style:{fontWeight:700,fontSize:"1.05rem"},children:"Back to logistics"}),r.jsx(et,{className:"primary button-link",to:"/logistics/accommodations/new",children:"Create accommodation"})]})]}),r.jsxs("div",{className:"stack",children:[r.jsx("article",{className:"card",children:r.jsxs("div",{className:"form-grid",style:{gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",alignItems:"end",gap:"0.75rem"},children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Season"}),r.jsxs("select",{value:l,onChange:E=>{u(E.target.value),x("")},style:{width:"100%",minWidth:"140px",maxWidth:"180px"},children:[r.jsx("option",{value:"",children:"All seasons"}),e.map(E=>r.jsx("option",{value:E.id,children:E.name},E.id))]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Event"}),r.jsxs("select",{value:d,onChange:E=>x(E.target.value),style:{width:"100%",minWidth:"160px"},children:[r.jsx("option",{value:"",children:"All events"}),v.map(E=>r.jsx("option",{value:E.id,children:E.name},E.id))]})]})]})}),r.jsxs("article",{className:"card",children:[r.jsxs("header",{className:"card-header",children:[r.jsx("div",{children:r.jsx("h3",{children:"Accommodations"})}),r.jsxs("span",{className:"badge neutral",children:[b.length," ",b.length===1?"accommodation":"accommodations"]})]}),_?r.jsx("p",{className:"muted",children:"Loading accommodations"}):N?r.jsx("p",{className:"error-text",children:N}):b.length===0?r.jsx("p",{className:"muted",children:"No accommodations match the selected filters."}):r.jsx("ul",{className:"status-list",style:{maxHeight:"24rem",overflowY:"auto"},children:b.map(E=>{var p,m;return r.jsx("li",{children:r.jsxs(et,{to:`/events/${E.event_id}/accommodations/${E.id}`,className:"card-link",style:{flex:1,display:"flex",flexDirection:"column",gap:"0.25rem"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",gap:"0.75rem"},children:[r.jsx("strong",{children:E.name}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.35rem",flexShrink:0},children:[r.jsx("span",{className:"badge",style:{backgroundColor:"#2b8a3e",color:"#fff"},children:((p=t.find(y=>y.id===E.event_id))==null?void 0:p.name)||`Event #${E.event_id}`}),r.jsx("span",{className:`badge ${E.booked?"success":"danger"}`,children:E.booked?"BOOKED":"NOT BOOKED"})]})]}),r.jsxs("div",{className:"muted",style:{display:"flex",alignItems:"center",gap:"0.35rem",flexWrap:"wrap"},children:[((m=t.find(y=>y.id===E.event_id))==null?void 0:m.name)||`Event #${E.event_id}`,"  Capacity: ",E.capacity,E.check_in_at?`  Check-in: ${Gu(E.check_in_at,!0)}`:"",E.check_out_at?`  Check-out: ${Gu(E.check_out_at,!0)}`:""]})]})},E.id)})})]})]})]})},M0=()=>{const e=gt(),n=Jt(),[t,s]=o.useState([]),[a,i]=o.useState(!0),[l,u]=o.useState(null),[d,x]=o.useState(null),[_,C]=o.useState(null),[N,F]=o.useState(()=>{var m;const p=(m=n.state)==null?void 0:m.copyAccommodation;return{event_id:p!=null&&p.event_id?String(p.event_id):"",name:(p==null?void 0:p.name)||"",capacity:(p==null?void 0:p.capacity)??"",coordinates:(p==null?void 0:p.coordinates)||"",check_in_at:(p==null?void 0:p.check_in_at)||"",check_out_at:(p==null?void 0:p.check_out_at)||"",booked:!!(p!=null&&p.booked),notes:(p==null?void 0:p.notes)||""}}),[v,b]=o.useState(!1);o.useEffect(()=>{let p=!1;return(async()=>{i(!0),u(null);try{const y=await $t();if(p)return;s(Array.isArray(y)?y:[])}catch(y){p||u(y instanceof Error?y.message:"Failed to load events")}finally{p||i(!1)}})(),()=>{p=!0}},[]);const E=async p=>{var m;if(p.preventDefault(),!(!N.event_id||!N.name.trim())){b(!0),x(null);try{const y=await Mp(Number(N.event_id),{name:N.name.trim(),capacity:Number(N.capacity)||0,coordinates:N.coordinates.trim()||void 0,check_in_at:N.check_in_at||void 0,check_out_at:N.check_out_at||void 0,booked:N.booked,notes:N.notes.trim()||void 0});if(C(y.id),x("Accommodation created"),!!((m=n.state)!=null&&m.copyAccommodation)){if(y.id&&N.event_id)try{sessionStorage.setItem(`event-schedule-highlight:${N.event_id}`,`acc-in-${y.id}`)}catch{}e(-2)}else e("/logistics/accommodations",{state:{highlightAccommodationId:y.id}})}catch(y){x(y instanceof Error?y.message:"Failed to create accommodation")}finally{b(!1)}}};return a?r.jsx("p",{className:"muted",children:"Loading"}):l?r.jsx("p",{className:"error-text",children:l}):r.jsxs("section",{className:"stack",children:[r.jsxs("header",{className:"page-header",children:[r.jsx("div",{children:r.jsx("h2",{children:"Create accommodation"})}),r.jsx("div",{className:"card-actions",children:r.jsx("button",{className:"ghost",type:"button",onClick:()=>e("/logistics/accommodations"),children:"Back to accommodations"})})]}),r.jsx("article",{className:"card",children:r.jsxs("form",{className:"form-grid",onSubmit:E,children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Event"}),r.jsxs("select",{value:N.event_id,onChange:p=>F(m=>({...m,event_id:p.target.value})),required:!0,children:[r.jsx("option",{value:"",children:"Select event"}),t.map(p=>r.jsx("option",{value:p.id,children:p.name},p.id))]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Name"}),r.jsx("input",{type:"text",value:N.name,onChange:p=>F(m=>({...m,name:p.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Capacity"}),r.jsx("input",{type:"number",min:0,value:N.capacity,onChange:p=>F(m=>({...m,capacity:p.target.value}))})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Coordinates (DMS)"}),r.jsx("input",{type:"text",value:N.coordinates,onChange:p=>F(m=>({...m,coordinates:p.target.value})),placeholder:`e.g. 915'43"N 7426'08"W`})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Check-in"}),r.jsx(Mt,{value:Je(N.check_in_at),options:{enableTime:!0,dateFormat:"Y-m-d H:i",time_24hr:!0},onChange:p=>{const m=p[0];F(y=>({...y,check_in_at:m?Bt(m):""}))}})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Check-out"}),r.jsx(Mt,{value:Je(N.check_out_at),options:{enableTime:!0,dateFormat:"Y-m-d H:i",time_24hr:!0},onChange:p=>{const m=p[0];F(y=>({...y,check_out_at:m?Bt(m):""}))}})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Booked"}),r.jsxs("div",{className:"checkbox-field",children:[r.jsx("input",{type:"checkbox",checked:N.booked,onChange:p=>F(m=>({...m,booked:p.target.checked}))}),r.jsx("span",{children:"Mark as booked"})]})]}),r.jsxs("label",{className:"form-field",style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Notes"}),r.jsx("input",{type:"text",value:N.notes,onChange:p=>F(m=>({...m,notes:p.target.value}))})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"submit",className:"primary",disabled:v,children:v?"Creating":"Create accommodation"}),d&&r.jsx("span",{className:"muted",children:d})]})]})})]})},O0=e=>e?Un(e,{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1}):"Not scheduled",$0=()=>{var m;const n=(m=Jt().state)==null?void 0:m.highlightMealId,[t,s]=o.useState([]),[a,i]=o.useState([]),[l,u]=o.useState([]),[d,x]=o.useState(""),[_,C]=o.useState(""),[N,F]=o.useState(!0),[v,b]=o.useState(null);o.useEffect(()=>{let y=!1;return(async()=>{F(!0),b(null);try{const[O,k,I]=await Promise.all([Zn(),$t(),Wn()]);if(y)return;s(Array.isArray(O)?O:[]),i(Array.isArray(k)?k:[]),u(Array.isArray(I)?I:[])}catch(O){y||b(O instanceof Error?O.message:"Failed to load meals")}finally{y||F(!1)}})(),()=>{y=!0}},[]);const E=o.useMemo(()=>d?a.filter(y=>y.season_id===Number(d)):a,[a,d]),p=o.useMemo(()=>l.filter(y=>{if(_)return y.event_id===Number(_);if(d){const j=a.find(O=>O.id===y.event_id);return(j==null?void 0:j.season_id)===Number(d)}return!0}),[l,_,d,a]);return r.jsxs("section",{children:[r.jsxs("header",{className:"page-header",children:[r.jsx("div",{children:r.jsx("h2",{children:"Meals"})}),r.jsxs("div",{className:"card-actions",style:{gap:"0.5rem"},children:[r.jsx(et,{className:"ghost",to:"/logistics",style:{fontWeight:700,fontSize:"1.05rem"},children:"Back to logistics"}),r.jsx(et,{className:"primary button-link",to:"/logistics/meals/new",children:"Create meal"})]})]}),r.jsx("article",{className:"card",children:r.jsxs("div",{className:"form-grid",style:{gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",alignItems:"end",gap:"0.75rem"},children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Season"}),r.jsxs("select",{value:d,onChange:y=>{x(y.target.value),C("")},style:{width:"100%",minWidth:"140px",maxWidth:"180px"},children:[r.jsx("option",{value:"",children:"All seasons"}),t.map(y=>r.jsx("option",{value:y.id,children:y.name},y.id))]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Event"}),r.jsxs("select",{value:_,onChange:y=>C(y.target.value),style:{width:"100%",minWidth:"160px"},children:[r.jsx("option",{value:"",children:"All events"}),E.map(y=>r.jsx("option",{value:y.id,children:y.name},y.id))]})]})]})}),r.jsxs("article",{className:"card",children:[r.jsxs("header",{className:"card-header",children:[r.jsx("div",{children:r.jsx("h3",{children:"Meals"})}),r.jsxs("span",{className:"badge neutral",children:[p.length," meals"]})]}),N?r.jsx("p",{className:"muted",children:"Loading meals"}):v?r.jsx("p",{className:"error-text",children:v}):p.length===0?r.jsx("p",{className:"muted",children:"No meals match the selected filters."}):r.jsx("ul",{className:"status-list",style:{maxHeight:"24rem",overflowY:"auto",width:"100%"},children:p.map(y=>{var j;return r.jsx("li",{style:{width:"100%",background:n===y.id?"#e6f4ff":void 0,border:n===y.id?"1px solid #1d7ed8":void 0,borderRadius:n===y.id?"10px":void 0},children:r.jsxs(et,{to:`/logistics/meals/${y.id}`,className:"card-link",style:{display:"flex",flexDirection:"column",gap:"0.15rem",width:"100%"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"0.75rem"},children:[r.jsx("strong",{children:y.name}),r.jsx("span",{className:"badge",style:{backgroundColor:"#2b8a3e",color:"#fff"},children:((j=a.find(O=>O.id===y.event_id))==null?void 0:j.name)||`Event #${y.event_id}`})]}),r.jsxs("div",{className:"muted",style:{display:"flex",gap:"0.35rem",flexWrap:"wrap"},children:[y.location?`Location: ${y.location}`:"Location not set",y.scheduled_at?` ${O0(y.scheduled_at)}`:""]})]})},y.id)})})]})]})},L0=()=>{var j;const e=gt(),t=(j=Jt().state)==null?void 0:j.copyMeal,s=!!t,[a,i]=o.useState([]),[l,u]=o.useState(!0),[d,x]=o.useState(null),[_,C]=o.useState(null),[N,F]=o.useState(null),[v,b]=o.useState({event_id:t!=null&&t.event_id?String(t.event_id):"",name:(t==null?void 0:t.name)||"",location:(t==null?void 0:t.location)||"",scheduled_at:(t==null?void 0:t.scheduled_at)||"",notes:(t==null?void 0:t.notes)||""}),[E,p]=o.useState(!1);o.useEffect(()=>{let O=!1;return(async()=>{u(!0),x(null);try{const I=await $t();O||i(Array.isArray(I)?I:[])}catch(I){O||x(I instanceof Error?I.message:"Failed to load events")}finally{O||u(!1)}})(),()=>{O=!0}},[]);const m=O=>{const k=a.find(se=>se.id===Number(v.event_id)),I=Je(k==null?void 0:k.starts_at)||null,M=Je(k==null?void 0:k.ends_at)||null;if(O){const se=Je(O);if(se)return se}const X=new Date;if(I&&M)return X<I?I:X>M?M:X;if(I)return I;if(M)return M},y=async O=>{if(O.preventDefault(),!(!v.event_id||!v.name.trim())){p(!0),C(null);try{const k=await o0({event_id:Number(v.event_id),name:v.name.trim(),location:v.location.trim()||void 0,scheduled_at:v.scheduled_at||void 0,notes:v.notes.trim()||void 0});F(k),C("Meal created"),s||e("/logistics/meals",{state:{highlightMealId:k.id}})}catch(k){C(k instanceof Error?k.message:"Failed to create meal")}finally{p(!1)}}};return l?r.jsx("p",{className:"muted",children:"Loading"}):d?r.jsx("p",{className:"error-text",children:d}):r.jsxs("section",{className:"stack",children:[r.jsxs("header",{className:"page-header",children:[r.jsx("div",{children:r.jsx("h2",{children:s?"Copy meal":"Create meal"})}),r.jsx("div",{className:"card-actions",children:r.jsx("button",{className:"ghost",type:"button",onClick:()=>{if(s){if(N!=null&&N.id){const O=N.event_id||(v.event_id?Number(v.event_id):void 0);if(O)try{sessionStorage.setItem(`event-schedule-highlight:${O}`,`meal-${N.id}`)}catch{}e(-2)}else e(-2);return}e("/logistics/meals")},children:"Back"})})]}),r.jsx("article",{className:"card",children:r.jsxs("form",{className:"form-grid",onSubmit:y,children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Event"}),r.jsxs("select",{value:v.event_id,onChange:O=>b(k=>({...k,event_id:O.target.value})),required:!0,children:[r.jsx("option",{value:"",children:"Select event"}),a.map(O=>r.jsx("option",{value:O.id,children:O.name},O.id))]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Name"}),r.jsx("input",{type:"text",value:v.name,onChange:O=>b(k=>({...k,name:O.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Location"}),r.jsx("input",{type:"text",value:v.location,onChange:O=>b(k=>({...k,location:O.target.value}))})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Scheduled at"}),r.jsx(Mt,{value:Je(v.scheduled_at),options:{enableTime:!0,dateFormat:"Y-m-d H:i",time_24hr:!0,defaultDate:m(v.scheduled_at)},onChange:O=>{const k=O[0];b(I=>({...I,scheduled_at:k?Bt(k):""}))}})]}),r.jsxs("label",{className:"form-field",style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Notes"}),r.jsx("textarea",{value:v.notes,onChange:O=>b(k=>({...k,notes:O.target.value}))})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"submit",className:"primary",disabled:E,children:E?"Creating":"Create meal"}),_&&r.jsx("span",{className:"muted",children:_})]})]})})]})},Zl=e=>!!e&&e.trim().length>0,F0=()=>{const{mealId:e}=Tn(),n=gt(),[t,s]=o.useState(null),[a,i]=o.useState([]),[l,u]=o.useState({event_id:"",name:"",location:"",scheduled_at:"",notes:""}),[d,x]=o.useState(!0),[_,C]=o.useState(!1),[N,F]=o.useState(!1),[v,b]=o.useState(null),[E,p]=o.useState(null),m=Zl(l.name)&&Zl(l.location)&&Zl(l.scheduled_at),y=k=>{const I=a.find(R=>R.id===Number(l.event_id)),M=Je(I==null?void 0:I.starts_at)||null,X=Je(I==null?void 0:I.ends_at)||null;if(k){const R=Je(k);if(R)return R}const se=new Date;if(M&&X)return se<M?M:se>X?X:se;if(M)return M;if(X)return X};o.useEffect(()=>{let k=!1;return(async()=>{if(e){x(!0),p(null);try{const[M,X]=await Promise.all([sh(Number(e)),$t()]);if(k)return;s(M),i(Array.isArray(X)?X:[]),u({event_id:M.event_id?String(M.event_id):"",name:M.name,location:M.location||"",scheduled_at:M.scheduled_at||"",notes:M.notes||""})}catch(M){k||p(M instanceof Error?M.message:"Failed to load meal")}finally{k||x(!1)}}})(),()=>{k=!0}},[e]);const j=async k=>{if(k.preventDefault(),!(!t||!l.event_id)){C(!0),b(null);try{const I=await ah(t.id,{event_id:Number(l.event_id),name:l.name.trim(),location:l.location.trim()||void 0,scheduled_at:l.scheduled_at||void 0,notes:l.notes.trim()||void 0});s(I),b("Meal updated")}catch(I){b(I instanceof Error?I.message:"Failed to save meal")}finally{C(!1)}}},O=async()=>{if(!(!t||N)&&window.confirm("Delete this meal?")){F(!0),b(null);try{await c0(t.id),n(-1)}catch(k){b(k instanceof Error?k.message:"Failed to delete meal"),F(!1)}}};return d?r.jsx("p",{className:"muted",children:"Loading meal"}):E?r.jsx("p",{className:"error-text",children:E}):t?r.jsxs("section",{className:"stack",children:[r.jsxs("header",{className:"page-header",children:[r.jsxs("div",{children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flexWrap:"wrap"},children:[r.jsx("h2",{style:{margin:0},children:t.name}),r.jsx("span",{className:`badge ${m?"success":"danger"}`,"aria-label":m?"Complete":"Missing info",title:m?"Complete":"Missing info",style:{minWidth:"2.4ch",textAlign:"center"},children:m?"":"!"})]}),t.location&&r.jsx("p",{className:"muted",children:t.location})]}),r.jsxs("div",{className:"card-actions",children:[r.jsx("button",{className:"ghost",type:"button",onClick:()=>n("/logistics/meals/new",{state:{copyMeal:{...t,event_id:t.event_id}}}),children:"Make a copy"}),r.jsx("button",{className:"ghost",type:"button",onClick:()=>n(-1),children:"Back"}),r.jsx("button",{className:"ghost danger",type:"button",onClick:O,disabled:N,children:N?"Deleting":"Delete"})]})]}),r.jsx("article",{className:"card",children:r.jsxs("form",{className:"form-grid",onSubmit:j,children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Event"}),r.jsxs("select",{value:l.event_id,onChange:k=>u(I=>({...I,event_id:k.target.value})),required:!0,children:[r.jsx("option",{value:"",children:"Select event"}),a.map(k=>r.jsx("option",{value:k.id,children:k.name},k.id))]})]}),r.jsxs("label",{className:`form-field ${l.name.trim()?"":"field-missing"}`,children:[r.jsx("span",{children:"Name"}),r.jsx("input",{type:"text",value:l.name,onChange:k=>u(I=>({...I,name:k.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Location"}),r.jsx("input",{type:"text",value:l.location,onChange:k=>u(I=>({...I,location:k.target.value}))})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Scheduled at"}),r.jsx(Mt,{value:Je(l.scheduled_at),options:{enableTime:!0,dateFormat:"Y-m-d H:i",time_24hr:!0,defaultDate:y(l.scheduled_at)},onChange:k=>{const I=k[0];u(M=>({...M,scheduled_at:I?Bt(I):""}))}})]}),r.jsxs("label",{className:"form-field",style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Notes"}),r.jsx("textarea",{value:l.notes,onChange:k=>u(I=>({...I,notes:k.target.value}))})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"submit",className:"primary",disabled:_,children:_?"Saving":"Save"}),v&&r.jsx("span",{className:"muted",children:v})]})]})})]}):r.jsx("p",{className:"error-text",children:"Meal not found."})},R0=e=>e&&Un(e,{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1})||"Unscheduled",z0=()=>{gt();const[e,n]=o.useState([]),[t,s]=o.useState([]),[a,i]=o.useState([]),[l,u]=o.useState(""),[d,x]=o.useState(""),[_,C]=o.useState(!0),[N,F]=o.useState(null);o.useEffect(()=>{let E=!1;return(async()=>{C(!0),F(null);try{const[m,y,j]=await Promise.all([Zn(),$t(),Vn()]);if(E)return;n(Array.isArray(m)?m:[]),s(Array.isArray(y)?y:[]),i(Array.isArray(j)?j:[])}catch(m){E||F(m instanceof Error?m.message:"Failed to load logistics")}finally{E||C(!1)}})(),()=>{E=!0}},[]);const v=o.useMemo(()=>l?t.filter(E=>E.season_id===Number(l)):t,[t,l]),b=o.useMemo(()=>a.filter(E=>{if(d)return E.event_id===Number(d);if(l){const p=t.find(m=>m.id===E.event_id);return(p==null?void 0:p.season_id)===Number(l)}return!0}),[a,d,l,t]);return r.jsxs("section",{className:"stack",children:[r.jsxs("header",{className:"page-header",children:[r.jsx("div",{children:r.jsx("h2",{children:"Other logistics"})}),r.jsxs("div",{className:"card-actions",style:{gap:"0.5rem"},children:[r.jsx(et,{className:"ghost",to:"/logistics",style:{fontWeight:700,fontSize:"1.05rem"},children:"Back to logistics"}),r.jsx(et,{className:"primary button-link",to:"/logistics/others/new",children:"Create entry"})]})]}),r.jsx("article",{className:"card",children:r.jsxs("div",{className:"form-grid",style:{gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",alignItems:"end",gap:"0.75rem"},children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Season"}),r.jsxs("select",{value:l,onChange:E=>{u(E.target.value),x("")},style:{width:"100%",minWidth:"140px",maxWidth:"180px"},children:[r.jsx("option",{value:"",children:"All seasons"}),e.map(E=>r.jsx("option",{value:E.id,children:E.name},E.id))]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Event"}),r.jsxs("select",{value:d,onChange:E=>x(E.target.value),style:{width:"100%",minWidth:"160px"},children:[r.jsx("option",{value:"",children:"All events"}),v.map(E=>r.jsx("option",{value:E.id,children:E.name},E.id))]})]})]})}),r.jsxs("article",{className:"card",children:[r.jsxs("header",{className:"card-header",children:[r.jsx("div",{children:r.jsx("h3",{children:"Other logistics"})}),r.jsxs("span",{className:"badge neutral",children:[b.length," ",b.length===1?"entry":"entries"]})]}),_?r.jsx("p",{className:"muted",children:"Loading"}):N?r.jsx("p",{className:"error-text",children:N}):b.length===0?r.jsx("p",{className:"muted",children:"No entries match the selected filters."}):r.jsx("ul",{className:"status-list",style:{maxHeight:"24rem",overflowY:"auto"},children:b.map(E=>{var p;return r.jsx("li",{style:{width:"100%"},children:r.jsxs(et,{to:`/logistics/others/${E.id}`,className:"card-link",style:{display:"flex",flexDirection:"column",gap:"0.25rem",width:"100%"},children:[r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto",alignItems:"center",gap:"0.75rem"},children:[r.jsx("strong",{children:E.name}),r.jsx("span",{className:"badge",style:{backgroundColor:"#2b8a3e",color:"#fff",justifySelf:"center"},children:E.event_id?((p=t.find(m=>m.id===E.event_id))==null?void 0:p.name)||`Event #${E.event_id}`:"Unassigned"})]}),r.jsx("div",{className:"muted",children:E.scheduled_at?R0(E.scheduled_at):"No date set"}),E.notes&&r.jsxs("div",{className:"muted",children:["Notes: ",E.notes]})]})},E.id)})})]})]})},U0=()=>{const e=gt(),[n,t]=o.useState([]),[s,a]=o.useState({event_id:"",name:"",coordinates:"",scheduled_at:"",description:"",notes:""}),[i,l]=o.useState(!0),[u,d]=o.useState(null),[x,_]=o.useState(!1),[C,N]=o.useState(null);o.useEffect(()=>{let v=!1;return(async()=>{l(!0),d(null);try{const E=await $t();if(v)return;t(Array.isArray(E)?E:[])}catch(E){v||d(E instanceof Error?E.message:"Failed to load events")}finally{v||l(!1)}})(),()=>{v=!0}},[]);const F=async v=>{if(v.preventDefault(),!(!s.name.trim()||!s.event_id)){_(!0),N(null);try{await rd({name:s.name.trim(),coordinates:s.coordinates.trim()||void 0,scheduled_at:s.scheduled_at||void 0,description:s.description.trim()||void 0,notes:s.notes.trim()||void 0,event_id:Number(s.event_id)}),e("/logistics/others")}catch(b){N(b instanceof Error?b.message:"Failed to create entry")}finally{_(!1)}}};return i?r.jsx("p",{className:"muted",children:"Loading"}):u?r.jsx("p",{className:"error-text",children:u}):r.jsxs("section",{className:"stack",children:[r.jsxs("header",{className:"page-header",children:[r.jsx("div",{children:r.jsx("h2",{children:"Create other logistics entry"})}),r.jsx("div",{className:"card-actions",children:r.jsx("button",{className:"ghost",type:"button",onClick:()=>e(-1),style:{fontWeight:700,fontSize:"1.05rem"},children:"Back"})})]}),r.jsx("article",{className:"card",children:r.jsxs("form",{className:"form-grid",onSubmit:F,children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Event"}),r.jsxs("select",{value:s.event_id,onChange:v=>a(b=>({...b,event_id:v.target.value})),required:!0,children:[r.jsx("option",{value:"",children:"Select event"}),n.map(v=>r.jsx("option",{value:v.id,children:v.name},v.id))]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Name"}),r.jsx("input",{type:"text",value:s.name,onChange:v=>a(b=>({...b,name:v.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Coordinates"}),r.jsx("input",{type:"text",value:s.coordinates,onChange:v=>a(b=>({...b,coordinates:v.target.value})),placeholder:"DMS coordinates (optional)"})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Scheduled at"}),r.jsx(Mt,{value:Je(s.scheduled_at),options:{enableTime:!0,dateFormat:"Y-m-d H:i",time_24hr:!0},onChange:v=>{const b=v[0];a(E=>({...E,scheduled_at:b?Bt(b):""}))}})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Description"}),r.jsx("textarea",{value:s.description,onChange:v=>a(b=>({...b,description:v.target.value}))})]}),r.jsxs("label",{className:"form-field",style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Notes"}),r.jsx("input",{type:"text",value:s.notes,onChange:v=>a(b=>({...b,notes:v.target.value}))})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"submit",className:"primary",disabled:x,children:x?"Creating":"Create entry"}),C&&r.jsx("span",{className:"muted",children:C})]})]})})]})},eo=e=>!!e&&e.trim().length>0,V0=()=>{const{otherId:e}=Tn(),n=gt(),[t,s]=o.useState([]),[a,i]=o.useState({event_id:"",name:"",coordinates:"",scheduled_at:"",description:"",notes:""}),[l,u]=o.useState(!0),[d,x]=o.useState(!1),[_,C]=o.useState(!1),[N,F]=o.useState(null),[v,b]=o.useState(!1),E=`primary ${v?"saved":""}`,p=d?"Saving":v?"Saved":"Save",m=!a.coordinates.trim(),y=!a.name.trim(),j=eo(a.name)&&eo(a.coordinates)&&eo(a.scheduled_at);o.useEffect(()=>{let X=!1;return(async()=>{if(e){u(!0),F(null);try{const[R,ae]=await Promise.all([nh(Number(e)),$t()]);if(X)return;s(Array.isArray(ae)?ae:[]),i({event_id:R.event_id?String(R.event_id):"",name:R.name,coordinates:R.coordinates||"",scheduled_at:R.scheduled_at||"",description:R.description||"",notes:R.notes||""})}catch(R){X||F(R instanceof Error?R.message:"Failed to load entry")}finally{X||u(!1)}}})(),()=>{X=!0}},[e]);const O=()=>({name:a.name.trim(),coordinates:a.coordinates.trim()||void 0,scheduled_at:a.scheduled_at||void 0,description:a.description.trim()||void 0,notes:a.notes.trim()||void 0,event_id:Number(a.event_id)}),k=async X=>{if(X.preventDefault(),!(!e||!a.event_id)){x(!0),F(null),b(!1);try{await rh(Number(e),O()),F("Entry updated"),b(!0)}catch(se){F(se instanceof Error?se.message:"Failed to update entry"),b(!1)}finally{x(!1)}}},I=async()=>{if(!a.event_id){F("Select an event before copying.");return}C(!0),F(null);try{const X=O(),se=await rd({...X,name:X.name?`${X.name} (copy)`:"Other (copy)"});n(`/logistics/others/${se.id}`)}catch(X){F(X instanceof Error?X.message:"Failed to copy entry")}finally{C(!1)}},M=async()=>{if(!(!e||!a.event_id)&&window.confirm("Delete this entry?"))try{await l0(Number(e)),n(-1)}catch(X){F(X instanceof Error?X.message:"Failed to delete entry")}};return l?r.jsx("p",{className:"muted",children:"Loading"}):r.jsxs("section",{className:"stack",children:[r.jsxs("header",{className:"page-header",children:[r.jsx("div",{children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flexWrap:"wrap"},children:[r.jsx("h2",{style:{margin:0},children:"Other logistics"}),r.jsx("span",{className:`badge ${j?"success":"danger"}`,"aria-label":j?"Complete":"Missing info",title:j?"Complete":"Missing info",style:{minWidth:"2.4ch",textAlign:"center"},children:j?"":"!"})]})}),r.jsxs("div",{className:"card-actions",children:[r.jsx("button",{className:"ghost",type:"button",onClick:I,disabled:_||d,children:_?"Copying":"Make a copy"}),r.jsx("button",{className:"ghost danger",type:"button",onClick:M,children:"Delete"}),r.jsx("button",{className:"ghost",type:"button",onClick:()=>n(-1),style:{fontWeight:700,fontSize:"1.05rem"},children:"Back"})]})]}),r.jsx("article",{className:"card",children:r.jsxs("form",{className:"form-grid",onSubmit:k,children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Event"}),r.jsxs("select",{value:a.event_id,onChange:X=>i(se=>({...se,event_id:X.target.value})),required:!0,children:[r.jsx("option",{value:"",children:"Select event"}),t.map(X=>r.jsx("option",{value:X.id,children:X.name},X.id))]})]}),r.jsxs("label",{className:`form-field ${y?"field-missing":""}`,children:[r.jsx("span",{children:"Name"}),r.jsx("input",{type:"text",value:a.name,onChange:X=>i(se=>({...se,name:X.target.value})),required:!0})]}),r.jsxs("label",{className:`form-field ${m?"field-missing":""}`,children:[r.jsx("span",{children:"Coordinates"}),r.jsxs("div",{className:"input-with-button",children:[r.jsx("input",{type:"text",value:a.coordinates,onChange:X=>i(se=>({...se,coordinates:X.target.value}))}),r.jsx("button",{type:"button",className:"ghost",disabled:!a.coordinates.trim(),onClick:()=>{const X=a.coordinates.trim();X&&window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(X)}`,"_blank")},children:"Open in Maps"})]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Scheduled at"}),r.jsx(Mt,{value:Je(a.scheduled_at),options:{enableTime:!0,dateFormat:"Y-m-d H:i",time_24hr:!0},onChange:X=>{const se=X[0];i(R=>({...R,scheduled_at:se?Bt(se):""}))}})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Description"}),r.jsx("textarea",{value:a.description,onChange:X=>i(se=>({...se,description:X.target.value}))})]}),r.jsxs("label",{className:"form-field",style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Notes"}),r.jsx("input",{type:"text",value:a.notes,onChange:X=>i(se=>({...se,notes:X.target.value}))})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"submit",className:E,disabled:d,children:p}),N&&r.jsx("span",{className:"muted",children:N})]})]})})]})},Et=e=>!!e&&e.trim().length>0,Xu=e=>!Array.isArray(e)||e.length===0?"No vehicles":`${e.map((t,s)=>Et(t.name)?t.name:`Vehicle ${s+1}`).join(", ")}`,W0=e=>Un(e.toISOString(),{weekday:"short",month:"short",day:"numeric",year:"numeric"}),mr=e=>td(e),Kn=e=>{if(!e)return"Unscheduled";const n=td(e);if(!n)return"Unscheduled";const t=s=>String(s).padStart(2,"0");return`${t(n.hour)}:${t(n.minute)}`},to=e=>{if(!e)return"";const n=td(e);if(!n)return"";const t=a=>String(a).padStart(2,"0"),s=Un(e,{year:"numeric",month:"short",day:"numeric"});return s?`${s}, ${t(n.hour)}:${t(n.minute)}`:""},Tt=e=>Tx(e),H0=e=>{const n=[],t=ft(e.starts_at),s=ft(e.ends_at);if(!t)return n;const a=new Date(t),i=s&&!Number.isNaN(s.getTime())?s:t;for(;a.getTime()<=i.getTime();)n.push(new Date(a)),a.setUTCDate(a.getUTCDate()+1);return n},Ys=(e,n)=>{const t=Math.floor(n/60),s=n%60;return new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),t,s,0)).toISOString()},B0=()=>{var Ie;const{eventId:e}=Tn(),n=gt(),t=Jt(),[s,a]=o.useState(null),[i,l]=o.useState([]),[u,d]=o.useState([]),[x,_]=o.useState([]),[C,N]=o.useState([]),[F,v]=o.useState([]),[b,E]=o.useState([]),[p,m]=o.useState(!0),[y,j]=o.useState(null),[O,k]=o.useState(null),[I,M]=o.useState(!1),[X,se]=o.useState(!1),[R,ae]=o.useState(null),[de,Ne]=o.useState(null),[me,he]=o.useState(null),[we,ue]=o.useState(!1),[ge,fe]=o.useState(!1),Y=o.useRef(null),Z=o.useRef(null),ne=o.useRef(null),oe=o.useRef(null),pe=o.useRef(!1),Ae=A=>{if(!A)return null;const H=A.getBoundingClientRect();return{top:H.top,right:H.right,bottom:H.bottom,left:H.left,width:H.width,height:H.height}},[_e,Le]=o.useState(null),Pe=o.useRef(null),[qe,Ye]=o.useState(null),Qe=o.useRef(null),[Q,P]=o.useState(null),$=o.useMemo(()=>{if(Q)return{width:"min(720px, 92vw)",maxHeight:"85vh",overflowY:"auto",boxShadow:"0 18px 48px rgba(0,0,0,0.4), 0 0 0 1px var(--modal-border)",cursor:"pointer",backgroundColor:"var(--modal-surface)",border:"1px solid var(--modal-border)",color:"var(--text-strong)"}},[Q]);o.useEffect(()=>{if(typeof document>"u")return;const A=!!Q||!!_e;return A?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{A&&(document.body.style.overflow="")}},[Q,_e]);const[V,ee]=o.useState([]),De=A=>A.replace(/^#\s*\d+\s*/,"").trim(),Fe=A=>De(A||"").toLowerCase(),re=(A,H,J,q)=>{const ve=A.getBoundingClientRect(),Se=document.createElement("div");Se.style.position="fixed",Se.style.left=`${(J??0)+12}px`,Se.style.top=`${(q??0)+12}px`,Se.style.padding="0.35rem 0.5rem",Se.style.border="2px dashed #3b82f6",Se.style.borderRadius="14px",Se.style.background="#fff",Se.style.boxShadow="0 10px 25px rgba(0,0,0,0.12)",Se.style.pointerEvents="none",Se.style.zIndex="9999",Se.style.width=`${ve.width}px`,Se.style.boxSizing="border-box";const T=A.cloneNode(!0);T.style.pointerEvents="none",T.style.width="100%";const Ce=T.querySelector('[data-ghost-time="time"]');return Ce&&(Ce.textContent=H&&H!=="Unscheduled"?H:""),Se.appendChild(T),Z.current=Se,ne.current=Ce,document.body.appendChild(Se),Se},st=(A,H)=>{const J=ne.current,q=Z.current;q&&(J&&(J.textContent=A&&A!=="Unscheduled"?A:""),H&&(q.style.left=`${H.x+12}px`,q.style.top=`${H.y+12}px`))},ht=()=>{Z.current&&(document.body.removeChild(Z.current),Z.current=null,ne.current=null),oe.current&&(oe.current.remove(),oe.current=null)},[Dt,Lt]=o.useState({Innhopp:!0,Transport:!0,"Ground Crew":!0,Accommodation:!0,Other:!0,Meal:!0}),G=o.useCallback(A=>{var T;const H=Fe(A);if(!H)return null;const J=(T=s==null?void 0:s.innhopps)==null?void 0:T.find(Ce=>Fe(Ce.name)===H);if(J!=null&&J.coordinates)return J.coordinates;const q=x.find(Ce=>Fe(Ce.name)===H);if(q!=null&&q.coordinates)return q.coordinates;const ve=C.find(Ce=>Fe(Ce.name)===H);if(ve!=null&&ve.coordinates)return ve.coordinates;const Se=V.find(Ce=>Fe(Ce.name)===H);return Se!=null&&Se.coordinates?Se.coordinates:null},[x,V,s==null?void 0:s.innhopps,C]);o.useEffect(()=>{let A=!1;return(async()=>{if(e){m(!0),j(null);try{const[J,q,ve,Se,T,Ce,Ge,Ee]=await Promise.all([Jr(Number(e)),Aa(),Da(),cr(Number(e)),Gr(),Vn(),Wn(),Pr()]);if(A)return;a(J),l(Array.isArray(q)?q.filter(ke=>ke.event_id===Number(e)):[]),d(Array.isArray(ve)?ve.filter(ke=>ke.event_id===Number(e)):[]),_(Array.isArray(Se)?Se:[]),E(Array.isArray(T)?T:[]),N(Array.isArray(Ce)?Ce.filter(ke=>ke.event_id===Number(e)):[]),v(Array.isArray(Ge)?Ge.filter(ke=>ke.event_id===Number(e)):[]),ee(Array.isArray(Ee)?Ee:[])}catch(J){A||j(J instanceof Error?J.message:"Failed to load schedule")}finally{A||m(!1)}}})(),()=>{A=!0}},[e]);const ce=o.useCallback(async A=>{if(!e)return;const H=A==null?void 0:A.preserveLoading;H||m(!0),k(null);try{const[J,q,ve,Se,T,Ce,Ge,Ee]=await Promise.all([Jr(Number(e)),Aa(),Da(),cr(Number(e)),Gr(),Vn(),Wn(),Pr()]);a(J),l(Array.isArray(q)?q.filter(ke=>ke.event_id===Number(e)):[]),d(Array.isArray(ve)?ve.filter(ke=>ke.event_id===Number(e)):[]),_(Array.isArray(Se)?Se:[]),E(Array.isArray(T)?T:[]),N(Array.isArray(Ce)?Ce.filter(ke=>ke.event_id===Number(e)):[]),v(Array.isArray(Ge)?Ge.filter(ke=>ke.event_id===Number(e)):[]),ee(Array.isArray(Ee)?Ee:[])}catch(J){j(J instanceof Error?J.message:"Failed to load schedule")}finally{H||m(!1)}},[e]),ye=o.useMemo(()=>{if(!s)return[];const A=H0(s),H=Array.isArray(s.innhopps)?s.innhopps:[],J=new Set;A.forEach(Ee=>J.add(Tt(Ee.toISOString()))),i.forEach(Ee=>{const ke=Tt(Ee.scheduled_at||void 0);ke&&J.add(ke)}),u.forEach(Ee=>{const ke=Tt(Ee.scheduled_at||void 0);ke&&J.add(ke)}),F.forEach(Ee=>{const ke=Tt(Ee.scheduled_at||void 0);ke&&J.add(ke)}),x.forEach(Ee=>{const ke=Tt(Ee.check_in_at||void 0),ze=Tt(Ee.check_out_at||void 0);ke&&J.add(ke),ze&&J.add(ze)}),C.forEach(Ee=>{const ke=Tt(Ee.scheduled_at||void 0);ke&&J.add(ke)});const ve=Array.from(J).filter(Boolean).sort().map(Ee=>{const[ke,ze,Ue]=Ee.split("-").map(Number);return{key:Ee,date:new Date(Date.UTC(ke,ze-1,Ue))}}).map(({key:Ee,date:ke})=>{const ze=H.filter(mt=>Tt(mt.scheduled_at||void 0)===Ee),Ue=i.filter(mt=>Tt(mt.scheduled_at||void 0)===Ee),tt=u.filter(mt=>Tt(mt.scheduled_at||void 0)===Ee),lt=x.filter(mt=>Tt(mt.check_in_at||void 0)===Ee||Tt(mt.check_out_at||void 0)===Ee),at=C.filter(mt=>Tt(mt.scheduled_at||void 0)===Ee),yt=F.filter(mt=>Tt(mt.scheduled_at||void 0)===Ee);return{date:ke,label:Ee==="unscheduled"?"Unscheduled":W0(ke),key:Ee,innhopps:ze,transports:Ue,groundCrews:tt,accommodations:lt,others:at,meals:yt}}),Se=i.filter(Ee=>!Ee.scheduled_at||Tt(Ee.scheduled_at)===""),T=u.filter(Ee=>!Ee.scheduled_at||Tt(Ee.scheduled_at)===""),Ce=C.filter(Ee=>!Ee.scheduled_at||Tt(Ee.scheduled_at)===""),Ge=F.filter(Ee=>!Ee.scheduled_at||Tt(Ee.scheduled_at)==="");return(Se.length>0||T.length>0||Ce.length>0||Ge.length>0)&&!J.has("unscheduled")&&ve.push({date:new Date,label:"Unscheduled",key:"unscheduled",innhopps:[],transports:Se,groundCrews:T,accommodations:[],others:Ce,meals:Ge}),ve},[s,i,u,x,C,F]),We=async()=>{if(e&&window.confirm("Delete this event?")){M(!0),k(null);try{await Pp(Number(e)),n("/events")}catch(A){k(A instanceof Error?A.message:"Failed to delete event")}finally{M(!1)}}},it=async()=>{if(!(!e||X)){se(!0),k(null);try{const A=await Ip(Number(e));n(`/events/${A.id}`)}catch(A){k(A instanceof Error?A.message:"Failed to copy event")}finally{se(!1)}}},[Ze,vt]=o.useState({}),ct=o.useRef(Ze),It=o.useRef(!1),[Ut,Xe]=o.useState(null),f=o.useRef(!1),w=o.useRef(null);o.useEffect(()=>{ct.current=Ze},[Ze]),o.useEffect(()=>{if(!e||!It.current)return;const A=`event-schedule-state:${e}`;try{const H=sessionStorage.getItem(A);let J={};if(H)try{J=JSON.parse(H)||{}}catch{J={}}sessionStorage.setItem(A,JSON.stringify({...J,expandedDays:ct.current}))}catch{}},[e,Ze]),o.useEffect(()=>{if(me!==null||!Ut)return;const A=setTimeout(()=>Xe(null),1800);return()=>clearTimeout(A)},[Ut,me]),o.useEffect(()=>{var q,ve;if(!e||It.current)return;const A=`event-schedule-state:${e}`,H=sessionStorage.getItem(A),J=!!((q=t.state)!=null&&q.suppressHighlight);if(J){pe.current=!0;const Se={...t.state};delete Se.suppressHighlight,n(".",{replace:!0,state:Object.keys(Se).length?Se:null})}if(H&&!J)try{const Se=JSON.parse(H);Se!=null&&Se.expandedDays&&vt(T=>({...T,...Se.expandedDays})),typeof(Se==null?void 0:Se.scrollY)=="number"&&setTimeout(()=>window.scrollTo(0,Se.scrollY),0)}catch{}if(J)setTimeout(()=>window.scrollTo(0,0),0);else{const Se=sessionStorage.getItem(`event-schedule-highlight:${e}`);Se&&(Xe(Se),sessionStorage.removeItem(`event-schedule-highlight:${e}`));const T=(ve=t.state)==null?void 0:ve.highlightId;T&&Xe(T)}It.current=!0},[e,t.state]),o.useEffect(()=>{if(!e)return;const A=`event-schedule-state:${e}`;return()=>{try{sessionStorage.setItem(A,JSON.stringify({expandedDays:ct.current,scrollY:window.scrollY}))}catch{}}},[e]),o.useEffect(()=>{if(ye.length===0)return;if(f.current){f.current=!1;return}if(Ut){setTimeout(()=>{const J=document.getElementById(`entry-${Ut}`);J==null||J.scrollIntoView({behavior:"smooth",block:"center"})},0);return}if((s==null?void 0:s.status)!=="live")return;const A=new Date,H=ye.reduce((J,q)=>{const ve=Math.abs(q.date.getTime()-A.getTime());return J?ve<J.diff?{key:q.key,diff:ve}:J:{key:q.key,diff:ve}},null);if(H!=null&&H.key){const J=document.getElementById(`event-day-${H.key}`);J==null||J.scrollIntoView({behavior:"smooth",block:"start"})}},[ye,s==null?void 0:s.status,Ut]);const z={Innhopp:{backgroundColor:"#2b8a3e",color:"#fff"},Transport:{backgroundColor:"#e6b84a",color:"#fff"},"Ground Crew":{backgroundColor:"#f6dea0",color:"#fff"},Accommodation:{backgroundColor:"#0d6efd",color:"#fff"},Meal:{backgroundColor:"#d97706",color:"#fff"},Other:{backgroundColor:"#7e22ce",color:"#fff"}},W=(A,H,J,q)=>{if(J==="unscheduled")return null;const ve=q?H.filter(ze=>ze.id!==q):H.slice();if(ve.length===0)return 8*60;const Se=Math.max(0,Math.min(A,ve.length)),T=ve[Se-1],Ce=ve[Se],Ge=T&&T.sortValue!==Number.POSITIVE_INFINITY?T.sortValue:null,Ee=Ce&&Ce.sortValue!==Number.POSITIVE_INFINITY?Ce.sortValue:null;let ke=9*60;return Ge!==null&&Ee!==null?ke=Math.floor((Ge+Ee)/2):Ge!==null?ke=Ge+15:Ee!==null&&(ke=Math.max(Ee-15,0)),ke},Re=["Innhopp","Transport","Ground Crew","Accommodation","Meal","Other"],$e=(A,H)=>{const J=(A!=null&&A.scheduledAt?Je(A.scheduledAt):void 0)||(H?Je(H.date.toISOString()):void 0)||new Date,q=mr((A==null?void 0:A.scheduledAt)||void 0);if(q)J.setHours(q.hour,q.minute,0,0);else{const ve=new Date;J.setHours(ve.getHours(),ve.getMinutes(),0,0)}return J},D=A=>Bt(A),K=o.useCallback((A,H)=>{if(A.type==="Innhopp")a(J=>J&&{...J,innhopps:Array.isArray(J.innhopps)?J.innhopps.map(q=>q.id===Number(A.id.split("-").pop())?{...q,scheduled_at:H||null}:q):J.innhopps});else if(A.type==="Transport")l(J=>Array.isArray(J)?J.map(q=>q.id===Number(A.id.split("-").pop())?{...q,scheduled_at:H??void 0}:q):J);else if(A.type==="Ground Crew")d(J=>Array.isArray(J)?J.map(q=>q.id===Number(A.id.split("-").pop())?{...q,scheduled_at:H??void 0}:q):J);else if(A.type==="Other")N(J=>Array.isArray(J)?J.map(q=>q.id===Number(A.id.split("-").pop())?{...q,scheduled_at:H||null}:q):J);else if(A.type==="Meal")v(J=>Array.isArray(J)?J.map(q=>q.id===Number(A.id.split("-").pop())?{...q,scheduled_at:H||null}:q):J);else if(A.type==="Accommodation"){const J=Number(A.id.split("-").pop());_(q=>Array.isArray(q)?q.map(ve=>ve.id!==J?ve:A.id.startsWith("acc-in-")?{...ve,check_in_at:H||null}:A.id.startsWith("acc-out-")?{...ve,check_out_at:H||null}:{...ve,check_in_at:H||null}):q)}},[]);o.useEffect(()=>{var H,J;const A=(H=Pe.current)==null?void 0:H.flatpickr;A&&(_e?(A.setDate($e(_e.entry,_e.day),!1),Ye(((J=A.selectedDates)==null?void 0:J[0])??null),_e.anchor&&A.set("positionElement",_e.anchor),A.open()):(A.close(),Ye(null)))},[_e]),o.useEffect(()=>{if(!we)return;const A=J=>{const q=J.target;!Y.current||!q||Y.current.contains(q)||ue(!1)},H=J=>{J.key==="Escape"&&ue(!1)};return document.addEventListener("mousedown",A),document.addEventListener("touchstart",A),window.addEventListener("keydown",H),()=>{document.removeEventListener("mousedown",A),document.removeEventListener("touchstart",A),window.removeEventListener("keydown",H)}},[we]),o.useEffect(()=>{if(ye.length===0)return;const A=new Date;A.setHours(0,0,0,0),vt(H=>{const J={...H};return ye.forEach(q=>{if(pe.current){J[q.key]=!0;return}if(typeof J[q.key]=="boolean")return;const ve=q.date<A;J[q.key]=!ve}),J}),pe.current&&(pe.current=!1)},[ye]);const h=o.useCallback(async(A,H)=>{try{fe(!0);const J=Number(A.id.split("-").pop());if(A.type==="Innhopp"){const q=await Fp(J),ve={sequence:q.sequence,name:q.name,coordinates:q.coordinates||void 0,elevation:q.elevation??void 0,takeoff_airfield_id:q.takeoff_airfield_id??void 0,scheduled_at:H||void 0,notes:q.notes||void 0,reason_for_choice:q.reason_for_choice||void 0,adjust_altimeter_aad:q.adjust_altimeter_aad||void 0,notam:q.notam||void 0,distance_by_air:q.distance_by_air??void 0,distance_by_road:q.distance_by_road??void 0,primary_landing_area:q.primary_landing_area,secondary_landing_area:q.secondary_landing_area,risk_assessment:q.risk_assessment||void 0,safety_precautions:q.safety_precautions||void 0,jumprun:q.jumprun||void 0,hospital:q.hospital||void 0,rescue_boat:q.rescue_boat??void 0,minimum_requirements:q.minimum_requirements||void 0,land_owners:q.land_owners||[],land_owner_permission:q.land_owner_permission??void 0};await ji(J,ve)}else if(A.type==="Transport"){const q=await Gp(J),ve=Array.isArray(q.vehicles)?q.vehicles.map(Se=>Se.event_vehicle_id||Se.id).filter(Se=>typeof Se=="number"):[];await Zp(J,{pickup_location:q.pickup_location,destination:q.destination,passenger_count:q.passenger_count,scheduled_at:H||void 0,notes:q.notes||void 0,event_id:Number(q.event_id),vehicle_ids:ve.length>0?ve:void 0})}else if(A.type==="Ground Crew"){const q=await eh(J),ve=Array.isArray(q.vehicles)?q.vehicles.map(Se=>Se.event_vehicle_id||Se.id).filter(Se=>typeof Se=="number"):[];await th(J,{pickup_location:q.pickup_location,destination:q.destination,passenger_count:q.passenger_count,scheduled_at:H||void 0,notes:q.notes||void 0,event_id:Number(q.event_id),vehicle_ids:ve.length>0?ve:void 0})}else if(A.type==="Other"){const q=await nh(J);await rh(J,{name:q.name,coordinates:q.coordinates||void 0,scheduled_at:H||void 0,description:q.description||void 0,notes:q.notes||void 0,event_id:Number(q.event_id)})}else if(A.type==="Meal"){const q=await sh(J);await ah(J,{name:q.name,location:q.location||void 0,scheduled_at:H||void 0,notes:q.notes||void 0,event_id:Number(q.event_id)})}else if(A.type==="Accommodation"&&e){const q=await Op(Number(e),J),ve={name:q.name,capacity:q.capacity,coordinates:q.coordinates||void 0,booked:q.booked??void 0,notes:q.notes||void 0,check_in_at:q.check_in_at||void 0,check_out_at:q.check_out_at||void 0};A.id.startsWith("acc-in-")?ve.check_in_at=H||void 0:A.id.startsWith("acc-out-")?ve.check_out_at=H||void 0:ve.check_in_at=H||void 0,await $p(Number(e),J,ve)}}finally{fe(!1)}},[e]),g=o.useCallback(()=>{var ve,Se,T,Ce,Ge,Ee;const A=(ve=Pe.current)==null?void 0:ve.flatpickr,H=((Se=A==null?void 0:A.selectedDates)==null?void 0:Se[0])||qe,J=H&&!Number.isNaN(H.getTime())?new Date(H.getTime()):_e!=null&&_e.entry.scheduledAt?Je(_e.entry.scheduledAt)||new Date:_e!=null&&_e.day?Je(_e.day.date.toISOString())||new Date:new Date;if(A){const ke=(T=A.hourElement)==null?void 0:T.value,ze=(Ce=A.minuteElement)==null?void 0:Ce.value,Ue=ke!==void 0?Number(ke):NaN,tt=ze!==void 0?Number(ze):NaN;!Number.isNaN(Ue)&&!Number.isNaN(tt)&&J.setHours(Ue,tt,0,0)}const q=(Ee=(Ge=A==null?void 0:A.input)==null?void 0:Ge.value)==null?void 0:Ee.trim();if(A&&q){const ke=A.parseDate(q,"Y-m-d H:i")||Je(q);if(!Number.isNaN(ke==null?void 0:ke.getTime()))return ke}return J},[qe,_e]),L=o.useCallback(async()=>{var Se;if(!_e)return;const A=(Se=Pe.current)==null?void 0:Se.flatpickr;if(A!=null&&A.input){const T=A.parseDate(A.input.value,"Y-m-d H:i");T&&!Number.isNaN(T.getTime())&&A.setDate(T,!1,"Y-m-d H:i"),A.input.blur()}const H=g();if(!H)return;const J=D(H),q=Tt(J),ve=q&&q!==_e.day.key;f.current=!0,w.current=ve?null:window.scrollY;try{await h(_e.entry,J),K(_e.entry,J),Xe(_e.entry.id)}catch(T){k(T instanceof Error?T.message:"Failed to update schedule")}finally{Le(null),Ye(null),ve&&q?setTimeout(()=>{const T=document.getElementById(`event-day-${q}`);T==null||T.scrollIntoView({behavior:"smooth",block:"start"})},0):w.current!==null&&(window.scrollTo({top:w.current}),w.current=null)}},[K,g,qe,_e,h]);if(o.useEffect(()=>{const A=H=>{if(_e){if(H.key==="Enter"){H.preventDefault(),H.stopPropagation();return}H.key==="Escape"&&(Le(null),Ye(null))}};return window.addEventListener("keydown",A,!0),()=>window.removeEventListener("keydown",A,!0)},[_e]),p)return r.jsx("p",{className:"muted",children:"Loading schedule"});if(y)return r.jsx("p",{className:"error-text",children:y});if(!s)return r.jsx("p",{className:"error-text",children:"Event not found."});const U=s.slots??0,le=Array.isArray(s.participant_ids)?s.participant_ids.reduce((A,H)=>{const J=b.find(Se=>Se.id===H);return(Array.isArray(J==null?void 0:J.roles)?J==null?void 0:J.roles:[]).includes("Staff")?A:A+1},0):0,be=Math.max(U-le,0),He=be===0,Te=s.status==="past",Ke={fontSize:"1.05rem",fontWeight:700,lineHeight:"1.2",fontFamily:"inherit"};return r.jsxs("section",{className:"stack",children:[r.jsx("header",{className:"page-header event-schedule-header",children:r.jsxs("div",{className:"event-schedule-headline",children:[r.jsxs("div",{className:"event-schedule-actions",ref:Y,children:[r.jsx("button",{className:"ghost event-schedule-gear",type:"button","aria-label":we?"Close actions menu":"Open actions menu","aria-expanded":we,"aria-controls":"event-schedule-actions-menu",onClick:()=>ue(A=>!A),children:r.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:r.jsx("path",{d:"M19.14 12.94c.04-.31.06-.63.06-.94s-.02-.63-.06-.94l2.03-1.58a.5.5 0 0 0 .12-.64l-1.92-3.32a.5.5 0 0 0-.6-.22l-2.39.96a7.3 7.3 0 0 0-1.63-.94l-.36-2.54a.5.5 0 0 0-.5-.42h-3.84a.5.5 0 0 0-.5.42l-.36 2.54c-.57.22-1.12.52-1.63.94l-2.39-.96a.5.5 0 0 0-.6.22L2.7 8.84a.5.5 0 0 0 .12.64l2.03 1.58c-.04.31-.06.63-.06.94s.02.63.06.94L2.82 14.52a.5.5 0 0 0-.12.64l1.92 3.32c.13.22.39.31.6.22l2.39-.96c.5.41 1.06.73 1.63.94l.36 2.54c.04.24.25.42.5.42h3.84c.25 0 .46-.18.5-.42l.36-2.54c.57-.22 1.12-.52 1.63-.94l2.39.96c.22.09.47 0 .6-.22l1.92-3.32a.5.5 0 0 0-.12-.64l-2.03-1.58zM12 15.5a3.5 3.5 0 1 1 0-7 3.5 3.5 0 0 1 0 7z"})})}),we&&r.jsxs("div",{className:"event-schedule-menu",id:"event-schedule-actions-menu",role:"menu",children:[r.jsx("button",{className:"event-schedule-menu-item",type:"button",style:Ke,role:"menuitem",onClick:()=>{ue(!1),n(`/events/${s.id}/details`)},children:"Details"}),r.jsx("button",{className:"event-schedule-menu-item",type:"button",style:Ke,role:"menuitem",onClick:()=>{ue(!1),n(`/manifests?eventId=${s.id}`)},children:"Manifest"}),r.jsx("button",{className:"event-schedule-menu-item",type:"button",style:Ke,role:"menuitem",onClick:()=>{ue(!1),it()},disabled:X,children:X?"Copying":"Copy"}),r.jsx("button",{className:"event-schedule-menu-item danger",type:"button",style:Ke,role:"menuitem",onClick:()=>{ue(!1),We()},disabled:I,children:I?"Deleting":"Delete"}),r.jsx("button",{className:"event-schedule-menu-item",type:"button",style:Ke,role:"menuitem",onClick:()=>{ue(!1),n("/events")},children:"Back"})]})]}),r.jsxs("div",{className:"event-schedule-headline-text",children:[r.jsx("div",{className:"event-schedule-title-row",children:r.jsx("h2",{style:{margin:0},children:s.name})}),r.jsx("p",{className:"event-location",children:s.location||"Location TBD"}),r.jsxs("div",{className:"event-schedule-badges",children:[r.jsx("span",{className:`badge status-${s.status}`,children:s.status}),!Te&&r.jsx("span",{className:`badge ${He?"danger":"success"}`,children:He?"FULL":`${be} SLOTS AVAILABLE`})]})]})]})}),O&&r.jsx("p",{className:"error-text",children:O}),r.jsxs("article",{className:"card",style:{marginBottom:"0.75rem"},children:[r.jsxs("dl",{className:"card-details event-schedule-stats",style:{margin:0,display:"grid",gridTemplateColumns:"repeat(5, minmax(0, 1fr))",columnGap:"2rem",rowGap:"1rem",textAlign:"center"},children:[r.jsxs("div",{children:[r.jsx("dt",{children:"Starts"}),r.jsx("dd",{children:s.starts_at?Un(s.starts_at,{month:"short",day:"numeric",year:"numeric"}):"TBD"})]}),r.jsxs("div",{children:[r.jsx("dt",{children:"Ends"}),r.jsx("dd",{children:s.ends_at?Un(s.ends_at,{month:"short",day:"numeric",year:"numeric"}):"TBD"})]}),r.jsxs("div",{children:[r.jsx("dt",{children:"Participants"}),r.jsx("dd",{children:le})]}),r.jsxs("div",{children:[r.jsx("dt",{children:"Innhopps"}),r.jsx("dd",{children:((Ie=s.innhopps)==null?void 0:Ie.length)??0})]}),r.jsxs("div",{children:[r.jsx("dt",{children:"Slots"}),r.jsx("dd",{children:U||"Not set"})]})]}),r.jsxs("div",{className:"event-schedule-filters",children:[r.jsx("strong",{children:"Show:"}),r.jsx("div",{className:"event-schedule-filter-list",children:Re.map(A=>{const H=Dt[A],J=z[A],q=H?J:{backgroundColor:"#fff",color:J.backgroundColor,border:`2px solid ${J.backgroundColor}`};return r.jsx("button",{type:"button",onClick:()=>Lt(ve=>({...ve,[A]:!ve[A]})),style:{border:"none",background:"transparent",padding:0,cursor:"pointer"},"aria-pressed":H,onDragLeave:ve=>{if(!R)return;const Se=ve.currentTarget,T=ve.relatedTarget;T&&Se.contains(T)||he(null)},children:r.jsx("span",{className:"badge",style:q,children:A.toUpperCase()})},A)})})]})]}),ye.length===0?r.jsx("p",{className:"muted",children:"No schedule yet."}):ye.map(A=>r.jsxs("article",{id:`event-day-${A.key}`,className:"card",style:de===A.key&&R?{border:"2px solid #3b82f6",boxShadow:"0 0 0 2px rgba(59,130,246,0.15)"}:void 0,onDragOver:H=>{R&&(H.preventDefault(),Ne(A.key),he(null))},onDrop:H=>{R&&(H.preventDefault(),he(null))},onDragLeave:H=>{if(!R)return;const J=H.currentTarget,q=H.relatedTarget;q&&J.contains(q)||(Ne(ve=>ve===A.key?null:ve),he(null),st(null))},children:[r.jsxs("header",{className:"card-header",style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},onClick:()=>vt(H=>({...H,[A.key]:!(H[A.key]??!0)})),children:[r.jsx("button",{className:"ghost",type:"button",onClick:H=>{H.stopPropagation(),vt(J=>({...J,[A.key]:!(J[A.key]??!0)}))},children:Ze[A.key]===!1?"":""}),r.jsx("h3",{style:{margin:0,flex:1,textAlign:"left"},children:A.label})]}),Ze[A.key]===!1?null:(()=>{const H=[];A.innhopps.forEach(T=>{var Ee,ke,ze,Ue,tt;const Ce=V.find(lt=>lt.id===T.takeoff_airfield_id),Ge=typeof T.elevation=="number"&&typeof(Ce==null?void 0:Ce.elevation)=="number"?T.elevation-Ce.elevation:null;H.push({id:`i-${T.id}`,hourKey:Kn(T.scheduled_at),sortValue:(()=>{const lt=mr(T.scheduled_at);return lt?lt.hour*60+lt.minute:Number.POSITIVE_INFINITY})(),title:`Innhopp #${T.sequence}: ${T.name}`,subtitle:"",type:"Innhopp",to:`/events/${s.id}/innhopps/${T.id}`,ready:Jp(T),missingCoordinates:!Et(T.coordinates),description:T.reason_for_choice||((Ee=T.primary_landing_area)==null?void 0:Ee.description)||null,notes:T.notes||void 0,innhoppReason:T.reason_for_choice||null,innhoppElevation:T.elevation??null,innhoppCoordinates:T.coordinates||null,innhoppTakeoffName:(Ce==null?void 0:Ce.name)||null,innhoppElevationDiff:Ge,innhoppPrimaryName:((ke=T.primary_landing_area)==null?void 0:ke.name)||null,innhoppPrimarySize:((ze=T.primary_landing_area)==null?void 0:ze.size)||null,innhoppSecondaryName:((Ue=T.secondary_landing_area)==null?void 0:Ue.name)||null,innhoppSecondarySize:((tt=T.secondary_landing_area)==null?void 0:tt.size)||null,innhoppRisk:T.risk_assessment||null,innhoppMinimumRequirements:T.minimum_requirements||null,innhoppRescueBoat:T.rescue_boat??null,innhoppLandOwnerPermission:T.land_owner_permission??null,scheduledAt:T.scheduled_at})}),A.transports.forEach(T=>{const Ce=G(T.pickup_location),Ge=G(T.destination),Ee=Number.isFinite(T.passenger_count)&&T.passenger_count>=0,ke=Array.isArray(T.vehicles)&&T.vehicles.length>0,ze=Et(T.pickup_location)&&Et(T.destination)&&Et(T.scheduled_at)&&Ee&&ke&&Et(Ce)&&Et(Ge),Ue=Array.isArray(T.vehicles)?T.vehicles.map(tt=>({name:tt.name,driver:tt.driver||"",passenger_capacity:tt.passenger_capacity})):[];H.push({id:`t-${T.id}`,hourKey:Kn(T.scheduled_at),sortValue:(()=>{const tt=mr(T.scheduled_at);return tt?tt.hour*60+tt.minute:Number.POSITIVE_INFINITY})(),title:`${De(T.pickup_location)}  ${De(T.destination)}`,subtitle:Xu(Ue),type:"Transport",to:`/logistics/${T.id}`,transportComplete:ze,missingCoordinates:!Ce||!Ge,transportRouteOrigin:Ce||null,transportRouteDestination:Ge||null,notes:T.notes||null,vehicles:Ue,scheduledAt:T.scheduled_at||void 0})}),A.groundCrews.forEach(T=>{const Ce=G(T.pickup_location),Ge=G(T.destination),Ee=Number.isFinite(T.passenger_count)&&T.passenger_count>=0,ke=Array.isArray(T.vehicles)&&T.vehicles.length>0,ze=Et(T.pickup_location)&&Et(T.destination)&&Et(T.scheduled_at)&&Ee&&ke&&Et(Ce)&&Et(Ge),Ue=Array.isArray(T.vehicles)?T.vehicles.map(tt=>({name:tt.name,driver:tt.driver||"",passenger_capacity:tt.passenger_capacity})):[];H.push({id:`gc-${T.id}`,hourKey:Kn(T.scheduled_at),sortValue:(()=>{const tt=mr(T.scheduled_at);return tt?tt.hour*60+tt.minute:Number.POSITIVE_INFINITY})(),title:`${De(T.pickup_location)}  ${De(T.destination)}`,subtitle:Xu(Ue),type:"Ground Crew",to:`/logistics/ground-crew/${T.id}`,transportComplete:ze,missingCoordinates:!Ce||!Ge,transportRouteOrigin:Ce||null,transportRouteDestination:Ge||null,notes:T.notes||null,vehicles:Ue,scheduledAt:T.scheduled_at||void 0})}),A.others.forEach(T=>{H.push({id:`o-${T.id}`,hourKey:Kn(T.scheduled_at||void 0),sortValue:(()=>{const Ce=mr(T.scheduled_at||void 0);return Ce?Ce.hour*60+Ce.minute:Number.POSITIVE_INFINITY})(),title:T.name||"Other logistics",subtitle:"",type:"Other",to:`/logistics/others/${T.id}`,missingCoordinates:!Et(T.coordinates),coordinates:T.coordinates||null,description:T.description||null,notes:T.notes||null,otherComplete:Et(T.name)&&Et(T.coordinates)&&Et(T.scheduled_at),scheduledAt:T.scheduled_at||void 0})}),A.meals.forEach(T=>{H.push({id:`meal-${T.id}`,hourKey:Kn(T.scheduled_at||void 0),sortValue:(()=>{const Ce=mr(T.scheduled_at||void 0);return Ce?Ce.hour*60+Ce.minute:Number.POSITIVE_INFINITY})(),title:T.name,subtitle:"",type:"Meal",to:`/logistics/meals/${T.id}`,mealComplete:Et(T.name)&&Et(T.location)&&Et(T.scheduled_at),location:T.location||null,notes:T.notes||null,scheduledAt:T.scheduled_at||void 0})}),A.accommodations.forEach(T=>{T.check_in_at&&Tt(T.check_in_at)===A.key&&H.push({id:`acc-in-${T.id}`,hourKey:Kn(T.check_in_at),sortValue:(()=>{const Ce=mr(T.check_in_at);return Ce?Ce.hour*60+Ce.minute:Number.POSITIVE_INFINITY})(),title:`Check-in: ${T.name}`,subtitle:"",type:"Accommodation",booked:!!T.booked,coordinates:T.coordinates||null,to:`/events/${e}/accommodations/${T.id}`,missingCoordinates:!Et(T.coordinates),notes:T.notes||null,scheduledAt:T.check_in_at}),T.check_out_at&&Tt(T.check_out_at)===A.key&&H.push({id:`acc-out-${T.id}`,hourKey:Kn(T.check_out_at),sortValue:(()=>{const Ce=mr(T.check_out_at);return Ce?Ce.hour*60+Ce.minute:Number.POSITIVE_INFINITY})(),title:`Check-out: ${T.name}`,subtitle:"",type:"Accommodation",booked:!!T.booked,coordinates:T.coordinates||null,to:`/events/${e}/accommodations/${T.id}`,missingCoordinates:!Et(T.coordinates),notes:T.notes||null,scheduledAt:T.check_out_at}),!T.check_in_at&&!T.check_out_at&&H.push({id:`acc-${T.id}`,hourKey:"Unscheduled",sortValue:Number.POSITIVE_INFINITY,title:`${T.name}`,subtitle:"",type:"Accommodation",booked:!!T.booked,coordinates:T.coordinates||null,to:`/events/${e}/accommodations/${T.id}`,missingCoordinates:!Et(T.coordinates),scheduledAt:null})});const q=H.filter(T=>Dt[T.type]).sort((T,Ce)=>T.sortValue===Ce.sortValue?T.title.localeCompare(Ce.title):T.sortValue-Ce.sortValue),ve=async T=>{if(!R)return;const Ce=q.findIndex(lt=>lt.id===R.id),Ge=lt=>lt.startsWith("i-")?"Innhopp":lt.startsWith("t-")?"Transport":lt.startsWith("gc-")?"Ground Crew":lt.startsWith("acc-")?"Accommodation":lt.startsWith("o-")?"Other":lt.startsWith("meal-")?"Meal":null;if(Ce===-1){const lt=Ge(R.id);if(!lt)return;const at=W(T,q,A.key,R==null?void 0:R.id),yt=at!=null?Ys(A.date,at):void 0;try{await h({id:R.id,type:lt},yt),await ce({preserveLoading:!0}),Xe(R.id)}catch(mt){k(mt instanceof Error?mt.message:"Failed to update schedule")}finally{ae(null),Ne(null),ht()}return}const Ee=q[Ce],ke=q.filter(lt=>lt.id!==R.id),ze=Math.max(0,Math.min(T,ke.length));ke.splice(ze,0,Ee);const Ue=W(ze,ke,A.key,R==null?void 0:R.id),tt=Ue!=null?Ys(A.date,Ue):void 0;try{await h(Ee,tt),await ce({preserveLoading:!0}),Xe(Ee.id)}catch(lt){k(lt instanceof Error?lt.message:"Failed to update schedule")}finally{ae(null),Ne(null),ht()}},Se=(T,Ce)=>{const Ge=z[T.type],Ee=!!T.missingCoordinates,ke={minWidth:"2.4ch",textAlign:"center",display:"inline-block"};let ze=null;T.type==="Accommodation"?ze=T.booked&&!Ee?r.jsx("span",{className:"badge success",style:ke,children:""}):r.jsx("span",{className:"badge danger",style:ke,children:"!"}):T.type==="Innhopp"?ze=T.ready?r.jsx("span",{className:"badge success",style:ke,children:""}):r.jsx("span",{className:"badge danger",style:ke,children:"!"}):T.type==="Meal"?ze=T.mealComplete?r.jsx("span",{className:"badge success",style:ke,children:""}):r.jsx("span",{className:"badge danger",style:ke,children:"!"}):T.type==="Other"?ze=T.otherComplete?r.jsx("span",{className:"badge success",style:ke,children:""}):r.jsx("span",{className:"badge danger",style:ke,children:"!"}):T.type==="Transport"?ze=T.transportComplete?r.jsx("span",{className:"badge success",style:ke,children:""}):r.jsx("span",{className:"badge danger",style:ke,children:"!"}):T.type==="Ground Crew"?ze=T.transportComplete?r.jsx("span",{className:"badge success",style:ke,children:""}):r.jsx("span",{className:"badge danger",style:ke,children:"!"}):Ee&&(ze=r.jsx("span",{className:"badge danger",style:ke,title:"Coordinates missing","aria-label":"Coordinates missing",children:"!"}));const Ue=r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.15rem"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",flexWrap:"wrap"},children:[r.jsx("strong",{children:T.title}),r.jsxs("div",{style:{marginLeft:"auto",display:"grid",gridTemplateColumns:"minmax(56px, 80px) minmax(130px, 190px)",alignItems:"center",justifyItems:"center",columnGap:"0.5rem"},children:[ze||r.jsx("span",{style:{visibility:"hidden",...ke},children:"!"}),r.jsx("span",{className:"badge schedule-type-badge",style:Ge,"aria-label":T.type,children:T.type})]})]}),T.subtitle&&r.jsx("div",{className:"muted",children:T.subtitle})]}),tt=at=>{at.preventDefault(),at.stopPropagation(),P({entry:T,day:A})};T.id;const lt={draggable:T.type!=="Accommodation",onDragStart:at=>{ae({id:T.id,dayKey:A.key});const yt=T.hourKey!=="Unscheduled"?T.hourKey:null,mt=at.currentTarget.closest("li");if(re(mt||at.currentTarget,yt,at.clientX,at.clientY),at.dataTransfer){try{at.dataTransfer.clearData()}catch{}at.dataTransfer.setData("text/plain",T.id),at.dataTransfer.setData("text/uri-list","");const Pt=document.createElement("div");Pt.style.width="1px",Pt.style.height="1px",Pt.style.opacity="0",Pt.style.position="fixed",Pt.style.left="-10px",Pt.style.top="-10px",document.body.appendChild(Pt),oe.current=Pt,at.dataTransfer.setDragImage(Pt,0,0)}},onDragOver:at=>{if(!R)return;at.preventDefault(),me!==Ce&&he(Ce);const yt=W(Ce,q,A.key,R==null?void 0:R.id),mt=yt!=null&&yt!==Number.POSITIVE_INFINITY?Kn(Ys(A.date,yt)):null;st(mt,{x:at.clientX,y:at.clientY})},onDrop:at=>{at.preventDefault(),ve(Ce)},onDragEnd:()=>{ae(null),Ne(null),he(null),ht()},id:`entry-${T.id}`,style:{display:"block",width:"100%",flex:1,padding:"0.5rem 0.8rem",margin:"-0.25rem -1.6rem"},onClick:tt};return T.to?r.jsx(et,{to:T.to,className:"card-link",...lt,onClick:at=>{if(tt(at),s!=null&&s.id)try{sessionStorage.setItem(`event-schedule-highlight:${s.id}`,T.id)}catch{}},children:Ue},T.id):r.jsx("div",{id:`entry-${T.id}`,style:{display:"block",width:"100%",flex:1,padding:"0.25rem 0.4rem"},children:Ue},T.id)};return q.length===0?r.jsx("p",{className:"muted",style:{padding:"0.5rem 0"},onDragOver:T=>{if(!R)return;T.preventDefault(),Ne(A.key),he(0);const Ce=W(0,q,A.key,R==null?void 0:R.id),Ge=Ce!=null&&Ce!==Number.POSITIVE_INFINITY?Kn(Ys(A.date,Ce)):null;st(Ge,{x:T.clientX,y:T.clientY})},onDrop:T=>{R&&(T.preventDefault(),ve(0))},children:"Nothing scheduled."}):r.jsx("ul",{className:"status-list schedule-list",style:{margin:0},children:q.map((T,Ce)=>{const Ge=T.id===Ut,Ee=(_e==null?void 0:_e.entry.id)===T.id,ke=Ge||Ee?{boxShadow:"inset 0 0 0 2px #3b82f6",borderRadius:"8px"}:void 0;return r.jsx("li",{style:{display:"block",padding:"0.5rem 0",borderBottom:"1px solid rgba(255, 255, 255, 0.12)",width:"100%",overflow:"hidden"},onDragOver:ze=>{if(!R)return;ze.preventDefault(),me!==Ce&&he(Ce);const Ue=W(Ce,q,A.key,R==null?void 0:R.id),tt=Ue!=null&&Ue!==Number.POSITIVE_INFINITY?Kn(Ys(A.date,Ue)):null;st(tt,{x:ze.clientX,y:ze.clientY})},onDrop:ze=>{ze.preventDefault(),ve(Ce)},children:r.jsxs("div",{className:"schedule-entry",style:ke,children:[r.jsx("div",{style:{fontWeight:600},className:"muted schedule-time","data-ghost-time":"time",role:"button",tabIndex:0,onClick:ze=>{ze.stopPropagation(),Le({entry:T,day:A,anchor:ze.currentTarget,anchorRect:Ae(ze.currentTarget)})},onKeyDown:ze=>{(ze.key==="Enter"||ze.key===" ")&&(ze.preventDefault(),ze.stopPropagation(),Le({entry:T,day:A,anchor:ze.currentTarget,anchorRect:Ae(ze.currentTarget)}))},title:"Edit time",children:T.hourKey}),r.jsx("div",{className:"schedule-entry-content",children:Se(T,Ce)})]})},T.id)})})})()]},A.key)),_e&&typeof document<"u"?Bi.createPortal(r.jsx("div",{ref:Qe,style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:9998,background:"var(--overlay-scrim-subtle)"},onClick:()=>{Le(null),Ye(null)},children:(()=>{const A=_e.anchorRect||Ae(_e.anchor),H=12,J=340,q=360,ve=typeof window<"u"?window.innerWidth:J,Se=typeof window<"u"?window.innerHeight:q,T=H,Ce=ve-H,Ge=H,Ee=Se-H,ke=A?A.right+12:T,ze=A?A.top-Ge:q,Ue=A?Ee-A.bottom:q,tt=ze>=q||ze>Ue,lt=A?tt?A.top-q-12:A.bottom+12:Ge+24,at=Math.min(Math.max(ke,T),Ce-J),yt=Math.min(Math.max(lt,Ge),Ee-q);return r.jsxs("div",{style:{position:"fixed",top:yt,left:at,background:"var(--modal-surface)",border:"1px solid var(--modal-border)",borderRadius:"10px",boxShadow:"0 10px 25px rgba(0,0,0,0.12)",padding:"0.85rem",display:"inline-flex",flexDirection:"column",gap:"0.6rem",minWidth:"280px",maxWidth:"90vw"},onClick:mt=>mt.stopPropagation(),className:"schedule-time-picker",children:[r.jsx(Mt,{ref:Pe,options:{enableTime:!0,time_24hr:!0,dateFormat:"Y-m-d H:i",allowInput:!0,inline:!0,clickOpens:!1,closeOnSelect:!1},onChange:mt=>Ye(mt[0]??null),onValueUpdate:mt=>Ye(mt[0]??null)}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end"},children:[r.jsx("button",{type:"button",className:"ghost",onClick:()=>L(),style:{padding:"0.35rem 0.9rem"},children:"Save"}),r.jsx("button",{type:"button",className:"ghost",onClick:()=>{Le(null),Ye(null)},style:{padding:"0.35rem 0.9rem"},children:"Cancel"})]})]})})()}),document.body):null,Q&&typeof document<"u"&&Bi.createPortal(r.jsx("div",{onClick:()=>{P(null)},role:"button",tabIndex:-1,style:{position:"fixed",inset:0,background:"var(--overlay-scrim)",backdropFilter:"blur(6px)",zIndex:9999,pointerEvents:"auto",display:"flex",alignItems:"center",justifyContent:"center",padding:"2rem 1rem"},onKeyDown:A=>{A.key==="Escape"?P(null):A.key==="Enter"&&Q.entry.to&&(n(Q.entry.to),P(null))},children:r.jsxs("div",{className:"card",onClick:A=>{A.stopPropagation(),Q.entry.to&&(Xe(Q.entry.id),n(Q.entry.to)),P(null)},style:$,children:[r.jsxs("div",{className:"card-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsx("h3",{style:{margin:0},children:Q.entry.title}),r.jsx("div",{style:{display:"flex",gap:"0.35rem",alignItems:"center"},children:(()=>{const A=z[Q.entry.type],H={minWidth:"2.4ch",textAlign:"center",display:"inline-block"};return Q.entry.type==="Transport"||Q.entry.type==="Ground Crew"?r.jsxs(r.Fragment,{children:[r.jsx("span",{className:`badge ${Q.entry.transportComplete?"success":"danger"}`,style:H,children:Q.entry.transportComplete?"":"!"}),r.jsx("span",{className:"badge schedule-type-badge",style:A,children:Q.entry.type})]}):Q.entry.type==="Accommodation"?r.jsxs(r.Fragment,{children:[r.jsx("span",{className:`badge ${Q.entry.booked&&!Q.entry.missingCoordinates?"success":"danger"}`,style:H,children:Q.entry.booked&&!Q.entry.missingCoordinates?"":"!"}),r.jsx("span",{className:"badge schedule-type-badge",style:A,children:Q.entry.type})]}):Q.entry.type==="Innhopp"?r.jsxs(r.Fragment,{children:[r.jsx("span",{className:`badge ${Q.entry.ready?"success":"danger"}`,style:H,children:Q.entry.ready?"":"!"}),r.jsx("span",{className:"badge schedule-type-badge",style:A,children:Q.entry.type})]}):Q.entry.type==="Other"?r.jsxs(r.Fragment,{children:[r.jsx("span",{className:`badge ${Q.entry.otherComplete?"success":"danger"}`,style:H,children:Q.entry.otherComplete?"":"!"}),r.jsx("span",{className:"badge schedule-type-badge",style:A,children:Q.entry.type})]}):Q.entry.type==="Meal"?r.jsxs(r.Fragment,{children:[r.jsx("span",{className:`badge ${Q.entry.mealComplete?"success":"danger"}`,style:H,children:Q.entry.mealComplete?"":"!"}),r.jsx("span",{className:"badge schedule-type-badge",style:A,children:Q.entry.type})]}):null})()})]}),r.jsx("div",{className:"card-body",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(240px, 1fr))",gap:"1.1rem"},children:(()=>{const A=(H,J,q)=>r.jsxs("div",{children:[r.jsx("div",{className:"muted",style:{fontWeight:700,letterSpacing:"0.04em"},children:J}),r.jsx("div",{children:q??""})]},H);if(Q.entry.type==="Innhopp"){const H=[];return Q.entry.scheduledAt&&H.push(A("scheduled_at","SCHEDULED AT",to(Q.entry.scheduledAt))),H.push(A("reason","REASON FOR CHOICE",Q.entry.innhoppReason||"")),H.push(A("elevation","ELEVATION",Q.entry.innhoppElevation!=null?Gi(Q.entry.innhoppElevation):"")),H.push(A("takeoff","TAKEOFF AIRFIELD",Q.entry.innhoppTakeoffName||"")),H.push(A("elevation_diff","ELEVATION DIFFERENCE",Q.entry.innhoppElevationDiff!=null?Gi(Q.entry.innhoppElevationDiff):"")),H.push(A("rescue_boat","RESCUE BOAT",Q.entry.innhoppRescueBoat==null?"":Q.entry.innhoppRescueBoat?"Yes":"No")),H.push(A("primary","PRIMARY AREA",Q.entry.innhoppPrimaryName?`${Q.entry.innhoppPrimaryName}${Q.entry.innhoppPrimarySize?` (${Q.entry.innhoppPrimarySize})`:""}`:"")),H.push(A("secondary","SECONDARY AREA",Q.entry.innhoppSecondaryName?`${Q.entry.innhoppSecondaryName}${Q.entry.innhoppSecondarySize?` (${Q.entry.innhoppSecondarySize})`:""}`:"")),H.push(A("risk","RISK ASSESSMENT",Q.entry.innhoppRisk||"")),H.push(A("minimum","MINIMUM REQUIREMENTS",Q.entry.innhoppMinimumRequirements||"")),H.push(A("notes","NOTES",Q.entry.notes||"")),H.push(A("landowners","LANDOWNERS PERMISSION",Q.entry.innhoppLandOwnerPermission==null?"":Q.entry.innhoppLandOwnerPermission?"Yes":"No")),Q.entry.innhoppCoordinates&&H.push(r.jsx("div",{style:{gridColumn:"1 / -1",display:"grid",justifyContent:"center",alignItems:"center",gap:"0.25rem",textAlign:"center"},children:r.jsx("div",{children:r.jsx("button",{type:"button",className:"link-button",style:{fontSize:"1rem"},onClick:J=>{J.stopPropagation(),window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(Q.entry.innhoppCoordinates||"")}`,"_blank")},children:"Open in Maps"})})},"open-maps")),H}return r.jsx(r.Fragment,{children:Q.entry.type==="Accommodation"?r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsx("div",{className:"muted",style:{fontWeight:700,letterSpacing:"0.04em"},children:"BOOKED"}),r.jsx("div",{children:Q.entry.booked?"Yes":"No"})]},"booked"),Q.entry.scheduledAt?r.jsxs("div",{children:[r.jsx("div",{className:"muted",style:{fontWeight:700,letterSpacing:"0.04em"},children:"SCHEDULED AT"}),r.jsx("div",{children:to(Q.entry.scheduledAt)})]},"scheduled"):null,r.jsxs("div",{children:[r.jsx("div",{className:"muted",style:{fontWeight:700,letterSpacing:"0.04em"},children:"NOTES"}),r.jsx("div",{children:Q.entry.notes||""})]},"notes"),r.jsx("div",{style:{gridColumn:"1 / -1",display:"flex",justifyContent:"center"},children:Q.entry.coordinates?r.jsx("button",{type:"button",className:"link-button",style:{fontSize:"1rem"},onClick:H=>{H.stopPropagation(),window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(Q.entry.coordinates||"")}`,"_blank")},children:"Open in Maps"}):""})]}):r.jsxs(r.Fragment,{children:[Q.entry.subtitle?r.jsxs("div",{children:[r.jsx("div",{className:"muted",style:{fontWeight:700,letterSpacing:"0.04em"},children:"SUBTITLE"}),r.jsx("div",{children:Q.entry.subtitle})]},"subtitle"):null,Q.entry.type==="Meal"&&r.jsxs("div",{children:[r.jsx("div",{className:"muted",style:{fontWeight:700,letterSpacing:"0.04em"},children:"LOCATION"}),r.jsx("div",{children:Q.entry.location||""})]},"meal-location"),Q.entry.scheduledAt?r.jsxs("div",{children:[r.jsx("div",{className:"muted",style:{fontWeight:700,letterSpacing:"0.04em"},children:"SCHEDULED AT"}),r.jsx("div",{children:to(Q.entry.scheduledAt)})]},"scheduled"):null,r.jsxs("div",{children:[r.jsx("div",{className:"muted",style:{fontWeight:700,letterSpacing:"0.04em"},children:"NOTES"}),r.jsx("div",{children:Q.entry.notes||""})]},"notes"),(Q.entry.type==="Transport"||Q.entry.type==="Ground Crew")&&Q.entry.vehicles?r.jsxs("div",{children:[r.jsx("div",{className:"muted",style:{fontWeight:700,letterSpacing:"0.04em"},children:"VEHICLES"}),r.jsx("div",{style:{marginTop:"0.15rem"},children:Q.entry.vehicles.length===0?r.jsx("div",{className:"muted",children:""}):Q.entry.vehicles.map((H,J)=>r.jsxs("div",{className:"muted",children:[r.jsx("strong",{children:H.name}),H.driver?` (Driver: ${H.driver})`:"",typeof H.passenger_capacity=="number"?`  Capacity: ${H.passenger_capacity}`:""]},J))})]},"vehicles"):null,(Q.entry.type==="Transport"||Q.entry.type==="Ground Crew")&&Q.entry.transportRouteOrigin&&Q.entry.transportRouteDestination?r.jsx("div",{style:{gridColumn:"1 / -1",display:"flex",justifyContent:"center"},children:r.jsx("button",{type:"button",className:"link-button",style:{fontSize:"1rem"},onClick:H=>{H.stopPropagation();const J=Q.entry.transportRouteOrigin||"",q=Q.entry.transportRouteDestination||"";window.open(`https://www.google.com/maps/dir/?api=1&origin=${encodeURIComponent(J)}&destination=${encodeURIComponent(q)}`,"_blank")},children:"Open route"})},"route"):null,Q.entry.type==="Other"&&Q.entry.coordinates?r.jsx("div",{style:{gridColumn:"1 / -1",display:"flex",justifyContent:"center"},children:r.jsx("button",{type:"button",className:"link-button",style:{fontSize:"1rem"},onClick:H=>{H.stopPropagation(),window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(Q.entry.coordinates||"")}`,"_blank")},children:"Open in Maps"})},"other-maps"):null]})})})()})]})}),document.body)]})},K0=()=>{const{vehicleId:e}=Tn(),n=gt(),[t]=Zc(),s=t.get("transportId"),a=t.get("groundCrewId"),[i,l]=o.useState({event_id:"",name:"",driver:"",passenger_capacity:"",notes:""}),[u,d]=o.useState([]),[x,_]=o.useState(!0),[C,N]=o.useState(!1),[F,v]=o.useState(null);o.useEffect(()=>{let p=!1;return(async()=>{if(e){_(!0),v(null);try{const[y,j]=await Promise.all([s0(Number(e)),$t()]);if(p)return;d(Array.isArray(j)?j:[]),l({event_id:String(y.event_id),name:y.name,driver:y.driver||"",passenger_capacity:String(y.passenger_capacity),notes:y.notes||""})}catch(y){p||v(y instanceof Error?y.message:"Failed to load vehicle")}finally{p||_(!1)}}})(),()=>{p=!0}},[e]);const b=async p=>{if(p.preventDefault(),!!e){N(!0),v(null);try{const m=await a0(Number(e),{event_id:Number(i.event_id),name:i.name.trim(),driver:i.driver.trim()||void 0,passenger_capacity:Number(i.passenger_capacity)||0,notes:i.notes.trim()||void 0});v("Vehicle updated"),l({event_id:String(m.event_id),name:m.name,driver:m.driver||"",passenger_capacity:String(m.passenger_capacity),notes:m.notes||""})}catch(m){v(m instanceof Error?m.message:"Failed to update vehicle")}finally{N(!1)}}},E=async()=>{if(e&&window.confirm("Are you sure you want to delete this vehicle?"))try{await i0(Number(e)),n(s?`/logistics/${s}`:a?`/logistics/ground-crew/${a}`:"/logistics")}catch(p){v(p instanceof Error?p.message:"Failed to delete vehicle")}};return x?r.jsx("p",{className:"muted",children:"Loading vehicle"}):r.jsxs("section",{children:[r.jsxs("header",{className:"page-header",children:[r.jsxs("div",{children:[r.jsx("h2",{children:"Vehicle details"}),r.jsx("p",{children:"Edit vehicle information and assignment."})]}),r.jsxs("div",{className:"card-actions",children:[r.jsx("button",{className:"ghost danger",type:"button",onClick:E,children:"Delete vehicle"}),r.jsx("button",{className:"ghost",type:"button",onClick:()=>n(s?`/logistics/${s}`:a?`/logistics/ground-crew/${a}`:"/logistics"),children:s?"Back to route":a?"Back to ground crew":"Back to logistics"})]})]}),r.jsx("article",{className:"card",children:r.jsxs("form",{className:"form-grid",onSubmit:b,children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Event"}),r.jsxs("select",{value:i.event_id,onChange:p=>l(m=>({...m,event_id:p.target.value})),required:!0,children:[r.jsx("option",{value:"",children:"Select event"}),u.map(p=>r.jsx("option",{value:p.id,children:p.name},p.id))]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Name"}),r.jsx("input",{type:"text",value:i.name,onChange:p=>l(m=>({...m,name:p.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Driver"}),r.jsx("input",{type:"text",value:i.driver,onChange:p=>l(m=>({...m,driver:p.target.value}))})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Passenger capacity"}),r.jsx("input",{type:"number",min:0,value:i.passenger_capacity,onChange:p=>l(m=>({...m,passenger_capacity:p.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Notes"}),r.jsx("input",{type:"text",value:i.notes,onChange:p=>l(m=>({...m,notes:p.target.value}))})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"submit",className:"primary",disabled:C,children:C?"Saving":"Save vehicle"}),F&&r.jsx("span",{className:"muted",children:F})]})]})})]})},ss={current:{}},oh=/(\d{1,3})(\d{1,2})'(\d{1,2}(?:\.\d+)?)"?([NSEW])/i,Zu=e=>{const n=e.trim().match(oh);if(!n)return null;const[,t,s,a,i]=n,l=Number(t),u=Number(s),d=Number(a),x=i.toUpperCase();if(Number.isNaN(l)||Number.isNaN(u)||Number.isNaN(d))return null;const _=l+u/60+d/3600;return x==="S"||x==="W"?-_:_},ef=e=>{if(!e)return null;const n=new RegExp(oh.source,"ig"),t=Array.from(e.matchAll(n));if(t.length<2)return null;const s=Zu(t[0][0]),a=Zu(t[1][0]);if(s==null||a==null)return null;const i=t[0][4].toUpperCase(),l=t[1][4].toUpperCase();return(i==="N"||i==="S")&&(l==="E"||l==="W")?{lat:s,lon:a}:(i==="E"||i==="W")&&(l==="N"||l==="S")?{lat:a,lon:s}:{lat:s,lon:a}},Y0=(e,n)=>{const t=_=>_*Math.PI/180,a=t(n.lat-e.lat),i=t(n.lon-e.lon),l=t(e.lat),u=t(n.lat),d=Math.sin(a/2)*Math.sin(a/2)+Math.sin(i/2)*Math.sin(i/2)*Math.cos(l)*Math.cos(u);return 6371*(2*Math.atan2(Math.sqrt(d),Math.sqrt(1-d)))},tf=()=>({name:"",description:"",size:"",obstacles:""}),Cn=e=>!!e&&e.trim().length>0,ii=e=>e!=null&&Number.isFinite(e),q0=e=>e!=null,li=e=>({name:(e==null?void 0:e.name)||"",description:(e==null?void 0:e.description)||"",size:(e==null?void 0:e.size)||"",obstacles:(e==null?void 0:e.obstacles)||""}),nf=e=>Array.isArray(e)?e.map(n=>({name:n.name||"",telephone:n.telephone||"",email:n.email||""})):[],Q0=e=>e.filter(n=>{var i,l,u;const t=(i=n.name)==null?void 0:i.trim(),s=(l=n.telephone)==null?void 0:l.trim(),a=(u=n.email)==null?void 0:u.trim();return!!(t||s||a)}),rf=e=>({name:e.name.trim(),description:e.description.trim(),size:e.size.trim(),obstacles:e.obstacles.trim()}),sf=()=>{var Xe,f,w,z,W,Re,$e;const{eventId:e,innhoppId:n}=Tn(),t=gt(),s=Jt(),a=!n||n==="new",[i,l]=o.useState(null),[u,d]=o.useState(null),[x,_]=o.useState([]),[C,N]=o.useState(""),F={name:"",sequence:1,coordinates:"",scheduled_at:"",notes:"",takeoff_airfield_id:void 0,elevation:void 0,reason_for_choice:"",adjust_altimeter_aad:"",notam:"",distance_by_air:void 0,distance_by_road:void 0,primary_landing_area:tf(),secondary_landing_area:tf(),risk_assessment:"",safety_precautions:"",jumprun:"",hospital:"",rescue_boat:void 0,minimum_requirements:"",land_owners:[],land_owner_permission:void 0,image_files:[]},[v,b]=o.useState(F),[E,p]=o.useState({name:"",elevation:0,coordinates:"",description:""}),[m,y]=o.useState(!1),[j,O]=o.useState(!1),[k,I]=o.useState(!0),[M,X]=o.useState(null),[se,R]=o.useState(null),[ae,de]=o.useState(!1),[Ne,me]=o.useState(""),[he,we]=o.useState(!1),ue=o.useRef(null),[ge,fe]=o.useState(null),[Y,Z]=o.useState(0),[ne,oe]=o.useState(!1),pe=D=>{if(!D)return[];const K=Array.from(D.items||[]).map(g=>g.kind==="file"?g.getAsFile():null).filter(g=>!!g&&g.type.startsWith("image/")),h=Array.from(D.files||[]).filter(g=>g.type.startsWith("image/"));return K.length?K:h},Ae=`primary ${ae?"saved":""}`,_e=j?"Saving":ae?"Saved":"Save",Le=o.useCallback(D=>JSON.stringify(D),[v]),Pe=o.useMemo(()=>Le(v),[Le,v]),[qe,Ye]=o.useState(!1),Qe=o.useMemo(()=>{var K;if(v.elevation==null)return null;const D=(K=x.find(h=>h.id===v.takeoff_airfield_id))==null?void 0:K.elevation;return D==null?null:D-v.elevation},[v.elevation,v.takeoff_airfield_id,x]),Q=o.useMemo(()=>(v.image_files||[]).filter(D=>D==null?void 0:D.data).map((D,K)=>({key:`${D.data.slice(0,24)}-${K}`,name:D.name||`Image ${K+1}`,mime:D.mime_type||"image/*",data:D.data,src:`data:${D.mime_type||"image/*"};base64,${D.data}`})),[v.image_files]),P=D=>D?Vp(D.trim()):"",$=D=>{D&&(D.style.height="auto",D.style.height=`${D.scrollHeight}px`)},V=D=>{$(D.currentTarget)},ee=o.useMemo(()=>({sequence:!(v.sequence&&v.sequence>0),name:!Cn(v.name),coordinates:!Cn(v.coordinates),elevation:!ii(v.elevation),scheduled_at:!Cn(v.scheduled_at),takeoff_airfield_id:!ii(v.takeoff_airfield_id),distance_by_air:!ii(v.distance_by_air),distance_by_road:!ii(v.distance_by_road),jumprun:!Cn(v.jumprun),primary_name:!Cn(v.primary_landing_area.name),primary_description:!Cn(v.primary_landing_area.description),primary_size:!Cn(v.primary_landing_area.size),primary_obstacles:!Cn(v.primary_landing_area.obstacles),risk_assessment:!Cn(v.risk_assessment),safety_precautions:!Cn(v.safety_precautions),minimum_requirements:!Cn(v.minimum_requirements),hospital:!Cn(v.hospital),rescue_boat:!q0(v.rescue_boat)}),[v]),De=o.useMemo(()=>Object.values(ee).every(D=>!D),[ee]);o.useEffect(()=>{document.querySelectorAll("textarea[data-autosize]").forEach(K=>$(K))},[v]),o.useEffect(()=>{let D=!1;return(async()=>{var h;if(e){a&&(d(null),b(F),N(""),we(!1)),I(!0),X(null);try{if(!a&&n){const g=await Fp(Number(n));if(D)return;d(g);const L=g.scheduled_at?"":(()=>{var U;if(g.event_id&&((U=ss.current)!=null&&U[g.event_id])){const le=ss.current[g.event_id];if(le.starts_at){const be=ft(le.starts_at);return be?(be.setUTCHours(9,0,0,0),be.toISOString()):""}}return""})();if(b({name:g.name,sequence:g.sequence,coordinates:g.coordinates||"",elevation:g.elevation??void 0,scheduled_at:P(g.scheduled_at)||L,notes:g.notes||"",takeoff_airfield_id:g.takeoff_airfield_id||void 0,reason_for_choice:g.reason_for_choice||"",adjust_altimeter_aad:g.adjust_altimeter_aad||"",notam:g.notam||"",distance_by_air:g.distance_by_air??void 0,distance_by_road:g.distance_by_road??void 0,primary_landing_area:li(g.primary_landing_area),secondary_landing_area:li(g.secondary_landing_area),risk_assessment:g.risk_assessment||"",safety_precautions:g.safety_precautions||"",jumprun:g.jumprun||"",hospital:g.hospital||"",rescue_boat:g.rescue_boat??void 0,minimum_requirements:g.minimum_requirements||"",land_owners:nf(g.land_owners),land_owner_permission:g.land_owner_permission??void 0,image_files:g.image_files||[]}),we(!1),N(g.takeoff_airfield_id?String(g.takeoff_airfield_id):""),g.event_id)try{const U=await Jr(g.event_id);if(!D&&(l(U),ss.current={...ss.current,[g.event_id]:U},!g.scheduled_at&&U.starts_at)){const le=ft(U.starts_at);le&&(le.setUTCHours(9,0,0,0),b(be=>({...be,scheduled_at:le.toISOString()})))}}catch{}}else{const g=(h=s.state)==null?void 0:h.copyInnhopp;if(e)try{const L=await Jr(Number(e));if(!D&&(l(L),ss.current={...ss.current,[L.id]:L},!(g!=null&&g.scheduled_at)&&L.starts_at)){const U=ft(L.starts_at);U&&(U.setUTCHours(9,0,0,0),b(le=>({...le,scheduled_at:U.toISOString()})))}}catch{}g&&!D&&(b({name:g.name,sequence:g.sequence,coordinates:g.coordinates||"",elevation:g.elevation??void 0,scheduled_at:P(g.scheduled_at),notes:g.notes||"",takeoff_airfield_id:g.takeoff_airfield_id||void 0,reason_for_choice:g.reason_for_choice||"",adjust_altimeter_aad:g.adjust_altimeter_aad||"",notam:g.notam||"",distance_by_air:g.distance_by_air??void 0,distance_by_road:g.distance_by_road??void 0,primary_landing_area:li(g.primary_landing_area),secondary_landing_area:li(g.secondary_landing_area),risk_assessment:g.risk_assessment||"",safety_precautions:g.safety_precautions||"",jumprun:g.jumprun||"",hospital:g.hospital||"",rescue_boat:g.rescue_boat??void 0,minimum_requirements:g.minimum_requirements||"",land_owners:nf(g.land_owners),land_owner_permission:g.land_owner_permission??void 0,image_files:g.image_files||[]}),we(!1),N(g.takeoff_airfield_id?String(g.takeoff_airfield_id):""))}}catch(g){D||X(g instanceof Error?g.message:"Failed to load innhopp")}finally{D||I(!1)}}})(),()=>{D=!0}},[e,n,a]),o.useEffect(()=>{let D=!1;return(async()=>{try{const h=await Pr();D||_(Array.isArray(h)?h:[])}catch{}})(),()=>{D=!0}},[]);const Fe=(D,K)=>{var U,le,be,He,Te,Ke,Ie,A,H,J,q;const h={...v,...D},g=Q0(h.land_owners||[]),L={sequence:h.sequence,name:h.name.trim(),coordinates:(U=h.coordinates)==null?void 0:U.trim(),scheduled_at:((le=h.scheduled_at)==null?void 0:le.trim())||void 0,notes:((be=h.notes)==null?void 0:be.trim())||"",elevation:h.elevation,takeoff_airfield_id:h.takeoff_airfield_id,reason_for_choice:(He=h.reason_for_choice)==null?void 0:He.trim(),adjust_altimeter_aad:(Te=h.adjust_altimeter_aad)==null?void 0:Te.trim(),notam:(Ke=h.notam)==null?void 0:Ke.trim(),distance_by_air:h.distance_by_air,distance_by_road:h.distance_by_road,primary_landing_area:rf(h.primary_landing_area),secondary_landing_area:rf(h.secondary_landing_area),risk_assessment:(Ie=h.risk_assessment)==null?void 0:Ie.trim(),safety_precautions:(A=h.safety_precautions)==null?void 0:A.trim(),jumprun:(H=h.jumprun)==null?void 0:H.trim(),hospital:(J=h.hospital)==null?void 0:J.trim(),rescue_boat:h.rescue_boat??void 0,minimum_requirements:(q=h.minimum_requirements)==null?void 0:q.trim(),land_owners:g.map(ve=>({name:ve.name.trim(),telephone:ve.telephone.trim(),email:ve.email.trim()})),land_owner_permission:h.land_owner_permission??void 0};return K!=null&&K.includeImages&&(L.image_files=(h.image_files||[]).map(ve=>{var Se,T;return{name:((Se=ve.name)==null?void 0:Se.trim())||void 0,mime_type:((T=ve.mime_type)==null?void 0:T.trim())||void 0,data:ve.data}})),L},re=(D,K,h)=>{b(g=>{const L=D==="primary"?{...g.primary_landing_area,[K]:h}:{...g.secondary_landing_area,[K]:h};return D==="primary"?{...g,primary_landing_area:L}:{...g,secondary_landing_area:L}})},st=(D,K,h)=>{b(g=>{const L=[...g.land_owners||[]];return L[D]={...L[D],[K]:h},{...g,land_owners:L}})},ht=()=>{b(D=>({...D,land_owners:[...D.land_owners||[],{name:"",telephone:"",email:""}]}))},Dt=D=>{b(K=>({...K,land_owners:(K.land_owners||[]).filter((h,g)=>g!==D)}))},Lt=D=>new Promise((K,h)=>{const g=new FileReader;g.onload=()=>{const L=g.result;if(typeof L!="string"){h(new Error("Failed to read file"));return}const U=L.split(",")[1]||"";K(U)},g.onerror=()=>h(g.error||new Error("Failed to read file")),g.readAsDataURL(D)}),G=async D=>{if(!D||D.length===0)return;const K=Array.isArray(D)?D:Array.from(D);try{const h=[];for(const le of K){const be=await Lt(le);h.push({name:le.name,mime_type:le.type||void 0,data:be})}const g=v.image_files||[],L=[...g];h.forEach(le=>{L.some(be=>be.data===le.data)||L.push(le)}),L.length-g.length>0&&Z(g.length),b(le=>({...le,image_files:L})),we(!0),u&&await ct(L)}catch{}},ce=D=>{b(K=>({...K,image_files:(K.image_files||[]).filter((h,g)=>g!==D)})),we(!0),ge!==null&&ge===D?fe(null):ge!==null&&D<ge&&fe(K=>K!=null?K-1:null),D===Y&&Q.length>1?Z(K=>(K-1+Q.length)%Q.length):D<Y&&Z(K=>Math.max(K-1,0))},ye=D=>{D.preventDefault(),D.stopPropagation(),oe(!0)},We=D=>{D.preventDefault(),D.stopPropagation(),oe(!1)},it=D=>{var K,h;D.preventDefault(),D.stopPropagation(),oe(!1),(h=(K=D.dataTransfer)==null?void 0:K.files)!=null&&h.length&&G(D.dataTransfer.files)},Ze=D=>{const K=pe(D.clipboardData);K.length&&(D.preventDefault(),G(K))};o.useEffect(()=>{const D=ef(v.coordinates),K=x.find(U=>U.id===v.takeoff_airfield_id),h=ef(K==null?void 0:K.coordinates);if(!D||!h)return;const g=Y0(D,h),L=Math.round(g*10)/10;b(U=>U.distance_by_air===L?U:{...U,distance_by_air:L})},[v.coordinates,v.takeoff_airfield_id,x]);const vt=async D=>{if(D.preventDefault(),!!e){O(!0),R(null),de(!1);try{const K=a||he,h=Fe(void 0,{includeImages:K});if(a||!u){const g=await jx(Number(e),h);d(g),R("Innhopp created"),t(`/events/${e}/innhopps/${g.id}`,{replace:!0,state:{}})}else{const g=await ji(u.id,h);d(g),R("Innhopp updated")}K&&we(!1),de(!0),me(Pe)}catch(K){R(K instanceof Error?K.message:"Failed to save innhopp"),de(!1)}finally{O(!1)}}},ct=async D=>{if(e){if(!u){R("Save the innhopp first to persist images.");return}O(!0),R(null),de(!1);try{const K=Fe({image_files:D},{includeImages:!0}),h=await ji(u.id,K);d(h),b(g=>({...g,image_files:h.image_files||D})),R("Images saved"),de(!0),we(!1),me(Le({...v,image_files:D}))}catch(K){R(K instanceof Error?K.message:"Failed to save images"),de(!1)}finally{O(!1)}}},It=async()=>{if(!(!u||!i||qe||!window.confirm("Are you sure you want to delete this innhopp? This cannot be undone."))){Ye(!0),R(null);try{await _x(u.id),t(`/events/${i.id}`)}catch(K){R(K instanceof Error?K.message:"Failed to delete innhopp"),Ye(!1)}}},Ut=async()=>{var D;O(!0),R(null);try{const K=await Qi({name:E.name.trim(),elevation:Number(E.elevation)||0,coordinates:E.coordinates.trim(),description:((D=E.description)==null?void 0:D.trim())||void 0});if(_(h=>[...h,K]),b(h=>({...h,takeoff_airfield_id:K.id})),N(String(K.id)),y(!1),p({name:"",elevation:0,coordinates:"",description:""}),!u)R("Airfield created and assigned as takeoff");else{const h=Fe({takeoff_airfield_id:K.id},{includeImages:!1}),g=await ji(u.id,h);d(g),b(L=>({...L,takeoff_airfield_id:g.takeoff_airfield_id||K.id})),R("Airfield created, attached, and innhopp saved")}}catch(K){R(K instanceof Error?K.message:"Failed to create airfield")}finally{O(!1)}};return o.useEffect(()=>{ae&&Pe!==Ne&&de(!1)},[Pe,Ne,ae]),o.useEffect(()=>{const D=K=>{const h=pe(K.clipboardData);h.length&&(K.preventDefault(),G(h))};return window.addEventListener("paste",D),()=>window.removeEventListener("paste",D)},[]),k?r.jsx("p",{className:"muted",children:"Loading innhopp"}):M?r.jsx("p",{className:"error-text",children:M}):!i||!u&&!a?r.jsx("p",{className:"error-text",children:"Innhopp not found."}):r.jsxs("section",{children:[r.jsxs("header",{className:"page-header",children:[r.jsx("div",{children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flexWrap:"wrap"},children:[r.jsxs("h2",{style:{margin:0},children:[i.name,"  ",a?"New innhopp":`#${u==null?void 0:u.sequence} ${u==null?void 0:u.name}`]}),!a&&r.jsx("span",{className:`badge ${De?"success":"danger"}`,style:{minWidth:"2.4ch",textAlign:"center",display:"inline-block"},children:De?"OP READY":"!"})]})}),r.jsxs("div",{className:"card-actions",children:[!a&&r.jsx("button",{className:"ghost",type:"button",onClick:()=>t(`/events/${e}/innhopps/new`,{state:{copyInnhopp:u}}),children:"Make a copy"}),!a&&r.jsx("button",{className:"ghost danger",type:"button",onClick:It,disabled:j||qe,children:qe?"Deleting":"Delete innhopp"}),r.jsx("button",{className:"ghost",type:"button",onClick:()=>t(-1),children:"Back"})]})]}),r.jsxs("form",{className:"stack",onSubmit:vt,children:[r.jsxs("article",{className:"card",children:[r.jsxs("div",{className:"form-grid",children:[r.jsxs("div",{className:"form-grid",style:{gridTemplateColumns:"max-content 16px 1fr",gridColumn:"1 / -1",gap:"1rem",alignItems:"end"},children:[r.jsxs("label",{className:`form-field ${ee.sequence?"field-missing":""}`,style:{maxWidth:"140px"},children:[r.jsx("span",{children:"Sequence"}),r.jsx("input",{type:"number",min:1,value:v.sequence,onFocus:D=>D.target.select(),onChange:D=>b(K=>({...K,sequence:Number(D.target.value)})),style:{minWidth:"80px"}})]}),r.jsx("div",{"aria-hidden":"true"}),r.jsxs("label",{className:`form-field ${ee.name?"field-missing":""}`,children:[r.jsx("span",{children:"Name"}),r.jsx("input",{type:"text",value:v.name,onChange:D=>b(K=>({...K,name:D.target.value})),required:!0})]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Reason for choice"}),r.jsx("input",{type:"text",value:v.reason_for_choice||"",onChange:D=>b(K=>({...K,reason_for_choice:D.target.value})),placeholder:"Why this innhopp location was selected"})]}),r.jsxs("div",{className:"form-grid",style:{gridTemplateColumns:(Xe=v.coordinates)!=null&&Xe.trim()?"repeat(2,minmax(0,1fr))":"1fr",gridColumn:"1 / -1",alignItems:"start",gap:"1rem"},children:[r.jsxs("div",{className:"form-grid",style:{gridTemplateColumns:"1fr",rowGap:"0.9rem",gridColumn:(f=v.coordinates)!=null&&f.trim()?"1 / span 1":"1 / -1"},children:[r.jsxs("label",{className:`form-field ${ee.coordinates?"field-missing":""}`,children:[r.jsx("span",{children:"Coordinates (DMS)"}),r.jsxs("div",{className:"input-with-button",style:{display:"flex",alignItems:"center",gap:"0.75rem",width:"fit-content"},children:[r.jsx("input",{type:"text",value:v.coordinates||"",onChange:D=>b(K=>({...K,coordinates:D.target.value})),pattern:`^[0-9]{1,3}[0-9]{1,2}'[0-9]{1,2}(?:\\.\\d+)?"[NS]\\s[0-9]{1,3}[0-9]{1,2}'[0-9]{1,2}(?:\\.\\d+)?"[EW]$`,title:`Use DMS format like 1114'30.0"N 7342'59.7"W`,style:{width:"24ch"}}),(w=v.coordinates)!=null&&w.trim()?r.jsx("button",{type:"button",className:"ghost",style:{minWidth:"12ch",textAlign:"right",justifyContent:"flex-end",whiteSpace:"nowrap"},onClick:()=>{var K;const D=(K=v.coordinates)==null?void 0:K.trim();D&&window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(D)}`,"_blank")},children:"Open in Maps"}):null]})]}),r.jsx("div",{className:"form-grid",style:{gridTemplateColumns:"repeat(auto-fit,minmax(220px,1fr))",gap:"0.75rem"},children:r.jsxs("label",{className:`form-field ${ee.elevation?"field-missing":""}`,children:[r.jsx("span",{children:"Elevation (m)"}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx("input",{type:"number",min:0,value:v.elevation??"",style:{width:"24ch"},onFocus:D=>{const K=D.target;requestAnimationFrame(()=>K.select())},onClick:D=>{const K=D.target;requestAnimationFrame(()=>K.select())},onChange:D=>b(K=>({...K,elevation:Number(D.target.value)}))}),r.jsx("span",{className:"muted",style:{whiteSpace:"nowrap",minWidth:"12ch",textAlign:"left"},children:v.elevation!==void 0&&v.elevation!==null&&!Number.isNaN(v.elevation)?`${nd(v.elevation)} ft`:" ft"})]})]})}),r.jsx("div",{className:"form-grid",style:{gridTemplateColumns:"repeat(auto-fit,minmax(220px,1fr))",gap:"0.75rem"},children:r.jsxs("label",{className:`form-field ${ee.scheduled_at?"field-missing":""}`,children:[r.jsx("span",{children:"Scheduled at"}),r.jsx("div",{style:{width:"24ch"},children:r.jsx(Mt,{value:Je(v.scheduled_at||void 0),options:{enableTime:!0,time_24hr:!0,altInput:!0,altInputClass:"full-width-alt",altFormat:"Y-m-d H:i",dateFormat:"Y-m-d H:i",formatDate:D=>Up(D)},style:{width:"100%"},onChange:D=>{const K=D[0];b(h=>({...h,scheduled_at:K?Bt(K):""}))},placeholder:"Select date & time"})})]})})]}),(z=v.coordinates)!=null&&z.trim()?r.jsxs("div",{className:"form-field",style:{display:"flex",flexDirection:"column",gap:"0.4rem",gridRow:"1 / span 3",gridColumn:"2",alignSelf:"stretch"},children:[r.jsx("span",{className:"muted",style:{fontWeight:700,letterSpacing:"0.04em"},children:"Location preview"}),r.jsx("div",{style:{height:"100%",minHeight:"220px",borderRadius:"10px",overflow:"hidden",border:"1px solid #d7dfe7"},children:r.jsx("iframe",{title:"Innhopp location preview",src:`https://www.google.com/maps?q=${encodeURIComponent(v.coordinates.trim())}&t=k&z=15&output=embed`,loading:"lazy",style:{width:"100%",height:"100%",border:0},allowFullScreen:!0,referrerPolicy:"no-referrer-when-downgrade"})})]}):null]})]}),r.jsx("div",{className:"form-actions",style:{marginTop:"0.75rem"},children:r.jsx("button",{type:"submit",className:Ae,disabled:j||ae,children:_e})})]}),r.jsxs("article",{className:"card",children:[r.jsx("div",{className:"form-field",style:{gridColumn:"1 / -1",marginBottom:"0.5rem"},children:r.jsx("span",{children:"Image gallery"})}),r.jsxs("div",{className:"form-grid",style:{gridTemplateColumns:"1fr",gap:"0.75rem",border:ne?"2px dashed #2b5fab":void 0,borderRadius:ne?"12px":void 0,padding:ne?"0.5rem":void 0,transition:"border 0.15s ease, background 0.15s ease",background:ne?"#f1f6ff":void 0},tabIndex:0,id:"innhopp-gallery-card",onDragOver:ye,onDragLeave:We,onDrop:it,onPaste:Ze,children:[Q.length?r.jsx("div",{style:{width:"100%",display:"flex",justifyContent:"center"},children:r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.6rem",alignItems:"center",gridColumn:"1 / -1",width:"fit-content",maxWidth:"100%"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",width:"100%",justifyContent:"center"},children:[Q.length>4?r.jsx("button",{type:"button",className:"ghost","aria-label":"Previous image",disabled:Q.length<=1,style:{fontSize:"2rem",padding:"0.4rem 0.6rem"},onClick:()=>Z(D=>Q.length?(D-1+Q.length)%Q.length:0),children:""}):r.jsx("div",{style:{width:"2.5rem"}}),r.jsx("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center",gap:"0.5rem",margin:"0 auto",width:"100%",maxWidth:"900px"},children:Q.slice(Y,Y+4).concat(Y+4>Q.length?Q.slice(0,Y+4-Q.length):[]).slice(0,Math.min(4,Q.length)).map((D,K)=>{const h=(Y+K)%Q.length;return r.jsxs("figure",{style:{margin:0,border:"1px solid #d7dfe7",borderRadius:"10px",overflow:"hidden",background:"#fff",display:"flex",flexDirection:"column",position:"relative",cursor:"pointer",width:"180px",height:"180px",flex:"0 0 180px"},onClick:()=>fe(h),children:[r.jsx("button",{type:"button","aria-label":"Remove image",onClick:g=>{g.stopPropagation(),ce(h)},style:{position:"absolute",top:"8px",left:"8px",background:"rgba(0,0,0,0.6)",color:"#fff",border:"none",borderRadius:"50%",width:"28px",height:"28px",padding:0,lineHeight:1,fontSize:"16px",minWidth:"28px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",zIndex:2},children:""}),r.jsx("div",{style:{position:"relative",width:"100%",height:"100%",background:"#f9fbfd",overflow:"hidden"},children:r.jsx("img",{src:D.src,alt:`Image ${h+1}`,style:{position:"absolute",inset:0,width:"100%",height:"100%",objectFit:"cover",objectPosition:"center",display:"block"}})})]},`${D.key}-${K}`)})}),Q.length>4?r.jsx("button",{type:"button",className:"ghost","aria-label":"Next image",disabled:Q.length<=1,style:{fontSize:"2rem",padding:"0.4rem 0.6rem"},onClick:()=>Z(D=>Q.length?(D+1)%Q.length:0),children:""}):r.jsx("div",{style:{width:"2.5rem"}})]}),Q.length>4?r.jsx("div",{style:{display:"flex",gap:"0.4rem",justifyContent:"center",alignItems:"center",flexWrap:"wrap"},children:Q.map((D,K)=>r.jsx("button",{type:"button","aria-label":`Go to image ${K+1}`,onClick:()=>Z(K),style:{width:"10px",height:"10px",borderRadius:"50%",border:"none",background:K===Y?"#2b5fab":"#d3dbe6",cursor:"pointer",padding:0,minWidth:"auto",lineHeight:1,display:"inline-block"}},D.key))}):null]})}):r.jsx("p",{className:"muted",style:{margin:0},children:"No images uploaded yet."}),r.jsxs("div",{className:"form-actions upload-pane",style:{gridColumn:"1 / -1",display:"flex",gap:"0.75rem",alignItems:"center",flexWrap:"wrap",padding:"0.75rem 0.9rem",background:ne?"var(--upload-pane-hover-bg)":void 0,borderColor:ne?"var(--upload-pane-hover-border)":void 0},children:[r.jsx("input",{ref:ue,type:"file",accept:"image/*",multiple:!0,style:{display:"none"},onChange:D=>{G(D.target.files),D.target.value=""}}),r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.25rem"},children:[r.jsx("button",{type:"button",className:"ghost browse-button",onClick:()=>{var D;return(D=ue.current)==null?void 0:D.click()},style:{alignSelf:"flex-start"},children:"Browse your device"}),r.jsx("span",{className:"muted",style:{fontSize:"0.95rem"},children:"or drag & drop / paste images into this box"})]}),r.jsxs("span",{className:"muted",style:{marginLeft:"auto"},children:[Q.length," uploaded"]})]}),ge!==null&&Q[ge]&&typeof document<"u"&&Bi.createPortal(r.jsx("div",{role:"dialog","aria-modal":"true",style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.75)",display:"grid",placeItems:"center",zIndex:1e3,padding:"1rem"},onClick:()=>fe(null),children:r.jsxs("div",{style:{position:"relative",maxWidth:"90vw",maxHeight:"90vh"},onClick:D=>D.stopPropagation(),children:[r.jsx("img",{src:Q[ge].src,alt:Q[ge].name,style:{maxWidth:"90vw",maxHeight:"80vh",display:"block",borderRadius:"12px"}}),r.jsx("div",{style:{position:"absolute",top:"50%",left:"-2.5rem",transform:"translateY(-50%)",display:Q.length>1?"flex":"none"},children:r.jsx("button",{type:"button",className:"ghost",onClick:D=>{D.stopPropagation(),fe(K=>K===null?K:(K-1+Q.length)%Q.length)},children:""})}),r.jsx("div",{style:{position:"absolute",top:"50%",right:"-2.5rem",transform:"translateY(-50%)",display:Q.length>1?"flex":"none"},children:r.jsx("button",{type:"button",className:"ghost",onClick:D=>{D.stopPropagation(),fe(K=>K===null?K:(K+1)%Q.length)},children:""})}),r.jsx("button",{type:"button",className:"ghost danger",style:{position:"absolute",top:"-2.75rem",right:0},onClick:D=>{D.stopPropagation(),fe(null)},children:"Close"})]})}),document.body)]}),r.jsx("div",{className:"form-actions",style:{marginTop:"0.75rem"},children:r.jsx("button",{type:"submit",className:Ae,disabled:j,children:_e})})]}),r.jsxs("article",{className:"card",children:[r.jsxs("div",{className:"form-grid",children:[r.jsxs("label",{className:`form-field ${ee.takeoff_airfield_id?"field-missing":""}`,children:[r.jsx("span",{children:"Takeoff airfield"}),r.jsxs("select",{value:C||(m?"__new__":""),onChange:D=>{const K=D.target.value;if(K==="__new__"){y(!0),N("__new__"),b(h=>({...h,takeoff_airfield_id:void 0}));return}y(!1),N(K),b(h=>({...h,takeoff_airfield_id:K?Number(K):void 0}))},children:[r.jsx("option",{value:"",children:"Select airfield"}),r.jsx("option",{value:"__new__",children:"Create new airfield"}),x.map(D=>r.jsxs("option",{value:D.id,children:[D.name," ",D.elevation?`(${D.elevation} m)`:""]},D.id))]})]}),m&&r.jsxs("div",{className:"form-grid",style:{gridTemplateColumns:"repeat(auto-fit,minmax(200px,1fr))",gridColumn:"1 / -1",border:"1px dashed #c6d1dd",padding:"1rem",borderRadius:"10px",marginTop:"0.5rem"},children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Name"}),r.jsx("input",{type:"text",value:E.name,onChange:D=>p(K=>({...K,name:D.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Elevation (m)"}),r.jsx("input",{type:"number",min:0,value:E.elevation,onFocus:D=>{const K=D.target;requestAnimationFrame(()=>K.select())},onClick:D=>{const K=D.target;requestAnimationFrame(()=>K.select())},onChange:D=>p(K=>({...K,elevation:Number(D.target.value)})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Coordinates"}),r.jsx("input",{type:"text",value:E.coordinates,onChange:D=>p(K=>({...K,coordinates:D.target.value})),style:{minWidth:"22ch"},required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Description"}),r.jsx("input",{type:"text",value:E.description||"",onChange:D=>p(K=>({...K,description:D.target.value})),placeholder:"Optional"})]}),r.jsxs("div",{className:"form-actions",style:{gridColumn:"1 / -1"},children:[r.jsx("button",{type:"button",className:"ghost",onClick:Ut,disabled:j,children:j?"Creating":"Create & attach"}),r.jsx("button",{type:"button",className:"ghost",onClick:()=>{y(!1),N(v.takeoff_airfield_id?String(v.takeoff_airfield_id):"")},disabled:j,children:"Cancel"})]})]}),Qe!==null?r.jsxs("div",{className:"form-grid",style:{gridTemplateColumns:"repeat(auto-fit,minmax(220px,1fr))",gridColumn:"1 / -1"},children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Elevation difference"}),r.jsx("input",{type:"text",readOnly:!0,value:`${Qe} m`})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Adjust altimeter / AAD"}),r.jsx("input",{type:"text",value:v.adjust_altimeter_aad||"",onChange:D=>b(K=>({...K,adjust_altimeter_aad:D.target.value})),placeholder:"Adjustment guidance"})]})]}):r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Adjust altimeter / AAD"}),r.jsx("input",{type:"text",value:v.adjust_altimeter_aad||"",onChange:D=>b(K=>({...K,adjust_altimeter_aad:D.target.value})),placeholder:"Adjustment guidance"})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"NOTAM"}),r.jsx("input",{type:"text",value:v.notam||"",onChange:D=>b(K=>({...K,notam:D.target.value})),placeholder:"NOTAM reference or notes"})]}),r.jsxs("div",{className:"form-grid",style:{gridTemplateColumns:"repeat(auto-fit,minmax(200px,1fr))",gridColumn:"1 / -1",alignItems:"end"},children:[r.jsxs("label",{className:`form-field ${ee.distance_by_air?"field-missing":""}`,children:[r.jsx("span",{children:"Distance by air (km)"}),r.jsx("input",{type:"number",min:0,step:"0.1",value:v.distance_by_air??"",onChange:D=>b(K=>({...K,distance_by_air:D.target.value?Number(D.target.value):void 0}))})]}),r.jsxs("label",{className:`form-field ${ee.distance_by_road?"field-missing":""}`,children:[r.jsx("span",{children:"Distance by road (km)"}),r.jsx("input",{type:"number",min:0,step:"0.1",value:v.distance_by_road??"",onChange:D=>b(K=>({...K,distance_by_road:D.target.value?Number(D.target.value):void 0}))})]}),r.jsxs("div",{className:"form-field",style:{display:"flex",alignItems:"flex-end"},children:[r.jsx("span",{children:""}),(W=v.coordinates)!=null&&W.trim()&&(($e=(Re=x.find(D=>D.id===v.takeoff_airfield_id))==null?void 0:Re.coordinates)!=null&&$e.trim())?r.jsx("button",{type:"button",className:"ghost",onClick:()=>{var h,g,L;const D=(h=v.coordinates)==null?void 0:h.trim(),K=(L=(g=x.find(U=>U.id===v.takeoff_airfield_id))==null?void 0:g.coordinates)==null?void 0:L.trim();!D||!K||window.open(`https://www.google.com/maps/dir/?api=1&origin=${encodeURIComponent(K)}&destination=${encodeURIComponent(D)}&travelmode=driving`,"_blank")},children:"Open route in Maps"}):null]})]}),r.jsxs("label",{className:`form-field ${ee.jumprun?"field-missing":""}`,children:[r.jsx("span",{children:"Jumprun"}),r.jsx("textarea",{"data-autosize":!0,onInput:V,value:v.jumprun||"",onChange:D=>b(K=>({...K,jumprun:D.target.value})),placeholder:"Heading, offset, wind notes"})]})]}),r.jsx("div",{className:"form-actions",style:{marginTop:"0.75rem"},children:r.jsx("button",{type:"submit",className:Ae,disabled:j,children:_e})})]}),r.jsxs("article",{className:"card",children:[r.jsxs("div",{className:"form-grid",style:{gridTemplateColumns:"repeat(auto-fit,minmax(220px,1fr))"},children:[r.jsx("div",{className:"form-field",style:{gridColumn:"1 / -1"},children:r.jsx("span",{children:"Primary landing area"})}),r.jsxs("label",{className:`form-field ${ee.primary_name?"field-missing":""}`,style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Name"}),r.jsx("input",{type:"text",value:v.primary_landing_area.name,onChange:D=>re("primary","name",D.target.value)})]}),r.jsxs("div",{className:"form-grid",style:{gridTemplateColumns:"minmax(200px, 320px) 1fr",gridColumn:"1 / -1",gap:"0.75rem"},children:[r.jsxs("label",{className:`form-field ${ee.primary_size?"field-missing":""}`,children:[r.jsx("span",{children:"Size and surface"}),r.jsx("input",{type:"text",value:v.primary_landing_area.size,onChange:D=>re("primary","size",D.target.value),placeholder:"Dimensions and surface"})]}),r.jsxs("label",{className:`form-field ${ee.primary_obstacles?"field-missing":""}`,children:[r.jsx("span",{children:"Obstacles"}),r.jsx("input",{type:"text",value:v.primary_landing_area.obstacles,onChange:D=>re("primary","obstacles",D.target.value),placeholder:"Powerlines, trees, terrain"})]})]}),r.jsxs("label",{className:`form-field ${ee.primary_description?"field-missing":""}`,style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Description"}),r.jsx("textarea",{"data-autosize":!0,onInput:V,value:v.primary_landing_area.description,onChange:D=>re("primary","description",D.target.value),placeholder:"Surface, Obstacles, etc"})]}),r.jsx("div",{className:"form-field",style:{gridColumn:"1 / -1"},children:r.jsx("span",{children:"Secondary landing area"})}),r.jsxs("label",{className:"form-field",style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Name"}),r.jsx("input",{type:"text",value:v.secondary_landing_area.name,onChange:D=>re("secondary","name",D.target.value)})]}),r.jsxs("div",{className:"form-grid",style:{gridTemplateColumns:"minmax(200px, 320px) 1fr",gridColumn:"1 / -1",gap:"0.75rem"},children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Size and surface"}),r.jsx("input",{type:"text",value:v.secondary_landing_area.size,onChange:D=>re("secondary","size",D.target.value),placeholder:"Dimensions and surface"})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Obstacles"}),r.jsx("input",{type:"text",value:v.secondary_landing_area.obstacles,onChange:D=>re("secondary","obstacles",D.target.value),placeholder:"Powerlines, trees, terrain"})]})]}),r.jsxs("label",{className:"form-field",style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Description"}),r.jsx("textarea",{"data-autosize":!0,onInput:V,value:v.secondary_landing_area.description,onChange:D=>re("secondary","description",D.target.value),placeholder:"Surface, Obstacles, etc"})]}),r.jsxs("label",{className:`form-field ${ee.risk_assessment?"field-missing":""}`,style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Risk assessment"}),r.jsx("textarea",{"data-autosize":!0,onInput:V,value:v.risk_assessment||"",onChange:D=>b(K=>({...K,risk_assessment:D.target.value})),placeholder:"Key risks and mitigations"})]}),r.jsxs("label",{className:`form-field ${ee.safety_precautions?"field-missing":""}`,style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Safety precautions"}),r.jsx("textarea",{"data-autosize":!0,onInput:V,value:v.safety_precautions||"",onChange:D=>b(K=>({...K,safety_precautions:D.target.value})),placeholder:"Briefings and other measures"})]}),r.jsxs("label",{className:`form-field ${ee.minimum_requirements?"field-missing":""}`,style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Minimum requirements"}),r.jsx("textarea",{"data-autosize":!0,onInput:V,value:v.minimum_requirements||"",onChange:D=>b(K=>({...K,minimum_requirements:D.target.value})),placeholder:"Experience level required"})]})]}),r.jsx("div",{className:"form-actions",style:{marginTop:"0.75rem"},children:r.jsx("button",{type:"submit",className:Ae,disabled:j,children:_e})})]}),r.jsxs("article",{className:"card",children:[r.jsxs("div",{className:"form-grid",children:[r.jsxs("label",{className:`form-field ${ee.hospital?"field-missing":""}`,children:[r.jsx("span",{children:"Hospital"}),r.jsx("input",{type:"text",value:v.hospital||"",onChange:D=>b(K=>({...K,hospital:D.target.value})),placeholder:"Nearest hospital / ETA"})]}),r.jsxs("label",{className:`form-field ${ee.rescue_boat?"field-missing":""}`,children:[r.jsx("span",{children:"Rescue boat"}),r.jsxs("select",{value:v.rescue_boat==null?"":v.rescue_boat?"yes":"no",onChange:D=>b(K=>({...K,rescue_boat:D.target.value===""?void 0:D.target.value==="yes"})),children:[r.jsx("option",{value:"",children:"Unknown"}),r.jsx("option",{value:"yes",children:"Yes"}),r.jsx("option",{value:"no",children:"No"})]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Land owner permission"}),r.jsxs("select",{value:v.land_owner_permission==null?"":v.land_owner_permission?"yes":"no",onChange:D=>b(K=>({...K,land_owner_permission:D.target.value===""?void 0:D.target.value==="yes"})),children:[r.jsx("option",{value:"",children:"Unknown"}),r.jsx("option",{value:"yes",children:"Granted"}),r.jsx("option",{value:"no",children:"Pending / No"})]})]}),r.jsxs("div",{className:"form-field",style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Land owners"}),(v.land_owners||[]).length===0&&r.jsx("p",{className:"muted",children:"No land owners added yet."}),(v.land_owners||[]).map((D,K)=>r.jsxs("div",{className:"form-grid",style:{gridTemplateColumns:"repeat(auto-fit,minmax(220px,1fr))",marginBottom:"0.75rem"},children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Name"}),r.jsx("input",{type:"text",value:D.name,onChange:h=>st(K,"name",h.target.value)})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Telephone"}),r.jsx("input",{type:"text",value:D.telephone,onChange:h=>st(K,"telephone",h.target.value)})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Email"}),r.jsx("input",{type:"email",value:D.email,onChange:h=>st(K,"email",h.target.value)})]}),r.jsx("div",{className:"form-actions",style:{gridColumn:"1 / -1"},children:r.jsx("button",{type:"button",className:"ghost danger",onClick:()=>Dt(K),children:"Remove owner"})})]},K)),r.jsx("div",{className:"form-actions",children:r.jsx("button",{type:"button",className:"ghost",onClick:ht,children:"Add land owner"})})]})]}),r.jsx("div",{className:"form-actions",style:{marginTop:"0.75rem"},children:r.jsx("button",{type:"submit",className:Ae,disabled:j,children:_e})})]}),r.jsx("article",{className:"card",children:r.jsxs("div",{className:"form-grid",children:[r.jsxs("label",{className:"form-field notes-field",children:[r.jsx("span",{children:"Notes"}),r.jsx("input",{type:"text",value:v.notes||"",onChange:D=>b(K=>({...K,notes:D.target.value})),placeholder:"Exit altitude, landing brief"})]}),r.jsx("div",{className:"form-actions",children:r.jsx("button",{type:"submit",className:Ae,disabled:j,children:_e})})]})})]})]})},J0=()=>{const{manifestId:e}=Tn(),n=gt(),[t,s]=o.useState(null),[a,i]=o.useState([]),[l,u]=o.useState(null),[d,x]=o.useState([]),[_,C]=o.useState([]),[N,F]=o.useState(!0),[v,b]=o.useState(null),[E,p]=o.useState(null),[m,y]=o.useState(!1),[j,O]=o.useState(!1),[k,I]=o.useState(!1),[M,X]=o.useState(!1),[se,R]=o.useState(!1),[ae,de]=o.useState({event_id:"",load_number:"",capacity:"",staff_slots:"",notes:""}),[Ne,me]=o.useState([]),[he,we]=o.useState(""),[ue,ge]=o.useState(""),[fe,Y]=o.useState({full_name:"",email:"",phone:"",experience_level:"",emergency_contact:"",roles:["Participant","Skydiver"]}),[Z,ne]=o.useState({full_name:"",email:"",phone:"",experience_level:"",emergency_contact:"",roles:["Participant","Skydiver","Staff"]}),oe=["Participant","Skydiver","Staff","Ground Crew","Jump Master","Jump Leader","Driver","Pilot","COP"];o.useEffect(()=>{let G=!1;return(async()=>{if(e){F(!0),b(null);try{const ye=await bx(Number(e)),[We,it,Ze,vt]=await Promise.all([$t(),Gr(),Jr(ye.event_id),Rp()]);if(G)return;s(ye),i(Array.isArray(We)?We.map(ct=>({id:ct.id,name:ct.name})):[]),C(Array.isArray(it)?it:[]),u(Ze),x(Array.isArray(vt)?vt:[]),de({event_id:String(ye.event_id),load_number:String(ye.load_number??""),capacity:ye.capacity!=null?String(ye.capacity):"",staff_slots:ye.staff_slots!=null?String(ye.staff_slots):"",notes:ye.notes||""}),me(Array.isArray(ye.participant_ids)?ye.participant_ids:[])}catch(ye){G||b(ye instanceof Error?ye.message:"Failed to load manifest")}finally{G||F(!1)}}})(),()=>{G=!0}},[e]),o.useEffect(()=>{let G=!1;return(async()=>{if(!ae.event_id){u(null);return}try{const ye=await Jr(Number(ae.event_id));G||u(ye)}catch{}})(),()=>{G=!0}},[ae.event_id]);const pe=o.useMemo(()=>Number(ae.event_id||(t==null?void 0:t.event_id)||0),[ae.event_id,t==null?void 0:t.event_id]),Ae=o.useMemo(()=>{if(!pe)return new Set;const G=(t==null?void 0:t.id)??Number(e),ce=d.filter(ye=>ye.event_id===pe&&ye.id!==G).flatMap(ye=>Array.isArray(ye.participant_ids)?ye.participant_ids:[]);return new Set(ce)},[pe,d,t==null?void 0:t.id,e]),_e=o.useMemo(()=>{const G=(l==null?void 0:l.participant_ids)??[];return _.filter(ce=>{const ye=Array.isArray(ce.roles)?ce.roles:[],We=ye.includes("Skydiver"),it=ye.includes("Staff");return G.includes(ce.id)&&!Ne.includes(ce.id)&&We&&!it&&!Ae.has(ce.id)})},[_,Ne,l,Ae]),Le=o.useMemo(()=>{const G=(l==null?void 0:l.participant_ids)??[];return _.filter(ce=>{const ye=Array.isArray(ce.roles)?ce.roles:[],We=ye.includes("Skydiver"),it=ye.includes("Staff");return G.includes(ce.id)&&!Ne.includes(ce.id)&&We&&it&&!Ae.has(ce.id)})},[_,Ne,l,Ae]),Pe=o.useMemo(()=>Ne.filter(G=>{var ye;const ce=((ye=_.find(We=>We.id===G))==null?void 0:ye.roles)||[];return ce.includes("Staff")&&ce.includes("Skydiver")}),[Ne,_]),qe=o.useMemo(()=>{const G=Number(ae.staff_slots);return Number.isFinite(G)&&G>=0?G:null},[ae.staff_slots]),Ye=qe!=null&&qe>0&&Pe.length>=qe,Qe=o.useMemo(()=>{const G=Number(ae.capacity);return Number.isFinite(G)&&G>0?G:null},[ae.capacity]),Q=o.useMemo(()=>Ne.filter(G=>{var ye;return!(((ye=_.find(We=>We.id===G))==null?void 0:ye.roles)||[]).includes("Staff")}),[Ne,_]),P=o.useMemo(()=>{if(Qe==null)return null;const ce=Qe-(qe??0);return ce>0?ce:null},[Qe,qe]),$=P!=null&&Q.length>=P,V=G=>{var ce;return((ce=_.find(ye=>ye.id===G))==null?void 0:ce.full_name)||`Participant #${G}`},ee=async G=>{if(!e)return null;const ce={event_id:Number(ae.event_id),load_number:Number(ae.load_number),capacity:ae.capacity?Number(ae.capacity):void 0,staff_slots:ae.staff_slots?Number(ae.staff_slots):void 0,notes:ae.notes.trim()||void 0,participant_ids:G},ye=await Sx(Number(e),ce);return s(ye),me(Array.isArray(ye.participant_ids)?ye.participant_ids:G),x(We=>We.some(Ze=>Ze.id===ye.id)?We.map(Ze=>Ze.id===ye.id?ye:Ze):[...We,ye]),ye},De=async G=>{if(l)try{const ce=await Lp(l.id,{season_id:l.season_id,name:l.name,location:l.location,slots:l.slots,status:l.status,starts_at:l.starts_at,ends_at:l.ends_at??void 0,airfield_ids:l.airfield_ids,participant_ids:G});u(ce)}catch{}},Fe=async()=>{const G=Number(he);if(!G||Ne.includes(G))return;y(!0),p(null);const ce=[...Ne,G];try{await ee(ce),we(""),p("Participant added to manifest")}catch(ye){p(ye instanceof Error?ye.message:"Failed to add participant")}finally{y(!1)}},re=async()=>{const G=Number(ue);if(!G||Ne.includes(G)||Ye)return;y(!0),p(null);const ce=[...Ne,G];try{await ee(ce),ge(""),p("Staff added to manifest")}catch(ye){p(ye instanceof Error?ye.message:"Failed to add staff")}finally{y(!1)}},st=async G=>{const ce=Ne.filter(ye=>ye!==G);y(!0),p(null);try{await ee(ce),p("Participant removed from manifest")}catch(ye){p(ye instanceof Error?ye.message:"Failed to remove participant")}finally{y(!1)}},ht=async G=>{G.preventDefault(),O(!0),p(null);try{const ce=fe.roles&&fe.roles.length>0?fe.roles:["Participant","Skydiver"],ye={full_name:fe.full_name.trim(),email:fe.email.trim(),phone:fe.phone.trim()||void 0,experience_level:fe.experience_level.trim()||void 0,emergency_contact:fe.emergency_contact.trim()||void 0,roles:ce},We=await ka(ye);C(Ze=>[...Ze,We]);const it=[...Ne,We.id];if(await ee(it),l){const Ze=Array.isArray(l.participant_ids)?Array.from(new Set([...l.participant_ids,We.id])):[We.id];await De(Ze)}Y({full_name:"",email:"",phone:"",experience_level:"",emergency_contact:"",roles:["Participant","Skydiver"]}),I(!1),p("Participant created and added")}catch(ce){p(ce instanceof Error?ce.message:"Failed to create participant")}finally{O(!1)}},Dt=async G=>{if(G.preventDefault(),Ye){p("Staff slots full");return}X(!0),p(null);try{const ce=Z.roles&&Z.roles.length>0?Z.roles:["Participant","Skydiver","Staff"],ye={full_name:Z.full_name.trim(),email:Z.email.trim(),phone:Z.phone.trim()||void 0,experience_level:Z.experience_level.trim()||void 0,emergency_contact:Z.emergency_contact.trim()||void 0,roles:ce},We=await ka(ye);C(Ze=>[...Ze,We]);const it=[...Ne,We.id];if(await ee(it),l){const Ze=Array.isArray(l.participant_ids)?Array.from(new Set([...l.participant_ids,We.id])):[We.id];await De(Ze)}ne({full_name:"",email:"",phone:"",experience_level:"",emergency_contact:"",roles:["Participant","Skydiver","Staff"]}),R(!1),p("Staff participant created and added")}catch(ce){p(ce instanceof Error?ce.message:"Failed to create staff participant")}finally{X(!1)}},Lt=async G=>{G.preventDefault(),y(!0),p(null);try{await ee(Ne),p("Manifest updated")}catch(ce){p(ce instanceof Error?ce.message:"Failed to update manifest")}finally{y(!1)}};return N?r.jsx("p",{className:"muted",children:"Loading manifest"}):v?r.jsx("p",{className:"error-text",children:v}):t?r.jsxs("section",{children:[r.jsxs("header",{className:"page-header",children:[r.jsx("div",{children:r.jsxs("h2",{children:["Load ",t.load_number]})}),r.jsx("button",{className:"ghost",type:"button",onClick:()=>n(-1),children:"Back"})]}),r.jsx("article",{className:"card",children:r.jsxs("form",{className:"form-grid",onSubmit:Lt,children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Event"}),r.jsxs("select",{value:ae.event_id,onChange:G=>de(ce=>({...ce,event_id:G.target.value})),required:!0,children:[r.jsx("option",{value:"",children:"Select an event"}),a.map(G=>r.jsx("option",{value:G.id,children:G.name},G.id))]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Load number"}),r.jsx("input",{type:"number",min:1,value:ae.load_number,onChange:G=>de(ce=>({...ce,load_number:G.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Capacity"}),r.jsx("input",{type:"number",min:0,value:ae.capacity,onChange:G=>de(ce=>({...ce,capacity:G.target.value})),placeholder:"Optional"})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Staff slots"}),r.jsx("input",{type:"number",min:0,value:ae.staff_slots,onChange:G=>de(ce=>({...ce,staff_slots:G.target.value}))})]}),r.jsxs("label",{className:"form-field",style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Notes"}),r.jsx("input",{type:"text",value:ae.notes,onChange:G=>de(ce=>({...ce,notes:G.target.value})),placeholder:"Optional notes"})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"submit",className:"primary",disabled:m,children:m?"Saving":"Save"}),E&&r.jsx("span",{className:"muted",children:E})]})]})}),r.jsxs("article",{className:"card",children:[r.jsxs("header",{className:"card-header",children:[r.jsx("div",{children:r.jsx("h3",{children:"Participants"})}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsxs("span",{className:"badge neutral",children:[Q.length," total"]}),$&&r.jsx("span",{className:"badge danger",children:"FULL"})]})]}),Q.length===0?r.jsx("p",{className:"muted",children:"No participants assigned to this load."}):r.jsx("ul",{className:"status-list",style:{maxHeight:"24rem",overflowY:"auto"},children:Q.map(G=>{const ce=_.find(ye=>ye.id===G);return r.jsxs("li",{children:[r.jsxs(et,{to:`/participants/${G}`,className:"card-link",style:{flex:1},children:[r.jsx("strong",{children:V(G)}),r.jsx("div",{className:"muted",children:(ce==null?void 0:ce.email)||"No email on file"}),r.jsxs("div",{className:"muted",children:["Experience: ",(ce==null?void 0:ce.experience_level)||"Not provided"]})]}),r.jsx("button",{type:"button",className:"ghost danger",onClick:()=>st(G),disabled:m,children:"Remove"})]},G)})}),!$&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"form-grid",style:{marginTop:"1rem"},children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Select participant"}),r.jsxs("select",{value:he,onChange:G=>we(G.target.value),children:[r.jsx("option",{value:"",children:"Choose a participant"}),_e.map(G=>r.jsxs("option",{value:G.id,children:[G.full_name," (",G.email||"No email",")"]},G.id))]})]}),r.jsx("div",{className:"form-actions",children:r.jsx("button",{type:"button",className:"primary",onClick:Fe,disabled:!he||m,children:"Add"})})]}),!k&&r.jsx("div",{className:"form-actions",style:{marginTop:"1rem"},children:r.jsx("button",{type:"button",className:"ghost",onClick:()=>I(!0),children:"Create new participant"})})]}),!$&&k&&r.jsxs("form",{className:"form-grid",style:{marginTop:"1rem"},onSubmit:ht,children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Full name"}),r.jsx("input",{type:"text",value:fe.full_name,onChange:G=>Y(ce=>({...ce,full_name:G.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Email"}),r.jsx("input",{type:"email",value:fe.email,onChange:G=>Y(ce=>({...ce,email:G.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Phone"}),r.jsx("input",{type:"text",value:fe.phone,onChange:G=>Y(ce=>({...ce,phone:G.target.value})),placeholder:"Optional"})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Experience level"}),r.jsx("input",{type:"text",value:fe.experience_level,onChange:G=>Y(ce=>({...ce,experience_level:G.target.value})),placeholder:"Optional"})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Emergency contact"}),r.jsx("input",{type:"text",value:fe.emergency_contact,onChange:G=>Y(ce=>({...ce,emergency_contact:G.target.value})),placeholder:"Optional"})]}),r.jsxs("div",{className:"form-field",style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Roles"}),r.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:oe.map(G=>{var We;const ce=(We=fe.roles)==null?void 0:We.includes(G),ye=G==="Staff";return r.jsxs("label",{className:"badge neutral",style:{display:"inline-flex",alignItems:"center",gap:"0.35rem"},children:[r.jsx("input",{type:"checkbox",checked:ce,disabled:ye,onChange:it=>{Y(Ze=>{const vt=new Set(Ze.roles||[]);it.target.checked?vt.add(G):vt.delete(G);const ct=Array.from(vt);return{...Ze,roles:ct.length>0?ct:["Participant","Skydiver"]}})}}),G]},G)})}),r.jsx("p",{className:"muted",style:{margin:0},children:"Staff cannot be assigned here."})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"submit",className:"primary",disabled:j,children:j?"Adding":"Add participant"}),r.jsx("button",{type:"button",className:"ghost",onClick:()=>I(!1),disabled:j,children:"Cancel"})]})]})]}),r.jsxs("article",{className:"card",children:[r.jsxs("header",{className:"card-header",children:[r.jsx("div",{children:r.jsx("h3",{children:"Staff"})}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsxs("span",{className:"badge neutral",children:[Pe.length," staff"]}),Ye&&r.jsx("span",{className:"badge danger",children:"FULL"})]})]}),Pe.length===0?r.jsx("p",{className:"muted",children:"No staff assigned to this load."}):r.jsx("ul",{className:"status-list",style:{maxHeight:"24rem",overflowY:"auto"},children:Pe.map(G=>{const ce=_.find(ye=>ye.id===G);return r.jsxs("li",{children:[r.jsxs(et,{to:`/participants/${G}`,className:"card-link",style:{flex:1},children:[r.jsx("strong",{children:V(G)}),r.jsx("div",{className:"muted",children:(ce==null?void 0:ce.email)||"No email on file"}),r.jsxs("div",{className:"muted",children:["Experience: ",(ce==null?void 0:ce.experience_level)||"Not provided"]})]}),r.jsx("button",{type:"button",className:"ghost danger",onClick:()=>st(G),disabled:m,children:"Remove"})]},G)})}),!Ye&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"form-grid",style:{marginTop:"1rem"},children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Select staff"}),r.jsxs("select",{value:ue,onChange:G=>ge(G.target.value),children:[r.jsx("option",{value:"",children:"Choose staff"}),Le.map(G=>r.jsxs("option",{value:G.id,children:[G.full_name," (",G.email||"No email",")"]},G.id))]})]}),r.jsx("div",{className:"form-actions",children:r.jsx("button",{type:"button",className:"primary",onClick:re,disabled:!ue||m,children:"Add"})})]}),!se&&r.jsx("div",{className:"form-actions",style:{marginTop:"1rem"},children:r.jsx("button",{type:"button",className:"ghost",onClick:()=>R(!0),children:"Create new staff"})})]}),!Ye&&se&&r.jsxs("form",{className:"form-grid",style:{marginTop:"1rem"},onSubmit:Dt,children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Full name"}),r.jsx("input",{type:"text",value:Z.full_name,onChange:G=>ne(ce=>({...ce,full_name:G.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Email"}),r.jsx("input",{type:"email",value:Z.email,onChange:G=>ne(ce=>({...ce,email:G.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Phone"}),r.jsx("input",{type:"text",value:Z.phone,onChange:G=>ne(ce=>({...ce,phone:G.target.value})),placeholder:"Optional"})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Experience level"}),r.jsx("input",{type:"text",value:Z.experience_level,onChange:G=>ne(ce=>({...ce,experience_level:G.target.value})),placeholder:"Optional"})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Emergency contact"}),r.jsx("input",{type:"text",value:Z.emergency_contact,onChange:G=>ne(ce=>({...ce,emergency_contact:G.target.value})),placeholder:"Optional"})]}),r.jsxs("div",{className:"form-field",style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Roles"}),r.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:oe.map(G=>{var We;const ce=(We=Z.roles)==null?void 0:We.includes(G),ye=G==="Participant"||G==="Skydiver"||G==="Staff";return r.jsxs("label",{className:"badge neutral",style:{display:"inline-flex",alignItems:"center",gap:"0.35rem"},children:[r.jsx("input",{type:"checkbox",checked:ce,disabled:ye,onChange:it=>{ne(Ze=>{const vt=new Set(Ze.roles||[]);it.target.checked?vt.add(G):vt.delete(G);const ct=Array.from(vt);return{...Ze,roles:ct.length>0?ct:["Participant","Skydiver","Staff"]}})}}),G]},G)})}),r.jsx("p",{className:"muted",style:{margin:0},children:"Staff include Participant, Staff, and Skydiver roles by default."})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"submit",className:"primary",disabled:M,children:M?"Adding":"Add staff"}),r.jsx("button",{type:"button",className:"ghost",onClick:()=>R(!1),disabled:M,children:"Cancel"})]})]})]})]}):r.jsx("p",{className:"error-text",children:"Manifest not found."})},G0=()=>{const{eventId:e,accommodationId:n}=Tn(),t=gt(),[s,a]=o.useState(!1),[i,l]=o.useState({name:"",capacity:"",coordinates:"",booked:!1,check_in_at:"",check_out_at:"",notes:""}),[u,d]=o.useState(!0),[x,_]=o.useState(!1),[C,N]=o.useState(null),F=`primary ${s?"saved":""}`,v=x?"Saving":s?"Saved":"Save",b=!i.coordinates.trim(),E=!i.name.trim();o.useEffect(()=>{let j=!1;return(async()=>{if(!(!e||!n)){d(!0),N(null);try{const k=await Op(Number(e),Number(n));if(j)return;l({name:k.name,capacity:String(k.capacity),coordinates:k.coordinates||"",booked:!!k.booked,check_in_at:k.check_in_at||"",check_out_at:k.check_out_at||"",notes:k.notes||""}),a(!1)}catch(k){j||N(k instanceof Error?k.message:"Failed to load accommodation")}finally{j||d(!1)}}})(),()=>{j=!0}},[e,n]);const p=async j=>{if(j.preventDefault(),!(!e||!n)){_(!0),N(null);try{await $p(Number(e),Number(n),{name:i.name.trim(),capacity:Number(i.capacity)||0,coordinates:i.coordinates.trim()||void 0,booked:i.booked,check_in_at:i.check_in_at||void 0,check_out_at:i.check_out_at||void 0,notes:i.notes.trim()||void 0}),a(!0),N("Accommodation updated")}catch(O){N(O instanceof Error?O.message:"Failed to update accommodation")}finally{_(!1)}}},m=async()=>{if(!(!e||!n)&&window.confirm("Delete this accommodation?"))try{await xx(Number(e),Number(n)),t(-1)}catch(j){N(j instanceof Error?j.message:"Failed to delete accommodation")}};if(u)return r.jsx("p",{className:"muted",children:"Loading accommodation"});const y=()=>{s&&a(!1)};return r.jsxs("section",{className:"stack",children:[r.jsxs("header",{className:"page-header",children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",flexWrap:"wrap"},children:[r.jsx("h2",{style:{margin:0},children:"Accommodation"}),r.jsx("span",{className:`badge ${i.booked&&!b?"success":"danger"}`,children:i.booked&&!b?"":"NOT BOOKED"})]}),r.jsxs("div",{className:"card-actions",children:[r.jsx("button",{className:"ghost",type:"button",onClick:()=>t("/logistics/accommodations/new",{state:{copyAccommodation:{event_id:e,name:i.name,capacity:i.capacity,coordinates:i.coordinates,check_in_at:i.check_in_at,check_out_at:i.check_out_at,booked:i.booked,notes:i.notes}}}),children:"Make a copy"}),r.jsx("button",{className:"ghost danger",type:"button",onClick:m,children:"Delete"}),r.jsx("button",{className:"ghost",type:"button",onClick:()=>t(-1),children:"Back"})]})]}),r.jsx("article",{className:"card",children:r.jsxs("form",{className:"form-grid",onSubmit:p,children:[r.jsxs("label",{className:`form-field ${E?"field-missing":""}`,children:[r.jsx("span",{children:"Name"}),r.jsx("input",{type:"text",value:i.name,onChange:j=>{y(),l(O=>({...O,name:j.target.value}))},required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Capacity"}),r.jsx("input",{type:"number",min:0,value:i.capacity,onChange:j=>{y(),l(O=>({...O,capacity:j.target.value}))}})]}),r.jsxs("label",{className:`form-field ${b?"field-missing":""}`,children:[r.jsx("span",{children:"Coordinates (DMS)"}),r.jsxs("div",{className:"input-with-button",children:[r.jsx("input",{type:"text",value:i.coordinates,onChange:j=>{y(),l(O=>({...O,coordinates:j.target.value}))}}),r.jsx("button",{type:"button",className:"ghost",disabled:!i.coordinates.trim(),onClick:()=>{const j=i.coordinates.trim();j&&window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(j)}`,"_blank")},children:"Open in Maps"})]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Booked"}),r.jsxs("div",{className:"checkbox-field",children:[r.jsx("input",{type:"checkbox",checked:i.booked,onChange:j=>{y(),l(O=>({...O,booked:j.target.checked}))}}),r.jsx("span",{children:"Mark as booked"})]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Check-in"}),r.jsx(Mt,{value:Je(i.check_in_at),options:{enableTime:!0,dateFormat:"Y-m-d H:i",time_24hr:!0},onChange:j=>{const O=j[0];y(),l(k=>({...k,check_in_at:O?Bt(O):""}))}})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Check-out"}),r.jsx(Mt,{value:Je(i.check_out_at),options:{enableTime:!0,dateFormat:"Y-m-d H:i",time_24hr:!0},onChange:j=>{const O=j[0];y(),l(k=>({...k,check_out_at:O?Bt(O):""}))}})]}),r.jsxs("label",{className:"form-field",style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Notes"}),r.jsx("input",{type:"text",value:i.notes,onChange:j=>{y(),l(O=>({...O,notes:j.target.value}))}})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"submit",className:F,disabled:x||s,children:v}),C&&r.jsx("span",{className:"muted",children:C})]})]})})]})},X0=()=>r.jsx(rx,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:r.jsxs(qy,{children:[r.jsx(rt,{path:"/login",element:r.jsx(px,{})}),r.jsxs(rt,{path:"/",element:r.jsx(dx,{}),children:[r.jsx(rt,{index:!0,element:r.jsx(Ou,{to:"/events",replace:!0})}),r.jsx(rt,{path:"events",element:r.jsx(Ox,{})}),r.jsx(rt,{path:"events/new",element:r.jsx(Lx,{})}),r.jsx(rt,{path:"events/:eventId",element:r.jsx(B0,{})}),r.jsx(rt,{path:"events/:eventId/details",element:r.jsx(p0,{})}),r.jsx(rt,{path:"events/:eventId/accommodations/:accommodationId",element:r.jsx(G0,{})}),r.jsx(rt,{path:"events/:eventId/innhopps/new",element:r.jsx(sf,{})}),r.jsx(rt,{path:"events/:eventId/innhopps/:innhoppId",element:r.jsx(sf,{})}),r.jsx(rt,{path:"airfields/new",element:r.jsx(g0,{})}),r.jsx(rt,{path:"airfields/:airfieldId",element:r.jsx(h0,{})}),r.jsx(rt,{path:"seasons/new",element:r.jsx(v0,{})}),r.jsx(rt,{path:"manifests",element:r.jsx(y0,{})}),r.jsx(rt,{path:"manifests/:manifestId",element:r.jsx(J0,{})}),r.jsx(rt,{path:"participants",element:r.jsx(j0,{})}),r.jsx(rt,{path:"participants/new",element:r.jsx(_0,{})}),r.jsx(rt,{path:"participants/:participantId",element:r.jsx(b0,{})}),r.jsx(rt,{path:"logistics",element:r.jsx(P0,{})}),r.jsx(rt,{path:"logistics/transport",element:r.jsx(C0,{})}),r.jsx(rt,{path:"logistics/ground-crew",element:r.jsx(A0,{})}),r.jsx(rt,{path:"logistics/ground-crew/new",element:r.jsx(D0,{})}),r.jsx(rt,{path:"logistics/ground-crew/:groundCrewId",element:r.jsx(I0,{})}),r.jsx(rt,{path:"logistics/accommodations",element:r.jsx(T0,{})}),r.jsx(rt,{path:"logistics/accommodations/new",element:r.jsx(M0,{})}),r.jsx(rt,{path:"logistics/meals",element:r.jsx($0,{})}),r.jsx(rt,{path:"logistics/meals/new",element:r.jsx(L0,{})}),r.jsx(rt,{path:"logistics/meals/:mealId",element:r.jsx(F0,{})}),r.jsx(rt,{path:"logistics/others",element:r.jsx(z0,{})}),r.jsx(rt,{path:"logistics/others/new",element:r.jsx(U0,{})}),r.jsx(rt,{path:"logistics/others/:otherId",element:r.jsx(V0,{})}),r.jsx(rt,{path:"logistics/new",element:r.jsx(w0,{})}),r.jsx(rt,{path:"logistics/:transportId",element:r.jsx(k0,{})}),r.jsx(rt,{path:"logistics/vehicles/:vehicleId",element:r.jsx(K0,{})})]}),r.jsx(rt,{path:"*",element:r.jsx(Ou,{to:"/login",replace:!0})})]})});no.createRoot(document.getElementById("root")).render(r.jsx(vf.StrictMode,{children:r.jsx(X0,{})}));
