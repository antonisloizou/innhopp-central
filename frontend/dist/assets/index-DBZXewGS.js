function Fh(e,n){for(var t=0;t<n.length;t++){const s=n[t];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(s,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function t(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(a){if(a.ep)return;a.ep=!0;const i=t(a);fetch(a.href,i)}})();function mf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Lh(e){if(e.__esModule)return e;var n=e.default;if(typeof n=="function"){var t=function s(){return this instanceof s?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};t.prototype=n.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(e).forEach(function(s){var a=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(t,s,a.get?a:{enumerable:!0,get:function(){return e[s]}})}),t}var pf={exports:{}},rl={},hf={exports:{}},rt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ma=Symbol.for("react.element"),Rh=Symbol.for("react.portal"),zh=Symbol.for("react.fragment"),Uh=Symbol.for("react.strict_mode"),Vh=Symbol.for("react.profiler"),Wh=Symbol.for("react.provider"),Hh=Symbol.for("react.context"),Bh=Symbol.for("react.forward_ref"),Kh=Symbol.for("react.suspense"),Yh=Symbol.for("react.memo"),qh=Symbol.for("react.lazy"),Cd=Symbol.iterator;function Gh(e){return e===null||typeof e!="object"?null:(e=Cd&&e[Cd]||e["@@iterator"],typeof e=="function"?e:null)}var gf={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},vf=Object.assign,yf={};function Os(e,n,t){this.props=e,this.context=n,this.refs=yf,this.updater=t||gf}Os.prototype.isReactComponent={};Os.prototype.setState=function(e,n){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,n,"setState")};Os.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function xf(){}xf.prototype=Os.prototype;function ic(e,n,t){this.props=e,this.context=n,this.refs=yf,this.updater=t||gf}var lc=ic.prototype=new xf;lc.constructor=ic;vf(lc,Os.prototype);lc.isPureReactComponent=!0;var wd=Array.isArray,jf=Object.prototype.hasOwnProperty,oc={current:null},_f={key:!0,ref:!0,__self:!0,__source:!0};function Nf(e,n,t){var s,a={},i=null,l=null;if(n!=null)for(s in n.ref!==void 0&&(l=n.ref),n.key!==void 0&&(i=""+n.key),n)jf.call(n,s)&&!_f.hasOwnProperty(s)&&(a[s]=n[s]);var u=arguments.length-2;if(u===1)a.children=t;else if(1<u){for(var d=Array(u),x=0;x<u;x++)d[x]=arguments[x+2];a.children=d}if(e&&e.defaultProps)for(s in u=e.defaultProps,u)a[s]===void 0&&(a[s]=u[s]);return{$$typeof:Ma,type:e,key:i,ref:l,props:a,_owner:oc.current}}function Qh(e,n){return{$$typeof:Ma,type:e.type,key:n,ref:e.ref,props:e.props,_owner:e._owner}}function cc(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ma}function Jh(e){var n={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(t){return n[t]})}var kd=/\/+/g;function Sl(e,n){return typeof e=="object"&&e!==null&&e.key!=null?Jh(""+e.key):n.toString(36)}function fi(e,n,t,s,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(i){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case Ma:case Rh:l=!0}}if(l)return l=e,a=a(l),e=s===""?"."+Sl(l,0):s,wd(a)?(t="",e!=null&&(t=e.replace(kd,"$&/")+"/"),fi(a,n,t,"",function(x){return x})):a!=null&&(cc(a)&&(a=Qh(a,t+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(kd,"$&/")+"/")+e)),n.push(a)),1;if(l=0,s=s===""?".":s+":",wd(e))for(var u=0;u<e.length;u++){i=e[u];var d=s+Sl(i,u);l+=fi(i,n,t,d,a)}else if(d=Gh(e),typeof d=="function")for(e=d.call(e),u=0;!(i=e.next()).done;)i=i.value,d=s+Sl(i,u++),l+=fi(i,n,t,d,a);else if(i==="object")throw n=String(e),Error("Objects are not valid as a React child (found: "+(n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n)+"). If you meant to render a collection of children, use an array instead.");return l}function Va(e,n,t){if(e==null)return e;var s=[],a=0;return fi(e,s,"","",function(i){return n.call(t,i,a++)}),s}function Xh(e){if(e._status===-1){var n=e._result;n=n(),n.then(function(t){(e._status===0||e._status===-1)&&(e._status=1,e._result=t)},function(t){(e._status===0||e._status===-1)&&(e._status=2,e._result=t)}),e._status===-1&&(e._status=0,e._result=n)}if(e._status===1)return e._result.default;throw e._result}var ln={current:null},mi={transition:null},Zh={ReactCurrentDispatcher:ln,ReactCurrentBatchConfig:mi,ReactCurrentOwner:oc};function bf(){throw Error("act(...) is not supported in production builds of React.")}rt.Children={map:Va,forEach:function(e,n,t){Va(e,function(){n.apply(this,arguments)},t)},count:function(e){var n=0;return Va(e,function(){n++}),n},toArray:function(e){return Va(e,function(n){return n})||[]},only:function(e){if(!cc(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};rt.Component=Os;rt.Fragment=zh;rt.Profiler=Vh;rt.PureComponent=ic;rt.StrictMode=Uh;rt.Suspense=Kh;rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Zh;rt.act=bf;rt.cloneElement=function(e,n,t){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=vf({},e.props),a=e.key,i=e.ref,l=e._owner;if(n!=null){if(n.ref!==void 0&&(i=n.ref,l=oc.current),n.key!==void 0&&(a=""+n.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(d in n)jf.call(n,d)&&!_f.hasOwnProperty(d)&&(s[d]=n[d]===void 0&&u!==void 0?u[d]:n[d])}var d=arguments.length-2;if(d===1)s.children=t;else if(1<d){u=Array(d);for(var x=0;x<d;x++)u[x]=arguments[x+2];s.children=u}return{$$typeof:Ma,type:e.type,key:a,ref:i,props:s,_owner:l}};rt.createContext=function(e){return e={$$typeof:Hh,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Wh,_context:e},e.Consumer=e};rt.createElement=Nf;rt.createFactory=function(e){var n=Nf.bind(null,e);return n.type=e,n};rt.createRef=function(){return{current:null}};rt.forwardRef=function(e){return{$$typeof:Bh,render:e}};rt.isValidElement=cc;rt.lazy=function(e){return{$$typeof:qh,_payload:{_status:-1,_result:e},_init:Xh}};rt.memo=function(e,n){return{$$typeof:Yh,type:e,compare:n===void 0?null:n}};rt.startTransition=function(e){var n=mi.transition;mi.transition={};try{e()}finally{mi.transition=n}};rt.unstable_act=bf;rt.useCallback=function(e,n){return ln.current.useCallback(e,n)};rt.useContext=function(e){return ln.current.useContext(e)};rt.useDebugValue=function(){};rt.useDeferredValue=function(e){return ln.current.useDeferredValue(e)};rt.useEffect=function(e,n){return ln.current.useEffect(e,n)};rt.useId=function(){return ln.current.useId()};rt.useImperativeHandle=function(e,n,t){return ln.current.useImperativeHandle(e,n,t)};rt.useInsertionEffect=function(e,n){return ln.current.useInsertionEffect(e,n)};rt.useLayoutEffect=function(e,n){return ln.current.useLayoutEffect(e,n)};rt.useMemo=function(e,n){return ln.current.useMemo(e,n)};rt.useReducer=function(e,n,t){return ln.current.useReducer(e,n,t)};rt.useRef=function(e){return ln.current.useRef(e)};rt.useState=function(e){return ln.current.useState(e)};rt.useSyncExternalStore=function(e,n,t){return ln.current.useSyncExternalStore(e,n,t)};rt.useTransition=function(){return ln.current.useTransition()};rt.version="18.3.1";hf.exports=rt;var o=hf.exports;const Sf=mf(o),eg=Fh({__proto__:null,default:Sf},[o]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tg=o,ng=Symbol.for("react.element"),rg=Symbol.for("react.fragment"),sg=Object.prototype.hasOwnProperty,ag=tg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ig={key:!0,ref:!0,__self:!0,__source:!0};function Cf(e,n,t){var s,a={},i=null,l=null;t!==void 0&&(i=""+t),n.key!==void 0&&(i=""+n.key),n.ref!==void 0&&(l=n.ref);for(s in n)sg.call(n,s)&&!ig.hasOwnProperty(s)&&(a[s]=n[s]);if(e&&e.defaultProps)for(s in n=e.defaultProps,n)a[s]===void 0&&(a[s]=n[s]);return{$$typeof:ng,type:e,key:i,ref:l,props:a,_owner:ag.current}}rl.Fragment=rg;rl.jsx=Cf;rl.jsxs=Cf;pf.exports=rl;var r=pf.exports,io={},wf={exports:{}},Nn={},kf={exports:{}},Ef={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function n(ue,ge){var fe=ue.length;ue.push(ge);e:for(;0<fe;){var Y=fe-1>>>1,ee=ue[Y];if(0<a(ee,ge))ue[Y]=ge,ue[fe]=ee,fe=Y;else break e}}function t(ue){return ue.length===0?null:ue[0]}function s(ue){if(ue.length===0)return null;var ge=ue[0],fe=ue.pop();if(fe!==ge){ue[0]=fe;e:for(var Y=0,ee=ue.length,re=ee>>>1;Y<re;){var ce=2*(Y+1)-1,pe=ue[ce],Ae=ce+1,_e=ue[Ae];if(0>a(pe,fe))Ae<ee&&0>a(_e,pe)?(ue[Y]=_e,ue[Ae]=fe,Y=Ae):(ue[Y]=pe,ue[ce]=fe,Y=ce);else if(Ae<ee&&0>a(_e,fe))ue[Y]=_e,ue[Ae]=fe,Y=Ae;else break e}}return ge}function a(ue,ge){var fe=ue.sortIndex-ge.sortIndex;return fe!==0?fe:ue.id-ge.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var l=Date,u=l.now();e.unstable_now=function(){return l.now()-u}}var d=[],x=[],_=1,C=null,b=3,L=!1,y=!1,S=!1,E=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(ue){for(var ge=t(x);ge!==null;){if(ge.callback===null)s(x);else if(ge.startTime<=ue)s(x),ge.sortIndex=ge.expirationTime,n(d,ge);else break;ge=t(x)}}function j(ue){if(S=!1,v(ue),!y)if(t(d)!==null)y=!0,he(P);else{var ge=t(x);ge!==null&&we(j,ge.startTime-ue)}}function P(ue,ge){y=!1,S&&(S=!1,p(M),M=-1),L=!0;var fe=b;try{for(v(ge),C=t(d);C!==null&&(!(C.expirationTime>ge)||ue&&!R());){var Y=C.callback;if(typeof Y=="function"){C.callback=null,b=C.priorityLevel;var ee=Y(C.expirationTime<=ge);ge=e.unstable_now(),typeof ee=="function"?C.callback=ee:C===t(d)&&s(d),v(ge)}else s(d);C=t(d)}if(C!==null)var re=!0;else{var ce=t(x);ce!==null&&we(j,ce.startTime-ge),re=!1}return re}finally{C=null,b=fe,L=!1}}var k=!1,D=null,M=-1,J=5,se=-1;function R(){return!(e.unstable_now()-se<J)}function ae(){if(D!==null){var ue=e.unstable_now();se=ue;var ge=!0;try{ge=D(!0,ue)}finally{ge?de():(k=!1,D=null)}}else k=!1}var de;if(typeof m=="function")de=function(){m(ae)};else if(typeof MessageChannel<"u"){var be=new MessageChannel,me=be.port2;be.port1.onmessage=ae,de=function(){me.postMessage(null)}}else de=function(){E(ae,0)};function he(ue){D=ue,k||(k=!0,de())}function we(ue,ge){M=E(function(){ue(e.unstable_now())},ge)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ue){ue.callback=null},e.unstable_continueExecution=function(){y||L||(y=!0,he(P))},e.unstable_forceFrameRate=function(ue){0>ue||125<ue?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):J=0<ue?Math.floor(1e3/ue):5},e.unstable_getCurrentPriorityLevel=function(){return b},e.unstable_getFirstCallbackNode=function(){return t(d)},e.unstable_next=function(ue){switch(b){case 1:case 2:case 3:var ge=3;break;default:ge=b}var fe=b;b=ge;try{return ue()}finally{b=fe}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(ue,ge){switch(ue){case 1:case 2:case 3:case 4:case 5:break;default:ue=3}var fe=b;b=ue;try{return ge()}finally{b=fe}},e.unstable_scheduleCallback=function(ue,ge,fe){var Y=e.unstable_now();switch(typeof fe=="object"&&fe!==null?(fe=fe.delay,fe=typeof fe=="number"&&0<fe?Y+fe:Y):fe=Y,ue){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=fe+ee,ue={id:_++,callback:ge,priorityLevel:ue,startTime:fe,expirationTime:ee,sortIndex:-1},fe>Y?(ue.sortIndex=fe,n(x,ue),t(d)===null&&ue===t(x)&&(S?(p(M),M=-1):S=!0,we(j,fe-Y))):(ue.sortIndex=ee,n(d,ue),y||L||(y=!0,he(P))),ue},e.unstable_shouldYield=R,e.unstable_wrapCallback=function(ue){var ge=b;return function(){var fe=b;b=ge;try{return ue.apply(this,arguments)}finally{b=fe}}}})(Ef);kf.exports=Ef;var lg=kf.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var og=o,_n=lg;function je(e){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+e,t=1;t<arguments.length;t++)n+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Af=new Set,ua={};function es(e,n){ks(e,n),ks(e+"Capture",n)}function ks(e,n){for(ua[e]=n,e=0;e<n.length;e++)Af.add(n[e])}var lr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),lo=Object.prototype.hasOwnProperty,cg=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ed={},Ad={};function dg(e){return lo.call(Ad,e)?!0:lo.call(Ed,e)?!1:cg.test(e)?Ad[e]=!0:(Ed[e]=!0,!1)}function ug(e,n,t,s){if(t!==null&&t.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return s?!1:t!==null?!t.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function fg(e,n,t,s){if(n===null||typeof n>"u"||ug(e,n,t,s))return!0;if(s)return!1;if(t!==null)switch(t.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function on(e,n,t,s,a,i,l){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=s,this.attributeNamespace=a,this.mustUseProperty=t,this.propertyName=e,this.type=n,this.sanitizeURL=i,this.removeEmptyString=l}var qt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){qt[e]=new on(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var n=e[0];qt[n]=new on(n,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){qt[e]=new on(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){qt[e]=new on(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){qt[e]=new on(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){qt[e]=new on(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){qt[e]=new on(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){qt[e]=new on(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){qt[e]=new on(e,5,!1,e.toLowerCase(),null,!1,!1)});var dc=/[\-:]([a-z])/g;function uc(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var n=e.replace(dc,uc);qt[n]=new on(n,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var n=e.replace(dc,uc);qt[n]=new on(n,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var n=e.replace(dc,uc);qt[n]=new on(n,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){qt[e]=new on(e,1,!1,e.toLowerCase(),null,!1,!1)});qt.xlinkHref=new on("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){qt[e]=new on(e,1,!1,e.toLowerCase(),null,!0,!0)});function fc(e,n,t,s){var a=qt.hasOwnProperty(n)?qt[n]:null;(a!==null?a.type!==0:s||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(fg(n,t,a,s)&&(t=null),s||a===null?dg(n)&&(t===null?e.removeAttribute(n):e.setAttribute(n,""+t)):a.mustUseProperty?e[a.propertyName]=t===null?a.type===3?!1:"":t:(n=a.attributeName,s=a.attributeNamespace,t===null?e.removeAttribute(n):(a=a.type,t=a===3||a===4&&t===!0?"":""+t,s?e.setAttributeNS(s,n,t):e.setAttribute(n,t))))}var fr=og.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Wa=Symbol.for("react.element"),ls=Symbol.for("react.portal"),os=Symbol.for("react.fragment"),mc=Symbol.for("react.strict_mode"),oo=Symbol.for("react.profiler"),If=Symbol.for("react.provider"),Df=Symbol.for("react.context"),pc=Symbol.for("react.forward_ref"),co=Symbol.for("react.suspense"),uo=Symbol.for("react.suspense_list"),hc=Symbol.for("react.memo"),gr=Symbol.for("react.lazy"),Tf=Symbol.for("react.offscreen"),Id=Symbol.iterator;function zs(e){return e===null||typeof e!="object"?null:(e=Id&&e[Id]||e["@@iterator"],typeof e=="function"?e:null)}var Et=Object.assign,Cl;function Js(e){if(Cl===void 0)try{throw Error()}catch(t){var n=t.stack.trim().match(/\n( *(at )?)/);Cl=n&&n[1]||""}return`
`+Cl+e}var wl=!1;function kl(e,n){if(!e||wl)return"";wl=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(x){var s=x}Reflect.construct(e,[],n)}else{try{n.call()}catch(x){s=x}e.call(n.prototype)}else{try{throw Error()}catch(x){s=x}e()}}catch(x){if(x&&s&&typeof x.stack=="string"){for(var a=x.stack.split(`
`),i=s.stack.split(`
`),l=a.length-1,u=i.length-1;1<=l&&0<=u&&a[l]!==i[u];)u--;for(;1<=l&&0<=u;l--,u--)if(a[l]!==i[u]){if(l!==1||u!==1)do if(l--,u--,0>u||a[l]!==i[u]){var d=`
`+a[l].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=l&&0<=u);break}}}finally{wl=!1,Error.prepareStackTrace=t}return(e=e?e.displayName||e.name:"")?Js(e):""}function mg(e){switch(e.tag){case 5:return Js(e.type);case 16:return Js("Lazy");case 13:return Js("Suspense");case 19:return Js("SuspenseList");case 0:case 2:case 15:return e=kl(e.type,!1),e;case 11:return e=kl(e.type.render,!1),e;case 1:return e=kl(e.type,!0),e;default:return""}}function fo(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case os:return"Fragment";case ls:return"Portal";case oo:return"Profiler";case mc:return"StrictMode";case co:return"Suspense";case uo:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Df:return(e.displayName||"Context")+".Consumer";case If:return(e._context.displayName||"Context")+".Provider";case pc:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case hc:return n=e.displayName||null,n!==null?n:fo(e.type)||"Memo";case gr:n=e._payload,e=e._init;try{return fo(e(n))}catch{}}return null}function pg(e){var n=e.type;switch(e.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=n.render,e=e.displayName||e.name||"",n.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return fo(n);case 8:return n===mc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function Tr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Pf(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function hg(e){var n=Pf(e)?"checked":"value",t=Object.getOwnPropertyDescriptor(e.constructor.prototype,n),s=""+e[n];if(!e.hasOwnProperty(n)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var a=t.get,i=t.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return a.call(this)},set:function(l){s=""+l,i.call(this,l)}}),Object.defineProperty(e,n,{enumerable:t.enumerable}),{getValue:function(){return s},setValue:function(l){s=""+l},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function Ha(e){e._valueTracker||(e._valueTracker=hg(e))}function Mf(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var t=n.getValue(),s="";return e&&(s=Pf(e)?e.checked?"true":"false":e.value),e=s,e!==t?(n.setValue(e),!0):!1}function Ci(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function mo(e,n){var t=n.checked;return Et({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??e._wrapperState.initialChecked})}function Dd(e,n){var t=n.defaultValue==null?"":n.defaultValue,s=n.checked!=null?n.checked:n.defaultChecked;t=Tr(n.value!=null?n.value:t),e._wrapperState={initialChecked:s,initialValue:t,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function Of(e,n){n=n.checked,n!=null&&fc(e,"checked",n,!1)}function po(e,n){Of(e,n);var t=Tr(n.value),s=n.type;if(t!=null)s==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+t):e.value!==""+t&&(e.value=""+t);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}n.hasOwnProperty("value")?ho(e,n.type,t):n.hasOwnProperty("defaultValue")&&ho(e,n.type,Tr(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(e.defaultChecked=!!n.defaultChecked)}function Td(e,n,t){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var s=n.type;if(!(s!=="submit"&&s!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+e._wrapperState.initialValue,t||n===e.value||(e.value=n),e.defaultValue=n}t=e.name,t!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,t!==""&&(e.name=t)}function ho(e,n,t){(n!=="number"||Ci(e.ownerDocument)!==e)&&(t==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+t&&(e.defaultValue=""+t))}var Xs=Array.isArray;function xs(e,n,t,s){if(e=e.options,n){n={};for(var a=0;a<t.length;a++)n["$"+t[a]]=!0;for(t=0;t<e.length;t++)a=n.hasOwnProperty("$"+e[t].value),e[t].selected!==a&&(e[t].selected=a),a&&s&&(e[t].defaultSelected=!0)}else{for(t=""+Tr(t),n=null,a=0;a<e.length;a++){if(e[a].value===t){e[a].selected=!0,s&&(e[a].defaultSelected=!0);return}n!==null||e[a].disabled||(n=e[a])}n!==null&&(n.selected=!0)}}function go(e,n){if(n.dangerouslySetInnerHTML!=null)throw Error(je(91));return Et({},n,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Pd(e,n){var t=n.value;if(t==null){if(t=n.children,n=n.defaultValue,t!=null){if(n!=null)throw Error(je(92));if(Xs(t)){if(1<t.length)throw Error(je(93));t=t[0]}n=t}n==null&&(n=""),t=n}e._wrapperState={initialValue:Tr(t)}}function $f(e,n){var t=Tr(n.value),s=Tr(n.defaultValue);t!=null&&(t=""+t,t!==e.value&&(e.value=t),n.defaultValue==null&&e.defaultValue!==t&&(e.defaultValue=t)),s!=null&&(e.defaultValue=""+s)}function Md(e){var n=e.textContent;n===e._wrapperState.initialValue&&n!==""&&n!==null&&(e.value=n)}function Ff(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function vo(e,n){return e==null||e==="http://www.w3.org/1999/xhtml"?Ff(n):e==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ba,Lf=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(n,t,s,a){MSApp.execUnsafeLocalFunction(function(){return e(n,t,s,a)})}:e}(function(e,n){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=n;else{for(Ba=Ba||document.createElement("div"),Ba.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=Ba.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;n.firstChild;)e.appendChild(n.firstChild)}});function fa(e,n){if(n){var t=e.firstChild;if(t&&t===e.lastChild&&t.nodeType===3){t.nodeValue=n;return}}e.textContent=n}var ta={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},gg=["Webkit","ms","Moz","O"];Object.keys(ta).forEach(function(e){gg.forEach(function(n){n=n+e.charAt(0).toUpperCase()+e.substring(1),ta[n]=ta[e]})});function Rf(e,n,t){return n==null||typeof n=="boolean"||n===""?"":t||typeof n!="number"||n===0||ta.hasOwnProperty(e)&&ta[e]?(""+n).trim():n+"px"}function zf(e,n){e=e.style;for(var t in n)if(n.hasOwnProperty(t)){var s=t.indexOf("--")===0,a=Rf(t,n[t],s);t==="float"&&(t="cssFloat"),s?e.setProperty(t,a):e[t]=a}}var vg=Et({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function yo(e,n){if(n){if(vg[e]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(je(137,e));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(je(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error(je(61))}if(n.style!=null&&typeof n.style!="object")throw Error(je(62))}}function xo(e,n){if(e.indexOf("-")===-1)return typeof n.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jo=null;function gc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var _o=null,js=null,_s=null;function Od(e){if(e=Fa(e)){if(typeof _o!="function")throw Error(je(280));var n=e.stateNode;n&&(n=ol(n),_o(e.stateNode,e.type,n))}}function Uf(e){js?_s?_s.push(e):_s=[e]:js=e}function Vf(){if(js){var e=js,n=_s;if(_s=js=null,Od(e),n)for(e=0;e<n.length;e++)Od(n[e])}}function Wf(e,n){return e(n)}function Hf(){}var El=!1;function Bf(e,n,t){if(El)return e(n,t);El=!0;try{return Wf(e,n,t)}finally{El=!1,(js!==null||_s!==null)&&(Hf(),Vf())}}function ma(e,n){var t=e.stateNode;if(t===null)return null;var s=ol(t);if(s===null)return null;t=s[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(t&&typeof t!="function")throw Error(je(231,n,typeof t));return t}var No=!1;if(lr)try{var Us={};Object.defineProperty(Us,"passive",{get:function(){No=!0}}),window.addEventListener("test",Us,Us),window.removeEventListener("test",Us,Us)}catch{No=!1}function yg(e,n,t,s,a,i,l,u,d){var x=Array.prototype.slice.call(arguments,3);try{n.apply(t,x)}catch(_){this.onError(_)}}var na=!1,wi=null,ki=!1,bo=null,xg={onError:function(e){na=!0,wi=e}};function jg(e,n,t,s,a,i,l,u,d){na=!1,wi=null,yg.apply(xg,arguments)}function _g(e,n,t,s,a,i,l,u,d){if(jg.apply(this,arguments),na){if(na){var x=wi;na=!1,wi=null}else throw Error(je(198));ki||(ki=!0,bo=x)}}function ts(e){var n=e,t=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,n.flags&4098&&(t=n.return),e=n.return;while(e)}return n.tag===3?t:null}function Kf(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function $d(e){if(ts(e)!==e)throw Error(je(188))}function Ng(e){var n=e.alternate;if(!n){if(n=ts(e),n===null)throw Error(je(188));return n!==e?null:e}for(var t=e,s=n;;){var a=t.return;if(a===null)break;var i=a.alternate;if(i===null){if(s=a.return,s!==null){t=s;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===t)return $d(a),e;if(i===s)return $d(a),n;i=i.sibling}throw Error(je(188))}if(t.return!==s.return)t=a,s=i;else{for(var l=!1,u=a.child;u;){if(u===t){l=!0,t=a,s=i;break}if(u===s){l=!0,s=a,t=i;break}u=u.sibling}if(!l){for(u=i.child;u;){if(u===t){l=!0,t=i,s=a;break}if(u===s){l=!0,s=i,t=a;break}u=u.sibling}if(!l)throw Error(je(189))}}if(t.alternate!==s)throw Error(je(190))}if(t.tag!==3)throw Error(je(188));return t.stateNode.current===t?e:n}function Yf(e){return e=Ng(e),e!==null?qf(e):null}function qf(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var n=qf(e);if(n!==null)return n;e=e.sibling}return null}var Gf=_n.unstable_scheduleCallback,Fd=_n.unstable_cancelCallback,bg=_n.unstable_shouldYield,Sg=_n.unstable_requestPaint,Ot=_n.unstable_now,Cg=_n.unstable_getCurrentPriorityLevel,vc=_n.unstable_ImmediatePriority,Qf=_n.unstable_UserBlockingPriority,Ei=_n.unstable_NormalPriority,wg=_n.unstable_LowPriority,Jf=_n.unstable_IdlePriority,sl=null,Jn=null;function kg(e){if(Jn&&typeof Jn.onCommitFiberRoot=="function")try{Jn.onCommitFiberRoot(sl,e,void 0,(e.current.flags&128)===128)}catch{}}var zn=Math.clz32?Math.clz32:Ig,Eg=Math.log,Ag=Math.LN2;function Ig(e){return e>>>=0,e===0?32:31-(Eg(e)/Ag|0)|0}var Ka=64,Ya=4194304;function Zs(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ai(e,n){var t=e.pendingLanes;if(t===0)return 0;var s=0,a=e.suspendedLanes,i=e.pingedLanes,l=t&268435455;if(l!==0){var u=l&~a;u!==0?s=Zs(u):(i&=l,i!==0&&(s=Zs(i)))}else l=t&~a,l!==0?s=Zs(l):i!==0&&(s=Zs(i));if(s===0)return 0;if(n!==0&&n!==s&&!(n&a)&&(a=s&-s,i=n&-n,a>=i||a===16&&(i&4194240)!==0))return n;if(s&4&&(s|=t&16),n=e.entangledLanes,n!==0)for(e=e.entanglements,n&=s;0<n;)t=31-zn(n),a=1<<t,s|=e[t],n&=~a;return s}function Dg(e,n){switch(e){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Tg(e,n){for(var t=e.suspendedLanes,s=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var l=31-zn(i),u=1<<l,d=a[l];d===-1?(!(u&t)||u&s)&&(a[l]=Dg(u,n)):d<=n&&(e.expiredLanes|=u),i&=~u}}function So(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Xf(){var e=Ka;return Ka<<=1,!(Ka&4194240)&&(Ka=64),e}function Al(e){for(var n=[],t=0;31>t;t++)n.push(e);return n}function Oa(e,n,t){e.pendingLanes|=n,n!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,n=31-zn(n),e[n]=t}function Pg(e,n){var t=e.pendingLanes&~n;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=n,e.mutableReadLanes&=n,e.entangledLanes&=n,n=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<t;){var a=31-zn(t),i=1<<a;n[a]=0,s[a]=-1,e[a]=-1,t&=~i}}function yc(e,n){var t=e.entangledLanes|=n;for(e=e.entanglements;t;){var s=31-zn(t),a=1<<s;a&n|e[s]&n&&(e[s]|=n),t&=~a}}var gt=0;function Zf(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var em,xc,tm,nm,rm,Co=!1,qa=[],br=null,Sr=null,Cr=null,pa=new Map,ha=new Map,yr=[],Mg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ld(e,n){switch(e){case"focusin":case"focusout":br=null;break;case"dragenter":case"dragleave":Sr=null;break;case"mouseover":case"mouseout":Cr=null;break;case"pointerover":case"pointerout":pa.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":ha.delete(n.pointerId)}}function Vs(e,n,t,s,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:n,domEventName:t,eventSystemFlags:s,nativeEvent:i,targetContainers:[a]},n!==null&&(n=Fa(n),n!==null&&xc(n)),e):(e.eventSystemFlags|=s,n=e.targetContainers,a!==null&&n.indexOf(a)===-1&&n.push(a),e)}function Og(e,n,t,s,a){switch(n){case"focusin":return br=Vs(br,e,n,t,s,a),!0;case"dragenter":return Sr=Vs(Sr,e,n,t,s,a),!0;case"mouseover":return Cr=Vs(Cr,e,n,t,s,a),!0;case"pointerover":var i=a.pointerId;return pa.set(i,Vs(pa.get(i)||null,e,n,t,s,a)),!0;case"gotpointercapture":return i=a.pointerId,ha.set(i,Vs(ha.get(i)||null,e,n,t,s,a)),!0}return!1}function sm(e){var n=Vr(e.target);if(n!==null){var t=ts(n);if(t!==null){if(n=t.tag,n===13){if(n=Kf(t),n!==null){e.blockedOn=n,rm(e.priority,function(){tm(t)});return}}else if(n===3&&t.stateNode.current.memoizedState.isDehydrated){e.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}e.blockedOn=null}function pi(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var t=wo(e.domEventName,e.eventSystemFlags,n[0],e.nativeEvent);if(t===null){t=e.nativeEvent;var s=new t.constructor(t.type,t);jo=s,t.target.dispatchEvent(s),jo=null}else return n=Fa(t),n!==null&&xc(n),e.blockedOn=t,!1;n.shift()}return!0}function Rd(e,n,t){pi(e)&&t.delete(n)}function $g(){Co=!1,br!==null&&pi(br)&&(br=null),Sr!==null&&pi(Sr)&&(Sr=null),Cr!==null&&pi(Cr)&&(Cr=null),pa.forEach(Rd),ha.forEach(Rd)}function Ws(e,n){e.blockedOn===n&&(e.blockedOn=null,Co||(Co=!0,_n.unstable_scheduleCallback(_n.unstable_NormalPriority,$g)))}function ga(e){function n(a){return Ws(a,e)}if(0<qa.length){Ws(qa[0],e);for(var t=1;t<qa.length;t++){var s=qa[t];s.blockedOn===e&&(s.blockedOn=null)}}for(br!==null&&Ws(br,e),Sr!==null&&Ws(Sr,e),Cr!==null&&Ws(Cr,e),pa.forEach(n),ha.forEach(n),t=0;t<yr.length;t++)s=yr[t],s.blockedOn===e&&(s.blockedOn=null);for(;0<yr.length&&(t=yr[0],t.blockedOn===null);)sm(t),t.blockedOn===null&&yr.shift()}var Ns=fr.ReactCurrentBatchConfig,Ii=!0;function Fg(e,n,t,s){var a=gt,i=Ns.transition;Ns.transition=null;try{gt=1,jc(e,n,t,s)}finally{gt=a,Ns.transition=i}}function Lg(e,n,t,s){var a=gt,i=Ns.transition;Ns.transition=null;try{gt=4,jc(e,n,t,s)}finally{gt=a,Ns.transition=i}}function jc(e,n,t,s){if(Ii){var a=wo(e,n,t,s);if(a===null)Rl(e,n,s,Di,t),Ld(e,s);else if(Og(a,e,n,t,s))s.stopPropagation();else if(Ld(e,s),n&4&&-1<Mg.indexOf(e)){for(;a!==null;){var i=Fa(a);if(i!==null&&em(i),i=wo(e,n,t,s),i===null&&Rl(e,n,s,Di,t),i===a)break;a=i}a!==null&&s.stopPropagation()}else Rl(e,n,s,null,t)}}var Di=null;function wo(e,n,t,s){if(Di=null,e=gc(s),e=Vr(e),e!==null)if(n=ts(e),n===null)e=null;else if(t=n.tag,t===13){if(e=Kf(n),e!==null)return e;e=null}else if(t===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null);return Di=e,null}function am(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Cg()){case vc:return 1;case Qf:return 4;case Ei:case wg:return 16;case Jf:return 536870912;default:return 16}default:return 16}}var jr=null,_c=null,hi=null;function im(){if(hi)return hi;var e,n=_c,t=n.length,s,a="value"in jr?jr.value:jr.textContent,i=a.length;for(e=0;e<t&&n[e]===a[e];e++);var l=t-e;for(s=1;s<=l&&n[t-s]===a[i-s];s++);return hi=a.slice(e,1<s?1-s:void 0)}function gi(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function Ga(){return!0}function zd(){return!1}function bn(e){function n(t,s,a,i,l){this._reactName=t,this._targetInst=a,this.type=s,this.nativeEvent=i,this.target=l,this.currentTarget=null;for(var u in e)e.hasOwnProperty(u)&&(t=e[u],this[u]=t?t(i):i[u]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ga:zd,this.isPropagationStopped=zd,this}return Et(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=Ga)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=Ga)},persist:function(){},isPersistent:Ga}),n}var $s={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Nc=bn($s),$a=Et({},$s,{view:0,detail:0}),Rg=bn($a),Il,Dl,Hs,al=Et({},$a,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Hs&&(Hs&&e.type==="mousemove"?(Il=e.screenX-Hs.screenX,Dl=e.screenY-Hs.screenY):Dl=Il=0,Hs=e),Il)},movementY:function(e){return"movementY"in e?e.movementY:Dl}}),Ud=bn(al),zg=Et({},al,{dataTransfer:0}),Ug=bn(zg),Vg=Et({},$a,{relatedTarget:0}),Tl=bn(Vg),Wg=Et({},$s,{animationName:0,elapsedTime:0,pseudoElement:0}),Hg=bn(Wg),Bg=Et({},$s,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Kg=bn(Bg),Yg=Et({},$s,{data:0}),Vd=bn(Yg),qg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Gg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Qg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Jg(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=Qg[e])?!!n[e]:!1}function bc(){return Jg}var Xg=Et({},$a,{key:function(e){if(e.key){var n=qg[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=gi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Gg[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bc,charCode:function(e){return e.type==="keypress"?gi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?gi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Zg=bn(Xg),ev=Et({},al,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Wd=bn(ev),tv=Et({},$a,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bc}),nv=bn(tv),rv=Et({},$s,{propertyName:0,elapsedTime:0,pseudoElement:0}),sv=bn(rv),av=Et({},al,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),iv=bn(av),lv=[9,13,27,32],Sc=lr&&"CompositionEvent"in window,ra=null;lr&&"documentMode"in document&&(ra=document.documentMode);var ov=lr&&"TextEvent"in window&&!ra,lm=lr&&(!Sc||ra&&8<ra&&11>=ra),Hd=" ",Bd=!1;function om(e,n){switch(e){case"keyup":return lv.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cm(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var cs=!1;function cv(e,n){switch(e){case"compositionend":return cm(n);case"keypress":return n.which!==32?null:(Bd=!0,Hd);case"textInput":return e=n.data,e===Hd&&Bd?null:e;default:return null}}function dv(e,n){if(cs)return e==="compositionend"||!Sc&&om(e,n)?(e=im(),hi=_c=jr=null,cs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return lm&&n.locale!=="ko"?null:n.data;default:return null}}var uv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kd(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!uv[e.type]:n==="textarea"}function dm(e,n,t,s){Uf(s),n=Ti(n,"onChange"),0<n.length&&(t=new Nc("onChange","change",null,t,s),e.push({event:t,listeners:n}))}var sa=null,va=null;function fv(e){_m(e,0)}function il(e){var n=fs(e);if(Mf(n))return e}function mv(e,n){if(e==="change")return n}var um=!1;if(lr){var Pl;if(lr){var Ml="oninput"in document;if(!Ml){var Yd=document.createElement("div");Yd.setAttribute("oninput","return;"),Ml=typeof Yd.oninput=="function"}Pl=Ml}else Pl=!1;um=Pl&&(!document.documentMode||9<document.documentMode)}function qd(){sa&&(sa.detachEvent("onpropertychange",fm),va=sa=null)}function fm(e){if(e.propertyName==="value"&&il(va)){var n=[];dm(n,va,e,gc(e)),Bf(fv,n)}}function pv(e,n,t){e==="focusin"?(qd(),sa=n,va=t,sa.attachEvent("onpropertychange",fm)):e==="focusout"&&qd()}function hv(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return il(va)}function gv(e,n){if(e==="click")return il(n)}function vv(e,n){if(e==="input"||e==="change")return il(n)}function yv(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var Vn=typeof Object.is=="function"?Object.is:yv;function ya(e,n){if(Vn(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var t=Object.keys(e),s=Object.keys(n);if(t.length!==s.length)return!1;for(s=0;s<t.length;s++){var a=t[s];if(!lo.call(n,a)||!Vn(e[a],n[a]))return!1}return!0}function Gd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Qd(e,n){var t=Gd(e);e=0;for(var s;t;){if(t.nodeType===3){if(s=e+t.textContent.length,e<=n&&s>=n)return{node:t,offset:n-e};e=s}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=Gd(t)}}function mm(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?mm(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function pm(){for(var e=window,n=Ci();n instanceof e.HTMLIFrameElement;){try{var t=typeof n.contentWindow.location.href=="string"}catch{t=!1}if(t)e=n.contentWindow;else break;n=Ci(e.document)}return n}function Cc(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}function xv(e){var n=pm(),t=e.focusedElem,s=e.selectionRange;if(n!==t&&t&&t.ownerDocument&&mm(t.ownerDocument.documentElement,t)){if(s!==null&&Cc(t)){if(n=s.start,e=s.end,e===void 0&&(e=n),"selectionStart"in t)t.selectionStart=n,t.selectionEnd=Math.min(e,t.value.length);else if(e=(n=t.ownerDocument||document)&&n.defaultView||window,e.getSelection){e=e.getSelection();var a=t.textContent.length,i=Math.min(s.start,a);s=s.end===void 0?i:Math.min(s.end,a),!e.extend&&i>s&&(a=s,s=i,i=a),a=Qd(t,i);var l=Qd(t,s);a&&l&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(n=n.createRange(),n.setStart(a.node,a.offset),e.removeAllRanges(),i>s?(e.addRange(n),e.extend(l.node,l.offset)):(n.setEnd(l.node,l.offset),e.addRange(n)))}}for(n=[],e=t;e=e.parentNode;)e.nodeType===1&&n.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<n.length;t++)e=n[t],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var jv=lr&&"documentMode"in document&&11>=document.documentMode,ds=null,ko=null,aa=null,Eo=!1;function Jd(e,n,t){var s=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;Eo||ds==null||ds!==Ci(s)||(s=ds,"selectionStart"in s&&Cc(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),aa&&ya(aa,s)||(aa=s,s=Ti(ko,"onSelect"),0<s.length&&(n=new Nc("onSelect","select",null,n,t),e.push({event:n,listeners:s}),n.target=ds)))}function Qa(e,n){var t={};return t[e.toLowerCase()]=n.toLowerCase(),t["Webkit"+e]="webkit"+n,t["Moz"+e]="moz"+n,t}var us={animationend:Qa("Animation","AnimationEnd"),animationiteration:Qa("Animation","AnimationIteration"),animationstart:Qa("Animation","AnimationStart"),transitionend:Qa("Transition","TransitionEnd")},Ol={},hm={};lr&&(hm=document.createElement("div").style,"AnimationEvent"in window||(delete us.animationend.animation,delete us.animationiteration.animation,delete us.animationstart.animation),"TransitionEvent"in window||delete us.transitionend.transition);function ll(e){if(Ol[e])return Ol[e];if(!us[e])return e;var n=us[e],t;for(t in n)if(n.hasOwnProperty(t)&&t in hm)return Ol[e]=n[t];return e}var gm=ll("animationend"),vm=ll("animationiteration"),ym=ll("animationstart"),xm=ll("transitionend"),jm=new Map,Xd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Or(e,n){jm.set(e,n),es(n,[e])}for(var $l=0;$l<Xd.length;$l++){var Fl=Xd[$l],_v=Fl.toLowerCase(),Nv=Fl[0].toUpperCase()+Fl.slice(1);Or(_v,"on"+Nv)}Or(gm,"onAnimationEnd");Or(vm,"onAnimationIteration");Or(ym,"onAnimationStart");Or("dblclick","onDoubleClick");Or("focusin","onFocus");Or("focusout","onBlur");Or(xm,"onTransitionEnd");ks("onMouseEnter",["mouseout","mouseover"]);ks("onMouseLeave",["mouseout","mouseover"]);ks("onPointerEnter",["pointerout","pointerover"]);ks("onPointerLeave",["pointerout","pointerover"]);es("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));es("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));es("onBeforeInput",["compositionend","keypress","textInput","paste"]);es("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));es("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));es("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ea="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bv=new Set("cancel close invalid load scroll toggle".split(" ").concat(ea));function Zd(e,n,t){var s=e.type||"unknown-event";e.currentTarget=t,_g(s,n,void 0,e),e.currentTarget=null}function _m(e,n){n=(n&4)!==0;for(var t=0;t<e.length;t++){var s=e[t],a=s.event;s=s.listeners;e:{var i=void 0;if(n)for(var l=s.length-1;0<=l;l--){var u=s[l],d=u.instance,x=u.currentTarget;if(u=u.listener,d!==i&&a.isPropagationStopped())break e;Zd(a,u,x),i=d}else for(l=0;l<s.length;l++){if(u=s[l],d=u.instance,x=u.currentTarget,u=u.listener,d!==i&&a.isPropagationStopped())break e;Zd(a,u,x),i=d}}}if(ki)throw e=bo,ki=!1,bo=null,e}function jt(e,n){var t=n[Po];t===void 0&&(t=n[Po]=new Set);var s=e+"__bubble";t.has(s)||(Nm(n,e,2,!1),t.add(s))}function Ll(e,n,t){var s=0;n&&(s|=4),Nm(t,e,s,n)}var Ja="_reactListening"+Math.random().toString(36).slice(2);function xa(e){if(!e[Ja]){e[Ja]=!0,Af.forEach(function(t){t!=="selectionchange"&&(bv.has(t)||Ll(t,!1,e),Ll(t,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[Ja]||(n[Ja]=!0,Ll("selectionchange",!1,n))}}function Nm(e,n,t,s){switch(am(n)){case 1:var a=Fg;break;case 4:a=Lg;break;default:a=jc}t=a.bind(null,n,t,e),a=void 0,!No||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(a=!0),s?a!==void 0?e.addEventListener(n,t,{capture:!0,passive:a}):e.addEventListener(n,t,!0):a!==void 0?e.addEventListener(n,t,{passive:a}):e.addEventListener(n,t,!1)}function Rl(e,n,t,s,a){var i=s;if(!(n&1)&&!(n&2)&&s!==null)e:for(;;){if(s===null)return;var l=s.tag;if(l===3||l===4){var u=s.stateNode.containerInfo;if(u===a||u.nodeType===8&&u.parentNode===a)break;if(l===4)for(l=s.return;l!==null;){var d=l.tag;if((d===3||d===4)&&(d=l.stateNode.containerInfo,d===a||d.nodeType===8&&d.parentNode===a))return;l=l.return}for(;u!==null;){if(l=Vr(u),l===null)return;if(d=l.tag,d===5||d===6){s=i=l;continue e}u=u.parentNode}}s=s.return}Bf(function(){var x=i,_=gc(t),C=[];e:{var b=jm.get(e);if(b!==void 0){var L=Nc,y=e;switch(e){case"keypress":if(gi(t)===0)break e;case"keydown":case"keyup":L=Zg;break;case"focusin":y="focus",L=Tl;break;case"focusout":y="blur",L=Tl;break;case"beforeblur":case"afterblur":L=Tl;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":L=Ud;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":L=Ug;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":L=nv;break;case gm:case vm:case ym:L=Hg;break;case xm:L=sv;break;case"scroll":L=Rg;break;case"wheel":L=iv;break;case"copy":case"cut":case"paste":L=Kg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":L=Wd}var S=(n&4)!==0,E=!S&&e==="scroll",p=S?b!==null?b+"Capture":null:b;S=[];for(var m=x,v;m!==null;){v=m;var j=v.stateNode;if(v.tag===5&&j!==null&&(v=j,p!==null&&(j=ma(m,p),j!=null&&S.push(ja(m,j,v)))),E)break;m=m.return}0<S.length&&(b=new L(b,y,null,t,_),C.push({event:b,listeners:S}))}}if(!(n&7)){e:{if(b=e==="mouseover"||e==="pointerover",L=e==="mouseout"||e==="pointerout",b&&t!==jo&&(y=t.relatedTarget||t.fromElement)&&(Vr(y)||y[or]))break e;if((L||b)&&(b=_.window===_?_:(b=_.ownerDocument)?b.defaultView||b.parentWindow:window,L?(y=t.relatedTarget||t.toElement,L=x,y=y?Vr(y):null,y!==null&&(E=ts(y),y!==E||y.tag!==5&&y.tag!==6)&&(y=null)):(L=null,y=x),L!==y)){if(S=Ud,j="onMouseLeave",p="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(S=Wd,j="onPointerLeave",p="onPointerEnter",m="pointer"),E=L==null?b:fs(L),v=y==null?b:fs(y),b=new S(j,m+"leave",L,t,_),b.target=E,b.relatedTarget=v,j=null,Vr(_)===x&&(S=new S(p,m+"enter",y,t,_),S.target=v,S.relatedTarget=E,j=S),E=j,L&&y)t:{for(S=L,p=y,m=0,v=S;v;v=ns(v))m++;for(v=0,j=p;j;j=ns(j))v++;for(;0<m-v;)S=ns(S),m--;for(;0<v-m;)p=ns(p),v--;for(;m--;){if(S===p||p!==null&&S===p.alternate)break t;S=ns(S),p=ns(p)}S=null}else S=null;L!==null&&eu(C,b,L,S,!1),y!==null&&E!==null&&eu(C,E,y,S,!0)}}e:{if(b=x?fs(x):window,L=b.nodeName&&b.nodeName.toLowerCase(),L==="select"||L==="input"&&b.type==="file")var P=mv;else if(Kd(b))if(um)P=vv;else{P=hv;var k=pv}else(L=b.nodeName)&&L.toLowerCase()==="input"&&(b.type==="checkbox"||b.type==="radio")&&(P=gv);if(P&&(P=P(e,x))){dm(C,P,t,_);break e}k&&k(e,b,x),e==="focusout"&&(k=b._wrapperState)&&k.controlled&&b.type==="number"&&ho(b,"number",b.value)}switch(k=x?fs(x):window,e){case"focusin":(Kd(k)||k.contentEditable==="true")&&(ds=k,ko=x,aa=null);break;case"focusout":aa=ko=ds=null;break;case"mousedown":Eo=!0;break;case"contextmenu":case"mouseup":case"dragend":Eo=!1,Jd(C,t,_);break;case"selectionchange":if(jv)break;case"keydown":case"keyup":Jd(C,t,_)}var D;if(Sc)e:{switch(e){case"compositionstart":var M="onCompositionStart";break e;case"compositionend":M="onCompositionEnd";break e;case"compositionupdate":M="onCompositionUpdate";break e}M=void 0}else cs?om(e,t)&&(M="onCompositionEnd"):e==="keydown"&&t.keyCode===229&&(M="onCompositionStart");M&&(lm&&t.locale!=="ko"&&(cs||M!=="onCompositionStart"?M==="onCompositionEnd"&&cs&&(D=im()):(jr=_,_c="value"in jr?jr.value:jr.textContent,cs=!0)),k=Ti(x,M),0<k.length&&(M=new Vd(M,e,null,t,_),C.push({event:M,listeners:k}),D?M.data=D:(D=cm(t),D!==null&&(M.data=D)))),(D=ov?cv(e,t):dv(e,t))&&(x=Ti(x,"onBeforeInput"),0<x.length&&(_=new Vd("onBeforeInput","beforeinput",null,t,_),C.push({event:_,listeners:x}),_.data=D))}_m(C,n)})}function ja(e,n,t){return{instance:e,listener:n,currentTarget:t}}function Ti(e,n){for(var t=n+"Capture",s=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=ma(e,t),i!=null&&s.unshift(ja(e,i,a)),i=ma(e,n),i!=null&&s.push(ja(e,i,a))),e=e.return}return s}function ns(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function eu(e,n,t,s,a){for(var i=n._reactName,l=[];t!==null&&t!==s;){var u=t,d=u.alternate,x=u.stateNode;if(d!==null&&d===s)break;u.tag===5&&x!==null&&(u=x,a?(d=ma(t,i),d!=null&&l.unshift(ja(t,d,u))):a||(d=ma(t,i),d!=null&&l.push(ja(t,d,u)))),t=t.return}l.length!==0&&e.push({event:n,listeners:l})}var Sv=/\r\n?/g,Cv=/\u0000|\uFFFD/g;function tu(e){return(typeof e=="string"?e:""+e).replace(Sv,`
`).replace(Cv,"")}function Xa(e,n,t){if(n=tu(n),tu(e)!==n&&t)throw Error(je(425))}function Pi(){}var Ao=null,Io=null;function Do(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var To=typeof setTimeout=="function"?setTimeout:void 0,wv=typeof clearTimeout=="function"?clearTimeout:void 0,nu=typeof Promise=="function"?Promise:void 0,kv=typeof queueMicrotask=="function"?queueMicrotask:typeof nu<"u"?function(e){return nu.resolve(null).then(e).catch(Ev)}:To;function Ev(e){setTimeout(function(){throw e})}function zl(e,n){var t=n,s=0;do{var a=t.nextSibling;if(e.removeChild(t),a&&a.nodeType===8)if(t=a.data,t==="/$"){if(s===0){e.removeChild(a),ga(n);return}s--}else t!=="$"&&t!=="$?"&&t!=="$!"||s++;t=a}while(t);ga(n)}function wr(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return e}function ru(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var t=e.data;if(t==="$"||t==="$!"||t==="$?"){if(n===0)return e;n--}else t==="/$"&&n++}e=e.previousSibling}return null}var Fs=Math.random().toString(36).slice(2),Qn="__reactFiber$"+Fs,_a="__reactProps$"+Fs,or="__reactContainer$"+Fs,Po="__reactEvents$"+Fs,Av="__reactListeners$"+Fs,Iv="__reactHandles$"+Fs;function Vr(e){var n=e[Qn];if(n)return n;for(var t=e.parentNode;t;){if(n=t[or]||t[Qn]){if(t=n.alternate,n.child!==null||t!==null&&t.child!==null)for(e=ru(e);e!==null;){if(t=e[Qn])return t;e=ru(e)}return n}e=t,t=e.parentNode}return null}function Fa(e){return e=e[Qn]||e[or],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function fs(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(je(33))}function ol(e){return e[_a]||null}var Mo=[],ms=-1;function $r(e){return{current:e}}function _t(e){0>ms||(e.current=Mo[ms],Mo[ms]=null,ms--)}function xt(e,n){ms++,Mo[ms]=e.current,e.current=n}var Pr={},tn=$r(Pr),mn=$r(!1),Yr=Pr;function Es(e,n){var t=e.type.contextTypes;if(!t)return Pr;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===n)return s.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in t)a[i]=n[i];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=a),a}function pn(e){return e=e.childContextTypes,e!=null}function Mi(){_t(mn),_t(tn)}function su(e,n,t){if(tn.current!==Pr)throw Error(je(168));xt(tn,n),xt(mn,t)}function bm(e,n,t){var s=e.stateNode;if(n=n.childContextTypes,typeof s.getChildContext!="function")return t;s=s.getChildContext();for(var a in s)if(!(a in n))throw Error(je(108,pg(e)||"Unknown",a));return Et({},t,s)}function Oi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Pr,Yr=tn.current,xt(tn,e),xt(mn,mn.current),!0}function au(e,n,t){var s=e.stateNode;if(!s)throw Error(je(169));t?(e=bm(e,n,Yr),s.__reactInternalMemoizedMergedChildContext=e,_t(mn),_t(tn),xt(tn,e)):_t(mn),xt(mn,t)}var rr=null,cl=!1,Ul=!1;function Sm(e){rr===null?rr=[e]:rr.push(e)}function Dv(e){cl=!0,Sm(e)}function Fr(){if(!Ul&&rr!==null){Ul=!0;var e=0,n=gt;try{var t=rr;for(gt=1;e<t.length;e++){var s=t[e];do s=s(!0);while(s!==null)}rr=null,cl=!1}catch(a){throw rr!==null&&(rr=rr.slice(e+1)),Gf(vc,Fr),a}finally{gt=n,Ul=!1}}return null}var ps=[],hs=0,$i=null,Fi=0,En=[],An=0,qr=null,sr=1,ar="";function Rr(e,n){ps[hs++]=Fi,ps[hs++]=$i,$i=e,Fi=n}function Cm(e,n,t){En[An++]=sr,En[An++]=ar,En[An++]=qr,qr=e;var s=sr;e=ar;var a=32-zn(s)-1;s&=~(1<<a),t+=1;var i=32-zn(n)+a;if(30<i){var l=a-a%5;i=(s&(1<<l)-1).toString(32),s>>=l,a-=l,sr=1<<32-zn(n)+a|t<<a|s,ar=i+e}else sr=1<<i|t<<a|s,ar=e}function wc(e){e.return!==null&&(Rr(e,1),Cm(e,1,0))}function kc(e){for(;e===$i;)$i=ps[--hs],ps[hs]=null,Fi=ps[--hs],ps[hs]=null;for(;e===qr;)qr=En[--An],En[An]=null,ar=En[--An],En[An]=null,sr=En[--An],En[An]=null}var jn=null,xn=null,Nt=!1,Rn=null;function wm(e,n){var t=In(5,null,null,0);t.elementType="DELETED",t.stateNode=n,t.return=e,n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)}function iu(e,n){switch(e.tag){case 5:var t=e.type;return n=n.nodeType!==1||t.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(e.stateNode=n,jn=e,xn=wr(n.firstChild),!0):!1;case 6:return n=e.pendingProps===""||n.nodeType!==3?null:n,n!==null?(e.stateNode=n,jn=e,xn=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(t=qr!==null?{id:sr,overflow:ar}:null,e.memoizedState={dehydrated:n,treeContext:t,retryLane:1073741824},t=In(18,null,null,0),t.stateNode=n,t.return=e,e.child=t,jn=e,xn=null,!0):!1;default:return!1}}function Oo(e){return(e.mode&1)!==0&&(e.flags&128)===0}function $o(e){if(Nt){var n=xn;if(n){var t=n;if(!iu(e,n)){if(Oo(e))throw Error(je(418));n=wr(t.nextSibling);var s=jn;n&&iu(e,n)?wm(s,t):(e.flags=e.flags&-4097|2,Nt=!1,jn=e)}}else{if(Oo(e))throw Error(je(418));e.flags=e.flags&-4097|2,Nt=!1,jn=e}}}function lu(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;jn=e}function Za(e){if(e!==jn)return!1;if(!Nt)return lu(e),Nt=!0,!1;var n;if((n=e.tag!==3)&&!(n=e.tag!==5)&&(n=e.type,n=n!=="head"&&n!=="body"&&!Do(e.type,e.memoizedProps)),n&&(n=xn)){if(Oo(e))throw km(),Error(je(418));for(;n;)wm(e,n),n=wr(n.nextSibling)}if(lu(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(je(317));e:{for(e=e.nextSibling,n=0;e;){if(e.nodeType===8){var t=e.data;if(t==="/$"){if(n===0){xn=wr(e.nextSibling);break e}n--}else t!=="$"&&t!=="$!"&&t!=="$?"||n++}e=e.nextSibling}xn=null}}else xn=jn?wr(e.stateNode.nextSibling):null;return!0}function km(){for(var e=xn;e;)e=wr(e.nextSibling)}function As(){xn=jn=null,Nt=!1}function Ec(e){Rn===null?Rn=[e]:Rn.push(e)}var Tv=fr.ReactCurrentBatchConfig;function Bs(e,n,t){if(e=t.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(je(309));var s=t.stateNode}if(!s)throw Error(je(147,e));var a=s,i=""+e;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===i?n.ref:(n=function(l){var u=a.refs;l===null?delete u[i]:u[i]=l},n._stringRef=i,n)}if(typeof e!="string")throw Error(je(284));if(!t._owner)throw Error(je(290,e))}return e}function ei(e,n){throw e=Object.prototype.toString.call(n),Error(je(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e))}function ou(e){var n=e._init;return n(e._payload)}function Em(e){function n(p,m){if(e){var v=p.deletions;v===null?(p.deletions=[m],p.flags|=16):v.push(m)}}function t(p,m){if(!e)return null;for(;m!==null;)n(p,m),m=m.sibling;return null}function s(p,m){for(p=new Map;m!==null;)m.key!==null?p.set(m.key,m):p.set(m.index,m),m=m.sibling;return p}function a(p,m){return p=Ir(p,m),p.index=0,p.sibling=null,p}function i(p,m,v){return p.index=v,e?(v=p.alternate,v!==null?(v=v.index,v<m?(p.flags|=2,m):v):(p.flags|=2,m)):(p.flags|=1048576,m)}function l(p){return e&&p.alternate===null&&(p.flags|=2),p}function u(p,m,v,j){return m===null||m.tag!==6?(m=ql(v,p.mode,j),m.return=p,m):(m=a(m,v),m.return=p,m)}function d(p,m,v,j){var P=v.type;return P===os?_(p,m,v.props.children,j,v.key):m!==null&&(m.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===gr&&ou(P)===m.type)?(j=a(m,v.props),j.ref=Bs(p,m,v),j.return=p,j):(j=bi(v.type,v.key,v.props,null,p.mode,j),j.ref=Bs(p,m,v),j.return=p,j)}function x(p,m,v,j){return m===null||m.tag!==4||m.stateNode.containerInfo!==v.containerInfo||m.stateNode.implementation!==v.implementation?(m=Gl(v,p.mode,j),m.return=p,m):(m=a(m,v.children||[]),m.return=p,m)}function _(p,m,v,j,P){return m===null||m.tag!==7?(m=Kr(v,p.mode,j,P),m.return=p,m):(m=a(m,v),m.return=p,m)}function C(p,m,v){if(typeof m=="string"&&m!==""||typeof m=="number")return m=ql(""+m,p.mode,v),m.return=p,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Wa:return v=bi(m.type,m.key,m.props,null,p.mode,v),v.ref=Bs(p,null,m),v.return=p,v;case ls:return m=Gl(m,p.mode,v),m.return=p,m;case gr:var j=m._init;return C(p,j(m._payload),v)}if(Xs(m)||zs(m))return m=Kr(m,p.mode,v,null),m.return=p,m;ei(p,m)}return null}function b(p,m,v,j){var P=m!==null?m.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return P!==null?null:u(p,m,""+v,j);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Wa:return v.key===P?d(p,m,v,j):null;case ls:return v.key===P?x(p,m,v,j):null;case gr:return P=v._init,b(p,m,P(v._payload),j)}if(Xs(v)||zs(v))return P!==null?null:_(p,m,v,j,null);ei(p,v)}return null}function L(p,m,v,j,P){if(typeof j=="string"&&j!==""||typeof j=="number")return p=p.get(v)||null,u(m,p,""+j,P);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Wa:return p=p.get(j.key===null?v:j.key)||null,d(m,p,j,P);case ls:return p=p.get(j.key===null?v:j.key)||null,x(m,p,j,P);case gr:var k=j._init;return L(p,m,v,k(j._payload),P)}if(Xs(j)||zs(j))return p=p.get(v)||null,_(m,p,j,P,null);ei(m,j)}return null}function y(p,m,v,j){for(var P=null,k=null,D=m,M=m=0,J=null;D!==null&&M<v.length;M++){D.index>M?(J=D,D=null):J=D.sibling;var se=b(p,D,v[M],j);if(se===null){D===null&&(D=J);break}e&&D&&se.alternate===null&&n(p,D),m=i(se,m,M),k===null?P=se:k.sibling=se,k=se,D=J}if(M===v.length)return t(p,D),Nt&&Rr(p,M),P;if(D===null){for(;M<v.length;M++)D=C(p,v[M],j),D!==null&&(m=i(D,m,M),k===null?P=D:k.sibling=D,k=D);return Nt&&Rr(p,M),P}for(D=s(p,D);M<v.length;M++)J=L(D,p,M,v[M],j),J!==null&&(e&&J.alternate!==null&&D.delete(J.key===null?M:J.key),m=i(J,m,M),k===null?P=J:k.sibling=J,k=J);return e&&D.forEach(function(R){return n(p,R)}),Nt&&Rr(p,M),P}function S(p,m,v,j){var P=zs(v);if(typeof P!="function")throw Error(je(150));if(v=P.call(v),v==null)throw Error(je(151));for(var k=P=null,D=m,M=m=0,J=null,se=v.next();D!==null&&!se.done;M++,se=v.next()){D.index>M?(J=D,D=null):J=D.sibling;var R=b(p,D,se.value,j);if(R===null){D===null&&(D=J);break}e&&D&&R.alternate===null&&n(p,D),m=i(R,m,M),k===null?P=R:k.sibling=R,k=R,D=J}if(se.done)return t(p,D),Nt&&Rr(p,M),P;if(D===null){for(;!se.done;M++,se=v.next())se=C(p,se.value,j),se!==null&&(m=i(se,m,M),k===null?P=se:k.sibling=se,k=se);return Nt&&Rr(p,M),P}for(D=s(p,D);!se.done;M++,se=v.next())se=L(D,p,M,se.value,j),se!==null&&(e&&se.alternate!==null&&D.delete(se.key===null?M:se.key),m=i(se,m,M),k===null?P=se:k.sibling=se,k=se);return e&&D.forEach(function(ae){return n(p,ae)}),Nt&&Rr(p,M),P}function E(p,m,v,j){if(typeof v=="object"&&v!==null&&v.type===os&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Wa:e:{for(var P=v.key,k=m;k!==null;){if(k.key===P){if(P=v.type,P===os){if(k.tag===7){t(p,k.sibling),m=a(k,v.props.children),m.return=p,p=m;break e}}else if(k.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===gr&&ou(P)===k.type){t(p,k.sibling),m=a(k,v.props),m.ref=Bs(p,k,v),m.return=p,p=m;break e}t(p,k);break}else n(p,k);k=k.sibling}v.type===os?(m=Kr(v.props.children,p.mode,j,v.key),m.return=p,p=m):(j=bi(v.type,v.key,v.props,null,p.mode,j),j.ref=Bs(p,m,v),j.return=p,p=j)}return l(p);case ls:e:{for(k=v.key;m!==null;){if(m.key===k)if(m.tag===4&&m.stateNode.containerInfo===v.containerInfo&&m.stateNode.implementation===v.implementation){t(p,m.sibling),m=a(m,v.children||[]),m.return=p,p=m;break e}else{t(p,m);break}else n(p,m);m=m.sibling}m=Gl(v,p.mode,j),m.return=p,p=m}return l(p);case gr:return k=v._init,E(p,m,k(v._payload),j)}if(Xs(v))return y(p,m,v,j);if(zs(v))return S(p,m,v,j);ei(p,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,m!==null&&m.tag===6?(t(p,m.sibling),m=a(m,v),m.return=p,p=m):(t(p,m),m=ql(v,p.mode,j),m.return=p,p=m),l(p)):t(p,m)}return E}var Is=Em(!0),Am=Em(!1),Li=$r(null),Ri=null,gs=null,Ac=null;function Ic(){Ac=gs=Ri=null}function Dc(e){var n=Li.current;_t(Li),e._currentValue=n}function Fo(e,n,t){for(;e!==null;){var s=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,s!==null&&(s.childLanes|=n)):s!==null&&(s.childLanes&n)!==n&&(s.childLanes|=n),e===t)break;e=e.return}}function bs(e,n){Ri=e,Ac=gs=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&n&&(fn=!0),e.firstContext=null)}function Tn(e){var n=e._currentValue;if(Ac!==e)if(e={context:e,memoizedValue:n,next:null},gs===null){if(Ri===null)throw Error(je(308));gs=e,Ri.dependencies={lanes:0,firstContext:e}}else gs=gs.next=e;return n}var Wr=null;function Tc(e){Wr===null?Wr=[e]:Wr.push(e)}function Im(e,n,t,s){var a=n.interleaved;return a===null?(t.next=t,Tc(n)):(t.next=a.next,a.next=t),n.interleaved=t,cr(e,s)}function cr(e,n){e.lanes|=n;var t=e.alternate;for(t!==null&&(t.lanes|=n),t=e,e=e.return;e!==null;)e.childLanes|=n,t=e.alternate,t!==null&&(t.childLanes|=n),t=e,e=e.return;return t.tag===3?t.stateNode:null}var vr=!1;function Pc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Dm(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ir(e,n){return{eventTime:e,lane:n,tag:0,payload:null,callback:null,next:null}}function kr(e,n,t){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,ot&2){var a=s.pending;return a===null?n.next=n:(n.next=a.next,a.next=n),s.pending=n,cr(e,t)}return a=s.interleaved,a===null?(n.next=n,Tc(s)):(n.next=a.next,a.next=n),s.interleaved=n,cr(e,t)}function vi(e,n,t){if(n=n.updateQueue,n!==null&&(n=n.shared,(t&4194240)!==0)){var s=n.lanes;s&=e.pendingLanes,t|=s,n.lanes=t,yc(e,t)}}function cu(e,n){var t=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,t===s)){var a=null,i=null;if(t=t.firstBaseUpdate,t!==null){do{var l={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};i===null?a=i=l:i=i.next=l,t=t.next}while(t!==null);i===null?a=i=n:i=i.next=n}else a=i=n;t={baseState:s.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:s.shared,effects:s.effects},e.updateQueue=t;return}e=t.lastBaseUpdate,e===null?t.firstBaseUpdate=n:e.next=n,t.lastBaseUpdate=n}function zi(e,n,t,s){var a=e.updateQueue;vr=!1;var i=a.firstBaseUpdate,l=a.lastBaseUpdate,u=a.shared.pending;if(u!==null){a.shared.pending=null;var d=u,x=d.next;d.next=null,l===null?i=x:l.next=x,l=d;var _=e.alternate;_!==null&&(_=_.updateQueue,u=_.lastBaseUpdate,u!==l&&(u===null?_.firstBaseUpdate=x:u.next=x,_.lastBaseUpdate=d))}if(i!==null){var C=a.baseState;l=0,_=x=d=null,u=i;do{var b=u.lane,L=u.eventTime;if((s&b)===b){_!==null&&(_=_.next={eventTime:L,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var y=e,S=u;switch(b=n,L=t,S.tag){case 1:if(y=S.payload,typeof y=="function"){C=y.call(L,C,b);break e}C=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=S.payload,b=typeof y=="function"?y.call(L,C,b):y,b==null)break e;C=Et({},C,b);break e;case 2:vr=!0}}u.callback!==null&&u.lane!==0&&(e.flags|=64,b=a.effects,b===null?a.effects=[u]:b.push(u))}else L={eventTime:L,lane:b,tag:u.tag,payload:u.payload,callback:u.callback,next:null},_===null?(x=_=L,d=C):_=_.next=L,l|=b;if(u=u.next,u===null){if(u=a.shared.pending,u===null)break;b=u,u=b.next,b.next=null,a.lastBaseUpdate=b,a.shared.pending=null}}while(!0);if(_===null&&(d=C),a.baseState=d,a.firstBaseUpdate=x,a.lastBaseUpdate=_,n=a.shared.interleaved,n!==null){a=n;do l|=a.lane,a=a.next;while(a!==n)}else i===null&&(a.shared.lanes=0);Qr|=l,e.lanes=l,e.memoizedState=C}}function du(e,n,t){if(e=n.effects,n.effects=null,e!==null)for(n=0;n<e.length;n++){var s=e[n],a=s.callback;if(a!==null){if(s.callback=null,s=t,typeof a!="function")throw Error(je(191,a));a.call(s)}}}var La={},Xn=$r(La),Na=$r(La),ba=$r(La);function Hr(e){if(e===La)throw Error(je(174));return e}function Mc(e,n){switch(xt(ba,n),xt(Na,e),xt(Xn,La),e=n.nodeType,e){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:vo(null,"");break;default:e=e===8?n.parentNode:n,n=e.namespaceURI||null,e=e.tagName,n=vo(n,e)}_t(Xn),xt(Xn,n)}function Ds(){_t(Xn),_t(Na),_t(ba)}function Tm(e){Hr(ba.current);var n=Hr(Xn.current),t=vo(n,e.type);n!==t&&(xt(Na,e),xt(Xn,t))}function Oc(e){Na.current===e&&(_t(Xn),_t(Na))}var Ct=$r(0);function Ui(e){for(var n=e;n!==null;){if(n.tag===13){var t=n.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if(n.flags&128)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Vl=[];function $c(){for(var e=0;e<Vl.length;e++)Vl[e]._workInProgressVersionPrimary=null;Vl.length=0}var yi=fr.ReactCurrentDispatcher,Wl=fr.ReactCurrentBatchConfig,Gr=0,wt=null,Vt=null,Ht=null,Vi=!1,ia=!1,Sa=0,Pv=0;function Qt(){throw Error(je(321))}function Fc(e,n){if(n===null)return!1;for(var t=0;t<n.length&&t<e.length;t++)if(!Vn(e[t],n[t]))return!1;return!0}function Lc(e,n,t,s,a,i){if(Gr=i,wt=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,yi.current=e===null||e.memoizedState===null?Fv:Lv,e=t(s,a),ia){i=0;do{if(ia=!1,Sa=0,25<=i)throw Error(je(301));i+=1,Ht=Vt=null,n.updateQueue=null,yi.current=Rv,e=t(s,a)}while(ia)}if(yi.current=Wi,n=Vt!==null&&Vt.next!==null,Gr=0,Ht=Vt=wt=null,Vi=!1,n)throw Error(je(300));return e}function Rc(){var e=Sa!==0;return Sa=0,e}function Gn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ht===null?wt.memoizedState=Ht=e:Ht=Ht.next=e,Ht}function Pn(){if(Vt===null){var e=wt.alternate;e=e!==null?e.memoizedState:null}else e=Vt.next;var n=Ht===null?wt.memoizedState:Ht.next;if(n!==null)Ht=n,Vt=e;else{if(e===null)throw Error(je(310));Vt=e,e={memoizedState:Vt.memoizedState,baseState:Vt.baseState,baseQueue:Vt.baseQueue,queue:Vt.queue,next:null},Ht===null?wt.memoizedState=Ht=e:Ht=Ht.next=e}return Ht}function Ca(e,n){return typeof n=="function"?n(e):n}function Hl(e){var n=Pn(),t=n.queue;if(t===null)throw Error(je(311));t.lastRenderedReducer=e;var s=Vt,a=s.baseQueue,i=t.pending;if(i!==null){if(a!==null){var l=a.next;a.next=i.next,i.next=l}s.baseQueue=a=i,t.pending=null}if(a!==null){i=a.next,s=s.baseState;var u=l=null,d=null,x=i;do{var _=x.lane;if((Gr&_)===_)d!==null&&(d=d.next={lane:0,action:x.action,hasEagerState:x.hasEagerState,eagerState:x.eagerState,next:null}),s=x.hasEagerState?x.eagerState:e(s,x.action);else{var C={lane:_,action:x.action,hasEagerState:x.hasEagerState,eagerState:x.eagerState,next:null};d===null?(u=d=C,l=s):d=d.next=C,wt.lanes|=_,Qr|=_}x=x.next}while(x!==null&&x!==i);d===null?l=s:d.next=u,Vn(s,n.memoizedState)||(fn=!0),n.memoizedState=s,n.baseState=l,n.baseQueue=d,t.lastRenderedState=s}if(e=t.interleaved,e!==null){a=e;do i=a.lane,wt.lanes|=i,Qr|=i,a=a.next;while(a!==e)}else a===null&&(t.lanes=0);return[n.memoizedState,t.dispatch]}function Bl(e){var n=Pn(),t=n.queue;if(t===null)throw Error(je(311));t.lastRenderedReducer=e;var s=t.dispatch,a=t.pending,i=n.memoizedState;if(a!==null){t.pending=null;var l=a=a.next;do i=e(i,l.action),l=l.next;while(l!==a);Vn(i,n.memoizedState)||(fn=!0),n.memoizedState=i,n.baseQueue===null&&(n.baseState=i),t.lastRenderedState=i}return[i,s]}function Pm(){}function Mm(e,n){var t=wt,s=Pn(),a=n(),i=!Vn(s.memoizedState,a);if(i&&(s.memoizedState=a,fn=!0),s=s.queue,zc(Fm.bind(null,t,s,e),[e]),s.getSnapshot!==n||i||Ht!==null&&Ht.memoizedState.tag&1){if(t.flags|=2048,wa(9,$m.bind(null,t,s,a,n),void 0,null),Bt===null)throw Error(je(349));Gr&30||Om(t,n,a)}return a}function Om(e,n,t){e.flags|=16384,e={getSnapshot:n,value:t},n=wt.updateQueue,n===null?(n={lastEffect:null,stores:null},wt.updateQueue=n,n.stores=[e]):(t=n.stores,t===null?n.stores=[e]:t.push(e))}function $m(e,n,t,s){n.value=t,n.getSnapshot=s,Lm(n)&&Rm(e)}function Fm(e,n,t){return t(function(){Lm(n)&&Rm(e)})}function Lm(e){var n=e.getSnapshot;e=e.value;try{var t=n();return!Vn(e,t)}catch{return!0}}function Rm(e){var n=cr(e,1);n!==null&&Un(n,e,1,-1)}function uu(e){var n=Gn();return typeof e=="function"&&(e=e()),n.memoizedState=n.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ca,lastRenderedState:e},n.queue=e,e=e.dispatch=$v.bind(null,wt,e),[n.memoizedState,e]}function wa(e,n,t,s){return e={tag:e,create:n,destroy:t,deps:s,next:null},n=wt.updateQueue,n===null?(n={lastEffect:null,stores:null},wt.updateQueue=n,n.lastEffect=e.next=e):(t=n.lastEffect,t===null?n.lastEffect=e.next=e:(s=t.next,t.next=e,e.next=s,n.lastEffect=e)),e}function zm(){return Pn().memoizedState}function xi(e,n,t,s){var a=Gn();wt.flags|=e,a.memoizedState=wa(1|n,t,void 0,s===void 0?null:s)}function dl(e,n,t,s){var a=Pn();s=s===void 0?null:s;var i=void 0;if(Vt!==null){var l=Vt.memoizedState;if(i=l.destroy,s!==null&&Fc(s,l.deps)){a.memoizedState=wa(n,t,i,s);return}}wt.flags|=e,a.memoizedState=wa(1|n,t,i,s)}function fu(e,n){return xi(8390656,8,e,n)}function zc(e,n){return dl(2048,8,e,n)}function Um(e,n){return dl(4,2,e,n)}function Vm(e,n){return dl(4,4,e,n)}function Wm(e,n){if(typeof n=="function")return e=e(),n(e),function(){n(null)};if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function Hm(e,n,t){return t=t!=null?t.concat([e]):null,dl(4,4,Wm.bind(null,n,e),t)}function Uc(){}function Bm(e,n){var t=Pn();n=n===void 0?null:n;var s=t.memoizedState;return s!==null&&n!==null&&Fc(n,s[1])?s[0]:(t.memoizedState=[e,n],e)}function Km(e,n){var t=Pn();n=n===void 0?null:n;var s=t.memoizedState;return s!==null&&n!==null&&Fc(n,s[1])?s[0]:(e=e(),t.memoizedState=[e,n],e)}function Ym(e,n,t){return Gr&21?(Vn(t,n)||(t=Xf(),wt.lanes|=t,Qr|=t,e.baseState=!0),n):(e.baseState&&(e.baseState=!1,fn=!0),e.memoizedState=t)}function Mv(e,n){var t=gt;gt=t!==0&&4>t?t:4,e(!0);var s=Wl.transition;Wl.transition={};try{e(!1),n()}finally{gt=t,Wl.transition=s}}function qm(){return Pn().memoizedState}function Ov(e,n,t){var s=Ar(e);if(t={lane:s,action:t,hasEagerState:!1,eagerState:null,next:null},Gm(e))Qm(n,t);else if(t=Im(e,n,t,s),t!==null){var a=an();Un(t,e,s,a),Jm(t,n,s)}}function $v(e,n,t){var s=Ar(e),a={lane:s,action:t,hasEagerState:!1,eagerState:null,next:null};if(Gm(e))Qm(n,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=n.lastRenderedReducer,i!==null))try{var l=n.lastRenderedState,u=i(l,t);if(a.hasEagerState=!0,a.eagerState=u,Vn(u,l)){var d=n.interleaved;d===null?(a.next=a,Tc(n)):(a.next=d.next,d.next=a),n.interleaved=a;return}}catch{}finally{}t=Im(e,n,a,s),t!==null&&(a=an(),Un(t,e,s,a),Jm(t,n,s))}}function Gm(e){var n=e.alternate;return e===wt||n!==null&&n===wt}function Qm(e,n){ia=Vi=!0;var t=e.pending;t===null?n.next=n:(n.next=t.next,t.next=n),e.pending=n}function Jm(e,n,t){if(t&4194240){var s=n.lanes;s&=e.pendingLanes,t|=s,n.lanes=t,yc(e,t)}}var Wi={readContext:Tn,useCallback:Qt,useContext:Qt,useEffect:Qt,useImperativeHandle:Qt,useInsertionEffect:Qt,useLayoutEffect:Qt,useMemo:Qt,useReducer:Qt,useRef:Qt,useState:Qt,useDebugValue:Qt,useDeferredValue:Qt,useTransition:Qt,useMutableSource:Qt,useSyncExternalStore:Qt,useId:Qt,unstable_isNewReconciler:!1},Fv={readContext:Tn,useCallback:function(e,n){return Gn().memoizedState=[e,n===void 0?null:n],e},useContext:Tn,useEffect:fu,useImperativeHandle:function(e,n,t){return t=t!=null?t.concat([e]):null,xi(4194308,4,Wm.bind(null,n,e),t)},useLayoutEffect:function(e,n){return xi(4194308,4,e,n)},useInsertionEffect:function(e,n){return xi(4,2,e,n)},useMemo:function(e,n){var t=Gn();return n=n===void 0?null:n,e=e(),t.memoizedState=[e,n],e},useReducer:function(e,n,t){var s=Gn();return n=t!==void 0?t(n):n,s.memoizedState=s.baseState=n,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},s.queue=e,e=e.dispatch=Ov.bind(null,wt,e),[s.memoizedState,e]},useRef:function(e){var n=Gn();return e={current:e},n.memoizedState=e},useState:uu,useDebugValue:Uc,useDeferredValue:function(e){return Gn().memoizedState=e},useTransition:function(){var e=uu(!1),n=e[0];return e=Mv.bind(null,e[1]),Gn().memoizedState=e,[n,e]},useMutableSource:function(){},useSyncExternalStore:function(e,n,t){var s=wt,a=Gn();if(Nt){if(t===void 0)throw Error(je(407));t=t()}else{if(t=n(),Bt===null)throw Error(je(349));Gr&30||Om(s,n,t)}a.memoizedState=t;var i={value:t,getSnapshot:n};return a.queue=i,fu(Fm.bind(null,s,i,e),[e]),s.flags|=2048,wa(9,$m.bind(null,s,i,t,n),void 0,null),t},useId:function(){var e=Gn(),n=Bt.identifierPrefix;if(Nt){var t=ar,s=sr;t=(s&~(1<<32-zn(s)-1)).toString(32)+t,n=":"+n+"R"+t,t=Sa++,0<t&&(n+="H"+t.toString(32)),n+=":"}else t=Pv++,n=":"+n+"r"+t.toString(32)+":";return e.memoizedState=n},unstable_isNewReconciler:!1},Lv={readContext:Tn,useCallback:Bm,useContext:Tn,useEffect:zc,useImperativeHandle:Hm,useInsertionEffect:Um,useLayoutEffect:Vm,useMemo:Km,useReducer:Hl,useRef:zm,useState:function(){return Hl(Ca)},useDebugValue:Uc,useDeferredValue:function(e){var n=Pn();return Ym(n,Vt.memoizedState,e)},useTransition:function(){var e=Hl(Ca)[0],n=Pn().memoizedState;return[e,n]},useMutableSource:Pm,useSyncExternalStore:Mm,useId:qm,unstable_isNewReconciler:!1},Rv={readContext:Tn,useCallback:Bm,useContext:Tn,useEffect:zc,useImperativeHandle:Hm,useInsertionEffect:Um,useLayoutEffect:Vm,useMemo:Km,useReducer:Bl,useRef:zm,useState:function(){return Bl(Ca)},useDebugValue:Uc,useDeferredValue:function(e){var n=Pn();return Vt===null?n.memoizedState=e:Ym(n,Vt.memoizedState,e)},useTransition:function(){var e=Bl(Ca)[0],n=Pn().memoizedState;return[e,n]},useMutableSource:Pm,useSyncExternalStore:Mm,useId:qm,unstable_isNewReconciler:!1};function Fn(e,n){if(e&&e.defaultProps){n=Et({},n),e=e.defaultProps;for(var t in e)n[t]===void 0&&(n[t]=e[t]);return n}return n}function Lo(e,n,t,s){n=e.memoizedState,t=t(s,n),t=t==null?n:Et({},n,t),e.memoizedState=t,e.lanes===0&&(e.updateQueue.baseState=t)}var ul={isMounted:function(e){return(e=e._reactInternals)?ts(e)===e:!1},enqueueSetState:function(e,n,t){e=e._reactInternals;var s=an(),a=Ar(e),i=ir(s,a);i.payload=n,t!=null&&(i.callback=t),n=kr(e,i,a),n!==null&&(Un(n,e,a,s),vi(n,e,a))},enqueueReplaceState:function(e,n,t){e=e._reactInternals;var s=an(),a=Ar(e),i=ir(s,a);i.tag=1,i.payload=n,t!=null&&(i.callback=t),n=kr(e,i,a),n!==null&&(Un(n,e,a,s),vi(n,e,a))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var t=an(),s=Ar(e),a=ir(t,s);a.tag=2,n!=null&&(a.callback=n),n=kr(e,a,s),n!==null&&(Un(n,e,s,t),vi(n,e,s))}};function mu(e,n,t,s,a,i,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,i,l):n.prototype&&n.prototype.isPureReactComponent?!ya(t,s)||!ya(a,i):!0}function Xm(e,n,t){var s=!1,a=Pr,i=n.contextType;return typeof i=="object"&&i!==null?i=Tn(i):(a=pn(n)?Yr:tn.current,s=n.contextTypes,i=(s=s!=null)?Es(e,a):Pr),n=new n(t,i),e.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=ul,e.stateNode=n,n._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),n}function pu(e,n,t,s){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(t,s),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(t,s),n.state!==e&&ul.enqueueReplaceState(n,n.state,null)}function Ro(e,n,t,s){var a=e.stateNode;a.props=t,a.state=e.memoizedState,a.refs={},Pc(e);var i=n.contextType;typeof i=="object"&&i!==null?a.context=Tn(i):(i=pn(n)?Yr:tn.current,a.context=Es(e,i)),a.state=e.memoizedState,i=n.getDerivedStateFromProps,typeof i=="function"&&(Lo(e,n,i,t),a.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(n=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),n!==a.state&&ul.enqueueReplaceState(a,a.state,null),zi(e,t,a,s),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Ts(e,n){try{var t="",s=n;do t+=mg(s),s=s.return;while(s);var a=t}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:n,stack:a,digest:null}}function Kl(e,n,t){return{value:e,source:null,stack:t??null,digest:n??null}}function zo(e,n){try{console.error(n.value)}catch(t){setTimeout(function(){throw t})}}var zv=typeof WeakMap=="function"?WeakMap:Map;function Zm(e,n,t){t=ir(-1,t),t.tag=3,t.payload={element:null};var s=n.value;return t.callback=function(){Bi||(Bi=!0,Qo=s),zo(e,n)},t}function ep(e,n,t){t=ir(-1,t),t.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var a=n.value;t.payload=function(){return s(a)},t.callback=function(){zo(e,n)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(t.callback=function(){zo(e,n),typeof s!="function"&&(Er===null?Er=new Set([this]):Er.add(this));var l=n.stack;this.componentDidCatch(n.value,{componentStack:l!==null?l:""})}),t}function hu(e,n,t){var s=e.pingCache;if(s===null){s=e.pingCache=new zv;var a=new Set;s.set(n,a)}else a=s.get(n),a===void 0&&(a=new Set,s.set(n,a));a.has(t)||(a.add(t),e=ey.bind(null,e,n,t),n.then(e,e))}function gu(e){do{var n;if((n=e.tag===13)&&(n=e.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return e;e=e.return}while(e!==null);return null}function vu(e,n,t,s,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===n?e.flags|=65536:(e.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(n=ir(-1,1),n.tag=2,kr(t,n,1))),t.lanes|=1),e)}var Uv=fr.ReactCurrentOwner,fn=!1;function sn(e,n,t,s){n.child=e===null?Am(n,null,t,s):Is(n,e.child,t,s)}function yu(e,n,t,s,a){t=t.render;var i=n.ref;return bs(n,a),s=Lc(e,n,t,s,i,a),t=Rc(),e!==null&&!fn?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~a,dr(e,n,a)):(Nt&&t&&wc(n),n.flags|=1,sn(e,n,s,a),n.child)}function xu(e,n,t,s,a){if(e===null){var i=t.type;return typeof i=="function"&&!Gc(i)&&i.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(n.tag=15,n.type=i,tp(e,n,i,s,a)):(e=bi(t.type,null,s,n,n.mode,a),e.ref=n.ref,e.return=n,n.child=e)}if(i=e.child,!(e.lanes&a)){var l=i.memoizedProps;if(t=t.compare,t=t!==null?t:ya,t(l,s)&&e.ref===n.ref)return dr(e,n,a)}return n.flags|=1,e=Ir(i,s),e.ref=n.ref,e.return=n,n.child=e}function tp(e,n,t,s,a){if(e!==null){var i=e.memoizedProps;if(ya(i,s)&&e.ref===n.ref)if(fn=!1,n.pendingProps=s=i,(e.lanes&a)!==0)e.flags&131072&&(fn=!0);else return n.lanes=e.lanes,dr(e,n,a)}return Uo(e,n,t,s,a)}function np(e,n,t){var s=n.pendingProps,a=s.children,i=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(n.mode&1))n.memoizedState={baseLanes:0,cachePool:null,transitions:null},xt(ys,yn),yn|=t;else{if(!(t&1073741824))return e=i!==null?i.baseLanes|t:t,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:e,cachePool:null,transitions:null},n.updateQueue=null,xt(ys,yn),yn|=e,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=i!==null?i.baseLanes:t,xt(ys,yn),yn|=s}else i!==null?(s=i.baseLanes|t,n.memoizedState=null):s=t,xt(ys,yn),yn|=s;return sn(e,n,a,t),n.child}function rp(e,n){var t=n.ref;(e===null&&t!==null||e!==null&&e.ref!==t)&&(n.flags|=512,n.flags|=2097152)}function Uo(e,n,t,s,a){var i=pn(t)?Yr:tn.current;return i=Es(n,i),bs(n,a),t=Lc(e,n,t,s,i,a),s=Rc(),e!==null&&!fn?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~a,dr(e,n,a)):(Nt&&s&&wc(n),n.flags|=1,sn(e,n,t,a),n.child)}function ju(e,n,t,s,a){if(pn(t)){var i=!0;Oi(n)}else i=!1;if(bs(n,a),n.stateNode===null)ji(e,n),Xm(n,t,s),Ro(n,t,s,a),s=!0;else if(e===null){var l=n.stateNode,u=n.memoizedProps;l.props=u;var d=l.context,x=t.contextType;typeof x=="object"&&x!==null?x=Tn(x):(x=pn(t)?Yr:tn.current,x=Es(n,x));var _=t.getDerivedStateFromProps,C=typeof _=="function"||typeof l.getSnapshotBeforeUpdate=="function";C||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(u!==s||d!==x)&&pu(n,l,s,x),vr=!1;var b=n.memoizedState;l.state=b,zi(n,s,l,a),d=n.memoizedState,u!==s||b!==d||mn.current||vr?(typeof _=="function"&&(Lo(n,t,_,s),d=n.memoizedState),(u=vr||mu(n,t,u,s,b,d,x))?(C||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(n.flags|=4194308)):(typeof l.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=s,n.memoizedState=d),l.props=s,l.state=d,l.context=x,s=u):(typeof l.componentDidMount=="function"&&(n.flags|=4194308),s=!1)}else{l=n.stateNode,Dm(e,n),u=n.memoizedProps,x=n.type===n.elementType?u:Fn(n.type,u),l.props=x,C=n.pendingProps,b=l.context,d=t.contextType,typeof d=="object"&&d!==null?d=Tn(d):(d=pn(t)?Yr:tn.current,d=Es(n,d));var L=t.getDerivedStateFromProps;(_=typeof L=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(u!==C||b!==d)&&pu(n,l,s,d),vr=!1,b=n.memoizedState,l.state=b,zi(n,s,l,a);var y=n.memoizedState;u!==C||b!==y||mn.current||vr?(typeof L=="function"&&(Lo(n,t,L,s),y=n.memoizedState),(x=vr||mu(n,t,x,s,b,y,d)||!1)?(_||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(s,y,d),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(s,y,d)),typeof l.componentDidUpdate=="function"&&(n.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof l.componentDidUpdate!="function"||u===e.memoizedProps&&b===e.memoizedState||(n.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&b===e.memoizedState||(n.flags|=1024),n.memoizedProps=s,n.memoizedState=y),l.props=s,l.state=y,l.context=d,s=x):(typeof l.componentDidUpdate!="function"||u===e.memoizedProps&&b===e.memoizedState||(n.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&b===e.memoizedState||(n.flags|=1024),s=!1)}return Vo(e,n,t,s,i,a)}function Vo(e,n,t,s,a,i){rp(e,n);var l=(n.flags&128)!==0;if(!s&&!l)return a&&au(n,t,!1),dr(e,n,i);s=n.stateNode,Uv.current=n;var u=l&&typeof t.getDerivedStateFromError!="function"?null:s.render();return n.flags|=1,e!==null&&l?(n.child=Is(n,e.child,null,i),n.child=Is(n,null,u,i)):sn(e,n,u,i),n.memoizedState=s.state,a&&au(n,t,!0),n.child}function sp(e){var n=e.stateNode;n.pendingContext?su(e,n.pendingContext,n.pendingContext!==n.context):n.context&&su(e,n.context,!1),Mc(e,n.containerInfo)}function _u(e,n,t,s,a){return As(),Ec(a),n.flags|=256,sn(e,n,t,s),n.child}var Wo={dehydrated:null,treeContext:null,retryLane:0};function Ho(e){return{baseLanes:e,cachePool:null,transitions:null}}function ap(e,n,t){var s=n.pendingProps,a=Ct.current,i=!1,l=(n.flags&128)!==0,u;if((u=l)||(u=e!==null&&e.memoizedState===null?!1:(a&2)!==0),u?(i=!0,n.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),xt(Ct,a&1),e===null)return $o(n),e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(n.mode&1?e.data==="$!"?n.lanes=8:n.lanes=1073741824:n.lanes=1,null):(l=s.children,e=s.fallback,i?(s=n.mode,i=n.child,l={mode:"hidden",children:l},!(s&1)&&i!==null?(i.childLanes=0,i.pendingProps=l):i=pl(l,s,0,null),e=Kr(e,s,t,null),i.return=n,e.return=n,i.sibling=e,n.child=i,n.child.memoizedState=Ho(t),n.memoizedState=Wo,e):Vc(n,l));if(a=e.memoizedState,a!==null&&(u=a.dehydrated,u!==null))return Vv(e,n,l,s,u,a,t);if(i){i=s.fallback,l=n.mode,a=e.child,u=a.sibling;var d={mode:"hidden",children:s.children};return!(l&1)&&n.child!==a?(s=n.child,s.childLanes=0,s.pendingProps=d,n.deletions=null):(s=Ir(a,d),s.subtreeFlags=a.subtreeFlags&14680064),u!==null?i=Ir(u,i):(i=Kr(i,l,t,null),i.flags|=2),i.return=n,s.return=n,s.sibling=i,n.child=s,s=i,i=n.child,l=e.child.memoizedState,l=l===null?Ho(t):{baseLanes:l.baseLanes|t,cachePool:null,transitions:l.transitions},i.memoizedState=l,i.childLanes=e.childLanes&~t,n.memoizedState=Wo,s}return i=e.child,e=i.sibling,s=Ir(i,{mode:"visible",children:s.children}),!(n.mode&1)&&(s.lanes=t),s.return=n,s.sibling=null,e!==null&&(t=n.deletions,t===null?(n.deletions=[e],n.flags|=16):t.push(e)),n.child=s,n.memoizedState=null,s}function Vc(e,n){return n=pl({mode:"visible",children:n},e.mode,0,null),n.return=e,e.child=n}function ti(e,n,t,s){return s!==null&&Ec(s),Is(n,e.child,null,t),e=Vc(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function Vv(e,n,t,s,a,i,l){if(t)return n.flags&256?(n.flags&=-257,s=Kl(Error(je(422))),ti(e,n,l,s)):n.memoizedState!==null?(n.child=e.child,n.flags|=128,null):(i=s.fallback,a=n.mode,s=pl({mode:"visible",children:s.children},a,0,null),i=Kr(i,a,l,null),i.flags|=2,s.return=n,i.return=n,s.sibling=i,n.child=s,n.mode&1&&Is(n,e.child,null,l),n.child.memoizedState=Ho(l),n.memoizedState=Wo,i);if(!(n.mode&1))return ti(e,n,l,null);if(a.data==="$!"){if(s=a.nextSibling&&a.nextSibling.dataset,s)var u=s.dgst;return s=u,i=Error(je(419)),s=Kl(i,s,void 0),ti(e,n,l,s)}if(u=(l&e.childLanes)!==0,fn||u){if(s=Bt,s!==null){switch(l&-l){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(s.suspendedLanes|l)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,cr(e,a),Un(s,e,a,-1))}return qc(),s=Kl(Error(je(421))),ti(e,n,l,s)}return a.data==="$?"?(n.flags|=128,n.child=e.child,n=ty.bind(null,e),a._reactRetry=n,null):(e=i.treeContext,xn=wr(a.nextSibling),jn=n,Nt=!0,Rn=null,e!==null&&(En[An++]=sr,En[An++]=ar,En[An++]=qr,sr=e.id,ar=e.overflow,qr=n),n=Vc(n,s.children),n.flags|=4096,n)}function Nu(e,n,t){e.lanes|=n;var s=e.alternate;s!==null&&(s.lanes|=n),Fo(e.return,n,t)}function Yl(e,n,t,s,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:s,tail:t,tailMode:a}:(i.isBackwards=n,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=t,i.tailMode=a)}function ip(e,n,t){var s=n.pendingProps,a=s.revealOrder,i=s.tail;if(sn(e,n,s.children,t),s=Ct.current,s&2)s=s&1|2,n.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Nu(e,t,n);else if(e.tag===19)Nu(e,t,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(xt(Ct,s),!(n.mode&1))n.memoizedState=null;else switch(a){case"forwards":for(t=n.child,a=null;t!==null;)e=t.alternate,e!==null&&Ui(e)===null&&(a=t),t=t.sibling;t=a,t===null?(a=n.child,n.child=null):(a=t.sibling,t.sibling=null),Yl(n,!1,a,t,i);break;case"backwards":for(t=null,a=n.child,n.child=null;a!==null;){if(e=a.alternate,e!==null&&Ui(e)===null){n.child=a;break}e=a.sibling,a.sibling=t,t=a,a=e}Yl(n,!0,t,null,i);break;case"together":Yl(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function ji(e,n){!(n.mode&1)&&e!==null&&(e.alternate=null,n.alternate=null,n.flags|=2)}function dr(e,n,t){if(e!==null&&(n.dependencies=e.dependencies),Qr|=n.lanes,!(t&n.childLanes))return null;if(e!==null&&n.child!==e.child)throw Error(je(153));if(n.child!==null){for(e=n.child,t=Ir(e,e.pendingProps),n.child=t,t.return=n;e.sibling!==null;)e=e.sibling,t=t.sibling=Ir(e,e.pendingProps),t.return=n;t.sibling=null}return n.child}function Wv(e,n,t){switch(n.tag){case 3:sp(n),As();break;case 5:Tm(n);break;case 1:pn(n.type)&&Oi(n);break;case 4:Mc(n,n.stateNode.containerInfo);break;case 10:var s=n.type._context,a=n.memoizedProps.value;xt(Li,s._currentValue),s._currentValue=a;break;case 13:if(s=n.memoizedState,s!==null)return s.dehydrated!==null?(xt(Ct,Ct.current&1),n.flags|=128,null):t&n.child.childLanes?ap(e,n,t):(xt(Ct,Ct.current&1),e=dr(e,n,t),e!==null?e.sibling:null);xt(Ct,Ct.current&1);break;case 19:if(s=(t&n.childLanes)!==0,e.flags&128){if(s)return ip(e,n,t);n.flags|=128}if(a=n.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),xt(Ct,Ct.current),s)break;return null;case 22:case 23:return n.lanes=0,np(e,n,t)}return dr(e,n,t)}var lp,Bo,op,cp;lp=function(e,n){for(var t=n.child;t!==null;){if(t.tag===5||t.tag===6)e.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break;for(;t.sibling===null;){if(t.return===null||t.return===n)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};Bo=function(){};op=function(e,n,t,s){var a=e.memoizedProps;if(a!==s){e=n.stateNode,Hr(Xn.current);var i=null;switch(t){case"input":a=mo(e,a),s=mo(e,s),i=[];break;case"select":a=Et({},a,{value:void 0}),s=Et({},s,{value:void 0}),i=[];break;case"textarea":a=go(e,a),s=go(e,s),i=[];break;default:typeof a.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=Pi)}yo(t,s);var l;t=null;for(x in a)if(!s.hasOwnProperty(x)&&a.hasOwnProperty(x)&&a[x]!=null)if(x==="style"){var u=a[x];for(l in u)u.hasOwnProperty(l)&&(t||(t={}),t[l]="")}else x!=="dangerouslySetInnerHTML"&&x!=="children"&&x!=="suppressContentEditableWarning"&&x!=="suppressHydrationWarning"&&x!=="autoFocus"&&(ua.hasOwnProperty(x)?i||(i=[]):(i=i||[]).push(x,null));for(x in s){var d=s[x];if(u=a!=null?a[x]:void 0,s.hasOwnProperty(x)&&d!==u&&(d!=null||u!=null))if(x==="style")if(u){for(l in u)!u.hasOwnProperty(l)||d&&d.hasOwnProperty(l)||(t||(t={}),t[l]="");for(l in d)d.hasOwnProperty(l)&&u[l]!==d[l]&&(t||(t={}),t[l]=d[l])}else t||(i||(i=[]),i.push(x,t)),t=d;else x==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,u=u?u.__html:void 0,d!=null&&u!==d&&(i=i||[]).push(x,d)):x==="children"?typeof d!="string"&&typeof d!="number"||(i=i||[]).push(x,""+d):x!=="suppressContentEditableWarning"&&x!=="suppressHydrationWarning"&&(ua.hasOwnProperty(x)?(d!=null&&x==="onScroll"&&jt("scroll",e),i||u===d||(i=[])):(i=i||[]).push(x,d))}t&&(i=i||[]).push("style",t);var x=i;(n.updateQueue=x)&&(n.flags|=4)}};cp=function(e,n,t,s){t!==s&&(n.flags|=4)};function Ks(e,n){if(!Nt)switch(e.tailMode){case"hidden":n=e.tail;for(var t=null;n!==null;)n.alternate!==null&&(t=n),n=n.sibling;t===null?e.tail=null:t.sibling=null;break;case"collapsed":t=e.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function Jt(e){var n=e.alternate!==null&&e.alternate.child===e.child,t=0,s=0;if(n)for(var a=e.child;a!==null;)t|=a.lanes|a.childLanes,s|=a.subtreeFlags&14680064,s|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)t|=a.lanes|a.childLanes,s|=a.subtreeFlags,s|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=s,e.childLanes=t,n}function Hv(e,n,t){var s=n.pendingProps;switch(kc(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Jt(n),null;case 1:return pn(n.type)&&Mi(),Jt(n),null;case 3:return s=n.stateNode,Ds(),_t(mn),_t(tn),$c(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(Za(n)?n.flags|=4:e===null||e.memoizedState.isDehydrated&&!(n.flags&256)||(n.flags|=1024,Rn!==null&&(Zo(Rn),Rn=null))),Bo(e,n),Jt(n),null;case 5:Oc(n);var a=Hr(ba.current);if(t=n.type,e!==null&&n.stateNode!=null)op(e,n,t,s,a),e.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!s){if(n.stateNode===null)throw Error(je(166));return Jt(n),null}if(e=Hr(Xn.current),Za(n)){s=n.stateNode,t=n.type;var i=n.memoizedProps;switch(s[Qn]=n,s[_a]=i,e=(n.mode&1)!==0,t){case"dialog":jt("cancel",s),jt("close",s);break;case"iframe":case"object":case"embed":jt("load",s);break;case"video":case"audio":for(a=0;a<ea.length;a++)jt(ea[a],s);break;case"source":jt("error",s);break;case"img":case"image":case"link":jt("error",s),jt("load",s);break;case"details":jt("toggle",s);break;case"input":Dd(s,i),jt("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!i.multiple},jt("invalid",s);break;case"textarea":Pd(s,i),jt("invalid",s)}yo(t,i),a=null;for(var l in i)if(i.hasOwnProperty(l)){var u=i[l];l==="children"?typeof u=="string"?s.textContent!==u&&(i.suppressHydrationWarning!==!0&&Xa(s.textContent,u,e),a=["children",u]):typeof u=="number"&&s.textContent!==""+u&&(i.suppressHydrationWarning!==!0&&Xa(s.textContent,u,e),a=["children",""+u]):ua.hasOwnProperty(l)&&u!=null&&l==="onScroll"&&jt("scroll",s)}switch(t){case"input":Ha(s),Td(s,i,!0);break;case"textarea":Ha(s),Md(s);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(s.onclick=Pi)}s=a,n.updateQueue=s,s!==null&&(n.flags|=4)}else{l=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Ff(t)),e==="http://www.w3.org/1999/xhtml"?t==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=l.createElement(t,{is:s.is}):(e=l.createElement(t),t==="select"&&(l=e,s.multiple?l.multiple=!0:s.size&&(l.size=s.size))):e=l.createElementNS(e,t),e[Qn]=n,e[_a]=s,lp(e,n,!1,!1),n.stateNode=e;e:{switch(l=xo(t,s),t){case"dialog":jt("cancel",e),jt("close",e),a=s;break;case"iframe":case"object":case"embed":jt("load",e),a=s;break;case"video":case"audio":for(a=0;a<ea.length;a++)jt(ea[a],e);a=s;break;case"source":jt("error",e),a=s;break;case"img":case"image":case"link":jt("error",e),jt("load",e),a=s;break;case"details":jt("toggle",e),a=s;break;case"input":Dd(e,s),a=mo(e,s),jt("invalid",e);break;case"option":a=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},a=Et({},s,{value:void 0}),jt("invalid",e);break;case"textarea":Pd(e,s),a=go(e,s),jt("invalid",e);break;default:a=s}yo(t,a),u=a;for(i in u)if(u.hasOwnProperty(i)){var d=u[i];i==="style"?zf(e,d):i==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&Lf(e,d)):i==="children"?typeof d=="string"?(t!=="textarea"||d!=="")&&fa(e,d):typeof d=="number"&&fa(e,""+d):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ua.hasOwnProperty(i)?d!=null&&i==="onScroll"&&jt("scroll",e):d!=null&&fc(e,i,d,l))}switch(t){case"input":Ha(e),Td(e,s,!1);break;case"textarea":Ha(e),Md(e);break;case"option":s.value!=null&&e.setAttribute("value",""+Tr(s.value));break;case"select":e.multiple=!!s.multiple,i=s.value,i!=null?xs(e,!!s.multiple,i,!1):s.defaultValue!=null&&xs(e,!!s.multiple,s.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Pi)}switch(t){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return Jt(n),null;case 6:if(e&&n.stateNode!=null)cp(e,n,e.memoizedProps,s);else{if(typeof s!="string"&&n.stateNode===null)throw Error(je(166));if(t=Hr(ba.current),Hr(Xn.current),Za(n)){if(s=n.stateNode,t=n.memoizedProps,s[Qn]=n,(i=s.nodeValue!==t)&&(e=jn,e!==null))switch(e.tag){case 3:Xa(s.nodeValue,t,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Xa(s.nodeValue,t,(e.mode&1)!==0)}i&&(n.flags|=4)}else s=(t.nodeType===9?t:t.ownerDocument).createTextNode(s),s[Qn]=n,n.stateNode=s}return Jt(n),null;case 13:if(_t(Ct),s=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Nt&&xn!==null&&n.mode&1&&!(n.flags&128))km(),As(),n.flags|=98560,i=!1;else if(i=Za(n),s!==null&&s.dehydrated!==null){if(e===null){if(!i)throw Error(je(318));if(i=n.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(je(317));i[Qn]=n}else As(),!(n.flags&128)&&(n.memoizedState=null),n.flags|=4;Jt(n),i=!1}else Rn!==null&&(Zo(Rn),Rn=null),i=!0;if(!i)return n.flags&65536?n:null}return n.flags&128?(n.lanes=t,n):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(n.child.flags|=8192,n.mode&1&&(e===null||Ct.current&1?Wt===0&&(Wt=3):qc())),n.updateQueue!==null&&(n.flags|=4),Jt(n),null);case 4:return Ds(),Bo(e,n),e===null&&xa(n.stateNode.containerInfo),Jt(n),null;case 10:return Dc(n.type._context),Jt(n),null;case 17:return pn(n.type)&&Mi(),Jt(n),null;case 19:if(_t(Ct),i=n.memoizedState,i===null)return Jt(n),null;if(s=(n.flags&128)!==0,l=i.rendering,l===null)if(s)Ks(i,!1);else{if(Wt!==0||e!==null&&e.flags&128)for(e=n.child;e!==null;){if(l=Ui(e),l!==null){for(n.flags|=128,Ks(i,!1),s=l.updateQueue,s!==null&&(n.updateQueue=s,n.flags|=4),n.subtreeFlags=0,s=t,t=n.child;t!==null;)i=t,e=s,i.flags&=14680066,l=i.alternate,l===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t=t.sibling;return xt(Ct,Ct.current&1|2),n.child}e=e.sibling}i.tail!==null&&Ot()>Ps&&(n.flags|=128,s=!0,Ks(i,!1),n.lanes=4194304)}else{if(!s)if(e=Ui(l),e!==null){if(n.flags|=128,s=!0,t=e.updateQueue,t!==null&&(n.updateQueue=t,n.flags|=4),Ks(i,!0),i.tail===null&&i.tailMode==="hidden"&&!l.alternate&&!Nt)return Jt(n),null}else 2*Ot()-i.renderingStartTime>Ps&&t!==1073741824&&(n.flags|=128,s=!0,Ks(i,!1),n.lanes=4194304);i.isBackwards?(l.sibling=n.child,n.child=l):(t=i.last,t!==null?t.sibling=l:n.child=l,i.last=l)}return i.tail!==null?(n=i.tail,i.rendering=n,i.tail=n.sibling,i.renderingStartTime=Ot(),n.sibling=null,t=Ct.current,xt(Ct,s?t&1|2:t&1),n):(Jt(n),null);case 22:case 23:return Yc(),s=n.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(n.flags|=8192),s&&n.mode&1?yn&1073741824&&(Jt(n),n.subtreeFlags&6&&(n.flags|=8192)):Jt(n),null;case 24:return null;case 25:return null}throw Error(je(156,n.tag))}function Bv(e,n){switch(kc(n),n.tag){case 1:return pn(n.type)&&Mi(),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return Ds(),_t(mn),_t(tn),$c(),e=n.flags,e&65536&&!(e&128)?(n.flags=e&-65537|128,n):null;case 5:return Oc(n),null;case 13:if(_t(Ct),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(je(340));As()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return _t(Ct),null;case 4:return Ds(),null;case 10:return Dc(n.type._context),null;case 22:case 23:return Yc(),null;case 24:return null;default:return null}}var ni=!1,Zt=!1,Kv=typeof WeakSet=="function"?WeakSet:Set,Me=null;function vs(e,n){var t=e.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(s){It(e,n,s)}else t.current=null}function Ko(e,n,t){try{t()}catch(s){It(e,n,s)}}var bu=!1;function Yv(e,n){if(Ao=Ii,e=pm(),Cc(e)){if("selectionStart"in e)var t={start:e.selectionStart,end:e.selectionEnd};else e:{t=(t=e.ownerDocument)&&t.defaultView||window;var s=t.getSelection&&t.getSelection();if(s&&s.rangeCount!==0){t=s.anchorNode;var a=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{t.nodeType,i.nodeType}catch{t=null;break e}var l=0,u=-1,d=-1,x=0,_=0,C=e,b=null;t:for(;;){for(var L;C!==t||a!==0&&C.nodeType!==3||(u=l+a),C!==i||s!==0&&C.nodeType!==3||(d=l+s),C.nodeType===3&&(l+=C.nodeValue.length),(L=C.firstChild)!==null;)b=C,C=L;for(;;){if(C===e)break t;if(b===t&&++x===a&&(u=l),b===i&&++_===s&&(d=l),(L=C.nextSibling)!==null)break;C=b,b=C.parentNode}C=L}t=u===-1||d===-1?null:{start:u,end:d}}else t=null}t=t||{start:0,end:0}}else t=null;for(Io={focusedElem:e,selectionRange:t},Ii=!1,Me=n;Me!==null;)if(n=Me,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,Me=e;else for(;Me!==null;){n=Me;try{var y=n.alternate;if(n.flags&1024)switch(n.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var S=y.memoizedProps,E=y.memoizedState,p=n.stateNode,m=p.getSnapshotBeforeUpdate(n.elementType===n.type?S:Fn(n.type,S),E);p.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var v=n.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(je(163))}}catch(j){It(n,n.return,j)}if(e=n.sibling,e!==null){e.return=n.return,Me=e;break}Me=n.return}return y=bu,bu=!1,y}function la(e,n,t){var s=n.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&Ko(n,t,i)}a=a.next}while(a!==s)}}function fl(e,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var t=n=n.next;do{if((t.tag&e)===e){var s=t.create;t.destroy=s()}t=t.next}while(t!==n)}}function Yo(e){var n=e.ref;if(n!==null){var t=e.stateNode;switch(e.tag){case 5:e=t;break;default:e=t}typeof n=="function"?n(e):n.current=e}}function dp(e){var n=e.alternate;n!==null&&(e.alternate=null,dp(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&(delete n[Qn],delete n[_a],delete n[Po],delete n[Av],delete n[Iv])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function up(e){return e.tag===5||e.tag===3||e.tag===4}function Su(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||up(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function qo(e,n,t){var s=e.tag;if(s===5||s===6)e=e.stateNode,n?t.nodeType===8?t.parentNode.insertBefore(e,n):t.insertBefore(e,n):(t.nodeType===8?(n=t.parentNode,n.insertBefore(e,t)):(n=t,n.appendChild(e)),t=t._reactRootContainer,t!=null||n.onclick!==null||(n.onclick=Pi));else if(s!==4&&(e=e.child,e!==null))for(qo(e,n,t),e=e.sibling;e!==null;)qo(e,n,t),e=e.sibling}function Go(e,n,t){var s=e.tag;if(s===5||s===6)e=e.stateNode,n?t.insertBefore(e,n):t.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(Go(e,n,t),e=e.sibling;e!==null;)Go(e,n,t),e=e.sibling}var Kt=null,Ln=!1;function pr(e,n,t){for(t=t.child;t!==null;)fp(e,n,t),t=t.sibling}function fp(e,n,t){if(Jn&&typeof Jn.onCommitFiberUnmount=="function")try{Jn.onCommitFiberUnmount(sl,t)}catch{}switch(t.tag){case 5:Zt||vs(t,n);case 6:var s=Kt,a=Ln;Kt=null,pr(e,n,t),Kt=s,Ln=a,Kt!==null&&(Ln?(e=Kt,t=t.stateNode,e.nodeType===8?e.parentNode.removeChild(t):e.removeChild(t)):Kt.removeChild(t.stateNode));break;case 18:Kt!==null&&(Ln?(e=Kt,t=t.stateNode,e.nodeType===8?zl(e.parentNode,t):e.nodeType===1&&zl(e,t),ga(e)):zl(Kt,t.stateNode));break;case 4:s=Kt,a=Ln,Kt=t.stateNode.containerInfo,Ln=!0,pr(e,n,t),Kt=s,Ln=a;break;case 0:case 11:case 14:case 15:if(!Zt&&(s=t.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){a=s=s.next;do{var i=a,l=i.destroy;i=i.tag,l!==void 0&&(i&2||i&4)&&Ko(t,n,l),a=a.next}while(a!==s)}pr(e,n,t);break;case 1:if(!Zt&&(vs(t,n),s=t.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=t.memoizedProps,s.state=t.memoizedState,s.componentWillUnmount()}catch(u){It(t,n,u)}pr(e,n,t);break;case 21:pr(e,n,t);break;case 22:t.mode&1?(Zt=(s=Zt)||t.memoizedState!==null,pr(e,n,t),Zt=s):pr(e,n,t);break;default:pr(e,n,t)}}function Cu(e){var n=e.updateQueue;if(n!==null){e.updateQueue=null;var t=e.stateNode;t===null&&(t=e.stateNode=new Kv),n.forEach(function(s){var a=ny.bind(null,e,s);t.has(s)||(t.add(s),s.then(a,a))})}}function $n(e,n){var t=n.deletions;if(t!==null)for(var s=0;s<t.length;s++){var a=t[s];try{var i=e,l=n,u=l;e:for(;u!==null;){switch(u.tag){case 5:Kt=u.stateNode,Ln=!1;break e;case 3:Kt=u.stateNode.containerInfo,Ln=!0;break e;case 4:Kt=u.stateNode.containerInfo,Ln=!0;break e}u=u.return}if(Kt===null)throw Error(je(160));fp(i,l,a),Kt=null,Ln=!1;var d=a.alternate;d!==null&&(d.return=null),a.return=null}catch(x){It(a,n,x)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)mp(n,e),n=n.sibling}function mp(e,n){var t=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if($n(n,e),Yn(e),s&4){try{la(3,e,e.return),fl(3,e)}catch(S){It(e,e.return,S)}try{la(5,e,e.return)}catch(S){It(e,e.return,S)}}break;case 1:$n(n,e),Yn(e),s&512&&t!==null&&vs(t,t.return);break;case 5:if($n(n,e),Yn(e),s&512&&t!==null&&vs(t,t.return),e.flags&32){var a=e.stateNode;try{fa(a,"")}catch(S){It(e,e.return,S)}}if(s&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,l=t!==null?t.memoizedProps:i,u=e.type,d=e.updateQueue;if(e.updateQueue=null,d!==null)try{u==="input"&&i.type==="radio"&&i.name!=null&&Of(a,i),xo(u,l);var x=xo(u,i);for(l=0;l<d.length;l+=2){var _=d[l],C=d[l+1];_==="style"?zf(a,C):_==="dangerouslySetInnerHTML"?Lf(a,C):_==="children"?fa(a,C):fc(a,_,C,x)}switch(u){case"input":po(a,i);break;case"textarea":$f(a,i);break;case"select":var b=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var L=i.value;L!=null?xs(a,!!i.multiple,L,!1):b!==!!i.multiple&&(i.defaultValue!=null?xs(a,!!i.multiple,i.defaultValue,!0):xs(a,!!i.multiple,i.multiple?[]:"",!1))}a[_a]=i}catch(S){It(e,e.return,S)}}break;case 6:if($n(n,e),Yn(e),s&4){if(e.stateNode===null)throw Error(je(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(S){It(e,e.return,S)}}break;case 3:if($n(n,e),Yn(e),s&4&&t!==null&&t.memoizedState.isDehydrated)try{ga(n.containerInfo)}catch(S){It(e,e.return,S)}break;case 4:$n(n,e),Yn(e);break;case 13:$n(n,e),Yn(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(Bc=Ot())),s&4&&Cu(e);break;case 22:if(_=t!==null&&t.memoizedState!==null,e.mode&1?(Zt=(x=Zt)||_,$n(n,e),Zt=x):$n(n,e),Yn(e),s&8192){if(x=e.memoizedState!==null,(e.stateNode.isHidden=x)&&!_&&e.mode&1)for(Me=e,_=e.child;_!==null;){for(C=Me=_;Me!==null;){switch(b=Me,L=b.child,b.tag){case 0:case 11:case 14:case 15:la(4,b,b.return);break;case 1:vs(b,b.return);var y=b.stateNode;if(typeof y.componentWillUnmount=="function"){s=b,t=b.return;try{n=s,y.props=n.memoizedProps,y.state=n.memoizedState,y.componentWillUnmount()}catch(S){It(s,t,S)}}break;case 5:vs(b,b.return);break;case 22:if(b.memoizedState!==null){ku(C);continue}}L!==null?(L.return=b,Me=L):ku(C)}_=_.sibling}e:for(_=null,C=e;;){if(C.tag===5){if(_===null){_=C;try{a=C.stateNode,x?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(u=C.stateNode,d=C.memoizedProps.style,l=d!=null&&d.hasOwnProperty("display")?d.display:null,u.style.display=Rf("display",l))}catch(S){It(e,e.return,S)}}}else if(C.tag===6){if(_===null)try{C.stateNode.nodeValue=x?"":C.memoizedProps}catch(S){It(e,e.return,S)}}else if((C.tag!==22&&C.tag!==23||C.memoizedState===null||C===e)&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===e)break e;for(;C.sibling===null;){if(C.return===null||C.return===e)break e;_===C&&(_=null),C=C.return}_===C&&(_=null),C.sibling.return=C.return,C=C.sibling}}break;case 19:$n(n,e),Yn(e),s&4&&Cu(e);break;case 21:break;default:$n(n,e),Yn(e)}}function Yn(e){var n=e.flags;if(n&2){try{e:{for(var t=e.return;t!==null;){if(up(t)){var s=t;break e}t=t.return}throw Error(je(160))}switch(s.tag){case 5:var a=s.stateNode;s.flags&32&&(fa(a,""),s.flags&=-33);var i=Su(e);Go(e,i,a);break;case 3:case 4:var l=s.stateNode.containerInfo,u=Su(e);qo(e,u,l);break;default:throw Error(je(161))}}catch(d){It(e,e.return,d)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function qv(e,n,t){Me=e,pp(e)}function pp(e,n,t){for(var s=(e.mode&1)!==0;Me!==null;){var a=Me,i=a.child;if(a.tag===22&&s){var l=a.memoizedState!==null||ni;if(!l){var u=a.alternate,d=u!==null&&u.memoizedState!==null||Zt;u=ni;var x=Zt;if(ni=l,(Zt=d)&&!x)for(Me=a;Me!==null;)l=Me,d=l.child,l.tag===22&&l.memoizedState!==null?Eu(a):d!==null?(d.return=l,Me=d):Eu(a);for(;i!==null;)Me=i,pp(i),i=i.sibling;Me=a,ni=u,Zt=x}wu(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,Me=i):wu(e)}}function wu(e){for(;Me!==null;){var n=Me;if(n.flags&8772){var t=n.alternate;try{if(n.flags&8772)switch(n.tag){case 0:case 11:case 15:Zt||fl(5,n);break;case 1:var s=n.stateNode;if(n.flags&4&&!Zt)if(t===null)s.componentDidMount();else{var a=n.elementType===n.type?t.memoizedProps:Fn(n.type,t.memoizedProps);s.componentDidUpdate(a,t.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var i=n.updateQueue;i!==null&&du(n,i,s);break;case 3:var l=n.updateQueue;if(l!==null){if(t=null,n.child!==null)switch(n.child.tag){case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}du(n,l,t)}break;case 5:var u=n.stateNode;if(t===null&&n.flags&4){t=u;var d=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&t.focus();break;case"img":d.src&&(t.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var x=n.alternate;if(x!==null){var _=x.memoizedState;if(_!==null){var C=_.dehydrated;C!==null&&ga(C)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(je(163))}Zt||n.flags&512&&Yo(n)}catch(b){It(n,n.return,b)}}if(n===e){Me=null;break}if(t=n.sibling,t!==null){t.return=n.return,Me=t;break}Me=n.return}}function ku(e){for(;Me!==null;){var n=Me;if(n===e){Me=null;break}var t=n.sibling;if(t!==null){t.return=n.return,Me=t;break}Me=n.return}}function Eu(e){for(;Me!==null;){var n=Me;try{switch(n.tag){case 0:case 11:case 15:var t=n.return;try{fl(4,n)}catch(d){It(n,t,d)}break;case 1:var s=n.stateNode;if(typeof s.componentDidMount=="function"){var a=n.return;try{s.componentDidMount()}catch(d){It(n,a,d)}}var i=n.return;try{Yo(n)}catch(d){It(n,i,d)}break;case 5:var l=n.return;try{Yo(n)}catch(d){It(n,l,d)}}}catch(d){It(n,n.return,d)}if(n===e){Me=null;break}var u=n.sibling;if(u!==null){u.return=n.return,Me=u;break}Me=n.return}}var Gv=Math.ceil,Hi=fr.ReactCurrentDispatcher,Wc=fr.ReactCurrentOwner,Dn=fr.ReactCurrentBatchConfig,ot=0,Bt=null,Rt=null,Yt=0,yn=0,ys=$r(0),Wt=0,ka=null,Qr=0,ml=0,Hc=0,oa=null,un=null,Bc=0,Ps=1/0,nr=null,Bi=!1,Qo=null,Er=null,ri=!1,_r=null,Ki=0,ca=0,Jo=null,_i=-1,Ni=0;function an(){return ot&6?Ot():_i!==-1?_i:_i=Ot()}function Ar(e){return e.mode&1?ot&2&&Yt!==0?Yt&-Yt:Tv.transition!==null?(Ni===0&&(Ni=Xf()),Ni):(e=gt,e!==0||(e=window.event,e=e===void 0?16:am(e.type)),e):1}function Un(e,n,t,s){if(50<ca)throw ca=0,Jo=null,Error(je(185));Oa(e,t,s),(!(ot&2)||e!==Bt)&&(e===Bt&&(!(ot&2)&&(ml|=t),Wt===4&&xr(e,Yt)),hn(e,s),t===1&&ot===0&&!(n.mode&1)&&(Ps=Ot()+500,cl&&Fr()))}function hn(e,n){var t=e.callbackNode;Tg(e,n);var s=Ai(e,e===Bt?Yt:0);if(s===0)t!==null&&Fd(t),e.callbackNode=null,e.callbackPriority=0;else if(n=s&-s,e.callbackPriority!==n){if(t!=null&&Fd(t),n===1)e.tag===0?Dv(Au.bind(null,e)):Sm(Au.bind(null,e)),kv(function(){!(ot&6)&&Fr()}),t=null;else{switch(Zf(s)){case 1:t=vc;break;case 4:t=Qf;break;case 16:t=Ei;break;case 536870912:t=Jf;break;default:t=Ei}t=Np(t,hp.bind(null,e))}e.callbackPriority=n,e.callbackNode=t}}function hp(e,n){if(_i=-1,Ni=0,ot&6)throw Error(je(327));var t=e.callbackNode;if(Ss()&&e.callbackNode!==t)return null;var s=Ai(e,e===Bt?Yt:0);if(s===0)return null;if(s&30||s&e.expiredLanes||n)n=Yi(e,s);else{n=s;var a=ot;ot|=2;var i=vp();(Bt!==e||Yt!==n)&&(nr=null,Ps=Ot()+500,Br(e,n));do try{Xv();break}catch(u){gp(e,u)}while(!0);Ic(),Hi.current=i,ot=a,Rt!==null?n=0:(Bt=null,Yt=0,n=Wt)}if(n!==0){if(n===2&&(a=So(e),a!==0&&(s=a,n=Xo(e,a))),n===1)throw t=ka,Br(e,0),xr(e,s),hn(e,Ot()),t;if(n===6)xr(e,s);else{if(a=e.current.alternate,!(s&30)&&!Qv(a)&&(n=Yi(e,s),n===2&&(i=So(e),i!==0&&(s=i,n=Xo(e,i))),n===1))throw t=ka,Br(e,0),xr(e,s),hn(e,Ot()),t;switch(e.finishedWork=a,e.finishedLanes=s,n){case 0:case 1:throw Error(je(345));case 2:zr(e,un,nr);break;case 3:if(xr(e,s),(s&130023424)===s&&(n=Bc+500-Ot(),10<n)){if(Ai(e,0)!==0)break;if(a=e.suspendedLanes,(a&s)!==s){an(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=To(zr.bind(null,e,un,nr),n);break}zr(e,un,nr);break;case 4:if(xr(e,s),(s&4194240)===s)break;for(n=e.eventTimes,a=-1;0<s;){var l=31-zn(s);i=1<<l,l=n[l],l>a&&(a=l),s&=~i}if(s=a,s=Ot()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*Gv(s/1960))-s,10<s){e.timeoutHandle=To(zr.bind(null,e,un,nr),s);break}zr(e,un,nr);break;case 5:zr(e,un,nr);break;default:throw Error(je(329))}}}return hn(e,Ot()),e.callbackNode===t?hp.bind(null,e):null}function Xo(e,n){var t=oa;return e.current.memoizedState.isDehydrated&&(Br(e,n).flags|=256),e=Yi(e,n),e!==2&&(n=un,un=t,n!==null&&Zo(n)),e}function Zo(e){un===null?un=e:un.push.apply(un,e)}function Qv(e){for(var n=e;;){if(n.flags&16384){var t=n.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var s=0;s<t.length;s++){var a=t[s],i=a.getSnapshot;a=a.value;try{if(!Vn(i(),a))return!1}catch{return!1}}}if(t=n.child,n.subtreeFlags&16384&&t!==null)t.return=n,n=t;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function xr(e,n){for(n&=~Hc,n&=~ml,e.suspendedLanes|=n,e.pingedLanes&=~n,e=e.expirationTimes;0<n;){var t=31-zn(n),s=1<<t;e[t]=-1,n&=~s}}function Au(e){if(ot&6)throw Error(je(327));Ss();var n=Ai(e,0);if(!(n&1))return hn(e,Ot()),null;var t=Yi(e,n);if(e.tag!==0&&t===2){var s=So(e);s!==0&&(n=s,t=Xo(e,s))}if(t===1)throw t=ka,Br(e,0),xr(e,n),hn(e,Ot()),t;if(t===6)throw Error(je(345));return e.finishedWork=e.current.alternate,e.finishedLanes=n,zr(e,un,nr),hn(e,Ot()),null}function Kc(e,n){var t=ot;ot|=1;try{return e(n)}finally{ot=t,ot===0&&(Ps=Ot()+500,cl&&Fr())}}function Jr(e){_r!==null&&_r.tag===0&&!(ot&6)&&Ss();var n=ot;ot|=1;var t=Dn.transition,s=gt;try{if(Dn.transition=null,gt=1,e)return e()}finally{gt=s,Dn.transition=t,ot=n,!(ot&6)&&Fr()}}function Yc(){yn=ys.current,_t(ys)}function Br(e,n){e.finishedWork=null,e.finishedLanes=0;var t=e.timeoutHandle;if(t!==-1&&(e.timeoutHandle=-1,wv(t)),Rt!==null)for(t=Rt.return;t!==null;){var s=t;switch(kc(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&Mi();break;case 3:Ds(),_t(mn),_t(tn),$c();break;case 5:Oc(s);break;case 4:Ds();break;case 13:_t(Ct);break;case 19:_t(Ct);break;case 10:Dc(s.type._context);break;case 22:case 23:Yc()}t=t.return}if(Bt=e,Rt=e=Ir(e.current,null),Yt=yn=n,Wt=0,ka=null,Hc=ml=Qr=0,un=oa=null,Wr!==null){for(n=0;n<Wr.length;n++)if(t=Wr[n],s=t.interleaved,s!==null){t.interleaved=null;var a=s.next,i=t.pending;if(i!==null){var l=i.next;i.next=a,s.next=l}t.pending=s}Wr=null}return e}function gp(e,n){do{var t=Rt;try{if(Ic(),yi.current=Wi,Vi){for(var s=wt.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}Vi=!1}if(Gr=0,Ht=Vt=wt=null,ia=!1,Sa=0,Wc.current=null,t===null||t.return===null){Wt=1,ka=n,Rt=null;break}e:{var i=e,l=t.return,u=t,d=n;if(n=Yt,u.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var x=d,_=u,C=_.tag;if(!(_.mode&1)&&(C===0||C===11||C===15)){var b=_.alternate;b?(_.updateQueue=b.updateQueue,_.memoizedState=b.memoizedState,_.lanes=b.lanes):(_.updateQueue=null,_.memoizedState=null)}var L=gu(l);if(L!==null){L.flags&=-257,vu(L,l,u,i,n),L.mode&1&&hu(i,x,n),n=L,d=x;var y=n.updateQueue;if(y===null){var S=new Set;S.add(d),n.updateQueue=S}else y.add(d);break e}else{if(!(n&1)){hu(i,x,n),qc();break e}d=Error(je(426))}}else if(Nt&&u.mode&1){var E=gu(l);if(E!==null){!(E.flags&65536)&&(E.flags|=256),vu(E,l,u,i,n),Ec(Ts(d,u));break e}}i=d=Ts(d,u),Wt!==4&&(Wt=2),oa===null?oa=[i]:oa.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,n&=-n,i.lanes|=n;var p=Zm(i,d,n);cu(i,p);break e;case 1:u=d;var m=i.type,v=i.stateNode;if(!(i.flags&128)&&(typeof m.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Er===null||!Er.has(v)))){i.flags|=65536,n&=-n,i.lanes|=n;var j=ep(i,u,n);cu(i,j);break e}}i=i.return}while(i!==null)}xp(t)}catch(P){n=P,Rt===t&&t!==null&&(Rt=t=t.return);continue}break}while(!0)}function vp(){var e=Hi.current;return Hi.current=Wi,e===null?Wi:e}function qc(){(Wt===0||Wt===3||Wt===2)&&(Wt=4),Bt===null||!(Qr&268435455)&&!(ml&268435455)||xr(Bt,Yt)}function Yi(e,n){var t=ot;ot|=2;var s=vp();(Bt!==e||Yt!==n)&&(nr=null,Br(e,n));do try{Jv();break}catch(a){gp(e,a)}while(!0);if(Ic(),ot=t,Hi.current=s,Rt!==null)throw Error(je(261));return Bt=null,Yt=0,Wt}function Jv(){for(;Rt!==null;)yp(Rt)}function Xv(){for(;Rt!==null&&!bg();)yp(Rt)}function yp(e){var n=_p(e.alternate,e,yn);e.memoizedProps=e.pendingProps,n===null?xp(e):Rt=n,Wc.current=null}function xp(e){var n=e;do{var t=n.alternate;if(e=n.return,n.flags&32768){if(t=Bv(t,n),t!==null){t.flags&=32767,Rt=t;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Wt=6,Rt=null;return}}else if(t=Hv(t,n,yn),t!==null){Rt=t;return}if(n=n.sibling,n!==null){Rt=n;return}Rt=n=e}while(n!==null);Wt===0&&(Wt=5)}function zr(e,n,t){var s=gt,a=Dn.transition;try{Dn.transition=null,gt=1,Zv(e,n,t,s)}finally{Dn.transition=a,gt=s}return null}function Zv(e,n,t,s){do Ss();while(_r!==null);if(ot&6)throw Error(je(327));t=e.finishedWork;var a=e.finishedLanes;if(t===null)return null;if(e.finishedWork=null,e.finishedLanes=0,t===e.current)throw Error(je(177));e.callbackNode=null,e.callbackPriority=0;var i=t.lanes|t.childLanes;if(Pg(e,i),e===Bt&&(Rt=Bt=null,Yt=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||ri||(ri=!0,Np(Ei,function(){return Ss(),null})),i=(t.flags&15990)!==0,t.subtreeFlags&15990||i){i=Dn.transition,Dn.transition=null;var l=gt;gt=1;var u=ot;ot|=4,Wc.current=null,Yv(e,t),mp(t,e),xv(Io),Ii=!!Ao,Io=Ao=null,e.current=t,qv(t),Sg(),ot=u,gt=l,Dn.transition=i}else e.current=t;if(ri&&(ri=!1,_r=e,Ki=a),i=e.pendingLanes,i===0&&(Er=null),kg(t.stateNode),hn(e,Ot()),n!==null)for(s=e.onRecoverableError,t=0;t<n.length;t++)a=n[t],s(a.value,{componentStack:a.stack,digest:a.digest});if(Bi)throw Bi=!1,e=Qo,Qo=null,e;return Ki&1&&e.tag!==0&&Ss(),i=e.pendingLanes,i&1?e===Jo?ca++:(ca=0,Jo=e):ca=0,Fr(),null}function Ss(){if(_r!==null){var e=Zf(Ki),n=Dn.transition,t=gt;try{if(Dn.transition=null,gt=16>e?16:e,_r===null)var s=!1;else{if(e=_r,_r=null,Ki=0,ot&6)throw Error(je(331));var a=ot;for(ot|=4,Me=e.current;Me!==null;){var i=Me,l=i.child;if(Me.flags&16){var u=i.deletions;if(u!==null){for(var d=0;d<u.length;d++){var x=u[d];for(Me=x;Me!==null;){var _=Me;switch(_.tag){case 0:case 11:case 15:la(8,_,i)}var C=_.child;if(C!==null)C.return=_,Me=C;else for(;Me!==null;){_=Me;var b=_.sibling,L=_.return;if(dp(_),_===x){Me=null;break}if(b!==null){b.return=L,Me=b;break}Me=L}}}var y=i.alternate;if(y!==null){var S=y.child;if(S!==null){y.child=null;do{var E=S.sibling;S.sibling=null,S=E}while(S!==null)}}Me=i}}if(i.subtreeFlags&2064&&l!==null)l.return=i,Me=l;else e:for(;Me!==null;){if(i=Me,i.flags&2048)switch(i.tag){case 0:case 11:case 15:la(9,i,i.return)}var p=i.sibling;if(p!==null){p.return=i.return,Me=p;break e}Me=i.return}}var m=e.current;for(Me=m;Me!==null;){l=Me;var v=l.child;if(l.subtreeFlags&2064&&v!==null)v.return=l,Me=v;else e:for(l=m;Me!==null;){if(u=Me,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:fl(9,u)}}catch(P){It(u,u.return,P)}if(u===l){Me=null;break e}var j=u.sibling;if(j!==null){j.return=u.return,Me=j;break e}Me=u.return}}if(ot=a,Fr(),Jn&&typeof Jn.onPostCommitFiberRoot=="function")try{Jn.onPostCommitFiberRoot(sl,e)}catch{}s=!0}return s}finally{gt=t,Dn.transition=n}}return!1}function Iu(e,n,t){n=Ts(t,n),n=Zm(e,n,1),e=kr(e,n,1),n=an(),e!==null&&(Oa(e,1,n),hn(e,n))}function It(e,n,t){if(e.tag===3)Iu(e,e,t);else for(;n!==null;){if(n.tag===3){Iu(n,e,t);break}else if(n.tag===1){var s=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Er===null||!Er.has(s))){e=Ts(t,e),e=ep(n,e,1),n=kr(n,e,1),e=an(),n!==null&&(Oa(n,1,e),hn(n,e));break}}n=n.return}}function ey(e,n,t){var s=e.pingCache;s!==null&&s.delete(n),n=an(),e.pingedLanes|=e.suspendedLanes&t,Bt===e&&(Yt&t)===t&&(Wt===4||Wt===3&&(Yt&130023424)===Yt&&500>Ot()-Bc?Br(e,0):Hc|=t),hn(e,n)}function jp(e,n){n===0&&(e.mode&1?(n=Ya,Ya<<=1,!(Ya&130023424)&&(Ya=4194304)):n=1);var t=an();e=cr(e,n),e!==null&&(Oa(e,n,t),hn(e,t))}function ty(e){var n=e.memoizedState,t=0;n!==null&&(t=n.retryLane),jp(e,t)}function ny(e,n){var t=0;switch(e.tag){case 13:var s=e.stateNode,a=e.memoizedState;a!==null&&(t=a.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(je(314))}s!==null&&s.delete(n),jp(e,t)}var _p;_p=function(e,n,t){if(e!==null)if(e.memoizedProps!==n.pendingProps||mn.current)fn=!0;else{if(!(e.lanes&t)&&!(n.flags&128))return fn=!1,Wv(e,n,t);fn=!!(e.flags&131072)}else fn=!1,Nt&&n.flags&1048576&&Cm(n,Fi,n.index);switch(n.lanes=0,n.tag){case 2:var s=n.type;ji(e,n),e=n.pendingProps;var a=Es(n,tn.current);bs(n,t),a=Lc(null,n,s,e,a,t);var i=Rc();return n.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,pn(s)?(i=!0,Oi(n)):i=!1,n.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Pc(n),a.updater=ul,n.stateNode=a,a._reactInternals=n,Ro(n,s,e,t),n=Vo(null,n,s,!0,i,t)):(n.tag=0,Nt&&i&&wc(n),sn(null,n,a,t),n=n.child),n;case 16:s=n.elementType;e:{switch(ji(e,n),e=n.pendingProps,a=s._init,s=a(s._payload),n.type=s,a=n.tag=sy(s),e=Fn(s,e),a){case 0:n=Uo(null,n,s,e,t);break e;case 1:n=ju(null,n,s,e,t);break e;case 11:n=yu(null,n,s,e,t);break e;case 14:n=xu(null,n,s,Fn(s.type,e),t);break e}throw Error(je(306,s,""))}return n;case 0:return s=n.type,a=n.pendingProps,a=n.elementType===s?a:Fn(s,a),Uo(e,n,s,a,t);case 1:return s=n.type,a=n.pendingProps,a=n.elementType===s?a:Fn(s,a),ju(e,n,s,a,t);case 3:e:{if(sp(n),e===null)throw Error(je(387));s=n.pendingProps,i=n.memoizedState,a=i.element,Dm(e,n),zi(n,s,null,t);var l=n.memoizedState;if(s=l.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},n.updateQueue.baseState=i,n.memoizedState=i,n.flags&256){a=Ts(Error(je(423)),n),n=_u(e,n,s,t,a);break e}else if(s!==a){a=Ts(Error(je(424)),n),n=_u(e,n,s,t,a);break e}else for(xn=wr(n.stateNode.containerInfo.firstChild),jn=n,Nt=!0,Rn=null,t=Am(n,null,s,t),n.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(As(),s===a){n=dr(e,n,t);break e}sn(e,n,s,t)}n=n.child}return n;case 5:return Tm(n),e===null&&$o(n),s=n.type,a=n.pendingProps,i=e!==null?e.memoizedProps:null,l=a.children,Do(s,a)?l=null:i!==null&&Do(s,i)&&(n.flags|=32),rp(e,n),sn(e,n,l,t),n.child;case 6:return e===null&&$o(n),null;case 13:return ap(e,n,t);case 4:return Mc(n,n.stateNode.containerInfo),s=n.pendingProps,e===null?n.child=Is(n,null,s,t):sn(e,n,s,t),n.child;case 11:return s=n.type,a=n.pendingProps,a=n.elementType===s?a:Fn(s,a),yu(e,n,s,a,t);case 7:return sn(e,n,n.pendingProps,t),n.child;case 8:return sn(e,n,n.pendingProps.children,t),n.child;case 12:return sn(e,n,n.pendingProps.children,t),n.child;case 10:e:{if(s=n.type._context,a=n.pendingProps,i=n.memoizedProps,l=a.value,xt(Li,s._currentValue),s._currentValue=l,i!==null)if(Vn(i.value,l)){if(i.children===a.children&&!mn.current){n=dr(e,n,t);break e}}else for(i=n.child,i!==null&&(i.return=n);i!==null;){var u=i.dependencies;if(u!==null){l=i.child;for(var d=u.firstContext;d!==null;){if(d.context===s){if(i.tag===1){d=ir(-1,t&-t),d.tag=2;var x=i.updateQueue;if(x!==null){x=x.shared;var _=x.pending;_===null?d.next=d:(d.next=_.next,_.next=d),x.pending=d}}i.lanes|=t,d=i.alternate,d!==null&&(d.lanes|=t),Fo(i.return,t,n),u.lanes|=t;break}d=d.next}}else if(i.tag===10)l=i.type===n.type?null:i.child;else if(i.tag===18){if(l=i.return,l===null)throw Error(je(341));l.lanes|=t,u=l.alternate,u!==null&&(u.lanes|=t),Fo(l,t,n),l=i.sibling}else l=i.child;if(l!==null)l.return=i;else for(l=i;l!==null;){if(l===n){l=null;break}if(i=l.sibling,i!==null){i.return=l.return,l=i;break}l=l.return}i=l}sn(e,n,a.children,t),n=n.child}return n;case 9:return a=n.type,s=n.pendingProps.children,bs(n,t),a=Tn(a),s=s(a),n.flags|=1,sn(e,n,s,t),n.child;case 14:return s=n.type,a=Fn(s,n.pendingProps),a=Fn(s.type,a),xu(e,n,s,a,t);case 15:return tp(e,n,n.type,n.pendingProps,t);case 17:return s=n.type,a=n.pendingProps,a=n.elementType===s?a:Fn(s,a),ji(e,n),n.tag=1,pn(s)?(e=!0,Oi(n)):e=!1,bs(n,t),Xm(n,s,a),Ro(n,s,a,t),Vo(null,n,s,!0,e,t);case 19:return ip(e,n,t);case 22:return np(e,n,t)}throw Error(je(156,n.tag))};function Np(e,n){return Gf(e,n)}function ry(e,n,t,s){this.tag=e,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function In(e,n,t,s){return new ry(e,n,t,s)}function Gc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function sy(e){if(typeof e=="function")return Gc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===pc)return 11;if(e===hc)return 14}return 2}function Ir(e,n){var t=e.alternate;return t===null?(t=In(e.tag,n,e.key,e.mode),t.elementType=e.elementType,t.type=e.type,t.stateNode=e.stateNode,t.alternate=e,e.alternate=t):(t.pendingProps=n,t.type=e.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=e.flags&14680064,t.childLanes=e.childLanes,t.lanes=e.lanes,t.child=e.child,t.memoizedProps=e.memoizedProps,t.memoizedState=e.memoizedState,t.updateQueue=e.updateQueue,n=e.dependencies,t.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},t.sibling=e.sibling,t.index=e.index,t.ref=e.ref,t}function bi(e,n,t,s,a,i){var l=2;if(s=e,typeof e=="function")Gc(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case os:return Kr(t.children,a,i,n);case mc:l=8,a|=8;break;case oo:return e=In(12,t,n,a|2),e.elementType=oo,e.lanes=i,e;case co:return e=In(13,t,n,a),e.elementType=co,e.lanes=i,e;case uo:return e=In(19,t,n,a),e.elementType=uo,e.lanes=i,e;case Tf:return pl(t,a,i,n);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case If:l=10;break e;case Df:l=9;break e;case pc:l=11;break e;case hc:l=14;break e;case gr:l=16,s=null;break e}throw Error(je(130,e==null?e:typeof e,""))}return n=In(l,t,n,a),n.elementType=e,n.type=s,n.lanes=i,n}function Kr(e,n,t,s){return e=In(7,e,s,n),e.lanes=t,e}function pl(e,n,t,s){return e=In(22,e,s,n),e.elementType=Tf,e.lanes=t,e.stateNode={isHidden:!1},e}function ql(e,n,t){return e=In(6,e,null,n),e.lanes=t,e}function Gl(e,n,t){return n=In(4,e.children!==null?e.children:[],e.key,n),n.lanes=t,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}function ay(e,n,t,s,a){this.tag=n,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Al(0),this.expirationTimes=Al(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Al(0),this.identifierPrefix=s,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Qc(e,n,t,s,a,i,l,u,d){return e=new ay(e,n,t,u,d),n===1?(n=1,i===!0&&(n|=8)):n=0,i=In(3,null,null,n),e.current=i,i.stateNode=e,i.memoizedState={element:s,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},Pc(i),e}function iy(e,n,t){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ls,key:s==null?null:""+s,children:e,containerInfo:n,implementation:t}}function bp(e){if(!e)return Pr;e=e._reactInternals;e:{if(ts(e)!==e||e.tag!==1)throw Error(je(170));var n=e;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(pn(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error(je(171))}if(e.tag===1){var t=e.type;if(pn(t))return bm(e,t,n)}return n}function Sp(e,n,t,s,a,i,l,u,d){return e=Qc(t,s,!0,e,a,i,l,u,d),e.context=bp(null),t=e.current,s=an(),a=Ar(t),i=ir(s,a),i.callback=n??null,kr(t,i,a),e.current.lanes=a,Oa(e,a,s),hn(e,s),e}function hl(e,n,t,s){var a=n.current,i=an(),l=Ar(a);return t=bp(t),n.context===null?n.context=t:n.pendingContext=t,n=ir(i,l),n.payload={element:e},s=s===void 0?null:s,s!==null&&(n.callback=s),e=kr(a,n,l),e!==null&&(Un(e,a,l,i),vi(e,a,l)),l}function qi(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Du(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var t=e.retryLane;e.retryLane=t!==0&&t<n?t:n}}function Jc(e,n){Du(e,n),(e=e.alternate)&&Du(e,n)}function ly(){return null}var Cp=typeof reportError=="function"?reportError:function(e){console.error(e)};function Xc(e){this._internalRoot=e}gl.prototype.render=Xc.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(je(409));hl(e,n,null,null)};gl.prototype.unmount=Xc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;Jr(function(){hl(null,e,null,null)}),n[or]=null}};function gl(e){this._internalRoot=e}gl.prototype.unstable_scheduleHydration=function(e){if(e){var n=nm();e={blockedOn:null,target:e,priority:n};for(var t=0;t<yr.length&&n!==0&&n<yr[t].priority;t++);yr.splice(t,0,e),t===0&&sm(e)}};function Zc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function vl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Tu(){}function oy(e,n,t,s,a){if(a){if(typeof s=="function"){var i=s;s=function(){var x=qi(l);i.call(x)}}var l=Sp(n,s,e,0,null,!1,!1,"",Tu);return e._reactRootContainer=l,e[or]=l.current,xa(e.nodeType===8?e.parentNode:e),Jr(),l}for(;a=e.lastChild;)e.removeChild(a);if(typeof s=="function"){var u=s;s=function(){var x=qi(d);u.call(x)}}var d=Qc(e,0,!1,null,null,!1,!1,"",Tu);return e._reactRootContainer=d,e[or]=d.current,xa(e.nodeType===8?e.parentNode:e),Jr(function(){hl(n,d,t,s)}),d}function yl(e,n,t,s,a){var i=t._reactRootContainer;if(i){var l=i;if(typeof a=="function"){var u=a;a=function(){var d=qi(l);u.call(d)}}hl(n,l,e,a)}else l=oy(t,n,e,a,s);return qi(l)}em=function(e){switch(e.tag){case 3:var n=e.stateNode;if(n.current.memoizedState.isDehydrated){var t=Zs(n.pendingLanes);t!==0&&(yc(n,t|1),hn(n,Ot()),!(ot&6)&&(Ps=Ot()+500,Fr()))}break;case 13:Jr(function(){var s=cr(e,1);if(s!==null){var a=an();Un(s,e,1,a)}}),Jc(e,1)}};xc=function(e){if(e.tag===13){var n=cr(e,134217728);if(n!==null){var t=an();Un(n,e,134217728,t)}Jc(e,134217728)}};tm=function(e){if(e.tag===13){var n=Ar(e),t=cr(e,n);if(t!==null){var s=an();Un(t,e,n,s)}Jc(e,n)}};nm=function(){return gt};rm=function(e,n){var t=gt;try{return gt=e,n()}finally{gt=t}};_o=function(e,n,t){switch(n){case"input":if(po(e,t),n=t.name,t.type==="radio"&&n!=null){for(t=e;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<t.length;n++){var s=t[n];if(s!==e&&s.form===e.form){var a=ol(s);if(!a)throw Error(je(90));Mf(s),po(s,a)}}}break;case"textarea":$f(e,t);break;case"select":n=t.value,n!=null&&xs(e,!!t.multiple,n,!1)}};Wf=Kc;Hf=Jr;var cy={usingClientEntryPoint:!1,Events:[Fa,fs,ol,Uf,Vf,Kc]},Ys={findFiberByHostInstance:Vr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},dy={bundleType:Ys.bundleType,version:Ys.version,rendererPackageName:Ys.rendererPackageName,rendererConfig:Ys.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:fr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Yf(e),e===null?null:e.stateNode},findFiberByHostInstance:Ys.findFiberByHostInstance||ly,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var si=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!si.isDisabled&&si.supportsFiber)try{sl=si.inject(dy),Jn=si}catch{}}Nn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cy;Nn.createPortal=function(e,n){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Zc(n))throw Error(je(200));return iy(e,n,null,t)};Nn.createRoot=function(e,n){if(!Zc(e))throw Error(je(299));var t=!1,s="",a=Cp;return n!=null&&(n.unstable_strictMode===!0&&(t=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),n=Qc(e,1,!1,null,null,t,!1,s,a),e[or]=n.current,xa(e.nodeType===8?e.parentNode:e),new Xc(n)};Nn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(je(188)):(e=Object.keys(e).join(","),Error(je(268,e)));return e=Yf(n),e=e===null?null:e.stateNode,e};Nn.flushSync=function(e){return Jr(e)};Nn.hydrate=function(e,n,t){if(!vl(n))throw Error(je(200));return yl(null,e,n,!0,t)};Nn.hydrateRoot=function(e,n,t){if(!Zc(e))throw Error(je(405));var s=t!=null&&t.hydratedSources||null,a=!1,i="",l=Cp;if(t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(l=t.onRecoverableError)),n=Sp(n,null,e,1,t??null,a,!1,i,l),e[or]=n.current,xa(e),s)for(e=0;e<s.length;e++)t=s[e],a=t._getVersion,a=a(t._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[t,a]:n.mutableSourceEagerHydrationData.push(t,a);return new gl(n)};Nn.render=function(e,n,t){if(!vl(n))throw Error(je(200));return yl(null,e,n,!1,t)};Nn.unmountComponentAtNode=function(e){if(!vl(e))throw Error(je(40));return e._reactRootContainer?(Jr(function(){yl(null,null,e,!1,function(){e._reactRootContainer=null,e[or]=null})}),!0):!1};Nn.unstable_batchedUpdates=Kc;Nn.unstable_renderSubtreeIntoContainer=function(e,n,t,s){if(!vl(t))throw Error(je(200));if(e==null||e._reactInternals===void 0)throw Error(je(38));return yl(e,n,t,!1,s)};Nn.version="18.3.1-next-f1338f8080-20240426";function wp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(wp)}catch(e){console.error(e)}}wp(),wf.exports=Nn;var Gi=wf.exports,Pu=Gi;io.createRoot=Pu.createRoot,io.hydrateRoot=Pu.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ea(){return Ea=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Ea.apply(this,arguments)}var Nr;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Nr||(Nr={}));const Mu="popstate";function uy(e){e===void 0&&(e={});function n(s,a){let{pathname:i,search:l,hash:u}=s.location;return ec("",{pathname:i,search:l,hash:u},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(s,a){return typeof a=="string"?a:Qi(a)}return my(n,t,null,e)}function kt(e,n){if(e===!1||e===null||typeof e>"u")throw new Error(n)}function ed(e,n){if(!e){typeof console<"u"&&console.warn(n);try{throw new Error(n)}catch{}}}function fy(){return Math.random().toString(36).substr(2,8)}function Ou(e,n){return{usr:e.state,key:e.key,idx:n}}function ec(e,n,t,s){return t===void 0&&(t=null),Ea({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof n=="string"?Ls(n):n,{state:t,key:n&&n.key||s||fy()})}function Qi(e){let{pathname:n="/",search:t="",hash:s=""}=e;return t&&t!=="?"&&(n+=t.charAt(0)==="?"?t:"?"+t),s&&s!=="#"&&(n+=s.charAt(0)==="#"?s:"#"+s),n}function Ls(e){let n={};if(e){let t=e.indexOf("#");t>=0&&(n.hash=e.substr(t),e=e.substr(0,t));let s=e.indexOf("?");s>=0&&(n.search=e.substr(s),e=e.substr(0,s)),e&&(n.pathname=e)}return n}function my(e,n,t,s){s===void 0&&(s={});let{window:a=document.defaultView,v5Compat:i=!1}=s,l=a.history,u=Nr.Pop,d=null,x=_();x==null&&(x=0,l.replaceState(Ea({},l.state,{idx:x}),""));function _(){return(l.state||{idx:null}).idx}function C(){u=Nr.Pop;let E=_(),p=E==null?null:E-x;x=E,d&&d({action:u,location:S.location,delta:p})}function b(E,p){u=Nr.Push;let m=ec(S.location,E,p);x=_()+1;let v=Ou(m,x),j=S.createHref(m);try{l.pushState(v,"",j)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;a.location.assign(j)}i&&d&&d({action:u,location:S.location,delta:1})}function L(E,p){u=Nr.Replace;let m=ec(S.location,E,p);x=_();let v=Ou(m,x),j=S.createHref(m);l.replaceState(v,"",j),i&&d&&d({action:u,location:S.location,delta:0})}function y(E){let p=a.location.origin!=="null"?a.location.origin:a.location.href,m=typeof E=="string"?E:Qi(E);return m=m.replace(/ $/,"%20"),kt(p,"No window.location.(origin|href) available to create URL for href: "+m),new URL(m,p)}let S={get action(){return u},get location(){return e(a,l)},listen(E){if(d)throw new Error("A history only accepts one active listener");return a.addEventListener(Mu,C),d=E,()=>{a.removeEventListener(Mu,C),d=null}},createHref(E){return n(a,E)},createURL:y,encodeLocation(E){let p=y(E);return{pathname:p.pathname,search:p.search,hash:p.hash}},push:b,replace:L,go(E){return l.go(E)}};return S}var $u;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})($u||($u={}));function py(e,n,t){return t===void 0&&(t="/"),hy(e,n,t)}function hy(e,n,t,s){let a=typeof n=="string"?Ls(n):n,i=Ms(a.pathname||"/",t);if(i==null)return null;let l=kp(e);gy(l);let u=null;for(let d=0;u==null&&d<l.length;++d){let x=ky(i);u=Cy(l[d],x)}return u}function kp(e,n,t,s){n===void 0&&(n=[]),t===void 0&&(t=[]),s===void 0&&(s="");let a=(i,l,u)=>{let d={relativePath:u===void 0?i.path||"":u,caseSensitive:i.caseSensitive===!0,childrenIndex:l,route:i};d.relativePath.startsWith("/")&&(kt(d.relativePath.startsWith(s),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(s.length));let x=Dr([s,d.relativePath]),_=t.concat(d);i.children&&i.children.length>0&&(kt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+x+'".')),kp(i.children,n,_,x)),!(i.path==null&&!i.index)&&n.push({path:x,score:by(x,i.index),routesMeta:_})};return e.forEach((i,l)=>{var u;if(i.path===""||!((u=i.path)!=null&&u.includes("?")))a(i,l);else for(let d of Ep(i.path))a(i,l,d)}),n}function Ep(e){let n=e.split("/");if(n.length===0)return[];let[t,...s]=n,a=t.endsWith("?"),i=t.replace(/\?$/,"");if(s.length===0)return a?[i,""]:[i];let l=Ep(s.join("/")),u=[];return u.push(...l.map(d=>d===""?i:[i,d].join("/"))),a&&u.push(...l),u.map(d=>e.startsWith("/")&&d===""?"/":d)}function gy(e){e.sort((n,t)=>n.score!==t.score?t.score-n.score:Sy(n.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}const vy=/^:[\w-]+$/,yy=3,xy=2,jy=1,_y=10,Ny=-2,Fu=e=>e==="*";function by(e,n){let t=e.split("/"),s=t.length;return t.some(Fu)&&(s+=Ny),n&&(s+=xy),t.filter(a=>!Fu(a)).reduce((a,i)=>a+(vy.test(i)?yy:i===""?jy:_y),s)}function Sy(e,n){return e.length===n.length&&e.slice(0,-1).every((s,a)=>s===n[a])?e[e.length-1]-n[n.length-1]:0}function Cy(e,n,t){let{routesMeta:s}=e,a={},i="/",l=[];for(let u=0;u<s.length;++u){let d=s[u],x=u===s.length-1,_=i==="/"?n:n.slice(i.length)||"/",C=tc({path:d.relativePath,caseSensitive:d.caseSensitive,end:x},_),b=d.route;if(!C)return null;Object.assign(a,C.params),l.push({params:a,pathname:Dr([i,C.pathname]),pathnameBase:Ty(Dr([i,C.pathnameBase])),route:b}),C.pathnameBase!=="/"&&(i=Dr([i,C.pathnameBase]))}return l}function tc(e,n){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[t,s]=wy(e.path,e.caseSensitive,e.end),a=n.match(t);if(!a)return null;let i=a[0],l=i.replace(/(.)\/+$/,"$1"),u=a.slice(1);return{params:s.reduce((x,_,C)=>{let{paramName:b,isOptional:L}=_;if(b==="*"){let S=u[C]||"";l=i.slice(0,i.length-S.length).replace(/(.)\/+$/,"$1")}const y=u[C];return L&&!y?x[b]=void 0:x[b]=(y||"").replace(/%2F/g,"/"),x},{}),pathname:i,pathnameBase:l,pattern:e}}function wy(e,n,t){n===void 0&&(n=!1),t===void 0&&(t=!0),ed(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let s=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,d)=>(s.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(s.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,n?void 0:"i"),s]}function ky(e){try{return e.split("/").map(n=>decodeURIComponent(n).replace(/\//g,"%2F")).join("/")}catch(n){return ed(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+n+").")),e}}function Ms(e,n){if(n==="/")return e;if(!e.toLowerCase().startsWith(n.toLowerCase()))return null;let t=n.endsWith("/")?n.length-1:n.length,s=e.charAt(t);return s&&s!=="/"?null:e.slice(t)||"/"}const Ey=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ay=e=>Ey.test(e);function Iy(e,n){n===void 0&&(n="/");let{pathname:t,search:s="",hash:a=""}=typeof e=="string"?Ls(e):e,i;if(t)if(Ay(t))i=t;else{if(t.includes("//")){let l=t;t=t.replace(/\/\/+/g,"/"),ed(!1,"Pathnames cannot have embedded double slashes - normalizing "+(l+" -> "+t))}t.startsWith("/")?i=Lu(t.substring(1),"/"):i=Lu(t,n)}else i=n;return{pathname:i,search:Py(s),hash:My(a)}}function Lu(e,n){let t=n.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function Ql(e,n,t,s){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+n+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Dy(e){return e.filter((n,t)=>t===0||n.route.path&&n.route.path.length>0)}function td(e,n){let t=Dy(e);return n?t.map((s,a)=>a===t.length-1?s.pathname:s.pathnameBase):t.map(s=>s.pathnameBase)}function nd(e,n,t,s){s===void 0&&(s=!1);let a;typeof e=="string"?a=Ls(e):(a=Ea({},e),kt(!a.pathname||!a.pathname.includes("?"),Ql("?","pathname","search",a)),kt(!a.pathname||!a.pathname.includes("#"),Ql("#","pathname","hash",a)),kt(!a.search||!a.search.includes("#"),Ql("#","search","hash",a)));let i=e===""||a.pathname==="",l=i?"/":a.pathname,u;if(l==null)u=t;else{let C=n.length-1;if(!s&&l.startsWith("..")){let b=l.split("/");for(;b[0]==="..";)b.shift(),C-=1;a.pathname=b.join("/")}u=C>=0?n[C]:"/"}let d=Iy(a,u),x=l&&l!=="/"&&l.endsWith("/"),_=(i||l===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(x||_)&&(d.pathname+="/"),d}const Dr=e=>e.join("/").replace(/\/\/+/g,"/"),Ty=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Py=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,My=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Oy(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Ap=["post","put","patch","delete"];new Set(Ap);const $y=["get",...Ap];new Set($y);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Aa(){return Aa=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Aa.apply(this,arguments)}const xl=o.createContext(null),Ip=o.createContext(null),mr=o.createContext(null),jl=o.createContext(null),er=o.createContext({outlet:null,matches:[],isDataRoute:!1}),Dp=o.createContext(null);function Fy(e,n){let{relative:t}=n===void 0?{}:n;Rs()||kt(!1);let{basename:s,navigator:a}=o.useContext(mr),{hash:i,pathname:l,search:u}=_l(e,{relative:t}),d=l;return s!=="/"&&(d=l==="/"?s:Dr([s,l])),a.createHref({pathname:d,search:u,hash:i})}function Rs(){return o.useContext(jl)!=null}function Gt(){return Rs()||kt(!1),o.useContext(jl).location}function Tp(e){o.useContext(mr).static||o.useLayoutEffect(e)}function vt(){let{isDataRoute:e}=o.useContext(er);return e?Xy():Ly()}function Ly(){Rs()||kt(!1);let e=o.useContext(xl),{basename:n,future:t,navigator:s}=o.useContext(mr),{matches:a}=o.useContext(er),{pathname:i}=Gt(),l=JSON.stringify(td(a,t.v7_relativeSplatPath)),u=o.useRef(!1);return Tp(()=>{u.current=!0}),o.useCallback(function(x,_){if(_===void 0&&(_={}),!u.current)return;if(typeof x=="number"){s.go(x);return}let C=nd(x,JSON.parse(l),i,_.relative==="path");e==null&&n!=="/"&&(C.pathname=C.pathname==="/"?n:Dr([n,C.pathname])),(_.replace?s.replace:s.push)(C,_.state,_)},[n,s,l,i,e])}const Ry=o.createContext(null);function zy(e){let n=o.useContext(er).outlet;return n&&o.createElement(Ry.Provider,{value:e},n)}function Mn(){let{matches:e}=o.useContext(er),n=e[e.length-1];return n?n.params:{}}function _l(e,n){let{relative:t}=n===void 0?{}:n,{future:s}=o.useContext(mr),{matches:a}=o.useContext(er),{pathname:i}=Gt(),l=JSON.stringify(td(a,s.v7_relativeSplatPath));return o.useMemo(()=>nd(e,JSON.parse(l),i,t==="path"),[e,l,i,t])}function Uy(e,n){return Vy(e,n)}function Vy(e,n,t,s){Rs()||kt(!1);let{navigator:a}=o.useContext(mr),{matches:i}=o.useContext(er),l=i[i.length-1],u=l?l.params:{};l&&l.pathname;let d=l?l.pathnameBase:"/";l&&l.route;let x=Gt(),_;if(n){var C;let E=typeof n=="string"?Ls(n):n;d==="/"||(C=E.pathname)!=null&&C.startsWith(d)||kt(!1),_=E}else _=x;let b=_.pathname||"/",L=b;if(d!=="/"){let E=d.replace(/^\//,"").split("/");L="/"+b.replace(/^\//,"").split("/").slice(E.length).join("/")}let y=py(e,{pathname:L}),S=Yy(y&&y.map(E=>Object.assign({},E,{params:Object.assign({},u,E.params),pathname:Dr([d,a.encodeLocation?a.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?d:Dr([d,a.encodeLocation?a.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),i,t,s);return n&&S?o.createElement(jl.Provider,{value:{location:Aa({pathname:"/",search:"",hash:"",state:null,key:"default"},_),navigationType:Nr.Pop}},S):S}function Wy(){let e=Jy(),n=Oy(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),t=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return o.createElement(o.Fragment,null,o.createElement("h2",null,"Unexpected Application Error!"),o.createElement("h3",{style:{fontStyle:"italic"}},n),t?o.createElement("pre",{style:a},t):null,null)}const Hy=o.createElement(Wy,null);class By extends o.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,t){return t.location!==n.location||t.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:t.error,location:t.location,revalidation:n.revalidation||t.revalidation}}componentDidCatch(n,t){console.error("React Router caught the following error during render",n,t)}render(){return this.state.error!==void 0?o.createElement(er.Provider,{value:this.props.routeContext},o.createElement(Dp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Ky(e){let{routeContext:n,match:t,children:s}=e,a=o.useContext(xl);return a&&a.static&&a.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=t.route.id),o.createElement(er.Provider,{value:n},s)}function Yy(e,n,t,s){var a;if(n===void 0&&(n=[]),t===void 0&&(t=null),s===void 0&&(s=null),e==null){var i;if(!t)return null;if(t.errors)e=t.matches;else if((i=s)!=null&&i.v7_partialHydration&&n.length===0&&!t.initialized&&t.matches.length>0)e=t.matches;else return null}let l=e,u=(a=t)==null?void 0:a.errors;if(u!=null){let _=l.findIndex(C=>C.route.id&&(u==null?void 0:u[C.route.id])!==void 0);_>=0||kt(!1),l=l.slice(0,Math.min(l.length,_+1))}let d=!1,x=-1;if(t&&s&&s.v7_partialHydration)for(let _=0;_<l.length;_++){let C=l[_];if((C.route.HydrateFallback||C.route.hydrateFallbackElement)&&(x=_),C.route.id){let{loaderData:b,errors:L}=t,y=C.route.loader&&b[C.route.id]===void 0&&(!L||L[C.route.id]===void 0);if(C.route.lazy||y){d=!0,x>=0?l=l.slice(0,x+1):l=[l[0]];break}}}return l.reduceRight((_,C,b)=>{let L,y=!1,S=null,E=null;t&&(L=u&&C.route.id?u[C.route.id]:void 0,S=C.route.errorElement||Hy,d&&(x<0&&b===0?(Zy("route-fallback"),y=!0,E=null):x===b&&(y=!0,E=C.route.hydrateFallbackElement||null)));let p=n.concat(l.slice(0,b+1)),m=()=>{let v;return L?v=S:y?v=E:C.route.Component?v=o.createElement(C.route.Component,null):C.route.element?v=C.route.element:v=_,o.createElement(Ky,{match:C,routeContext:{outlet:_,matches:p,isDataRoute:t!=null},children:v})};return t&&(C.route.ErrorBoundary||C.route.errorElement||b===0)?o.createElement(By,{location:t.location,revalidation:t.revalidation,component:S,error:L,children:m(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):m()},null)}var Pp=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Pp||{}),Mp=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Mp||{});function qy(e){let n=o.useContext(xl);return n||kt(!1),n}function Gy(e){let n=o.useContext(Ip);return n||kt(!1),n}function Qy(e){let n=o.useContext(er);return n||kt(!1),n}function Op(e){let n=Qy(),t=n.matches[n.matches.length-1];return t.route.id||kt(!1),t.route.id}function Jy(){var e;let n=o.useContext(Dp),t=Gy(),s=Op();return n!==void 0?n:(e=t.errors)==null?void 0:e[s]}function Xy(){let{router:e}=qy(Pp.UseNavigateStable),n=Op(Mp.UseNavigateStable),t=o.useRef(!1);return Tp(()=>{t.current=!0}),o.useCallback(function(a,i){i===void 0&&(i={}),t.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,Aa({fromRouteId:n},i)))},[e,n])}const Ru={};function Zy(e,n,t){Ru[e]||(Ru[e]=!0)}function ex(e,n){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function zu(e){let{to:n,replace:t,state:s,relative:a}=e;Rs()||kt(!1);let{future:i,static:l}=o.useContext(mr),{matches:u}=o.useContext(er),{pathname:d}=Gt(),x=vt(),_=nd(n,td(u,i.v7_relativeSplatPath),d,a==="path"),C=JSON.stringify(_);return o.useEffect(()=>x(JSON.parse(C),{replace:t,state:s,relative:a}),[x,C,a,t,s]),null}function tx(e){return zy(e.context)}function it(e){kt(!1)}function nx(e){let{basename:n="/",children:t=null,location:s,navigationType:a=Nr.Pop,navigator:i,static:l=!1,future:u}=e;Rs()&&kt(!1);let d=n.replace(/^\/*/,"/"),x=o.useMemo(()=>({basename:d,navigator:i,static:l,future:Aa({v7_relativeSplatPath:!1},u)}),[d,u,i,l]);typeof s=="string"&&(s=Ls(s));let{pathname:_="/",search:C="",hash:b="",state:L=null,key:y="default"}=s,S=o.useMemo(()=>{let E=Ms(_,d);return E==null?null:{location:{pathname:E,search:C,hash:b,state:L,key:y},navigationType:a}},[d,_,C,b,L,y,a]);return S==null?null:o.createElement(mr.Provider,{value:x},o.createElement(jl.Provider,{children:t,value:S}))}function rx(e){let{children:n,location:t}=e;return Uy(nc(n),t)}new Promise(()=>{});function nc(e,n){n===void 0&&(n=[]);let t=[];return o.Children.forEach(e,(s,a)=>{if(!o.isValidElement(s))return;let i=[...n,a];if(s.type===o.Fragment){t.push.apply(t,nc(s.props.children,i));return}s.type!==it&&kt(!1),!s.props.index||!s.props.children||kt(!1);let l={id:s.props.id||i.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(l.children=nc(s.props.children,i)),t.push(l)}),t}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ji(){return Ji=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Ji.apply(this,arguments)}function $p(e,n){if(e==null)return{};var t={},s=Object.keys(e),a,i;for(i=0;i<s.length;i++)a=s[i],!(n.indexOf(a)>=0)&&(t[a]=e[a]);return t}function sx(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function ax(e,n){return e.button===0&&(!n||n==="_self")&&!sx(e)}function rc(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((n,t)=>{let s=e[t];return n.concat(Array.isArray(s)?s.map(a=>[t,a]):[[t,s]])},[]))}function ix(e,n){let t=rc(e);return n&&n.forEach((s,a)=>{t.has(a)||n.getAll(a).forEach(i=>{t.append(a,i)})}),t}const lx=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],ox=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],cx="6";try{window.__reactRouterVersion=cx}catch{}const dx=o.createContext({isTransitioning:!1}),ux="startTransition",Uu=eg[ux];function fx(e){let{basename:n,children:t,future:s,window:a}=e,i=o.useRef();i.current==null&&(i.current=uy({window:a,v5Compat:!0}));let l=i.current,[u,d]=o.useState({action:l.action,location:l.location}),{v7_startTransition:x}=s||{},_=o.useCallback(C=>{x&&Uu?Uu(()=>d(C)):d(C)},[d,x]);return o.useLayoutEffect(()=>l.listen(_),[l,_]),o.useEffect(()=>ex(s),[s]),o.createElement(nx,{basename:n,children:t,location:u.location,navigationType:u.action,navigator:l,future:s})}const mx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",px=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,nt=o.forwardRef(function(n,t){let{onClick:s,relative:a,reloadDocument:i,replace:l,state:u,target:d,to:x,preventScrollReset:_,viewTransition:C}=n,b=$p(n,lx),{basename:L}=o.useContext(mr),y,S=!1;if(typeof x=="string"&&px.test(x)&&(y=x,mx))try{let v=new URL(window.location.href),j=x.startsWith("//")?new URL(v.protocol+x):new URL(x),P=Ms(j.pathname,L);j.origin===v.origin&&P!=null?x=P+j.search+j.hash:S=!0}catch{}let E=Fy(x,{relative:a}),p=gx(x,{replace:l,state:u,target:d,preventScrollReset:_,relative:a,viewTransition:C});function m(v){s&&s(v),v.defaultPrevented||p(v)}return o.createElement("a",Ji({},b,{href:y||E,onClick:S||i?s:m,ref:t,target:d}))}),Vu=o.forwardRef(function(n,t){let{"aria-current":s="page",caseSensitive:a=!1,className:i="",end:l=!1,style:u,to:d,viewTransition:x,children:_}=n,C=$p(n,ox),b=_l(d,{relative:C.relative}),L=Gt(),y=o.useContext(Ip),{navigator:S,basename:E}=o.useContext(mr),p=y!=null&&vx(b)&&x===!0,m=S.encodeLocation?S.encodeLocation(b).pathname:b.pathname,v=L.pathname,j=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;a||(v=v.toLowerCase(),j=j?j.toLowerCase():null,m=m.toLowerCase()),j&&E&&(j=Ms(j,E)||j);const P=m!=="/"&&m.endsWith("/")?m.length-1:m.length;let k=v===m||!l&&v.startsWith(m)&&v.charAt(P)==="/",D=j!=null&&(j===m||!l&&j.startsWith(m)&&j.charAt(m.length)==="/"),M={isActive:k,isPending:D,isTransitioning:p},J=k?s:void 0,se;typeof i=="function"?se=i(M):se=[i,k?"active":null,D?"pending":null,p?"transitioning":null].filter(Boolean).join(" ");let R=typeof u=="function"?u(M):u;return o.createElement(nt,Ji({},C,{"aria-current":J,className:se,ref:t,style:R,to:d,viewTransition:x}),typeof _=="function"?_(M):_)});var sc;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(sc||(sc={}));var Wu;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Wu||(Wu={}));function hx(e){let n=o.useContext(xl);return n||kt(!1),n}function gx(e,n){let{target:t,replace:s,state:a,preventScrollReset:i,relative:l,viewTransition:u}=n===void 0?{}:n,d=vt(),x=Gt(),_=_l(e,{relative:l});return o.useCallback(C=>{if(ax(C,t)){C.preventDefault();let b=s!==void 0?s:Qi(x)===Qi(_);d(e,{replace:b,state:a,preventScrollReset:i,relative:l,viewTransition:u})}},[x,d,_,s,a,t,e,i,l,u])}function rd(e){let n=o.useRef(rc(e)),t=o.useRef(!1),s=Gt(),a=o.useMemo(()=>ix(s.search,t.current?null:n.current),[s.search]),i=vt(),l=o.useCallback((u,d)=>{const x=rc(typeof u=="function"?u(a):u);t.current=!0,i("?"+x,d)},[i,a]);return[a,l]}function vx(e,n){n===void 0&&(n={});let t=o.useContext(dx);t==null&&kt(!1);let{basename:s}=hx(sc.useViewTransitionState),a=_l(e,{relative:n.relative});if(!t.isTransitioning)return!1;let i=Ms(t.currentLocation.pathname,s)||t.currentLocation.pathname,l=Ms(t.nextLocation.pathname,s)||t.nextLocation.pathname;return tc(a.pathname,l)!=null||tc(a.pathname,i)!=null}const Fp="/assets/logo-BJZLLN_u.webp",yx=[{to:"/events",label:"Events"},{to:"/participants",label:"Participants"},{to:"/logistics",label:"Logistics"}],xx=()=>{const[e,n]=o.useState(!1),[t,s]=o.useState(()=>typeof window>"u"?"dark":window.localStorage.getItem("innhopp-theme")==="light"?"light":"dark");o.useEffect(()=>{const l=u=>{const d=u.target,x=d==null?void 0:d.closest('input[type="number"]');x&&document.activeElement===x&&u.preventDefault()};return window.addEventListener("wheel",l,{passive:!1}),()=>window.removeEventListener("wheel",l)},[]),o.useEffect(()=>{typeof document>"u"||(document.documentElement.setAttribute("data-theme",t),window.localStorage.setItem("innhopp-theme",t))},[t]),o.useEffect(()=>{if(typeof document>"u")return;const l=e&&window.matchMedia&&window.matchMedia("(max-width: 960px)").matches;return document.body.classList.toggle("nav-open",l),()=>document.body.classList.remove("nav-open")},[e]);const a=()=>n(!1),i=()=>s(l=>l==="dark"?"light":"dark");return r.jsxs("div",{className:"app-shell",children:[r.jsxs("header",{className:"app-header",children:[r.jsx("div",{className:"brand",children:r.jsx("img",{src:Fp,alt:"Innhopp Central logo",className:"brand-logo"})}),r.jsx("div",{className:"header-actions",children:r.jsx("button",{type:"button",className:`ghost menu-toggle ${e?"open":""}`,"aria-label":e?"Close menu":"Open menu","aria-expanded":e,onClick:()=>n(l=>!l),children:r.jsxs("span",{className:"menu-icon","aria-hidden":"true",children:[r.jsx("span",{className:"bar"}),r.jsx("span",{className:"bar"}),r.jsx("span",{className:"bar"})]})})})]}),r.jsxs("div",{className:"app-body",children:[r.jsxs("nav",{className:`app-nav ${e?"open":""}`,children:[r.jsx("ul",{children:yx.map(l=>r.jsx("li",{children:r.jsx(Vu,{to:l.to,className:({isActive:u})=>u?"nav-link active":"nav-link",onClick:a,children:l.label})},l.to))}),r.jsxs("div",{className:"nav-bottom",children:[r.jsx(Vu,{to:"/login",className:"nav-link logout-link",children:"Sign out"}),r.jsx("div",{className:"nav-footer",children:r.jsx("button",{type:"button",className:"theme-toggle-btn",onClick:i,"aria-pressed":t==="light",children:t==="dark"?"Light mode":"Dark mode"})})]})]}),e&&r.jsx("div",{className:"nav-backdrop",onClick:()=>n(!1)}),r.jsx("main",{className:"app-content",children:r.jsx(tx,{})})]})]})},jx="YOUR_GOOGLE_CLIENT_ID.apps.googleusercontent.com",_x="97907096881-j3u1fsum801oduk0qeb1pqciph44php4.apps.googleusercontent.com".trim()||jx,Nx=e=>{try{const[,n]=e.split("."),t=n.replace(/-/g,"+").replace(/_/g,"/"),s=t.padEnd(t.length+(4-t.length%4)%4,"=");return JSON.parse(atob(s))}catch(n){return console.error("Failed to decode Google credential",n),null}},Hu="https://accounts.google.com/gsi/client",bx=()=>{const[e,n]=o.useState(null),[t,s]=o.useState(null),[a,i]=o.useState(null),[l,u]=o.useState(!1),[d,x]=o.useState(""),[_,C]=o.useState(""),b=o.useRef(null),L=vt(),y=o.useMemo(()=>!!(e!=null&&e.email)||l,[e,l]);o.useEffect(()=>{if(!b.current)return;const E=()=>{var v,j;if(!((j=(v=window.google)==null?void 0:v.accounts)!=null&&j.id)){s("Google Identity Services SDK is unavailable.");return}b.current.innerHTML="",window.google.accounts.id.initialize({client_id:_x,callback:P=>{const k=Nx(P.credential);if(!k){s("Unable to decode Google credential.");return}n(k),s(null),i(null)}}),window.google.accounts.id.renderButton(b.current,{type:"standard",theme:"outline",size:"large",text:"signin_with"}),window.google.accounts.id.prompt()},p=document.querySelector(`script[src="${Hu}"]`);if(p!=null&&p.getAttribute("data-loaded")){E();return}const m=p??document.createElement("script");return m.src=Hu,m.async=!0,m.defer=!0,m.onload=()=>{m.setAttribute("data-loaded","true"),E()},p||document.head.appendChild(m),()=>{}},[]),o.useEffect(()=>{if(y){const E=window.setTimeout(()=>L("/events"),800);return()=>window.clearTimeout(E)}},[y,L]);const S=E=>{if(E.preventDefault(),d==="admin"&&_==="admin"){u(!0),i(null),x(""),C("");return}u(!1),i("Invalid debug credentials. Use admin/admin.")};return r.jsx("div",{className:"login-layout",children:r.jsxs("section",{className:"login-panel",children:[r.jsx("img",{src:Fp,alt:"Innhopp Central logo",className:"login-logo"}),r.jsx("div",{ref:b,className:"google-button","aria-live":"polite"}),r.jsxs("div",{className:"debug-login",role:"group","aria-labelledby":"debug-login-heading",children:[r.jsx("h2",{id:"debug-login-heading",children:"Testing credentials"}),r.jsxs("form",{onSubmit:S,className:"debug-login-form",children:[r.jsxs("label",{className:"field",children:[r.jsx("span",{children:"Username"}),r.jsx("input",{type:"text",value:d,onChange:E=>x(E.target.value),autoComplete:"username",placeholder:"admin",required:!0})]}),r.jsxs("label",{className:"field",children:[r.jsx("span",{children:"Password"}),r.jsx("input",{type:"password",value:_,onChange:E=>C(E.target.value),autoComplete:"current-password",placeholder:"admin",required:!0})]}),r.jsx("button",{type:"submit",className:"primary",children:"Log in"})]}),a&&r.jsx("p",{className:"error-text",children:a}),l&&!a&&r.jsx("p",{className:"success-text",children:"Debug login successful. Redirecting"})]}),e&&r.jsxs("div",{className:"profile-preview",children:[r.jsx("img",{src:e.picture,alt:e.name}),r.jsxs("div",{children:[r.jsx("p",{className:"profile-name",children:e.name}),r.jsx("p",{className:"profile-email",children:e.email})]})]}),t&&r.jsx("p",{className:"error-text",children:t})]})})},Sx="/api",Cx=e=>{const n=new Headers((e==null?void 0:e.headers)||{});return!n.has("Content-Type")&&(e!=null&&e.body)&&n.set("Content-Type","application/json"),n},Re=async(e,n)=>{var l;const t=`${Sx}${e}`,s=await fetch(t,{...n,credentials:"include",headers:Cx(n)});if(s.status===204||s.status===205){if(!s.ok)throw new Error("Request failed");return}const i=((l=s.headers.get("content-type"))==null?void 0:l.includes("application/json"))?await s.json():await s.text();if(!s.ok){const u=typeof i=="string"?i:(i==null?void 0:i.error)||"Request failed",d=new Error(u);throw d.status=s.status,d}return i},tr=()=>Re("/events/seasons"),wx=e=>Re("/events/seasons",{method:"POST",body:JSON.stringify(e)}),$t=()=>Re("/events/events"),kx=e=>Re("/events/events",{method:"POST",body:JSON.stringify(e)}),Xr=e=>Re(`/events/events/${e}`),Lp=e=>Re(`/events/events/${e}/copy`,{method:"POST"}),Rp=e=>Re(`/events/events/${e}`,{method:"DELETE"}),ur=e=>Re(`/events/events/${e}/accommodations`),zp=()=>Re("/events/accommodations"),Up=(e,n)=>Re(`/events/events/${e}/accommodations`,{method:"POST",body:JSON.stringify(n)}),Vp=(e,n)=>Re(`/events/events/${e}/accommodations/${n}`),Wp=(e,n,t)=>Re(`/events/events/${e}/accommodations/${n}`,{method:"PUT",body:JSON.stringify(t)}),Ex=(e,n)=>Re(`/events/events/${e}/accommodations/${n}`,{method:"DELETE"}),Hp=(e,n)=>Re(`/events/events/${e}`,{method:"PUT",body:JSON.stringify(n)}),Bp=e=>Re(`/innhopps/${e}`),Ax=(e,n)=>Re(`/events/events/${e}/innhopps`,{method:"POST",body:JSON.stringify(n)}),Si=(e,n)=>Re(`/innhopps/${e}`,{method:"PUT",body:JSON.stringify(n)}),Ix=e=>Re(`/innhopps/${e}`,{method:"DELETE"}),Kp=()=>Re("/events/manifests"),Dx=e=>Re("/events/manifests",{method:"POST",body:JSON.stringify(e)}),Tx=e=>Re(`/events/manifests/${e}`),Px=(e,n)=>Re(`/events/manifests/${e}`,{method:"PUT",body:JSON.stringify(n)}),Zr=()=>Re("/participants/profiles"),Ia=e=>Re("/participants/profiles",{method:"POST",body:JSON.stringify(e)}),Mx=e=>Re(`/participants/profiles/${e}`),Ox=(e,n)=>Re(`/participants/profiles/${e}`,{method:"PUT",body:JSON.stringify(n)}),$x=e=>Re(`/participants/profiles/${e}`,{method:"DELETE"}),Fx=/([+-]\d{2}:?\d{2}|Z)$/i,Lx=/^(\d{4})-(\d{2})-(\d{2})(?:[ T](\d{2}):(\d{2})(?::(\d{2})(?:\.\d+)?)?)?$/,en=e=>String(e).padStart(2,"0"),Rx=e=>e.replace(Fx,""),Yp=e=>{if(!e)return null;const n=Rx(e.trim());if(!n)return null;const t=n.match(Lx);if(!t)return null;const[,s,a,i,l,u,d]=t,x=Number(s),_=Number(a),C=Number(i),b=Number(l??"0"),L=Number(u??"0"),y=Number(d??"0");return[x,_,C,b,L,y].some(S=>Number.isNaN(S))?null:{year:x,month:_,day:C,hour:b,minute:L,second:y}},Ze=e=>{const n=Yp(e);if(!n)return null;const t=new Date(Date.UTC(n.year,n.month-1,n.day,n.hour,n.minute,n.second));return Number.isNaN(t.getTime())?null:t},qe=e=>{const n=Yp(e);if(!n)return;const t=new Date(n.year,n.month-1,n.day,n.hour,n.minute,n.second);return Number.isNaN(t.getTime())?void 0:t},zt=e=>new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds())).toISOString(),Wn=(e,n={})=>{const t=Ze(e);return t?new Intl.DateTimeFormat(void 0,{timeZone:"UTC",...n}).format(t):""},zx=e=>{const n=Ze(e);return n?`${n.getUTCFullYear()}-${en(n.getUTCMonth()+1)}-${en(n.getUTCDate())}`:""},sd=e=>{const n=Ze(e);return n?`${n.getUTCFullYear()}-${en(n.getUTCMonth()+1)}-${en(n.getUTCDate())}T${en(n.getUTCHours())}:${en(n.getUTCMinutes())}`:""},Ux=e=>`${e.getUTCFullYear()}-${en(e.getUTCMonth()+1)}-${en(e.getUTCDate())}T${en(e.getUTCHours())}:${en(e.getUTCMinutes())}`,qp=e=>`${e.getFullYear()}-${en(e.getMonth()+1)}-${en(e.getDate())} ${en(e.getHours())}:${en(e.getMinutes())}`,Gp=e=>{const n=Ze(e);return n?n.toISOString():""},Qp=e=>Gp(e?`${e}T00:00`:""),ad=e=>{const n=Ze(e);if(n)return{hour:n.getUTCHours(),minute:n.getUTCMinutes()};if(!e)return null;const t=e.match(/(?:T|\s)(\d{2}):(\d{2})/);if(!t)return null;const s=Number(t[1]),a=Number(t[2]);return Number.isNaN(s)||Number.isNaN(a)?null:{hour:s,minute:a}},Vx=e=>{if(!e)return"";const n=e.match(/^(\d{4})-(\d{2})-(\d{2})/);if(n)return`${n[1]}-${n[2]}-${n[3]}`;const t=Ze(e);return t?`${t.getUTCFullYear()}-${en(t.getUTCMonth()+1)}-${en(t.getUTCDate())}`:""},Wx=e=>(Array.isArray(e)?e:[]).map(n=>({...n,slots:typeof n.slots=="number"?n.slots:0,airfield_ids:Array.isArray(n.airfield_ids)?n.airfield_ids:[],participant_ids:Array.isArray(n.participant_ids)?n.participant_ids:[],innhopps:Array.isArray(n.innhopps)?n.innhopps:[]})),Bu=e=>e?Wn(e,{month:"short",day:"numeric",year:"numeric"}):"TBD",Hx=()=>{var P;const[e,n]=o.useState([]),[t,s]=o.useState([]),[a,i]=o.useState(!0),[l,u]=o.useState(null),[d,x]=o.useState(!1),[_,C]=o.useState(""),[b,L]=o.useState([]),y=o.useMemo(()=>{const k=new Map;return(Array.isArray(e)?e:[]).forEach(D=>k.set(D.id,D)),k},[e]);o.useEffect(()=>{let k=!1;return(async()=>{i(!0),u(null);try{const[M,J,se]=await Promise.all([tr(),$t(),Zr()]);if(k)return;n(Array.isArray(M)?M:[]),s(Wx(J)),L(Array.isArray(se)?se:[])}catch(M){k||u(M instanceof Error?M.message:"Failed to load events")}finally{k||i(!1)}})(),()=>{k=!0}},[]);const S=k=>{if(k.status==="past")return!0;const D=Ze(k.ends_at),M=Ze(k.starts_at);return D?D.getTime()<Date.now():M?M.getTime()<Date.now():!1},E=t.filter(k=>!(!d&&S(k)||_&&k.season_id!==Number(_))),p=o.useMemo(()=>{const k=new Map;E.forEach(M=>{const J=k.get(M.season_id)||[];J.push(M),k.set(M.season_id,J)});const D=(M,J)=>{var de,be;const se=((de=y.get(M))==null?void 0:de.name)||`Season ${M}`,ae=(((be=y.get(J))==null?void 0:be.name)||`Season ${J}`).localeCompare(se);return ae!==0?ae:J-M};return Array.from(k.entries()).sort(([M],[J])=>D(M,J)).map(([M,J])=>{var se;return{seasonId:M,label:((se=y.get(M))==null?void 0:se.name)||`Season ${M}`,events:J}})},[E,y]),m=o.useMemo(()=>{const k=new Map;return b.forEach(D=>k.set(D.id,D)),k},[b]),v=k=>Array.isArray(k)?k.reduce((D,M)=>{var se,R;return(Array.isArray((se=m.get(M))==null?void 0:se.roles)?((R=m.get(M))==null?void 0:R.roles)||[]:[]).includes("Staff")?D:D+1},0):0;o.useEffect(()=>{if(!_)return;const k=Number(_),D=t.filter(J=>J.season_id===k);if(D.length===0){x(!1);return}const M=D.every(J=>S(J));x(M)},[t,_]);const j=((P=p[0])==null?void 0:P.label)||null;return r.jsxs("section",{className:"stack",children:[r.jsx("header",{className:"page-header",children:r.jsx("div",{children:r.jsx("h2",{style:{margin:0},children:"Event Calendar"})})}),r.jsxs("div",{className:"stack",children:[r.jsxs("article",{className:"card",children:[r.jsxs("header",{className:"card-header",style:{alignItems:"center",gap:"0.75rem"},children:[r.jsx("div",{style:{flex:1,fontWeight:800,fontSize:"1.25rem"},children:j||"Events"}),r.jsxs("span",{className:"badge neutral",children:[E.length," ",E.length===1?"event":"events"]})]}),a?r.jsx("p",{className:"muted",children:"Loading schedule"}):l?r.jsx("p",{className:"error-text",children:l}):E.length===0?r.jsx("p",{className:"muted",children:"No events yet. Use the actions below to add one."}):r.jsx("div",{className:"stack",children:p.map((k,D)=>r.jsxs("div",{className:"stack",children:[D===0?null:r.jsx("p",{className:"muted",style:{margin:"0 0 0.5rem"},children:r.jsx("span",{style:{fontSize:"1.25rem",fontWeight:800},children:k.label})}),r.jsx("div",{className:"stack",children:k.events.map(M=>r.jsx(nt,{className:"card-link",to:`/events/${M.id}`,state:{suppressHighlight:!0},children:r.jsx("article",{className:"card event-summary-card",children:(()=>{var be;const J=v(M.participant_ids),se=M.slots??0,R=Math.max(se-J,0),ae=R===0,de=S(M);return r.jsxs(r.Fragment,{children:[r.jsxs("header",{className:"card-header event-card-header",children:[r.jsxs("div",{children:[r.jsx("h3",{children:M.name}),r.jsx("p",{className:"muted event-location",children:M.location||"Location TBD"})]}),r.jsxs("div",{className:"event-card-badges",children:[r.jsx("span",{className:`badge status-${M.status}`,children:M.status}),!de&&r.jsx("span",{className:`badge ${ae?"danger":"success"}`,children:ae?"FULL":`${R} SLOTS AVAILABLE`})]})]}),r.jsxs("dl",{className:"card-details",children:[r.jsxs("div",{children:[r.jsx("dt",{children:"Starts"}),r.jsx("dd",{children:Bu(M.starts_at)})]}),r.jsxs("div",{children:[r.jsx("dt",{children:"Ends"}),r.jsx("dd",{children:Bu(M.ends_at)})]}),r.jsxs("div",{children:[r.jsx("dt",{children:"Participants"}),r.jsx("dd",{children:v(M.participant_ids)})]}),r.jsxs("div",{children:[r.jsx("dt",{children:"INNHOPPS"}),r.jsx("dd",{children:((be=M.innhopps)==null?void 0:be.length)??0})]}),r.jsxs("div",{children:[r.jsx("dt",{children:"Slots"}),r.jsx("dd",{children:se})]})]})]})})()})},M.id))})]},k.seasonId))}),r.jsx("footer",{className:"card-footer",children:r.jsxs("div",{className:"card-actions",children:[r.jsx(nt,{className:"primary button-link",to:"/events/new",children:"Create event"}),r.jsx("button",{className:"ghost",type:"button",onClick:()=>x(k=>!k),children:d?"Hide past events":"Show past events"})]})})]}),r.jsxs("article",{className:"card",children:[r.jsxs("div",{className:"form-grid",children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Season"}),r.jsxs("select",{value:_,onChange:k=>C(k.target.value),style:{width:"16.666%",minWidth:"140px"},children:[r.jsx("option",{value:"",children:"All seasons"}),[...e].sort((k,D)=>D.name.localeCompare(k.name)).map(k=>r.jsx("option",{value:k.id,children:k.name},k.id))]})]}),e.length===0&&r.jsx("p",{className:"muted",children:"No seasons yet. Create one to get started."})]}),r.jsx("footer",{className:"card-footer",children:r.jsx(nt,{className:"primary button-link",to:"/seasons/new",children:"Create season"})})]})]})]})},Bx=[{value:"draft",label:"Draft"},{value:"planned",label:"Planned"},{value:"scouted",label:"Scouted"},{value:"launched",label:"Launched"},{value:"live",label:"Live"},{value:"past",label:"Past"}],Ku=e=>Qp(e),Kx=()=>{const[e,n]=o.useState([]),[t,s]=o.useState(!0),[a,i]=o.useState(null),[l,u]=o.useState(null),[d,x]=o.useState(!1),[_,C]=o.useState({season_id:"",name:"",location:"",slots:"",status:"draft",starts_at:"",ends_at:""}),b=vt();o.useEffect(()=>{let y=!1;return(async()=>{try{const E=await tr();if(y)return;n(Array.isArray(E)?E:[])}catch(E){y||i(E instanceof Error?E.message:"Failed to load seasons")}finally{y||s(!1)}})(),()=>{y=!0}},[]);const L=async y=>{y.preventDefault(),x(!0),u(null);try{const S={season_id:Number(_.season_id),name:_.name.trim(),status:_.status,starts_at:Ku(_.starts_at)};_.location.trim()&&(S.location=_.location.trim()),_.ends_at&&(S.ends_at=Ku(_.ends_at)),_.slots&&(S.slots=Number(_.slots)),await kx(S),u("Event created"),C({season_id:"",name:"",location:"",slots:"",status:"draft",starts_at:"",ends_at:""}),b("/events")}catch(S){u(S instanceof Error?S.message:"Failed to create event")}finally{x(!1)}};return r.jsxs("section",{children:[r.jsxs("header",{className:"page-header",children:[r.jsxs("div",{children:[r.jsx("h2",{children:"Create event"}),r.jsx("p",{children:"Attach a new event to a season with timing and status."})]}),r.jsx("button",{className:"ghost",type:"button",onClick:()=>b("/events"),children:"Back to events"})]}),r.jsxs("article",{className:"card",children:[r.jsx("header",{className:"card-header",children:r.jsxs("div",{children:[r.jsx("h3",{children:"Event details"}),r.jsx("p",{children:"Define the schedule and context."})]})}),t?r.jsx("p",{className:"muted",children:"Loading seasons"}):a?r.jsx("p",{className:"error-text",children:a}):e.length===0?r.jsx("p",{className:"muted",children:"Create a season first before scheduling events."}):r.jsxs("form",{className:"form-grid",onSubmit:L,children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Season"}),r.jsxs("select",{required:!0,value:_.season_id,onChange:y=>C(S=>({...S,season_id:y.target.value})),children:[r.jsx("option",{value:"",children:"Select season"}),e.map(y=>r.jsx("option",{value:y.id,children:y.name},y.id))]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Event name"}),r.jsx("input",{type:"text",value:_.name,onChange:y=>C(S=>({...S,name:y.target.value})),placeholder:"Enter a name for the event",required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Location"}),r.jsx("input",{type:"text",value:_.location,onChange:y=>C(S=>({...S,location:y.target.value})),placeholder:"The overall location the event takes place"})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Slots"}),r.jsx("input",{type:"number",min:"0",value:_.slots,onChange:y=>C(S=>({...S,slots:y.target.value})),placeholder:"Total participant slots"})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Status"}),r.jsx("select",{value:_.status,onChange:y=>C(S=>({...S,status:y.target.value})),children:Bx.map(y=>r.jsx("option",{value:y.value,children:y.label},y.value))})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Starts on"}),r.jsx("input",{type:"date",value:_.starts_at,onChange:y=>C(S=>({...S,starts_at:y.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Ends on"}),r.jsx("input",{type:"date",value:_.ends_at,onChange:y=>C(S=>({...S,ends_at:y.target.value})),placeholder:"Optional"})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"submit",className:"primary",disabled:d,children:d?"Creating":"Create event"}),l&&r.jsx("span",{className:"muted",children:l})]})]})]})]})};var Jp={},Xp={exports:{}},Yx="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",qx=Yx,Gx=qx;function Zp(){}function eh(){}eh.resetWarningCache=Zp;var Qx=function(){function e(s,a,i,l,u,d){if(d!==Gx){var x=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw x.name="Invariant Violation",x}}e.isRequired=e;function n(){return e}var t={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:n,element:e,elementType:e,instanceOf:n,node:e,objectOf:n,oneOf:n,oneOfType:n,shape:n,exact:n,checkPropTypes:eh,resetWarningCache:Zp};return t.PropTypes=t,t};Xp.exports=Qx();var Jx=Xp.exports,Jl=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],Cs={_disable:[],allowInput:!1,allowInvalidPreload:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:typeof window=="object"&&window.navigator.userAgent.indexOf("MSIE")===-1,ariaDateFormat:"F j, Y",autoFillDefaultTime:!0,clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enableSeconds:!1,enableTime:!1,errorHandler:function(e){return typeof console<"u"&&console.warn(e)},getWeek:function(e){var n=new Date(e.getTime());n.setHours(0,0,0,0),n.setDate(n.getDate()+3-(n.getDay()+6)%7);var t=new Date(n.getFullYear(),0,4);return 1+Math.round(((n.getTime()-t.getTime())/864e5-3+(t.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",monthSelectorType:"dropdown",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1},Da={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(e){var n=e%100;if(n>3&&n<21)return"th";switch(n%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year",monthAriaLabel:"Month",hourAriaLabel:"Hour",minuteAriaLabel:"Minute",time_24hr:!1},dn=function(e,n){return n===void 0&&(n=2),("000"+e).slice(n*-1)},kn=function(e){return e===!0?1:0};function Yu(e,n){var t;return function(){var s=this,a=arguments;clearTimeout(t),t=setTimeout(function(){return e.apply(s,a)},n)}}var Xl=function(e){return e instanceof Array?e:[e]};function rn(e,n,t){if(t===!0)return e.classList.add(n);e.classList.remove(n)}function pt(e,n,t){var s=window.document.createElement(e);return n=n||"",t=t||"",s.className=n,t!==void 0&&(s.textContent=t),s}function ai(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function th(e,n){if(n(e))return e;if(e.parentNode)return th(e.parentNode,n)}function ii(e,n){var t=pt("div","numInputWrapper"),s=pt("input","numInput "+e),a=pt("span","arrowUp"),i=pt("span","arrowDown");if(navigator.userAgent.indexOf("MSIE 9.0")===-1?s.type="number":(s.type="text",s.pattern="\\d*"),n!==void 0)for(var l in n)s.setAttribute(l,n[l]);return t.appendChild(s),t.appendChild(a),t.appendChild(i),t}function gn(e){try{if(typeof e.composedPath=="function"){var n=e.composedPath();return n[0]}return e.target}catch{return e.target}}var Zl=function(){},Xi=function(e,n,t){return t.months[n?"shorthand":"longhand"][e]},Xx={D:Zl,F:function(e,n,t){e.setMonth(t.months.longhand.indexOf(n))},G:function(e,n){e.setHours((e.getHours()>=12?12:0)+parseFloat(n))},H:function(e,n){e.setHours(parseFloat(n))},J:function(e,n){e.setDate(parseFloat(n))},K:function(e,n,t){e.setHours(e.getHours()%12+12*kn(new RegExp(t.amPM[1],"i").test(n)))},M:function(e,n,t){e.setMonth(t.months.shorthand.indexOf(n))},S:function(e,n){e.setSeconds(parseFloat(n))},U:function(e,n){return new Date(parseFloat(n)*1e3)},W:function(e,n,t){var s=parseInt(n),a=new Date(e.getFullYear(),0,2+(s-1)*7,0,0,0,0);return a.setDate(a.getDate()-a.getDay()+t.firstDayOfWeek),a},Y:function(e,n){e.setFullYear(parseFloat(n))},Z:function(e,n){return new Date(n)},d:function(e,n){e.setDate(parseFloat(n))},h:function(e,n){e.setHours((e.getHours()>=12?12:0)+parseFloat(n))},i:function(e,n){e.setMinutes(parseFloat(n))},j:function(e,n){e.setDate(parseFloat(n))},l:Zl,m:function(e,n){e.setMonth(parseFloat(n)-1)},n:function(e,n){e.setMonth(parseFloat(n)-1)},s:function(e,n){e.setSeconds(parseFloat(n))},u:function(e,n){return new Date(parseFloat(n))},w:Zl,y:function(e,n){e.setFullYear(2e3+parseFloat(n))}},Ur={D:"",F:"",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},da={Z:function(e){return e.toISOString()},D:function(e,n,t){return n.weekdays.shorthand[da.w(e,n,t)]},F:function(e,n,t){return Xi(da.n(e,n,t)-1,!1,n)},G:function(e,n,t){return dn(da.h(e,n,t))},H:function(e){return dn(e.getHours())},J:function(e,n){return n.ordinal!==void 0?e.getDate()+n.ordinal(e.getDate()):e.getDate()},K:function(e,n){return n.amPM[kn(e.getHours()>11)]},M:function(e,n){return Xi(e.getMonth(),!0,n)},S:function(e){return dn(e.getSeconds())},U:function(e){return e.getTime()/1e3},W:function(e,n,t){return t.getWeek(e)},Y:function(e){return dn(e.getFullYear(),4)},d:function(e){return dn(e.getDate())},h:function(e){return e.getHours()%12?e.getHours()%12:12},i:function(e){return dn(e.getMinutes())},j:function(e){return e.getDate()},l:function(e,n){return n.weekdays.longhand[e.getDay()]},m:function(e){return dn(e.getMonth()+1)},n:function(e){return e.getMonth()+1},s:function(e){return e.getSeconds()},u:function(e){return e.getTime()},w:function(e){return e.getDay()},y:function(e){return String(e.getFullYear()).substring(2)}},nh=function(e){var n=e.config,t=n===void 0?Cs:n,s=e.l10n,a=s===void 0?Da:s,i=e.isMobile,l=i===void 0?!1:i;return function(u,d,x){var _=x||a;return t.formatDate!==void 0&&!l?t.formatDate(u,d,_):d.split("").map(function(C,b,L){return da[C]&&L[b-1]!=="\\"?da[C](u,_,t):C!=="\\"?C:""}).join("")}},ac=function(e){var n=e.config,t=n===void 0?Cs:n,s=e.l10n,a=s===void 0?Da:s;return function(i,l,u,d){if(!(i!==0&&!i)){var x=d||a,_,C=i;if(i instanceof Date)_=new Date(i.getTime());else if(typeof i!="string"&&i.toFixed!==void 0)_=new Date(i);else if(typeof i=="string"){var b=l||(t||Cs).dateFormat,L=String(i).trim();if(L==="today")_=new Date,u=!0;else if(t&&t.parseDate)_=t.parseDate(i,b);else if(/Z$/.test(L)||/GMT$/.test(L))_=new Date(i);else{for(var y=void 0,S=[],E=0,p=0,m="";E<b.length;E++){var v=b[E],j=v==="\\",P=b[E-1]==="\\"||j;if(Ur[v]&&!P){m+=Ur[v];var k=new RegExp(m).exec(i);k&&(y=!0)&&S[v!=="Y"?"push":"unshift"]({fn:Xx[v],val:k[++p]})}else j||(m+=".")}_=!t||!t.noCalendar?new Date(new Date().getFullYear(),0,1,0,0,0,0):new Date(new Date().setHours(0,0,0,0)),S.forEach(function(D){var M=D.fn,J=D.val;return _=M(_,J,x)||_}),_=y?_:void 0}}if(!(_ instanceof Date&&!isNaN(_.getTime()))){t.errorHandler(new Error("Invalid date provided: "+C));return}return u===!0&&_.setHours(0,0,0,0),_}}};function vn(e,n,t){return t===void 0&&(t=!0),t!==!1?new Date(e.getTime()).setHours(0,0,0,0)-new Date(n.getTime()).setHours(0,0,0,0):e.getTime()-n.getTime()}var Zx=function(e,n,t){return e>Math.min(n,t)&&e<Math.max(n,t)},eo=function(e,n,t){return e*3600+n*60+t},e0=function(e){var n=Math.floor(e/3600),t=(e-n*3600)/60;return[n,t,e-n*3600-t*60]},t0={DAY:864e5};function to(e){var n=e.defaultHour,t=e.defaultMinute,s=e.defaultSeconds;if(e.minDate!==void 0){var a=e.minDate.getHours(),i=e.minDate.getMinutes(),l=e.minDate.getSeconds();n<a&&(n=a),n===a&&t<i&&(t=i),n===a&&t===i&&s<l&&(s=e.minDate.getSeconds())}if(e.maxDate!==void 0){var u=e.maxDate.getHours(),d=e.maxDate.getMinutes();n=Math.min(n,u),n===u&&(t=Math.min(d,t)),n===u&&t===d&&(s=e.maxDate.getSeconds())}return{hours:n,minutes:t,seconds:s}}typeof Object.assign!="function"&&(Object.assign=function(e){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];if(!e)throw TypeError("Cannot convert undefined or null to object");for(var s=function(u){u&&Object.keys(u).forEach(function(d){return e[d]=u[d]})},a=0,i=n;a<i.length;a++){var l=i[a];s(l)}return e});var Xt=function(){return Xt=Object.assign||function(e){for(var n,t=1,s=arguments.length;t<s;t++){n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Xt.apply(this,arguments)},qu=function(){for(var e=0,n=0,t=arguments.length;n<t;n++)e+=arguments[n].length;for(var s=Array(e),a=0,n=0;n<t;n++)for(var i=arguments[n],l=0,u=i.length;l<u;l++,a++)s[a]=i[l];return s},n0=300;function r0(e,n){var t={config:Xt(Xt({},Cs),Lt.defaultConfig),l10n:Da};t.parseDate=ac({config:t.config,l10n:t.l10n}),t._handlers=[],t.pluginElements=[],t.loadedPlugins=[],t._bind=S,t._setHoursFromDate=b,t._positionCalendar=Ue,t.changeMonth=Y,t.changeYear=_e,t.clear=ee,t.close=re,t.onMouseOver=Qe,t._createElement=pt,t.createDay=k,t.destroy=ce,t.isEnabled=Fe,t.jumpToDate=m,t.updateValue=$e,t.open=O,t.redraw=dt,t.set=le,t.setDate=Ve,t.toggle=Ut;function s(){t.utils={getDaysInMonth:function(h,g){return h===void 0&&(h=t.currentMonth),g===void 0&&(g=t.currentYear),h===1&&(g%4===0&&g%100!==0||g%400===0)?29:t.l10n.daysInMonth[h]}}}function a(){t.element=t.input=e,t.isOpen=!1,V(),Ie(),yt(),tt(),s(),t.isMobile||P(),p(),(t.selectedDates.length||t.config.noCalendar)&&(t.config.enableTime&&b(t.config.noCalendar?t.latestSelectedDateObj:void 0),$e(!1)),u();var h=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!t.isMobile&&h&&Ue(),Je("onReady")}function i(){var h;return((h=t.calendarContainer)===null||h===void 0?void 0:h.getRootNode()).activeElement||document.activeElement}function l(h){return h.bind(t)}function u(){var h=t.config;h.weekNumbers===!1&&h.showMonths===1||h.noCalendar!==!0&&window.requestAnimationFrame(function(){if(t.calendarContainer!==void 0&&(t.calendarContainer.style.visibility="hidden",t.calendarContainer.style.display="block"),t.daysContainer!==void 0){var g=(t.days.offsetWidth+1)*h.showMonths;t.daysContainer.style.width=g+"px",t.calendarContainer.style.width=g+(t.weekWrapper!==void 0?t.weekWrapper.offsetWidth:0)+"px",t.calendarContainer.style.removeProperty("visibility"),t.calendarContainer.style.removeProperty("display")}})}function d(h){if(t.selectedDates.length===0){var g=t.config.minDate===void 0||vn(new Date,t.config.minDate)>=0?new Date:new Date(t.config.minDate.getTime()),F=to(t.config);g.setHours(F.hours,F.minutes,F.seconds,g.getMilliseconds()),t.selectedDates=[g],t.latestSelectedDateObj=g}h!==void 0&&h.type!=="blur"&&K(h);var U=t._input.value;C(),$e(),t._input.value!==U&&t._debouncedChange()}function x(h,g){return h%12+12*kn(g===t.l10n.amPM[1])}function _(h){switch(h%24){case 0:case 12:return 12;default:return h%12}}function C(){if(!(t.hourElement===void 0||t.minuteElement===void 0)){var h=(parseInt(t.hourElement.value.slice(-2),10)||0)%24,g=(parseInt(t.minuteElement.value,10)||0)%60,F=t.secondElement!==void 0?(parseInt(t.secondElement.value,10)||0)%60:0;t.amPM!==void 0&&(h=x(h,t.amPM.textContent));var U=t.config.minTime!==void 0||t.config.minDate&&t.minDateHasTime&&t.latestSelectedDateObj&&vn(t.latestSelectedDateObj,t.config.minDate,!0)===0,oe=t.config.maxTime!==void 0||t.config.maxDate&&t.maxDateHasTime&&t.latestSelectedDateObj&&vn(t.latestSelectedDateObj,t.config.maxDate,!0)===0;if(t.config.maxTime!==void 0&&t.config.minTime!==void 0&&t.config.minTime>t.config.maxTime){var Se=eo(t.config.minTime.getHours(),t.config.minTime.getMinutes(),t.config.minTime.getSeconds()),He=eo(t.config.maxTime.getHours(),t.config.maxTime.getMinutes(),t.config.maxTime.getSeconds()),Pe=eo(h,g,F);if(Pe>He&&Pe<Se){var Ke=e0(Se);h=Ke[0],g=Ke[1],F=Ke[2]}}else{if(oe){var De=t.config.maxTime!==void 0?t.config.maxTime:t.config.maxDate;h=Math.min(h,De.getHours()),h===De.getHours()&&(g=Math.min(g,De.getMinutes())),g===De.getMinutes()&&(F=Math.min(F,De.getSeconds()))}if(U){var A=t.config.minTime!==void 0?t.config.minTime:t.config.minDate;h=Math.max(h,A.getHours()),h===A.getHours()&&g<A.getMinutes()&&(g=A.getMinutes()),g===A.getMinutes()&&(F=Math.max(F,A.getSeconds()))}}L(h,g,F)}}function b(h){var g=h||t.latestSelectedDateObj;g&&g instanceof Date&&L(g.getHours(),g.getMinutes(),g.getSeconds())}function L(h,g,F){t.latestSelectedDateObj!==void 0&&t.latestSelectedDateObj.setHours(h%24,g,F||0,0),!(!t.hourElement||!t.minuteElement||t.isMobile)&&(t.hourElement.value=dn(t.config.time_24hr?h:(12+h)%12+12*kn(h%12===0)),t.minuteElement.value=dn(g),t.amPM!==void 0&&(t.amPM.textContent=t.l10n.amPM[kn(h>=12)]),t.secondElement!==void 0&&(t.secondElement.value=dn(F)))}function y(h){var g=gn(h),F=parseInt(g.value)+(h.delta||0);(F/1e3>1||h.key==="Enter"&&!/[^\d]/.test(F.toString()))&&_e(F)}function S(h,g,F,U){if(g instanceof Array)return g.forEach(function(oe){return S(h,oe,F,U)});if(h instanceof Array)return h.forEach(function(oe){return S(oe,g,F,U)});h.addEventListener(g,F,U),t._handlers.push({remove:function(){return h.removeEventListener(g,F,U)}})}function E(){Je("onChange")}function p(){if(t.config.wrap&&["open","close","toggle","clear"].forEach(function(F){Array.prototype.forEach.call(t.element.querySelectorAll("[data-"+F+"]"),function(U){return S(U,"click",t[F])})}),t.isMobile){Pt();return}var h=Yu(G,50);if(t._debouncedChange=Yu(E,n0),t.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&S(t.daysContainer,"mouseover",function(F){t.config.mode==="range"&&Qe(gn(F))}),S(t._input,"keydown",Ye),t.calendarContainer!==void 0&&S(t.calendarContainer,"keydown",Ye),!t.config.inline&&!t.config.static&&S(window,"resize",h),window.ontouchstart!==void 0?S(window.document,"touchstart",Ae):S(window.document,"mousedown",Ae),S(window.document,"focus",Ae,{capture:!0}),t.config.clickOpens===!0&&(S(t._input,"focus",t.open),S(t._input,"click",t.open)),t.daysContainer!==void 0&&(S(t.monthNav,"click",I),S(t.monthNav,["keyup","increment"],y),S(t.daysContainer,"click",bt)),t.timeContainer!==void 0&&t.minuteElement!==void 0&&t.hourElement!==void 0){var g=function(F){return gn(F).select()};S(t.timeContainer,["increment"],d),S(t.timeContainer,"blur",d,{capture:!0}),S(t.timeContainer,"click",v),S([t.hourElement,t.minuteElement],["focus","click"],g),t.secondElement!==void 0&&S(t.secondElement,"focus",function(){return t.secondElement&&t.secondElement.select()}),t.amPM!==void 0&&S(t.amPM,"click",function(F){d(F)})}t.config.allowInput&&S(t._input,"blur",Ge)}function m(h,g){var F=h!==void 0?t.parseDate(h):t.latestSelectedDateObj||(t.config.minDate&&t.config.minDate>t.now?t.config.minDate:t.config.maxDate&&t.config.maxDate<t.now?t.config.maxDate:t.now),U=t.currentYear,oe=t.currentMonth;try{F!==void 0&&(t.currentYear=F.getFullYear(),t.currentMonth=F.getMonth())}catch(Se){Se.message="Invalid date supplied: "+F,t.config.errorHandler(Se)}g&&t.currentYear!==U&&(Je("onYearChange"),de()),g&&(t.currentYear!==U||t.currentMonth!==oe)&&Je("onMonthChange"),t.redraw()}function v(h){var g=gn(h);~g.className.indexOf("arrow")&&j(h,g.classList.contains("arrowUp")?1:-1)}function j(h,g,F){var U=h&&gn(h),oe=F||U&&U.parentNode&&U.parentNode.firstChild,Se=f("increment");Se.delta=g,oe&&oe.dispatchEvent(Se)}function P(){var h=window.document.createDocumentFragment();if(t.calendarContainer=pt("div","flatpickr-calendar"),t.calendarContainer.tabIndex=-1,!t.config.noCalendar){if(h.appendChild(he()),t.innerContainer=pt("div","flatpickr-innerContainer"),t.config.weekNumbers){var g=fe(),F=g.weekWrapper,U=g.weekNumbers;t.innerContainer.appendChild(F),t.weekNumbers=U,t.weekWrapper=F}t.rContainer=pt("div","flatpickr-rContainer"),t.rContainer.appendChild(ue()),t.daysContainer||(t.daysContainer=pt("div","flatpickr-days"),t.daysContainer.tabIndex=-1),ae(),t.rContainer.appendChild(t.daysContainer),t.innerContainer.appendChild(t.rContainer),h.appendChild(t.innerContainer)}t.config.enableTime&&h.appendChild(we()),rn(t.calendarContainer,"rangeMode",t.config.mode==="range"),rn(t.calendarContainer,"animate",t.config.animate===!0),rn(t.calendarContainer,"multiMonth",t.config.showMonths>1),t.calendarContainer.appendChild(h);var oe=t.config.appendTo!==void 0&&t.config.appendTo.nodeType!==void 0;if((t.config.inline||t.config.static)&&(t.calendarContainer.classList.add(t.config.inline?"inline":"static"),t.config.inline&&(!oe&&t.element.parentNode?t.element.parentNode.insertBefore(t.calendarContainer,t._input.nextSibling):t.config.appendTo!==void 0&&t.config.appendTo.appendChild(t.calendarContainer)),t.config.static)){var Se=pt("div","flatpickr-wrapper");t.element.parentNode&&t.element.parentNode.insertBefore(Se,t.element),Se.appendChild(t.element),t.altInput&&Se.appendChild(t.altInput),Se.appendChild(t.calendarContainer)}!t.config.static&&!t.config.inline&&(t.config.appendTo!==void 0?t.config.appendTo:window.document.body).appendChild(t.calendarContainer)}function k(h,g,F,U){var oe=Fe(g,!0),Se=pt("span",h,g.getDate().toString());return Se.dateObj=g,Se.$i=U,Se.setAttribute("aria-label",t.formatDate(g,t.config.ariaDateFormat)),h.indexOf("hidden")===-1&&vn(g,t.now)===0&&(t.todayDateElem=Se,Se.classList.add("today"),Se.setAttribute("aria-current","date")),oe?(Se.tabIndex=-1,w(g)&&(Se.classList.add("selected"),t.selectedDateElem=Se,t.config.mode==="range"&&(rn(Se,"startRange",t.selectedDates[0]&&vn(g,t.selectedDates[0],!0)===0),rn(Se,"endRange",t.selectedDates[1]&&vn(g,t.selectedDates[1],!0)===0),h==="nextMonthDay"&&Se.classList.add("inRange")))):Se.classList.add("flatpickr-disabled"),t.config.mode==="range"&&z(g)&&!w(g)&&Se.classList.add("inRange"),t.weekNumbers&&t.config.showMonths===1&&h!=="prevMonthDay"&&U%7===6&&t.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+t.config.getWeek(g)+"</span>"),Je("onDayCreate",Se),Se}function D(h){h.focus(),t.config.mode==="range"&&Qe(h)}function M(h){for(var g=h>0?0:t.config.showMonths-1,F=h>0?t.config.showMonths:-1,U=g;U!=F;U+=h)for(var oe=t.daysContainer.children[U],Se=h>0?0:oe.children.length-1,He=h>0?oe.children.length:-1,Pe=Se;Pe!=He;Pe+=h){var Ke=oe.children[Pe];if(Ke.className.indexOf("hidden")===-1&&Fe(Ke.dateObj))return Ke}}function J(h,g){for(var F=h.className.indexOf("Month")===-1?h.dateObj.getMonth():t.currentMonth,U=g>0?t.config.showMonths:-1,oe=g>0?1:-1,Se=F-t.currentMonth;Se!=U;Se+=oe)for(var He=t.daysContainer.children[Se],Pe=F-t.currentMonth===Se?h.$i+g:g<0?He.children.length-1:0,Ke=He.children.length,De=Pe;De>=0&&De<Ke&&De!=(g>0?Ke:-1);De+=oe){var A=He.children[De];if(A.className.indexOf("hidden")===-1&&Fe(A.dateObj)&&Math.abs(h.$i-De)>=Math.abs(g))return D(A)}t.changeMonth(oe),se(M(oe),0)}function se(h,g){var F=i(),U=Te(F||document.body),oe=h!==void 0?h:U?F:t.selectedDateElem!==void 0&&Te(t.selectedDateElem)?t.selectedDateElem:t.todayDateElem!==void 0&&Te(t.todayDateElem)?t.todayDateElem:M(g>0?1:-1);oe===void 0?t._input.focus():U?J(oe,g):D(oe)}function R(h,g){for(var F=(new Date(h,g,1).getDay()-t.l10n.firstDayOfWeek+7)%7,U=t.utils.getDaysInMonth((g-1+12)%12,h),oe=t.utils.getDaysInMonth(g,h),Se=window.document.createDocumentFragment(),He=t.config.showMonths>1,Pe=He?"prevMonthDay hidden":"prevMonthDay",Ke=He?"nextMonthDay hidden":"nextMonthDay",De=U+1-F,A=0;De<=U;De++,A++)Se.appendChild(k("flatpickr-day "+Pe,new Date(h,g-1,De),De,A));for(De=1;De<=oe;De++,A++)Se.appendChild(k("flatpickr-day",new Date(h,g,De),De,A));for(var H=oe+1;H<=42-F&&(t.config.showMonths===1||A%7!==0);H++,A++)Se.appendChild(k("flatpickr-day "+Ke,new Date(h,g+1,H%oe),H,A));var Q=pt("div","dayContainer");return Q.appendChild(Se),Q}function ae(){if(t.daysContainer!==void 0){ai(t.daysContainer),t.weekNumbers&&ai(t.weekNumbers);for(var h=document.createDocumentFragment(),g=0;g<t.config.showMonths;g++){var F=new Date(t.currentYear,t.currentMonth,1);F.setMonth(t.currentMonth+g),h.appendChild(R(F.getFullYear(),F.getMonth()))}t.daysContainer.appendChild(h),t.days=t.daysContainer.firstChild,t.config.mode==="range"&&t.selectedDates.length===1&&Qe()}}function de(){if(!(t.config.showMonths>1||t.config.monthSelectorType!=="dropdown")){var h=function(U){return t.config.minDate!==void 0&&t.currentYear===t.config.minDate.getFullYear()&&U<t.config.minDate.getMonth()?!1:!(t.config.maxDate!==void 0&&t.currentYear===t.config.maxDate.getFullYear()&&U>t.config.maxDate.getMonth())};t.monthsDropdownContainer.tabIndex=-1,t.monthsDropdownContainer.innerHTML="";for(var g=0;g<12;g++)if(h(g)){var F=pt("option","flatpickr-monthDropdown-month");F.value=new Date(t.currentYear,g).getMonth().toString(),F.textContent=Xi(g,t.config.shorthandCurrentMonth,t.l10n),F.tabIndex=-1,t.currentMonth===g&&(F.selected=!0),t.monthsDropdownContainer.appendChild(F)}}}function be(){var h=pt("div","flatpickr-month"),g=window.document.createDocumentFragment(),F;t.config.showMonths>1||t.config.monthSelectorType==="static"?F=pt("span","cur-month"):(t.monthsDropdownContainer=pt("select","flatpickr-monthDropdown-months"),t.monthsDropdownContainer.setAttribute("aria-label",t.l10n.monthAriaLabel),S(t.monthsDropdownContainer,"change",function(He){var Pe=gn(He),Ke=parseInt(Pe.value,10);t.changeMonth(Ke-t.currentMonth),Je("onMonthChange")}),de(),F=t.monthsDropdownContainer);var U=ii("cur-year",{tabindex:"-1"}),oe=U.getElementsByTagName("input")[0];oe.setAttribute("aria-label",t.l10n.yearAriaLabel),t.config.minDate&&oe.setAttribute("min",t.config.minDate.getFullYear().toString()),t.config.maxDate&&(oe.setAttribute("max",t.config.maxDate.getFullYear().toString()),oe.disabled=!!t.config.minDate&&t.config.minDate.getFullYear()===t.config.maxDate.getFullYear());var Se=pt("div","flatpickr-current-month");return Se.appendChild(F),Se.appendChild(U),g.appendChild(Se),h.appendChild(g),{container:h,yearElement:oe,monthElement:F}}function me(){ai(t.monthNav),t.monthNav.appendChild(t.prevMonthNav),t.config.showMonths&&(t.yearElements=[],t.monthElements=[]);for(var h=t.config.showMonths;h--;){var g=be();t.yearElements.push(g.yearElement),t.monthElements.push(g.monthElement),t.monthNav.appendChild(g.container)}t.monthNav.appendChild(t.nextMonthNav)}function he(){return t.monthNav=pt("div","flatpickr-months"),t.yearElements=[],t.monthElements=[],t.prevMonthNav=pt("span","flatpickr-prev-month"),t.prevMonthNav.innerHTML=t.config.prevArrow,t.nextMonthNav=pt("span","flatpickr-next-month"),t.nextMonthNav.innerHTML=t.config.nextArrow,me(),Object.defineProperty(t,"_hidePrevMonthArrow",{get:function(){return t.__hidePrevMonthArrow},set:function(h){t.__hidePrevMonthArrow!==h&&(rn(t.prevMonthNav,"flatpickr-disabled",h),t.__hidePrevMonthArrow=h)}}),Object.defineProperty(t,"_hideNextMonthArrow",{get:function(){return t.__hideNextMonthArrow},set:function(h){t.__hideNextMonthArrow!==h&&(rn(t.nextMonthNav,"flatpickr-disabled",h),t.__hideNextMonthArrow=h)}}),t.currentYearElement=t.yearElements[0],W(),t.monthNav}function we(){t.calendarContainer.classList.add("hasTime"),t.config.noCalendar&&t.calendarContainer.classList.add("noCalendar");var h=to(t.config);t.timeContainer=pt("div","flatpickr-time"),t.timeContainer.tabIndex=-1;var g=pt("span","flatpickr-time-separator",":"),F=ii("flatpickr-hour",{"aria-label":t.l10n.hourAriaLabel});t.hourElement=F.getElementsByTagName("input")[0];var U=ii("flatpickr-minute",{"aria-label":t.l10n.minuteAriaLabel});if(t.minuteElement=U.getElementsByTagName("input")[0],t.hourElement.tabIndex=t.minuteElement.tabIndex=-1,t.hourElement.value=dn(t.latestSelectedDateObj?t.latestSelectedDateObj.getHours():t.config.time_24hr?h.hours:_(h.hours)),t.minuteElement.value=dn(t.latestSelectedDateObj?t.latestSelectedDateObj.getMinutes():h.minutes),t.hourElement.setAttribute("step",t.config.hourIncrement.toString()),t.minuteElement.setAttribute("step",t.config.minuteIncrement.toString()),t.hourElement.setAttribute("min",t.config.time_24hr?"0":"1"),t.hourElement.setAttribute("max",t.config.time_24hr?"23":"12"),t.hourElement.setAttribute("maxlength","2"),t.minuteElement.setAttribute("min","0"),t.minuteElement.setAttribute("max","59"),t.minuteElement.setAttribute("maxlength","2"),t.timeContainer.appendChild(F),t.timeContainer.appendChild(g),t.timeContainer.appendChild(U),t.config.time_24hr&&t.timeContainer.classList.add("time24hr"),t.config.enableSeconds){t.timeContainer.classList.add("hasSeconds");var oe=ii("flatpickr-second");t.secondElement=oe.getElementsByTagName("input")[0],t.secondElement.value=dn(t.latestSelectedDateObj?t.latestSelectedDateObj.getSeconds():h.seconds),t.secondElement.setAttribute("step",t.minuteElement.getAttribute("step")),t.secondElement.setAttribute("min","0"),t.secondElement.setAttribute("max","59"),t.secondElement.setAttribute("maxlength","2"),t.timeContainer.appendChild(pt("span","flatpickr-time-separator",":")),t.timeContainer.appendChild(oe)}return t.config.time_24hr||(t.amPM=pt("span","flatpickr-am-pm",t.l10n.amPM[kn((t.latestSelectedDateObj?t.hourElement.value:t.config.defaultHour)>11)]),t.amPM.title=t.l10n.toggleTitle,t.amPM.tabIndex=-1,t.timeContainer.appendChild(t.amPM)),t.timeContainer}function ue(){t.weekdayContainer?ai(t.weekdayContainer):t.weekdayContainer=pt("div","flatpickr-weekdays");for(var h=t.config.showMonths;h--;){var g=pt("div","flatpickr-weekdaycontainer");t.weekdayContainer.appendChild(g)}return ge(),t.weekdayContainer}function ge(){if(t.weekdayContainer){var h=t.l10n.firstDayOfWeek,g=qu(t.l10n.weekdays.shorthand);h>0&&h<g.length&&(g=qu(g.splice(h,g.length),g.splice(0,h)));for(var F=t.config.showMonths;F--;)t.weekdayContainer.children[F].innerHTML=`
      <span class='flatpickr-weekday'>
        `+g.join("</span><span class='flatpickr-weekday'>")+`
      </span>
      `}}function fe(){t.calendarContainer.classList.add("hasWeeks");var h=pt("div","flatpickr-weekwrapper");h.appendChild(pt("span","flatpickr-weekday",t.l10n.weekAbbreviation));var g=pt("div","flatpickr-weeks");return h.appendChild(g),{weekWrapper:h,weekNumbers:g}}function Y(h,g){g===void 0&&(g=!0);var F=g?h:h-t.currentMonth;F<0&&t._hidePrevMonthArrow===!0||F>0&&t._hideNextMonthArrow===!0||(t.currentMonth+=F,(t.currentMonth<0||t.currentMonth>11)&&(t.currentYear+=t.currentMonth>11?1:-1,t.currentMonth=(t.currentMonth+12)%12,Je("onYearChange"),de()),ae(),Je("onMonthChange"),W())}function ee(h,g){if(h===void 0&&(h=!0),g===void 0&&(g=!0),t.input.value="",t.altInput!==void 0&&(t.altInput.value=""),t.mobileInput!==void 0&&(t.mobileInput.value=""),t.selectedDates=[],t.latestSelectedDateObj=void 0,g===!0&&(t.currentYear=t._initialDate.getFullYear(),t.currentMonth=t._initialDate.getMonth()),t.config.enableTime===!0){var F=to(t.config),U=F.hours,oe=F.minutes,Se=F.seconds;L(U,oe,Se)}t.redraw(),h&&Je("onChange")}function re(){t.isOpen=!1,t.isMobile||(t.calendarContainer!==void 0&&t.calendarContainer.classList.remove("open"),t._input!==void 0&&t._input.classList.remove("active")),Je("onClose")}function ce(){t.config!==void 0&&Je("onDestroy");for(var h=t._handlers.length;h--;)t._handlers[h].remove();if(t._handlers=[],t.mobileInput)t.mobileInput.parentNode&&t.mobileInput.parentNode.removeChild(t.mobileInput),t.mobileInput=void 0;else if(t.calendarContainer&&t.calendarContainer.parentNode)if(t.config.static&&t.calendarContainer.parentNode){var g=t.calendarContainer.parentNode;if(g.lastChild&&g.removeChild(g.lastChild),g.parentNode){for(;g.firstChild;)g.parentNode.insertBefore(g.firstChild,g);g.parentNode.removeChild(g)}}else t.calendarContainer.parentNode.removeChild(t.calendarContainer);t.altInput&&(t.input.type="text",t.altInput.parentNode&&t.altInput.parentNode.removeChild(t.altInput),delete t.altInput),t.input&&(t.input.type=t.input._type,t.input.classList.remove("flatpickr-input"),t.input.removeAttribute("readonly")),["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","monthsDropdownContainer","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach(function(F){try{delete t[F]}catch{}})}function pe(h){return t.calendarContainer.contains(h)}function Ae(h){if(t.isOpen&&!t.config.inline){var g=gn(h),F=pe(g),U=g===t.input||g===t.altInput||t.element.contains(g)||h.path&&h.path.indexOf&&(~h.path.indexOf(t.input)||~h.path.indexOf(t.altInput)),oe=!U&&!F&&!pe(h.relatedTarget),Se=!t.config.ignoredFocusElements.some(function(He){return He.contains(g)});oe&&Se&&(t.config.allowInput&&t.setDate(t._input.value,!1,t.config.altInput?t.config.altFormat:t.config.dateFormat),t.timeContainer!==void 0&&t.minuteElement!==void 0&&t.hourElement!==void 0&&t.input.value!==""&&t.input.value!==void 0&&d(),t.close(),t.config&&t.config.mode==="range"&&t.selectedDates.length===1&&t.clear(!1))}}function _e(h){if(!(!h||t.config.minDate&&h<t.config.minDate.getFullYear()||t.config.maxDate&&h>t.config.maxDate.getFullYear())){var g=h,F=t.currentYear!==g;t.currentYear=g||t.currentYear,t.config.maxDate&&t.currentYear===t.config.maxDate.getFullYear()?t.currentMonth=Math.min(t.config.maxDate.getMonth(),t.currentMonth):t.config.minDate&&t.currentYear===t.config.minDate.getFullYear()&&(t.currentMonth=Math.max(t.config.minDate.getMonth(),t.currentMonth)),F&&(t.redraw(),Je("onYearChange"),de())}}function Fe(h,g){var F;g===void 0&&(g=!0);var U=t.parseDate(h,void 0,g);if(t.config.minDate&&U&&vn(U,t.config.minDate,g!==void 0?g:!t.minDateHasTime)<0||t.config.maxDate&&U&&vn(U,t.config.maxDate,g!==void 0?g:!t.maxDateHasTime)>0)return!1;if(!t.config.enable&&t.config.disable.length===0)return!0;if(U===void 0)return!1;for(var oe=!!t.config.enable,Se=(F=t.config.enable)!==null&&F!==void 0?F:t.config.disable,He=0,Pe=void 0;He<Se.length;He++){if(Pe=Se[He],typeof Pe=="function"&&Pe(U))return oe;if(Pe instanceof Date&&U!==void 0&&Pe.getTime()===U.getTime())return oe;if(typeof Pe=="string"){var Ke=t.parseDate(Pe,void 0,!0);return Ke&&Ke.getTime()===U.getTime()?oe:!oe}else if(typeof Pe=="object"&&U!==void 0&&Pe.from&&Pe.to&&U.getTime()>=Pe.from.getTime()&&U.getTime()<=Pe.to.getTime())return oe}return!oe}function Te(h){return t.daysContainer!==void 0?h.className.indexOf("hidden")===-1&&h.className.indexOf("flatpickr-disabled")===-1&&t.daysContainer.contains(h):!1}function Ge(h){var g=h.target===t._input,F=t._input.value.trimEnd()!==Le();g&&F&&!(h.relatedTarget&&pe(h.relatedTarget))&&t.setDate(t._input.value,!0,h.target===t.altInput?t.config.altFormat:t.config.dateFormat)}function Ye(h){var g=gn(h),F=t.config.wrap?e.contains(g):g===t._input,U=t.config.allowInput,oe=t.isOpen&&(!U||!F),Se=t.config.inline&&F&&!U;if(h.keyCode===13&&F){if(U)return t.setDate(t._input.value,!0,g===t.altInput?t.config.altFormat:t.config.dateFormat),t.close(),g.blur();t.open()}else if(pe(g)||oe||Se){var He=!!t.timeContainer&&t.timeContainer.contains(g);switch(h.keyCode){case 13:He?(h.preventDefault(),d(),Tt()):bt(h);break;case 27:h.preventDefault(),Tt();break;case 8:case 46:F&&!t.config.allowInput&&(h.preventDefault(),t.clear());break;case 37:case 39:if(!He&&!F){h.preventDefault();var Pe=i();if(t.daysContainer!==void 0&&(U===!1||Pe&&Te(Pe))){var Ke=h.keyCode===39?1:-1;h.ctrlKey?(h.stopPropagation(),Y(Ke),se(M(1),0)):se(void 0,Ke)}}else t.hourElement&&t.hourElement.focus();break;case 38:case 40:h.preventDefault();var De=h.keyCode===40?1:-1;t.daysContainer&&g.$i!==void 0||g===t.input||g===t.altInput?h.ctrlKey?(h.stopPropagation(),_e(t.currentYear-De),se(M(1),0)):He||se(void 0,De*7):g===t.currentYearElement?_e(t.currentYear-De):t.config.enableTime&&(!He&&t.hourElement&&t.hourElement.focus(),d(h),t._debouncedChange());break;case 9:if(He){var A=[t.hourElement,t.minuteElement,t.secondElement,t.amPM].concat(t.pluginElements).filter(function(q){return q}),H=A.indexOf(g);if(H!==-1){var Q=A[H+(h.shiftKey?-1:1)];h.preventDefault(),(Q||t._input).focus()}}else!t.config.noCalendar&&t.daysContainer&&t.daysContainer.contains(g)&&h.shiftKey&&(h.preventDefault(),t._input.focus());break}}if(t.amPM!==void 0&&g===t.amPM)switch(h.key){case t.l10n.amPM[0].charAt(0):case t.l10n.amPM[0].charAt(0).toLowerCase():t.amPM.textContent=t.l10n.amPM[0],C(),$e();break;case t.l10n.amPM[1].charAt(0):case t.l10n.amPM[1].charAt(0).toLowerCase():t.amPM.textContent=t.l10n.amPM[1],C(),$e();break}(F||pe(g))&&Je("onKeyDown",h)}function Qe(h,g){if(g===void 0&&(g="flatpickr-day"),!(t.selectedDates.length!==1||h&&(!h.classList.contains(g)||h.classList.contains("flatpickr-disabled")))){for(var F=h?h.dateObj.getTime():t.days.firstElementChild.dateObj.getTime(),U=t.parseDate(t.selectedDates[0],void 0,!0).getTime(),oe=Math.min(F,t.selectedDates[0].getTime()),Se=Math.max(F,t.selectedDates[0].getTime()),He=!1,Pe=0,Ke=0,De=oe;De<Se;De+=t0.DAY)Fe(new Date(De),!0)||(He=He||De>oe&&De<Se,De<U&&(!Pe||De>Pe)?Pe=De:De>U&&(!Ke||De<Ke)&&(Ke=De));var A=Array.from(t.rContainer.querySelectorAll("*:nth-child(-n+"+t.config.showMonths+") > ."+g));A.forEach(function(H){var Q=H.dateObj,q=Q.getTime(),ve=Pe>0&&q<Pe||Ke>0&&q>Ke;if(ve){H.classList.add("notAllowed"),["inRange","startRange","endRange"].forEach(function(ye){H.classList.remove(ye)});return}else if(He&&!ve)return;["startRange","inRange","endRange","notAllowed"].forEach(function(ye){H.classList.remove(ye)}),h!==void 0&&(h.classList.add(F<=t.selectedDates[0].getTime()?"startRange":"endRange"),U<F&&q===U?H.classList.add("startRange"):U>F&&q===U&&H.classList.add("endRange"),q>=Pe&&(Ke===0||q<=Ke)&&Zx(q,U,F)&&H.classList.add("inRange"))})}}function G(){t.isOpen&&!t.config.static&&!t.config.inline&&Ue()}function O(h,g){if(g===void 0&&(g=t._positionElement),t.isMobile===!0){if(h){h.preventDefault();var F=gn(h);F&&F.blur()}t.mobileInput!==void 0&&(t.mobileInput.focus(),t.mobileInput.click()),Je("onOpen");return}else if(t._input.disabled||t.config.inline)return;var U=t.isOpen;t.isOpen=!0,U||(t.calendarContainer.classList.add("open"),t._input.classList.add("active"),Je("onOpen"),Ue(g)),t.config.enableTime===!0&&t.config.noCalendar===!0&&t.config.allowInput===!1&&(h===void 0||!t.timeContainer.contains(h.relatedTarget))&&setTimeout(function(){return t.hourElement.select()},50)}function $(h){return function(g){var F=t.config["_"+h+"Date"]=t.parseDate(g,t.config.dateFormat),U=t.config["_"+(h==="min"?"max":"min")+"Date"];F!==void 0&&(t[h==="min"?"minDateHasTime":"maxDateHasTime"]=F.getHours()>0||F.getMinutes()>0||F.getSeconds()>0),t.selectedDates&&(t.selectedDates=t.selectedDates.filter(function(oe){return Fe(oe)}),!t.selectedDates.length&&h==="min"&&b(F),$e()),t.daysContainer&&(dt(),F!==void 0?t.currentYearElement[h]=F.getFullYear().toString():t.currentYearElement.removeAttribute(h),t.currentYearElement.disabled=!!U&&F!==void 0&&U.getFullYear()===F.getFullYear())}}function V(){var h=["wrap","weekNumbers","allowInput","allowInvalidPreload","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],g=Xt(Xt({},JSON.parse(JSON.stringify(e.dataset||{}))),n),F={};t.config.parseDate=g.parseDate,t.config.formatDate=g.formatDate,Object.defineProperty(t.config,"enable",{get:function(){return t.config._enable},set:function(A){t.config._enable=et(A)}}),Object.defineProperty(t.config,"disable",{get:function(){return t.config._disable},set:function(A){t.config._disable=et(A)}});var U=g.mode==="time";if(!g.dateFormat&&(g.enableTime||U)){var oe=Lt.defaultConfig.dateFormat||Cs.dateFormat;F.dateFormat=g.noCalendar||U?"H:i"+(g.enableSeconds?":S":""):oe+" H:i"+(g.enableSeconds?":S":"")}if(g.altInput&&(g.enableTime||U)&&!g.altFormat){var Se=Lt.defaultConfig.altFormat||Cs.altFormat;F.altFormat=g.noCalendar||U?"h:i"+(g.enableSeconds?":S K":" K"):Se+(" h:i"+(g.enableSeconds?":S":"")+" K")}Object.defineProperty(t.config,"minDate",{get:function(){return t.config._minDate},set:$("min")}),Object.defineProperty(t.config,"maxDate",{get:function(){return t.config._maxDate},set:$("max")});var He=function(A){return function(H){t.config[A==="min"?"_minTime":"_maxTime"]=t.parseDate(H,"H:i:S")}};Object.defineProperty(t.config,"minTime",{get:function(){return t.config._minTime},set:He("min")}),Object.defineProperty(t.config,"maxTime",{get:function(){return t.config._maxTime},set:He("max")}),g.mode==="time"&&(t.config.noCalendar=!0,t.config.enableTime=!0),Object.assign(t.config,F,g);for(var Pe=0;Pe<h.length;Pe++)t.config[h[Pe]]=t.config[h[Pe]]===!0||t.config[h[Pe]]==="true";Jl.filter(function(A){return t.config[A]!==void 0}).forEach(function(A){t.config[A]=Xl(t.config[A]||[]).map(l)}),t.isMobile=!t.config.disableMobile&&!t.config.inline&&t.config.mode==="single"&&!t.config.disable.length&&!t.config.enable&&!t.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);for(var Pe=0;Pe<t.config.plugins.length;Pe++){var Ke=t.config.plugins[Pe](t)||{};for(var De in Ke)Jl.indexOf(De)>-1?t.config[De]=Xl(Ke[De]).map(l).concat(t.config[De]):typeof g[De]>"u"&&(t.config[De]=Ke[De])}g.altInputClass||(t.config.altInputClass=Z().className+" "+t.config.altInputClass),Je("onParseConfig")}function Z(){return t.config.wrap?e.querySelector("[data-input]"):e}function Ie(){typeof t.config.locale!="object"&&typeof Lt.l10ns[t.config.locale]>"u"&&t.config.errorHandler(new Error("flatpickr: invalid locale "+t.config.locale)),t.l10n=Xt(Xt({},Lt.l10ns.default),typeof t.config.locale=="object"?t.config.locale:t.config.locale!=="default"?Lt.l10ns[t.config.locale]:void 0),Ur.D="("+t.l10n.weekdays.shorthand.join("|")+")",Ur.l="("+t.l10n.weekdays.longhand.join("|")+")",Ur.M="("+t.l10n.months.shorthand.join("|")+")",Ur.F="("+t.l10n.months.longhand.join("|")+")",Ur.K="("+t.l10n.amPM[0]+"|"+t.l10n.amPM[1]+"|"+t.l10n.amPM[0].toLowerCase()+"|"+t.l10n.amPM[1].toLowerCase()+")";var h=Xt(Xt({},n),JSON.parse(JSON.stringify(e.dataset||{})));h.time_24hr===void 0&&Lt.defaultConfig.time_24hr===void 0&&(t.config.time_24hr=t.l10n.time_24hr),t.formatDate=nh(t),t.parseDate=ac({config:t.config,l10n:t.l10n})}function Ue(h){if(typeof t.config.position=="function")return void t.config.position(t,h);if(t.calendarContainer!==void 0){Je("onPreCalendarPosition");var g=h||t._positionElement,F=Array.prototype.reduce.call(t.calendarContainer.children,function(ct,at){return ct+at.offsetHeight},0),U=t.calendarContainer.offsetWidth,oe=t.config.position.split(" "),Se=oe[0],He=oe.length>1?oe[1]:null,Pe=g.getBoundingClientRect(),Ke=window.innerHeight-Pe.bottom,De=Se==="above"||Se!=="below"&&Ke<F&&Pe.top>F,A=window.pageYOffset+Pe.top+(De?-F-2:g.offsetHeight+2);if(rn(t.calendarContainer,"arrowTop",!De),rn(t.calendarContainer,"arrowBottom",De),!t.config.inline){var H=window.pageXOffset+Pe.left,Q=!1,q=!1;He==="center"?(H-=(U-Pe.width)/2,Q=!0):He==="right"&&(H-=U-Pe.width,q=!0),rn(t.calendarContainer,"arrowLeft",!Q&&!q),rn(t.calendarContainer,"arrowCenter",Q),rn(t.calendarContainer,"arrowRight",q);var ve=window.document.body.offsetWidth-(window.pageXOffset+Pe.right),ye=H+U>window.document.body.offsetWidth,T=ve+U>window.document.body.offsetWidth;if(rn(t.calendarContainer,"rightMost",ye),!t.config.static)if(t.calendarContainer.style.top=A+"px",!ye)t.calendarContainer.style.left=H+"px",t.calendarContainer.style.right="auto";else if(!T)t.calendarContainer.style.left="auto",t.calendarContainer.style.right=ve+"px";else{var Ne=te();if(Ne===void 0)return;var ze=window.document.body.offsetWidth,Ee=Math.max(0,ze/2-U/2),ke=".flatpickr-calendar.centerMost:before",We=".flatpickr-calendar.centerMost:after",ft=Ne.cssRules.length,st="{left:"+Pe.left+"px;right:auto;}";rn(t.calendarContainer,"rightMost",!1),rn(t.calendarContainer,"centerMost",!0),Ne.insertRule(ke+","+We+st,ft),t.calendarContainer.style.left=Ee+"px",t.calendarContainer.style.right="auto"}}}}function te(){for(var h=null,g=0;g<document.styleSheets.length;g++){var F=document.styleSheets[g];if(F.cssRules){try{F.cssRules}catch{continue}h=F;break}}return h??lt()}function lt(){var h=document.createElement("style");return document.head.appendChild(h),h.sheet}function dt(){t.config.noCalendar||t.isMobile||(de(),W(),ae())}function Tt(){t._input.focus(),window.navigator.userAgent.indexOf("MSIE")!==-1||navigator.msMaxTouchPoints!==void 0?setTimeout(t.close,0):t.close()}function bt(h){h.preventDefault(),h.stopPropagation();var g=function(A){return A.classList&&A.classList.contains("flatpickr-day")&&!A.classList.contains("flatpickr-disabled")&&!A.classList.contains("notAllowed")},F=th(gn(h),g);if(F!==void 0){var U=F,oe=t.latestSelectedDateObj=new Date(U.dateObj.getTime()),Se=(oe.getMonth()<t.currentMonth||oe.getMonth()>t.currentMonth+t.config.showMonths-1)&&t.config.mode!=="range";if(t.selectedDateElem=U,t.config.mode==="single")t.selectedDates=[oe];else if(t.config.mode==="multiple"){var He=w(oe);He?t.selectedDates.splice(parseInt(He),1):t.selectedDates.push(oe)}else t.config.mode==="range"&&(t.selectedDates.length===2&&t.clear(!1,!1),t.latestSelectedDateObj=oe,t.selectedDates.push(oe),vn(oe,t.selectedDates[0],!0)!==0&&t.selectedDates.sort(function(A,H){return A.getTime()-H.getTime()}));if(C(),Se){var Pe=t.currentYear!==oe.getFullYear();t.currentYear=oe.getFullYear(),t.currentMonth=oe.getMonth(),Pe&&(Je("onYearChange"),de()),Je("onMonthChange")}if(W(),ae(),$e(),!Se&&t.config.mode!=="range"&&t.config.showMonths===1?D(U):t.selectedDateElem!==void 0&&t.hourElement===void 0&&t.selectedDateElem&&t.selectedDateElem.focus(),t.hourElement!==void 0&&t.hourElement!==void 0&&t.hourElement.focus(),t.config.closeOnSelect){var Ke=t.config.mode==="single"&&!t.config.enableTime,De=t.config.mode==="range"&&t.selectedDates.length===2&&!t.config.enableTime;(Ke||De)&&Tt()}E()}}var X={locale:[Ie,ge],showMonths:[me,u,ue],minDate:[m],maxDate:[m],positionElement:[ut],clickOpens:[function(){t.config.clickOpens===!0?(S(t._input,"focus",t.open),S(t._input,"click",t.open)):(t._input.removeEventListener("focus",t.open),t._input.removeEventListener("click",t.open))}]};function le(h,g){if(h!==null&&typeof h=="object"){Object.assign(t.config,h);for(var F in h)X[F]!==void 0&&X[F].forEach(function(U){return U()})}else t.config[h]=g,X[h]!==void 0?X[h].forEach(function(U){return U()}):Jl.indexOf(h)>-1&&(t.config[h]=Xl(g));t.redraw(),$e(!0)}function Ce(h,g){var F=[];if(h instanceof Array)F=h.map(function(U){return t.parseDate(U,g)});else if(h instanceof Date||typeof h=="number")F=[t.parseDate(h,g)];else if(typeof h=="string")switch(t.config.mode){case"single":case"time":F=[t.parseDate(h,g)];break;case"multiple":F=h.split(t.config.conjunction).map(function(U){return t.parseDate(U,g)});break;case"range":F=h.split(t.l10n.rangeSeparator).map(function(U){return t.parseDate(U,g)});break}else t.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(h)));t.selectedDates=t.config.allowInvalidPreload?F:F.filter(function(U){return U instanceof Date&&Fe(U,!1)}),t.config.mode==="range"&&t.selectedDates.sort(function(U,oe){return U.getTime()-oe.getTime()})}function Ve(h,g,F){if(g===void 0&&(g=!1),F===void 0&&(F=t.config.dateFormat),h!==0&&!h||h instanceof Array&&h.length===0)return t.clear(g);Ce(h,F),t.latestSelectedDateObj=t.selectedDates[t.selectedDates.length-1],t.redraw(),m(void 0,g),b(),t.selectedDates.length===0&&t.clear(!1),$e(g),g&&Je("onChange")}function et(h){return h.slice().map(function(g){return typeof g=="string"||typeof g=="number"||g instanceof Date?t.parseDate(g,void 0,!0):g&&typeof g=="object"&&g.from&&g.to?{from:t.parseDate(g.from,void 0),to:t.parseDate(g.to,void 0)}:g}).filter(function(g){return g})}function tt(){t.selectedDates=[],t.now=t.parseDate(t.config.now)||new Date;var h=t.config.defaultDate||((t.input.nodeName==="INPUT"||t.input.nodeName==="TEXTAREA")&&t.input.placeholder&&t.input.value===t.input.placeholder?null:t.input.value);h&&Ce(h,t.config.dateFormat),t._initialDate=t.selectedDates.length>0?t.selectedDates[0]:t.config.minDate&&t.config.minDate.getTime()>t.now.getTime()?t.config.minDate:t.config.maxDate&&t.config.maxDate.getTime()<t.now.getTime()?t.config.maxDate:t.now,t.currentYear=t._initialDate.getFullYear(),t.currentMonth=t._initialDate.getMonth(),t.selectedDates.length>0&&(t.latestSelectedDateObj=t.selectedDates[0]),t.config.minTime!==void 0&&(t.config.minTime=t.parseDate(t.config.minTime,"H:i")),t.config.maxTime!==void 0&&(t.config.maxTime=t.parseDate(t.config.maxTime,"H:i")),t.minDateHasTime=!!t.config.minDate&&(t.config.minDate.getHours()>0||t.config.minDate.getMinutes()>0||t.config.minDate.getSeconds()>0),t.maxDateHasTime=!!t.config.maxDate&&(t.config.maxDate.getHours()>0||t.config.maxDate.getMinutes()>0||t.config.maxDate.getSeconds()>0)}function yt(){if(t.input=Z(),!t.input){t.config.errorHandler(new Error("Invalid input element specified"));return}t.input._type=t.input.type,t.input.type="text",t.input.classList.add("flatpickr-input"),t._input=t.input,t.config.altInput&&(t.altInput=pt(t.input.nodeName,t.config.altInputClass),t._input=t.altInput,t.altInput.placeholder=t.input.placeholder,t.altInput.disabled=t.input.disabled,t.altInput.required=t.input.required,t.altInput.tabIndex=t.input.tabIndex,t.altInput.type="text",t.input.setAttribute("type","hidden"),!t.config.static&&t.input.parentNode&&t.input.parentNode.insertBefore(t.altInput,t.input.nextSibling)),t.config.allowInput||t._input.setAttribute("readonly","readonly"),ut()}function ut(){t._positionElement=t.config.positionElement||t._input}function Pt(){var h=t.config.enableTime?t.config.noCalendar?"time":"datetime-local":"date";t.mobileInput=pt("input",t.input.className+" flatpickr-mobile"),t.mobileInput.tabIndex=1,t.mobileInput.type=h,t.mobileInput.disabled=t.input.disabled,t.mobileInput.required=t.input.required,t.mobileInput.placeholder=t.input.placeholder,t.mobileFormatStr=h==="datetime-local"?"Y-m-d\\TH:i:S":h==="date"?"Y-m-d":"H:i:S",t.selectedDates.length>0&&(t.mobileInput.defaultValue=t.mobileInput.value=t.formatDate(t.selectedDates[0],t.mobileFormatStr)),t.config.minDate&&(t.mobileInput.min=t.formatDate(t.config.minDate,"Y-m-d")),t.config.maxDate&&(t.mobileInput.max=t.formatDate(t.config.maxDate,"Y-m-d")),t.input.getAttribute("step")&&(t.mobileInput.step=String(t.input.getAttribute("step"))),t.input.type="hidden",t.altInput!==void 0&&(t.altInput.type="hidden");try{t.input.parentNode&&t.input.parentNode.insertBefore(t.mobileInput,t.input.nextSibling)}catch{}S(t.mobileInput,"change",function(g){t.setDate(gn(g).value,!1,t.mobileFormatStr),Je("onChange"),Je("onClose")})}function Ut(h){if(t.isOpen===!0)return t.close();t.open(h)}function Je(h,g){if(t.config!==void 0){var F=t.config[h];if(F!==void 0&&F.length>0)for(var U=0;F[U]&&U<F.length;U++)F[U](t.selectedDates,t.input.value,t,g);h==="onChange"&&(t.input.dispatchEvent(f("change")),t.input.dispatchEvent(f("input")))}}function f(h){var g=document.createEvent("Event");return g.initEvent(h,!0,!0),g}function w(h){for(var g=0;g<t.selectedDates.length;g++){var F=t.selectedDates[g];if(F instanceof Date&&vn(F,h)===0)return""+g}return!1}function z(h){return t.config.mode!=="range"||t.selectedDates.length<2?!1:vn(h,t.selectedDates[0])>=0&&vn(h,t.selectedDates[1])<=0}function W(){t.config.noCalendar||t.isMobile||!t.monthNav||(t.yearElements.forEach(function(h,g){var F=new Date(t.currentYear,t.currentMonth,1);F.setMonth(t.currentMonth+g),t.config.showMonths>1||t.config.monthSelectorType==="static"?t.monthElements[g].textContent=Xi(F.getMonth(),t.config.shorthandCurrentMonth,t.l10n)+" ":t.monthsDropdownContainer.value=F.getMonth().toString(),h.value=F.getFullYear().toString()}),t._hidePrevMonthArrow=t.config.minDate!==void 0&&(t.currentYear===t.config.minDate.getFullYear()?t.currentMonth<=t.config.minDate.getMonth():t.currentYear<t.config.minDate.getFullYear()),t._hideNextMonthArrow=t.config.maxDate!==void 0&&(t.currentYear===t.config.maxDate.getFullYear()?t.currentMonth+1>t.config.maxDate.getMonth():t.currentYear>t.config.maxDate.getFullYear()))}function Le(h){var g=h||(t.config.altInput?t.config.altFormat:t.config.dateFormat);return t.selectedDates.map(function(F){return t.formatDate(F,g)}).filter(function(F,U,oe){return t.config.mode!=="range"||t.config.enableTime||oe.indexOf(F)===U}).join(t.config.mode!=="range"?t.config.conjunction:t.l10n.rangeSeparator)}function $e(h){h===void 0&&(h=!0),t.mobileInput!==void 0&&t.mobileFormatStr&&(t.mobileInput.value=t.latestSelectedDateObj!==void 0?t.formatDate(t.latestSelectedDateObj,t.mobileFormatStr):""),t.input.value=Le(t.config.dateFormat),t.altInput!==void 0&&(t.altInput.value=Le(t.config.altFormat)),h!==!1&&Je("onValueUpdate")}function I(h){var g=gn(h),F=t.prevMonthNav.contains(g),U=t.nextMonthNav.contains(g);F||U?Y(F?-1:1):t.yearElements.indexOf(g)>=0?g.select():g.classList.contains("arrowUp")?t.changeYear(t.currentYear+1):g.classList.contains("arrowDown")&&t.changeYear(t.currentYear-1)}function K(h){h.preventDefault();var g=h.type==="keydown",F=gn(h),U=F;t.amPM!==void 0&&F===t.amPM&&(t.amPM.textContent=t.l10n.amPM[kn(t.amPM.textContent===t.l10n.amPM[0])]);var oe=parseFloat(U.getAttribute("min")),Se=parseFloat(U.getAttribute("max")),He=parseFloat(U.getAttribute("step")),Pe=parseInt(U.value,10),Ke=h.delta||(g?h.which===38?1:-1:0),De=Pe+He*Ke;if(typeof U.value<"u"&&U.value.length===2){var A=U===t.hourElement,H=U===t.minuteElement;De<oe?(De=Se+De+kn(!A)+(kn(A)&&kn(!t.amPM)),H&&j(void 0,-1,t.hourElement)):De>Se&&(De=U===t.hourElement?De-Se-kn(!t.amPM):oe,H&&j(void 0,1,t.hourElement)),t.amPM&&A&&(He===1?De+Pe===23:Math.abs(De-Pe)>He)&&(t.amPM.textContent=t.l10n.amPM[kn(t.amPM.textContent===t.l10n.amPM[0])]),U.value=dn(De)}}return a(),t}function ws(e,n){for(var t=Array.prototype.slice.call(e).filter(function(l){return l instanceof HTMLElement}),s=[],a=0;a<t.length;a++){var i=t[a];try{if(i.getAttribute("data-fp-omit")!==null)continue;i._flatpickr!==void 0&&(i._flatpickr.destroy(),i._flatpickr=void 0),i._flatpickr=r0(i,n||{}),s.push(i._flatpickr)}catch(l){console.error(l)}}return s.length===1?s[0]:s}typeof HTMLElement<"u"&&typeof HTMLCollection<"u"&&typeof NodeList<"u"&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(e){return ws(this,e)},HTMLElement.prototype.flatpickr=function(e){return ws([this],e)});var Lt=function(e,n){return typeof e=="string"?ws(window.document.querySelectorAll(e),n):e instanceof Node?ws([e],n):ws(e,n)};Lt.defaultConfig={};Lt.l10ns={en:Xt({},Da),default:Xt({},Da)};Lt.localize=function(e){Lt.l10ns.default=Xt(Xt({},Lt.l10ns.default),e)};Lt.setDefaults=function(e){Lt.defaultConfig=Xt(Xt({},Lt.defaultConfig),e)};Lt.parseDate=ac({});Lt.formatDate=nh({});Lt.compareDates=vn;typeof jQuery<"u"&&typeof jQuery.fn<"u"&&(jQuery.fn.flatpickr=function(e){return ws(this,e)});Date.prototype.fp_incr=function(e){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+(typeof e=="string"?parseInt(e,10):e))};typeof window<"u"&&(window.flatpickr=Lt);const s0=Object.freeze(Object.defineProperty({__proto__:null,default:Lt},Symbol.toStringTag,{value:"Module"})),a0=Lh(s0);(function(e){function n(Y){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?n=function(re){return typeof re}:n=function(re){return re&&typeof Symbol=="function"&&re.constructor===Symbol&&re!==Symbol.prototype?"symbol":typeof re},n(Y)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=u(o),s=i(Jx),a=i(a0);function i(Y){return Y&&Y.__esModule?Y:{default:Y}}function l(){if(typeof WeakMap!="function")return null;var Y=new WeakMap;return l=function(){return Y},Y}function u(Y){if(Y&&Y.__esModule)return Y;if(Y===null||n(Y)!=="object"&&typeof Y!="function")return{default:Y};var ee=l();if(ee&&ee.has(Y))return ee.get(Y);var re={},ce=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var pe in Y)if(Object.prototype.hasOwnProperty.call(Y,pe)){var Ae=ce?Object.getOwnPropertyDescriptor(Y,pe):null;Ae&&(Ae.get||Ae.set)?Object.defineProperty(re,pe,Ae):re[pe]=Y[pe]}return re.default=Y,ee&&ee.set(Y,re),re}function d(Y){return b(Y)||C(Y)||_(Y)||x()}function x(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _(Y,ee){if(Y){if(typeof Y=="string")return L(Y,ee);var re=Object.prototype.toString.call(Y).slice(8,-1);if(re==="Object"&&Y.constructor&&(re=Y.constructor.name),re==="Map"||re==="Set")return Array.from(Y);if(re==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(re))return L(Y,ee)}}function C(Y){if(typeof Symbol<"u"&&Symbol.iterator in Object(Y))return Array.from(Y)}function b(Y){if(Array.isArray(Y))return L(Y)}function L(Y,ee){(ee==null||ee>Y.length)&&(ee=Y.length);for(var re=0,ce=new Array(ee);re<ee;re++)ce[re]=Y[re];return ce}function y(){return y=Object.assign||function(Y){for(var ee=1;ee<arguments.length;ee++){var re=arguments[ee];for(var ce in re)Object.prototype.hasOwnProperty.call(re,ce)&&(Y[ce]=re[ce])}return Y},y.apply(this,arguments)}function S(Y,ee){if(Y==null)return{};var re=E(Y,ee),ce,pe;if(Object.getOwnPropertySymbols){var Ae=Object.getOwnPropertySymbols(Y);for(pe=0;pe<Ae.length;pe++)ce=Ae[pe],!(ee.indexOf(ce)>=0)&&Object.prototype.propertyIsEnumerable.call(Y,ce)&&(re[ce]=Y[ce])}return re}function E(Y,ee){if(Y==null)return{};var re={},ce=Object.keys(Y),pe,Ae;for(Ae=0;Ae<ce.length;Ae++)pe=ce[Ae],!(ee.indexOf(pe)>=0)&&(re[pe]=Y[pe]);return re}function p(Y,ee){var re=Object.keys(Y);if(Object.getOwnPropertySymbols){var ce=Object.getOwnPropertySymbols(Y);ee&&(ce=ce.filter(function(pe){return Object.getOwnPropertyDescriptor(Y,pe).enumerable})),re.push.apply(re,ce)}return re}function m(Y){for(var ee=1;ee<arguments.length;ee++){var re=arguments[ee]!=null?arguments[ee]:{};ee%2?p(Object(re),!0).forEach(function(ce){de(Y,ce,re[ce])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Y,Object.getOwnPropertyDescriptors(re)):p(Object(re)).forEach(function(ce){Object.defineProperty(Y,ce,Object.getOwnPropertyDescriptor(re,ce))})}return Y}function v(Y,ee){if(!(Y instanceof ee))throw new TypeError("Cannot call a class as a function")}function j(Y,ee){for(var re=0;re<ee.length;re++){var ce=ee[re];ce.enumerable=ce.enumerable||!1,ce.configurable=!0,"value"in ce&&(ce.writable=!0),Object.defineProperty(Y,ce.key,ce)}}function P(Y,ee,re){return ee&&j(Y.prototype,ee),Y}function k(Y,ee){if(typeof ee!="function"&&ee!==null)throw new TypeError("Super expression must either be null or a function");Y.prototype=Object.create(ee&&ee.prototype,{constructor:{value:Y,writable:!0,configurable:!0}}),ee&&D(Y,ee)}function D(Y,ee){return D=Object.setPrototypeOf||function(ce,pe){return ce.__proto__=pe,ce},D(Y,ee)}function M(Y){var ee=R();return function(){var ce=ae(Y),pe;if(ee){var Ae=ae(this).constructor;pe=Reflect.construct(ce,arguments,Ae)}else pe=ce.apply(this,arguments);return J(this,pe)}}function J(Y,ee){return ee&&(n(ee)==="object"||typeof ee=="function")?ee:se(Y)}function se(Y){if(Y===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Y}function R(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ae(Y){return ae=Object.setPrototypeOf?Object.getPrototypeOf:function(re){return re.__proto__||Object.getPrototypeOf(re)},ae(Y)}function de(Y,ee,re){return ee in Y?Object.defineProperty(Y,ee,{value:re,enumerable:!0,configurable:!0,writable:!0}):Y[ee]=re,Y}var be=["onChange","onOpen","onClose","onMonthChange","onYearChange","onReady","onValueUpdate","onDayCreate"],me=s.default.oneOfType([s.default.func,s.default.arrayOf(s.default.func)]),he=["onCreate","onDestroy"],we=s.default.func,ue=function(Y){k(re,Y);var ee=M(re);function re(){var ce;v(this,re);for(var pe=arguments.length,Ae=new Array(pe),_e=0;_e<pe;_e++)Ae[_e]=arguments[_e];return ce=ee.call.apply(ee,[this].concat(Ae)),de(se(ce),"createFlatpickrInstance",function(){var Fe=m({onClose:function(){ce.node.blur&&ce.node.blur()}},ce.props.options);Fe=ge(Fe,ce.props),ce.flatpickr=(0,a.default)(ce.node,Fe),ce.props.hasOwnProperty("value")&&ce.flatpickr.setDate(ce.props.value,!1);var Te=ce.props.onCreate;Te&&Te(ce.flatpickr)}),de(se(ce),"destroyFlatpickrInstance",function(){var Fe=ce.props.onDestroy;Fe&&Fe(ce.flatpickr),ce.flatpickr.destroy(),ce.flatpickr=null}),de(se(ce),"handleNodeChange",function(Fe){ce.node=Fe,ce.flatpickr&&(ce.destroyFlatpickrInstance(),ce.createFlatpickrInstance())}),ce}return P(re,[{key:"componentDidUpdate",value:function(pe){var Ae=this.props.options,_e=pe.options;Ae=ge(Ae,this.props),_e=ge(_e,pe);for(var Fe=Object.getOwnPropertyNames(Ae),Te=Fe.length-1;Te>=0;Te--){var Ge=Fe[Te],Ye=Ae[Ge];Ye!==_e[Ge]&&(be.indexOf(Ge)!==-1&&!Array.isArray(Ye)&&(Ye=[Ye]),this.flatpickr.set(Ge,Ye))}this.props.hasOwnProperty("value")&&!(this.props.value&&Array.isArray(this.props.value)&&pe.value&&Array.isArray(pe.value)&&this.props.value.every(function(Qe,G){pe[G]}))&&this.props.value!==pe.value&&this.flatpickr.setDate(this.props.value,!1)}},{key:"componentDidMount",value:function(){this.createFlatpickrInstance()}},{key:"componentWillUnmount",value:function(){this.destroyFlatpickrInstance()}},{key:"render",value:function(){var pe=this.props,Ae=pe.options,_e=pe.defaultValue,Fe=pe.value,Te=pe.children,Ge=pe.render,Ye=S(pe,["options","defaultValue","value","children","render"]);return be.forEach(function(Qe){delete Ye[Qe]}),he.forEach(function(Qe){delete Ye[Qe]}),Ge?Ge(m(m({},Ye),{},{defaultValue:_e,value:Fe}),this.handleNodeChange):Ae.wrap?t.default.createElement("div",y({},Ye,{ref:this.handleNodeChange}),Te):t.default.createElement("input",y({},Ye,{defaultValue:_e,ref:this.handleNodeChange}))}}]),re}(t.Component);de(ue,"propTypes",{defaultValue:s.default.string,options:s.default.object,onChange:me,onOpen:me,onClose:me,onMonthChange:me,onYearChange:me,onReady:me,onValueUpdate:me,onDayCreate:me,onCreate:we,onDestroy:we,value:s.default.oneOfType([s.default.string,s.default.array,s.default.object,s.default.number]),children:s.default.node,className:s.default.string,render:s.default.func}),de(ue,"defaultProps",{options:{}});function ge(Y,ee){var re=m({},Y);return be.forEach(function(ce){if(ee.hasOwnProperty(ce)){var pe;re[ce]&&!Array.isArray(re[ce])?re[ce]=[re[ce]]:re[ce]||(re[ce]=[]);var Ae=Array.isArray(ee[ce])?ee[ce]:[ee[ce]];(pe=re[ce]).push.apply(pe,d(Ae))}}),re}var fe=ue;e.default=fe})(Jp);const Dt=mf(Jp),Mr=()=>Re("/events/airfields"),Zi=e=>Re("/events/airfields",{method:"POST",body:JSON.stringify(e)}),i0=e=>Re(`/events/airfields/${e}`),l0=(e,n)=>Re(`/events/airfields/${e}`,{method:"PUT",body:JSON.stringify(n)}),o0=e=>Re(`/events/airfields/${e}`,{method:"DELETE"}),Cn=e=>!!e&&e.trim().length>0,li=e=>e!=null&&Number.isFinite(e),c0=e=>e!=null,rh=e=>{const n=e.primary_landing_area||{};return(e.sequence??0)>0&&Cn(e.name)&&Cn(e.coordinates)&&li(e.elevation)&&Cn(e.scheduled_at)&&li(e.takeoff_airfield_id)&&li(e.distance_by_air)&&li(e.distance_by_road)&&Cn(e.jumprun)&&Cn(n.name)&&Cn(n.description)&&Cn(n.size)&&Cn(n.obstacles)&&Cn(e.risk_assessment)&&Cn(e.safety_precautions)&&Cn(e.minimum_requirements)&&Cn(e.hospital)&&c0(e.rescue_boat)},el=["Participant","Skydiver","Staff","Ground Crew","Jump Master","Jump Leader","Photo","Pilot","COP","Driver"],id=e=>Math.round(e*3.28084),tl=e=>{if(e==null||Number.isNaN(e))return"";const n=id(e);return`${e} m / ${n} ft`},Ta=()=>Re("/logistics/transports"),sh=e=>Re(`/logistics/transports/${e}`),ah=e=>Re("/logistics/transports",{method:"POST",body:JSON.stringify(e)}),ih=(e,n)=>Re(`/logistics/transports/${e}`,{method:"PUT",body:JSON.stringify(n)}),d0=e=>Re(`/logistics/transports/${e}`,{method:"DELETE"}),Pa=()=>Re("/logistics/ground-crews"),lh=e=>Re(`/logistics/ground-crews/${e}`),oh=e=>Re("/logistics/ground-crews",{method:"POST",body:JSON.stringify(e)}),ch=(e,n)=>Re(`/logistics/ground-crews/${e}`,{method:"PUT",body:JSON.stringify(n)}),u0=e=>Re(`/logistics/ground-crews/${e}`,{method:"DELETE"}),Ra=()=>Re("/logistics/vehicles"),Zn=e=>Re("/logistics/vehicles",{method:"POST",body:JSON.stringify(e)}),f0=e=>Re(`/logistics/vehicles/${e}`),m0=(e,n)=>Re(`/logistics/vehicles/${e}`,{method:"PUT",body:JSON.stringify(n)}),p0=e=>Re(`/logistics/vehicles/${e}`,{method:"DELETE"}),Hn=()=>Re("/logistics/others"),dh=e=>Re(`/logistics/others/${e}`),ld=e=>Re("/logistics/others",{method:"POST",body:JSON.stringify(e)}),uh=(e,n)=>Re(`/logistics/others/${e}`,{method:"PUT",body:JSON.stringify(n)}),h0=e=>Re(`/logistics/others/${e}`,{method:"DELETE"}),Bn=()=>Re("/logistics/meals"),fh=e=>Re(`/logistics/meals/${e}`),g0=e=>Re("/logistics/meals",{method:"POST",body:JSON.stringify(e)}),mh=(e,n)=>Re(`/logistics/meals/${e}`,{method:"PUT",body:JSON.stringify(n)}),v0=e=>Re(`/logistics/meals/${e}`,{method:"DELETE"}),At=e=>!!e&&e.trim().length>0,y0=[{value:"draft",label:"Draft"},{value:"planned",label:"Planned"},{value:"launched",label:"Launched"},{value:"scouted",label:"Scouted"},{value:"live",label:"Live"},{value:"past",label:"Past"}],x0=e=>sd(e),ph=e=>Ux(e),Gu=e=>zx(e),Qu=e=>Qp(e),Ju=e=>{const n=t=>String(t).padStart(2,"0");return`${e.getFullYear()}-${n(e.getMonth()+1)}-${n(e.getDate())}`},Xu=e=>e?sd(e).replace("T"," "):"",rs=e=>e?Wn(e,{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1}):"",qs=e=>e.replace(/^#\s*\d+\s*/,"").trim().toLowerCase(),Zu=()=>({name:"",description:"",size:"",obstacles:""}),nl=e=>({name:(e==null?void 0:e.name)||"",description:(e==null?void 0:e.description)||"",size:(e==null?void 0:e.size)||"",obstacles:(e==null?void 0:e.obstacles)||""}),hh=e=>Array.isArray(e)?e.map(n=>({name:n.name||"",telephone:n.telephone||"",email:n.email||""})):[],j0=e=>e.filter(n=>{var i,l,u;const t=(i=n.name)==null?void 0:i.trim(),s=(l=n.telephone)==null?void 0:l.trim(),a=(u=n.email)==null?void 0:u.trim();return!!(t||s||a)}),ef=e=>{var n,t,s,a;return{name:((n=e==null?void 0:e.name)==null?void 0:n.trim())||"",description:((t=e==null?void 0:e.description)==null?void 0:t.trim())||"",size:((s=e==null?void 0:e.size)==null?void 0:s.trim())||"",obstacles:((a=e==null?void 0:e.obstacles)==null?void 0:a.trim())||""}},_0=e=>j0(e).map(n=>({name:n.name.trim(),telephone:n.telephone.trim(),email:n.email.trim()})),tf=e=>{const n=Ze(e.starts_at);n&&n.setUTCHours(9,0,0,0);const t=n?ph(n):"";return(Array.isArray(e.innhopps)?e.innhopps:[]).map((s,a)=>({id:s.id,sequence:s.sequence??a+1,name:s.name||"",coordinates:s.coordinates||"",elevation:s.elevation??void 0,takeoff_airfield_id:s.takeoff_airfield_id||void 0,scheduled_at:x0(s.scheduled_at)||t,notes:s.notes||"",reason_for_choice:s.reason_for_choice||"",adjust_altimeter_aad:s.adjust_altimeter_aad||"",notam:s.notam||"",distance_by_air:s.distance_by_air??void 0,distance_by_road:s.distance_by_road??void 0,primary_landing_area:nl(s.primary_landing_area),secondary_landing_area:nl(s.secondary_landing_area),risk_assessment:s.risk_assessment||"",safety_precautions:s.safety_precautions||"",jumprun:s.jumprun||"",hospital:s.hospital||"",rescue_boat:s.rescue_boat??void 0,minimum_requirements:s.minimum_requirements||"",land_owners:hh(s.land_owners),land_owner_permission:s.land_owner_permission??void 0,image_files:Array.isArray(s.image_files)?s.image_files.filter(i=>!!(i!=null&&i.data)):[]}))},N0=()=>{const{eventId:e}=Mn(),n=vt(),t=Gt(),s=o.useRef(!1),[a,i]=o.useState(null),[l,u]=o.useState([]),[d,x]=o.useState([]),[_,C]=o.useState([]),[b,L]=o.useState([]),[y,S]=o.useState([]),[E,p]=o.useState([]),[m,v]=o.useState(""),[j,P]=o.useState(""),[k,D]=o.useState(""),[M,J]=o.useState({season_id:"",name:"",location:"",slots:"",status:"draft",starts_at:"",ends_at:""}),[se,R]=o.useState({full_name:"",email:"",phone:"",experience_level:"",emergency_contact:"",roles:["Participant","Skydiver"]}),[ae,de]=o.useState({full_name:"",email:"",phone:"",experience_level:"",emergency_contact:"",roles:["Participant","Staff"]}),[be,me]=o.useState(!1),[he,we]=o.useState(!1),[ue,ge]=o.useState(!1),[fe,Y]=o.useState(!1),[ee,re]=o.useState(!1),[ce,pe]=o.useState(!1),[Ae,_e]=o.useState({}),[Fe,Te]=o.useState({}),[Ge,Ye]=o.useState({}),[Qe,G]=o.useState([]),[O,$]=o.useState(!0),[V,Z]=o.useState(null),[Ie,Ue]=o.useState(null),[te,lt]=o.useState(!1),[dt,Tt]=o.useState(!1),[bt,X]=o.useState(!1),le={boxShadow:"inset 0 0 0 2px #3b82f6",borderRadius:"8px"},Ce={padding:"0.4rem 0.5rem",borderRadius:"8px"},[Ve,et]=o.useState(!1),[tt,yt]=o.useState(""),ut=`primary ${Ve?"saved":""}`,Pt=te?"Saving":Ve?"Saved":"Save",Ut=o.useCallback((c,N,B,ne)=>{const ie=[...N].sort((Oe,mt)=>Oe-mt),xe=[...B].sort((Oe,mt)=>Oe-mt);return JSON.stringify({form:c,participants:ie,airfields:xe,innhopps:ne})},[]),Je=o.useMemo(()=>Ut(M,y,E,Qe),[Ut,M,y,E,Qe]),[f,w]=o.useState({name:"",elevation:"",coordinates:"",description:""}),[z,W]=o.useState([]),[Le,$e]=o.useState(!1),[I,K]=o.useState({name:"",capacity:"",coordinates:"",booked:!1,check_in_at:"",check_out_at:"",notes:""}),[h,g]=o.useState([]),[F,U]=o.useState([]),[oe,Se]=o.useState([]),[He,Pe]=o.useState([]),[Ke,De]=o.useState(!1),[A,H]=o.useState({pickup_location:"",destination:"",passenger_count:"",scheduled_at:""}),[Q,q]=o.useState(!1),[ve,ye]=o.useState({pickup_location:"",destination:"",passenger_count:"",scheduled_at:""}),[T,Ne]=o.useState(!1),[ze,Ee]=o.useState({name:"",coordinates:"",scheduled_at:"",description:"",notes:""}),ke=!At(f.coordinates),We=!At(I.coordinates),ft=!At(ze.coordinates),st=o.useMemo(()=>{const c=Array.isArray(z)?[...z]:[],N=B=>{const ne=B.check_in_at||B.check_out_at||B.created_at||"",ie=Ze(ne),xe=ie?ie.getTime():Number.POSITIVE_INFINITY;return Number.isNaN(xe)?Number.POSITIVE_INFINITY:xe};return c.sort((B,ne)=>{const ie=N(B)-N(ne);return ie!==0?ie:(B.name||"").localeCompare(ne.name||"")})},[z]),ct=o.useMemo(()=>(Array.isArray(He)?[...He]:[]).sort((N,B)=>{var xe,Oe;const ne=((xe=Ze(N.scheduled_at))==null?void 0:xe.getTime())??Number.POSITIVE_INFINITY,ie=((Oe=Ze(B.scheduled_at))==null?void 0:Oe.getTime())??Number.POSITIVE_INFINITY;return ne!==ie?ne-ie:(N.name||"").localeCompare(B.name||"")}),[He]),at=o.useCallback(c=>{var Oe;const N=qs(c||"");if(!N)return null;const B=(Oe=a==null?void 0:a.innhopps)==null?void 0:Oe.find(mt=>qs(mt.name)===N);if(B!=null&&B.coordinates)return B.coordinates;const ne=z.find(mt=>qs(mt.name||"")===N);if(ne!=null&&ne.coordinates)return ne.coordinates;const ie=oe.find(mt=>qs(mt.name||"")===N);if(ie!=null&&ie.coordinates)return ie.coordinates;const xe=_.find(mt=>qs(mt.name||"")===N);return xe!=null&&xe.coordinates?xe.coordinates:null},[z,_,a==null?void 0:a.innhopps,oe]),[Xe,ht]=o.useState({details:!0,innhopps:!1,airfields:!1,participants:!1,staff:!1,accommodations:!1,transports:!1,groundCrews:!1,meals:!1,others:!1}),Sn=o.useRef(Xe),od=o.useRef(!1),[cn,cd]=o.useState(null),On=o.useCallback(()=>{if(e)try{sessionStorage.setItem(`event-detail-state:${e}`,JSON.stringify({openSections:Sn.current,scrollY:window.scrollY}))}catch{}},[e]);o.useEffect(()=>{Sn.current=Xe},[Xe]),o.useEffect(()=>{if(!cn)return;const c=setTimeout(()=>cd(null),1800);return()=>clearTimeout(c)},[cn]),o.useEffect(()=>{if(!e||od.current)return;const c=`event-detail-state:${e}`,N=sessionStorage.getItem(c);if(N)try{const ne=JSON.parse(N);ne!=null&&ne.openSections&&ht(ie=>({...ie,...ne.openSections})),typeof(ne==null?void 0:ne.scrollY)=="number"&&setTimeout(()=>window.scrollTo(0,ne.scrollY),0)}catch{}const B=sessionStorage.getItem(`event-detail-highlight:${e}`);return B&&(cd(B),sessionStorage.removeItem(`event-detail-highlight:${e}`)),od.current=!0,()=>{On()}},[e,On]),o.useEffect(()=>{if(!cn)return;let c=0;const N=setInterval(()=>{const B=document.getElementById(cn);B?(B.scrollIntoView({behavior:"smooth",block:"center"}),clearInterval(N)):c>10&&clearInterval(N),c+=1},120);return()=>clearInterval(N)},[cn,Qe,E,y,z,h,F,oe]),o.useEffect(()=>{var N;const c=(N=t.state)==null?void 0:N.copyInnhopp;!c||s.current||(G(B=>[...B,{id:void 0,sequence:(B.length||0)+1,name:c.name||"",coordinates:c.coordinates||"",elevation:c.elevation??void 0,takeoff_airfield_id:c.takeoff_airfield_id||void 0,scheduled_at:c.scheduled_at||"",notes:c.notes||"",reason_for_choice:c.reason_for_choice||"",adjust_altimeter_aad:c.adjust_altimeter_aad||"",notam:c.notam||"",distance_by_air:c.distance_by_air??void 0,distance_by_road:c.distance_by_road??void 0,primary_landing_area:nl(c.primary_landing_area),secondary_landing_area:nl(c.secondary_landing_area),risk_assessment:c.risk_assessment||"",safety_precautions:c.safety_precautions||"",jumprun:c.jumprun||"",hospital:c.hospital||"",rescue_boat:c.rescue_boat??void 0,minimum_requirements:c.minimum_requirements||"",land_owners:hh(c.land_owners),land_owner_permission:c.land_owner_permission??void 0,image_files:Array.isArray(c.image_files)?c.image_files.filter(ne=>!!(ne!=null&&ne.data)):[]}]),s.current=!0)},[t.state,s]);const Ft=c=>ht(N=>({...N,[c]:!N[c]})),vh=async()=>{if(e&&!(!A.pickup_location.trim()||!A.destination.trim()))try{const c=await ah({pickup_location:A.pickup_location.trim(),destination:A.destination.trim(),passenger_count:Number(A.passenger_count)||0,scheduled_at:A.scheduled_at||void 0,event_id:Number(e),vehicle_ids:[]});g(N=>[c,...N]),H({pickup_location:"",destination:"",passenger_count:"",scheduled_at:""}),De(!1)}catch(c){Z(c instanceof Error?c.message:"Failed to create transport")}},yh=async()=>{if(e&&!(!ve.pickup_location.trim()||!ve.destination.trim()))try{const c=await oh({pickup_location:ve.pickup_location.trim(),destination:ve.destination.trim(),passenger_count:Number(ve.passenger_count)||0,scheduled_at:ve.scheduled_at||void 0,event_id:Number(e),vehicle_ids:[]});U(N=>[c,...N]),ye({pickup_location:"",destination:"",passenger_count:"",scheduled_at:""}),q(!1)}catch(c){Z(c instanceof Error?c.message:"Failed to create ground crew")}};o.useEffect(()=>{let c=!1;return(async()=>{try{const B=await $t();!c&&Array.isArray(B)&&L(B)}catch{}})(),()=>{c=!0}},[]);const za=o.useMemo(()=>{const c=[],N=Array.isArray(a==null?void 0:a.innhopps)&&(a!=null&&a.innhopps.length)?a==null?void 0:a.innhopps.map(ne=>({value:`${ne.sequence?`#${ne.sequence} `:""}${ne.name||"Untitled innhopp"}`.trim(),label:`${ne.sequence?`#${ne.sequence} `:""}${ne.name||"Untitled innhopp"}`.trim()})):[];N.length&&c.push({label:"Innhopps",options:N});const B=Array.isArray(a==null?void 0:a.airfield_ids)?_.filter(ne=>a==null?void 0:a.airfield_ids.includes(ne.id)):[];return B.length&&c.push({label:"Airfields",options:B.map(ne=>({value:ne.name||`Airfield #${ne.id}`,label:ne.name||`Airfield #${ne.id}`}))}),z.length&&c.push({label:"Accommodations",options:z.map(ne=>({value:ne.name||`Accommodation #${ne.id}`,label:ne.name||`Accommodation #${ne.id}`}))}),oe.length&&c.push({label:"Other",options:oe.map(ne=>({value:ne.name||`Other #${ne.id}`,label:ne.name||`Other #${ne.id}`}))}),c},[z,_,a==null?void 0:a.airfield_ids,a==null?void 0:a.innhopps,oe]),xh=async()=>{if(e&&!(!ze.name.trim()||!ze.coordinates.trim()))try{const c=await ld({name:ze.name.trim(),coordinates:ze.coordinates.trim(),scheduled_at:ze.scheduled_at||void 0,description:ze.description.trim()||void 0,notes:ze.notes.trim()||void 0,event_id:Number(e)});Se(N=>[c,...N]),Ee({name:"",coordinates:"",scheduled_at:"",description:"",notes:""}),Ne(!1)}catch(c){Z(c instanceof Error?c.message:"Failed to create entry")}};o.useEffect(()=>{let c=!1;return(async()=>{if(e){$(!0),Ue(null);try{const B=await Xr(Number(e));if(c)return;i(B),G(tf(B)),S(Array.isArray(B.participant_ids)?B.participant_ids:[]),p(Array.isArray(B.airfield_ids)?B.airfield_ids:[]),J({season_id:String(B.season_id),name:B.name,location:B.location||"",slots:B.slots?String(B.slots):"",status:B.status,starts_at:Gu(B.starts_at),ends_at:Gu(B.ends_at)})}catch(B){c||Ue(B instanceof Error?B.message:"Failed to load event")}finally{c||$(!1)}}})(),()=>{c=!0}},[e]),o.useEffect(()=>{let c=!1;return(async()=>{if(e)try{const B=await ur(Number(e));c||W(Array.isArray(B)?B:[])}catch{c||W([])}})(),()=>{c=!0}},[e]),o.useEffect(()=>{let c=!1;return(async()=>{if(e)try{const[B,ne,ie,xe]=await Promise.all([Ta(),Pa(),Hn(),Bn()]);if(c)return;g(Array.isArray(B)?B.filter(Oe=>Oe.event_id===Number(e)):[]),U(Array.isArray(ne)?ne.filter(Oe=>Oe.event_id===Number(e)):[]),Se(Array.isArray(ie)?ie.filter(Oe=>Oe.event_id===Number(e)):[]),Pe(Array.isArray(xe)?xe.filter(Oe=>Oe.event_id===Number(e)):[])}catch{c||(g([]),U([]),Se([]),Pe([]))}})(),()=>{c=!0}},[e]),o.useEffect(()=>{let c=!1;return(async()=>{try{const B=await tr();c||u(Array.isArray(B)?B:[])}catch{}})(),()=>{c=!0}},[]),o.useEffect(()=>{let c=!1;return(async()=>{try{const B=await Zr();c||x(Array.isArray(B)?B:[])}catch{}})(),()=>{c=!0}},[]),o.useEffect(()=>{let c=!1;return(async()=>{try{const B=await Mr();c||C(Array.isArray(B)?B:[])}catch{}})(),()=>{c=!0}},[]),o.useEffect(()=>{Te(c=>{const N={...c};return Qe.forEach((B,ne)=>{B.takeoff_airfield_id&&(N[ne]=!0)}),N}),Ye(c=>{const N={...c};return Qe.forEach((B,ne)=>{if(B.takeoff_airfield_id){N[ne]="existing";const ie=_.find(xe=>xe.id===B.takeoff_airfield_id);ie&&_e(xe=>({...xe,[ne]:{name:ie.name,elevation:ie.elevation,coordinates:ie.coordinates,description:ie.description||""}}))}}),N})},[Qe,_]);const dd=c=>{var N;return((N=d.find(B=>B.id===c))==null?void 0:N.full_name)||`Participant #${c}`},jh=d.filter(c=>{const B=(Array.isArray(c.roles)?c.roles:[]).includes("Staff");return!y.includes(c.id)&&!B}).sort((c,N)=>c.full_name.localeCompare(N.full_name,void 0,{sensitivity:"base"})),_h=_.filter(c=>!E.includes(c.id)),ud=o.useMemo(()=>{const c=new Map;return _.forEach(N=>{const B=b.filter(ie=>Array.isArray(ie.airfield_ids)&&ie.airfield_ids.includes(N.id));(B.length?B.map(ie=>ie.location||"Location TBD"):["Unassigned location"]).forEach((ie,xe)=>{const Oe=ie||"Location TBD";c.has(Oe)||c.set(Oe,{label:Oe,options:[]}),c.get(Oe).options.push({key:`${N.id}-${xe}-${Oe}`,value:N.id,label:`${N.name}${N.elevation!=null?` (${N.elevation} m)`:""}`})})}),Array.from(c.values())},[_,b]);o.useEffect(()=>{Ve&&Je!==tt&&et(!1)},[Je,tt,Ve]);const Kn=async(c,N,B)=>{if(a){lt(!0),Z(null),et(!1);try{const ne={season_id:Number(M.season_id||a.season_id),name:M.name.trim()||a.name,location:M.location.trim()||void 0,slots:M.slots?Number(M.slots):a.slots||0,status:M.status,starts_at:Qu(M.starts_at)||a.starts_at,ends_at:M.ends_at?Qu(M.ends_at):void 0,airfield_ids:N,participant_ids:c,innhopps:(B??Qe).filter(Be=>Be.name.trim()!=="").map((Be,nn)=>{var pd,hd,gd,vd,yd,xd,jd,_d,Nd;return{sequence:Be.sequence||nn+1,name:Be.name.trim(),coordinates:(pd=Be.coordinates)==null?void 0:pd.trim(),elevation:Be.elevation,takeoff_airfield_id:Be.takeoff_airfield_id,scheduled_at:Be.scheduled_at?sd(Be.scheduled_at):"",notes:Be.notes,reason_for_choice:(hd=Be.reason_for_choice)==null?void 0:hd.trim(),adjust_altimeter_aad:(gd=Be.adjust_altimeter_aad)==null?void 0:gd.trim(),notam:(vd=Be.notam)==null?void 0:vd.trim(),distance_by_air:Be.distance_by_air,distance_by_road:Be.distance_by_road,primary_landing_area:ef(Be.primary_landing_area),secondary_landing_area:ef(Be.secondary_landing_area),risk_assessment:(yd=Be.risk_assessment)==null?void 0:yd.trim(),safety_precautions:(xd=Be.safety_precautions)==null?void 0:xd.trim(),jumprun:(jd=Be.jumprun)==null?void 0:jd.trim(),hospital:(_d=Be.hospital)==null?void 0:_d.trim(),rescue_boat:Be.rescue_boat,minimum_requirements:(Nd=Be.minimum_requirements)==null?void 0:Nd.trim(),land_owners:_0(Be.land_owners||[]),land_owner_permission:Be.land_owner_permission,image_files:(Be.image_files||[]).map(bl=>{var bd,Sd;return{name:((bd=bl.name)==null?void 0:bd.trim())||void 0,mime_type:((Sd=bl.mime_type)==null?void 0:Sd.trim())||void 0,data:bl.data}})}})},ie=await Hp(a.id,ne),xe=tf(ie),Oe=Array.isArray(ie.participant_ids)?ie.participant_ids:[],mt=Array.isArray(ie.airfield_ids)?ie.airfield_ids:[];i(ie),S(Oe),p(mt),G(xe),Z("Event updated"),yt(Ut(M,Oe,mt,xe)),et(!0)}catch(ne){Z(ne instanceof Error?ne.message:"Failed to update event"),et(!1)}finally{lt(!1)}}},Lr=async()=>{await Kn(y,E,Qe)},Nh=(c,N)=>{if(N==="__new__"){Te(ie=>({...ie,[c]:!0})),Ye(ie=>({...ie,[c]:"new"})),G(ie=>{const xe=[...ie];return xe[c]={...xe[c],takeoff_airfield_id:void 0},xe}),_e(ie=>({...ie,[c]:ie[c]||{name:"",elevation:0,coordinates:"",description:""}}));return}if(N===""){G(ie=>{const xe=[...ie];return xe[c]={...xe[c],takeoff_airfield_id:void 0},xe}),Te(ie=>{const xe={...ie};return delete xe[c],xe}),Ye(ie=>{const xe={...ie};return delete xe[c],xe});return}const B=Number(N);G(ie=>{const xe=[...ie];return xe[c]={...xe[c],takeoff_airfield_id:B||void 0},xe}),Te(ie=>{const xe={...ie};return delete xe[c],xe}),Ye(ie=>{const xe={...ie};return delete xe[c],xe});const ne=_.find(ie=>ie.id===B);ne&&_e(ie=>({...ie,[c]:{name:ne.name,elevation:ne.elevation,coordinates:ne.coordinates,description:ne.description||""}}))},bh=async c=>{var B;const N=Ae[c];if(N){re(!0),Z(null);try{const ne={name:N.name.trim(),elevation:Number(N.elevation)||0,coordinates:N.coordinates.trim(),description:((B=N.description)==null?void 0:B.trim())||void 0},ie=await Zi(ne),xe=[..._,ie];C(xe);const Oe=E.includes(ie.id)?E:[...E,ie.id];p(Oe),G(Be=>{const nn=[...Be];return nn[c]={...nn[c],takeoff_airfield_id:ie.id},nn});const mt=Qe.map((Be,nn)=>nn===c?{...Be,takeoff_airfield_id:ie.id}:Be);_e(Be=>({...Be,[c]:{name:ie.name,elevation:ie.elevation,coordinates:ie.coordinates,description:ie.description||""}})),Ye(Be=>({...Be,[c]:"existing"})),await Kn(y,Oe,mt),Z("Airfield added as takeoff and saved to event.")}catch(ne){Z(ne instanceof Error?ne.message:"Failed to add airfield")}finally{re(!1)}}},Sh=async()=>{const c=Number(m);if(!c||y.includes(c)||!a)return;const N=[...y,c];S(N),v(""),await Kn(N,E)},Nl=o.useMemo(()=>y.map(N=>d.find(B=>B.id===N)).filter(N=>!!N&&Array.isArray(N.roles)&&N.roles.includes("Staff")).sort((N,B)=>N.full_name.localeCompare(B.full_name,void 0,{sensitivity:"base"})),[y,d]),Ch=o.useMemo(()=>d.filter(c=>y.includes(c.id)?!1:(Array.isArray(c.roles)?c.roles:[]).includes("Staff")),[d,y]),wh=async()=>{const c=Number(j);if(!c||y.includes(c)||!a)return;const N=[...y,c];S(N),P(""),await Kn(N,E)},kh=async c=>{c.preventDefault(),Y(!0),Z(null);try{const N=ae.roles&&ae.roles.length>0?ae.roles:["Participant","Staff"],B={full_name:ae.full_name.trim(),email:ae.email.trim(),phone:ae.phone.trim()||void 0,experience_level:ae.experience_level.trim()||void 0,emergency_contact:ae.emergency_contact.trim()||void 0,roles:N},ne=await Ia(B),ie=[...y,ne.id];x(xe=>[...xe,ne]),S(ie),await Kn(ie,E),de({full_name:"",email:"",phone:"",experience_level:"",emergency_contact:"",roles:["Participant","Staff"]}),we(!1),Z("Staff participant added and saved to event.")}catch(N){Z(N instanceof Error?N.message:"Failed to add staff participant")}finally{Y(!1)}},fd=async c=>{const N=y.filter(B=>B!==c);S(N),await Kn(N,E)},Eh=async c=>{c.preventDefault(),ge(!0),Z(null);try{const N=se.roles&&se.roles.length>0?se.roles:["Participant","Skydiver"],B={full_name:se.full_name.trim(),email:se.email.trim(),phone:se.phone.trim()||void 0,experience_level:se.experience_level.trim()||void 0,emergency_contact:se.emergency_contact.trim()||void 0,roles:N},ne=await Ia(B);x(ie=>[...ie,ne]),S(ie=>[...ie,ne.id]),R({full_name:"",email:"",phone:"",experience_level:"",emergency_contact:"",roles:["Participant","Skydiver"]}),me(!1),Z("Participant added. Save to persist with event.")}catch(N){Z(N instanceof Error?N.message:"Failed to add participant")}finally{ge(!1)}},Ah=()=>{const c=M.starts_at&&M.starts_at.length>=10?Ze(`${M.starts_at}T09:00`):null;c&&c.setUTCHours(9,0,0,0),G(N=>[...N,{sequence:N.length+1,name:"",coordinates:"",scheduled_at:c?ph(c):"",notes:"",reason_for_choice:"",adjust_altimeter_aad:"",notam:"",distance_by_air:void 0,distance_by_road:void 0,primary_landing_area:Zu(),secondary_landing_area:Zu(),risk_assessment:"",safety_precautions:"",jumprun:"",hospital:"",rescue_boat:void 0,minimum_requirements:"",land_owners:[],land_owner_permission:void 0,image_files:[]}])},Ih=c=>{G(N=>N.filter((B,ne)=>ne!==c).map((B,ne)=>({...B,sequence:ne+1}))),_e(N=>{const B={...N};return delete B[c],B}),Te(N=>{const B={...N};return delete B[c],B}),Ye(N=>{const B={...N};return delete B[c],B})},Ua=(c,N,B)=>{G(ne=>{const ie=[...ne];return ie[c]={...ie[c],[N]:N==="sequence"?Number(B)||c+1:B},ie})},md=async c=>{c.preventDefault(),await Kn(y,E)},Dh=async()=>{const c=Number(k);if(!c||E.includes(c)||!a)return;const N=[...E,c];p(N),D(""),await Kn(y,N)},Th=async c=>{const N=E.filter(B=>B!==c);p(N),await Kn(y,N)},Ph=async c=>{c.preventDefault(),re(!0),Z(null);try{const N={name:f.name.trim(),elevation:Number(f.elevation)||0,coordinates:f.coordinates.trim(),description:f.description.trim()||void 0},B=await Zi(N);C(ne=>[...ne,B]),p(ne=>[...ne,B.id]),w({name:"",elevation:"",coordinates:"",description:""}),pe(!1),await Kn(y,E.includes(B.id)?E:[...E,B.id]),Z("Airfield added and saved to event.")}catch(N){Z(N instanceof Error?N.message:"Failed to add airfield")}finally{re(!1)}};if(O)return r.jsx("p",{className:"muted",children:"Loading event"});if(Ie)return r.jsx("p",{className:"error-text",children:Ie});if(!a)return r.jsx("p",{className:"error-text",children:"Event not found."});const Mh=a.status==="past",Oh=async()=>{if(!(!a||dt)&&window.confirm("Are you sure you want to delete this event?")){Tt(!0),Z(null);try{await Rp(a.id),n("/events")}catch(c){Z(c instanceof Error?c.message:"Failed to delete event"),Tt(!1)}}},$h=async()=>{if(!(!a||bt)){X(!0),Z(null);try{const c=await Lp(a.id);n(`/events/${c.id}`)}catch(c){Z(c instanceof Error?c.message:"Failed to copy event")}finally{X(!1)}}};return r.jsxs("section",{children:[r.jsxs("header",{className:"page-header",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"event-header-top",children:[r.jsx("h2",{style:{margin:0},children:a.name}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap",alignItems:"center"},children:[r.jsx("span",{className:`badge status-${a.status}`,children:a.status}),!Mh&&(()=>{const c=a.slots??0,N=y.reduce((ie,xe)=>{var mt;return(((mt=d.find(Be=>Be.id===xe))==null?void 0:mt.roles)||[]).includes("Staff")?ie:ie+1},0),B=Math.max(c-N,0),ne=B===0;return r.jsx("span",{className:`badge ${ne?"danger":"success"}`,children:ne?"FULL":`${B} SLOTS AVAILABLE`})})()]})]}),r.jsx("p",{className:"event-location",children:a.location||"Location TBD"})]}),r.jsxs("div",{className:"card-actions",children:[r.jsx("button",{className:"ghost",type:"button",onClick:()=>n(`/events/${a.id}`),children:"Schedule"}),r.jsx("button",{className:"ghost",type:"button",onClick:()=>n(`/manifests?eventId=${a.id}`),children:"Manifest"}),r.jsx("button",{className:"ghost",type:"button",onClick:$h,disabled:bt,children:bt?"Copying":"Copy"}),r.jsx("button",{className:"ghost danger",type:"button",onClick:Oh,disabled:dt,children:dt?"Deleting":"Delete"}),r.jsx("button",{className:"ghost",type:"button",onClick:()=>n("/events"),children:"Back"})]})]}),r.jsxs("article",{className:"card",children:[r.jsx("header",{className:"card-header",onClick:()=>Ft("details"),style:{cursor:"pointer"},children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flex:1},children:[r.jsx("button",{className:"ghost",type:"button",onClick:c=>{c.stopPropagation(),Ft("details")},children:Xe.details?"":""}),r.jsx("h3",{style:{margin:0},children:"Event details"})]})}),Xe.details&&r.jsxs("form",{className:"form-grid",onSubmit:md,children:[r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"minmax(0, 1fr) minmax(0, 1fr) minmax(0, 0.5fr) minmax(0, 1fr) minmax(0, 1fr) minmax(0, 0.5fr)",gap:"0.75rem",gridColumn:"1 / -1",alignItems:"end"},children:[r.jsxs("label",{className:"form-field",style:{margin:0,gridColumn:"1 / 3"},children:[r.jsx("span",{children:"Name"}),r.jsx("input",{type:"text",value:M.name,onChange:c=>J(N=>({...N,name:c.target.value})),required:!0})]}),r.jsx("div",{"aria-hidden":"true",style:{gridColumn:"3 / 4"}}),r.jsxs("label",{className:"form-field",style:{margin:0,gridColumn:"4 / 5"},children:[r.jsx("span",{children:"Season"}),r.jsxs("select",{style:{width:"100%",minWidth:"120px"},value:M.season_id,onChange:c=>J(N=>({...N,season_id:c.target.value})),required:!0,children:[r.jsx("option",{value:"",children:"Select season"}),l.map(c=>r.jsx("option",{value:c.id,children:c.name},c.id))]})]}),r.jsx("div",{"aria-hidden":"true",style:{gridColumn:"5 / 7"}}),r.jsxs("label",{className:"form-field",style:{margin:0,gridColumn:"1 / 3"},children:[r.jsx("span",{children:"Location"}),r.jsx("input",{type:"text",value:M.location,onChange:c=>J(N=>({...N,location:c.target.value})),placeholder:"The overall location the event takes place"})]}),r.jsx("div",{"aria-hidden":"true",style:{gridColumn:"3 / 4"}}),r.jsxs("label",{className:"form-field",style:{margin:0,gridColumn:"4 / 5"},children:[r.jsx("span",{children:"Status"}),r.jsx("select",{value:M.status,onChange:c=>J(N=>({...N,status:c.target.value})),children:y0.map(c=>r.jsx("option",{value:c.value,children:c.label},c.value))})]}),r.jsxs("label",{className:"form-field",style:{margin:0,gridColumn:"5 / 6",maxWidth:"220px",justifySelf:"start",width:"100%"},children:[r.jsx("span",{children:"Slots"}),r.jsx("input",{type:"number",min:0,value:M.slots,onChange:c=>J(N=>({...N,slots:c.target.value})),placeholder:"Total slots",style:{width:"100%",maxWidth:"220px"}})]}),r.jsx("div",{"aria-hidden":"true",style:{gridColumn:"6 / 7"}}),r.jsxs("label",{className:"form-field",style:{margin:0,gridColumn:"1 / 3"},children:[r.jsx("span",{children:"Starts on"}),r.jsx(Dt,{value:qe(M.starts_at),options:{dateFormat:"Y-m-d",altInput:!0,altFormat:"M j, Y",allowInput:!0},onChange:c=>{const N=c[0];J(B=>({...B,starts_at:N?Ju(N):""}))}})]}),r.jsx("div",{"aria-hidden":"true",style:{gridColumn:"3 / 4"}}),r.jsxs("label",{className:"form-field",style:{margin:0,gridColumn:"4 / 6"},children:[r.jsx("span",{children:"Ends on"}),r.jsx(Dt,{value:qe(M.ends_at),options:{dateFormat:"Y-m-d",altInput:!0,altFormat:"M j, Y",allowInput:!0},onChange:c=>{const N=c[0];J(B=>({...B,ends_at:N?Ju(N):""}))}})]}),r.jsx("div",{"aria-hidden":"true",style:{gridColumn:"6 / 7"}})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"submit",className:ut,disabled:te||Ve,children:Pt}),V&&r.jsx("span",{className:"muted",children:V})]})]})]}),r.jsxs("article",{className:"card",children:[r.jsxs("header",{className:"card-header",onClick:()=>Ft("innhopps"),style:{cursor:"pointer"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flex:1},children:[r.jsx("button",{className:"ghost",type:"button",onClick:c=>{c.stopPropagation(),Ft("innhopps")},children:Xe.innhopps?"":""}),r.jsx("h3",{style:{margin:0},children:"Innhopps"})]}),r.jsxs("span",{className:"badge neutral",children:[Qe.length," INNHOPPS"]})]}),Xe.innhopps&&(Qe.length===0?r.jsx("p",{className:"muted",children:"No innhopps yet."}):r.jsx("ul",{className:"status-list",style:{maxHeight:"24rem",overflowY:"auto"},children:Qe.filter(c=>c.id).map(c=>{const N=c.takeoff_airfield_id?_.find(ne=>ne.id===c.takeoff_airfield_id):void 0,B=rh(c);return r.jsx("li",{id:`innhopp-${c.id}`,style:{...Ce,...cn===`innhopp-${c.id}`?le:{}},children:r.jsxs(nt,{to:`/events/${a.id}/innhopps/${c.id}`,className:"card-link",style:{flex:1},onClick:()=>{if(e)try{sessionStorage.setItem(`event-detail-highlight:${e}`,`innhopp-${c.id}`)}catch{}On()},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"0.5rem"},children:[r.jsxs("strong",{children:["#",c.sequence,"  ",c.name]}),r.jsx("span",{className:`badge ${B?"success":"danger"}`,children:B?"OP READY":"MISSING INFO"})]}),Xu(c.scheduled_at)&&r.jsx("div",{className:"muted",children:Xu(c.scheduled_at)}),c.elevation!==void 0&&c.elevation!==null&&r.jsxs("div",{className:"muted",children:["Elevation: ",tl(c.elevation)]}),r.jsxs("div",{className:"muted",children:["Takeoff: ",N?N.name:c.takeoff_airfield_id?`Airfield #${c.takeoff_airfield_id}`:"Not set"]}),c.notes&&r.jsx("div",{className:"muted",children:c.notes})]})},c.id)})})),Xe.innhopps&&r.jsxs(r.Fragment,{children:[r.jsx("div",{style:{height:"1rem"}}),r.jsxs("form",{className:"form-grid",onSubmit:md,children:[Qe.filter(c=>!c.id).map((c,N)=>{const B=Qe.findIndex(ne=>ne===c);return r.jsxs("div",{className:"innhopp-row",children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Sequence"}),r.jsx("input",{type:"number",min:1,value:c.sequence,onChange:ne=>Ua(B,"sequence",ne.target.value),style:{width:"8ch"}})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Name"}),r.jsx("input",{type:"text",value:c.name,onChange:ne=>Ua(B,"name",ne.target.value),placeholder:"Describe the innhopp",required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Scheduled at"}),r.jsx(Dt,{value:qe(c.scheduled_at),options:{enableTime:!0,dateFormat:"Y-m-d H:i",time_24hr:!0},onChange:ne=>{const ie=ne[0];Ua(B,"scheduled_at",ie?qp(ie):"")}})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Takeoff airfield"}),r.jsxs("select",{value:c.takeoff_airfield_id??"",onChange:ne=>Nh(B,ne.target.value),children:[r.jsx("option",{value:"",children:"Select airfield"}),r.jsx("option",{value:"__new__",children:"Create new airfield"}),ud.map(ne=>r.jsx("optgroup",{label:ne.label,children:ne.options.map(ie=>r.jsx("option",{value:ie.value,children:ie.label},ie.key))},ne.label))]})]}),r.jsxs("label",{className:"form-field notes-field",children:[r.jsx("span",{children:"Notes"}),r.jsx("input",{type:"text",value:c.notes,onChange:ne=>Ua(B,"notes",ne.target.value),placeholder:"Exit altitude, landing brief"})]}),Fe[B]&&r.jsx("div",{className:"form-grid",style:{gridTemplateColumns:"repeat(auto-fit,minmax(200px,1fr))",border:"1px dashed #c6d1dd",padding:"1rem",borderRadius:"10px",marginTop:"0.5rem",gridColumn:"1 / -1"},children:(()=>{const ne=Ge[B],ie=c.takeoff_airfield_id!=null?_.find(Be=>Be.id===c.takeoff_airfield_id):void 0,xe=Ae[B]||{name:(ie==null?void 0:ie.name)||"",elevation:(ie==null?void 0:ie.elevation)||0,coordinates:(ie==null?void 0:ie.coordinates)||"",description:(ie==null?void 0:ie.description)||""},Oe=ne==="existing"&&!!ie,mt=!At(xe.coordinates);return r.jsxs(r.Fragment,{children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Name"}),r.jsx("input",{type:"text",value:xe.name,disabled:Oe,onChange:Be=>_e(nn=>({...nn,[B]:{...xe,name:Be.target.value}})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Elevation (m)"}),r.jsx("input",{type:"number",min:0,value:xe.elevation,disabled:Oe,onChange:Be=>_e(nn=>({...nn,[B]:{...xe,elevation:Number(Be.target.value)}})),required:!0})]}),r.jsxs("label",{className:`form-field ${mt?"field-missing":""}`,children:[r.jsx("span",{children:"Coordinates"}),r.jsxs("div",{className:"input-with-button",children:[r.jsx("input",{type:"text",value:xe.coordinates,disabled:Oe,onChange:Be=>_e(nn=>({...nn,[B]:{...xe,coordinates:Be.target.value}})),required:!0}),r.jsx("button",{type:"button",className:"ghost",disabled:!xe.coordinates.trim(),onClick:()=>{const Be=xe.coordinates.trim();Be&&window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(Be)}`,"_blank")},children:"Open in Maps"})]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Description"}),r.jsx("input",{type:"text",value:xe.description||"",disabled:Oe,onChange:Be=>_e(nn=>({...nn,[B]:{...xe,description:Be.target.value}})),placeholder:"Optional"})]}),r.jsxs("div",{className:"form-actions",style:{gridColumn:"1 / -1"},children:[ne==="new"&&r.jsx("button",{type:"button",className:"ghost",onClick:()=>bh(B),disabled:ee,children:ee?"Adding":"Create & attach"}),ne==="existing"&&ie&&r.jsxs("span",{className:"muted",children:["Viewing details of ",ie.name]}),r.jsx("button",{type:"button",className:"ghost",onClick:()=>Te(Be=>({...Be,[B]:!1})),disabled:ee,children:"Close"})]})]})})()}),r.jsx("div",{className:"innhopp-actions"}),r.jsx("button",{type:"button",className:"ghost danger",onClick:()=>Ih(B),children:"Remove"})]},N)}),r.jsxs("div",{className:"form-actions",style:{flexWrap:"wrap",gap:"0.75rem",marginTop:"1rem"},children:[r.jsx("button",{type:"button",className:"primary",onClick:Ah,disabled:te,children:"Create new Innhopp"}),r.jsx("button",{type:"submit",className:ut,disabled:te||Ve,children:Pt}),V&&r.jsx("span",{className:"muted",children:V})]})]})]})]}),r.jsxs("article",{className:"card",children:[r.jsxs("header",{className:"card-header",onClick:()=>Ft("airfields"),style:{cursor:"pointer"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flex:1},children:[r.jsx("button",{className:"ghost",type:"button",onClick:c=>{c.stopPropagation(),Ft("airfields")},children:Xe.airfields?"":""}),r.jsx("h3",{style:{margin:0},children:"Airfields"})]}),r.jsxs("span",{className:"badge neutral",children:[E.length," AIRFIELDS"]})]}),Xe.airfields&&(E.length===0?r.jsx("p",{className:"muted",children:"No airfields linked yet."}):r.jsx("ul",{className:"status-list",style:{maxHeight:"24rem",overflowY:"auto"},children:E.map(c=>{const N=_.find(B=>B.id===c);return r.jsxs("li",{id:`airfield-${c}`,style:{...Ce,...cn===`airfield-${c}`?le:{}},children:[r.jsxs(nt,{to:`/airfields/${c}`,className:"card-link",style:{flex:1},onClick:()=>{if(e)try{sessionStorage.setItem(`event-detail-highlight:${e}`,`airfield-${c}`)}catch{}On()},children:[r.jsx("strong",{children:(N==null?void 0:N.name)||`Airfield #${c}`}),(N==null?void 0:N.coordinates)&&r.jsxs("div",{className:"muted",children:["Coords: ",N.coordinates]}),r.jsxs("div",{className:"muted",children:["Elevation: ",(N==null?void 0:N.elevation)!==void 0?tl(N.elevation):"Unknown",N!=null&&N.description?`  ${N.description}`:""]})]}),r.jsx("button",{type:"button",className:"ghost danger",onClick:()=>Th(c),children:"Remove"})]},c)})})),Xe.airfields&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"form-grid",style:{marginTop:"1rem"},children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Select airfield"}),r.jsxs("select",{value:k,onChange:c=>{const N=c.target.value;D(N),N==="__new__"&&(pe(!0),D(""))},children:[r.jsx("option",{value:"",children:"Choose an airfield"}),r.jsx("option",{value:"__new__",children:"Create new airfield"}),ud.map(c=>r.jsx("optgroup",{label:c.label,children:c.options.filter(N=>_h.some(B=>B.id===N.value)).map(N=>r.jsx("option",{value:N.value,children:N.label},N.key))},c.label))]})]}),r.jsxs("div",{className:"form-actions",style:{gap:"0.75rem",alignItems:"center"},children:[r.jsx("button",{type:"button",className:"primary",onClick:Dh,disabled:!k,children:"Add"}),r.jsx("button",{type:"button",className:ut,onClick:Lr,disabled:te||Ve,children:Pt})]})]}),ce&&r.jsxs("form",{className:"form-grid",style:{marginTop:"1rem"},onSubmit:Ph,children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Name"}),r.jsx("input",{type:"text",value:f.name,onChange:c=>w(N=>({...N,name:c.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Elevation (m)"}),r.jsx("input",{type:"number",min:0,step:1,value:f.elevation,onChange:c=>w(N=>({...N,elevation:c.target.value})),required:!0})]}),r.jsxs("label",{className:`form-field ${ke?"field-missing":""}`,children:[r.jsx("span",{children:"Coordinates (DMS)"}),r.jsxs("div",{className:"input-with-button",children:[r.jsx("input",{type:"text",value:f.coordinates,onChange:c=>w(N=>({...N,coordinates:c.target.value})),pattern:`^[0-9]{1,3}[0-9]{1,2}'[0-9]{1,2}(?:\\.\\d+)?"[NS]\\s[0-9]{1,3}[0-9]{1,2}'[0-9]{1,2}(?:\\.\\d+)?"[EW]$`,title:`Use DMS format like 1114'30.0"N 7342'59.7"W`,required:!0}),r.jsx("button",{type:"button",className:"ghost",disabled:!f.coordinates.trim(),onClick:()=>{const c=f.coordinates.trim();c&&window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(c)}`,"_blank")},children:"Open in Maps"})]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Description"}),r.jsx("input",{type:"text",value:f.description,onChange:c=>w(N=>({...N,description:c.target.value})),placeholder:"Optional notes"})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"submit",className:"ghost",disabled:ee,children:ee?"Adding":"Create & attach"}),r.jsx("button",{type:"button",className:"ghost",onClick:()=>pe(!1),disabled:ee,children:"Cancel"})]})]})]})]}),r.jsxs("article",{className:"card",children:[r.jsxs("header",{className:"card-header",onClick:()=>Ft("participants"),style:{cursor:"pointer"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flex:1},children:[r.jsx("button",{className:"ghost",type:"button",onClick:c=>{c.stopPropagation(),Ft("participants")},children:Xe.participants?"":""}),r.jsx("h3",{style:{margin:0},children:"Participants"})]}),r.jsxs("span",{className:"badge neutral",children:[y.filter(c=>{var B;return!(((B=d.find(ne=>ne.id===c))==null?void 0:B.roles)||[]).includes("Staff")}).length," ","Participants"]})]}),Xe.participants&&(y.filter(c=>{var B;return!(((B=d.find(ne=>ne.id===c))==null?void 0:B.roles)||[]).includes("Staff")}).length===0?r.jsx("p",{className:"muted",children:"No participants yet."}):r.jsx("ul",{className:"status-list",style:{maxHeight:"24rem",overflowY:"auto"},children:y.map(c=>d.find(N=>N.id===c)).filter(c=>!!c&&!(Array.isArray(c.roles)&&c.roles.includes("Staff"))).sort((c,N)=>c.full_name.localeCompare(N.full_name,void 0,{sensitivity:"base"})).map(c=>{const N=c.id,B=Array.isArray(c.roles)?c.roles:[],ne=B.includes("Jump Leader"),ie=B.includes("Jump Master"),xe=B.filter(Oe=>!(Oe==="Participant"||Oe==="Staff"||ne&&(Oe==="Jump Master"||Oe==="Skydiver")||ie&&Oe==="Skydiver"));return r.jsxs("li",{id:`participant-${N}`,style:{...Ce,...cn===`participant-${N}`?le:{}},children:[r.jsxs(nt,{to:`/participants/${N}`,state:{fromEventId:e,highlightId:`participant-${N}`},className:"card-link",style:{flex:1},onClick:()=>{if(e)try{sessionStorage.setItem(`event-detail-highlight:${e}`,`participant-${N}`)}catch{}On()},children:[r.jsx("strong",{children:dd(N)}),r.jsx("div",{className:"muted",children:c.email||"No email on file"}),r.jsxs("div",{className:"muted",children:["Experience: ",c.experience_level||"Not provided"]}),xe.length>0&&r.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.35rem",marginTop:"0.25rem"},children:xe.map(Oe=>r.jsx("span",{className:"badge neutral",children:Oe},Oe))})]}),r.jsx("button",{type:"button",className:"ghost danger",onClick:()=>fd(N),children:"Remove"})]},N)})})),Xe.participants&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"form-grid",style:{marginTop:"1rem"},children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Select participant"}),r.jsxs("select",{value:m,onChange:c=>{const N=c.target.value;N==="__new__"?(me(!0),v("")):v(N)},children:[r.jsx("option",{value:"",children:"Choose a participant"}),r.jsx("option",{value:"__new__",children:"Create new participant"}),jh.map(c=>r.jsxs("option",{value:c.id,children:[c.full_name," (",c.email||"No email",")"]},c.id))]})]}),r.jsxs("div",{className:"form-actions",style:{gap:"0.5rem",alignItems:"center"},children:[r.jsx("button",{type:"button",className:"primary",onClick:Sh,disabled:!m,children:"Add"}),r.jsx("button",{type:"button",className:ut,onClick:Lr,disabled:te||Ve,children:Pt})]})]}),be&&r.jsxs("form",{className:"form-grid",style:{marginTop:"1rem"},onSubmit:Eh,children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Full name"}),r.jsx("input",{type:"text",value:se.full_name,onChange:c=>R(N=>({...N,full_name:c.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Email"}),r.jsx("input",{type:"email",value:se.email,onChange:c=>R(N=>({...N,email:c.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Phone"}),r.jsx("input",{type:"text",value:se.phone,onChange:c=>R(N=>({...N,phone:c.target.value})),placeholder:"Optional"})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Experience level"}),r.jsx("input",{type:"text",value:se.experience_level,onChange:c=>R(N=>({...N,experience_level:c.target.value})),placeholder:"Optional"})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Emergency contact"}),r.jsx("input",{type:"text",value:se.emergency_contact,onChange:c=>R(N=>({...N,emergency_contact:c.target.value})),placeholder:"Optional"})]}),r.jsxs("div",{className:"form-field",style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Roles"}),r.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:el.map(c=>{var ne;const N=(ne=se.roles)==null?void 0:ne.includes(c),B=c==="Staff";return r.jsxs("label",{className:"badge neutral",style:{display:"inline-flex",alignItems:"center",gap:"0.35rem"},children:[r.jsx("input",{type:"checkbox",checked:N,disabled:B,onChange:ie=>{R(xe=>{const Oe=new Set(xe.roles||[]);ie.target.checked?Oe.add(c):Oe.delete(c);const mt=Array.from(Oe);return{...xe,roles:mt.length>0?mt:["Participant","Skydiver"]}})}}),c]},c)})}),r.jsx("p",{className:"muted",style:{margin:0},children:"Staff cannot be assigned here."})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"submit",className:"primary",disabled:ue,children:ue?"Adding":"Add participant"}),r.jsx("button",{type:"button",className:"ghost",onClick:()=>me(!1),disabled:ue,children:"Cancel"})]})]})]})]}),r.jsxs("article",{className:"card",children:[r.jsxs("header",{className:"card-header",onClick:()=>Ft("staff"),style:{cursor:"pointer"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flex:1},children:[r.jsx("button",{className:"ghost",type:"button",onClick:c=>{c.stopPropagation(),Ft("staff")},children:Xe.staff?"":""}),r.jsx("h3",{style:{margin:0},children:"Staff"})]}),r.jsxs("span",{className:"badge neutral",children:[Nl.length," staff"]})]}),Xe.staff&&(Nl.length===0?r.jsx("p",{className:"muted",children:"No staff yet."}):r.jsx("ul",{className:"status-list",style:{maxHeight:"24rem",overflowY:"auto"},children:Nl.map(c=>{const N=c.id,B=Array.isArray(c.roles)?c.roles:[],ne=B.includes("Jump Leader"),ie=B.includes("Jump Master"),xe=B.filter(Oe=>!(Oe==="Participant"||Oe==="Staff"||ne&&(Oe==="Jump Master"||Oe==="Skydiver")||ie&&Oe==="Skydiver"));return r.jsxs("li",{id:`staff-${N}`,style:{...Ce,...cn===`staff-${N}`?le:{}},children:[r.jsxs(nt,{to:`/participants/${N}`,className:"card-link",style:{flex:1},onClick:()=>{if(e)try{sessionStorage.setItem(`event-detail-highlight:${e}`,`staff-${N}`)}catch{}On()},state:{fromEventId:e,highlightId:`staff-${N}`},children:[r.jsx("strong",{children:c.full_name||dd(N)}),r.jsx("div",{className:"muted",children:c.email||"No email on file"}),r.jsxs("div",{className:"muted",children:["Experience: ",c.experience_level||"Not provided"]}),xe.length>0&&r.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.35rem",marginTop:"0.25rem"},children:xe.map(Oe=>r.jsx("span",{className:"badge neutral",children:Oe},Oe))})]}),r.jsx("button",{type:"button",className:"ghost danger",onClick:()=>fd(N),disabled:te,children:"Remove"})]},N)})})),Xe.staff&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"form-grid",style:{marginTop:"1rem"},children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Select staff"}),r.jsxs("select",{value:j,onChange:c=>{const N=c.target.value;N==="__new__"?(we(!0),P("")):P(N)},children:[r.jsx("option",{value:"",children:"Choose staff"}),r.jsx("option",{value:"__new__",children:"Create new staff"}),Ch.map(c=>r.jsxs("option",{value:c.id,children:[c.full_name," (",c.email||"No email",")"]},c.id))]})]}),r.jsxs("div",{className:"form-actions",style:{gap:"0.5rem",alignItems:"center"},children:[r.jsx("button",{type:"button",className:"primary",onClick:wh,disabled:!j,children:"Add"}),r.jsx("button",{type:"button",className:ut,onClick:Lr,disabled:te||Ve,children:Pt})]})]}),he&&r.jsxs("form",{className:"form-grid",style:{marginTop:"1rem"},onSubmit:kh,children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Full name"}),r.jsx("input",{type:"text",value:ae.full_name,onChange:c=>de(N=>({...N,full_name:c.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Email"}),r.jsx("input",{type:"email",value:ae.email,onChange:c=>de(N=>({...N,email:c.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Phone"}),r.jsx("input",{type:"text",value:ae.phone,onChange:c=>de(N=>({...N,phone:c.target.value})),placeholder:"Optional"})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Experience level"}),r.jsx("input",{type:"text",value:ae.experience_level,onChange:c=>de(N=>({...N,experience_level:c.target.value})),placeholder:"Optional"})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Emergency contact"}),r.jsx("input",{type:"text",value:ae.emergency_contact,onChange:c=>de(N=>({...N,emergency_contact:c.target.value})),placeholder:"Optional"})]}),r.jsxs("div",{className:"form-field",style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Roles"}),r.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:el.map(c=>{var ne;const N=(ne=ae.roles)==null?void 0:ne.includes(c),B=c==="Participant"||c==="Staff";return r.jsxs("label",{className:"badge neutral",style:{display:"inline-flex",alignItems:"center",gap:"0.35rem"},children:[r.jsx("input",{type:"checkbox",checked:N,disabled:B,onChange:ie=>{de(xe=>{const Oe=new Set(xe.roles||[]);ie.target.checked?Oe.add(c):Oe.delete(c);const mt=Array.from(Oe);return{...xe,roles:mt.length>0?mt:["Participant","Staff"]}})}}),c]},c)})})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"submit",className:"primary",disabled:fe,children:fe?"Adding":"Add staff"}),r.jsx("button",{type:"button",className:"ghost",onClick:()=>we(!1),disabled:fe,children:"Cancel"})]})]})]})]}),r.jsxs("article",{className:"card",children:[r.jsxs("header",{className:"card-header",onClick:()=>Ft("accommodations"),style:{cursor:"pointer"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flex:1},children:[r.jsx("button",{className:"ghost",type:"button",onClick:c=>{c.stopPropagation(),Ft("accommodations")},children:Xe.accommodations?"":""}),r.jsx("h3",{style:{margin:0},children:"Accommodation"})]}),r.jsxs("span",{className:"badge neutral",children:[z.length," ACCOMMODATIONS"]})]}),Xe.accommodations&&r.jsxs(r.Fragment,{children:[z.length>0?r.jsx("ul",{className:"status-list",style:{maxHeight:"24rem",overflowY:"auto"},children:st.map((c,N)=>r.jsx("li",{id:`accommodation-${c.id}`,style:{...Ce,...cn===`accommodation-${c.id}`?le:{}},children:r.jsxs(nt,{to:`/events/${e}/accommodations/${c.id}`,state:{fromEventId:e,highlightId:`accommodation-${c.id}`},className:"card-link",style:{display:"flex",flexDirection:"column",gap:"0.25rem",width:"100%"},onClick:()=>{if(e)try{sessionStorage.setItem(`event-detail-highlight:${e}`,`accommodation-${c.id}`)}catch{}On()},children:[r.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",gap:"0.75rem",width:"100%"},children:[r.jsx("strong",{children:c.name||"Accommodation"}),r.jsx("span",{className:`badge ${c.booked&&At(c.coordinates)?"success":"danger"}`,"aria-label":c.booked?"Booked":"Not booked",style:{flexShrink:0},children:c.booked&&At(c.coordinates)?"":"NOT BOOKED"})]}),r.jsx("div",{className:"muted",style:{marginTop:"0.2rem"},children:c.capacity?`Capacity: ${c.capacity}`:"Capacity: n/a"}),(c.check_in_at||c.check_out_at)&&r.jsxs("div",{className:"muted",style:{marginTop:"0.1rem"},children:[c.check_in_at?`${rs(c.check_in_at)}`:"",c.check_in_at&&c.check_out_at?"  ":"",c.check_out_at?`${rs(c.check_out_at)}`:""]}),c.notes?r.jsx("div",{className:"muted",style:{marginTop:"0.1rem"},children:c.notes}):null]})},c.id||N))}):r.jsx("p",{className:"muted",children:"No accommodation linked yet."}),r.jsx("div",{className:"form-actions",style:{marginTop:"0.5rem"},children:r.jsx("button",{type:"button",className:"ghost",onClick:()=>$e(c=>!c),children:Le?"Cancel":"Create new accommodation"})}),Le&&r.jsxs("div",{className:"form-grid",style:{marginTop:"0.5rem"},children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Name"}),r.jsx("input",{type:"text",value:I.name,onChange:c=>K(N=>({...N,name:c.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Capacity"}),r.jsx("input",{type:"number",min:0,value:I.capacity,onChange:c=>K(N=>({...N,capacity:c.target.value}))})]}),r.jsxs("label",{className:`form-field ${We?"field-missing":""}`,children:[r.jsx("span",{children:"Coordinates (DMS)"}),r.jsxs("div",{className:"input-with-button",children:[r.jsx("input",{type:"text",value:I.coordinates,onChange:c=>K(N=>({...N,coordinates:c.target.value}))}),r.jsx("button",{type:"button",className:"ghost",disabled:!I.coordinates.trim(),onClick:()=>{const c=I.coordinates.trim();c&&window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(c)}`,"_blank")},children:"Open in Maps"})]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Check-in"}),r.jsx(Dt,{value:qe(I.check_in_at),options:{enableTime:!0,dateFormat:"Y-m-d H:i"},onChange:c=>{const N=c[0];K(B=>({...B,check_in_at:N?zt(N):""}))}})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Check-out"}),r.jsx(Dt,{value:qe(I.check_out_at),options:{enableTime:!0,dateFormat:"Y-m-d H:i"},onChange:c=>{const N=c[0];K(B=>({...B,check_out_at:N?zt(N):""}))}})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Booked"}),r.jsxs("div",{className:"checkbox-field",children:[r.jsx("input",{type:"checkbox",checked:I.booked,onChange:c=>K(N=>({...N,booked:c.target.checked}))}),r.jsx("span",{children:"Mark as booked"})]})]}),r.jsxs("label",{className:"form-field",style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Notes"}),r.jsx("input",{type:"text",value:I.notes,onChange:c=>K(N=>({...N,notes:c.target.value}))})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"button",className:"primary",onClick:()=>{I.name.trim()&&(async()=>{try{const c=await Up(Number(e),{name:I.name.trim(),capacity:Number(I.capacity)||0,coordinates:I.coordinates.trim()||void 0,booked:I.booked,check_in_at:I.check_in_at||void 0,check_out_at:I.check_out_at||void 0,notes:I.notes.trim()||void 0});W(N=>[c,...N]),K({name:"",capacity:"",coordinates:"",booked:!1,check_in_at:"",check_out_at:"",notes:""}),$e(!1)}catch(c){Z(c instanceof Error?c.message:"Failed to create accommodation")}})()},children:"Save accommodation"}),r.jsx("button",{type:"button",className:"ghost",onClick:()=>{$e(!1),K({name:"",capacity:"",coordinates:"",booked:!1,check_in_at:"",check_out_at:"",notes:""})},children:"Cancel"})]})]}),r.jsx("div",{className:"form-actions",style:{marginTop:"0.75rem"},children:r.jsx("button",{type:"button",className:ut,onClick:Lr,disabled:te||Ve,children:Pt})})]})]}),r.jsxs("article",{className:"card",children:[r.jsxs("header",{className:"card-header",onClick:()=>Ft("transports"),style:{cursor:"pointer"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flex:1},children:[r.jsx("button",{className:"ghost",type:"button",onClick:c=>{c.stopPropagation(),Ft("transports")},children:Xe.transports?"":""}),r.jsx("h3",{style:{margin:0},children:"Transport"})]}),r.jsxs("span",{className:"badge neutral",children:[h.length," ROUTES"]})]}),Xe.transports&&r.jsxs(r.Fragment,{children:[h.length>0?r.jsx("ul",{className:"status-list",style:{maxHeight:"24rem",overflowY:"auto"},children:h.slice().sort((c,N)=>{var ie,xe;const B=((ie=Ze(c.scheduled_at))==null?void 0:ie.getTime())??Number.POSITIVE_INFINITY,ne=((xe=Ze(N.scheduled_at))==null?void 0:xe.getTime())??Number.POSITIVE_INFINITY;return B-ne}).map(c=>{const N=at(c.pickup_location),B=at(c.destination),ne=Number.isFinite(c.passenger_count)&&c.passenger_count>=0,ie=Array.isArray(c.vehicles)&&c.vehicles.length>0,xe=At(c.pickup_location)&&At(c.destination)&&At(c.scheduled_at)&&ne&&ie&&At(N)&&At(B);return r.jsx("li",{id:`transport-${c.id}`,style:{...Ce,...cn===`transport-${c.id}`?le:{}},children:r.jsxs(nt,{to:`/logistics/${c.id}`,state:{fromEventId:e,highlightId:`transport-${c.id}`},className:"card-link",style:{display:"flex",flexDirection:"column",gap:"0.25rem",width:"100%"},onClick:()=>{if(e)try{sessionStorage.setItem(`event-detail-highlight:${e}`,`transport-${c.id}`)}catch{}On()},children:[r.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",gap:"0.75rem",width:"100%"},children:[r.jsxs("strong",{style:{display:"block"},children:[c.pickup_location,"  ",c.destination]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.35rem",flexShrink:0},children:[r.jsx("span",{className:`badge ${xe?"success":"danger"}`,style:{minWidth:"2.4ch",textAlign:"center"},children:xe?"":"!"}),r.jsxs("span",{className:"badge neutral",children:[c.passenger_count," PAX"]})]})]}),r.jsx("div",{className:"muted",style:{display:"flex",gap:"0.35rem",flexWrap:"wrap"},children:c.scheduled_at?`${rs(c.scheduled_at)}`:"Unscheduled"}),Array.isArray(c.vehicles)&&c.vehicles.length>0?r.jsx("div",{className:"muted",style:{display:"flex",flexDirection:"column",gap:"0.15rem"},children:c.vehicles.map((Oe,mt)=>r.jsx("div",{style:{display:"flex",gap:"0.35rem",alignItems:"center",flexWrap:"wrap"},children:r.jsx("strong",{children:Oe.name})},mt))}):null]})},c.id)})}):r.jsx("p",{className:"muted",children:"No transport routes yet."}),r.jsx("div",{className:"form-actions",style:{marginTop:"0.5rem"},children:r.jsx("button",{type:"button",className:"ghost",onClick:()=>De(c=>!c),children:Ke?"Cancel":"Create new transport route"})}),Ke&&r.jsxs("div",{className:"form-grid",style:{marginTop:"0.5rem"},children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Pickup location"}),r.jsxs("select",{value:A.pickup_location,onChange:c=>H(N=>({...N,pickup_location:c.target.value})),required:!0,children:[r.jsx("option",{value:"",children:"Select pickup"}),za.map(c=>c.options.length>0&&r.jsx("optgroup",{label:c.label,children:c.options.map(N=>r.jsx("option",{value:N.value,children:N.label},`${c.label}-${N.value}`))},c.label))]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Destination"}),r.jsxs("select",{value:A.destination,onChange:c=>H(N=>({...N,destination:c.target.value})),required:!0,children:[r.jsx("option",{value:"",children:"Select destination"}),za.map(c=>c.options.length>0&&r.jsx("optgroup",{label:c.label,children:c.options.map(N=>r.jsx("option",{value:N.value,children:N.label},`${c.label}-${N.value}`))},c.label))]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Passenger count"}),r.jsx("input",{type:"number",min:0,value:A.passenger_count,onChange:c=>H(N=>({...N,passenger_count:c.target.value}))})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Scheduled at"}),r.jsx(Dt,{value:qe(A.scheduled_at),options:{enableTime:!0,dateFormat:"Y-m-d H:i",time_24hr:!0},onChange:c=>{const N=c[0];H(B=>({...B,scheduled_at:N?zt(N):""}))}})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"button",className:"primary",onClick:vh,children:"Save transport"}),r.jsx("button",{type:"button",className:"ghost",onClick:()=>De(!1),children:"Cancel"})]})]}),r.jsx("div",{className:"form-actions",style:{marginTop:"0.75rem"},children:r.jsx("button",{type:"button",className:ut,onClick:Lr,disabled:te||Ve,children:Pt})})]})]}),r.jsxs("article",{className:"card",children:[r.jsxs("header",{className:"card-header",onClick:()=>Ft("groundCrews"),style:{cursor:"pointer"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flex:1},children:[r.jsx("button",{className:"ghost",type:"button",onClick:c=>{c.stopPropagation(),Ft("groundCrews")},children:Xe.groundCrews?"":""}),r.jsx("h3",{style:{margin:0},children:"Ground Crew"})]}),r.jsxs("span",{className:"badge neutral",children:[F.length," ENTRIES"]})]}),Xe.groundCrews&&r.jsxs(r.Fragment,{children:[F.length>0?r.jsx("ul",{className:"status-list",style:{maxHeight:"24rem",overflowY:"auto"},children:F.slice().sort((c,N)=>{var ie,xe;const B=((ie=Ze(c.scheduled_at))==null?void 0:ie.getTime())??Number.POSITIVE_INFINITY,ne=((xe=Ze(N.scheduled_at))==null?void 0:xe.getTime())??Number.POSITIVE_INFINITY;return B-ne}).map(c=>{const N=at(c.pickup_location),B=at(c.destination),ne=Number.isFinite(c.passenger_count)&&c.passenger_count>=0,ie=Array.isArray(c.vehicles)&&c.vehicles.length>0,xe=At(c.pickup_location)&&At(c.destination)&&At(c.scheduled_at)&&ne&&ie&&At(N)&&At(B);return r.jsx("li",{id:`ground-crew-${c.id}`,style:{...Ce,...cn===`ground-crew-${c.id}`?le:{}},children:r.jsxs(nt,{to:`/logistics/ground-crew/${c.id}`,state:{fromEventId:e,highlightId:`ground-crew-${c.id}`},className:"card-link",style:{display:"flex",flexDirection:"column",gap:"0.25rem",width:"100%"},onClick:()=>{if(e)try{sessionStorage.setItem(`event-detail-highlight:${e}`,`ground-crew-${c.id}`)}catch{}On()},children:[r.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",gap:"0.75rem",width:"100%"},children:[r.jsxs("strong",{style:{display:"block"},children:[c.pickup_location,"  ",c.destination]}),r.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.35rem",flexShrink:0},children:r.jsx("span",{className:`badge ${xe?"success":"danger"}`,style:{minWidth:"2.4ch",textAlign:"center"},children:xe?"":"!"})})]}),r.jsx("div",{className:"muted",style:{display:"flex",gap:"0.35rem",flexWrap:"wrap"},children:c.scheduled_at?`${rs(c.scheduled_at)}`:"Unscheduled"}),Array.isArray(c.vehicles)&&c.vehicles.length>0?r.jsx("div",{className:"muted",style:{display:"flex",flexDirection:"column",gap:"0.15rem"},children:c.vehicles.map((Oe,mt)=>r.jsx("div",{style:{display:"flex",gap:"0.35rem",alignItems:"center",flexWrap:"wrap"},children:r.jsx("strong",{children:Oe.name})},mt))}):null]})},c.id)})}):r.jsx("p",{className:"muted",children:"No ground crew entries yet."}),r.jsx("div",{className:"form-actions",style:{marginTop:"0.5rem"},children:r.jsx("button",{type:"button",className:"ghost",onClick:()=>q(c=>!c),children:Q?"Cancel":"Create new ground crew entry"})}),Q&&r.jsxs("div",{className:"form-grid",style:{marginTop:"0.5rem"},children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Start location"}),r.jsxs("select",{value:ve.pickup_location,onChange:c=>ye(N=>({...N,pickup_location:c.target.value})),required:!0,children:[r.jsx("option",{value:"",children:"Select start location"}),za.map(c=>c.options.length>0&&r.jsx("optgroup",{label:c.label,children:c.options.map(N=>r.jsx("option",{value:N.value,children:N.label},`gc-start-${c.label}-${N.value}`))},`gc-start-${c.label}`))]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Destination"}),r.jsxs("select",{value:ve.destination,onChange:c=>ye(N=>({...N,destination:c.target.value})),required:!0,children:[r.jsx("option",{value:"",children:"Select destination"}),za.map(c=>c.options.length>0&&r.jsx("optgroup",{label:c.label,children:c.options.map(N=>r.jsx("option",{value:N.value,children:N.label},`gc-dest-${c.label}-${N.value}`))},`gc-dest-${c.label}`))]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Crew count"}),r.jsx("input",{type:"number",min:0,value:ve.passenger_count,onChange:c=>ye(N=>({...N,passenger_count:c.target.value}))})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Scheduled at"}),r.jsx(Dt,{value:qe(ve.scheduled_at),options:{enableTime:!0,dateFormat:"Y-m-d H:i",time_24hr:!0},onChange:c=>{const N=c[0];ye(B=>({...B,scheduled_at:N?zt(N):""}))}})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"button",className:"primary",onClick:yh,children:"Save ground crew"}),r.jsx("button",{type:"button",className:"ghost",onClick:()=>q(!1),children:"Cancel"})]})]}),r.jsx("div",{className:"form-actions",style:{marginTop:"0.75rem"},children:r.jsx("button",{type:"button",className:ut,onClick:Lr,disabled:te||Ve,children:Pt})})]})]}),r.jsxs("article",{className:"card",children:[r.jsxs("header",{className:"card-header",onClick:()=>Ft("meals"),style:{cursor:"pointer"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flex:1},children:[r.jsx("button",{className:"ghost",type:"button",onClick:c=>{c.stopPropagation(),Ft("meals")},children:Xe.meals?"":""}),r.jsx("h3",{style:{margin:0},children:"Meals"})]}),r.jsxs("span",{className:"badge neutral",children:[He.length," MEALS"]})]}),Xe.meals&&r.jsx(r.Fragment,{children:He.length>0?r.jsx("ul",{className:"status-list",style:{maxHeight:"24rem",overflowY:"auto"},children:ct.map(c=>{const N=At(c.name)&&At(c.location)&&At(c.scheduled_at);return r.jsx("li",{id:`meal-${c.id}`,style:{...Ce,...cn===`meal-${c.id}`?le:{}},children:r.jsxs(nt,{to:`/logistics/meals/${c.id}`,state:{fromEventId:e,highlightId:`meal-${c.id}`},className:"card-link",style:{display:"grid",gridTemplateColumns:"1fr",gap:"0.2rem",flex:1},onClick:()=>{if(e)try{sessionStorage.setItem(`event-detail-highlight:${e}`,`meal-${c.id}`)}catch{}On()},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[r.jsx("strong",{style:{flex:1},children:c.name}),r.jsx("span",{className:`badge ${N?"success":"danger"}`,style:{minWidth:"2.4ch",textAlign:"center",flexShrink:0},children:N?"":"!"})]}),r.jsxs("div",{className:"muted",style:{display:"flex",gap:"0.35rem",flexWrap:"wrap"},children:[c.location?c.location:"Location required",c.scheduled_at?` ${rs(c.scheduled_at)}`:""]}),c.notes?r.jsx("div",{className:"muted",children:c.notes}):null]})},c.id)})}):r.jsx("p",{className:"muted",children:"No meals yet."})})]}),r.jsxs("article",{className:"card",children:[r.jsxs("header",{className:"card-header",onClick:()=>Ft("others"),style:{cursor:"pointer"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flex:1},children:[r.jsx("button",{className:"ghost",type:"button",onClick:c=>{c.stopPropagation(),Ft("others")},children:Xe.others?"":""}),r.jsx("h3",{style:{margin:0},children:"Other logistics"})]}),r.jsxs("span",{className:"badge neutral",children:[oe.length," ENTRIES"]})]}),Xe.others&&r.jsxs(r.Fragment,{children:[oe.length>0?r.jsx("ul",{className:"status-list",style:{maxHeight:"24rem",overflowY:"auto"},children:oe.slice().sort((c,N)=>{var ie,xe;const B=((ie=Ze(c.scheduled_at))==null?void 0:ie.getTime())??Number.POSITIVE_INFINITY,ne=((xe=Ze(N.scheduled_at))==null?void 0:xe.getTime())??Number.POSITIVE_INFINITY;return B-ne}).map(c=>{const N=At(c.name)&&At(c.coordinates)&&At(c.scheduled_at);return r.jsx("li",{id:`other-${c.id}`,style:{...Ce,...cn===`other-${c.id}`?le:{}},children:r.jsxs(nt,{to:`/logistics/others/${c.id}`,state:{fromEventId:e,highlightId:`other-${c.id}`},className:"card-link",style:{display:"grid",gridTemplateColumns:"1fr",gap:"0.25rem",flex:1},onClick:()=>{if(e)try{sessionStorage.setItem(`event-detail-highlight:${e}`,`other-${c.id}`)}catch{}On()},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"0.75rem"},children:[r.jsx("strong",{children:c.name}),r.jsx("span",{className:`badge ${N?"success":"danger"}`,style:{minWidth:"2.4ch",textAlign:"center",marginLeft:"auto",flexShrink:0},children:N?"":"!"})]}),r.jsx("div",{className:"muted",style:{display:"flex",gap:"0.35rem",flexWrap:"wrap"},children:c.scheduled_at?rs(c.scheduled_at):"Unscheduled"}),c.notes&&r.jsxs("div",{className:"muted",children:["Notes: ",c.notes]})]})},c.id)})}):r.jsx("p",{className:"muted",children:"No other logistics yet."}),r.jsx("div",{className:"form-actions",style:{marginTop:"0.5rem"},children:r.jsx("button",{type:"button",className:"ghost",onClick:()=>Ne(c=>!c),children:T?"Cancel":"Create new entry"})}),T&&r.jsxs("div",{className:"form-grid",style:{marginTop:"0.5rem"},children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Name"}),r.jsx("input",{type:"text",value:ze.name,onChange:c=>Ee(N=>({...N,name:c.target.value})),required:!0})]}),r.jsxs("label",{className:`form-field ${ft?"field-missing":""}`,children:[r.jsx("span",{children:"Coordinates"}),r.jsxs("div",{className:"input-with-button",children:[r.jsx("input",{type:"text",value:ze.coordinates,onChange:c=>Ee(N=>({...N,coordinates:c.target.value}))}),r.jsx("button",{type:"button",className:"ghost",disabled:!ze.coordinates.trim(),onClick:()=>{const c=ze.coordinates.trim();c&&window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(c)}`,"_blank")},children:"Open in Maps"})]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Scheduled at"}),r.jsx(Dt,{value:qe(ze.scheduled_at),options:{enableTime:!0,dateFormat:"Y-m-d H:i",time_24hr:!0},onChange:c=>{const N=c[0];Ee(B=>({...B,scheduled_at:N?zt(N):""}))}})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Description"}),r.jsx("textarea",{value:ze.description,onChange:c=>Ee(N=>({...N,description:c.target.value}))})]}),r.jsxs("label",{className:"form-field",style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Notes"}),r.jsx("input",{type:"text",value:ze.notes,onChange:c=>Ee(N=>({...N,notes:c.target.value}))})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"button",className:"primary",onClick:xh,children:"Save entry"}),r.jsx("button",{type:"button",className:"ghost",onClick:()=>Ne(!1),children:"Cancel"})]})]}),r.jsx("div",{className:"form-actions",style:{marginTop:"0.75rem"},children:r.jsx("button",{type:"button",className:ut,onClick:Lr,disabled:te||Ve,children:Pt})})]})]})]})},b0=()=>{const{airfieldId:e}=Mn(),n=vt(),[t,s]=o.useState(null),[a,i]=o.useState({name:"",elevation:0,coordinates:"",description:""}),[l,u]=o.useState(!0),[d,x]=o.useState(!1),[_,C]=o.useState(!1),[b,L]=o.useState(null),[y,S]=o.useState(null),E=!a.name.trim();o.useEffect(()=>{let j=!1;return(async()=>{if(e){u(!0),S(null);try{const k=await i0(Number(e));if(j)return;s(k),i({name:k.name,elevation:k.elevation,coordinates:k.coordinates,description:k.description||""})}catch(k){j||S(k instanceof Error?k.message:"Failed to load airfield")}finally{j||u(!1)}}})(),()=>{j=!0}},[e]);const p=async j=>{var P;if(j.preventDefault(),!!e){x(!0),L(null);try{const k={name:a.name.trim(),elevation:Number(a.elevation)||0,coordinates:a.coordinates.trim(),description:((P=a.description)==null?void 0:P.trim())||void 0},D=await l0(Number(e),k);s(D),i({name:D.name,elevation:D.elevation,coordinates:D.coordinates,description:D.description||""}),L("Airfield updated")}catch(k){L(k instanceof Error?k.message:"Failed to update airfield")}finally{x(!1)}}},m=async()=>{if(!(!e||_)&&window.confirm("Are you sure you want to delete this airfield?")){C(!0),L(null);try{await o0(Number(e)),n(-1)}catch(j){L(j instanceof Error?j.message:"Failed to delete airfield"),C(!1)}}};if(l)return r.jsx("p",{className:"muted",children:"Loading airfield"});if(y)return r.jsx("p",{className:"error-text",children:y});if(!t)return r.jsx("p",{className:"error-text",children:"Airfield not found."});const v=Number.isFinite(a.elevation)?id(a.elevation):null;return r.jsxs("section",{children:[r.jsxs("header",{className:"page-header",children:[r.jsx("div",{children:r.jsx("h2",{children:t.name})}),r.jsxs("div",{className:"card-actions",children:[r.jsx("button",{className:"ghost",type:"button",onClick:()=>n("/airfields/new",{state:{copyAirfield:{name:t.name,elevation:t.elevation,coordinates:t.coordinates,description:t.description}}}),children:"Make a copy"}),r.jsx("button",{className:"ghost",type:"button",onClick:()=>n(-1),children:"Back"}),r.jsx("button",{className:"ghost danger",type:"button",onClick:m,disabled:_,children:_?"Deleting":"Delete airfield"})]})]}),r.jsx("article",{className:"card",children:r.jsxs("form",{className:"form-grid",onSubmit:p,children:[r.jsxs("label",{className:`form-field ${E?"field-missing":""}`,children:[r.jsx("span",{children:"Name"}),r.jsx("input",{type:"text",value:a.name,onChange:j=>i(P=>({...P,name:j.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Elevation (m)"}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx("input",{type:"number",min:0,step:1,value:a.elevation,onChange:j=>i(P=>({...P,elevation:Number(j.target.value)})),required:!0}),r.jsx("span",{className:"muted",style:{whiteSpace:"nowrap"},children:v!==null?`${v} ft`:" ft"})]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Coordinates"}),r.jsxs("div",{className:"input-with-button",children:[r.jsx("input",{type:"text",value:a.coordinates,onChange:j=>i(P=>({...P,coordinates:j.target.value})),placeholder:"Lat, Long",required:!0,style:{minWidth:"22ch"}}),r.jsx("button",{type:"button",className:"ghost",onClick:()=>{a.coordinates.trim()&&window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(a.coordinates)}`,"_blank")},children:"Open in Maps"})]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Description"}),r.jsx("input",{type:"text",value:a.description,onChange:j=>i(P=>({...P,description:j.target.value})),placeholder:"Optional notes"})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"submit",className:"primary",disabled:d,children:d?"Saving":"Save airfield"}),b&&r.jsx("span",{className:"muted",children:b})]})]})})]})},S0=()=>{var _;const e=vt(),t=(_=Gt().state)==null?void 0:_.copyAirfield,[s,a]=o.useState({name:(t==null?void 0:t.name)||"",elevation:(t==null?void 0:t.elevation)??0,coordinates:(t==null?void 0:t.coordinates)||"",description:(t==null?void 0:t.description)||""}),[i,l]=o.useState(!1),[u,d]=o.useState(null);o.useEffect(()=>{d(null)},[]);const x=async C=>{var b;C.preventDefault(),l(!0),d(null);try{const L={name:s.name.trim(),elevation:Number(s.elevation)||0,coordinates:s.coordinates.trim(),description:((b=s.description)==null?void 0:b.trim())||void 0};await Zi(L),d("Airfield created"),e(-1)}catch(L){d(L instanceof Error?L.message:"Failed to create airfield")}finally{l(!1)}};return r.jsxs("section",{children:[r.jsxs("header",{className:"page-header",children:[r.jsx("div",{children:r.jsx("h2",{children:"Create airfield"})}),r.jsx("div",{className:"card-actions",children:r.jsx("button",{className:"ghost",type:"button",onClick:()=>e(-1),children:"Back"})})]}),r.jsx("article",{className:"card",children:r.jsxs("form",{className:"form-grid",onSubmit:x,children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Name"}),r.jsx("input",{type:"text",value:s.name,onChange:C=>a(b=>({...b,name:C.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Elevation (m)"}),r.jsx("input",{type:"number",min:0,step:1,value:s.elevation,onChange:C=>a(b=>({...b,elevation:Number(C.target.value)})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Coordinates"}),r.jsx("input",{type:"text",value:s.coordinates,onChange:C=>a(b=>({...b,coordinates:C.target.value})),placeholder:"Lat, Long",required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Description"}),r.jsx("input",{type:"text",value:s.description,onChange:C=>a(b=>({...b,description:C.target.value})),placeholder:"Optional notes"})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"submit",className:"primary",disabled:i,children:i?"Saving":"Save airfield"}),u&&r.jsx("span",{className:"muted",children:u})]})]})})]})},C0=()=>{const[e,n]=o.useState({name:"",starts_on:"",ends_on:""}),[t,s]=o.useState(null),[a,i]=o.useState(!1),l=vt(),u=async d=>{d.preventDefault(),i(!0),s(null);try{const x={name:e.name.trim(),starts_on:e.starts_on};e.ends_on&&(x.ends_on=e.ends_on),await wx(x),s("Season created"),n({name:"",starts_on:"",ends_on:""}),l("/events")}catch(x){s(x instanceof Error?x.message:"Failed to create season")}finally{i(!1)}};return r.jsxs("section",{children:[r.jsxs("header",{className:"page-header",children:[r.jsx("div",{children:r.jsx("h2",{children:"Create season"})}),r.jsx("button",{className:"ghost",type:"button",onClick:()=>l("/events"),children:"Back to events"})]}),r.jsx("article",{className:"card",children:r.jsxs("form",{className:"form-grid",onSubmit:u,children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Name"}),r.jsx("input",{type:"text",value:e.name,onChange:d=>n(x=>({...x,name:d.target.value})),placeholder:"Enter a name for this season",required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Starts on"}),r.jsx("input",{type:"date",value:e.starts_on,onChange:d=>n(x=>({...x,starts_on:d.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Ends on"}),r.jsx("input",{type:"date",value:e.ends_on,onChange:d=>n(x=>({...x,ends_on:d.target.value})),placeholder:"Optional"})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"submit",className:"primary",disabled:a,children:a?"Creating":"Create season"}),t&&r.jsx("span",{className:"muted",children:t})]})]})})]})},w0=()=>{const[e,n]=rd(),t=vt(),s=e.get("eventId")??"",[a,i]=o.useState([]),[l,u]=o.useState([]),[d,x]=o.useState(s),[_,C]=o.useState(!0),[b,L]=o.useState(null),[y,S]=o.useState(null),[E,p]=o.useState(!1),[m,v]=o.useState(!1),[j,P]=o.useState([]),[k,D]=o.useState({load_number:"",notes:"",capacity:""});o.useEffect(()=>{let R=!1;return(async()=>{C(!0),L(null);try{const[de,be,me]=await Promise.all([$t(),Kp(),Zr()]);if(R)return;const he=Array.isArray(de)?de.map(we=>({id:we.id,name:we.name})):[];i(he),u(Array.isArray(be)?be:[]),P(Array.isArray(me)?me:[])}catch(de){R||L(de instanceof Error?de.message:"Failed to load manifests")}finally{R||C(!1)}})(),()=>{R=!0}},[]);const M=o.useMemo(()=>{const R=Number(d);return R?l.filter(ae=>ae.event_id===R).sort((ae,de)=>ae.load_number-de.load_number):[]},[l,d]),J=o.useMemo(()=>a.find(R=>R.id===Number(d)),[a,d]),se=async R=>{R.preventDefault();const ae=Number(d);if(ae){p(!0),S(null);try{const de={event_id:ae,load_number:Number(k.load_number),notes:k.notes.trim()||void 0,capacity:k.capacity?Number(k.capacity):void 0},be=await Dx(de);u(me=>[...me,be].sort((he,we)=>he.load_number-we.load_number)),D({load_number:"",notes:"",capacity:""}),v(!1),S("Manifest added")}catch(de){S(de instanceof Error?de.message:"Failed to create manifest")}finally{p(!1)}}};return r.jsxs("section",{children:[r.jsxs("header",{className:"page-header",children:[r.jsx("div",{children:r.jsx("h2",{children:"Manifest"})}),d&&r.jsxs("button",{type:"button",className:"ghost",onClick:()=>t(`/events/${d}`),children:["Back to event",J?`: ${J.name}`:""]})]}),r.jsxs("article",{className:"card",children:[r.jsx("div",{className:"form-grid",style:{marginBottom:"1rem"},children:r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Event"}),r.jsxs("select",{value:d,onChange:R=>{const ae=R.target.value;x(ae),n(ae?{eventId:ae}:{})},children:[r.jsx("option",{value:"",children:"Select an event"}),a.map(R=>r.jsx("option",{value:R.id,children:R.name},R.id))]})]})}),_?r.jsx("p",{className:"muted",children:"Loading manifests"}):b?r.jsx("p",{className:"error-text",children:b}):d?r.jsxs(r.Fragment,{children:[M.length===0?r.jsx("p",{className:"muted",children:"No manifests for this event yet."}):r.jsx("div",{className:"stack",children:M.map(R=>{const ae=Array.isArray(R.participant_ids)?R.participant_ids:[],de=ae.reduce((he,we)=>{const ue=j.find(fe=>fe.id===we);return((ue==null?void 0:ue.roles)||[]).includes("Staff")?he+1:he},0),be=ae.length-de,me=R.capacity!=null&&R.capacity>0?ae.length>=R.capacity:!1;return r.jsx(nt,{to:`/manifests/${R.id}?eventId=${d}`,className:"card-link",style:{textDecoration:"none"},children:r.jsx("article",{className:"card",children:r.jsxs("header",{className:"card-header",children:[r.jsxs("div",{children:[r.jsxs("h3",{children:["Load ",R.load_number]}),r.jsxs("p",{className:"muted",style:{marginBottom:0},children:["Capacity: ",R.capacity??"Not set","  Participants: ",be,"  Staff: ",de]}),R.notes&&r.jsxs("p",{className:"muted",style:{margin:0},children:["Notes: ",R.notes]})]}),me?r.jsx("span",{className:"badge danger",children:"FULL"}):r.jsx("span",{className:"badge success",children:"Slots Available"})]})})},R.id)})}),r.jsx("hr",{}),!m&&r.jsx("div",{className:"form-actions",children:r.jsx("button",{type:"button",className:"ghost",onClick:()=>v(!0),children:"Add manifest"})}),m&&r.jsxs("form",{className:"form-grid",onSubmit:se,children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Load number"}),r.jsx("input",{type:"number",min:1,value:k.load_number,onChange:R=>D(ae=>({...ae,load_number:R.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Capacity"}),r.jsx("input",{type:"number",min:0,value:k.capacity,onChange:R=>D(ae=>({...ae,capacity:R.target.value})),placeholder:"Slots available"})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Notes"}),r.jsx("input",{type:"text",value:k.notes,onChange:R=>D(ae=>({...ae,notes:R.target.value})),placeholder:"Optional notes"})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"submit",className:"primary",disabled:E||!d,children:E?"Saving":"Add manifest"}),r.jsx("button",{type:"button",className:"ghost",onClick:()=>v(!1),disabled:E,children:"Cancel"}),y&&r.jsx("span",{className:"muted",children:y})]})]})]}):r.jsx("p",{className:"muted",children:"Choose an event to see its manifests."})]})]})},k0=e=>[...e].sort((n,t)=>t.name.localeCompare(n.name)),no=e=>[...e].sort((n,t)=>n.full_name.localeCompare(t.full_name,void 0,{sensitivity:"base"})),E0=()=>{const[e,n]=rd(),[t,s]=o.useState([]),[a,i]=o.useState([]),[l,u]=o.useState([]),[d,x]=o.useState(()=>e.get("season")||""),[_,C]=o.useState(()=>e.get("event")||""),[b,L]=o.useState(()=>{const R=e.get("roles");return R?R.split(",").filter(Boolean):[]}),[y,S]=o.useState(()=>e.get("q")||""),[E,p]=o.useState(!0),[m,v]=o.useState(null),j=R=>R.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),P=R=>{if(!y.trim())return R;const ae=y.trim(),de=new RegExp(`(${j(ae)})`,"ig");return R.split(de).map((be,me)=>be.toLowerCase()===ae.toLowerCase()?r.jsx("mark",{children:be},me):r.jsx("span",{children:be},me))};o.useEffect(()=>{const R=new URLSearchParams;d&&R.set("season",d),_&&R.set("event",_),b.length&&R.set("roles",b.join(",")),y&&R.set("q",y),n(R,{replace:!0})},[d,_,b,y,n]),o.useEffect(()=>{let R=!1;return(async()=>{p(!0),v(null);try{const[de,be,me]=await Promise.all([tr(),$t(),Zr()]);if(R)return;s(Array.isArray(de)?de:[]),i(Array.isArray(be)?be:[]),u(Array.isArray(me)?me:[])}catch(de){R||v(de instanceof Error?de.message:"Failed to load participants")}finally{R||p(!1)}})(),()=>{R=!0}},[]);const k=o.useMemo(()=>{const R=new Map;return l.forEach(ae=>R.set(ae.id,ae)),R},[l]),D=o.useMemo(()=>{const R=new Map;return a.forEach(ae=>{(Array.isArray(ae.participant_ids)?ae.participant_ids:[]).forEach(de=>{const be=R.get(de)||[];be.push(ae),R.set(de,be)})}),R},[a]),M=o.useMemo(()=>{if(!d)return a;const R=Number(d);return a.filter(ae=>ae.season_id===R)},[a,d]),J=o.useMemo(()=>{const R=he=>{const we=b.filter(ge=>ge!=="Participant");if(!we.length)return!0;const ue=Array.isArray(he==null?void 0:he.roles)?he==null?void 0:he.roles:[];return we.every(ge=>ue.includes(ge))},ae=he=>y.trim()?((he==null?void 0:he.full_name)||"").toLowerCase().includes(y.trim().toLowerCase()):!0,de=(he,we,ue)=>{var Y;if(ue.has(he))return;ue.add(he);const ge=k.get(he);if(!R(ge)||!ae(ge))return;const fe=((Y=D.get(he))==null?void 0:Y.length)||0;we.push({id:he,full_name:(ge==null?void 0:ge.full_name)||`Participant #${he}`,email:ge==null?void 0:ge.email,phone:ge==null?void 0:ge.phone,experience_level:ge==null?void 0:ge.experience_level,emergency_contact:ge==null?void 0:ge.emergency_contact,eventCount:fe})},be=new Set,me=[];if(_){const he=a.find(we=>we.id===Number(_));return he?((Array.isArray(he.participant_ids)?he.participant_ids:[]).forEach(we=>de(we,me,be)),no(me)):[]}return d?(M.forEach(he=>{(Array.isArray(he.participant_ids)?he.participant_ids:[]).forEach(we=>de(we,me,be))}),no(me)):(l.forEach(he=>de(he.id,me,be)),no(me))},[_,d,b,y,a,M,l,k,D]),se=o.useMemo(()=>{const R=new URLSearchParams;d&&R.set("season",d),_&&R.set("event",_),b.length&&R.set("roles",b.join(",")),y&&R.set("q",y);const ae=R.toString();return ae?`?${ae}`:""},[d,_,b,y]);return r.jsxs("section",{className:"stack",children:[r.jsxs("header",{className:"page-header",style:{position:"relative",paddingRight:"10rem"},children:[r.jsx("div",{children:r.jsx("h2",{children:"Participants"})}),r.jsx(nt,{className:"primary button-link",to:"/participants/new",style:{position:"absolute",right:0,top:0},children:"Add participant"})]}),r.jsxs("article",{className:"card",children:[r.jsxs("div",{className:"form-grid",style:{gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",alignItems:"end"},children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Season"}),r.jsxs("select",{value:d,onChange:R=>{x(R.target.value),C("")},style:{width:"100%",minWidth:"140px"},children:[r.jsx("option",{value:"",children:"All seasons"}),k0(t).map(R=>r.jsx("option",{value:R.id,children:R.name},R.id))]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Event"}),r.jsxs("select",{value:_,onChange:R=>C(R.target.value),style:{width:"100%",minWidth:"160px"},children:[r.jsx("option",{value:"",children:"All events"}),M.map(R=>r.jsx("option",{value:R.id,children:R.name},R.id))]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Name"}),r.jsx("input",{type:"text",placeholder:"Search by name",value:y,onChange:R=>S(R.target.value)})]}),r.jsxs("div",{className:"form-field",style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Roles"}),r.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem",width:"100%"},children:[el.filter(R=>R!=="Participant").map(R=>{const ae=b.includes(R);return r.jsxs("label",{className:"badge neutral",style:{display:"inline-flex",alignItems:"center",gap:"0.35rem"},children:[r.jsx("input",{type:"checkbox",checked:ae,onChange:de=>{L(be=>{const me=new Set(be);return de.target.checked?me.add(R):me.delete(R),Array.from(me)})}}),R]},R)}),b.length>0&&r.jsx("button",{type:"button",className:"ghost",onClick:()=>L([]),style:{padding:"0.2rem 0.6rem"},children:"Clear"})]})]})]}),d&&M.length===0&&r.jsx("p",{className:"muted",children:"No events for this season."})]}),r.jsxs("article",{className:"card",children:[r.jsxs("header",{className:"card-header",children:[r.jsx("div",{children:r.jsx("h3",{children:"Participants"})}),r.jsxs("span",{className:"badge neutral",children:[J.length," ",J.length===1?"participant":"participants"]})]}),E?r.jsx("p",{className:"muted",children:"Loading participants"}):m?r.jsx("p",{className:"error-text",children:m}):J.length===0?r.jsx("p",{className:"muted",children:"No participants match the selected filters."}):r.jsx("ul",{className:"status-list",children:J.map(R=>r.jsxs("li",{children:[r.jsxs(nt,{to:{pathname:`/participants/${R.id}`,search:se},className:"card-link",style:{flex:1},children:[r.jsx("strong",{children:P(R.full_name)}),r.jsx("div",{className:"muted",children:R.email||"No email on file"}),r.jsxs("div",{className:"muted",children:["Experience: ",R.experience_level||"Not provided"]})]}),r.jsxs("span",{className:"badge neutral",children:[R.eventCount," ",R.eventCount===1?"event":"events"]})]},R.id))})]})]})},A0=()=>{const[e,n]=o.useState({full_name:"",email:"",phone:"",experience_level:"",emergency_contact:"",roles:["Participant"]}),[t,s]=o.useState(!1),[a,i]=o.useState(null),l=vt(),u=async d=>{var x,_,C;d.preventDefault(),s(!0),i(null);try{await Ia({full_name:e.full_name.trim(),email:e.email.trim(),phone:((x=e.phone)==null?void 0:x.trim())||void 0,experience_level:((_=e.experience_level)==null?void 0:_.trim())||void 0,emergency_contact:((C=e.emergency_contact)==null?void 0:C.trim())||void 0,roles:e.roles&&e.roles.length>0?e.roles:["Participant"]}),i("Participant created"),l("/participants")}catch(b){i(b instanceof Error?b.message:"Failed to create participant")}finally{s(!1)}};return r.jsxs("section",{children:[r.jsxs("header",{className:"page-header",children:[r.jsxs("div",{children:[r.jsx("h2",{children:"Create participant"}),r.jsx("p",{children:"Add a new member to the Innhopp Family."})]}),r.jsx("button",{className:"ghost",type:"button",onClick:()=>l("/participants"),children:"Back to participants"})]}),r.jsx("article",{className:"card",children:r.jsxs("form",{className:"form-grid",onSubmit:u,children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Full name"}),r.jsx("input",{type:"text",value:e.full_name,onChange:d=>n(x=>({...x,full_name:d.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Email"}),r.jsx("input",{type:"email",value:e.email,onChange:d=>n(x=>({...x,email:d.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Phone"}),r.jsx("input",{type:"text",value:e.phone,onChange:d=>n(x=>({...x,phone:d.target.value})),placeholder:"Optional"})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Experience level"}),r.jsx("input",{type:"text",value:e.experience_level,onChange:d=>n(x=>({...x,experience_level:d.target.value})),placeholder:"Optional"})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Emergency contact"}),r.jsx("input",{type:"text",value:e.emergency_contact,onChange:d=>n(x=>({...x,emergency_contact:d.target.value})),placeholder:"Optional"})]}),r.jsxs("div",{className:"form-field",style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Roles"}),r.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:el.map(d=>{var _;const x=(_=e.roles)==null?void 0:_.includes(d);return r.jsxs("label",{className:"badge neutral",style:{display:"inline-flex",alignItems:"center",gap:"0.35rem"},children:[r.jsx("input",{type:"checkbox",checked:x,onChange:C=>{n(b=>{const L=new Set(b.roles||[]);C.target.checked?L.add(d):L.delete(d);const y=Array.from(L);return{...b,roles:y.length>0?y:["Participant"]}})}}),d]},d)})})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"submit",className:"primary",disabled:t,children:t?"Creating":"Create participant"}),a&&r.jsx("span",{className:"muted",children:a})]})]})})]})},I0=["Participant","Skydiver","Staff","Ground Crew","Jump Master","Jump Leader","Photo","Pilot","COP","Driver"],D0=()=>{const{participantId:e}=Mn(),n=vt(),t=Gt();t.search&&`${t.search}`;const[s,a]=o.useState(null),[i,l]=o.useState({full_name:"",email:"",phone:"",experience_level:"",emergency_contact:"",roles:["Participant"]}),[u,d]=o.useState(!0),[x,_]=o.useState(null),[C,b]=o.useState(null),[L,y]=o.useState(!1),[S,E]=o.useState(!1);o.useEffect(()=>{let m=!1;return(async()=>{if(e){d(!0),b(null);try{const j=await Mx(Number(e));if(m)return;a(j),l({full_name:j.full_name,email:j.email,phone:j.phone||"",experience_level:j.experience_level||"",emergency_contact:j.emergency_contact||"",roles:Array.isArray(j.roles)&&j.roles.length>0?j.roles:["Participant"]})}catch(j){m||b(j instanceof Error?j.message:"Failed to load participant")}finally{m||d(!1)}}})(),()=>{m=!0}},[e]);const p=async m=>{var j,P,k;if(m.preventDefault(),!e)return;const v=i.roles&&i.roles.length>0?i.roles:["Participant"];y(!0),_(null);try{const D=await Ox(Number(e),{full_name:i.full_name.trim(),email:i.email.trim(),phone:((j=i.phone)==null?void 0:j.trim())||void 0,experience_level:((P=i.experience_level)==null?void 0:P.trim())||void 0,emergency_contact:((k=i.emergency_contact)==null?void 0:k.trim())||void 0,roles:v});a(D),_("Participant updated")}catch(D){_(D instanceof Error?D.message:"Failed to update participant")}finally{y(!1)}};return u?r.jsx("p",{className:"muted",children:"Loading participant"}):C?r.jsx("p",{className:"error-text",children:C}):s?r.jsxs("section",{children:[r.jsxs("header",{className:"page-header",children:[r.jsxs("div",{children:[r.jsx("h2",{children:s.full_name}),r.jsx("p",{className:"muted",children:s.email})]}),r.jsxs("div",{className:"card-actions",children:[r.jsx("button",{className:"ghost",type:"button",onClick:()=>{var j,P;const m=(j=t.state)==null?void 0:j.fromEventId,v=(P=t.state)==null?void 0:P.highlightId;if(m&&v)try{sessionStorage.setItem(`event-detail-highlight:${m}`,v)}catch{}n(-1)},children:"Back"}),r.jsx("button",{className:"ghost danger",type:"button",disabled:S,onClick:async()=>{if(e&&window.confirm("Delete this participant? This cannot be undone."))try{E(!0),await $x(Number(e)),n(-1)}catch(m){if((m==null?void 0:m.status)===404){n(-1);return}_(m instanceof Error?m.message:"Failed to delete participant"),E(!1)}},children:S?"Deleting":"Delete"})]})]}),r.jsx("article",{className:"card",children:r.jsxs("form",{className:"form-grid",onSubmit:p,children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Full name"}),r.jsx("input",{type:"text",value:i.full_name,onChange:m=>l(v=>({...v,full_name:m.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Email"}),r.jsx("input",{type:"email",value:i.email,onChange:m=>l(v=>({...v,email:m.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Phone"}),r.jsx("input",{type:"text",value:i.phone,onChange:m=>l(v=>({...v,phone:m.target.value})),placeholder:"Optional"})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Experience level"}),r.jsx("input",{type:"text",value:i.experience_level,onChange:m=>l(v=>({...v,experience_level:m.target.value})),placeholder:"Optional"})]}),r.jsxs("div",{className:"form-field",style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Roles"}),r.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:I0.map(m=>{var j;const v=(j=i.roles)==null?void 0:j.includes(m);return r.jsxs("label",{className:"badge neutral",style:{display:"inline-flex",alignItems:"center",gap:"0.35rem"},children:[r.jsx("input",{type:"checkbox",checked:v,onChange:P=>{l(k=>{const D=new Set(k.roles||[]);P.target.checked?D.add(m):D.delete(m);const M=Array.from(D);return{...k,roles:M.length>0?M:["Participant"]}})}}),m]},m)})})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Emergency contact"}),r.jsx("input",{type:"text",value:i.emergency_contact,onChange:m=>l(v=>({...v,emergency_contact:m.target.value})),placeholder:"Optional"})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"submit",className:"primary",disabled:L,children:L?"Saving":"Save participant"}),x&&r.jsx("span",{className:"muted",children:x})]})]})})]}):r.jsx("p",{className:"error-text",children:"Participant not found."})},T0=(e,n=!1)=>e?Wn(e,{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:n?!1:void 0}):"Not scheduled",P0=()=>{const[e,n]=o.useState([]),[t,s]=o.useState([]),[a,i]=o.useState([]),[l,u]=o.useState(""),[d,x]=o.useState(""),[_,C]=o.useState(""),[b,L]=o.useState(""),[y,S]=o.useState(!0),[E,p]=o.useState(null);o.useEffect(()=>{let j=!1;return(async()=>{S(!0),p(null);try{const[k,D,M]=await Promise.all([tr(),$t(),Ta()]);if(j)return;n(Array.isArray(k)?k:[]),s(Array.isArray(D)?D:[]),i(Array.isArray(M)?M:[])}catch(k){j||p(k instanceof Error?k.message:"Failed to load logistics")}finally{j||S(!1)}})(),()=>{j=!0}},[]);const m=o.useMemo(()=>{if(!l)return t;const j=Number(l);return t.filter(P=>P.season_id===j)},[t,l]),v=o.useMemo(()=>a.filter(j=>!(l&&j.season_id!==Number(l)||d&&j.event_id!==Number(d)||_&&!j.pickup_location.toLowerCase().includes(_.toLowerCase())||b&&!j.destination.toLowerCase().includes(b.toLowerCase()))).sort((j,P)=>{var M,J;const k=((M=Ze(j.scheduled_at))==null?void 0:M.getTime())??Number.POSITIVE_INFINITY,D=((J=Ze(P.scheduled_at))==null?void 0:J.getTime())??Number.POSITIVE_INFINITY;return k===D?`${j.pickup_location} ${j.destination}`.localeCompare(`${P.pickup_location} ${P.destination}`):k-D}),[a,l,d,_,b]);return r.jsxs("section",{children:[r.jsxs("header",{className:"page-header",children:[r.jsx("div",{children:r.jsx("h2",{children:"Transport"})}),r.jsxs("div",{className:"card-actions",children:[r.jsx(nt,{className:"ghost",to:"/logistics",style:{fontWeight:700,fontSize:"1.05rem"},children:"Back to logistics"}),r.jsx(nt,{className:"primary button-link",to:"/logistics/new",children:"Create route"})]})]}),r.jsxs("div",{className:"stack",children:[r.jsx("article",{className:"card",children:r.jsxs("div",{className:"form-grid",style:{gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",alignItems:"end",gap:"0.75rem"},children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Season"}),r.jsxs("select",{value:l,onChange:j=>{u(j.target.value),x("")},style:{width:"100%",minWidth:"180px",maxWidth:"25%"},children:[r.jsx("option",{value:"",children:"All seasons"}),[...e].sort((j,P)=>P.name.localeCompare(j.name)).map(j=>r.jsx("option",{value:j.id,children:j.name},j.id))]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Event"}),r.jsxs("select",{value:d,onChange:j=>x(j.target.value),style:{width:"100%",minWidth:"180px"},children:[r.jsx("option",{value:"",children:"All events"}),m.map(j=>r.jsx("option",{value:j.id,children:j.name},j.id))]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Pickup location"}),r.jsx("input",{type:"text",value:_,onChange:j=>C(j.target.value),placeholder:"Filter pickup"})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Destination"}),r.jsx("input",{type:"text",value:b,onChange:j=>L(j.target.value),placeholder:"Filter destination"})]})]})}),r.jsxs("article",{className:"card",children:[r.jsxs("header",{className:"card-header",children:[r.jsx("div",{children:r.jsx("h3",{children:"Transport routes"})}),r.jsxs("span",{className:"badge neutral",children:[v.length," ",v.length===1?"route":"routes"]})]}),y?r.jsx("p",{className:"muted",children:"Loading transports"}):E?r.jsx("p",{className:"error-text",children:E}):v.length===0?r.jsx("p",{className:"muted",children:"No transports match the selected filters."}):r.jsx("ul",{className:"status-list",style:{maxHeight:"24rem",overflowY:"auto"},children:v.map(j=>{var P;return r.jsx("li",{children:r.jsxs(nt,{to:`/logistics/${j.id}`,className:"card-link",style:{flex:1},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"0.5rem"},children:[r.jsxs("div",{children:[r.jsxs("strong",{children:[j.pickup_location,"  ",j.destination]}),r.jsx("div",{className:"muted",children:T0(j.scheduled_at)})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.35rem",flexShrink:0},children:[r.jsx("span",{className:"badge",style:{backgroundColor:"#2b8a3e",color:"#fff"},children:((P=t.find(k=>k.id===j.event_id))==null?void 0:P.name)||`Event #${j.event_id??""}`}),r.jsxs("span",{className:"badge neutral",children:[j.passenger_count," passenger",j.passenger_count===1?"":"s"]})]})]}),j.vehicles&&j.vehicles.length>0&&r.jsxs("div",{className:"muted",children:["Vehicles:"," ",j.vehicles.map(k=>`${k.name}${k.driver?` (Driver: ${k.driver})`:""}  Cap: ${k.passenger_capacity}`).join("; ")]})]})},j.id)})})]})]})]})},M0=()=>{var G;const e=vt(),t=(G=Gt().state)==null?void 0:G.copyTransport,s=Array.isArray(t==null?void 0:t.vehicles)&&t.vehicles.length?t.vehicles.filter(O=>O&&typeof O.name=="string"&&typeof O.passenger_capacity<"u"):[],a=Array.isArray(t==null?void 0:t.vehicle_ids)?t.vehicle_ids.filter(O=>typeof O=="number"):[],[i,l]=o.useState({pickup_location:(t==null?void 0:t.pickup_location)||"",destination:(t==null?void 0:t.destination)||"",passenger_count:(t==null?void 0:t.passenger_count)??"",scheduled_at:(t==null?void 0:t.scheduled_at)||""}),[u,d]=o.useState([]),[x,_]=o.useState([]),[C,b]=o.useState([]),[L,y]=o.useState([]),[S,E]=o.useState([]),[p,m]=o.useState([]),[v,j]=o.useState(""),[P,k]=o.useState(""),[D,M]=o.useState(t!=null&&t.event_id?String(t.event_id):""),[J,se]=o.useState(a),[R,ae]=o.useState(!1),[de,be]=o.useState({name:"",driver:"",passenger_capacity:"",notes:""}),[me,he]=o.useState(!1),[we,ue]=o.useState(null),ge=o.useRef(!0),[fe,Y]=o.useState(s);o.useEffect(()=>{if(!t)return;ge.current=!0,M(t.event_id?String(t.event_id):""),l({pickup_location:t.pickup_location||"",destination:t.destination||"",passenger_count:t.passenger_count??"",scheduled_at:t.scheduled_at||""});const O=s.map(V=>typeof V.event_vehicle_id=="number"?V.event_vehicle_id:void 0).filter(V=>typeof V=="number"),$=a.length>0?a:O;se($),Y(s)},[t]),o.useEffect(()=>{let O=!1;return(async()=>{try{const[V,Z,Ie]=await Promise.all([$t(),Ra(),Mr()]);if(O)return;d(Array.isArray(V)?V:[]),_(Array.isArray(Z)?Z:[]),b(Array.isArray(Ie)?Ie:[])}catch{}})(),()=>{O=!0}},[]),o.useEffect(()=>{if(ge.current){ge.current=!1;return}se([]),ae(!1),j(""),k(""),l(O=>({...O,pickup_location:"",destination:""}))},[D]),o.useEffect(()=>{if(!D||i.scheduled_at)return;const O=u.find($=>$.id===Number(D));if(O!=null&&O.starts_at){const $=Ze(O.starts_at);$&&($.setUTCHours(9,0,0,0),l(V=>({...V,scheduled_at:$.toISOString()})))}},[D,u,i.scheduled_at]);const ee=()=>{ae(!0),be({name:"",driver:"",passenger_capacity:"",notes:""})},re=O=>{se($=>$.filter(V=>V!==O))},ce=async()=>{if(!(!D||!de.name.trim()))try{const O=await Zn({event_id:Number(D),name:de.name.trim(),driver:de.driver.trim()||void 0,passenger_capacity:Number(de.passenger_capacity)||0,notes:de.notes.trim()||void 0});_($=>[O,...$]),se($=>$.includes(O.id)?$:[...$,O.id]),be({name:"",driver:"",passenger_capacity:"",notes:""}),ae(!1)}catch(O){ue(O instanceof Error?O.message:"Failed to create vehicle")}},pe=async O=>{O.preventDefault(),he(!0),ue(null);const $=!!t;try{let V=[...J];if(D){const Ue=fe;if(Ue.length>0){for(const te of Ue){if(te.event_vehicle_id&&!V.includes(te.event_vehicle_id)){V.push(te.event_vehicle_id);continue}if(!te.event_vehicle_id){const lt=await Zn({event_id:Number(D),name:te.name,driver:te.driver||"",passenger_capacity:Number(te.passenger_capacity)||0,notes:te.notes||""});V.push(lt.id)}}se(V),Y([])}}const Z={pickup_location:i.pickup_location.trim(),destination:i.destination.trim(),passenger_count:Number(i.passenger_count)||0,scheduled_at:i.scheduled_at?i.scheduled_at:void 0,event_id:Number(D),vehicle_ids:[...V]};if(R&&de.name.trim()){const Ue=await Zn({event_id:Number(D),name:de.name.trim(),driver:de.driver.trim()||void 0,passenger_capacity:Number(de.passenger_capacity)||0,notes:de.notes.trim()||void 0});V.push(Ue.id),Z.vehicle_ids=[...V]}const Ie=await ah(Z);if(ue("Transport route created"),Ie!=null&&Ie.id&&D)try{sessionStorage.setItem(`event-schedule-highlight:${D}`,`t-${Ie.id}`)}catch{}e($?-2:-1)}catch(V){ue(V instanceof Error?V.message:"Failed to create transport")}finally{he(!1)}},Ae=i.pickup_location&&i.destination?`${i.pickup_location}  ${i.destination}`:"",_e=(O,$)=>`${O}::${$}`,Fe=o.useMemo(()=>{var Ue;const O=[],$=new Set,V=u.find(te=>te.id===Number(D)),Z=(Ue=V==null?void 0:V.innhopps)!=null&&Ue.length&&Array.isArray(V.innhopps)?V.innhopps.map(te=>({valueKey:_e("Innhopp",`${te.sequence?`#${te.sequence} `:""}${te.name||"Untitled innhopp"}`.trim()),label:`${te.sequence?`#${te.sequence} `:""}${te.name||"Untitled innhopp"}`.trim(),type:"Innhopp"})):[];Z.length&&(Z.forEach(te=>$.add(te.label)),O.push({label:"Innhopps",options:Z}));const Ie=V&&Array.isArray(V.airfield_ids)?C.filter(te=>V.airfield_ids.includes(te.id)):[];return Ie.length&&(Ie.forEach(te=>$.add(te.name||`Airfield #${te.id}`)),O.push({label:"Airfields",options:Ie.map(te=>({valueKey:_e("Airfield",te.name||`Airfield #${te.id}`),label:te.name||`Airfield #${te.id}`,type:"Airfield"}))})),L.length&&(L.forEach(te=>$.add(te.name||`Accommodation #${te.id}`)),O.push({label:"Accommodations",options:L.map(te=>({valueKey:_e("Accommodation",te.name||`Accommodation #${te.id}`),label:te.name||`Accommodation #${te.id}`,type:"Accommodation"}))})),S.length&&(S.forEach(te=>$.add(te.name||`Other #${te.id}`)),O.push({label:"Other",options:S.map(te=>({valueKey:_e("Other",te.name||`Other #${te.id}`),label:te.name||`Other #${te.id}`,type:"Other"}))})),p.length&&(p.forEach(te=>$.add(te.name||`Meal #${te.id}`)),O.push({label:"Meals",options:p.map(te=>({valueKey:_e("Meal",te.name||`Meal #${te.id}`),label:te.name||`Meal #${te.id}`,type:"Meal"}))})),O},[L,C,u,S,p,D,i.pickup_location,i.destination]);o.useEffect(()=>{let O=!1;return(async()=>{if(!D){y([]),E([]),m([]);return}try{const[V,Z,Ie]=await Promise.all([ur(Number(D)),Hn(),Bn()]);if(O)return;y(Array.isArray(V)?V:[]),E(Array.isArray(Z)?Z.filter(Ue=>Ue.event_id===Number(D)):[]),m(Array.isArray(Ie)?Ie.filter(Ue=>Ue.event_id===Number(D)):[])}catch{O||(y([]),E([]),m([]))}})(),()=>{O=!0}},[D]);const Te=O=>O.toLowerCase().replace(/^#?\s*\d+\s*/,"").trim(),Ge=O=>Fe.flatMap(V=>V.options).find(V=>V.valueKey===O),Ye=O=>{var V,Z;const $=Fe.flatMap(Ie=>Ie.options);return((V=$.find(Ie=>Ie.label===O))==null?void 0:V.valueKey)||((Z=$.find(Ie=>Te(Ie.label)===Te(O)))==null?void 0:Z.valueKey)},Qe=O=>{const $=u.find(Ue=>Ue.id===Number(D)),V=qe($==null?void 0:$.starts_at)||null,Z=qe($==null?void 0:$.ends_at)||null;if(O){const Ue=qe(O);if(Ue)return Ue}const Ie=new Date;if(V&&Z)return Ie<V?V:Ie>Z?Z:Ie;if(V)return V;if(Z)return Z};return o.useEffect(()=>{if(!i.pickup_location){j("");return}const O=Ge(v);if(O&&O.label===i.pickup_location)return;const $=Ye(i.pickup_location);if($&&$!==v){const V=Ge($);j($),V&&l(Z=>({...Z,pickup_location:V.label}))}},[Fe,i.pickup_location,v]),o.useEffect(()=>{if(!i.destination){k("");return}const O=Ge(P);if(O&&O.label===i.destination)return;const $=Ye(i.destination);if($&&$!==P){const V=Ge($);k($),V&&l(Z=>({...Z,destination:V.label}))}},[Fe,i.destination,P]),r.jsxs("section",{children:[r.jsxs("header",{className:"page-header",children:[r.jsxs("div",{children:[r.jsx("h2",{children:"Create transport route"}),Ae&&r.jsx("p",{children:Ae})]}),r.jsx("button",{className:"ghost",type:"button",onClick:()=>e(-1),children:"Back"})]}),r.jsxs("form",{onSubmit:pe,children:[r.jsx("article",{className:"card",children:r.jsxs("div",{className:"form-grid",children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Event"}),r.jsxs("select",{value:D,onChange:O=>M(O.target.value),required:!0,children:[r.jsx("option",{value:"",children:"Select event"}),u.map(O=>r.jsx("option",{value:O.id,children:O.name},O.id))]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Pickup location"}),r.jsxs("select",{value:v,onChange:O=>{const $=O.target.value;j($);const V=Ge($);l(Z=>({...Z,pickup_location:V?V.label:""}))},required:!0,children:[r.jsx("option",{value:"",children:"Select pickup"}),Fe.map(O=>O.options.length>0&&r.jsx("optgroup",{label:O.label,children:O.options.map($=>{const V=$.valueKey;return r.jsx("option",{value:V,children:$.label},`${O.label}-${V}`)})},O.label))]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Destination"}),r.jsxs("select",{value:P,onChange:O=>{const $=O.target.value;k($);const V=Ge($);l(Z=>({...Z,destination:V?V.label:""}))},required:!0,children:[r.jsx("option",{value:"",children:"Select destination"}),Fe.map(O=>O.options.length>0&&r.jsx("optgroup",{label:O.label,children:O.options.map($=>{const V=$.valueKey;return r.jsx("option",{value:V,children:$.label},`${O.label}-${V}`)})},O.label))]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Passenger count"}),r.jsx("input",{type:"number",min:0,value:i.passenger_count,onChange:O=>l($=>({...$,passenger_count:O.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Scheduled at"}),r.jsx(Dt,{value:qe(i.scheduled_at),options:{enableTime:!0,dateFormat:"Y-m-d H:i",time_24hr:!0,defaultDate:Qe(i.scheduled_at)},onChange:O=>{const $=O[0];l(V=>({...V,scheduled_at:$?zt($):""}))}})]})]})}),r.jsx("article",{className:"card",children:r.jsxs("div",{className:"form-field",style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Vehicles"}),J.length>0&&r.jsx("ul",{className:"status-list",style:{marginTop:"0.5rem"},children:J.map(O=>{const $=x.find(V=>V.id===O);return $?r.jsx("li",{children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",justifyContent:"space-between",width:"100%"},children:[r.jsxs(nt,{to:`/logistics/vehicles/${$.id}`,className:"card-link",style:{flex:1,textDecoration:"none"},children:[r.jsx("strong",{children:$.name}),r.jsxs("div",{className:"muted",children:[$.driver?`Driver: ${$.driver}  `:"","Capacity: ",$.passenger_capacity]}),$.notes&&r.jsxs("div",{className:"muted",children:["Notes: ",$.notes]})]}),r.jsx("button",{type:"button",className:"ghost danger",onClick:()=>re(O),children:"Remove"})]})},O):null})}),x.length>0&&r.jsx("div",{className:"form-grid",style:{marginTop:"0.5rem"},children:r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Add vehicle"}),r.jsx("div",{className:"form-actions",style:{gap:"0.5rem",alignItems:"center"},children:r.jsxs("select",{value:"",onChange:O=>{const $=Number(O.target.value);$&&(J.includes($)||se(V=>[...V,$]))},children:[r.jsx("option",{value:"",children:"Choose vehicle"}),x.filter(O=>O.event_id===Number(D)).map(O=>r.jsxs("option",{value:O.id,children:[O.name," ",O.driver?`(${O.driver})`:"","  ",O.passenger_capacity," pax"]},O.id))]})})]})}),r.jsx("div",{className:"form-actions",style:{marginTop:"0.5rem",justifyContent:"flex-start",marginLeft:"-1.5rem"},children:r.jsx("button",{type:"button",className:"ghost",onClick:ee,children:"Create new vehicle"})}),R&&r.jsxs("div",{className:"form-grid",style:{marginTop:"0.5rem"},children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Vehicle name"}),r.jsx("input",{type:"text",value:de.name,onChange:O=>be($=>({...$,name:O.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Driver"}),r.jsx("input",{type:"text",value:de.driver,onChange:O=>be($=>({...$,driver:O.target.value}))})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Passenger capacity"}),r.jsx("input",{type:"number",min:0,value:de.passenger_capacity,onChange:O=>be($=>({...$,passenger_capacity:O.target.value}))})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Notes"}),r.jsx("input",{type:"text",value:de.notes,onChange:O=>be($=>({...$,notes:O.target.value}))})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"button",className:"primary",onClick:ce,children:"Save vehicle"}),r.jsx("button",{type:"button",className:"ghost",onClick:()=>{ae(!1),be({name:"",driver:"",passenger_capacity:"",notes:""})},children:"Cancel"})]})]})]})}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"submit",className:"primary",disabled:me,children:me?"Creating":"Create transport"}),we&&r.jsx("span",{className:"muted",children:we})]})]})]})},ss=e=>!!e&&e.trim().length>0,oi=e=>e.replace(/^#\s*\d+\s*/,"").trim().toLowerCase(),O0=()=>{const{transportId:e}=Mn(),n=vt(),[t,s]=o.useState({pickup_location:"",destination:"",passenger_count:"",scheduled_at:"",notes:""}),[a,i]=o.useState(!1),[l,u]=o.useState(""),[d,x]=o.useState(!1),[_,C]=o.useState([]),[b,L]=o.useState([]),[y,S]=o.useState([]),[E,p]=o.useState([]),[m,v]=o.useState([]),[j,P]=o.useState([]),[k,D]=o.useState([]),[M,J]=o.useState(""),[se,R]=o.useState(!0),[ae,de]=o.useState(!1),[be,me]=o.useState(null),[he,we]=o.useState([]),[ue,ge]=o.useState(!1),[fe,Y]=o.useState({name:"",driver:"",passenger_capacity:"",notes:""}),ee=o.useRef(!0),[re,ce]=o.useState(""),[pe,Ae]=o.useState(""),_e=`primary ${a?"saved":""}`,Fe=ae?"Saving":a?"Saved":"Save",Te=()=>{a&&i(!1)};o.useEffect(()=>{let f=!1;return(async()=>{if(e){R(!0),me(null);try{ee.current=!0;const z=await sh(Number(e)),[W,Le,$e,I,K,h]=await Promise.all([$t(),Ra(),Mr(),z.event_id?ur(z.event_id):Promise.resolve([]),Hn(),Bn()]);if(f)return;C(Array.isArray(W)?W:[]),L(Array.isArray(Le)?Le:[]),v(Array.isArray($e)?$e:[]),p(Array.isArray(I)?I:[]),P(Array.isArray(K)?K.filter(U=>U.event_id===z.event_id):[]),D(Array.isArray(h)?h.filter(U=>U.event_id===z.event_id):[]),S(Array.isArray(z.vehicles)?z.vehicles:[]);const g=(()=>{if(z.scheduled_at)return z.scheduled_at;const U=W.find(oe=>oe.id===z.event_id);if(U!=null&&U.starts_at){const oe=Ze(U.starts_at);if(oe)return oe.setUTCHours(9,0,0,0),oe.toISOString()}return""})();s({pickup_location:z.pickup_location,destination:z.destination,passenger_count:String(z.passenger_count),scheduled_at:g,notes:z.notes||""}),u(z.notes||""),x(!1),J(String(z.event_id||""));const F=Array.isArray(z.vehicles)&&z.vehicles.length>0?z.vehicles.map(U=>{if(typeof U.event_vehicle_id=="number")return U.event_vehicle_id;if(typeof U.id=="number")return U.id}).filter(U=>typeof U=="number"):[];we(F),i(!1)}catch(z){f||me(z instanceof Error?z.message:"Failed to load transport")}finally{f||R(!1)}}})(),()=>{f=!0}},[e]);const Ge=()=>{Te(),ge(!0),Y({name:"",driver:"",passenger_capacity:"",notes:""})},Ye=f=>{we(w=>w.filter(z=>z!==f)),S(w=>w.filter((z,W)=>!(z.event_vehicle_id===f||z.id&&typeof z.id=="number"&&z.id===f||!z.event_vehicle_id&&!z.id&&W===f))),Te()};o.useEffect(()=>{if(ee.current){ee.current=!1;return}if(x(!1),we([]),ge(!1),ce(""),Ae(""),s(f=>({...f,pickup_location:"",destination:"",notes:""})),i(!1),M?Promise.all([ur(Number(M)),Hn(),Bn()]).then(([f,w,z])=>{p(Array.isArray(f)?f:[]),P(Array.isArray(w)?w.filter(W=>W.event_id===Number(M)):[]),D(Array.isArray(z)?z.filter(W=>W.event_id===Number(M)):[])}).catch(()=>{p([]),P([]),D([])}):(p([]),P([]),D([])),!t.scheduled_at&&M){const f=_.find(w=>w.id===Number(M));if(f!=null&&f.starts_at){const w=Ze(f.starts_at);w&&(w.setUTCHours(9,0,0,0),s(z=>({...z,scheduled_at:w.toISOString()})))}}},[M]);const Qe=f=>{const w=oi(f||"");if(!w)return null;const z=E.find($e=>oi($e.name||"")===w);if(z!=null&&z.coordinates)return z.coordinates;const W=j.find($e=>oi($e.name||"")===w);if(W!=null&&W.coordinates)return W.coordinates;const Le=m.find($e=>oi($e.name||"")===w);return Le!=null&&Le.coordinates?Le.coordinates:null},G=(f,w,z)=>`${f}#${w??z}`,O=f=>f.toLowerCase().replace(/^#?\s*\d+\s*/,"").trim(),$=(()=>{var z;const f=[],w=_.find(W=>W.id===Number(M));return(z=w==null?void 0:w.innhopps)!=null&&z.length&&w.innhopps.forEach(W=>{const Le=`${W.sequence?`#${W.sequence} `:""}${W.name}`;f.push({label:Le,valueKey:G("Innhopp",W.id,Le),type:"Innhopp",coordinates:W.coordinates||null,detailUrl:w?`/events/${w.id}/innhopps/${W.id}`:void 0})}),w&&Array.isArray(w.airfield_ids)&&w.airfield_ids.length&&m.length&&m.filter(W=>w.airfield_ids.includes(W.id)).forEach(W=>{f.push({label:W.name,valueKey:G("Airfield",W.id,W.name),type:"Airfield",coordinates:W.coordinates||null,detailUrl:`/airfields/${W.id}`})}),E.length&&E.forEach(W=>{f.push({label:W.name,valueKey:G("Accommodation",W.id,W.name),type:"Accommodation",coordinates:W.coordinates||null,detailUrl:w?`/events/${w.id}/accommodations/${W.id}`:void 0})}),k.length&&k.forEach(W=>{f.push({label:W.name,valueKey:G("Meal",W.id,W.name),type:"Meal",coordinates:W.coordinates||null,detailUrl:`/logistics/meals/${W.id}`})}),j.length&&j.forEach(W=>{f.push({label:W.name,valueKey:G("Other",W.id,W.name),type:"Other",coordinates:W.coordinates||null,detailUrl:`/logistics/others/${W.id}`})}),f})(),V=$.filter(f=>f.valueKey!==re),Z=f=>$.find(w=>w.valueKey===f),Ie=f=>{var w,z;return((w=$.find(W=>W.label===f))==null?void 0:w.valueKey)||((z=$.find(W=>O(W.label)===O(f)))==null?void 0:z.valueKey)},Ue=(()=>{const f=Z(re);return!!f&&ss(f.coordinates)})(),te=(()=>{const f=Z(pe);return!!f&&ss(f.coordinates)})(),lt=(()=>{var w;const f=Z(re);return(w=f==null?void 0:f.coordinates)==null?void 0:w.trim()})(),dt=(()=>{var w;const f=Z(pe);return(w=f==null?void 0:f.coordinates)==null?void 0:w.trim()})(),Tt=(()=>{const f=Z(re);return f==null?void 0:f.detailUrl})(),bt=(()=>{const f=Z(pe);return f==null?void 0:f.detailUrl})(),X=async f=>{if(f.preventDefault(),!!e){de(!0),me(null);try{const w={pickup_location:t.pickup_location.trim(),destination:t.destination.trim(),passenger_count:Number(t.passenger_count)||0,scheduled_at:t.scheduled_at?t.scheduled_at:void 0,notes:t.notes.trim()||void 0,event_id:Number(M)},z=he.length>0?[...he]:y.map(W=>W.event_vehicle_id).filter(W=>typeof W=="number");if(w.vehicle_ids=z,ue&&fe.name.trim()){const W=await Zn({event_id:Number(M),name:fe.name.trim(),driver:fe.driver.trim()||void 0,passenger_capacity:Number(fe.passenger_capacity)||0,notes:fe.notes.trim()||void 0});w.vehicle_ids=[...w.vehicle_ids||[],W.id]}await ih(Number(e),w),me("Transport updated"),i(!0)}catch(w){me(w instanceof Error?w.message:"Failed to update transport")}finally{de(!1)}}},le=(()=>{const f=Qe(t.pickup_location),w=Qe(t.destination),z=Number(t.passenger_count),W=Number.isFinite(z)&&z>0,Le=Array.isArray(he)&&he.length>0||Array.isArray(y)&&y.length>0;return ss(f)&&ss(w)&&ss(t.scheduled_at)&&W&&Le})(),Ce=async()=>{if(e&&window.confirm("Are you sure you want to delete this transport route?"))try{await d0(Number(e)),n(-1)}catch(f){me(f instanceof Error?f.message:"Failed to delete transport")}},Ve=async()=>{if(!(!M||!fe.name.trim()))try{const f=await Zn({event_id:Number(M),name:fe.name.trim(),driver:fe.driver.trim()||void 0,passenger_capacity:Number(fe.passenger_capacity)||0,notes:fe.notes.trim()||void 0});L(w=>[f,...w]),we(w=>w.includes(f.id)?w:[...w,f.id]),Y({name:"",driver:"",passenger_capacity:"",notes:""}),ge(!1),i(!1)}catch(f){me(f instanceof Error?f.message:"Failed to create vehicle")}};if(o.useEffect(()=>{if(!t.pickup_location){ce("");return}!d&&l&&!t.notes&&s(z=>({...z,notes:l}));const f=Z(re);if(f&&f.label===t.pickup_location)return;const w=Ie(t.pickup_location);if(w&&w!==re){const z=Z(w);ce(w),z&&s(W=>({...W,pickup_location:z.label}))}},[$,t.pickup_location,re,l,d,t.notes]),o.useEffect(()=>{if(!t.destination){Ae("");return}!d&&l&&!t.notes&&s(z=>({...z,notes:l}));const f=Z(pe);if(f&&f.label===t.destination)return;const w=Ie(t.destination);if(w&&w!==pe){const z=Z(w);Ae(w),z&&s(W=>({...W,destination:z.label}))}},[$,t.destination,pe,l,d,t.notes]),se)return r.jsx("p",{className:"muted",children:"Loading transport"});const et=t.pickup_location&&t.destination?`${t.pickup_location}  ${t.destination}`:"",tt=!!(lt&&dt),yt=tt?`https://www.google.com/maps/dir/?api=1&origin=${encodeURIComponent(lt)}&destination=${encodeURIComponent(dt)}`:null,ut=t.passenger_count===""||Number.isNaN(Number(t.passenger_count)),Pt=!ss(t.scheduled_at),Ut=he.length===0&&y.length===0,Je=f=>{const w=_.find($e=>$e.id===Number(M)),z=qe(w==null?void 0:w.starts_at)||null,W=qe(w==null?void 0:w.ends_at)||null;if(f){const $e=qe(f);if($e)return $e}const Le=new Date;if(z&&W)return Le<z?z:Le>W?W:Le;if(z)return z;if(W)return W};return r.jsxs("section",{children:[r.jsxs("header",{className:"page-header",children:[r.jsxs("div",{children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flexWrap:"wrap"},children:[r.jsx("h2",{style:{margin:0},children:et||"Transport Route"}),r.jsx("span",{className:`badge ${le?"success":"danger"}`,"aria-label":le?"Complete":"Missing info",title:le?"Complete":"Missing info",style:{minWidth:"2.4ch",textAlign:"center"},children:le?"":"!"})]}),et&&r.jsx("p",{children:r.jsx("button",{type:"button",className:"link-button",style:{fontSize:"1.25em"},disabled:!tt,onClick:()=>{yt&&window.open(yt,"_blank")},children:"Open route in Maps"})})]}),r.jsxs("div",{className:"card-actions",children:[r.jsx("button",{className:"ghost",type:"button",onClick:()=>n("/logistics/new",{state:{copyTransport:{event_id:M,pickup_location:t.pickup_location,destination:t.destination,passenger_count:t.passenger_count,scheduled_at:t.scheduled_at,notes:t.notes,vehicle_ids:he,vehicles:y.map(f=>({event_vehicle_id:f.event_vehicle_id,name:f.name,driver:f.driver,passenger_capacity:f.passenger_capacity,notes:f.notes}))}}}),children:"Make a copy"}),r.jsx("button",{className:"ghost",type:"button",onClick:()=>n(-1),children:"Back"}),r.jsx("button",{className:"ghost danger",type:"button",onClick:Ce,children:"Delete route"})]})]}),r.jsxs("form",{onSubmit:X,children:[r.jsxs("article",{className:"card",children:[r.jsxs("div",{className:"form-grid",children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Event"}),r.jsxs("div",{className:"input-with-button",children:[r.jsxs("select",{value:M,onChange:f=>{J(f.target.value),Te()},required:!0,style:{flex:1,minWidth:0},children:[r.jsx("option",{value:"",children:"Select event"}),_.map(f=>r.jsx("option",{value:f.id,children:f.name},f.id))]}),r.jsx("span",{style:{visibility:"hidden"},children:"Open in Maps"})]})]}),r.jsxs("label",{className:`form-field ${re&&!Ue?"field-missing":""}`,children:[r.jsx("span",{children:"Pickup location"}),r.jsxs("div",{className:"input-with-button",children:[r.jsxs("select",{value:re,onChange:f=>{const w=f.target.value;ce(w);const z=Z(w);Te(),s(W=>({...W,pickup_location:z?z.label:""}))},required:!0,style:{flex:1,minWidth:0},children:[r.jsx("option",{value:"",children:"Select pickup"}),$.filter(f=>f.type==="Innhopp"&&f.valueKey!==pe).length>0&&r.jsx("optgroup",{label:"Innhopps",children:$.filter(f=>f.type==="Innhopp"&&f.valueKey!==pe).map(f=>r.jsx("option",{value:f.valueKey,children:f.label},`inn-${f.valueKey}`))}),$.filter(f=>f.type==="Airfield"&&f.valueKey!==pe).length>0&&r.jsx("optgroup",{label:"Airfields",children:$.filter(f=>f.type==="Airfield"&&f.valueKey!==pe).map(f=>r.jsx("option",{value:f.valueKey,children:f.label},`af-${f.valueKey}`))}),$.filter(f=>f.type==="Accommodation"&&f.valueKey!==pe).length>0&&r.jsx("optgroup",{label:"Accommodations",children:$.filter(f=>f.type==="Accommodation"&&f.valueKey!==pe).map(f=>r.jsx("option",{value:f.valueKey,children:f.label},`acc-${f.valueKey}`))}),$.filter(f=>f.type==="Meal"&&f.valueKey!==pe).length>0&&r.jsx("optgroup",{label:"Meals",children:$.filter(f=>f.type==="Meal"&&f.valueKey!==pe).map(f=>r.jsx("option",{value:f.valueKey,children:f.label},`meal-${f.valueKey}`))}),$.filter(f=>f.type==="Other"&&f.valueKey!==pe).length>0&&r.jsx("optgroup",{label:"Other",children:$.filter(f=>f.type==="Other"&&f.valueKey!==pe).map(f=>r.jsx("option",{value:f.valueKey,children:f.label},`other-${f.valueKey}`))})]}),r.jsx("button",{type:"button",className:"ghost",disabled:!lt&&!Tt,onClick:()=>{lt?window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(lt)}`,"_blank"):Tt&&n(Tt)},children:lt?"Open in Maps":"Update location"})]})]}),r.jsxs("label",{className:`form-field ${pe&&!te?"field-missing":""}`,children:[r.jsx("span",{children:"Destination"}),r.jsxs("div",{className:"input-with-button",children:[r.jsxs("select",{value:pe,onChange:f=>{const w=f.target.value;Ae(w);const z=Z(w);Te(),s(W=>({...W,destination:z?z.label:""}))},required:!0,style:{flex:1,minWidth:0},children:[r.jsx("option",{value:"",children:"Select destination"}),V.filter(f=>f.type==="Innhopp").length>0&&r.jsx("optgroup",{label:"Innhopps",children:V.filter(f=>f.type==="Innhopp"&&f.valueKey!==re).map(f=>r.jsx("option",{value:f.valueKey,children:f.label},`inn-d-${f.valueKey}`))}),V.filter(f=>f.type==="Airfield").length>0&&r.jsx("optgroup",{label:"Airfields",children:V.filter(f=>f.type==="Airfield"&&f.valueKey!==re).map(f=>r.jsx("option",{value:f.valueKey,children:f.label},`af-d-${f.valueKey}`))}),V.filter(f=>f.type==="Accommodation").length>0&&r.jsx("optgroup",{label:"Accommodations",children:V.filter(f=>f.type==="Accommodation"&&f.valueKey!==re).map(f=>r.jsx("option",{value:f.valueKey,children:f.label},`acc-d-${f.valueKey}`))}),V.filter(f=>f.type==="Meal").length>0&&r.jsx("optgroup",{label:"Meals",children:V.filter(f=>f.type==="Meal"&&f.valueKey!==re).map(f=>r.jsx("option",{value:f.valueKey,children:f.label},`meal-dest-${f.valueKey}`))}),V.filter(f=>f.type==="Other").length>0&&r.jsx("optgroup",{label:"Other",children:V.filter(f=>f.type==="Other"&&f.valueKey!==re).map(f=>r.jsx("option",{value:f.valueKey,children:f.label},`other-dest-${f.valueKey}`))})]}),r.jsx("button",{type:"button",className:"ghost",disabled:!dt&&!bt,onClick:()=>{dt?window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(dt)}`,"_blank"):bt&&n(bt)},children:dt?"Open in Maps":"Update location"})]})]}),r.jsx("div",{className:"form-field",style:{gridColumn:"1 / -1",padding:0},children:r.jsxs("div",{className:"form-grid",style:{gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",gap:"0.75rem"},children:[r.jsxs("label",{className:`form-field ${ut?"field-missing":""}`,style:{margin:0},children:[r.jsx("span",{children:"Passenger count"}),r.jsx("input",{type:"number",min:0,value:t.passenger_count,onChange:f=>{Te(),s(w=>({...w,passenger_count:f.target.value}))},required:!0})]}),r.jsxs("label",{className:`form-field ${Pt?"field-missing":""}`,style:{margin:0},children:[r.jsx("span",{children:"Scheduled at"}),r.jsx(Dt,{value:qe(t.scheduled_at),options:{enableTime:!0,dateFormat:"Y-m-d H:i",time_24hr:!0,defaultDate:Je(t.scheduled_at)},onChange:f=>{const w=f[0];Te(),s(z=>({...z,scheduled_at:w?zt(w):""}))}})]})]})})]}),r.jsx("div",{className:"form-actions",style:{marginTop:"0.5rem"},children:r.jsx("button",{type:"submit",className:_e,disabled:ae||a,children:Fe})})]}),r.jsx("article",{className:"card",children:r.jsxs("div",{className:`form-field ${Ut?"field-missing":""}`,style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Vehicles"}),(()=>{const f=he.length>0?he.reduce((w,z)=>{const W=b.find($e=>$e.id===z);if(W)return w.push({id:z,name:W.name,driver:W.driver,passenger_capacity:W.passenger_capacity,notes:W.notes,removable:!0}),w;const Le=y.find($e=>$e.event_vehicle_id===z||$e.id&&typeof $e.id=="number"&&$e.id===z);return Le&&w.push({id:z,name:Le.name,driver:Le.driver,passenger_capacity:Le.passenger_capacity,notes:Le.notes,removable:!0}),w},[]):[];return f.length===0&&y.length>0&&y.forEach((w,z)=>{const W=typeof w.event_vehicle_id=="number"?w.event_vehicle_id:w.id&&typeof w.id=="number"?w.id:z;f.push({id:W,name:w.name,driver:w.driver,passenger_capacity:w.passenger_capacity,notes:w.notes,removable:typeof w.event_vehicle_id=="number"||typeof w.id=="number"})}),f.length===0?null:r.jsx("ul",{className:"status-list",style:{marginTop:"0.5rem"},children:f.map((w,z)=>r.jsx("li",{children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",justifyContent:"space-between",width:"100%"},children:[w.removable?r.jsxs(nt,{to:{pathname:`/logistics/vehicles/${w.id}`,search:e?`?transportId=${e}`:void 0},className:"card-link",style:{flex:1},children:[r.jsx("strong",{children:w.name}),r.jsxs("div",{className:"muted",children:[w.driver?`Driver: ${w.driver}  `:"","Capacity: ",w.passenger_capacity]}),w.notes&&r.jsxs("div",{className:"muted",children:["Notes: ",w.notes]})]}):r.jsxs("div",{style:{flex:1},children:[r.jsx("strong",{children:w.name}),r.jsxs("div",{className:"muted",children:[w.driver?`Driver: ${w.driver}  `:"","Capacity: ",w.passenger_capacity]}),w.notes&&r.jsxs("div",{className:"muted",children:["Notes: ",w.notes]})]}),w.removable&&r.jsx("button",{type:"button",className:"ghost danger",onClick:()=>Ye(w.id),children:"Remove"})]})},`${w.id}-${z}`))})})(),b.length>0&&r.jsx("div",{className:"form-grid",style:{marginTop:"0.5rem"},children:r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Add vehicle"}),r.jsx("div",{className:"form-actions",style:{gap:"0.5rem",alignItems:"center"},children:r.jsxs("select",{value:"",onChange:f=>{const w=Number(f.target.value);w&&(he.includes(w)||(Te(),we(z=>[...z,w])))},children:[r.jsx("option",{value:"",children:"Choose vehicle"}),b.filter(f=>f.event_id===Number(M)).map(f=>r.jsxs("option",{value:f.id,children:[f.name," ",f.driver?`(${f.driver})`:"","  ",f.passenger_capacity," pax"]},f.id))]})})]})}),r.jsx("div",{className:"form-actions",style:{marginTop:"0.5rem",justifyContent:"flex-start",marginLeft:"-1.5rem"},children:r.jsx("button",{type:"button",className:"ghost",onClick:Ge,children:"Create new vehicle"})}),ue&&r.jsxs("div",{className:"form-grid",style:{marginTop:"0.5rem"},children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Vehicle name"}),r.jsx("input",{type:"text",value:fe.name,onChange:f=>{Te(),Y(w=>({...w,name:f.target.value}))},required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Driver"}),r.jsx("input",{type:"text",value:fe.driver,onChange:f=>{Te(),Y(w=>({...w,driver:f.target.value}))}})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Passenger capacity"}),r.jsx("input",{type:"number",min:0,value:fe.passenger_capacity,onChange:f=>{Te(),Y(w=>({...w,passenger_capacity:f.target.value}))}})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Notes"}),r.jsx("input",{type:"text",value:fe.notes,onChange:f=>{Te(),Y(w=>({...w,notes:f.target.value}))}})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"button",className:"primary",onClick:Ve,children:"Save vehicle"}),r.jsx("button",{type:"button",className:"ghost",onClick:()=>{ge(!1),Y({name:"",driver:"",passenger_capacity:"",notes:""})},children:"Cancel"})]})]}),r.jsx("div",{className:"form-actions",style:{marginTop:"0.5rem"},children:r.jsx("button",{type:"submit",className:_e,disabled:ae||a,children:Fe})})]})}),r.jsxs("article",{className:"card",children:[r.jsxs("label",{className:"form-field",style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Notes"}),r.jsx("textarea",{value:t.notes,onChange:f=>{d||x(!0),Te(),s(w=>({...w,notes:f.target.value}))},rows:3})]}),r.jsx("div",{className:"form-actions",style:{marginTop:"0.5rem"},children:r.jsx("button",{type:"submit",className:_e,disabled:ae||a,children:Fe})})]}),be&&r.jsx("div",{className:"form-actions",style:{marginTop:"0.5rem"},children:r.jsx("span",{className:"muted",children:be})})]})]})},$0=(e,n=!1)=>e?Wn(e,{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:n?!1:void 0}):"Not scheduled",F0=()=>{const[e,n]=o.useState([]),[t,s]=o.useState([]),[a,i]=o.useState([]),[l,u]=o.useState(""),[d,x]=o.useState(""),[_,C]=o.useState(""),[b,L]=o.useState(""),[y,S]=o.useState(!0),[E,p]=o.useState(null);o.useEffect(()=>{let j=!1;return(async()=>{S(!0),p(null);try{const[k,D,M]=await Promise.all([tr(),$t(),Pa()]);if(j)return;n(Array.isArray(k)?k:[]),s(Array.isArray(D)?D:[]),i(Array.isArray(M)?M:[])}catch(k){j||p(k instanceof Error?k.message:"Failed to load logistics")}finally{j||S(!1)}})(),()=>{j=!0}},[]);const m=o.useMemo(()=>{if(!l)return t;const j=Number(l);return t.filter(P=>P.season_id===j)},[t,l]),v=o.useMemo(()=>a.filter(j=>!(l&&j.season_id!==Number(l)||d&&j.event_id!==Number(d)||_&&!j.pickup_location.toLowerCase().includes(_.toLowerCase())||b&&!j.destination.toLowerCase().includes(b.toLowerCase()))).sort((j,P)=>{var M,J;const k=((M=Ze(j.scheduled_at))==null?void 0:M.getTime())??Number.POSITIVE_INFINITY,D=((J=Ze(P.scheduled_at))==null?void 0:J.getTime())??Number.POSITIVE_INFINITY;return k===D?`${j.pickup_location} ${j.destination}`.localeCompare(`${P.pickup_location} ${P.destination}`):k-D}),[a,l,d,_,b]);return r.jsxs("section",{children:[r.jsxs("header",{className:"page-header",children:[r.jsx("div",{children:r.jsx("h2",{children:"Ground Crew"})}),r.jsxs("div",{className:"card-actions",children:[r.jsx(nt,{className:"ghost",to:"/logistics",style:{fontWeight:700,fontSize:"1.05rem"},children:"Back to logistics"}),r.jsx(nt,{className:"primary button-link",to:"/logistics/ground-crew/new",children:"Create entry"})]})]}),r.jsxs("div",{className:"stack",children:[r.jsx("article",{className:"card",children:r.jsxs("div",{className:"form-grid",style:{gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",alignItems:"end",gap:"0.75rem"},children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Season"}),r.jsxs("select",{value:l,onChange:j=>{u(j.target.value),x("")},style:{width:"100%",minWidth:"180px",maxWidth:"25%"},children:[r.jsx("option",{value:"",children:"All seasons"}),[...e].sort((j,P)=>P.name.localeCompare(j.name)).map(j=>r.jsx("option",{value:j.id,children:j.name},j.id))]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Event"}),r.jsxs("select",{value:d,onChange:j=>x(j.target.value),style:{width:"100%",minWidth:"180px"},children:[r.jsx("option",{value:"",children:"All events"}),m.map(j=>r.jsx("option",{value:j.id,children:j.name},j.id))]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Start location"}),r.jsx("input",{type:"text",value:_,onChange:j=>C(j.target.value),placeholder:"Filter start location"})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Destination"}),r.jsx("input",{type:"text",value:b,onChange:j=>L(j.target.value),placeholder:"Filter destination"})]})]})}),r.jsxs("article",{className:"card",children:[r.jsxs("header",{className:"card-header",children:[r.jsx("div",{children:r.jsx("h3",{children:"Ground crew entries"})}),r.jsxs("span",{className:"badge neutral",children:[v.length," ",v.length===1?"entry":"entries"]})]}),y?r.jsx("p",{className:"muted",children:"Loading ground crew entries"}):E?r.jsx("p",{className:"error-text",children:E}):v.length===0?r.jsx("p",{className:"muted",children:"No ground crew entries match the selected filters."}):r.jsx("ul",{className:"status-list",style:{maxHeight:"24rem",overflowY:"auto"},children:v.map(j=>{var P;return r.jsx("li",{children:r.jsxs(nt,{to:`/logistics/ground-crew/${j.id}`,className:"card-link",style:{flex:1},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"0.5rem"},children:[r.jsxs("div",{children:[r.jsxs("strong",{children:[j.pickup_location,"  ",j.destination]}),r.jsx("div",{className:"muted",children:$0(j.scheduled_at)})]}),r.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.35rem",flexShrink:0},children:r.jsx("span",{className:"badge",style:{backgroundColor:"#2b8a3e",color:"#fff"},children:((P=t.find(k=>k.id===j.event_id))==null?void 0:P.name)||`Event #${j.event_id??""}`})})]}),j.vehicles&&j.vehicles.length>0&&r.jsxs("div",{className:"muted",children:["Assigned vehicles:"," ",j.vehicles.map(k=>`${k.name}${k.driver?` (Driver: ${k.driver})`:""}  Cap: ${k.passenger_capacity}`).join("; ")]})]})},j.id)})})]})]})]})},L0=()=>{var G;const e=vt(),t=(G=Gt().state)==null?void 0:G.copyGroundCrew,s=Array.isArray(t==null?void 0:t.vehicles)&&t.vehicles.length?t.vehicles.filter(O=>O&&typeof O.name=="string"&&typeof O.passenger_capacity<"u"):[],a=Array.isArray(t==null?void 0:t.vehicle_ids)?t.vehicle_ids.filter(O=>typeof O=="number"):[],[i,l]=o.useState({pickup_location:(t==null?void 0:t.pickup_location)||"",destination:(t==null?void 0:t.destination)||"",passenger_count:(t==null?void 0:t.passenger_count)??"",scheduled_at:(t==null?void 0:t.scheduled_at)||""}),[u,d]=o.useState([]),[x,_]=o.useState([]),[C,b]=o.useState([]),[L,y]=o.useState([]),[S,E]=o.useState([]),[p,m]=o.useState([]),[v,j]=o.useState(""),[P,k]=o.useState(""),[D,M]=o.useState(t!=null&&t.event_id?String(t.event_id):""),[J,se]=o.useState(a),[R,ae]=o.useState(!1),[de,be]=o.useState({name:"",driver:"",passenger_capacity:"",notes:""}),[me,he]=o.useState(!1),[we,ue]=o.useState(null),ge=o.useRef(!0),[fe,Y]=o.useState(s);o.useEffect(()=>{if(!t)return;ge.current=!0,M(t.event_id?String(t.event_id):""),l({pickup_location:t.pickup_location||"",destination:t.destination||"",passenger_count:t.passenger_count??"",scheduled_at:t.scheduled_at||""});const O=s.map(V=>typeof V.event_vehicle_id=="number"?V.event_vehicle_id:void 0).filter(V=>typeof V=="number"),$=a.length>0?a:O;se($),Y(s)},[t]),o.useEffect(()=>{let O=!1;return(async()=>{try{const[V,Z,Ie]=await Promise.all([$t(),Ra(),Mr()]);if(O)return;d(Array.isArray(V)?V:[]),_(Array.isArray(Z)?Z:[]),b(Array.isArray(Ie)?Ie:[])}catch{}})(),()=>{O=!0}},[]),o.useEffect(()=>{if(ge.current){ge.current=!1;return}se([]),ae(!1),j(""),k(""),l(O=>({...O,pickup_location:"",destination:""}))},[D]),o.useEffect(()=>{if(!D||i.scheduled_at)return;const O=u.find($=>$.id===Number(D));if(O!=null&&O.starts_at){const $=qe(O.starts_at);$&&($.setHours(9,0,0,0),l(V=>({...V,scheduled_at:zt($)})))}},[D,u,i.scheduled_at]);const ee=()=>{ae(!0),be({name:"",driver:"",passenger_capacity:"",notes:""})},re=O=>{se($=>$.filter(V=>V!==O))},ce=async()=>{if(!(!D||!de.name.trim()))try{const O=await Zn({event_id:Number(D),name:de.name.trim(),driver:de.driver.trim()||void 0,passenger_capacity:Number(de.passenger_capacity)||0,notes:de.notes.trim()||void 0});_($=>[O,...$]),se($=>$.includes(O.id)?$:[...$,O.id]),be({name:"",driver:"",passenger_capacity:"",notes:""}),ae(!1)}catch(O){ue(O instanceof Error?O.message:"Failed to create vehicle")}},pe=async O=>{O.preventDefault(),he(!0),ue(null);const $=!!t;try{let V=[...J];if(D){const Ue=fe;if(Ue.length>0){for(const te of Ue){if(te.event_vehicle_id&&!V.includes(te.event_vehicle_id)){V.push(te.event_vehicle_id);continue}if(!te.event_vehicle_id){const lt=await Zn({event_id:Number(D),name:te.name,driver:te.driver||"",passenger_capacity:Number(te.passenger_capacity)||0,notes:te.notes||""});V.push(lt.id)}}se(V),Y([])}}const Z={pickup_location:i.pickup_location.trim(),destination:i.destination.trim(),passenger_count:Number(i.passenger_count)||0,scheduled_at:i.scheduled_at?i.scheduled_at:void 0,event_id:Number(D),vehicle_ids:[...V]};if(R&&de.name.trim()){const Ue=await Zn({event_id:Number(D),name:de.name.trim(),driver:de.driver.trim()||void 0,passenger_capacity:Number(de.passenger_capacity)||0,notes:de.notes.trim()||void 0});V.push(Ue.id),Z.vehicle_ids=[...V]}const Ie=await oh(Z);if(ue("Ground crew entry created"),Ie!=null&&Ie.id&&D)try{sessionStorage.setItem(`event-schedule-highlight:${D}`,`gc-${Ie.id}`)}catch{}e($?-2:-1)}catch(V){ue(V instanceof Error?V.message:"Failed to create ground crew")}finally{he(!1)}},Ae=i.pickup_location&&i.destination?`${i.pickup_location}  ${i.destination}`:"",_e=(O,$)=>`${O}::${$}`,Fe=o.useMemo(()=>{var Ue;const O=[],$=new Set,V=u.find(te=>te.id===Number(D)),Z=(Ue=V==null?void 0:V.innhopps)!=null&&Ue.length&&Array.isArray(V.innhopps)?V.innhopps.map(te=>({valueKey:_e("Innhopp",`${te.sequence?`#${te.sequence} `:""}${te.name||"Untitled innhopp"}`.trim()),label:`${te.sequence?`#${te.sequence} `:""}${te.name||"Untitled innhopp"}`.trim(),type:"Innhopp"})):[];Z.length&&(Z.forEach(te=>$.add(te.label)),O.push({label:"Innhopps",options:Z}));const Ie=V&&Array.isArray(V.airfield_ids)?C.filter(te=>V.airfield_ids.includes(te.id)):[];return Ie.length&&(Ie.forEach(te=>$.add(te.name||`Airfield #${te.id}`)),O.push({label:"Airfields",options:Ie.map(te=>({valueKey:_e("Airfield",te.name||`Airfield #${te.id}`),label:te.name||`Airfield #${te.id}`,type:"Airfield"}))})),L.length&&(L.forEach(te=>$.add(te.name||`Accommodation #${te.id}`)),O.push({label:"Accommodations",options:L.map(te=>({valueKey:_e("Accommodation",te.name||`Accommodation #${te.id}`),label:te.name||`Accommodation #${te.id}`,type:"Accommodation"}))})),S.length&&(S.forEach(te=>$.add(te.name||`Other #${te.id}`)),O.push({label:"Other",options:S.map(te=>({valueKey:_e("Other",te.name||`Other #${te.id}`),label:te.name||`Other #${te.id}`,type:"Other"}))})),p.length&&(p.forEach(te=>$.add(te.name||`Meal #${te.id}`)),O.push({label:"Meals",options:p.map(te=>({valueKey:_e("Meal",te.name||`Meal #${te.id}`),label:te.name||`Meal #${te.id}`,type:"Meal"}))})),O},[L,C,u,S,p,D,i.pickup_location,i.destination]);o.useEffect(()=>{let O=!1;return(async()=>{if(!D){y([]),E([]),m([]);return}try{const[V,Z,Ie]=await Promise.all([ur(Number(D)),Hn(),Bn()]);if(O)return;y(Array.isArray(V)?V:[]),E(Array.isArray(Z)?Z.filter(Ue=>Ue.event_id===Number(D)):[]),m(Array.isArray(Ie)?Ie.filter(Ue=>Ue.event_id===Number(D)):[])}catch{O||(y([]),E([]),m([]))}})(),()=>{O=!0}},[D]);const Te=O=>O.toLowerCase().replace(/^#?\s*\d+\s*/,"").trim(),Ge=O=>Fe.flatMap(V=>V.options).find(V=>V.valueKey===O),Ye=O=>{var V,Z;const $=Fe.flatMap(Ie=>Ie.options);return((V=$.find(Ie=>Ie.label===O))==null?void 0:V.valueKey)||((Z=$.find(Ie=>Te(Ie.label)===Te(O)))==null?void 0:Z.valueKey)},Qe=O=>{const $=u.find(Ue=>Ue.id===Number(D)),V=qe($==null?void 0:$.starts_at)||null,Z=qe($==null?void 0:$.ends_at)||null;if(O){const Ue=qe(O);if(Ue)return Ue}const Ie=new Date;if(V&&Z)return Ie<V?V:Ie>Z?Z:Ie;if(V)return V;if(Z)return Z};return o.useEffect(()=>{if(!i.pickup_location){j("");return}const O=Ge(v);if(O&&O.label===i.pickup_location)return;const $=Ye(i.pickup_location);if($&&$!==v){const V=Ge($);j($),V&&l(Z=>({...Z,pickup_location:V.label}))}},[Fe,i.pickup_location,v]),o.useEffect(()=>{if(!i.destination){k("");return}const O=Ge(P);if(O&&O.label===i.destination)return;const $=Ye(i.destination);if($&&$!==P){const V=Ge($);k($),V&&l(Z=>({...Z,destination:V.label}))}},[Fe,i.destination,P]),r.jsxs("section",{children:[r.jsxs("header",{className:"page-header",children:[r.jsxs("div",{children:[r.jsx("h2",{children:"Create ground crew entry"}),Ae&&r.jsx("p",{children:Ae})]}),r.jsx("button",{className:"ghost",type:"button",onClick:()=>e(-1),children:"Back"})]}),r.jsxs("form",{onSubmit:pe,children:[r.jsx("article",{className:"card",children:r.jsxs("div",{className:"form-grid",children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Event"}),r.jsxs("select",{value:D,onChange:O=>M(O.target.value),required:!0,children:[r.jsx("option",{value:"",children:"Select event"}),u.map(O=>r.jsx("option",{value:O.id,children:O.name},O.id))]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Start location"}),r.jsxs("select",{value:v,onChange:O=>{const $=O.target.value;j($);const V=Ge($);l(Z=>({...Z,pickup_location:V?V.label:""}))},required:!0,children:[r.jsx("option",{value:"",children:"Select start location"}),Fe.map(O=>O.options.length>0&&r.jsx("optgroup",{label:O.label,children:O.options.map($=>{const V=$.valueKey;return r.jsx("option",{value:V,children:$.label},`${O.label}-${V}`)})},O.label))]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Destination"}),r.jsxs("select",{value:P,onChange:O=>{const $=O.target.value;k($);const V=Ge($);l(Z=>({...Z,destination:V?V.label:""}))},required:!0,children:[r.jsx("option",{value:"",children:"Select destination"}),Fe.map(O=>O.options.length>0&&r.jsx("optgroup",{label:O.label,children:O.options.map($=>{const V=$.valueKey;return r.jsx("option",{value:V,children:$.label},`${O.label}-${V}`)})},O.label))]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Passenger count"}),r.jsx("input",{type:"number",min:0,value:i.passenger_count,onChange:O=>l($=>({...$,passenger_count:O.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Scheduled at"}),r.jsx(Dt,{value:qe(i.scheduled_at),options:{enableTime:!0,dateFormat:"Y-m-d H:i",time_24hr:!0,defaultDate:Qe(i.scheduled_at)},onChange:O=>{const $=O[0];l(V=>({...V,scheduled_at:$?zt($):""}))}})]})]})}),r.jsx("article",{className:"card",children:r.jsxs("div",{className:"form-field",style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Vehicles"}),J.length>0&&r.jsx("ul",{className:"status-list",style:{marginTop:"0.5rem"},children:J.map(O=>{const $=x.find(V=>V.id===O);return $?r.jsx("li",{children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",justifyContent:"space-between",width:"100%"},children:[r.jsxs(nt,{to:`/logistics/vehicles/${$.id}`,className:"card-link",style:{flex:1,textDecoration:"none"},children:[r.jsx("strong",{children:$.name}),r.jsxs("div",{className:"muted",children:[$.driver?`Driver: ${$.driver}  `:"","Capacity: ",$.passenger_capacity]}),$.notes&&r.jsxs("div",{className:"muted",children:["Notes: ",$.notes]})]}),r.jsx("button",{type:"button",className:"ghost danger",onClick:()=>re(O),children:"Remove"})]})},O):null})}),x.length>0&&r.jsx("div",{className:"form-grid",style:{marginTop:"0.5rem"},children:r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Add vehicle"}),r.jsx("div",{className:"form-actions",style:{gap:"0.5rem",alignItems:"center"},children:r.jsxs("select",{value:"",onChange:O=>{const $=Number(O.target.value);$&&(J.includes($)||se(V=>[...V,$]))},children:[r.jsx("option",{value:"",children:"Choose vehicle"}),x.filter(O=>O.event_id===Number(D)).map(O=>r.jsxs("option",{value:O.id,children:[O.name," ",O.driver?`(${O.driver})`:"","  ",O.passenger_capacity," pax"]},O.id))]})})]})}),r.jsx("div",{className:"form-actions",style:{marginTop:"0.5rem",justifyContent:"flex-start",marginLeft:"-1.5rem"},children:r.jsx("button",{type:"button",className:"ghost",onClick:ee,children:"Create new vehicle"})}),R&&r.jsxs("div",{className:"form-grid",style:{marginTop:"0.5rem"},children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Vehicle name"}),r.jsx("input",{type:"text",value:de.name,onChange:O=>be($=>({...$,name:O.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Driver"}),r.jsx("input",{type:"text",value:de.driver,onChange:O=>be($=>({...$,driver:O.target.value}))})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Passenger capacity"}),r.jsx("input",{type:"number",min:0,value:de.passenger_capacity,onChange:O=>be($=>({...$,passenger_capacity:O.target.value}))})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Notes"}),r.jsx("input",{type:"text",value:de.notes,onChange:O=>be($=>({...$,notes:O.target.value}))})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"button",className:"primary",onClick:ce,children:"Save vehicle"}),r.jsx("button",{type:"button",className:"ghost",onClick:()=>{ae(!1),be({name:"",driver:"",passenger_capacity:"",notes:""})},children:"Cancel"})]})]})]})}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"submit",className:"primary",disabled:me,children:me?"Creating":"Create ground crew"}),we&&r.jsx("span",{className:"muted",children:we})]})]})]})},as=e=>!!e&&e.trim().length>0,ci=e=>e.replace(/^#\s*\d+\s*/,"").trim().toLowerCase(),R0=()=>{const{groundCrewId:e}=Mn(),n=vt(),[t,s]=o.useState({pickup_location:"",destination:"",passenger_count:"",scheduled_at:"",notes:""}),[a,i]=o.useState(!1),[l,u]=o.useState(""),[d,x]=o.useState(!1),[_,C]=o.useState([]),[b,L]=o.useState([]),[y,S]=o.useState([]),[E,p]=o.useState([]),[m,v]=o.useState([]),[j,P]=o.useState([]),[k,D]=o.useState([]),[M,J]=o.useState(""),[se,R]=o.useState(!0),[ae,de]=o.useState(!1),[be,me]=o.useState(null),[he,we]=o.useState([]),[ue,ge]=o.useState(!1),[fe,Y]=o.useState({name:"",driver:"",passenger_capacity:"",notes:""}),ee=o.useRef(!0),[re,ce]=o.useState(""),[pe,Ae]=o.useState(""),_e=`primary ${a?"saved":""}`,Fe=ae?"Saving":a?"Saved":"Save",Te=()=>{a&&i(!1)};o.useEffect(()=>{let f=!1;return(async()=>{if(e){R(!0),me(null);try{ee.current=!0;const z=await lh(Number(e)),[W,Le,$e,I,K,h]=await Promise.all([$t(),Ra(),Mr(),z.event_id?ur(z.event_id):Promise.resolve([]),Hn(),Bn()]);if(f)return;C(Array.isArray(W)?W:[]),L(Array.isArray(Le)?Le:[]),v(Array.isArray($e)?$e:[]),p(Array.isArray(I)?I:[]),P(Array.isArray(K)?K.filter(U=>U.event_id===z.event_id):[]),D(Array.isArray(h)?h.filter(U=>U.event_id===z.event_id):[]),S(Array.isArray(z.vehicles)?z.vehicles:[]);const g=(()=>{if(z.scheduled_at)return z.scheduled_at;const U=W.find(oe=>oe.id===z.event_id);if(U!=null&&U.starts_at){const oe=Ze(U.starts_at);if(oe)return oe.setUTCHours(9,0,0,0),oe.toISOString()}return""})();s({pickup_location:z.pickup_location,destination:z.destination,passenger_count:String(z.passenger_count),scheduled_at:g,notes:z.notes||""}),u(z.notes||""),x(!1),J(String(z.event_id||""));const F=Array.isArray(z.vehicles)&&z.vehicles.length>0?z.vehicles.map(U=>{if(typeof U.event_vehicle_id=="number")return U.event_vehicle_id;if(typeof U.id=="number")return U.id}).filter(U=>typeof U=="number"):[];we(F),i(!1)}catch(z){f||me(z instanceof Error?z.message:"Failed to load ground crew")}finally{f||R(!1)}}})(),()=>{f=!0}},[e]);const Ge=()=>{Te(),ge(!0),Y({name:"",driver:"",passenger_capacity:"",notes:""})},Ye=f=>{we(w=>w.filter(z=>z!==f)),S(w=>w.filter((z,W)=>!(z.event_vehicle_id===f||z.id&&typeof z.id=="number"&&z.id===f||!z.event_vehicle_id&&!z.id&&W===f))),Te()};o.useEffect(()=>{if(ee.current){ee.current=!1;return}if(x(!1),we([]),ge(!1),ce(""),Ae(""),s(f=>({...f,pickup_location:"",destination:"",notes:""})),i(!1),M?Promise.all([ur(Number(M)),Hn(),Bn()]).then(([f,w,z])=>{p(Array.isArray(f)?f:[]),P(Array.isArray(w)?w.filter(W=>W.event_id===Number(M)):[]),D(Array.isArray(z)?z.filter(W=>W.event_id===Number(M)):[])}).catch(()=>{p([]),P([]),D([])}):(p([]),P([]),D([])),!t.scheduled_at&&M){const f=_.find(w=>w.id===Number(M));if(f!=null&&f.starts_at){const w=Ze(f.starts_at);w&&(w.setUTCHours(9,0,0,0),s(z=>({...z,scheduled_at:w.toISOString()})))}}},[M]);const Qe=f=>{const w=ci(f||"");if(!w)return null;const z=E.find($e=>ci($e.name||"")===w);if(z!=null&&z.coordinates)return z.coordinates;const W=j.find($e=>ci($e.name||"")===w);if(W!=null&&W.coordinates)return W.coordinates;const Le=m.find($e=>ci($e.name||"")===w);return Le!=null&&Le.coordinates?Le.coordinates:null},G=(f,w,z)=>`${f}#${w??z}`,O=f=>f.toLowerCase().replace(/^#?\s*\d+\s*/,"").trim(),$=(()=>{var z;const f=[],w=_.find(W=>W.id===Number(M));return(z=w==null?void 0:w.innhopps)!=null&&z.length&&w.innhopps.forEach(W=>{const Le=`${W.sequence?`#${W.sequence} `:""}${W.name}`;f.push({label:Le,valueKey:G("Innhopp",W.id,Le),type:"Innhopp",coordinates:W.coordinates||null,detailUrl:w?`/events/${w.id}/innhopps/${W.id}`:void 0})}),w&&Array.isArray(w.airfield_ids)&&w.airfield_ids.length&&m.length&&m.filter(W=>w.airfield_ids.includes(W.id)).forEach(W=>{f.push({label:W.name,valueKey:G("Airfield",W.id,W.name),type:"Airfield",coordinates:W.coordinates||null,detailUrl:`/airfields/${W.id}`})}),E.length&&E.forEach(W=>{f.push({label:W.name,valueKey:G("Accommodation",W.id,W.name),type:"Accommodation",coordinates:W.coordinates||null,detailUrl:w?`/events/${w.id}/accommodations/${W.id}`:void 0})}),k.length&&k.forEach(W=>{f.push({label:W.name,valueKey:G("Meal",W.id,W.name),type:"Meal",coordinates:W.coordinates||null,detailUrl:`/logistics/meals/${W.id}`})}),j.length&&j.forEach(W=>{f.push({label:W.name,valueKey:G("Other",W.id,W.name),type:"Other",coordinates:W.coordinates||null,detailUrl:`/logistics/others/${W.id}`})}),f})(),V=$.filter(f=>f.valueKey!==re),Z=f=>$.find(w=>w.valueKey===f),Ie=f=>{var w,z;return((w=$.find(W=>W.label===f))==null?void 0:w.valueKey)||((z=$.find(W=>O(W.label)===O(f)))==null?void 0:z.valueKey)},Ue=(()=>{const f=Z(re);return!!f&&as(f.coordinates)})(),te=(()=>{const f=Z(pe);return!!f&&as(f.coordinates)})(),lt=(()=>{var w;const f=Z(re);return(w=f==null?void 0:f.coordinates)==null?void 0:w.trim()})(),dt=(()=>{var w;const f=Z(pe);return(w=f==null?void 0:f.coordinates)==null?void 0:w.trim()})(),Tt=(()=>{const f=Z(re);return f==null?void 0:f.detailUrl})(),bt=(()=>{const f=Z(pe);return f==null?void 0:f.detailUrl})(),X=async f=>{if(f.preventDefault(),!!e){de(!0),me(null);try{const w={pickup_location:t.pickup_location.trim(),destination:t.destination.trim(),passenger_count:Number(t.passenger_count)||0,scheduled_at:t.scheduled_at?t.scheduled_at:void 0,notes:t.notes.trim()||void 0,event_id:Number(M)},z=he.length>0?[...he]:y.map(W=>W.event_vehicle_id).filter(W=>typeof W=="number");if(w.vehicle_ids=z,ue&&fe.name.trim()){const W=await Zn({event_id:Number(M),name:fe.name.trim(),driver:fe.driver.trim()||void 0,passenger_capacity:Number(fe.passenger_capacity)||0,notes:fe.notes.trim()||void 0});w.vehicle_ids=[...w.vehicle_ids||[],W.id]}await ch(Number(e),w),me("Ground crew updated"),i(!0)}catch(w){me(w instanceof Error?w.message:"Failed to update ground crew")}finally{de(!1)}}},le=(()=>{const f=Qe(t.pickup_location),w=Qe(t.destination),z=Number(t.passenger_count),W=Number.isFinite(z)&&z>0,Le=Array.isArray(he)&&he.length>0||Array.isArray(y)&&y.length>0;return as(f)&&as(w)&&as(t.scheduled_at)&&W&&Le})(),Ce=async()=>{if(e&&window.confirm("Are you sure you want to delete this ground crew entry?"))try{await u0(Number(e)),n(-1)}catch(f){me(f instanceof Error?f.message:"Failed to delete ground crew")}},Ve=async()=>{if(!(!M||!fe.name.trim()))try{const f=await Zn({event_id:Number(M),name:fe.name.trim(),driver:fe.driver.trim()||void 0,passenger_capacity:Number(fe.passenger_capacity)||0,notes:fe.notes.trim()||void 0});L(w=>[f,...w]),we(w=>w.includes(f.id)?w:[...w,f.id]),Y({name:"",driver:"",passenger_capacity:"",notes:""}),ge(!1),i(!1)}catch(f){me(f instanceof Error?f.message:"Failed to create vehicle")}};if(o.useEffect(()=>{if(!t.pickup_location){ce("");return}!d&&l&&!t.notes&&s(z=>({...z,notes:l}));const f=Z(re);if(f&&f.label===t.pickup_location)return;const w=Ie(t.pickup_location);if(w&&w!==re){const z=Z(w);ce(w),z&&s(W=>({...W,pickup_location:z.label}))}},[$,t.pickup_location,re,l,d,t.notes]),o.useEffect(()=>{if(!t.destination){Ae("");return}!d&&l&&!t.notes&&s(z=>({...z,notes:l}));const f=Z(pe);if(f&&f.label===t.destination)return;const w=Ie(t.destination);if(w&&w!==pe){const z=Z(w);Ae(w),z&&s(W=>({...W,destination:z.label}))}},[$,t.destination,pe,l,d,t.notes]),se)return r.jsx("p",{className:"muted",children:"Loading ground crew"});const et=t.pickup_location&&t.destination?`${t.pickup_location}  ${t.destination}`:"",tt=!!(lt&&dt),yt=tt?`https://www.google.com/maps/dir/?api=1&origin=${encodeURIComponent(lt)}&destination=${encodeURIComponent(dt)}`:null,ut=t.passenger_count===""||Number.isNaN(Number(t.passenger_count)),Pt=!as(t.scheduled_at),Ut=he.length===0&&y.length===0,Je=f=>{const w=_.find($e=>$e.id===Number(M)),z=qe(w==null?void 0:w.starts_at)||null,W=qe(w==null?void 0:w.ends_at)||null;if(f){const $e=qe(f);if($e)return $e}const Le=new Date;if(z&&W)return Le<z?z:Le>W?W:Le;if(z)return z;if(W)return W};return r.jsxs("section",{children:[r.jsxs("header",{className:"page-header",children:[r.jsxs("div",{children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flexWrap:"wrap"},children:[r.jsx("h2",{style:{margin:0},children:et||"Ground Crew Entry"}),r.jsx("span",{className:`badge ${le?"success":"danger"}`,"aria-label":le?"Complete":"Missing info",title:le?"Complete":"Missing info",style:{minWidth:"2.4ch",textAlign:"center"},children:le?"":"!"})]}),et&&r.jsx("p",{children:r.jsx("button",{type:"button",className:"link-button",style:{fontSize:"1.25em"},disabled:!tt,onClick:()=>{yt&&window.open(yt,"_blank")},children:"Open route in Maps"})})]}),r.jsxs("div",{className:"card-actions",children:[r.jsx("button",{className:"ghost",type:"button",onClick:()=>n("/logistics/ground-crew/new",{state:{copyGroundCrew:{event_id:M,pickup_location:t.pickup_location,destination:t.destination,passenger_count:t.passenger_count,scheduled_at:t.scheduled_at,notes:t.notes,vehicle_ids:he,vehicles:y.map(f=>({event_vehicle_id:f.event_vehicle_id,name:f.name,driver:f.driver,passenger_capacity:f.passenger_capacity,notes:f.notes}))}}}),children:"Make a copy"}),r.jsx("button",{className:"ghost",type:"button",onClick:()=>n(-1),children:"Back"}),r.jsx("button",{className:"ghost danger",type:"button",onClick:Ce,children:"Delete route"})]})]}),r.jsxs("form",{onSubmit:X,children:[r.jsxs("article",{className:"card",children:[r.jsxs("div",{className:"form-grid",children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Event"}),r.jsxs("div",{className:"input-with-button",children:[r.jsxs("select",{value:M,onChange:f=>{J(f.target.value),Te()},required:!0,style:{flex:1,minWidth:0},children:[r.jsx("option",{value:"",children:"Select event"}),_.map(f=>r.jsx("option",{value:f.id,children:f.name},f.id))]}),r.jsx("span",{style:{visibility:"hidden"},children:"Open in Maps"})]})]}),r.jsxs("label",{className:`form-field ${re&&!Ue?"field-missing":""}`,children:[r.jsx("span",{children:"Start location"}),r.jsxs("div",{className:"input-with-button",children:[r.jsxs("select",{value:re,onChange:f=>{const w=f.target.value;ce(w);const z=Z(w);Te(),s(W=>({...W,pickup_location:z?z.label:""}))},required:!0,style:{flex:1,minWidth:0},children:[r.jsx("option",{value:"",children:"Select start location"}),$.filter(f=>f.type==="Innhopp"&&f.valueKey!==pe).length>0&&r.jsx("optgroup",{label:"Innhopps",children:$.filter(f=>f.type==="Innhopp"&&f.valueKey!==pe).map(f=>r.jsx("option",{value:f.valueKey,children:f.label},`inn-${f.valueKey}`))}),$.filter(f=>f.type==="Airfield"&&f.valueKey!==pe).length>0&&r.jsx("optgroup",{label:"Airfields",children:$.filter(f=>f.type==="Airfield"&&f.valueKey!==pe).map(f=>r.jsx("option",{value:f.valueKey,children:f.label},`af-${f.valueKey}`))}),$.filter(f=>f.type==="Accommodation"&&f.valueKey!==pe).length>0&&r.jsx("optgroup",{label:"Accommodations",children:$.filter(f=>f.type==="Accommodation"&&f.valueKey!==pe).map(f=>r.jsx("option",{value:f.valueKey,children:f.label},`acc-${f.valueKey}`))}),$.filter(f=>f.type==="Meal"&&f.valueKey!==pe).length>0&&r.jsx("optgroup",{label:"Meals",children:$.filter(f=>f.type==="Meal"&&f.valueKey!==pe).map(f=>r.jsx("option",{value:f.valueKey,children:f.label},`meal-${f.valueKey}`))}),$.filter(f=>f.type==="Other"&&f.valueKey!==pe).length>0&&r.jsx("optgroup",{label:"Other",children:$.filter(f=>f.type==="Other"&&f.valueKey!==pe).map(f=>r.jsx("option",{value:f.valueKey,children:f.label},`other-${f.valueKey}`))})]}),r.jsx("button",{type:"button",className:"ghost",disabled:!lt&&!Tt,onClick:()=>{lt?window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(lt)}`,"_blank"):Tt&&n(Tt)},children:lt?"Open in Maps":"Update location"})]})]}),r.jsxs("label",{className:`form-field ${pe&&!te?"field-missing":""}`,children:[r.jsx("span",{children:"Destination"}),r.jsxs("div",{className:"input-with-button",children:[r.jsxs("select",{value:pe,onChange:f=>{const w=f.target.value;Ae(w);const z=Z(w);Te(),s(W=>({...W,destination:z?z.label:""}))},required:!0,style:{flex:1,minWidth:0},children:[r.jsx("option",{value:"",children:"Select destination"}),V.filter(f=>f.type==="Innhopp").length>0&&r.jsx("optgroup",{label:"Innhopps",children:V.filter(f=>f.type==="Innhopp"&&f.valueKey!==re).map(f=>r.jsx("option",{value:f.valueKey,children:f.label},`inn-d-${f.valueKey}`))}),V.filter(f=>f.type==="Airfield").length>0&&r.jsx("optgroup",{label:"Airfields",children:V.filter(f=>f.type==="Airfield"&&f.valueKey!==re).map(f=>r.jsx("option",{value:f.valueKey,children:f.label},`af-d-${f.valueKey}`))}),V.filter(f=>f.type==="Accommodation").length>0&&r.jsx("optgroup",{label:"Accommodations",children:V.filter(f=>f.type==="Accommodation"&&f.valueKey!==re).map(f=>r.jsx("option",{value:f.valueKey,children:f.label},`acc-d-${f.valueKey}`))}),V.filter(f=>f.type==="Meal").length>0&&r.jsx("optgroup",{label:"Meals",children:V.filter(f=>f.type==="Meal"&&f.valueKey!==re).map(f=>r.jsx("option",{value:f.valueKey,children:f.label},`meal-dest-${f.valueKey}`))}),V.filter(f=>f.type==="Other").length>0&&r.jsx("optgroup",{label:"Other",children:V.filter(f=>f.type==="Other"&&f.valueKey!==re).map(f=>r.jsx("option",{value:f.valueKey,children:f.label},`other-dest-${f.valueKey}`))})]}),r.jsx("button",{type:"button",className:"ghost",disabled:!dt&&!bt,onClick:()=>{dt?window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(dt)}`,"_blank"):bt&&n(bt)},children:dt?"Open in Maps":"Update location"})]})]}),r.jsx("div",{className:"form-field",style:{gridColumn:"1 / -1",padding:0},children:r.jsxs("div",{className:"form-grid",style:{gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",gap:"0.75rem"},children:[r.jsxs("label",{className:`form-field ${ut?"field-missing":""}`,style:{margin:0},children:[r.jsx("span",{children:"Passenger count"}),r.jsx("input",{type:"number",min:0,value:t.passenger_count,onChange:f=>{Te(),s(w=>({...w,passenger_count:f.target.value}))},required:!0})]}),r.jsxs("label",{className:`form-field ${Pt?"field-missing":""}`,style:{margin:0},children:[r.jsx("span",{children:"Scheduled at"}),r.jsx(Dt,{value:qe(t.scheduled_at),options:{enableTime:!0,dateFormat:"Y-m-d H:i",time_24hr:!0,defaultDate:Je(t.scheduled_at)},onChange:f=>{const w=f[0];Te(),s(z=>({...z,scheduled_at:w?zt(w):""}))}})]})]})})]}),r.jsx("div",{className:"form-actions",style:{marginTop:"0.5rem"},children:r.jsx("button",{type:"submit",className:_e,disabled:ae||a,children:Fe})})]}),r.jsx("article",{className:"card",children:r.jsxs("div",{className:`form-field ${Ut?"field-missing":""}`,style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Vehicles"}),(()=>{const f=he.length>0?he.reduce((w,z)=>{const W=b.find($e=>$e.id===z);if(W)return w.push({id:z,name:W.name,driver:W.driver,passenger_capacity:W.passenger_capacity,notes:W.notes,removable:!0}),w;const Le=y.find($e=>$e.event_vehicle_id===z||$e.id&&typeof $e.id=="number"&&$e.id===z);return Le&&w.push({id:z,name:Le.name,driver:Le.driver,passenger_capacity:Le.passenger_capacity,notes:Le.notes,removable:!0}),w},[]):[];return f.length===0&&y.length>0&&y.forEach((w,z)=>{const W=typeof w.event_vehicle_id=="number"?w.event_vehicle_id:w.id&&typeof w.id=="number"?w.id:z;f.push({id:W,name:w.name,driver:w.driver,passenger_capacity:w.passenger_capacity,notes:w.notes,removable:typeof w.event_vehicle_id=="number"||typeof w.id=="number"})}),f.length===0?null:r.jsx("ul",{className:"status-list",style:{marginTop:"0.5rem"},children:f.map((w,z)=>r.jsx("li",{children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",justifyContent:"space-between",width:"100%"},children:[w.removable?r.jsxs(nt,{to:{pathname:`/logistics/vehicles/${w.id}`,search:e?`?groundCrewId=${e}`:void 0},className:"card-link",style:{flex:1},children:[r.jsx("strong",{children:w.name}),r.jsxs("div",{className:"muted",children:[w.driver?`Driver: ${w.driver}  `:"","Capacity: ",w.passenger_capacity]}),w.notes&&r.jsxs("div",{className:"muted",children:["Notes: ",w.notes]})]}):r.jsxs("div",{style:{flex:1},children:[r.jsx("strong",{children:w.name}),r.jsxs("div",{className:"muted",children:[w.driver?`Driver: ${w.driver}  `:"","Capacity: ",w.passenger_capacity]}),w.notes&&r.jsxs("div",{className:"muted",children:["Notes: ",w.notes]})]}),w.removable&&r.jsx("button",{type:"button",className:"ghost danger",onClick:()=>Ye(w.id),children:"Remove"})]})},`${w.id}-${z}`))})})(),b.length>0&&r.jsx("div",{className:"form-grid",style:{marginTop:"0.5rem"},children:r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Add vehicle"}),r.jsx("div",{className:"form-actions",style:{gap:"0.5rem",alignItems:"center"},children:r.jsxs("select",{value:"",onChange:f=>{const w=Number(f.target.value);w&&(he.includes(w)||(Te(),we(z=>[...z,w])))},children:[r.jsx("option",{value:"",children:"Choose vehicle"}),b.filter(f=>f.event_id===Number(M)).map(f=>r.jsxs("option",{value:f.id,children:[f.name," ",f.driver?`(${f.driver})`:"","  ",f.passenger_capacity," pax"]},f.id))]})})]})}),r.jsx("div",{className:"form-actions",style:{marginTop:"0.5rem",justifyContent:"flex-start",marginLeft:"-1.5rem"},children:r.jsx("button",{type:"button",className:"ghost",onClick:Ge,children:"Create new vehicle"})}),ue&&r.jsxs("div",{className:"form-grid",style:{marginTop:"0.5rem"},children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Vehicle name"}),r.jsx("input",{type:"text",value:fe.name,onChange:f=>{Te(),Y(w=>({...w,name:f.target.value}))},required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Driver"}),r.jsx("input",{type:"text",value:fe.driver,onChange:f=>{Te(),Y(w=>({...w,driver:f.target.value}))}})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Passenger capacity"}),r.jsx("input",{type:"number",min:0,value:fe.passenger_capacity,onChange:f=>{Te(),Y(w=>({...w,passenger_capacity:f.target.value}))}})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Notes"}),r.jsx("input",{type:"text",value:fe.notes,onChange:f=>{Te(),Y(w=>({...w,notes:f.target.value}))}})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"button",className:"primary",onClick:Ve,children:"Save vehicle"}),r.jsx("button",{type:"button",className:"ghost",onClick:()=>{ge(!1),Y({name:"",driver:"",passenger_capacity:"",notes:""})},children:"Cancel"})]})]}),r.jsx("div",{className:"form-actions",style:{marginTop:"0.5rem"},children:r.jsx("button",{type:"submit",className:_e,disabled:ae||a,children:Fe})})]})}),r.jsxs("article",{className:"card",children:[r.jsxs("label",{className:"form-field",style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Notes"}),r.jsx("textarea",{value:t.notes,onChange:f=>{d||x(!0),Te(),s(w=>({...w,notes:f.target.value}))},rows:3})]}),r.jsx("div",{className:"form-actions",style:{marginTop:"0.5rem"},children:r.jsx("button",{type:"submit",className:_e,disabled:ae||a,children:Fe})})]}),be&&r.jsx("div",{className:"form-actions",style:{marginTop:"0.5rem"},children:r.jsx("span",{className:"muted",children:be})})]})]})},z0=()=>{const e=vt(),[n,t]=o.useState([]),[s,a]=o.useState([]),[i,l]=o.useState([]),[u,d]=o.useState([]),[x,_]=o.useState([]),[C,b]=o.useState([]),[L,y]=o.useState([]),[S,E]=o.useState([]),[p,m]=o.useState(""),[v,j]=o.useState(""),[P,k]=o.useState(!0),[D,M]=o.useState(null);o.useEffect(()=>{let me=!1;return(async()=>{k(!0),M(null);try{const[we,ue,ge,fe,Y,ee,re,ce]=await Promise.all([tr(),$t(),Ta(),Pa(),zp(),Ra(),Hn(),Bn()]);if(me)return;t(Array.isArray(we)?we:[]),a(Array.isArray(ue)?ue:[]),l(Array.isArray(ge)?ge:[]),d(Array.isArray(fe)?fe:[]),_(Array.isArray(Y)?Y:[]),E(Array.isArray(ee)?ee:[]),b(Array.isArray(re)?re:[]),y(Array.isArray(ce)?ce:[])}catch(we){me||M(we instanceof Error?we.message:"Failed to load logistics")}finally{me||k(!1)}})(),()=>{me=!0}},[]);const J=o.useMemo(()=>p?s.filter(me=>me.season_id===Number(p)):s,[s,p]),se=o.useMemo(()=>i.filter(me=>{if(v)return me.event_id===Number(v);if(p){const he=s.find(we=>we.id===me.event_id);return(he==null?void 0:he.season_id)===Number(p)}return!0}),[i,v,p,s]),R=o.useMemo(()=>x.filter(me=>{if(v)return me.event_id===Number(v);if(p){const he=s.find(we=>we.id===me.event_id);return(he==null?void 0:he.season_id)===Number(p)}return!0}),[x,v,p,s]),ae=o.useMemo(()=>u.filter(me=>{if(v)return me.event_id===Number(v);if(p){const he=s.find(we=>we.id===me.event_id);return(he==null?void 0:he.season_id)===Number(p)}return!0}),[u,v,p,s]);o.useMemo(()=>S.filter(me=>{if(v)return me.event_id===Number(v);if(p){const he=s.find(we=>we.id===me.event_id);return(he==null?void 0:he.season_id)===Number(p)}return!0}),[S,v,p,s]);const de=o.useMemo(()=>C.filter(me=>{if(v)return me.event_id===Number(v);if(p){const he=s.find(we=>we.id===me.event_id);return(he==null?void 0:he.season_id)===Number(p)}return!0}),[C,v,p,s]),be=o.useMemo(()=>L.filter(me=>{if(v)return me.event_id===Number(v);if(p){const he=s.find(we=>we.id===me.event_id);return(he==null?void 0:he.season_id)===Number(p)}return!0}),[L,v,p,s]);return r.jsxs("section",{className:"stack",children:[r.jsx("header",{className:"page-header",children:r.jsx("div",{children:r.jsx("h2",{children:"Logistics"})})}),r.jsx("article",{className:"card",children:r.jsxs("div",{className:"form-grid",style:{gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",alignItems:"end",gap:"0.75rem"},children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Season"}),r.jsxs("select",{value:p,onChange:me=>{m(me.target.value),j("")},style:{width:"100%",minWidth:"140px",maxWidth:"180px"},children:[r.jsx("option",{value:"",children:"All seasons"}),n.map(me=>r.jsx("option",{value:me.id,children:me.name},me.id))]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Event"}),r.jsxs("select",{value:v,onChange:me=>j(me.target.value),style:{width:"100%",minWidth:"160px"},children:[r.jsx("option",{value:"",children:"All events"}),J.map(me=>r.jsx("option",{value:me.id,children:me.name},me.id))]})]})]})}),D&&r.jsx("p",{className:"error-text",children:D}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",gap:"1rem"},children:[r.jsxs("article",{className:"card clickable",onClick:()=>e("/logistics/transport"),children:[r.jsxs("header",{className:"card-header",children:[r.jsx("h3",{children:"Transport"}),r.jsx("span",{className:"badge neutral",children:se.length})]}),r.jsx("p",{className:"muted",children:"View and manage transport routes."})]}),r.jsxs("article",{className:"card clickable",onClick:()=>e("/logistics/ground-crew"),children:[r.jsxs("header",{className:"card-header",children:[r.jsx("h3",{children:"Ground Crew"}),r.jsx("span",{className:"badge neutral",children:ae.length})]}),r.jsx("p",{className:"muted",children:"View and manage ground crew entries."})]}),r.jsxs("article",{className:"card clickable",onClick:()=>e("/logistics/accommodations"),children:[r.jsxs("header",{className:"card-header",children:[r.jsx("h3",{children:"Accommodations"}),r.jsx("span",{className:"badge neutral",children:R.length})]}),r.jsx("p",{className:"muted",children:"Manage accommodations."})]}),r.jsxs("article",{className:"card clickable",onClick:()=>e("/logistics/meals"),children:[r.jsxs("header",{className:"card-header",children:[r.jsx("h3",{children:"Meals"}),r.jsx("span",{className:"badge neutral",children:be.length})]}),r.jsx("p",{className:"muted",children:"Plan meals and service times."})]}),r.jsxs("article",{className:"card clickable",onClick:()=>e("/logistics/others"),children:[r.jsxs("header",{className:"card-header",children:[r.jsx("h3",{children:"Other"}),r.jsx("span",{className:"badge neutral",children:de.length})]}),r.jsx("p",{className:"muted",children:"Activities, other points of Interest, etc."})]})]})]})},nf=(e,n=!1)=>e?Wn(e,{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:n?!1:void 0}):"Not scheduled",rf=e=>{var n,t;return((n=Ze(e.check_in_at))==null?void 0:n.getTime())??((t=Ze(e.check_out_at))==null?void 0:t.getTime())??Number.POSITIVE_INFINITY},U0=()=>{const[e,n]=o.useState([]),[t,s]=o.useState([]),[a,i]=o.useState([]),[l,u]=o.useState(""),[d,x]=o.useState(""),[_,C]=o.useState(!0),[b,L]=o.useState(null);o.useEffect(()=>{let E=!1;return(async()=>{C(!0),L(null);try{const[m,v,j]=await Promise.all([tr(),$t(),zp()]);if(E)return;n(Array.isArray(m)?m:[]),s(Array.isArray(v)?v:[]),i(Array.isArray(j)?j:[])}catch(m){E||L(m instanceof Error?m.message:"Failed to load accommodations")}finally{E||C(!1)}})(),()=>{E=!0}},[]);const y=o.useMemo(()=>l?t.filter(E=>E.season_id===Number(l)):t,[t,l]),S=o.useMemo(()=>a.filter(E=>{if(d)return E.event_id===Number(d);if(l){const p=t.find(m=>m.id===E.event_id);return(p==null?void 0:p.season_id)===Number(l)}return!0}).sort((E,p)=>{const m=rf(E),v=rf(p);return m===v?E.name.localeCompare(p.name):m-v}),[a,d,l,t]);return r.jsxs("section",{children:[r.jsxs("header",{className:"page-header",children:[r.jsx("div",{children:r.jsx("h2",{children:"Accommodations"})}),r.jsxs("div",{className:"card-actions",style:{gap:"0.5rem"},children:[r.jsx(nt,{className:"ghost",to:"/logistics",style:{fontWeight:700,fontSize:"1.05rem"},children:"Back to logistics"}),r.jsx(nt,{className:"primary button-link",to:"/logistics/accommodations/new",children:"Create accommodation"})]})]}),r.jsxs("div",{className:"stack",children:[r.jsx("article",{className:"card",children:r.jsxs("div",{className:"form-grid",style:{gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",alignItems:"end",gap:"0.75rem"},children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Season"}),r.jsxs("select",{value:l,onChange:E=>{u(E.target.value),x("")},style:{width:"100%",minWidth:"140px",maxWidth:"180px"},children:[r.jsx("option",{value:"",children:"All seasons"}),e.map(E=>r.jsx("option",{value:E.id,children:E.name},E.id))]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Event"}),r.jsxs("select",{value:d,onChange:E=>x(E.target.value),style:{width:"100%",minWidth:"160px"},children:[r.jsx("option",{value:"",children:"All events"}),y.map(E=>r.jsx("option",{value:E.id,children:E.name},E.id))]})]})]})}),r.jsxs("article",{className:"card",children:[r.jsxs("header",{className:"card-header",children:[r.jsx("div",{children:r.jsx("h3",{children:"Accommodations"})}),r.jsxs("span",{className:"badge neutral",children:[S.length," ",S.length===1?"accommodation":"accommodations"]})]}),_?r.jsx("p",{className:"muted",children:"Loading accommodations"}):b?r.jsx("p",{className:"error-text",children:b}):S.length===0?r.jsx("p",{className:"muted",children:"No accommodations match the selected filters."}):r.jsx("ul",{className:"status-list",style:{maxHeight:"24rem",overflowY:"auto"},children:S.map(E=>{var p,m;return r.jsx("li",{children:r.jsxs(nt,{to:`/events/${E.event_id}/accommodations/${E.id}`,className:"card-link",style:{flex:1,display:"flex",flexDirection:"column",gap:"0.25rem"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",gap:"0.75rem"},children:[r.jsx("strong",{children:E.name}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.35rem",flexShrink:0},children:[r.jsx("span",{className:"badge",style:{backgroundColor:"#2b8a3e",color:"#fff"},children:((p=t.find(v=>v.id===E.event_id))==null?void 0:p.name)||`Event #${E.event_id}`}),r.jsx("span",{className:`badge ${E.booked?"success":"danger"}`,children:E.booked?"BOOKED":"NOT BOOKED"})]})]}),r.jsxs("div",{className:"muted",style:{display:"flex",alignItems:"center",gap:"0.35rem",flexWrap:"wrap"},children:[((m=t.find(v=>v.id===E.event_id))==null?void 0:m.name)||`Event #${E.event_id}`,"  Capacity: ",E.capacity,E.check_in_at?`  Check-in: ${nf(E.check_in_at,!0)}`:"",E.check_out_at?`  Check-out: ${nf(E.check_out_at,!0)}`:""]})]})},E.id)})})]})]})]})},V0=()=>{const e=vt(),n=Gt(),[t,s]=o.useState([]),[a,i]=o.useState(!0),[l,u]=o.useState(null),[d,x]=o.useState(null),[_,C]=o.useState(null),[b,L]=o.useState(()=>{var m;const p=(m=n.state)==null?void 0:m.copyAccommodation;return{event_id:p!=null&&p.event_id?String(p.event_id):"",name:(p==null?void 0:p.name)||"",capacity:(p==null?void 0:p.capacity)??"",coordinates:(p==null?void 0:p.coordinates)||"",check_in_at:(p==null?void 0:p.check_in_at)||"",check_out_at:(p==null?void 0:p.check_out_at)||"",booked:!!(p!=null&&p.booked),notes:(p==null?void 0:p.notes)||""}}),[y,S]=o.useState(!1);o.useEffect(()=>{let p=!1;return(async()=>{i(!0),u(null);try{const v=await $t();if(p)return;s(Array.isArray(v)?v:[])}catch(v){p||u(v instanceof Error?v.message:"Failed to load events")}finally{p||i(!1)}})(),()=>{p=!0}},[]);const E=async p=>{var m;if(p.preventDefault(),!(!b.event_id||!b.name.trim())){S(!0),x(null);try{const v=await Up(Number(b.event_id),{name:b.name.trim(),capacity:Number(b.capacity)||0,coordinates:b.coordinates.trim()||void 0,check_in_at:b.check_in_at||void 0,check_out_at:b.check_out_at||void 0,booked:b.booked,notes:b.notes.trim()||void 0});if(C(v.id),x("Accommodation created"),!!((m=n.state)!=null&&m.copyAccommodation)){if(v.id&&b.event_id)try{sessionStorage.setItem(`event-schedule-highlight:${b.event_id}`,`acc-in-${v.id}`)}catch{}e(-2)}else e("/logistics/accommodations",{state:{highlightAccommodationId:v.id}})}catch(v){x(v instanceof Error?v.message:"Failed to create accommodation")}finally{S(!1)}}};return a?r.jsx("p",{className:"muted",children:"Loading"}):l?r.jsx("p",{className:"error-text",children:l}):r.jsxs("section",{className:"stack",children:[r.jsxs("header",{className:"page-header",children:[r.jsx("div",{children:r.jsx("h2",{children:"Create accommodation"})}),r.jsx("div",{className:"card-actions",children:r.jsx("button",{className:"ghost",type:"button",onClick:()=>e("/logistics/accommodations"),children:"Back to accommodations"})})]}),r.jsx("article",{className:"card",children:r.jsxs("form",{className:"form-grid",onSubmit:E,children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Event"}),r.jsxs("select",{value:b.event_id,onChange:p=>L(m=>({...m,event_id:p.target.value})),required:!0,children:[r.jsx("option",{value:"",children:"Select event"}),t.map(p=>r.jsx("option",{value:p.id,children:p.name},p.id))]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Name"}),r.jsx("input",{type:"text",value:b.name,onChange:p=>L(m=>({...m,name:p.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Capacity"}),r.jsx("input",{type:"number",min:0,value:b.capacity,onChange:p=>L(m=>({...m,capacity:p.target.value}))})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Coordinates (DMS)"}),r.jsx("input",{type:"text",value:b.coordinates,onChange:p=>L(m=>({...m,coordinates:p.target.value})),placeholder:`e.g. 915'43"N 7426'08"W`})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Check-in"}),r.jsx(Dt,{value:qe(b.check_in_at),options:{enableTime:!0,dateFormat:"Y-m-d H:i",time_24hr:!0},onChange:p=>{const m=p[0];L(v=>({...v,check_in_at:m?zt(m):""}))}})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Check-out"}),r.jsx(Dt,{value:qe(b.check_out_at),options:{enableTime:!0,dateFormat:"Y-m-d H:i",time_24hr:!0},onChange:p=>{const m=p[0];L(v=>({...v,check_out_at:m?zt(m):""}))}})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Booked"}),r.jsxs("div",{className:"checkbox-field",children:[r.jsx("input",{type:"checkbox",checked:b.booked,onChange:p=>L(m=>({...m,booked:p.target.checked}))}),r.jsx("span",{children:"Mark as booked"})]})]}),r.jsxs("label",{className:"form-field",style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Notes"}),r.jsx("input",{type:"text",value:b.notes,onChange:p=>L(m=>({...m,notes:p.target.value}))})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"submit",className:"primary",disabled:y,children:y?"Creating":"Create accommodation"}),d&&r.jsx("span",{className:"muted",children:d})]})]})})]})},W0=e=>e?Wn(e,{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1}):"Not scheduled",H0=()=>{var m;const n=(m=Gt().state)==null?void 0:m.highlightMealId,[t,s]=o.useState([]),[a,i]=o.useState([]),[l,u]=o.useState([]),[d,x]=o.useState(""),[_,C]=o.useState(""),[b,L]=o.useState(!0),[y,S]=o.useState(null);o.useEffect(()=>{let v=!1;return(async()=>{L(!0),S(null);try{const[P,k,D]=await Promise.all([tr(),$t(),Bn()]);if(v)return;s(Array.isArray(P)?P:[]),i(Array.isArray(k)?k:[]),u(Array.isArray(D)?D:[])}catch(P){v||S(P instanceof Error?P.message:"Failed to load meals")}finally{v||L(!1)}})(),()=>{v=!0}},[]);const E=o.useMemo(()=>d?a.filter(v=>v.season_id===Number(d)):a,[a,d]),p=o.useMemo(()=>l.filter(v=>{if(_)return v.event_id===Number(_);if(d){const j=a.find(P=>P.id===v.event_id);return(j==null?void 0:j.season_id)===Number(d)}return!0}).sort((v,j)=>{var D,M;const P=((D=Ze(v.scheduled_at))==null?void 0:D.getTime())??Number.POSITIVE_INFINITY,k=((M=Ze(j.scheduled_at))==null?void 0:M.getTime())??Number.POSITIVE_INFINITY;return P===k?v.name.localeCompare(j.name):P-k}),[l,_,d,a]);return r.jsxs("section",{children:[r.jsxs("header",{className:"page-header",children:[r.jsx("div",{children:r.jsx("h2",{children:"Meals"})}),r.jsxs("div",{className:"card-actions",style:{gap:"0.5rem"},children:[r.jsx(nt,{className:"ghost",to:"/logistics",style:{fontWeight:700,fontSize:"1.05rem"},children:"Back to logistics"}),r.jsx(nt,{className:"primary button-link",to:"/logistics/meals/new",children:"Create meal"})]})]}),r.jsx("article",{className:"card",children:r.jsxs("div",{className:"form-grid",style:{gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",alignItems:"end",gap:"0.75rem"},children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Season"}),r.jsxs("select",{value:d,onChange:v=>{x(v.target.value),C("")},style:{width:"100%",minWidth:"140px",maxWidth:"180px"},children:[r.jsx("option",{value:"",children:"All seasons"}),t.map(v=>r.jsx("option",{value:v.id,children:v.name},v.id))]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Event"}),r.jsxs("select",{value:_,onChange:v=>C(v.target.value),style:{width:"100%",minWidth:"160px"},children:[r.jsx("option",{value:"",children:"All events"}),E.map(v=>r.jsx("option",{value:v.id,children:v.name},v.id))]})]})]})}),r.jsxs("article",{className:"card",children:[r.jsxs("header",{className:"card-header",children:[r.jsx("div",{children:r.jsx("h3",{children:"Meals"})}),r.jsxs("span",{className:"badge neutral",children:[p.length," meals"]})]}),b?r.jsx("p",{className:"muted",children:"Loading meals"}):y?r.jsx("p",{className:"error-text",children:y}):p.length===0?r.jsx("p",{className:"muted",children:"No meals match the selected filters."}):r.jsx("ul",{className:"status-list",style:{maxHeight:"24rem",overflowY:"auto",width:"100%"},children:p.map(v=>{var j;return r.jsx("li",{style:{width:"100%",background:n===v.id?"#e6f4ff":void 0,border:n===v.id?"1px solid #1d7ed8":void 0,borderRadius:n===v.id?"10px":void 0},children:r.jsxs(nt,{to:`/logistics/meals/${v.id}`,className:"card-link",style:{display:"flex",flexDirection:"column",gap:"0.15rem",width:"100%"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"0.75rem"},children:[r.jsx("strong",{children:v.name}),r.jsx("span",{className:"badge",style:{backgroundColor:"#2b8a3e",color:"#fff"},children:((j=a.find(P=>P.id===v.event_id))==null?void 0:j.name)||`Event #${v.event_id}`})]}),r.jsxs("div",{className:"muted",style:{display:"flex",gap:"0.35rem",flexWrap:"wrap"},children:[v.location?`Location: ${v.location}`:"Location not set",v.scheduled_at?` ${W0(v.scheduled_at)}`:""]})]})},v.id)})})]})]})},B0=()=>{var j;const e=vt(),t=(j=Gt().state)==null?void 0:j.copyMeal,s=!!t,[a,i]=o.useState([]),[l,u]=o.useState(!0),[d,x]=o.useState(null),[_,C]=o.useState(null),[b,L]=o.useState(null),[y,S]=o.useState({event_id:t!=null&&t.event_id?String(t.event_id):"",name:(t==null?void 0:t.name)||"",location:(t==null?void 0:t.location)||"",scheduled_at:(t==null?void 0:t.scheduled_at)||"",notes:(t==null?void 0:t.notes)||""}),[E,p]=o.useState(!1);o.useEffect(()=>{let P=!1;return(async()=>{u(!0),x(null);try{const D=await $t();P||i(Array.isArray(D)?D:[])}catch(D){P||x(D instanceof Error?D.message:"Failed to load events")}finally{P||u(!1)}})(),()=>{P=!0}},[]);const m=P=>{const k=a.find(se=>se.id===Number(y.event_id)),D=qe(k==null?void 0:k.starts_at)||null,M=qe(k==null?void 0:k.ends_at)||null;if(P){const se=qe(P);if(se)return se}const J=new Date;if(D&&M)return J<D?D:J>M?M:J;if(D)return D;if(M)return M},v=async P=>{if(P.preventDefault(),!(!y.event_id||!y.name.trim())){p(!0),C(null);try{const k=await g0({event_id:Number(y.event_id),name:y.name.trim(),location:y.location.trim()||void 0,scheduled_at:y.scheduled_at||void 0,notes:y.notes.trim()||void 0});L(k),C("Meal created"),s||e("/logistics/meals",{state:{highlightMealId:k.id}})}catch(k){C(k instanceof Error?k.message:"Failed to create meal")}finally{p(!1)}}};return l?r.jsx("p",{className:"muted",children:"Loading"}):d?r.jsx("p",{className:"error-text",children:d}):r.jsxs("section",{className:"stack",children:[r.jsxs("header",{className:"page-header",children:[r.jsx("div",{children:r.jsx("h2",{children:s?"Copy meal":"Create meal"})}),r.jsx("div",{className:"card-actions",children:r.jsx("button",{className:"ghost",type:"button",onClick:()=>{if(s){if(b!=null&&b.id){const P=b.event_id||(y.event_id?Number(y.event_id):void 0);if(P)try{sessionStorage.setItem(`event-schedule-highlight:${P}`,`meal-${b.id}`)}catch{}e(-2)}else e(-2);return}e("/logistics/meals")},children:"Back"})})]}),r.jsx("article",{className:"card",children:r.jsxs("form",{className:"form-grid",onSubmit:v,children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Event"}),r.jsxs("select",{value:y.event_id,onChange:P=>S(k=>({...k,event_id:P.target.value})),required:!0,children:[r.jsx("option",{value:"",children:"Select event"}),a.map(P=>r.jsx("option",{value:P.id,children:P.name},P.id))]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Name"}),r.jsx("input",{type:"text",value:y.name,onChange:P=>S(k=>({...k,name:P.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Location"}),r.jsx("input",{type:"text",value:y.location,onChange:P=>S(k=>({...k,location:P.target.value}))})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Scheduled at"}),r.jsx(Dt,{value:qe(y.scheduled_at),options:{enableTime:!0,dateFormat:"Y-m-d H:i",time_24hr:!0,defaultDate:m(y.scheduled_at)},onChange:P=>{const k=P[0];S(D=>({...D,scheduled_at:k?zt(k):""}))}})]}),r.jsxs("label",{className:"form-field",style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Notes"}),r.jsx("textarea",{value:y.notes,onChange:P=>S(k=>({...k,notes:P.target.value}))})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"submit",className:"primary",disabled:E,children:E?"Creating":"Create meal"}),_&&r.jsx("span",{className:"muted",children:_})]})]})})]})},ro=e=>!!e&&e.trim().length>0,K0=()=>{const{mealId:e}=Mn(),n=vt(),[t,s]=o.useState(null),[a,i]=o.useState([]),[l,u]=o.useState({event_id:"",name:"",location:"",scheduled_at:"",notes:""}),[d,x]=o.useState(!0),[_,C]=o.useState(!1),[b,L]=o.useState(!1),[y,S]=o.useState(null),[E,p]=o.useState(null),m=ro(l.name)&&ro(l.location)&&ro(l.scheduled_at),v=k=>{const D=a.find(R=>R.id===Number(l.event_id)),M=qe(D==null?void 0:D.starts_at)||null,J=qe(D==null?void 0:D.ends_at)||null;if(k){const R=qe(k);if(R)return R}const se=new Date;if(M&&J)return se<M?M:se>J?J:se;if(M)return M;if(J)return J};o.useEffect(()=>{let k=!1;return(async()=>{if(e){x(!0),p(null);try{const[M,J]=await Promise.all([fh(Number(e)),$t()]);if(k)return;s(M),i(Array.isArray(J)?J:[]),u({event_id:M.event_id?String(M.event_id):"",name:M.name,location:M.location||"",scheduled_at:M.scheduled_at||"",notes:M.notes||""})}catch(M){k||p(M instanceof Error?M.message:"Failed to load meal")}finally{k||x(!1)}}})(),()=>{k=!0}},[e]);const j=async k=>{if(k.preventDefault(),!(!t||!l.event_id)){C(!0),S(null);try{const D=await mh(t.id,{event_id:Number(l.event_id),name:l.name.trim(),location:l.location.trim()||void 0,scheduled_at:l.scheduled_at||void 0,notes:l.notes.trim()||void 0});s(D),S("Meal updated")}catch(D){S(D instanceof Error?D.message:"Failed to save meal")}finally{C(!1)}}},P=async()=>{if(!(!t||b)&&window.confirm("Delete this meal?")){L(!0),S(null);try{await v0(t.id),n(-1)}catch(k){S(k instanceof Error?k.message:"Failed to delete meal"),L(!1)}}};return d?r.jsx("p",{className:"muted",children:"Loading meal"}):E?r.jsx("p",{className:"error-text",children:E}):t?r.jsxs("section",{className:"stack",children:[r.jsxs("header",{className:"page-header",children:[r.jsxs("div",{children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flexWrap:"wrap"},children:[r.jsx("h2",{style:{margin:0},children:t.name}),r.jsx("span",{className:`badge ${m?"success":"danger"}`,"aria-label":m?"Complete":"Missing info",title:m?"Complete":"Missing info",style:{minWidth:"2.4ch",textAlign:"center"},children:m?"":"!"})]}),t.location&&r.jsx("p",{className:"muted",children:t.location})]}),r.jsxs("div",{className:"card-actions",children:[r.jsx("button",{className:"ghost",type:"button",onClick:()=>n("/logistics/meals/new",{state:{copyMeal:{...t,event_id:t.event_id}}}),children:"Make a copy"}),r.jsx("button",{className:"ghost",type:"button",onClick:()=>n(-1),children:"Back"}),r.jsx("button",{className:"ghost danger",type:"button",onClick:P,disabled:b,children:b?"Deleting":"Delete"})]})]}),r.jsx("article",{className:"card",children:r.jsxs("form",{className:"form-grid",onSubmit:j,children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Event"}),r.jsxs("select",{value:l.event_id,onChange:k=>u(D=>({...D,event_id:k.target.value})),required:!0,children:[r.jsx("option",{value:"",children:"Select event"}),a.map(k=>r.jsx("option",{value:k.id,children:k.name},k.id))]})]}),r.jsxs("label",{className:`form-field ${l.name.trim()?"":"field-missing"}`,children:[r.jsx("span",{children:"Name"}),r.jsx("input",{type:"text",value:l.name,onChange:k=>u(D=>({...D,name:k.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Location"}),r.jsx("input",{type:"text",value:l.location,onChange:k=>u(D=>({...D,location:k.target.value}))})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Scheduled at"}),r.jsx(Dt,{value:qe(l.scheduled_at),options:{enableTime:!0,dateFormat:"Y-m-d H:i",time_24hr:!0,defaultDate:v(l.scheduled_at)},onChange:k=>{const D=k[0];u(M=>({...M,scheduled_at:D?zt(D):""}))}})]}),r.jsxs("label",{className:"form-field",style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Notes"}),r.jsx("textarea",{value:l.notes,onChange:k=>u(D=>({...D,notes:k.target.value}))})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"submit",className:"primary",disabled:_,children:_?"Saving":"Save"}),y&&r.jsx("span",{className:"muted",children:y})]})]})})]}):r.jsx("p",{className:"error-text",children:"Meal not found."})},Y0=e=>e&&Wn(e,{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1})||"Unscheduled",q0=()=>{vt();const[e,n]=o.useState([]),[t,s]=o.useState([]),[a,i]=o.useState([]),[l,u]=o.useState(""),[d,x]=o.useState(""),[_,C]=o.useState(!0),[b,L]=o.useState(null);o.useEffect(()=>{let E=!1;return(async()=>{C(!0),L(null);try{const[m,v,j]=await Promise.all([tr(),$t(),Hn()]);if(E)return;n(Array.isArray(m)?m:[]),s(Array.isArray(v)?v:[]),i(Array.isArray(j)?j:[])}catch(m){E||L(m instanceof Error?m.message:"Failed to load logistics")}finally{E||C(!1)}})(),()=>{E=!0}},[]);const y=o.useMemo(()=>l?t.filter(E=>E.season_id===Number(l)):t,[t,l]),S=o.useMemo(()=>a.filter(E=>{if(d)return E.event_id===Number(d);if(l){const p=t.find(m=>m.id===E.event_id);return(p==null?void 0:p.season_id)===Number(l)}return!0}).sort((E,p)=>{var j,P;const m=((j=Ze(E.scheduled_at))==null?void 0:j.getTime())??Number.POSITIVE_INFINITY,v=((P=Ze(p.scheduled_at))==null?void 0:P.getTime())??Number.POSITIVE_INFINITY;return m===v?E.name.localeCompare(p.name):m-v}),[a,d,l,t]);return r.jsxs("section",{className:"stack",children:[r.jsxs("header",{className:"page-header",children:[r.jsx("div",{children:r.jsx("h2",{children:"Other logistics"})}),r.jsxs("div",{className:"card-actions",style:{gap:"0.5rem"},children:[r.jsx(nt,{className:"ghost",to:"/logistics",style:{fontWeight:700,fontSize:"1.05rem"},children:"Back to logistics"}),r.jsx(nt,{className:"primary button-link",to:"/logistics/others/new",children:"Create entry"})]})]}),r.jsx("article",{className:"card",children:r.jsxs("div",{className:"form-grid",style:{gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",alignItems:"end",gap:"0.75rem"},children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Season"}),r.jsxs("select",{value:l,onChange:E=>{u(E.target.value),x("")},style:{width:"100%",minWidth:"140px",maxWidth:"180px"},children:[r.jsx("option",{value:"",children:"All seasons"}),e.map(E=>r.jsx("option",{value:E.id,children:E.name},E.id))]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Event"}),r.jsxs("select",{value:d,onChange:E=>x(E.target.value),style:{width:"100%",minWidth:"160px"},children:[r.jsx("option",{value:"",children:"All events"}),y.map(E=>r.jsx("option",{value:E.id,children:E.name},E.id))]})]})]})}),r.jsxs("article",{className:"card",children:[r.jsxs("header",{className:"card-header",children:[r.jsx("div",{children:r.jsx("h3",{children:"Other logistics"})}),r.jsxs("span",{className:"badge neutral",children:[S.length," ",S.length===1?"entry":"entries"]})]}),_?r.jsx("p",{className:"muted",children:"Loading"}):b?r.jsx("p",{className:"error-text",children:b}):S.length===0?r.jsx("p",{className:"muted",children:"No entries match the selected filters."}):r.jsx("ul",{className:"status-list",style:{maxHeight:"24rem",overflowY:"auto"},children:S.map(E=>{var p;return r.jsx("li",{style:{width:"100%"},children:r.jsxs(nt,{to:`/logistics/others/${E.id}`,className:"card-link",style:{display:"flex",flexDirection:"column",gap:"0.25rem",width:"100%"},children:[r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto",alignItems:"center",gap:"0.75rem"},children:[r.jsx("strong",{children:E.name}),r.jsx("span",{className:"badge",style:{backgroundColor:"#2b8a3e",color:"#fff",justifySelf:"center"},children:E.event_id?((p=t.find(m=>m.id===E.event_id))==null?void 0:p.name)||`Event #${E.event_id}`:"Unassigned"})]}),r.jsx("div",{className:"muted",children:E.scheduled_at?Y0(E.scheduled_at):"No date set"}),E.notes&&r.jsxs("div",{className:"muted",children:["Notes: ",E.notes]})]})},E.id)})})]})]})},G0=()=>{const e=vt(),[n,t]=o.useState([]),[s,a]=o.useState({event_id:"",name:"",coordinates:"",scheduled_at:"",description:"",notes:""}),[i,l]=o.useState(!0),[u,d]=o.useState(null),[x,_]=o.useState(!1),[C,b]=o.useState(null);o.useEffect(()=>{let y=!1;return(async()=>{l(!0),d(null);try{const E=await $t();if(y)return;t(Array.isArray(E)?E:[])}catch(E){y||d(E instanceof Error?E.message:"Failed to load events")}finally{y||l(!1)}})(),()=>{y=!0}},[]);const L=async y=>{if(y.preventDefault(),!(!s.name.trim()||!s.event_id)){_(!0),b(null);try{await ld({name:s.name.trim(),coordinates:s.coordinates.trim()||void 0,scheduled_at:s.scheduled_at||void 0,description:s.description.trim()||void 0,notes:s.notes.trim()||void 0,event_id:Number(s.event_id)}),e("/logistics/others")}catch(S){b(S instanceof Error?S.message:"Failed to create entry")}finally{_(!1)}}};return i?r.jsx("p",{className:"muted",children:"Loading"}):u?r.jsx("p",{className:"error-text",children:u}):r.jsxs("section",{className:"stack",children:[r.jsxs("header",{className:"page-header",children:[r.jsx("div",{children:r.jsx("h2",{children:"Create other logistics entry"})}),r.jsx("div",{className:"card-actions",children:r.jsx("button",{className:"ghost",type:"button",onClick:()=>e(-1),style:{fontWeight:700,fontSize:"1.05rem"},children:"Back"})})]}),r.jsx("article",{className:"card",children:r.jsxs("form",{className:"form-grid",onSubmit:L,children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Event"}),r.jsxs("select",{value:s.event_id,onChange:y=>a(S=>({...S,event_id:y.target.value})),required:!0,children:[r.jsx("option",{value:"",children:"Select event"}),n.map(y=>r.jsx("option",{value:y.id,children:y.name},y.id))]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Name"}),r.jsx("input",{type:"text",value:s.name,onChange:y=>a(S=>({...S,name:y.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Coordinates"}),r.jsx("input",{type:"text",value:s.coordinates,onChange:y=>a(S=>({...S,coordinates:y.target.value})),placeholder:"DMS coordinates (optional)"})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Scheduled at"}),r.jsx(Dt,{value:qe(s.scheduled_at),options:{enableTime:!0,dateFormat:"Y-m-d H:i",time_24hr:!0},onChange:y=>{const S=y[0];a(E=>({...E,scheduled_at:S?zt(S):""}))}})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Description"}),r.jsx("textarea",{value:s.description,onChange:y=>a(S=>({...S,description:y.target.value}))})]}),r.jsxs("label",{className:"form-field",style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Notes"}),r.jsx("input",{type:"text",value:s.notes,onChange:y=>a(S=>({...S,notes:y.target.value}))})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"submit",className:"primary",disabled:x,children:x?"Creating":"Create entry"}),C&&r.jsx("span",{className:"muted",children:C})]})]})})]})},so=e=>!!e&&e.trim().length>0,Q0=()=>{const{otherId:e}=Mn(),n=vt(),[t,s]=o.useState([]),[a,i]=o.useState({event_id:"",name:"",coordinates:"",scheduled_at:"",description:"",notes:""}),[l,u]=o.useState(!0),[d,x]=o.useState(!1),[_,C]=o.useState(!1),[b,L]=o.useState(null),[y,S]=o.useState(!1),E=`primary ${y?"saved":""}`,p=d?"Saving":y?"Saved":"Save",m=!a.coordinates.trim(),v=!a.name.trim(),j=so(a.name)&&so(a.coordinates)&&so(a.scheduled_at);o.useEffect(()=>{let J=!1;return(async()=>{if(e){u(!0),L(null);try{const[R,ae]=await Promise.all([dh(Number(e)),$t()]);if(J)return;s(Array.isArray(ae)?ae:[]),i({event_id:R.event_id?String(R.event_id):"",name:R.name,coordinates:R.coordinates||"",scheduled_at:R.scheduled_at||"",description:R.description||"",notes:R.notes||""})}catch(R){J||L(R instanceof Error?R.message:"Failed to load entry")}finally{J||u(!1)}}})(),()=>{J=!0}},[e]);const P=()=>({name:a.name.trim(),coordinates:a.coordinates.trim()||void 0,scheduled_at:a.scheduled_at||void 0,description:a.description.trim()||void 0,notes:a.notes.trim()||void 0,event_id:Number(a.event_id)}),k=async J=>{if(J.preventDefault(),!(!e||!a.event_id)){x(!0),L(null),S(!1);try{await uh(Number(e),P()),L("Entry updated"),S(!0)}catch(se){L(se instanceof Error?se.message:"Failed to update entry"),S(!1)}finally{x(!1)}}},D=async()=>{if(!a.event_id){L("Select an event before copying.");return}C(!0),L(null);try{const J=P(),se=await ld({...J,name:J.name?`${J.name} (copy)`:"Other (copy)"});n(`/logistics/others/${se.id}`)}catch(J){L(J instanceof Error?J.message:"Failed to copy entry")}finally{C(!1)}},M=async()=>{if(!(!e||!a.event_id)&&window.confirm("Delete this entry?"))try{await h0(Number(e)),n(-1)}catch(J){L(J instanceof Error?J.message:"Failed to delete entry")}};return l?r.jsx("p",{className:"muted",children:"Loading"}):r.jsxs("section",{className:"stack",children:[r.jsxs("header",{className:"page-header",children:[r.jsx("div",{children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flexWrap:"wrap"},children:[r.jsx("h2",{style:{margin:0},children:"Other logistics"}),r.jsx("span",{className:`badge ${j?"success":"danger"}`,"aria-label":j?"Complete":"Missing info",title:j?"Complete":"Missing info",style:{minWidth:"2.4ch",textAlign:"center"},children:j?"":"!"})]})}),r.jsxs("div",{className:"card-actions",children:[r.jsx("button",{className:"ghost",type:"button",onClick:D,disabled:_||d,children:_?"Copying":"Make a copy"}),r.jsx("button",{className:"ghost danger",type:"button",onClick:M,children:"Delete"}),r.jsx("button",{className:"ghost",type:"button",onClick:()=>n(-1),style:{fontWeight:700,fontSize:"1.05rem"},children:"Back"})]})]}),r.jsx("article",{className:"card",children:r.jsxs("form",{className:"form-grid",onSubmit:k,children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Event"}),r.jsxs("select",{value:a.event_id,onChange:J=>i(se=>({...se,event_id:J.target.value})),required:!0,children:[r.jsx("option",{value:"",children:"Select event"}),t.map(J=>r.jsx("option",{value:J.id,children:J.name},J.id))]})]}),r.jsxs("label",{className:`form-field ${v?"field-missing":""}`,children:[r.jsx("span",{children:"Name"}),r.jsx("input",{type:"text",value:a.name,onChange:J=>i(se=>({...se,name:J.target.value})),required:!0})]}),r.jsxs("label",{className:`form-field ${m?"field-missing":""}`,children:[r.jsx("span",{children:"Coordinates"}),r.jsxs("div",{className:"input-with-button",children:[r.jsx("input",{type:"text",value:a.coordinates,onChange:J=>i(se=>({...se,coordinates:J.target.value}))}),r.jsx("button",{type:"button",className:"ghost",disabled:!a.coordinates.trim(),onClick:()=>{const J=a.coordinates.trim();J&&window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(J)}`,"_blank")},children:"Open in Maps"})]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Scheduled at"}),r.jsx(Dt,{value:qe(a.scheduled_at),options:{enableTime:!0,dateFormat:"Y-m-d H:i",time_24hr:!0},onChange:J=>{const se=J[0];i(R=>({...R,scheduled_at:se?zt(se):""}))}})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Description"}),r.jsx("textarea",{value:a.description,onChange:J=>i(se=>({...se,description:J.target.value}))})]}),r.jsxs("label",{className:"form-field",style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Notes"}),r.jsx("input",{type:"text",value:a.notes,onChange:J=>i(se=>({...se,notes:J.target.value}))})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"submit",className:E,disabled:d,children:p}),b&&r.jsx("span",{className:"muted",children:b})]})]})})]})},St=e=>!!e&&e.trim().length>0,Gs=e=>e.replace(/^#\s*\d+\s*/,"").trim(),sf=e=>{if(!Number.isFinite(e)||e<=0)return"Duration unavailable";const n=e,t=Math.floor(n/60),s=n%60;return t<=0?`${s} min`:s===0?`${t} hr`:`${t} hr ${s} min`},af=(e,n)=>{const t=!Array.isArray(e)||e.length===0?"No vehicles":e.map((s,a)=>St(s.name)?s.name:`Vehicle ${a+1}`).join(", ");return St(n)?`${t}  ${n}`:t},J0=e=>Wn(e.toISOString(),{weekday:"short",month:"short",day:"numeric",year:"numeric"}),hr=e=>ad(e),qn=e=>{if(!e)return"Unscheduled";const n=ad(e);if(!n)return"Unscheduled";const t=s=>String(s).padStart(2,"0");return`${t(n.hour)}:${t(n.minute)}`},ao=e=>{if(!e)return"";const n=ad(e);if(!n)return"";const t=a=>String(a).padStart(2,"0"),s=Wn(e,{year:"numeric",month:"short",day:"numeric"});return s?`${s}, ${t(n.hour)}:${t(n.minute)}`:""},Mt=e=>Vx(e),X0=e=>{const n=[],t=Ze(e.starts_at),s=Ze(e.ends_at);if(!t)return n;const a=new Date(t),i=s&&!Number.isNaN(s.getTime())?s:t;for(;a.getTime()<=i.getTime();)n.push(new Date(a)),a.setUTCDate(a.getUTCDate()+1);return n},Qs=(e,n)=>{const t=Math.floor(n/60),s=n%60;return new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),t,s,0)).toISOString()},Z0=()=>{var De;const{eventId:e}=Mn(),n=vt(),t=Gt(),[s,a]=o.useState(null),[i,l]=o.useState([]),[u,d]=o.useState([]),[x,_]=o.useState([]),[C,b]=o.useState([]),[L,y]=o.useState([]),[S,E]=o.useState([]),[p,m]=o.useState(!0),[v,j]=o.useState(null),[P,k]=o.useState(null),[D,M]=o.useState(!1),[J,se]=o.useState(!1),[R,ae]=o.useState(null),[de,be]=o.useState(null),[me,he]=o.useState(null),[we,ue]=o.useState(!1),[ge,fe]=o.useState(!1),Y=o.useRef(null),ee=o.useRef(null),re=o.useRef(null),ce=o.useRef(null),pe=o.useRef(!1),Ae=A=>{if(!A)return null;const H=A.getBoundingClientRect();return{top:H.top,right:H.right,bottom:H.bottom,left:H.left,width:H.width,height:H.height}},[_e,Fe]=o.useState(null),Te=o.useRef(null),[Ge,Ye]=o.useState(null),Qe=o.useRef(null),[G,O]=o.useState(null),$=o.useMemo(()=>{if(G)return{width:"min(720px, 92vw)",maxHeight:"85vh",overflowY:"auto",boxShadow:"0 18px 48px rgba(0,0,0,0.4), 0 0 0 1px var(--modal-border)",cursor:"pointer",backgroundColor:"var(--modal-surface)",border:"1px solid var(--modal-border)",color:"var(--text-strong)"}},[G]);o.useEffect(()=>{if(typeof document>"u")return;const A=!!G||!!_e;return A?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{A&&(document.body.style.overflow="")}},[G,_e]);const[V,Z]=o.useState([]),Ie=A=>Gs(A||"").toLowerCase(),Ue=(A,H,Q,q)=>{const ve=A.getBoundingClientRect(),ye=document.createElement("div");ye.style.position="fixed",ye.style.left=`${(Q??0)+12}px`,ye.style.top=`${(q??0)+12}px`,ye.style.padding="0.35rem 0.5rem",ye.style.border="2px dashed #3b82f6",ye.style.borderRadius="14px",ye.style.background="#fff",ye.style.boxShadow="0 10px 25px rgba(0,0,0,0.12)",ye.style.pointerEvents="none",ye.style.zIndex="9999",ye.style.width=`${ve.width}px`,ye.style.boxSizing="border-box";const T=A.cloneNode(!0);T.style.pointerEvents="none",T.style.width="100%";const Ne=T.querySelector('[data-ghost-time="time"]');return Ne&&(Ne.textContent=H&&H!=="Unscheduled"?H:""),ye.appendChild(T),ee.current=ye,re.current=Ne,document.body.appendChild(ye),ye},te=(A,H)=>{const Q=re.current,q=ee.current;q&&(Q&&(Q.textContent=A&&A!=="Unscheduled"?A:""),H&&(q.style.left=`${H.x+12}px`,q.style.top=`${H.y+12}px`))},lt=()=>{ee.current&&(document.body.removeChild(ee.current),ee.current=null,re.current=null),ce.current&&(ce.current.remove(),ce.current=null)},[dt,Tt]=o.useState({Innhopp:!0,Transport:!0,"Ground Crew":!0,Accommodation:!0,Other:!0,Meal:!0}),bt=o.useCallback(A=>{var T;const H=Ie(A);if(!H)return null;const Q=(T=s==null?void 0:s.innhopps)==null?void 0:T.find(Ne=>Ie(Ne.name)===H);if(Q!=null&&Q.coordinates)return Q.coordinates;const q=x.find(Ne=>Ie(Ne.name)===H);if(q!=null&&q.coordinates)return q.coordinates;const ve=C.find(Ne=>Ie(Ne.name)===H);if(ve!=null&&ve.coordinates)return ve.coordinates;const ye=V.find(Ne=>Ie(Ne.name)===H);return ye!=null&&ye.coordinates?ye.coordinates:null},[x,V,s==null?void 0:s.innhopps,C]);o.useEffect(()=>{let A=!1;return(async()=>{if(e){m(!0),j(null);try{const[Q,q,ve,ye,T,Ne,ze,Ee]=await Promise.all([Xr(Number(e)),Ta(),Pa(),ur(Number(e)),Zr(),Hn(),Bn(),Mr()]);if(A)return;a(Q),l(Array.isArray(q)?q.filter(ke=>ke.event_id===Number(e)):[]),d(Array.isArray(ve)?ve.filter(ke=>ke.event_id===Number(e)):[]),_(Array.isArray(ye)?ye:[]),E(Array.isArray(T)?T:[]),b(Array.isArray(Ne)?Ne.filter(ke=>ke.event_id===Number(e)):[]),y(Array.isArray(ze)?ze.filter(ke=>ke.event_id===Number(e)):[]),Z(Array.isArray(Ee)?Ee:[])}catch(Q){A||j(Q instanceof Error?Q.message:"Failed to load schedule")}finally{A||m(!1)}}})(),()=>{A=!0}},[e]);const X=o.useCallback(async A=>{if(!e)return;const H=A==null?void 0:A.preserveLoading;H||m(!0),k(null);try{const[Q,q,ve,ye,T,Ne,ze,Ee]=await Promise.all([Xr(Number(e)),Ta(),Pa(),ur(Number(e)),Zr(),Hn(),Bn(),Mr()]);a(Q),l(Array.isArray(q)?q.filter(ke=>ke.event_id===Number(e)):[]),d(Array.isArray(ve)?ve.filter(ke=>ke.event_id===Number(e)):[]),_(Array.isArray(ye)?ye:[]),E(Array.isArray(T)?T:[]),b(Array.isArray(Ne)?Ne.filter(ke=>ke.event_id===Number(e)):[]),y(Array.isArray(ze)?ze.filter(ke=>ke.event_id===Number(e)):[]),Z(Array.isArray(Ee)?Ee:[])}catch(Q){j(Q instanceof Error?Q.message:"Failed to load schedule")}finally{H||m(!1)}},[e]),le=o.useMemo(()=>{if(!s)return[];const A=X0(s),H=Array.isArray(s.innhopps)?s.innhopps:[],Q=new Set;A.forEach(Ee=>Q.add(Mt(Ee.toISOString()))),i.forEach(Ee=>{const ke=Mt(Ee.scheduled_at||void 0);ke&&Q.add(ke)}),u.forEach(Ee=>{const ke=Mt(Ee.scheduled_at||void 0);ke&&Q.add(ke)}),L.forEach(Ee=>{const ke=Mt(Ee.scheduled_at||void 0);ke&&Q.add(ke)}),x.forEach(Ee=>{const ke=Mt(Ee.check_in_at||void 0),We=Mt(Ee.check_out_at||void 0);ke&&Q.add(ke),We&&Q.add(We)}),C.forEach(Ee=>{const ke=Mt(Ee.scheduled_at||void 0);ke&&Q.add(ke)});const ve=Array.from(Q).filter(Boolean).sort().map(Ee=>{const[ke,We,ft]=Ee.split("-").map(Number);return{key:Ee,date:new Date(Date.UTC(ke,We-1,ft))}}).map(({key:Ee,date:ke})=>{const We=H.filter(ht=>Mt(ht.scheduled_at||void 0)===Ee),ft=i.filter(ht=>Mt(ht.scheduled_at||void 0)===Ee),st=u.filter(ht=>Mt(ht.scheduled_at||void 0)===Ee),ct=x.filter(ht=>Mt(ht.check_in_at||void 0)===Ee||Mt(ht.check_out_at||void 0)===Ee),at=C.filter(ht=>Mt(ht.scheduled_at||void 0)===Ee),Xe=L.filter(ht=>Mt(ht.scheduled_at||void 0)===Ee);return{date:ke,label:Ee==="unscheduled"?"Unscheduled":J0(ke),key:Ee,innhopps:We,transports:ft,groundCrews:st,accommodations:ct,others:at,meals:Xe}}),ye=i.filter(Ee=>!Ee.scheduled_at||Mt(Ee.scheduled_at)===""),T=u.filter(Ee=>!Ee.scheduled_at||Mt(Ee.scheduled_at)===""),Ne=C.filter(Ee=>!Ee.scheduled_at||Mt(Ee.scheduled_at)===""),ze=L.filter(Ee=>!Ee.scheduled_at||Mt(Ee.scheduled_at)==="");return(ye.length>0||T.length>0||Ne.length>0||ze.length>0)&&!Q.has("unscheduled")&&ve.push({date:new Date,label:"Unscheduled",key:"unscheduled",innhopps:[],transports:ye,groundCrews:T,accommodations:[],others:Ne,meals:ze}),ve},[s,i,u,x,C,L]),Ce=async()=>{if(e&&window.confirm("Delete this event?")){M(!0),k(null);try{await Rp(Number(e)),n("/events")}catch(A){k(A instanceof Error?A.message:"Failed to delete event")}finally{M(!1)}}},Ve=async()=>{if(!(!e||J)){se(!0),k(null);try{const A=await Lp(Number(e));n(`/events/${A.id}`)}catch(A){k(A instanceof Error?A.message:"Failed to copy event")}finally{se(!1)}}},[et,tt]=o.useState({}),yt=o.useRef(et),ut=o.useRef(dt),Pt=o.useRef(!1),[Ut,Je]=o.useState(null),f=o.useRef(!1),w=o.useRef(null);o.useEffect(()=>{yt.current=et},[et]),o.useEffect(()=>{ut.current=dt},[dt]),o.useEffect(()=>{if(!e||!Pt.current)return;const A=`event-schedule-state:${e}`;try{const H=sessionStorage.getItem(A);let Q={};if(H)try{Q=JSON.parse(H)||{}}catch{Q={}}sessionStorage.setItem(A,JSON.stringify({...Q,expandedDays:yt.current,typeFilters:ut.current}))}catch{}},[e,et,dt]),o.useEffect(()=>{if(me!==null||!Ut)return;const A=setTimeout(()=>Je(null),1800);return()=>clearTimeout(A)},[Ut,me]),o.useEffect(()=>{var q,ve;if(!e||Pt.current)return;const A=`event-schedule-state:${e}`,H=sessionStorage.getItem(A),Q=!!((q=t.state)!=null&&q.suppressHighlight);if(Q){pe.current=!0;const ye={...t.state};delete ye.suppressHighlight,n(".",{replace:!0,state:Object.keys(ye).length?ye:null})}if(H&&!Q)try{const ye=JSON.parse(H);ye!=null&&ye.expandedDays&&tt(T=>({...T,...ye.expandedDays})),ye!=null&&ye.typeFilters&&Tt(T=>({...T,...ye.typeFilters})),typeof(ye==null?void 0:ye.scrollY)=="number"&&setTimeout(()=>window.scrollTo(0,ye.scrollY),0)}catch{}if(Q)setTimeout(()=>window.scrollTo(0,0),0);else{const ye=sessionStorage.getItem(`event-schedule-highlight:${e}`);ye&&(Je(ye),sessionStorage.removeItem(`event-schedule-highlight:${e}`));const T=(ve=t.state)==null?void 0:ve.highlightId;T&&Je(T)}Pt.current=!0},[e,t.state]),o.useEffect(()=>{if(!e)return;const A=`event-schedule-state:${e}`;return()=>{try{sessionStorage.setItem(A,JSON.stringify({expandedDays:yt.current,typeFilters:ut.current,scrollY:window.scrollY}))}catch{}}},[e]),o.useEffect(()=>{if(le.length===0)return;if(f.current){f.current=!1;return}if(Ut){setTimeout(()=>{const Q=document.getElementById(`entry-${Ut}`);Q==null||Q.scrollIntoView({behavior:"smooth",block:"center"})},0);return}if((s==null?void 0:s.status)!=="live")return;const A=new Date,H=le.reduce((Q,q)=>{const ve=Math.abs(q.date.getTime()-A.getTime());return Q?ve<Q.diff?{key:q.key,diff:ve}:Q:{key:q.key,diff:ve}},null);if(H!=null&&H.key){const Q=document.getElementById(`event-day-${H.key}`);Q==null||Q.scrollIntoView({behavior:"smooth",block:"start"})}},[le,s==null?void 0:s.status,Ut]);const z={Innhopp:{backgroundColor:"#2b8a3e",color:"#fff",textShadow:"-1px -1px 0 rgba(0,0,0,0.45), 1px -1px 0 rgba(0,0,0,0.45), -1px 1px 0 rgba(0,0,0,0.45), 1px 1px 0 rgba(0,0,0,0.45)"},Transport:{backgroundColor:"#e6b84a",color:"#fff",textShadow:"-1px -1px 0 rgba(0,0,0,0.45), 1px -1px 0 rgba(0,0,0,0.45), -1px 1px 0 rgba(0,0,0,0.45), 1px 1px 0 rgba(0,0,0,0.45)"},"Ground Crew":{backgroundColor:"#f6dea0",color:"#fff",textShadow:"-1px -1px 0 rgba(0,0,0,0.45), 1px -1px 0 rgba(0,0,0,0.45), -1px 1px 0 rgba(0,0,0,0.45), 1px 1px 0 rgba(0,0,0,0.45)"},Accommodation:{backgroundColor:"#0d6efd",color:"#fff",textShadow:"-1px -1px 0 rgba(0,0,0,0.45), 1px -1px 0 rgba(0,0,0,0.45), -1px 1px 0 rgba(0,0,0,0.45), 1px 1px 0 rgba(0,0,0,0.45)"},Meal:{backgroundColor:"#d97706",color:"#fff",textShadow:"-1px -1px 0 rgba(0,0,0,0.45), 1px -1px 0 rgba(0,0,0,0.45), -1px 1px 0 rgba(0,0,0,0.45), 1px 1px 0 rgba(0,0,0,0.45)"},Other:{backgroundColor:"#7e22ce",color:"#fff",textShadow:"-1px -1px 0 rgba(0,0,0,0.45), 1px -1px 0 rgba(0,0,0,0.45), -1px 1px 0 rgba(0,0,0,0.45), 1px 1px 0 rgba(0,0,0,0.45)"}},W=(A,H,Q,q)=>{if(Q==="unscheduled")return null;const ve=q?H.filter(We=>We.id!==q):H.slice();if(ve.length===0)return 8*60;const ye=Math.max(0,Math.min(A,ve.length)),T=ve[ye-1],Ne=ve[ye],ze=T&&T.sortValue!==Number.POSITIVE_INFINITY?T.sortValue:null,Ee=Ne&&Ne.sortValue!==Number.POSITIVE_INFINITY?Ne.sortValue:null;let ke=9*60;return ze!==null&&Ee!==null?ke=Math.floor((ze+Ee)/2):ze!==null?ke=ze+15:Ee!==null&&(ke=Math.max(Ee-15,0)),ke},Le=["Innhopp","Transport","Ground Crew","Accommodation","Meal","Other"],$e=(A,H)=>{const Q=(A!=null&&A.scheduledAt?qe(A.scheduledAt):void 0)||(H?qe(H.date.toISOString()):void 0)||new Date,q=hr((A==null?void 0:A.scheduledAt)||void 0);if(q)Q.setHours(q.hour,q.minute,0,0);else{const ve=new Date;Q.setHours(ve.getHours(),ve.getMinutes(),0,0)}return Q},I=A=>zt(A),K=o.useCallback((A,H)=>{if(A.type==="Innhopp")a(Q=>Q&&{...Q,innhopps:Array.isArray(Q.innhopps)?Q.innhopps.map(q=>q.id===Number(A.id.split("-").pop())?{...q,scheduled_at:H||null}:q):Q.innhopps});else if(A.type==="Transport")l(Q=>Array.isArray(Q)?Q.map(q=>q.id===Number(A.id.split("-").pop())?{...q,scheduled_at:H??void 0}:q):Q);else if(A.type==="Ground Crew")d(Q=>Array.isArray(Q)?Q.map(q=>q.id===Number(A.id.split("-").pop())?{...q,scheduled_at:H??void 0}:q):Q);else if(A.type==="Other")b(Q=>Array.isArray(Q)?Q.map(q=>q.id===Number(A.id.split("-").pop())?{...q,scheduled_at:H||null}:q):Q);else if(A.type==="Meal")y(Q=>Array.isArray(Q)?Q.map(q=>q.id===Number(A.id.split("-").pop())?{...q,scheduled_at:H||null}:q):Q);else if(A.type==="Accommodation"){const Q=Number(A.id.split("-").pop());_(q=>Array.isArray(q)?q.map(ve=>ve.id!==Q?ve:A.id.startsWith("acc-in-")?{...ve,check_in_at:H||null}:A.id.startsWith("acc-out-")?{...ve,check_out_at:H||null}:{...ve,check_in_at:H||null}):q)}},[]);o.useEffect(()=>{var H,Q;const A=(H=Te.current)==null?void 0:H.flatpickr;A&&(_e?(A.setDate($e(_e.entry,_e.day),!1),Ye(((Q=A.selectedDates)==null?void 0:Q[0])??null),_e.anchor&&A.set("positionElement",_e.anchor),A.open()):(A.close(),Ye(null)))},[_e]),o.useEffect(()=>{if(!we)return;const A=Q=>{const q=Q.target;!Y.current||!q||Y.current.contains(q)||ue(!1)},H=Q=>{Q.key==="Escape"&&ue(!1)};return document.addEventListener("mousedown",A),document.addEventListener("touchstart",A),window.addEventListener("keydown",H),()=>{document.removeEventListener("mousedown",A),document.removeEventListener("touchstart",A),window.removeEventListener("keydown",H)}},[we]),o.useEffect(()=>{if(le.length===0)return;const A=new Date;A.setHours(0,0,0,0),tt(H=>{const Q={...H};return le.forEach(q=>{if(pe.current){Q[q.key]=!0;return}if(typeof Q[q.key]=="boolean")return;const ve=q.date<A;Q[q.key]=!ve}),Q}),pe.current&&(pe.current=!1)},[le]);const h=o.useCallback(async(A,H)=>{try{fe(!0);const Q=Number(A.id.split("-").pop());if(A.type==="Innhopp"){const q=await Bp(Q),ve={sequence:q.sequence,name:q.name,coordinates:q.coordinates||void 0,elevation:q.elevation??void 0,takeoff_airfield_id:q.takeoff_airfield_id??void 0,scheduled_at:H||void 0,notes:q.notes||void 0,reason_for_choice:q.reason_for_choice||void 0,adjust_altimeter_aad:q.adjust_altimeter_aad||void 0,notam:q.notam||void 0,distance_by_air:q.distance_by_air??void 0,distance_by_road:q.distance_by_road??void 0,primary_landing_area:q.primary_landing_area,secondary_landing_area:q.secondary_landing_area,risk_assessment:q.risk_assessment||void 0,safety_precautions:q.safety_precautions||void 0,jumprun:q.jumprun||void 0,hospital:q.hospital||void 0,rescue_boat:q.rescue_boat??void 0,minimum_requirements:q.minimum_requirements||void 0,land_owners:q.land_owners||[],land_owner_permission:q.land_owner_permission??void 0};await Si(Q,ve)}else if(A.type==="Transport"){const q=await sh(Q),ve=Array.isArray(q.vehicles)?q.vehicles.map(ye=>ye.event_vehicle_id||ye.id).filter(ye=>typeof ye=="number"):[];await ih(Q,{pickup_location:q.pickup_location,destination:q.destination,passenger_count:q.passenger_count,scheduled_at:H||void 0,notes:q.notes||void 0,event_id:Number(q.event_id),vehicle_ids:ve.length>0?ve:void 0})}else if(A.type==="Ground Crew"){const q=await lh(Q),ve=Array.isArray(q.vehicles)?q.vehicles.map(ye=>ye.event_vehicle_id||ye.id).filter(ye=>typeof ye=="number"):[];await ch(Q,{pickup_location:q.pickup_location,destination:q.destination,passenger_count:q.passenger_count,scheduled_at:H||void 0,notes:q.notes||void 0,event_id:Number(q.event_id),vehicle_ids:ve.length>0?ve:void 0})}else if(A.type==="Other"){const q=await dh(Q);await uh(Q,{name:q.name,coordinates:q.coordinates||void 0,scheduled_at:H||void 0,description:q.description||void 0,notes:q.notes||void 0,event_id:Number(q.event_id)})}else if(A.type==="Meal"){const q=await fh(Q);await mh(Q,{name:q.name,location:q.location||void 0,scheduled_at:H||void 0,notes:q.notes||void 0,event_id:Number(q.event_id)})}else if(A.type==="Accommodation"&&e){const q=await Vp(Number(e),Q),ve={name:q.name,capacity:q.capacity,coordinates:q.coordinates||void 0,booked:q.booked??void 0,notes:q.notes||void 0,check_in_at:q.check_in_at||void 0,check_out_at:q.check_out_at||void 0};A.id.startsWith("acc-in-")?ve.check_in_at=H||void 0:A.id.startsWith("acc-out-")?ve.check_out_at=H||void 0:ve.check_in_at=H||void 0,await Wp(Number(e),Q,ve)}}finally{fe(!1)}},[e]),g=o.useCallback(()=>{var ve,ye,T,Ne,ze,Ee;const A=(ve=Te.current)==null?void 0:ve.flatpickr,H=((ye=A==null?void 0:A.selectedDates)==null?void 0:ye[0])||Ge,Q=H&&!Number.isNaN(H.getTime())?new Date(H.getTime()):_e!=null&&_e.entry.scheduledAt?qe(_e.entry.scheduledAt)||new Date:_e!=null&&_e.day?qe(_e.day.date.toISOString())||new Date:new Date;if(A){const ke=(T=A.hourElement)==null?void 0:T.value,We=(Ne=A.minuteElement)==null?void 0:Ne.value,ft=ke!==void 0?Number(ke):NaN,st=We!==void 0?Number(We):NaN;!Number.isNaN(ft)&&!Number.isNaN(st)&&Q.setHours(ft,st,0,0)}const q=(Ee=(ze=A==null?void 0:A.input)==null?void 0:ze.value)==null?void 0:Ee.trim();if(A&&q){const ke=A.parseDate(q,"Y-m-d H:i")||qe(q);if(!Number.isNaN(ke==null?void 0:ke.getTime()))return ke}return Q},[Ge,_e]),F=o.useCallback(async()=>{var ye;if(!_e)return;const A=(ye=Te.current)==null?void 0:ye.flatpickr;if(A!=null&&A.input){const T=A.parseDate(A.input.value,"Y-m-d H:i");T&&!Number.isNaN(T.getTime())&&A.setDate(T,!1,"Y-m-d H:i"),A.input.blur()}const H=g();if(!H)return;const Q=I(H),q=Mt(Q),ve=q&&q!==_e.day.key;f.current=!0,w.current=ve?null:window.scrollY;try{await h(_e.entry,Q),K(_e.entry,Q),Je(_e.entry.id)}catch(T){k(T instanceof Error?T.message:"Failed to update schedule")}finally{Fe(null),Ye(null),ve&&q?setTimeout(()=>{const T=document.getElementById(`event-day-${q}`);T==null||T.scrollIntoView({behavior:"smooth",block:"start"})},0):w.current!==null&&(window.scrollTo({top:w.current}),w.current=null)}},[K,g,Ge,_e,h]);if(o.useEffect(()=>{const A=H=>{if(_e){if(H.key==="Enter"){H.preventDefault(),H.stopPropagation();return}H.key==="Escape"&&(Fe(null),Ye(null))}};return window.addEventListener("keydown",A,!0),()=>window.removeEventListener("keydown",A,!0)},[_e]),p)return r.jsx("p",{className:"muted",children:"Loading schedule"});if(v)return r.jsx("p",{className:"error-text",children:v});if(!s)return r.jsx("p",{className:"error-text",children:"Event not found."});const U=s.slots??0,oe=Array.isArray(s.participant_ids)?s.participant_ids.reduce((A,H)=>{const Q=S.find(ye=>ye.id===H);return(Array.isArray(Q==null?void 0:Q.roles)?Q==null?void 0:Q.roles:[]).includes("Staff")?A:A+1},0):0,Se=Math.max(U-oe,0),He=Se===0,Pe=s.status==="past",Ke={fontSize:"1.05rem",fontWeight:700,lineHeight:"1.2",fontFamily:"inherit"};return r.jsxs("section",{className:"stack",children:[r.jsx("header",{className:"page-header event-schedule-header",children:r.jsxs("div",{className:"event-schedule-headline",children:[r.jsxs("div",{className:"event-schedule-actions",ref:Y,children:[r.jsx("button",{className:"ghost event-schedule-gear",type:"button","aria-label":we?"Close actions menu":"Open actions menu","aria-expanded":we,"aria-controls":"event-schedule-actions-menu",onClick:()=>ue(A=>!A),children:r.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:r.jsx("path",{d:"M19.14 12.94c.04-.31.06-.63.06-.94s-.02-.63-.06-.94l2.03-1.58a.5.5 0 0 0 .12-.64l-1.92-3.32a.5.5 0 0 0-.6-.22l-2.39.96a7.3 7.3 0 0 0-1.63-.94l-.36-2.54a.5.5 0 0 0-.5-.42h-3.84a.5.5 0 0 0-.5.42l-.36 2.54c-.57.22-1.12.52-1.63.94l-2.39-.96a.5.5 0 0 0-.6.22L2.7 8.84a.5.5 0 0 0 .12.64l2.03 1.58c-.04.31-.06.63-.06.94s.02.63.06.94L2.82 14.52a.5.5 0 0 0-.12.64l1.92 3.32c.13.22.39.31.6.22l2.39-.96c.5.41 1.06.73 1.63.94l.36 2.54c.04.24.25.42.5.42h3.84c.25 0 .46-.18.5-.42l.36-2.54c.57-.22 1.12-.52 1.63-.94l2.39.96c.22.09.47 0 .6-.22l1.92-3.32a.5.5 0 0 0-.12-.64l-2.03-1.58zM12 15.5a3.5 3.5 0 1 1 0-7 3.5 3.5 0 0 1 0 7z"})})}),we&&r.jsxs("div",{className:"event-schedule-menu",id:"event-schedule-actions-menu",role:"menu",children:[r.jsx("button",{className:"event-schedule-menu-item",type:"button",style:Ke,role:"menuitem",onClick:()=>{ue(!1),n(`/events/${s.id}/details`)},children:"Details"}),r.jsx("button",{className:"event-schedule-menu-item",type:"button",style:Ke,role:"menuitem",onClick:()=>{ue(!1),n(`/manifests?eventId=${s.id}`)},children:"Manifest"}),r.jsx("button",{className:"event-schedule-menu-item",type:"button",style:Ke,role:"menuitem",onClick:()=>{ue(!1),Ve()},disabled:J,children:J?"Copying":"Copy"}),r.jsx("button",{className:"event-schedule-menu-item danger",type:"button",style:Ke,role:"menuitem",onClick:()=>{ue(!1),Ce()},disabled:D,children:D?"Deleting":"Delete"}),r.jsx("button",{className:"event-schedule-menu-item",type:"button",style:Ke,role:"menuitem",onClick:()=>{ue(!1),n("/events")},children:"Back"})]})]}),r.jsxs("div",{className:"event-schedule-headline-text",children:[r.jsx("div",{className:"event-schedule-title-row",children:r.jsx("h2",{style:{margin:0},children:s.name})}),r.jsx("p",{className:"event-location",children:s.location||"Location TBD"}),r.jsxs("div",{className:"event-schedule-badges",children:[r.jsx("span",{className:`badge status-${s.status}`,children:s.status}),!Pe&&r.jsx("span",{className:`badge ${He?"danger":"success"}`,children:He?"FULL":`${Se} SLOTS AVAILABLE`})]})]})]})}),P&&r.jsx("p",{className:"error-text",children:P}),r.jsxs("article",{className:"card",style:{marginBottom:"0.75rem"},children:[r.jsxs("dl",{className:"card-details event-schedule-stats",style:{margin:0,display:"grid",gridTemplateColumns:"repeat(5, minmax(0, 1fr))",columnGap:"2rem",rowGap:"1rem",textAlign:"center"},children:[r.jsxs("div",{children:[r.jsx("dt",{children:"Starts"}),r.jsx("dd",{children:s.starts_at?Wn(s.starts_at,{month:"short",day:"numeric",year:"numeric"}):"TBD"})]}),r.jsxs("div",{children:[r.jsx("dt",{children:"Ends"}),r.jsx("dd",{children:s.ends_at?Wn(s.ends_at,{month:"short",day:"numeric",year:"numeric"}):"TBD"})]}),r.jsxs("div",{children:[r.jsx("dt",{children:"Participants"}),r.jsx("dd",{children:oe})]}),r.jsxs("div",{children:[r.jsx("dt",{children:"Innhopps"}),r.jsx("dd",{children:((De=s.innhopps)==null?void 0:De.length)??0})]}),r.jsxs("div",{children:[r.jsx("dt",{children:"Slots"}),r.jsx("dd",{children:U||"Not set"})]})]}),r.jsxs("div",{className:"event-schedule-filters",children:[r.jsx("strong",{children:"Show:"}),r.jsx("div",{className:"event-schedule-filter-list",children:Le.map(A=>{const H=dt[A],Q=z[A],q=H?Q:{backgroundColor:"#fff",color:Q.backgroundColor,border:`2px solid ${Q.backgroundColor}`};return r.jsx("button",{type:"button",onClick:()=>Tt(ve=>({...ve,[A]:!ve[A]})),style:{border:"none",background:"transparent",padding:0,cursor:"pointer"},"aria-pressed":H,onDragLeave:ve=>{if(!R)return;const ye=ve.currentTarget,T=ve.relatedTarget;T&&ye.contains(T)||he(null)},children:r.jsx("span",{className:"badge",style:q,children:A.toUpperCase()})},A)})})]})]}),le.length===0?r.jsx("p",{className:"muted",children:"No schedule yet."}):le.map(A=>r.jsxs("article",{id:`event-day-${A.key}`,className:"card",style:de===A.key&&R?{border:"2px solid #3b82f6",boxShadow:"0 0 0 2px rgba(59,130,246,0.15)"}:void 0,onDragOver:H=>{R&&(H.preventDefault(),be(A.key),he(null))},onDrop:H=>{R&&(H.preventDefault(),he(null))},onDragLeave:H=>{if(!R)return;const Q=H.currentTarget,q=H.relatedTarget;q&&Q.contains(q)||(be(ve=>ve===A.key?null:ve),he(null),te(null))},children:[r.jsxs("header",{className:"card-header",style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},onClick:()=>tt(H=>({...H,[A.key]:!(H[A.key]??!0)})),children:[r.jsx("button",{className:"ghost",type:"button",onClick:H=>{H.stopPropagation(),tt(Q=>({...Q,[A.key]:!(Q[A.key]??!0)}))},children:et[A.key]===!1?"":""}),r.jsx("h3",{style:{margin:0,flex:1,textAlign:"left"},children:A.label})]}),et[A.key]===!1?null:(()=>{const H=[];A.innhopps.forEach(T=>{var Ee,ke,We,ft,st;const Ne=V.find(ct=>ct.id===T.takeoff_airfield_id),ze=typeof T.elevation=="number"&&typeof(Ne==null?void 0:Ne.elevation)=="number"?T.elevation-Ne.elevation:null;H.push({id:`i-${T.id}`,hourKey:qn(T.scheduled_at),sortValue:(()=>{const ct=hr(T.scheduled_at);return ct?ct.hour*60+ct.minute:Number.POSITIVE_INFINITY})(),title:`Innhopp #${T.sequence}: ${T.name}`,subtitle:"",type:"Innhopp",to:`/events/${s.id}/innhopps/${T.id}`,ready:rh(T),missingCoordinates:!St(T.coordinates),description:T.reason_for_choice||((Ee=T.primary_landing_area)==null?void 0:Ee.description)||null,notes:T.notes||void 0,innhoppReason:T.reason_for_choice||null,innhoppElevation:T.elevation??null,innhoppCoordinates:T.coordinates||null,innhoppTakeoffName:(Ne==null?void 0:Ne.name)||null,innhoppElevationDiff:ze,innhoppPrimaryName:((ke=T.primary_landing_area)==null?void 0:ke.name)||null,innhoppPrimarySize:((We=T.primary_landing_area)==null?void 0:We.size)||null,innhoppSecondaryName:((ft=T.secondary_landing_area)==null?void 0:ft.name)||null,innhoppSecondarySize:((st=T.secondary_landing_area)==null?void 0:st.size)||null,innhoppRisk:T.risk_assessment||null,innhoppMinimumRequirements:T.minimum_requirements||null,innhoppRescueBoat:T.rescue_boat??null,innhoppLandOwnerPermission:T.land_owner_permission??null,scheduledAt:T.scheduled_at})}),A.transports.forEach(T=>{const Ne=bt(T.pickup_location),ze=bt(T.destination),Ee=Number.isFinite(T.passenger_count)&&T.passenger_count>=0,ke=Array.isArray(T.vehicles)&&T.vehicles.length>0,We=St(T.pickup_location)&&St(T.destination)&&St(T.scheduled_at)&&Ee&&ke&&St(Ne)&&St(ze),ft=Array.isArray(T.vehicles)?T.vehicles.map(st=>({name:st.name,driver:st.driver||"",passenger_capacity:st.passenger_capacity})):[];H.push({id:`t-${T.id}`,hourKey:qn(T.scheduled_at),sortValue:(()=>{const st=hr(T.scheduled_at);return st?st.hour*60+st.minute:Number.POSITIVE_INFINITY})(),title:`${Gs(T.pickup_location)}  ${Gs(T.destination)}`,subtitle:af(ft,sf(T.duration_minutes)),type:"Transport",to:`/logistics/${T.id}`,transportComplete:We,missingCoordinates:!Ne||!ze,transportRouteOrigin:Ne||null,transportRouteDestination:ze||null,notes:T.notes||null,vehicles:ft,scheduledAt:T.scheduled_at||void 0})}),A.groundCrews.forEach(T=>{const Ne=bt(T.pickup_location),ze=bt(T.destination),Ee=Number.isFinite(T.passenger_count)&&T.passenger_count>=0,ke=Array.isArray(T.vehicles)&&T.vehicles.length>0,We=St(T.pickup_location)&&St(T.destination)&&St(T.scheduled_at)&&Ee&&ke&&St(Ne)&&St(ze),ft=Array.isArray(T.vehicles)?T.vehicles.map(st=>({name:st.name,driver:st.driver||"",passenger_capacity:st.passenger_capacity})):[];H.push({id:`gc-${T.id}`,hourKey:qn(T.scheduled_at),sortValue:(()=>{const st=hr(T.scheduled_at);return st?st.hour*60+st.minute:Number.POSITIVE_INFINITY})(),title:`${Gs(T.pickup_location)}  ${Gs(T.destination)}`,subtitle:af(ft,sf(T.duration_minutes)),type:"Ground Crew",to:`/logistics/ground-crew/${T.id}`,transportComplete:We,missingCoordinates:!Ne||!ze,transportRouteOrigin:Ne||null,transportRouteDestination:ze||null,notes:T.notes||null,vehicles:ft,scheduledAt:T.scheduled_at||void 0})}),A.others.forEach(T=>{H.push({id:`o-${T.id}`,hourKey:qn(T.scheduled_at||void 0),sortValue:(()=>{const Ne=hr(T.scheduled_at||void 0);return Ne?Ne.hour*60+Ne.minute:Number.POSITIVE_INFINITY})(),title:T.name||"Other logistics",subtitle:"",type:"Other",to:`/logistics/others/${T.id}`,missingCoordinates:!St(T.coordinates),coordinates:T.coordinates||null,description:T.description||null,notes:T.notes||null,otherComplete:St(T.name)&&St(T.coordinates)&&St(T.scheduled_at),scheduledAt:T.scheduled_at||void 0})}),A.meals.forEach(T=>{H.push({id:`meal-${T.id}`,hourKey:qn(T.scheduled_at||void 0),sortValue:(()=>{const Ne=hr(T.scheduled_at||void 0);return Ne?Ne.hour*60+Ne.minute:Number.POSITIVE_INFINITY})(),title:T.name,subtitle:"",type:"Meal",to:`/logistics/meals/${T.id}`,mealComplete:St(T.name)&&St(T.location)&&St(T.scheduled_at),location:T.location||null,notes:T.notes||null,scheduledAt:T.scheduled_at||void 0})}),A.accommodations.forEach(T=>{T.check_in_at&&Mt(T.check_in_at)===A.key&&H.push({id:`acc-in-${T.id}`,hourKey:qn(T.check_in_at),sortValue:(()=>{const Ne=hr(T.check_in_at);return Ne?Ne.hour*60+Ne.minute:Number.POSITIVE_INFINITY})(),title:`Check-in: ${T.name}`,subtitle:"",type:"Accommodation",booked:!!T.booked,coordinates:T.coordinates||null,to:`/events/${e}/accommodations/${T.id}`,missingCoordinates:!St(T.coordinates),notes:T.notes||null,scheduledAt:T.check_in_at}),T.check_out_at&&Mt(T.check_out_at)===A.key&&H.push({id:`acc-out-${T.id}`,hourKey:qn(T.check_out_at),sortValue:(()=>{const Ne=hr(T.check_out_at);return Ne?Ne.hour*60+Ne.minute:Number.POSITIVE_INFINITY})(),title:`Check-out: ${T.name}`,subtitle:"",type:"Accommodation",booked:!!T.booked,coordinates:T.coordinates||null,to:`/events/${e}/accommodations/${T.id}`,missingCoordinates:!St(T.coordinates),notes:T.notes||null,scheduledAt:T.check_out_at}),!T.check_in_at&&!T.check_out_at&&H.push({id:`acc-${T.id}`,hourKey:"Unscheduled",sortValue:Number.POSITIVE_INFINITY,title:`${T.name}`,subtitle:"",type:"Accommodation",booked:!!T.booked,coordinates:T.coordinates||null,to:`/events/${e}/accommodations/${T.id}`,missingCoordinates:!St(T.coordinates),scheduledAt:null})});const q=H.filter(T=>dt[T.type]).sort((T,Ne)=>T.sortValue===Ne.sortValue?T.title.localeCompare(Ne.title):T.sortValue-Ne.sortValue),ve=async T=>{if(!R)return;const Ne=q.findIndex(ct=>ct.id===R.id),ze=ct=>ct.startsWith("i-")?"Innhopp":ct.startsWith("t-")?"Transport":ct.startsWith("gc-")?"Ground Crew":ct.startsWith("acc-")?"Accommodation":ct.startsWith("o-")?"Other":ct.startsWith("meal-")?"Meal":null;if(Ne===-1){const ct=ze(R.id);if(!ct)return;const at=W(T,q,A.key,R==null?void 0:R.id),Xe=at!=null?Qs(A.date,at):void 0;try{await h({id:R.id,type:ct},Xe),await X({preserveLoading:!0}),Je(R.id)}catch(ht){k(ht instanceof Error?ht.message:"Failed to update schedule")}finally{ae(null),be(null),lt()}return}const Ee=q[Ne],ke=q.filter(ct=>ct.id!==R.id),We=Math.max(0,Math.min(T,ke.length));ke.splice(We,0,Ee);const ft=W(We,ke,A.key,R==null?void 0:R.id),st=ft!=null?Qs(A.date,ft):void 0;try{await h(Ee,st),await X({preserveLoading:!0}),Je(Ee.id)}catch(ct){k(ct instanceof Error?ct.message:"Failed to update schedule")}finally{ae(null),be(null),lt()}},ye=(T,Ne)=>{const ze=z[T.type],Ee=!!T.missingCoordinates,ke={minWidth:"2.4ch",textAlign:"center",display:"inline-block"};let We=null;T.type==="Accommodation"?We=T.booked&&!Ee?r.jsx("span",{className:"badge success",style:ke,children:""}):r.jsx("span",{className:"badge danger",style:ke,children:"!"}):T.type==="Innhopp"?We=T.ready?r.jsx("span",{className:"badge success",style:ke,children:""}):r.jsx("span",{className:"badge danger",style:ke,children:"!"}):T.type==="Meal"?We=T.mealComplete?r.jsx("span",{className:"badge success",style:ke,children:""}):r.jsx("span",{className:"badge danger",style:ke,children:"!"}):T.type==="Other"?We=T.otherComplete?r.jsx("span",{className:"badge success",style:ke,children:""}):r.jsx("span",{className:"badge danger",style:ke,children:"!"}):T.type==="Transport"?We=T.transportComplete?r.jsx("span",{className:"badge success",style:ke,children:""}):r.jsx("span",{className:"badge danger",style:ke,children:"!"}):T.type==="Ground Crew"?We=T.transportComplete?r.jsx("span",{className:"badge success",style:ke,children:""}):r.jsx("span",{className:"badge danger",style:ke,children:"!"}):Ee&&(We=r.jsx("span",{className:"badge danger",style:ke,title:"Coordinates missing","aria-label":"Coordinates missing",children:"!"}));const ft=r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.15rem"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",flexWrap:"wrap"},children:[r.jsx("strong",{children:T.title}),r.jsxs("div",{style:{marginLeft:"auto",display:"grid",gridTemplateColumns:"minmax(56px, 80px) minmax(130px, 190px)",alignItems:"center",justifyItems:"center",columnGap:"0.5rem"},children:[We||r.jsx("span",{style:{visibility:"hidden",...ke},children:"!"}),r.jsx("span",{className:"badge schedule-type-badge",style:ze,"aria-label":T.type,children:T.type})]})]}),T.subtitle&&r.jsx("div",{className:"muted",children:T.subtitle})]}),st=at=>{at.preventDefault(),at.stopPropagation(),O({entry:T,day:A})};T.id;const ct={draggable:T.type!=="Accommodation",onDragStart:at=>{ae({id:T.id,dayKey:A.key});const Xe=T.hourKey!=="Unscheduled"?T.hourKey:null,ht=at.currentTarget.closest("li");if(Ue(ht||at.currentTarget,Xe,at.clientX,at.clientY),at.dataTransfer){try{at.dataTransfer.clearData()}catch{}at.dataTransfer.setData("text/plain",T.id),at.dataTransfer.setData("text/uri-list","");const Sn=document.createElement("div");Sn.style.width="1px",Sn.style.height="1px",Sn.style.opacity="0",Sn.style.position="fixed",Sn.style.left="-10px",Sn.style.top="-10px",document.body.appendChild(Sn),ce.current=Sn,at.dataTransfer.setDragImage(Sn,0,0)}},onDragOver:at=>{if(!R)return;at.preventDefault(),me!==Ne&&he(Ne);const Xe=W(Ne,q,A.key,R==null?void 0:R.id),ht=Xe!=null&&Xe!==Number.POSITIVE_INFINITY?qn(Qs(A.date,Xe)):null;te(ht,{x:at.clientX,y:at.clientY})},onDrop:at=>{at.preventDefault(),ve(Ne)},onDragEnd:()=>{ae(null),be(null),he(null),lt()},id:`entry-${T.id}`,style:{display:"block",width:"100%",flex:1,padding:"0.5rem 0.8rem",margin:"-0.25rem -1.6rem"},onClick:st};return T.to?r.jsx(nt,{to:T.to,className:"card-link",...ct,onClick:at=>{if(st(at),s!=null&&s.id)try{sessionStorage.setItem(`event-schedule-highlight:${s.id}`,T.id)}catch{}},children:ft},T.id):r.jsx("div",{id:`entry-${T.id}`,style:{display:"block",width:"100%",flex:1,padding:"0.25rem 0.4rem"},children:ft},T.id)};return q.length===0?r.jsx("p",{className:"muted",style:{padding:"0.5rem 0"},onDragOver:T=>{if(!R)return;T.preventDefault(),be(A.key),he(0);const Ne=W(0,q,A.key,R==null?void 0:R.id),ze=Ne!=null&&Ne!==Number.POSITIVE_INFINITY?qn(Qs(A.date,Ne)):null;te(ze,{x:T.clientX,y:T.clientY})},onDrop:T=>{R&&(T.preventDefault(),ve(0))},children:"Nothing scheduled."}):r.jsx("ul",{className:"status-list schedule-list",style:{margin:0},children:q.map((T,Ne)=>{const ze=T.id===Ut,Ee=(_e==null?void 0:_e.entry.id)===T.id,ke=ze||Ee?{boxShadow:"inset 0 0 0 2px #3b82f6",borderRadius:"8px"}:void 0;return r.jsx("li",{style:{display:"block",padding:"0.5rem 0",borderBottom:"1px solid rgba(255, 255, 255, 0.12)",width:"100%",overflow:"hidden"},onDragOver:We=>{if(!R)return;We.preventDefault(),me!==Ne&&he(Ne);const ft=W(Ne,q,A.key,R==null?void 0:R.id),st=ft!=null&&ft!==Number.POSITIVE_INFINITY?qn(Qs(A.date,ft)):null;te(st,{x:We.clientX,y:We.clientY})},onDrop:We=>{We.preventDefault(),ve(Ne)},children:r.jsxs("div",{className:"schedule-entry",style:ke,children:[r.jsx("div",{style:{fontWeight:600},className:"muted schedule-time","data-ghost-time":"time",role:"button",tabIndex:0,onClick:We=>{We.stopPropagation(),Fe({entry:T,day:A,anchor:We.currentTarget,anchorRect:Ae(We.currentTarget)})},onKeyDown:We=>{(We.key==="Enter"||We.key===" ")&&(We.preventDefault(),We.stopPropagation(),Fe({entry:T,day:A,anchor:We.currentTarget,anchorRect:Ae(We.currentTarget)}))},title:"Edit time",children:T.hourKey}),r.jsx("div",{className:"schedule-entry-content",children:ye(T,Ne)})]})},T.id)})})})()]},A.key)),_e&&typeof document<"u"?Gi.createPortal(r.jsx("div",{ref:Qe,style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:9998,background:"var(--overlay-scrim-subtle)"},onClick:()=>{Fe(null),Ye(null)},children:(()=>{const A=_e.anchorRect||Ae(_e.anchor),H=12,Q=340,q=360,ve=typeof window<"u"?window.innerWidth:Q,ye=typeof window<"u"?window.innerHeight:q,T=H,Ne=ve-H,ze=H,Ee=ye-H,ke=A?A.right+12:T,We=A?A.top-ze:q,ft=A?Ee-A.bottom:q,st=We>=q||We>ft,ct=A?st?A.top-q-12:A.bottom+12:ze+24,at=Math.min(Math.max(ke,T),Ne-Q),Xe=Math.min(Math.max(ct,ze),Ee-q);return r.jsxs("div",{style:{position:"fixed",top:Xe,left:at,background:"var(--modal-surface)",border:"1px solid var(--modal-border)",borderRadius:"10px",boxShadow:"0 10px 25px rgba(0,0,0,0.12)",padding:"0.85rem",display:"inline-flex",flexDirection:"column",gap:"0.6rem",minWidth:"280px",maxWidth:"90vw"},onClick:ht=>ht.stopPropagation(),className:"schedule-time-picker",children:[r.jsx(Dt,{ref:Te,options:{enableTime:!0,time_24hr:!0,dateFormat:"Y-m-d H:i",allowInput:!0,inline:!0,clickOpens:!1,closeOnSelect:!1},onChange:ht=>Ye(ht[0]??null),onValueUpdate:ht=>Ye(ht[0]??null)}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end"},children:[r.jsx("button",{type:"button",className:"ghost",onClick:()=>F(),style:{padding:"0.35rem 0.9rem"},children:"Save"}),r.jsx("button",{type:"button",className:"ghost",onClick:()=>{Fe(null),Ye(null)},style:{padding:"0.35rem 0.9rem"},children:"Cancel"})]})]})})()}),document.body):null,G&&typeof document<"u"&&Gi.createPortal(r.jsx("div",{onClick:()=>{O(null)},role:"button",tabIndex:-1,style:{position:"fixed",inset:0,background:"var(--overlay-scrim)",backdropFilter:"blur(6px)",zIndex:9999,pointerEvents:"auto",display:"flex",alignItems:"center",justifyContent:"center",padding:"2rem 1rem"},onKeyDown:A=>{A.key==="Escape"?O(null):A.key==="Enter"&&G.entry.to&&(n(G.entry.to),O(null))},children:r.jsxs("div",{className:"card",onClick:A=>{A.stopPropagation(),G.entry.to&&(Je(G.entry.id),n(G.entry.to)),O(null)},style:$,children:[r.jsxs("div",{className:"card-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsx("h3",{style:{margin:0},children:G.entry.title}),r.jsx("div",{style:{display:"flex",gap:"0.35rem",alignItems:"center"},children:(()=>{const A=z[G.entry.type],H={minWidth:"2.4ch",textAlign:"center",display:"inline-block"};return G.entry.type==="Transport"||G.entry.type==="Ground Crew"?r.jsxs(r.Fragment,{children:[r.jsx("span",{className:`badge ${G.entry.transportComplete?"success":"danger"}`,style:H,children:G.entry.transportComplete?"":"!"}),r.jsx("span",{className:"badge schedule-type-badge",style:A,children:G.entry.type})]}):G.entry.type==="Accommodation"?r.jsxs(r.Fragment,{children:[r.jsx("span",{className:`badge ${G.entry.booked&&!G.entry.missingCoordinates?"success":"danger"}`,style:H,children:G.entry.booked&&!G.entry.missingCoordinates?"":"!"}),r.jsx("span",{className:"badge schedule-type-badge",style:A,children:G.entry.type})]}):G.entry.type==="Innhopp"?r.jsxs(r.Fragment,{children:[r.jsx("span",{className:`badge ${G.entry.ready?"success":"danger"}`,style:H,children:G.entry.ready?"":"!"}),r.jsx("span",{className:"badge schedule-type-badge",style:A,children:G.entry.type})]}):G.entry.type==="Other"?r.jsxs(r.Fragment,{children:[r.jsx("span",{className:`badge ${G.entry.otherComplete?"success":"danger"}`,style:H,children:G.entry.otherComplete?"":"!"}),r.jsx("span",{className:"badge schedule-type-badge",style:A,children:G.entry.type})]}):G.entry.type==="Meal"?r.jsxs(r.Fragment,{children:[r.jsx("span",{className:`badge ${G.entry.mealComplete?"success":"danger"}`,style:H,children:G.entry.mealComplete?"":"!"}),r.jsx("span",{className:"badge schedule-type-badge",style:A,children:G.entry.type})]}):null})()})]}),r.jsx("div",{className:"card-body",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(240px, 1fr))",gap:"1.1rem"},children:(()=>{const A=(H,Q,q)=>r.jsxs("div",{children:[r.jsx("div",{className:"muted",style:{fontWeight:700,letterSpacing:"0.04em"},children:Q}),r.jsx("div",{children:q??""})]},H);if(G.entry.type==="Innhopp"){const H=[];return G.entry.scheduledAt&&H.push(A("scheduled_at","SCHEDULED AT",ao(G.entry.scheduledAt))),H.push(A("reason","REASON FOR CHOICE",G.entry.innhoppReason||"")),H.push(A("elevation","ELEVATION",G.entry.innhoppElevation!=null?tl(G.entry.innhoppElevation):"")),H.push(A("takeoff","TAKEOFF AIRFIELD",G.entry.innhoppTakeoffName||"")),H.push(A("elevation_diff","ELEVATION DIFFERENCE",G.entry.innhoppElevationDiff!=null?tl(G.entry.innhoppElevationDiff):"")),H.push(A("rescue_boat","RESCUE BOAT",G.entry.innhoppRescueBoat==null?"":G.entry.innhoppRescueBoat?"Yes":"No")),H.push(A("primary","PRIMARY AREA",G.entry.innhoppPrimaryName?`${G.entry.innhoppPrimaryName}${G.entry.innhoppPrimarySize?` (${G.entry.innhoppPrimarySize})`:""}`:"")),H.push(A("secondary","SECONDARY AREA",G.entry.innhoppSecondaryName?`${G.entry.innhoppSecondaryName}${G.entry.innhoppSecondarySize?` (${G.entry.innhoppSecondarySize})`:""}`:"")),H.push(A("risk","RISK ASSESSMENT",G.entry.innhoppRisk||"")),H.push(A("minimum","MINIMUM REQUIREMENTS",G.entry.innhoppMinimumRequirements||"")),H.push(A("notes","NOTES",G.entry.notes||"")),H.push(A("landowners","LANDOWNERS PERMISSION",G.entry.innhoppLandOwnerPermission==null?"":G.entry.innhoppLandOwnerPermission?"Yes":"No")),G.entry.innhoppCoordinates&&H.push(r.jsx("div",{style:{gridColumn:"1 / -1",display:"grid",justifyContent:"center",alignItems:"center",gap:"0.25rem",textAlign:"center"},children:r.jsx("div",{children:r.jsx("button",{type:"button",className:"link-button",style:{fontSize:"1rem"},onClick:Q=>{Q.stopPropagation(),window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(G.entry.innhoppCoordinates||"")}`,"_blank")},children:"Open in Maps"})})},"open-maps")),H}return r.jsx(r.Fragment,{children:G.entry.type==="Accommodation"?r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsx("div",{className:"muted",style:{fontWeight:700,letterSpacing:"0.04em"},children:"BOOKED"}),r.jsx("div",{children:G.entry.booked?"Yes":"No"})]},"booked"),G.entry.scheduledAt?r.jsxs("div",{children:[r.jsx("div",{className:"muted",style:{fontWeight:700,letterSpacing:"0.04em"},children:"SCHEDULED AT"}),r.jsx("div",{children:ao(G.entry.scheduledAt)})]},"scheduled"):null,r.jsxs("div",{children:[r.jsx("div",{className:"muted",style:{fontWeight:700,letterSpacing:"0.04em"},children:"NOTES"}),r.jsx("div",{children:G.entry.notes||""})]},"notes"),r.jsx("div",{style:{gridColumn:"1 / -1",display:"flex",justifyContent:"center"},children:G.entry.coordinates?r.jsx("button",{type:"button",className:"link-button",style:{fontSize:"1rem"},onClick:H=>{H.stopPropagation(),window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(G.entry.coordinates||"")}`,"_blank")},children:"Open in Maps"}):""})]}):r.jsxs(r.Fragment,{children:[G.entry.subtitle?r.jsxs("div",{children:[r.jsx("div",{className:"muted",style:{fontWeight:700,letterSpacing:"0.04em"},children:"SUBTITLE"}),r.jsx("div",{children:G.entry.subtitle})]},"subtitle"):null,G.entry.type==="Meal"&&r.jsxs("div",{children:[r.jsx("div",{className:"muted",style:{fontWeight:700,letterSpacing:"0.04em"},children:"LOCATION"}),r.jsx("div",{children:G.entry.location||""})]},"meal-location"),G.entry.scheduledAt?r.jsxs("div",{children:[r.jsx("div",{className:"muted",style:{fontWeight:700,letterSpacing:"0.04em"},children:"SCHEDULED AT"}),r.jsx("div",{children:ao(G.entry.scheduledAt)})]},"scheduled"):null,r.jsxs("div",{children:[r.jsx("div",{className:"muted",style:{fontWeight:700,letterSpacing:"0.04em"},children:"NOTES"}),r.jsx("div",{children:G.entry.notes||""})]},"notes"),(G.entry.type==="Transport"||G.entry.type==="Ground Crew")&&G.entry.vehicles?r.jsxs("div",{children:[r.jsx("div",{className:"muted",style:{fontWeight:700,letterSpacing:"0.04em"},children:"VEHICLES"}),r.jsx("div",{style:{marginTop:"0.15rem"},children:G.entry.vehicles.length===0?r.jsx("div",{className:"muted",children:""}):G.entry.vehicles.map((H,Q)=>r.jsxs("div",{className:"muted",children:[r.jsx("strong",{children:H.name}),H.driver?` (Driver: ${H.driver})`:"",typeof H.passenger_capacity=="number"?`  Capacity: ${H.passenger_capacity}`:""]},Q))})]},"vehicles"):null,(G.entry.type==="Transport"||G.entry.type==="Ground Crew")&&G.entry.transportRouteOrigin&&G.entry.transportRouteDestination?r.jsx("div",{style:{gridColumn:"1 / -1",display:"flex",justifyContent:"center"},children:r.jsx("button",{type:"button",className:"link-button",style:{fontSize:"1rem"},onClick:H=>{H.stopPropagation();const Q=G.entry.transportRouteOrigin||"",q=G.entry.transportRouteDestination||"";window.open(`https://www.google.com/maps/dir/?api=1&origin=${encodeURIComponent(Q)}&destination=${encodeURIComponent(q)}`,"_blank")},children:"Open route"})},"route"):null,G.entry.type==="Other"&&G.entry.coordinates?r.jsx("div",{style:{gridColumn:"1 / -1",display:"flex",justifyContent:"center"},children:r.jsx("button",{type:"button",className:"link-button",style:{fontSize:"1rem"},onClick:H=>{H.stopPropagation(),window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(G.entry.coordinates||"")}`,"_blank")},children:"Open in Maps"})},"other-maps"):null]})})})()})]})}),document.body)]})},ej=()=>{const{vehicleId:e}=Mn(),n=vt(),[t]=rd(),s=t.get("transportId"),a=t.get("groundCrewId"),[i,l]=o.useState({event_id:"",name:"",driver:"",passenger_capacity:"",notes:""}),[u,d]=o.useState([]),[x,_]=o.useState(!0),[C,b]=o.useState(!1),[L,y]=o.useState(null);o.useEffect(()=>{let p=!1;return(async()=>{if(e){_(!0),y(null);try{const[v,j]=await Promise.all([f0(Number(e)),$t()]);if(p)return;d(Array.isArray(j)?j:[]),l({event_id:String(v.event_id),name:v.name,driver:v.driver||"",passenger_capacity:String(v.passenger_capacity),notes:v.notes||""})}catch(v){p||y(v instanceof Error?v.message:"Failed to load vehicle")}finally{p||_(!1)}}})(),()=>{p=!0}},[e]);const S=async p=>{if(p.preventDefault(),!!e){b(!0),y(null);try{const m=await m0(Number(e),{event_id:Number(i.event_id),name:i.name.trim(),driver:i.driver.trim()||void 0,passenger_capacity:Number(i.passenger_capacity)||0,notes:i.notes.trim()||void 0});y("Vehicle updated"),l({event_id:String(m.event_id),name:m.name,driver:m.driver||"",passenger_capacity:String(m.passenger_capacity),notes:m.notes||""})}catch(m){y(m instanceof Error?m.message:"Failed to update vehicle")}finally{b(!1)}}},E=async()=>{if(e&&window.confirm("Are you sure you want to delete this vehicle?"))try{await p0(Number(e)),n(s?`/logistics/${s}`:a?`/logistics/ground-crew/${a}`:"/logistics")}catch(p){y(p instanceof Error?p.message:"Failed to delete vehicle")}};return x?r.jsx("p",{className:"muted",children:"Loading vehicle"}):r.jsxs("section",{children:[r.jsxs("header",{className:"page-header",children:[r.jsxs("div",{children:[r.jsx("h2",{children:"Vehicle details"}),r.jsx("p",{children:"Edit vehicle information and assignment."})]}),r.jsxs("div",{className:"card-actions",children:[r.jsx("button",{className:"ghost danger",type:"button",onClick:E,children:"Delete vehicle"}),r.jsx("button",{className:"ghost",type:"button",onClick:()=>n(s?`/logistics/${s}`:a?`/logistics/ground-crew/${a}`:"/logistics"),children:s?"Back to route":a?"Back to ground crew":"Back to logistics"})]})]}),r.jsx("article",{className:"card",children:r.jsxs("form",{className:"form-grid",onSubmit:S,children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Event"}),r.jsxs("select",{value:i.event_id,onChange:p=>l(m=>({...m,event_id:p.target.value})),required:!0,children:[r.jsx("option",{value:"",children:"Select event"}),u.map(p=>r.jsx("option",{value:p.id,children:p.name},p.id))]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Name"}),r.jsx("input",{type:"text",value:i.name,onChange:p=>l(m=>({...m,name:p.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Driver"}),r.jsx("input",{type:"text",value:i.driver,onChange:p=>l(m=>({...m,driver:p.target.value}))})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Passenger capacity"}),r.jsx("input",{type:"number",min:0,value:i.passenger_capacity,onChange:p=>l(m=>({...m,passenger_capacity:p.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Notes"}),r.jsx("input",{type:"text",value:i.notes,onChange:p=>l(m=>({...m,notes:p.target.value}))})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"submit",className:"primary",disabled:C,children:C?"Saving":"Save vehicle"}),L&&r.jsx("span",{className:"muted",children:L})]})]})})]})},is={current:{}},gh=/(\d{1,3})(\d{1,2})'(\d{1,2}(?:\.\d+)?)"?([NSEW])/i,lf=e=>{const n=e.trim().match(gh);if(!n)return null;const[,t,s,a,i]=n,l=Number(t),u=Number(s),d=Number(a),x=i.toUpperCase();if(Number.isNaN(l)||Number.isNaN(u)||Number.isNaN(d))return null;const _=l+u/60+d/3600;return x==="S"||x==="W"?-_:_},of=e=>{if(!e)return null;const n=new RegExp(gh.source,"ig"),t=Array.from(e.matchAll(n));if(t.length<2)return null;const s=lf(t[0][0]),a=lf(t[1][0]);if(s==null||a==null)return null;const i=t[0][4].toUpperCase(),l=t[1][4].toUpperCase();return(i==="N"||i==="S")&&(l==="E"||l==="W")?{lat:s,lon:a}:(i==="E"||i==="W")&&(l==="N"||l==="S")?{lat:a,lon:s}:{lat:s,lon:a}},tj=(e,n)=>{const t=_=>_*Math.PI/180,a=t(n.lat-e.lat),i=t(n.lon-e.lon),l=t(e.lat),u=t(n.lat),d=Math.sin(a/2)*Math.sin(a/2)+Math.sin(i/2)*Math.sin(i/2)*Math.cos(l)*Math.cos(u);return 6371*(2*Math.atan2(Math.sqrt(d),Math.sqrt(1-d)))},cf=()=>({name:"",description:"",size:"",obstacles:""}),wn=e=>!!e&&e.trim().length>0,di=e=>e!=null&&Number.isFinite(e),nj=e=>e!=null,ui=e=>({name:(e==null?void 0:e.name)||"",description:(e==null?void 0:e.description)||"",size:(e==null?void 0:e.size)||"",obstacles:(e==null?void 0:e.obstacles)||""}),df=e=>Array.isArray(e)?e.map(n=>({name:n.name||"",telephone:n.telephone||"",email:n.email||""})):[],rj=e=>e.filter(n=>{var i,l,u;const t=(i=n.name)==null?void 0:i.trim(),s=(l=n.telephone)==null?void 0:l.trim(),a=(u=n.email)==null?void 0:u.trim();return!!(t||s||a)}),uf=e=>({name:e.name.trim(),description:e.description.trim(),size:e.size.trim(),obstacles:e.obstacles.trim()}),ff=()=>{var Je,f,w,z,W,Le,$e;const{eventId:e,innhoppId:n}=Mn(),t=vt(),s=Gt(),a=!n||n==="new",[i,l]=o.useState(null),[u,d]=o.useState(null),[x,_]=o.useState([]),[C,b]=o.useState(""),L={name:"",sequence:1,coordinates:"",scheduled_at:"",notes:"",takeoff_airfield_id:void 0,elevation:void 0,reason_for_choice:"",adjust_altimeter_aad:"",notam:"",distance_by_air:void 0,distance_by_road:void 0,primary_landing_area:cf(),secondary_landing_area:cf(),risk_assessment:"",safety_precautions:"",jumprun:"",hospital:"",rescue_boat:void 0,minimum_requirements:"",land_owners:[],land_owner_permission:void 0,image_files:[]},[y,S]=o.useState(L),[E,p]=o.useState({name:"",elevation:0,coordinates:"",description:""}),[m,v]=o.useState(!1),[j,P]=o.useState(!1),[k,D]=o.useState(!0),[M,J]=o.useState(null),[se,R]=o.useState(null),[ae,de]=o.useState(!1),[be,me]=o.useState(""),[he,we]=o.useState(!1),ue=o.useRef(null),[ge,fe]=o.useState(null),[Y,ee]=o.useState(0),[re,ce]=o.useState(!1),pe=I=>{if(!I)return[];const K=Array.from(I.items||[]).map(g=>g.kind==="file"?g.getAsFile():null).filter(g=>!!g&&g.type.startsWith("image/")),h=Array.from(I.files||[]).filter(g=>g.type.startsWith("image/"));return K.length?K:h},Ae=`primary ${ae?"saved":""}`,_e=j?"Saving":ae?"Saved":"Save",Fe=o.useCallback(I=>JSON.stringify(I),[y]),Te=o.useMemo(()=>Fe(y),[Fe,y]),[Ge,Ye]=o.useState(!1),Qe=o.useMemo(()=>{var K;if(y.elevation==null)return null;const I=(K=x.find(h=>h.id===y.takeoff_airfield_id))==null?void 0:K.elevation;return I==null?null:I-y.elevation},[y.elevation,y.takeoff_airfield_id,x]),G=o.useMemo(()=>(y.image_files||[]).filter(I=>I==null?void 0:I.data).map((I,K)=>({key:`${I.data.slice(0,24)}-${K}`,name:I.name||`Image ${K+1}`,mime:I.mime_type||"image/*",data:I.data,src:`data:${I.mime_type||"image/*"};base64,${I.data}`})),[y.image_files]),O=I=>I?Gp(I.trim()):"",$=I=>{I&&(I.style.height="auto",I.style.height=`${I.scrollHeight}px`)},V=I=>{$(I.currentTarget)},Z=o.useMemo(()=>({sequence:!(y.sequence&&y.sequence>0),name:!wn(y.name),coordinates:!wn(y.coordinates),elevation:!di(y.elevation),scheduled_at:!wn(y.scheduled_at),takeoff_airfield_id:!di(y.takeoff_airfield_id),distance_by_air:!di(y.distance_by_air),distance_by_road:!di(y.distance_by_road),jumprun:!wn(y.jumprun),primary_name:!wn(y.primary_landing_area.name),primary_description:!wn(y.primary_landing_area.description),primary_size:!wn(y.primary_landing_area.size),primary_obstacles:!wn(y.primary_landing_area.obstacles),risk_assessment:!wn(y.risk_assessment),safety_precautions:!wn(y.safety_precautions),minimum_requirements:!wn(y.minimum_requirements),hospital:!wn(y.hospital),rescue_boat:!nj(y.rescue_boat)}),[y]),Ie=o.useMemo(()=>Object.values(Z).every(I=>!I),[Z]);o.useEffect(()=>{document.querySelectorAll("textarea[data-autosize]").forEach(K=>$(K))},[y]),o.useEffect(()=>{let I=!1;return(async()=>{var h;if(e){a&&(d(null),S(L),b(""),we(!1)),D(!0),J(null);try{if(!a&&n){const g=await Bp(Number(n));if(I)return;d(g);const F=g.scheduled_at?"":(()=>{var U;if(g.event_id&&((U=is.current)!=null&&U[g.event_id])){const oe=is.current[g.event_id];if(oe.starts_at){const Se=Ze(oe.starts_at);return Se?(Se.setUTCHours(9,0,0,0),Se.toISOString()):""}}return""})();if(S({name:g.name,sequence:g.sequence,coordinates:g.coordinates||"",elevation:g.elevation??void 0,scheduled_at:O(g.scheduled_at)||F,notes:g.notes||"",takeoff_airfield_id:g.takeoff_airfield_id||void 0,reason_for_choice:g.reason_for_choice||"",adjust_altimeter_aad:g.adjust_altimeter_aad||"",notam:g.notam||"",distance_by_air:g.distance_by_air??void 0,distance_by_road:g.distance_by_road??void 0,primary_landing_area:ui(g.primary_landing_area),secondary_landing_area:ui(g.secondary_landing_area),risk_assessment:g.risk_assessment||"",safety_precautions:g.safety_precautions||"",jumprun:g.jumprun||"",hospital:g.hospital||"",rescue_boat:g.rescue_boat??void 0,minimum_requirements:g.minimum_requirements||"",land_owners:df(g.land_owners),land_owner_permission:g.land_owner_permission??void 0,image_files:g.image_files||[]}),we(!1),b(g.takeoff_airfield_id?String(g.takeoff_airfield_id):""),g.event_id)try{const U=await Xr(g.event_id);if(!I&&(l(U),is.current={...is.current,[g.event_id]:U},!g.scheduled_at&&U.starts_at)){const oe=Ze(U.starts_at);oe&&(oe.setUTCHours(9,0,0,0),S(Se=>({...Se,scheduled_at:oe.toISOString()})))}}catch{}}else{const g=(h=s.state)==null?void 0:h.copyInnhopp;if(e)try{const F=await Xr(Number(e));if(!I&&(l(F),is.current={...is.current,[F.id]:F},!(g!=null&&g.scheduled_at)&&F.starts_at)){const U=Ze(F.starts_at);U&&(U.setUTCHours(9,0,0,0),S(oe=>({...oe,scheduled_at:U.toISOString()})))}}catch{}g&&!I&&(S({name:g.name,sequence:g.sequence,coordinates:g.coordinates||"",elevation:g.elevation??void 0,scheduled_at:O(g.scheduled_at),notes:g.notes||"",takeoff_airfield_id:g.takeoff_airfield_id||void 0,reason_for_choice:g.reason_for_choice||"",adjust_altimeter_aad:g.adjust_altimeter_aad||"",notam:g.notam||"",distance_by_air:g.distance_by_air??void 0,distance_by_road:g.distance_by_road??void 0,primary_landing_area:ui(g.primary_landing_area),secondary_landing_area:ui(g.secondary_landing_area),risk_assessment:g.risk_assessment||"",safety_precautions:g.safety_precautions||"",jumprun:g.jumprun||"",hospital:g.hospital||"",rescue_boat:g.rescue_boat??void 0,minimum_requirements:g.minimum_requirements||"",land_owners:df(g.land_owners),land_owner_permission:g.land_owner_permission??void 0,image_files:g.image_files||[]}),we(!1),b(g.takeoff_airfield_id?String(g.takeoff_airfield_id):""))}}catch(g){I||J(g instanceof Error?g.message:"Failed to load innhopp")}finally{I||D(!1)}}})(),()=>{I=!0}},[e,n,a]),o.useEffect(()=>{let I=!1;return(async()=>{try{const h=await Mr();I||_(Array.isArray(h)?h:[])}catch{}})(),()=>{I=!0}},[]);const Ue=(I,K)=>{var U,oe,Se,He,Pe,Ke,De,A,H,Q,q;const h={...y,...I},g=rj(h.land_owners||[]),F={sequence:h.sequence,name:h.name.trim(),coordinates:(U=h.coordinates)==null?void 0:U.trim(),scheduled_at:((oe=h.scheduled_at)==null?void 0:oe.trim())||void 0,notes:((Se=h.notes)==null?void 0:Se.trim())||"",elevation:h.elevation,takeoff_airfield_id:h.takeoff_airfield_id,reason_for_choice:(He=h.reason_for_choice)==null?void 0:He.trim(),adjust_altimeter_aad:(Pe=h.adjust_altimeter_aad)==null?void 0:Pe.trim(),notam:(Ke=h.notam)==null?void 0:Ke.trim(),distance_by_air:h.distance_by_air,distance_by_road:h.distance_by_road,primary_landing_area:uf(h.primary_landing_area),secondary_landing_area:uf(h.secondary_landing_area),risk_assessment:(De=h.risk_assessment)==null?void 0:De.trim(),safety_precautions:(A=h.safety_precautions)==null?void 0:A.trim(),jumprun:(H=h.jumprun)==null?void 0:H.trim(),hospital:(Q=h.hospital)==null?void 0:Q.trim(),rescue_boat:h.rescue_boat??void 0,minimum_requirements:(q=h.minimum_requirements)==null?void 0:q.trim(),land_owners:g.map(ve=>({name:ve.name.trim(),telephone:ve.telephone.trim(),email:ve.email.trim()})),land_owner_permission:h.land_owner_permission??void 0};return K!=null&&K.includeImages&&(F.image_files=(h.image_files||[]).map(ve=>{var ye,T;return{name:((ye=ve.name)==null?void 0:ye.trim())||void 0,mime_type:((T=ve.mime_type)==null?void 0:T.trim())||void 0,data:ve.data}})),F},te=(I,K,h)=>{S(g=>{const F=I==="primary"?{...g.primary_landing_area,[K]:h}:{...g.secondary_landing_area,[K]:h};return I==="primary"?{...g,primary_landing_area:F}:{...g,secondary_landing_area:F}})},lt=(I,K,h)=>{S(g=>{const F=[...g.land_owners||[]];return F[I]={...F[I],[K]:h},{...g,land_owners:F}})},dt=()=>{S(I=>({...I,land_owners:[...I.land_owners||[],{name:"",telephone:"",email:""}]}))},Tt=I=>{S(K=>({...K,land_owners:(K.land_owners||[]).filter((h,g)=>g!==I)}))},bt=I=>new Promise((K,h)=>{const g=new FileReader;g.onload=()=>{const F=g.result;if(typeof F!="string"){h(new Error("Failed to read file"));return}const U=F.split(",")[1]||"";K(U)},g.onerror=()=>h(g.error||new Error("Failed to read file")),g.readAsDataURL(I)}),X=async I=>{if(!I||I.length===0)return;const K=Array.isArray(I)?I:Array.from(I);try{const h=[];for(const oe of K){const Se=await bt(oe);h.push({name:oe.name,mime_type:oe.type||void 0,data:Se})}const g=y.image_files||[],F=[...g];h.forEach(oe=>{F.some(Se=>Se.data===oe.data)||F.push(oe)}),F.length-g.length>0&&ee(g.length),S(oe=>({...oe,image_files:F})),we(!0),u&&await ut(F)}catch{}},le=I=>{S(K=>({...K,image_files:(K.image_files||[]).filter((h,g)=>g!==I)})),we(!0),ge!==null&&ge===I?fe(null):ge!==null&&I<ge&&fe(K=>K!=null?K-1:null),I===Y&&G.length>1?ee(K=>(K-1+G.length)%G.length):I<Y&&ee(K=>Math.max(K-1,0))},Ce=I=>{I.preventDefault(),I.stopPropagation(),ce(!0)},Ve=I=>{I.preventDefault(),I.stopPropagation(),ce(!1)},et=I=>{var K,h;I.preventDefault(),I.stopPropagation(),ce(!1),(h=(K=I.dataTransfer)==null?void 0:K.files)!=null&&h.length&&X(I.dataTransfer.files)},tt=I=>{const K=pe(I.clipboardData);K.length&&(I.preventDefault(),X(K))};o.useEffect(()=>{const I=of(y.coordinates),K=x.find(U=>U.id===y.takeoff_airfield_id),h=of(K==null?void 0:K.coordinates);if(!I||!h)return;const g=tj(I,h),F=Math.round(g*10)/10;S(U=>U.distance_by_air===F?U:{...U,distance_by_air:F})},[y.coordinates,y.takeoff_airfield_id,x]);const yt=async I=>{if(I.preventDefault(),!!e){P(!0),R(null),de(!1);try{const K=a||he,h=Ue(void 0,{includeImages:K});if(a||!u){const g=await Ax(Number(e),h);d(g),R("Innhopp created"),t(`/events/${e}/innhopps/${g.id}`,{replace:!0,state:{}})}else{const g=await Si(u.id,h);d(g),R("Innhopp updated")}K&&we(!1),de(!0),me(Te)}catch(K){R(K instanceof Error?K.message:"Failed to save innhopp"),de(!1)}finally{P(!1)}}},ut=async I=>{if(e){if(!u){R("Save the innhopp first to persist images.");return}P(!0),R(null),de(!1);try{const K=Ue({image_files:I},{includeImages:!0}),h=await Si(u.id,K);d(h),S(g=>({...g,image_files:h.image_files||I})),R("Images saved"),de(!0),we(!1),me(Fe({...y,image_files:I}))}catch(K){R(K instanceof Error?K.message:"Failed to save images"),de(!1)}finally{P(!1)}}},Pt=async()=>{if(!(!u||!i||Ge||!window.confirm("Are you sure you want to delete this innhopp? This cannot be undone."))){Ye(!0),R(null);try{await Ix(u.id),t(`/events/${i.id}`)}catch(K){R(K instanceof Error?K.message:"Failed to delete innhopp"),Ye(!1)}}},Ut=async()=>{var I;P(!0),R(null);try{const K=await Zi({name:E.name.trim(),elevation:Number(E.elevation)||0,coordinates:E.coordinates.trim(),description:((I=E.description)==null?void 0:I.trim())||void 0});if(_(h=>[...h,K]),S(h=>({...h,takeoff_airfield_id:K.id})),b(String(K.id)),v(!1),p({name:"",elevation:0,coordinates:"",description:""}),!u)R("Airfield created and assigned as takeoff");else{const h=Ue({takeoff_airfield_id:K.id},{includeImages:!1}),g=await Si(u.id,h);d(g),S(F=>({...F,takeoff_airfield_id:g.takeoff_airfield_id||K.id})),R("Airfield created, attached, and innhopp saved")}}catch(K){R(K instanceof Error?K.message:"Failed to create airfield")}finally{P(!1)}};return o.useEffect(()=>{ae&&Te!==be&&de(!1)},[Te,be,ae]),o.useEffect(()=>{const I=K=>{const h=pe(K.clipboardData);h.length&&(K.preventDefault(),X(h))};return window.addEventListener("paste",I),()=>window.removeEventListener("paste",I)},[]),k?r.jsx("p",{className:"muted",children:"Loading innhopp"}):M?r.jsx("p",{className:"error-text",children:M}):!i||!u&&!a?r.jsx("p",{className:"error-text",children:"Innhopp not found."}):r.jsxs("section",{children:[r.jsxs("header",{className:"page-header",children:[r.jsx("div",{children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flexWrap:"wrap"},children:[r.jsxs("h2",{style:{margin:0},children:[i.name,"  ",a?"New innhopp":`#${u==null?void 0:u.sequence} ${u==null?void 0:u.name}`]}),!a&&r.jsx("span",{className:`badge ${Ie?"success":"danger"}`,style:{minWidth:"2.4ch",textAlign:"center",display:"inline-block"},children:Ie?"OP READY":"!"})]})}),r.jsxs("div",{className:"card-actions",children:[!a&&r.jsx("button",{className:"ghost",type:"button",onClick:()=>t(`/events/${e}/innhopps/new`,{state:{copyInnhopp:u}}),children:"Make a copy"}),!a&&r.jsx("button",{className:"ghost danger",type:"button",onClick:Pt,disabled:j||Ge,children:Ge?"Deleting":"Delete innhopp"}),r.jsx("button",{className:"ghost",type:"button",onClick:()=>t(-1),children:"Back"})]})]}),r.jsxs("form",{className:"stack",onSubmit:yt,children:[r.jsxs("article",{className:"card",children:[r.jsxs("div",{className:"form-grid",children:[r.jsxs("div",{className:"form-grid",style:{gridTemplateColumns:"max-content 16px 1fr",gridColumn:"1 / -1",gap:"1rem",alignItems:"end"},children:[r.jsxs("label",{className:`form-field ${Z.sequence?"field-missing":""}`,style:{maxWidth:"140px"},children:[r.jsx("span",{children:"Sequence"}),r.jsx("input",{type:"number",min:1,value:y.sequence,onFocus:I=>I.target.select(),onChange:I=>S(K=>({...K,sequence:Number(I.target.value)})),style:{minWidth:"80px"}})]}),r.jsx("div",{"aria-hidden":"true"}),r.jsxs("label",{className:`form-field ${Z.name?"field-missing":""}`,children:[r.jsx("span",{children:"Name"}),r.jsx("input",{type:"text",value:y.name,onChange:I=>S(K=>({...K,name:I.target.value})),required:!0})]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Reason for choice"}),r.jsx("input",{type:"text",value:y.reason_for_choice||"",onChange:I=>S(K=>({...K,reason_for_choice:I.target.value})),placeholder:"Why this innhopp location was selected"})]}),r.jsxs("div",{className:"form-grid",style:{gridTemplateColumns:(Je=y.coordinates)!=null&&Je.trim()?"repeat(2,minmax(0,1fr))":"1fr",gridColumn:"1 / -1",alignItems:"start",gap:"1rem"},children:[r.jsxs("div",{className:"form-grid",style:{gridTemplateColumns:"1fr",rowGap:"0.9rem",gridColumn:(f=y.coordinates)!=null&&f.trim()?"1 / span 1":"1 / -1"},children:[r.jsxs("label",{className:`form-field ${Z.coordinates?"field-missing":""}`,children:[r.jsx("span",{children:"Coordinates (DMS)"}),r.jsxs("div",{className:"input-with-button",style:{display:"flex",alignItems:"center",gap:"0.75rem",width:"fit-content"},children:[r.jsx("input",{type:"text",value:y.coordinates||"",onChange:I=>S(K=>({...K,coordinates:I.target.value})),pattern:`^[0-9]{1,3}[0-9]{1,2}'[0-9]{1,2}(?:\\.\\d+)?"[NS]\\s[0-9]{1,3}[0-9]{1,2}'[0-9]{1,2}(?:\\.\\d+)?"[EW]$`,title:`Use DMS format like 1114'30.0"N 7342'59.7"W`,style:{width:"24ch"}}),(w=y.coordinates)!=null&&w.trim()?r.jsx("button",{type:"button",className:"ghost",style:{minWidth:"12ch",textAlign:"right",justifyContent:"flex-end",whiteSpace:"nowrap"},onClick:()=>{var K;const I=(K=y.coordinates)==null?void 0:K.trim();I&&window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(I)}`,"_blank")},children:"Open in Maps"}):null]})]}),r.jsx("div",{className:"form-grid",style:{gridTemplateColumns:"repeat(auto-fit,minmax(220px,1fr))",gap:"0.75rem"},children:r.jsxs("label",{className:`form-field ${Z.elevation?"field-missing":""}`,children:[r.jsx("span",{children:"Elevation (m)"}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx("input",{type:"number",min:0,value:y.elevation??"",style:{width:"24ch"},onFocus:I=>{const K=I.target;requestAnimationFrame(()=>K.select())},onClick:I=>{const K=I.target;requestAnimationFrame(()=>K.select())},onChange:I=>S(K=>({...K,elevation:Number(I.target.value)}))}),r.jsx("span",{className:"muted",style:{whiteSpace:"nowrap",minWidth:"12ch",textAlign:"left"},children:y.elevation!==void 0&&y.elevation!==null&&!Number.isNaN(y.elevation)?`${id(y.elevation)} ft`:" ft"})]})]})}),r.jsx("div",{className:"form-grid",style:{gridTemplateColumns:"repeat(auto-fit,minmax(220px,1fr))",gap:"0.75rem"},children:r.jsxs("label",{className:`form-field ${Z.scheduled_at?"field-missing":""}`,children:[r.jsx("span",{children:"Scheduled at"}),r.jsx("div",{style:{width:"24ch"},children:r.jsx(Dt,{value:qe(y.scheduled_at||void 0),options:{enableTime:!0,time_24hr:!0,altInput:!0,altInputClass:"full-width-alt",altFormat:"Y-m-d H:i",dateFormat:"Y-m-d H:i",formatDate:I=>qp(I)},style:{width:"100%"},onChange:I=>{const K=I[0];S(h=>({...h,scheduled_at:K?zt(K):""}))},placeholder:"Select date & time"})})]})})]}),(z=y.coordinates)!=null&&z.trim()?r.jsxs("div",{className:"form-field",style:{display:"flex",flexDirection:"column",gap:"0.4rem",gridRow:"1 / span 3",gridColumn:"2",alignSelf:"stretch"},children:[r.jsx("span",{className:"muted",style:{fontWeight:700,letterSpacing:"0.04em"},children:"Location preview"}),r.jsx("div",{style:{height:"100%",minHeight:"220px",borderRadius:"10px",overflow:"hidden",border:"1px solid #d7dfe7"},children:r.jsx("iframe",{title:"Innhopp location preview",src:`https://www.google.com/maps?q=${encodeURIComponent(y.coordinates.trim())}&t=k&z=15&output=embed`,loading:"lazy",style:{width:"100%",height:"100%",border:0},allowFullScreen:!0,referrerPolicy:"no-referrer-when-downgrade"})})]}):null]})]}),r.jsx("div",{className:"form-actions",style:{marginTop:"0.75rem"},children:r.jsx("button",{type:"submit",className:Ae,disabled:j||ae,children:_e})})]}),r.jsxs("article",{className:"card",children:[r.jsx("div",{className:"form-field",style:{gridColumn:"1 / -1",marginBottom:"0.5rem"},children:r.jsx("span",{children:"Image gallery"})}),r.jsxs("div",{className:"form-grid",style:{gridTemplateColumns:"1fr",gap:"0.75rem",border:re?"2px dashed #2b5fab":void 0,borderRadius:re?"12px":void 0,padding:re?"0.5rem":void 0,transition:"border 0.15s ease, background 0.15s ease",background:re?"#f1f6ff":void 0},tabIndex:0,id:"innhopp-gallery-card",onDragOver:Ce,onDragLeave:Ve,onDrop:et,onPaste:tt,children:[G.length?r.jsx("div",{style:{width:"100%",display:"flex",justifyContent:"center"},children:r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.6rem",alignItems:"center",gridColumn:"1 / -1",width:"fit-content",maxWidth:"100%"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",width:"100%",justifyContent:"center"},children:[G.length>4?r.jsx("button",{type:"button",className:"ghost","aria-label":"Previous image",disabled:G.length<=1,style:{fontSize:"2rem",padding:"0.4rem 0.6rem"},onClick:()=>ee(I=>G.length?(I-1+G.length)%G.length:0),children:""}):r.jsx("div",{style:{width:"2.5rem"}}),r.jsx("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center",gap:"0.5rem",margin:"0 auto",width:"100%",maxWidth:"900px"},children:G.slice(Y,Y+4).concat(Y+4>G.length?G.slice(0,Y+4-G.length):[]).slice(0,Math.min(4,G.length)).map((I,K)=>{const h=(Y+K)%G.length;return r.jsxs("figure",{style:{margin:0,border:"1px solid #d7dfe7",borderRadius:"10px",overflow:"hidden",background:"#fff",display:"flex",flexDirection:"column",position:"relative",cursor:"pointer",width:"180px",height:"180px",flex:"0 0 180px"},onClick:()=>fe(h),children:[r.jsx("button",{type:"button","aria-label":"Remove image",onClick:g=>{g.stopPropagation(),le(h)},style:{position:"absolute",top:"8px",left:"8px",background:"rgba(0,0,0,0.6)",color:"#fff",border:"none",borderRadius:"50%",width:"28px",height:"28px",padding:0,lineHeight:1,fontSize:"16px",minWidth:"28px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",zIndex:2},children:""}),r.jsx("div",{style:{position:"relative",width:"100%",height:"100%",background:"#f9fbfd",overflow:"hidden"},children:r.jsx("img",{src:I.src,alt:`Image ${h+1}`,style:{position:"absolute",inset:0,width:"100%",height:"100%",objectFit:"cover",objectPosition:"center",display:"block"}})})]},`${I.key}-${K}`)})}),G.length>4?r.jsx("button",{type:"button",className:"ghost","aria-label":"Next image",disabled:G.length<=1,style:{fontSize:"2rem",padding:"0.4rem 0.6rem"},onClick:()=>ee(I=>G.length?(I+1)%G.length:0),children:""}):r.jsx("div",{style:{width:"2.5rem"}})]}),G.length>4?r.jsx("div",{style:{display:"flex",gap:"0.4rem",justifyContent:"center",alignItems:"center",flexWrap:"wrap"},children:G.map((I,K)=>r.jsx("button",{type:"button","aria-label":`Go to image ${K+1}`,onClick:()=>ee(K),style:{width:"10px",height:"10px",borderRadius:"50%",border:"none",background:K===Y?"#2b5fab":"#d3dbe6",cursor:"pointer",padding:0,minWidth:"auto",lineHeight:1,display:"inline-block"}},I.key))}):null]})}):r.jsx("p",{className:"muted",style:{margin:0},children:"No images uploaded yet."}),r.jsxs("div",{className:"form-actions upload-pane",style:{gridColumn:"1 / -1",display:"flex",gap:"0.75rem",alignItems:"center",flexWrap:"wrap",padding:"0.75rem 0.9rem",background:re?"var(--upload-pane-hover-bg)":void 0,borderColor:re?"var(--upload-pane-hover-border)":void 0},children:[r.jsx("input",{ref:ue,type:"file",accept:"image/*",multiple:!0,style:{display:"none"},onChange:I=>{X(I.target.files),I.target.value=""}}),r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.25rem"},children:[r.jsx("button",{type:"button",className:"ghost browse-button",onClick:()=>{var I;return(I=ue.current)==null?void 0:I.click()},style:{alignSelf:"flex-start"},children:"Browse your device"}),r.jsx("span",{className:"muted",style:{fontSize:"0.95rem"},children:"or drag & drop / paste images into this box"})]}),r.jsxs("span",{className:"muted",style:{marginLeft:"auto"},children:[G.length," uploaded"]})]}),ge!==null&&G[ge]&&typeof document<"u"&&Gi.createPortal(r.jsx("div",{role:"dialog","aria-modal":"true",style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.75)",display:"grid",placeItems:"center",zIndex:1e3,padding:"1rem"},onClick:()=>fe(null),children:r.jsxs("div",{style:{position:"relative",maxWidth:"90vw",maxHeight:"90vh"},onClick:I=>I.stopPropagation(),children:[r.jsx("img",{src:G[ge].src,alt:G[ge].name,style:{maxWidth:"90vw",maxHeight:"80vh",display:"block",borderRadius:"12px"}}),r.jsx("div",{style:{position:"absolute",top:"50%",left:"-2.5rem",transform:"translateY(-50%)",display:G.length>1?"flex":"none"},children:r.jsx("button",{type:"button",className:"ghost",onClick:I=>{I.stopPropagation(),fe(K=>K===null?K:(K-1+G.length)%G.length)},children:""})}),r.jsx("div",{style:{position:"absolute",top:"50%",right:"-2.5rem",transform:"translateY(-50%)",display:G.length>1?"flex":"none"},children:r.jsx("button",{type:"button",className:"ghost",onClick:I=>{I.stopPropagation(),fe(K=>K===null?K:(K+1)%G.length)},children:""})}),r.jsx("button",{type:"button",className:"ghost danger",style:{position:"absolute",top:"-2.75rem",right:0},onClick:I=>{I.stopPropagation(),fe(null)},children:"Close"})]})}),document.body)]}),r.jsx("div",{className:"form-actions",style:{marginTop:"0.75rem"},children:r.jsx("button",{type:"submit",className:Ae,disabled:j,children:_e})})]}),r.jsxs("article",{className:"card",children:[r.jsxs("div",{className:"form-grid",children:[r.jsxs("label",{className:`form-field ${Z.takeoff_airfield_id?"field-missing":""}`,children:[r.jsx("span",{children:"Takeoff airfield"}),r.jsxs("select",{value:C||(m?"__new__":""),onChange:I=>{const K=I.target.value;if(K==="__new__"){v(!0),b("__new__"),S(h=>({...h,takeoff_airfield_id:void 0}));return}v(!1),b(K),S(h=>({...h,takeoff_airfield_id:K?Number(K):void 0}))},children:[r.jsx("option",{value:"",children:"Select airfield"}),r.jsx("option",{value:"__new__",children:"Create new airfield"}),x.map(I=>r.jsxs("option",{value:I.id,children:[I.name," ",I.elevation?`(${I.elevation} m)`:""]},I.id))]})]}),m&&r.jsxs("div",{className:"form-grid",style:{gridTemplateColumns:"repeat(auto-fit,minmax(200px,1fr))",gridColumn:"1 / -1",border:"1px dashed #c6d1dd",padding:"1rem",borderRadius:"10px",marginTop:"0.5rem"},children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Name"}),r.jsx("input",{type:"text",value:E.name,onChange:I=>p(K=>({...K,name:I.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Elevation (m)"}),r.jsx("input",{type:"number",min:0,value:E.elevation,onFocus:I=>{const K=I.target;requestAnimationFrame(()=>K.select())},onClick:I=>{const K=I.target;requestAnimationFrame(()=>K.select())},onChange:I=>p(K=>({...K,elevation:Number(I.target.value)})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Coordinates"}),r.jsx("input",{type:"text",value:E.coordinates,onChange:I=>p(K=>({...K,coordinates:I.target.value})),style:{minWidth:"22ch"},required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Description"}),r.jsx("input",{type:"text",value:E.description||"",onChange:I=>p(K=>({...K,description:I.target.value})),placeholder:"Optional"})]}),r.jsxs("div",{className:"form-actions",style:{gridColumn:"1 / -1"},children:[r.jsx("button",{type:"button",className:"ghost",onClick:Ut,disabled:j,children:j?"Creating":"Create & attach"}),r.jsx("button",{type:"button",className:"ghost",onClick:()=>{v(!1),b(y.takeoff_airfield_id?String(y.takeoff_airfield_id):"")},disabled:j,children:"Cancel"})]})]}),Qe!==null?r.jsxs("div",{className:"form-grid",style:{gridTemplateColumns:"repeat(auto-fit,minmax(220px,1fr))",gridColumn:"1 / -1"},children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Elevation difference"}),r.jsx("input",{type:"text",readOnly:!0,value:`${Qe} m`})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Adjust altimeter / AAD"}),r.jsx("input",{type:"text",value:y.adjust_altimeter_aad||"",onChange:I=>S(K=>({...K,adjust_altimeter_aad:I.target.value})),placeholder:"Adjustment guidance"})]})]}):r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Adjust altimeter / AAD"}),r.jsx("input",{type:"text",value:y.adjust_altimeter_aad||"",onChange:I=>S(K=>({...K,adjust_altimeter_aad:I.target.value})),placeholder:"Adjustment guidance"})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"NOTAM"}),r.jsx("input",{type:"text",value:y.notam||"",onChange:I=>S(K=>({...K,notam:I.target.value})),placeholder:"NOTAM reference or notes"})]}),r.jsxs("div",{className:"form-grid",style:{gridTemplateColumns:"repeat(auto-fit,minmax(200px,1fr))",gridColumn:"1 / -1",alignItems:"end"},children:[r.jsxs("label",{className:`form-field ${Z.distance_by_air?"field-missing":""}`,children:[r.jsx("span",{children:"Distance by air (km)"}),r.jsx("input",{type:"number",min:0,step:"0.1",value:y.distance_by_air??"",onChange:I=>S(K=>({...K,distance_by_air:I.target.value?Number(I.target.value):void 0}))})]}),r.jsxs("label",{className:`form-field ${Z.distance_by_road?"field-missing":""}`,children:[r.jsx("span",{children:"Distance by road (km)"}),r.jsx("input",{type:"number",min:0,step:"0.1",value:y.distance_by_road??"",onChange:I=>S(K=>({...K,distance_by_road:I.target.value?Number(I.target.value):void 0}))})]}),r.jsxs("div",{className:"form-field",style:{display:"flex",alignItems:"flex-end"},children:[r.jsx("span",{children:""}),(W=y.coordinates)!=null&&W.trim()&&(($e=(Le=x.find(I=>I.id===y.takeoff_airfield_id))==null?void 0:Le.coordinates)!=null&&$e.trim())?r.jsx("button",{type:"button",className:"ghost",onClick:()=>{var h,g,F;const I=(h=y.coordinates)==null?void 0:h.trim(),K=(F=(g=x.find(U=>U.id===y.takeoff_airfield_id))==null?void 0:g.coordinates)==null?void 0:F.trim();!I||!K||window.open(`https://www.google.com/maps/dir/?api=1&origin=${encodeURIComponent(K)}&destination=${encodeURIComponent(I)}&travelmode=driving`,"_blank")},children:"Open route in Maps"}):null]})]}),r.jsxs("label",{className:`form-field ${Z.jumprun?"field-missing":""}`,children:[r.jsx("span",{children:"Jumprun"}),r.jsx("textarea",{"data-autosize":!0,onInput:V,value:y.jumprun||"",onChange:I=>S(K=>({...K,jumprun:I.target.value})),placeholder:"Heading, offset, wind notes"})]})]}),r.jsx("div",{className:"form-actions",style:{marginTop:"0.75rem"},children:r.jsx("button",{type:"submit",className:Ae,disabled:j,children:_e})})]}),r.jsxs("article",{className:"card",children:[r.jsxs("div",{className:"form-grid",style:{gridTemplateColumns:"repeat(auto-fit,minmax(220px,1fr))"},children:[r.jsx("div",{className:"form-field",style:{gridColumn:"1 / -1"},children:r.jsx("span",{children:"Primary landing area"})}),r.jsxs("label",{className:`form-field ${Z.primary_name?"field-missing":""}`,style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Name"}),r.jsx("input",{type:"text",value:y.primary_landing_area.name,onChange:I=>te("primary","name",I.target.value)})]}),r.jsxs("div",{className:"form-grid",style:{gridTemplateColumns:"minmax(200px, 320px) 1fr",gridColumn:"1 / -1",gap:"0.75rem"},children:[r.jsxs("label",{className:`form-field ${Z.primary_size?"field-missing":""}`,children:[r.jsx("span",{children:"Size and surface"}),r.jsx("input",{type:"text",value:y.primary_landing_area.size,onChange:I=>te("primary","size",I.target.value),placeholder:"Dimensions and surface"})]}),r.jsxs("label",{className:`form-field ${Z.primary_obstacles?"field-missing":""}`,children:[r.jsx("span",{children:"Obstacles"}),r.jsx("input",{type:"text",value:y.primary_landing_area.obstacles,onChange:I=>te("primary","obstacles",I.target.value),placeholder:"Powerlines, trees, terrain"})]})]}),r.jsxs("label",{className:`form-field ${Z.primary_description?"field-missing":""}`,style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Description"}),r.jsx("textarea",{"data-autosize":!0,onInput:V,value:y.primary_landing_area.description,onChange:I=>te("primary","description",I.target.value),placeholder:"Surface, Obstacles, etc"})]}),r.jsx("div",{className:"form-field",style:{gridColumn:"1 / -1"},children:r.jsx("span",{children:"Secondary landing area"})}),r.jsxs("label",{className:"form-field",style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Name"}),r.jsx("input",{type:"text",value:y.secondary_landing_area.name,onChange:I=>te("secondary","name",I.target.value)})]}),r.jsxs("div",{className:"form-grid",style:{gridTemplateColumns:"minmax(200px, 320px) 1fr",gridColumn:"1 / -1",gap:"0.75rem"},children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Size and surface"}),r.jsx("input",{type:"text",value:y.secondary_landing_area.size,onChange:I=>te("secondary","size",I.target.value),placeholder:"Dimensions and surface"})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Obstacles"}),r.jsx("input",{type:"text",value:y.secondary_landing_area.obstacles,onChange:I=>te("secondary","obstacles",I.target.value),placeholder:"Powerlines, trees, terrain"})]})]}),r.jsxs("label",{className:"form-field",style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Description"}),r.jsx("textarea",{"data-autosize":!0,onInput:V,value:y.secondary_landing_area.description,onChange:I=>te("secondary","description",I.target.value),placeholder:"Surface, Obstacles, etc"})]}),r.jsxs("label",{className:`form-field ${Z.risk_assessment?"field-missing":""}`,style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Risk assessment"}),r.jsx("textarea",{"data-autosize":!0,onInput:V,value:y.risk_assessment||"",onChange:I=>S(K=>({...K,risk_assessment:I.target.value})),placeholder:"Key risks and mitigations"})]}),r.jsxs("label",{className:`form-field ${Z.safety_precautions?"field-missing":""}`,style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Safety precautions"}),r.jsx("textarea",{"data-autosize":!0,onInput:V,value:y.safety_precautions||"",onChange:I=>S(K=>({...K,safety_precautions:I.target.value})),placeholder:"Briefings and other measures"})]}),r.jsxs("label",{className:`form-field ${Z.minimum_requirements?"field-missing":""}`,style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Minimum requirements"}),r.jsx("textarea",{"data-autosize":!0,onInput:V,value:y.minimum_requirements||"",onChange:I=>S(K=>({...K,minimum_requirements:I.target.value})),placeholder:"Experience level required"})]})]}),r.jsx("div",{className:"form-actions",style:{marginTop:"0.75rem"},children:r.jsx("button",{type:"submit",className:Ae,disabled:j,children:_e})})]}),r.jsxs("article",{className:"card",children:[r.jsxs("div",{className:"form-grid",children:[r.jsxs("label",{className:`form-field ${Z.hospital?"field-missing":""}`,children:[r.jsx("span",{children:"Hospital"}),r.jsx("input",{type:"text",value:y.hospital||"",onChange:I=>S(K=>({...K,hospital:I.target.value})),placeholder:"Nearest hospital / ETA"})]}),r.jsxs("label",{className:`form-field ${Z.rescue_boat?"field-missing":""}`,children:[r.jsx("span",{children:"Rescue boat"}),r.jsxs("select",{value:y.rescue_boat==null?"":y.rescue_boat?"yes":"no",onChange:I=>S(K=>({...K,rescue_boat:I.target.value===""?void 0:I.target.value==="yes"})),children:[r.jsx("option",{value:"",children:"Unknown"}),r.jsx("option",{value:"yes",children:"Yes"}),r.jsx("option",{value:"no",children:"No"})]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Land owner permission"}),r.jsxs("select",{value:y.land_owner_permission==null?"":y.land_owner_permission?"yes":"no",onChange:I=>S(K=>({...K,land_owner_permission:I.target.value===""?void 0:I.target.value==="yes"})),children:[r.jsx("option",{value:"",children:"Unknown"}),r.jsx("option",{value:"yes",children:"Granted"}),r.jsx("option",{value:"no",children:"Pending / No"})]})]}),r.jsxs("div",{className:"form-field",style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Land owners"}),(y.land_owners||[]).length===0&&r.jsx("p",{className:"muted",children:"No land owners added yet."}),(y.land_owners||[]).map((I,K)=>r.jsxs("div",{className:"form-grid",style:{gridTemplateColumns:"repeat(auto-fit,minmax(220px,1fr))",marginBottom:"0.75rem"},children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Name"}),r.jsx("input",{type:"text",value:I.name,onChange:h=>lt(K,"name",h.target.value)})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Telephone"}),r.jsx("input",{type:"text",value:I.telephone,onChange:h=>lt(K,"telephone",h.target.value)})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Email"}),r.jsx("input",{type:"email",value:I.email,onChange:h=>lt(K,"email",h.target.value)})]}),r.jsx("div",{className:"form-actions",style:{gridColumn:"1 / -1"},children:r.jsx("button",{type:"button",className:"ghost danger",onClick:()=>Tt(K),children:"Remove owner"})})]},K)),r.jsx("div",{className:"form-actions",children:r.jsx("button",{type:"button",className:"ghost",onClick:dt,children:"Add land owner"})})]})]}),r.jsx("div",{className:"form-actions",style:{marginTop:"0.75rem"},children:r.jsx("button",{type:"submit",className:Ae,disabled:j,children:_e})})]}),r.jsx("article",{className:"card",children:r.jsxs("div",{className:"form-grid",children:[r.jsxs("label",{className:"form-field notes-field",children:[r.jsx("span",{children:"Notes"}),r.jsx("input",{type:"text",value:y.notes||"",onChange:I=>S(K=>({...K,notes:I.target.value})),placeholder:"Exit altitude, landing brief"})]}),r.jsx("div",{className:"form-actions",children:r.jsx("button",{type:"submit",className:Ae,disabled:j,children:_e})})]})})]})]})},sj=()=>{const{manifestId:e}=Mn(),n=vt(),[t,s]=o.useState(null),[a,i]=o.useState([]),[l,u]=o.useState(null),[d,x]=o.useState([]),[_,C]=o.useState([]),[b,L]=o.useState(!0),[y,S]=o.useState(null),[E,p]=o.useState(null),[m,v]=o.useState(!1),[j,P]=o.useState(!1),[k,D]=o.useState(!1),[M,J]=o.useState(!1),[se,R]=o.useState(!1),[ae,de]=o.useState({event_id:"",load_number:"",capacity:"",staff_slots:"",notes:""}),[be,me]=o.useState([]),[he,we]=o.useState(""),[ue,ge]=o.useState(""),[fe,Y]=o.useState({full_name:"",email:"",phone:"",experience_level:"",emergency_contact:"",roles:["Participant","Skydiver"]}),[ee,re]=o.useState({full_name:"",email:"",phone:"",experience_level:"",emergency_contact:"",roles:["Participant","Skydiver","Staff"]}),ce=["Participant","Skydiver","Staff","Ground Crew","Jump Master","Jump Leader","Driver","Pilot","COP"];o.useEffect(()=>{let X=!1;return(async()=>{if(e){L(!0),S(null);try{const Ce=await Tx(Number(e)),[Ve,et,tt,yt]=await Promise.all([$t(),Zr(),Xr(Ce.event_id),Kp()]);if(X)return;s(Ce),i(Array.isArray(Ve)?Ve.map(ut=>({id:ut.id,name:ut.name})):[]),C(Array.isArray(et)?et:[]),u(tt),x(Array.isArray(yt)?yt:[]),de({event_id:String(Ce.event_id),load_number:String(Ce.load_number??""),capacity:Ce.capacity!=null?String(Ce.capacity):"",staff_slots:Ce.staff_slots!=null?String(Ce.staff_slots):"",notes:Ce.notes||""}),me(Array.isArray(Ce.participant_ids)?Ce.participant_ids:[])}catch(Ce){X||S(Ce instanceof Error?Ce.message:"Failed to load manifest")}finally{X||L(!1)}}})(),()=>{X=!0}},[e]),o.useEffect(()=>{let X=!1;return(async()=>{if(!ae.event_id){u(null);return}try{const Ce=await Xr(Number(ae.event_id));X||u(Ce)}catch{}})(),()=>{X=!0}},[ae.event_id]);const pe=o.useMemo(()=>Number(ae.event_id||(t==null?void 0:t.event_id)||0),[ae.event_id,t==null?void 0:t.event_id]),Ae=o.useMemo(()=>{if(!pe)return new Set;const X=(t==null?void 0:t.id)??Number(e),le=d.filter(Ce=>Ce.event_id===pe&&Ce.id!==X).flatMap(Ce=>Array.isArray(Ce.participant_ids)?Ce.participant_ids:[]);return new Set(le)},[pe,d,t==null?void 0:t.id,e]),_e=o.useMemo(()=>{const X=(l==null?void 0:l.participant_ids)??[];return _.filter(le=>{const Ce=Array.isArray(le.roles)?le.roles:[],Ve=Ce.includes("Skydiver"),et=Ce.includes("Staff");return X.includes(le.id)&&!be.includes(le.id)&&Ve&&!et&&!Ae.has(le.id)})},[_,be,l,Ae]),Fe=o.useMemo(()=>{const X=(l==null?void 0:l.participant_ids)??[];return _.filter(le=>{const Ce=Array.isArray(le.roles)?le.roles:[],Ve=Ce.includes("Skydiver"),et=Ce.includes("Staff");return X.includes(le.id)&&!be.includes(le.id)&&Ve&&et&&!Ae.has(le.id)})},[_,be,l,Ae]),Te=o.useMemo(()=>be.filter(X=>{var Ce;const le=((Ce=_.find(Ve=>Ve.id===X))==null?void 0:Ce.roles)||[];return le.includes("Staff")&&le.includes("Skydiver")}),[be,_]),Ge=o.useMemo(()=>{const X=Number(ae.staff_slots);return Number.isFinite(X)&&X>=0?X:null},[ae.staff_slots]),Ye=Ge!=null&&Ge>0&&Te.length>=Ge,Qe=o.useMemo(()=>{const X=Number(ae.capacity);return Number.isFinite(X)&&X>0?X:null},[ae.capacity]),G=o.useMemo(()=>be.filter(X=>{var Ce;return!(((Ce=_.find(Ve=>Ve.id===X))==null?void 0:Ce.roles)||[]).includes("Staff")}),[be,_]),O=o.useMemo(()=>{if(Qe==null)return null;const le=Qe-(Ge??0);return le>0?le:null},[Qe,Ge]),$=O!=null&&G.length>=O,V=X=>{var le;return((le=_.find(Ce=>Ce.id===X))==null?void 0:le.full_name)||`Participant #${X}`},Z=async X=>{if(!e)return null;const le={event_id:Number(ae.event_id),load_number:Number(ae.load_number),capacity:ae.capacity?Number(ae.capacity):void 0,staff_slots:ae.staff_slots?Number(ae.staff_slots):void 0,notes:ae.notes.trim()||void 0,participant_ids:X},Ce=await Px(Number(e),le);return s(Ce),me(Array.isArray(Ce.participant_ids)?Ce.participant_ids:X),x(Ve=>Ve.some(tt=>tt.id===Ce.id)?Ve.map(tt=>tt.id===Ce.id?Ce:tt):[...Ve,Ce]),Ce},Ie=async X=>{if(l)try{const le=await Hp(l.id,{season_id:l.season_id,name:l.name,location:l.location,slots:l.slots,status:l.status,starts_at:l.starts_at,ends_at:l.ends_at??void 0,airfield_ids:l.airfield_ids,participant_ids:X});u(le)}catch{}},Ue=async()=>{const X=Number(he);if(!X||be.includes(X))return;v(!0),p(null);const le=[...be,X];try{await Z(le),we(""),p("Participant added to manifest")}catch(Ce){p(Ce instanceof Error?Ce.message:"Failed to add participant")}finally{v(!1)}},te=async()=>{const X=Number(ue);if(!X||be.includes(X)||Ye)return;v(!0),p(null);const le=[...be,X];try{await Z(le),ge(""),p("Staff added to manifest")}catch(Ce){p(Ce instanceof Error?Ce.message:"Failed to add staff")}finally{v(!1)}},lt=async X=>{const le=be.filter(Ce=>Ce!==X);v(!0),p(null);try{await Z(le),p("Participant removed from manifest")}catch(Ce){p(Ce instanceof Error?Ce.message:"Failed to remove participant")}finally{v(!1)}},dt=async X=>{X.preventDefault(),P(!0),p(null);try{const le=fe.roles&&fe.roles.length>0?fe.roles:["Participant","Skydiver"],Ce={full_name:fe.full_name.trim(),email:fe.email.trim(),phone:fe.phone.trim()||void 0,experience_level:fe.experience_level.trim()||void 0,emergency_contact:fe.emergency_contact.trim()||void 0,roles:le},Ve=await Ia(Ce);C(tt=>[...tt,Ve]);const et=[...be,Ve.id];if(await Z(et),l){const tt=Array.isArray(l.participant_ids)?Array.from(new Set([...l.participant_ids,Ve.id])):[Ve.id];await Ie(tt)}Y({full_name:"",email:"",phone:"",experience_level:"",emergency_contact:"",roles:["Participant","Skydiver"]}),D(!1),p("Participant created and added")}catch(le){p(le instanceof Error?le.message:"Failed to create participant")}finally{P(!1)}},Tt=async X=>{if(X.preventDefault(),Ye){p("Staff slots full");return}J(!0),p(null);try{const le=ee.roles&&ee.roles.length>0?ee.roles:["Participant","Skydiver","Staff"],Ce={full_name:ee.full_name.trim(),email:ee.email.trim(),phone:ee.phone.trim()||void 0,experience_level:ee.experience_level.trim()||void 0,emergency_contact:ee.emergency_contact.trim()||void 0,roles:le},Ve=await Ia(Ce);C(tt=>[...tt,Ve]);const et=[...be,Ve.id];if(await Z(et),l){const tt=Array.isArray(l.participant_ids)?Array.from(new Set([...l.participant_ids,Ve.id])):[Ve.id];await Ie(tt)}re({full_name:"",email:"",phone:"",experience_level:"",emergency_contact:"",roles:["Participant","Skydiver","Staff"]}),R(!1),p("Staff participant created and added")}catch(le){p(le instanceof Error?le.message:"Failed to create staff participant")}finally{J(!1)}},bt=async X=>{X.preventDefault(),v(!0),p(null);try{await Z(be),p("Manifest updated")}catch(le){p(le instanceof Error?le.message:"Failed to update manifest")}finally{v(!1)}};return b?r.jsx("p",{className:"muted",children:"Loading manifest"}):y?r.jsx("p",{className:"error-text",children:y}):t?r.jsxs("section",{children:[r.jsxs("header",{className:"page-header",children:[r.jsx("div",{children:r.jsxs("h2",{children:["Load ",t.load_number]})}),r.jsx("button",{className:"ghost",type:"button",onClick:()=>n(-1),children:"Back"})]}),r.jsx("article",{className:"card",children:r.jsxs("form",{className:"form-grid",onSubmit:bt,children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Event"}),r.jsxs("select",{value:ae.event_id,onChange:X=>de(le=>({...le,event_id:X.target.value})),required:!0,children:[r.jsx("option",{value:"",children:"Select an event"}),a.map(X=>r.jsx("option",{value:X.id,children:X.name},X.id))]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Load number"}),r.jsx("input",{type:"number",min:1,value:ae.load_number,onChange:X=>de(le=>({...le,load_number:X.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Capacity"}),r.jsx("input",{type:"number",min:0,value:ae.capacity,onChange:X=>de(le=>({...le,capacity:X.target.value})),placeholder:"Optional"})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Staff slots"}),r.jsx("input",{type:"number",min:0,value:ae.staff_slots,onChange:X=>de(le=>({...le,staff_slots:X.target.value}))})]}),r.jsxs("label",{className:"form-field",style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Notes"}),r.jsx("input",{type:"text",value:ae.notes,onChange:X=>de(le=>({...le,notes:X.target.value})),placeholder:"Optional notes"})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"submit",className:"primary",disabled:m,children:m?"Saving":"Save"}),E&&r.jsx("span",{className:"muted",children:E})]})]})}),r.jsxs("article",{className:"card",children:[r.jsxs("header",{className:"card-header",children:[r.jsx("div",{children:r.jsx("h3",{children:"Participants"})}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsxs("span",{className:"badge neutral",children:[G.length," total"]}),$&&r.jsx("span",{className:"badge danger",children:"FULL"})]})]}),G.length===0?r.jsx("p",{className:"muted",children:"No participants assigned to this load."}):r.jsx("ul",{className:"status-list",style:{maxHeight:"24rem",overflowY:"auto"},children:G.map(X=>{const le=_.find(Ce=>Ce.id===X);return r.jsxs("li",{children:[r.jsxs(nt,{to:`/participants/${X}`,className:"card-link",style:{flex:1},children:[r.jsx("strong",{children:V(X)}),r.jsx("div",{className:"muted",children:(le==null?void 0:le.email)||"No email on file"}),r.jsxs("div",{className:"muted",children:["Experience: ",(le==null?void 0:le.experience_level)||"Not provided"]})]}),r.jsx("button",{type:"button",className:"ghost danger",onClick:()=>lt(X),disabled:m,children:"Remove"})]},X)})}),!$&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"form-grid",style:{marginTop:"1rem"},children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Select participant"}),r.jsxs("select",{value:he,onChange:X=>we(X.target.value),children:[r.jsx("option",{value:"",children:"Choose a participant"}),_e.map(X=>r.jsxs("option",{value:X.id,children:[X.full_name," (",X.email||"No email",")"]},X.id))]})]}),r.jsx("div",{className:"form-actions",children:r.jsx("button",{type:"button",className:"primary",onClick:Ue,disabled:!he||m,children:"Add"})})]}),!k&&r.jsx("div",{className:"form-actions",style:{marginTop:"1rem"},children:r.jsx("button",{type:"button",className:"ghost",onClick:()=>D(!0),children:"Create new participant"})})]}),!$&&k&&r.jsxs("form",{className:"form-grid",style:{marginTop:"1rem"},onSubmit:dt,children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Full name"}),r.jsx("input",{type:"text",value:fe.full_name,onChange:X=>Y(le=>({...le,full_name:X.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Email"}),r.jsx("input",{type:"email",value:fe.email,onChange:X=>Y(le=>({...le,email:X.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Phone"}),r.jsx("input",{type:"text",value:fe.phone,onChange:X=>Y(le=>({...le,phone:X.target.value})),placeholder:"Optional"})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Experience level"}),r.jsx("input",{type:"text",value:fe.experience_level,onChange:X=>Y(le=>({...le,experience_level:X.target.value})),placeholder:"Optional"})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Emergency contact"}),r.jsx("input",{type:"text",value:fe.emergency_contact,onChange:X=>Y(le=>({...le,emergency_contact:X.target.value})),placeholder:"Optional"})]}),r.jsxs("div",{className:"form-field",style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Roles"}),r.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:ce.map(X=>{var Ve;const le=(Ve=fe.roles)==null?void 0:Ve.includes(X),Ce=X==="Staff";return r.jsxs("label",{className:"badge neutral",style:{display:"inline-flex",alignItems:"center",gap:"0.35rem"},children:[r.jsx("input",{type:"checkbox",checked:le,disabled:Ce,onChange:et=>{Y(tt=>{const yt=new Set(tt.roles||[]);et.target.checked?yt.add(X):yt.delete(X);const ut=Array.from(yt);return{...tt,roles:ut.length>0?ut:["Participant","Skydiver"]}})}}),X]},X)})}),r.jsx("p",{className:"muted",style:{margin:0},children:"Staff cannot be assigned here."})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"submit",className:"primary",disabled:j,children:j?"Adding":"Add participant"}),r.jsx("button",{type:"button",className:"ghost",onClick:()=>D(!1),disabled:j,children:"Cancel"})]})]})]}),r.jsxs("article",{className:"card",children:[r.jsxs("header",{className:"card-header",children:[r.jsx("div",{children:r.jsx("h3",{children:"Staff"})}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsxs("span",{className:"badge neutral",children:[Te.length," staff"]}),Ye&&r.jsx("span",{className:"badge danger",children:"FULL"})]})]}),Te.length===0?r.jsx("p",{className:"muted",children:"No staff assigned to this load."}):r.jsx("ul",{className:"status-list",style:{maxHeight:"24rem",overflowY:"auto"},children:Te.map(X=>{const le=_.find(Ce=>Ce.id===X);return r.jsxs("li",{children:[r.jsxs(nt,{to:`/participants/${X}`,className:"card-link",style:{flex:1},children:[r.jsx("strong",{children:V(X)}),r.jsx("div",{className:"muted",children:(le==null?void 0:le.email)||"No email on file"}),r.jsxs("div",{className:"muted",children:["Experience: ",(le==null?void 0:le.experience_level)||"Not provided"]})]}),r.jsx("button",{type:"button",className:"ghost danger",onClick:()=>lt(X),disabled:m,children:"Remove"})]},X)})}),!Ye&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"form-grid",style:{marginTop:"1rem"},children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Select staff"}),r.jsxs("select",{value:ue,onChange:X=>ge(X.target.value),children:[r.jsx("option",{value:"",children:"Choose staff"}),Fe.map(X=>r.jsxs("option",{value:X.id,children:[X.full_name," (",X.email||"No email",")"]},X.id))]})]}),r.jsx("div",{className:"form-actions",children:r.jsx("button",{type:"button",className:"primary",onClick:te,disabled:!ue||m,children:"Add"})})]}),!se&&r.jsx("div",{className:"form-actions",style:{marginTop:"1rem"},children:r.jsx("button",{type:"button",className:"ghost",onClick:()=>R(!0),children:"Create new staff"})})]}),!Ye&&se&&r.jsxs("form",{className:"form-grid",style:{marginTop:"1rem"},onSubmit:Tt,children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Full name"}),r.jsx("input",{type:"text",value:ee.full_name,onChange:X=>re(le=>({...le,full_name:X.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Email"}),r.jsx("input",{type:"email",value:ee.email,onChange:X=>re(le=>({...le,email:X.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Phone"}),r.jsx("input",{type:"text",value:ee.phone,onChange:X=>re(le=>({...le,phone:X.target.value})),placeholder:"Optional"})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Experience level"}),r.jsx("input",{type:"text",value:ee.experience_level,onChange:X=>re(le=>({...le,experience_level:X.target.value})),placeholder:"Optional"})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Emergency contact"}),r.jsx("input",{type:"text",value:ee.emergency_contact,onChange:X=>re(le=>({...le,emergency_contact:X.target.value})),placeholder:"Optional"})]}),r.jsxs("div",{className:"form-field",style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Roles"}),r.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:ce.map(X=>{var Ve;const le=(Ve=ee.roles)==null?void 0:Ve.includes(X),Ce=X==="Participant"||X==="Skydiver"||X==="Staff";return r.jsxs("label",{className:"badge neutral",style:{display:"inline-flex",alignItems:"center",gap:"0.35rem"},children:[r.jsx("input",{type:"checkbox",checked:le,disabled:Ce,onChange:et=>{re(tt=>{const yt=new Set(tt.roles||[]);et.target.checked?yt.add(X):yt.delete(X);const ut=Array.from(yt);return{...tt,roles:ut.length>0?ut:["Participant","Skydiver","Staff"]}})}}),X]},X)})}),r.jsx("p",{className:"muted",style:{margin:0},children:"Staff include Participant, Staff, and Skydiver roles by default."})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"submit",className:"primary",disabled:M,children:M?"Adding":"Add staff"}),r.jsx("button",{type:"button",className:"ghost",onClick:()=>R(!1),disabled:M,children:"Cancel"})]})]})]})]}):r.jsx("p",{className:"error-text",children:"Manifest not found."})},aj=()=>{const{eventId:e,accommodationId:n}=Mn(),t=vt(),[s,a]=o.useState(!1),[i,l]=o.useState({name:"",capacity:"",coordinates:"",booked:!1,check_in_at:"",check_out_at:"",notes:""}),[u,d]=o.useState(!0),[x,_]=o.useState(!1),[C,b]=o.useState(null),L=`primary ${s?"saved":""}`,y=x?"Saving":s?"Saved":"Save",S=!i.coordinates.trim(),E=!i.name.trim();o.useEffect(()=>{let j=!1;return(async()=>{if(!(!e||!n)){d(!0),b(null);try{const k=await Vp(Number(e),Number(n));if(j)return;l({name:k.name,capacity:String(k.capacity),coordinates:k.coordinates||"",booked:!!k.booked,check_in_at:k.check_in_at||"",check_out_at:k.check_out_at||"",notes:k.notes||""}),a(!1)}catch(k){j||b(k instanceof Error?k.message:"Failed to load accommodation")}finally{j||d(!1)}}})(),()=>{j=!0}},[e,n]);const p=async j=>{if(j.preventDefault(),!(!e||!n)){_(!0),b(null);try{await Wp(Number(e),Number(n),{name:i.name.trim(),capacity:Number(i.capacity)||0,coordinates:i.coordinates.trim()||void 0,booked:i.booked,check_in_at:i.check_in_at||void 0,check_out_at:i.check_out_at||void 0,notes:i.notes.trim()||void 0}),a(!0),b("Accommodation updated")}catch(P){b(P instanceof Error?P.message:"Failed to update accommodation")}finally{_(!1)}}},m=async()=>{if(!(!e||!n)&&window.confirm("Delete this accommodation?"))try{await Ex(Number(e),Number(n)),t(-1)}catch(j){b(j instanceof Error?j.message:"Failed to delete accommodation")}};if(u)return r.jsx("p",{className:"muted",children:"Loading accommodation"});const v=()=>{s&&a(!1)};return r.jsxs("section",{className:"stack",children:[r.jsxs("header",{className:"page-header",children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",flexWrap:"wrap"},children:[r.jsx("h2",{style:{margin:0},children:"Accommodation"}),r.jsx("span",{className:`badge ${i.booked&&!S?"success":"danger"}`,children:i.booked&&!S?"":"NOT BOOKED"})]}),r.jsxs("div",{className:"card-actions",children:[r.jsx("button",{className:"ghost",type:"button",onClick:()=>t("/logistics/accommodations/new",{state:{copyAccommodation:{event_id:e,name:i.name,capacity:i.capacity,coordinates:i.coordinates,check_in_at:i.check_in_at,check_out_at:i.check_out_at,booked:i.booked,notes:i.notes}}}),children:"Make a copy"}),r.jsx("button",{className:"ghost danger",type:"button",onClick:m,children:"Delete"}),r.jsx("button",{className:"ghost",type:"button",onClick:()=>t(-1),children:"Back"})]})]}),r.jsx("article",{className:"card",children:r.jsxs("form",{className:"form-grid",onSubmit:p,children:[r.jsxs("label",{className:`form-field ${E?"field-missing":""}`,children:[r.jsx("span",{children:"Name"}),r.jsx("input",{type:"text",value:i.name,onChange:j=>{v(),l(P=>({...P,name:j.target.value}))},required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Capacity"}),r.jsx("input",{type:"number",min:0,value:i.capacity,onChange:j=>{v(),l(P=>({...P,capacity:j.target.value}))}})]}),r.jsxs("label",{className:`form-field ${S?"field-missing":""}`,children:[r.jsx("span",{children:"Coordinates (DMS)"}),r.jsxs("div",{className:"input-with-button",children:[r.jsx("input",{type:"text",value:i.coordinates,onChange:j=>{v(),l(P=>({...P,coordinates:j.target.value}))}}),r.jsx("button",{type:"button",className:"ghost",disabled:!i.coordinates.trim(),onClick:()=>{const j=i.coordinates.trim();j&&window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(j)}`,"_blank")},children:"Open in Maps"})]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Booked"}),r.jsxs("div",{className:"checkbox-field",children:[r.jsx("input",{type:"checkbox",checked:i.booked,onChange:j=>{v(),l(P=>({...P,booked:j.target.checked}))}}),r.jsx("span",{children:"Mark as booked"})]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Check-in"}),r.jsx(Dt,{value:qe(i.check_in_at),options:{enableTime:!0,dateFormat:"Y-m-d H:i",time_24hr:!0},onChange:j=>{const P=j[0];v(),l(k=>({...k,check_in_at:P?zt(P):""}))}})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Check-out"}),r.jsx(Dt,{value:qe(i.check_out_at),options:{enableTime:!0,dateFormat:"Y-m-d H:i",time_24hr:!0},onChange:j=>{const P=j[0];v(),l(k=>({...k,check_out_at:P?zt(P):""}))}})]}),r.jsxs("label",{className:"form-field",style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Notes"}),r.jsx("input",{type:"text",value:i.notes,onChange:j=>{v(),l(P=>({...P,notes:j.target.value}))}})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"submit",className:L,disabled:x||s,children:y}),C&&r.jsx("span",{className:"muted",children:C})]})]})})]})},ij=()=>r.jsx(fx,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:r.jsxs(rx,{children:[r.jsx(it,{path:"/login",element:r.jsx(bx,{})}),r.jsxs(it,{path:"/",element:r.jsx(xx,{}),children:[r.jsx(it,{index:!0,element:r.jsx(zu,{to:"/events",replace:!0})}),r.jsx(it,{path:"events",element:r.jsx(Hx,{})}),r.jsx(it,{path:"events/new",element:r.jsx(Kx,{})}),r.jsx(it,{path:"events/:eventId",element:r.jsx(Z0,{})}),r.jsx(it,{path:"events/:eventId/details",element:r.jsx(N0,{})}),r.jsx(it,{path:"events/:eventId/accommodations/:accommodationId",element:r.jsx(aj,{})}),r.jsx(it,{path:"events/:eventId/innhopps/new",element:r.jsx(ff,{})}),r.jsx(it,{path:"events/:eventId/innhopps/:innhoppId",element:r.jsx(ff,{})}),r.jsx(it,{path:"airfields/new",element:r.jsx(S0,{})}),r.jsx(it,{path:"airfields/:airfieldId",element:r.jsx(b0,{})}),r.jsx(it,{path:"seasons/new",element:r.jsx(C0,{})}),r.jsx(it,{path:"manifests",element:r.jsx(w0,{})}),r.jsx(it,{path:"manifests/:manifestId",element:r.jsx(sj,{})}),r.jsx(it,{path:"participants",element:r.jsx(E0,{})}),r.jsx(it,{path:"participants/new",element:r.jsx(A0,{})}),r.jsx(it,{path:"participants/:participantId",element:r.jsx(D0,{})}),r.jsx(it,{path:"logistics",element:r.jsx(z0,{})}),r.jsx(it,{path:"logistics/transport",element:r.jsx(P0,{})}),r.jsx(it,{path:"logistics/ground-crew",element:r.jsx(F0,{})}),r.jsx(it,{path:"logistics/ground-crew/new",element:r.jsx(L0,{})}),r.jsx(it,{path:"logistics/ground-crew/:groundCrewId",element:r.jsx(R0,{})}),r.jsx(it,{path:"logistics/accommodations",element:r.jsx(U0,{})}),r.jsx(it,{path:"logistics/accommodations/new",element:r.jsx(V0,{})}),r.jsx(it,{path:"logistics/meals",element:r.jsx(H0,{})}),r.jsx(it,{path:"logistics/meals/new",element:r.jsx(B0,{})}),r.jsx(it,{path:"logistics/meals/:mealId",element:r.jsx(K0,{})}),r.jsx(it,{path:"logistics/others",element:r.jsx(q0,{})}),r.jsx(it,{path:"logistics/others/new",element:r.jsx(G0,{})}),r.jsx(it,{path:"logistics/others/:otherId",element:r.jsx(Q0,{})}),r.jsx(it,{path:"logistics/new",element:r.jsx(M0,{})}),r.jsx(it,{path:"logistics/:transportId",element:r.jsx(O0,{})}),r.jsx(it,{path:"logistics/vehicles/:vehicleId",element:r.jsx(ej,{})})]}),r.jsx(it,{path:"*",element:r.jsx(zu,{to:"/login",replace:!0})})]})});io.createRoot(document.getElementById("root")).render(r.jsx(Sf.StrictMode,{children:r.jsx(ij,{})}));
