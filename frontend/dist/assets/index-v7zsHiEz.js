function Oh(e,n){for(var t=0;t<n.length;t++){const s=n[t];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(s,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function t(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(a){if(a.ep)return;a.ep=!0;const i=t(a);fetch(a.href,i)}})();function uf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function $h(e){if(e.__esModule)return e;var n=e.default;if(typeof n=="function"){var t=function s(){return this instanceof s?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};t.prototype=n.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(e).forEach(function(s){var a=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(t,s,a.get?a:{enumerable:!0,get:function(){return e[s]}})}),t}var ff={exports:{}},sl={},mf={exports:{}},st={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Oa=Symbol.for("react.element"),Lh=Symbol.for("react.portal"),Fh=Symbol.for("react.fragment"),Rh=Symbol.for("react.strict_mode"),zh=Symbol.for("react.profiler"),Uh=Symbol.for("react.provider"),Vh=Symbol.for("react.context"),Wh=Symbol.for("react.forward_ref"),Hh=Symbol.for("react.suspense"),Bh=Symbol.for("react.memo"),Kh=Symbol.for("react.lazy"),Sd=Symbol.iterator;function Yh(e){return e===null||typeof e!="object"?null:(e=Sd&&e[Sd]||e["@@iterator"],typeof e=="function"?e:null)}var pf={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},hf=Object.assign,gf={};function Ls(e,n,t){this.props=e,this.context=n,this.refs=gf,this.updater=t||pf}Ls.prototype.isReactComponent={};Ls.prototype.setState=function(e,n){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,n,"setState")};Ls.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function vf(){}vf.prototype=Ls.prototype;function lc(e,n,t){this.props=e,this.context=n,this.refs=gf,this.updater=t||pf}var oc=lc.prototype=new vf;oc.constructor=lc;hf(oc,Ls.prototype);oc.isPureReactComponent=!0;var Cd=Array.isArray,yf=Object.prototype.hasOwnProperty,cc={current:null},xf={key:!0,ref:!0,__self:!0,__source:!0};function jf(e,n,t){var s,a={},i=null,l=null;if(n!=null)for(s in n.ref!==void 0&&(l=n.ref),n.key!==void 0&&(i=""+n.key),n)yf.call(n,s)&&!xf.hasOwnProperty(s)&&(a[s]=n[s]);var u=arguments.length-2;if(u===1)a.children=t;else if(1<u){for(var d=Array(u),x=0;x<u;x++)d[x]=arguments[x+2];a.children=d}if(e&&e.defaultProps)for(s in u=e.defaultProps,u)a[s]===void 0&&(a[s]=u[s]);return{$$typeof:Oa,type:e,key:i,ref:l,props:a,_owner:cc.current}}function qh(e,n){return{$$typeof:Oa,type:e.type,key:n,ref:e.ref,props:e.props,_owner:e._owner}}function dc(e){return typeof e=="object"&&e!==null&&e.$$typeof===Oa}function Gh(e){var n={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(t){return n[t]})}var wd=/\/+/g;function Cl(e,n){return typeof e=="object"&&e!==null&&e.key!=null?Gh(""+e.key):n.toString(36)}function mi(e,n,t,s,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(i){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case Oa:case Lh:l=!0}}if(l)return l=e,a=a(l),e=s===""?"."+Cl(l,0):s,Cd(a)?(t="",e!=null&&(t=e.replace(wd,"$&/")+"/"),mi(a,n,t,"",function(x){return x})):a!=null&&(dc(a)&&(a=qh(a,t+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(wd,"$&/")+"/")+e)),n.push(a)),1;if(l=0,s=s===""?".":s+":",Cd(e))for(var u=0;u<e.length;u++){i=e[u];var d=s+Cl(i,u);l+=mi(i,n,t,d,a)}else if(d=Yh(e),typeof d=="function")for(e=d.call(e),u=0;!(i=e.next()).done;)i=i.value,d=s+Cl(i,u++),l+=mi(i,n,t,d,a);else if(i==="object")throw n=String(e),Error("Objects are not valid as a React child (found: "+(n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n)+"). If you meant to render a collection of children, use an array instead.");return l}function Wa(e,n,t){if(e==null)return e;var s=[],a=0;return mi(e,s,"","",function(i){return n.call(t,i,a++)}),s}function Qh(e){if(e._status===-1){var n=e._result;n=n(),n.then(function(t){(e._status===0||e._status===-1)&&(e._status=1,e._result=t)},function(t){(e._status===0||e._status===-1)&&(e._status=2,e._result=t)}),e._status===-1&&(e._status=0,e._result=n)}if(e._status===1)return e._result.default;throw e._result}var fn={current:null},pi={transition:null},Jh={ReactCurrentDispatcher:fn,ReactCurrentBatchConfig:pi,ReactCurrentOwner:cc};function _f(){throw Error("act(...) is not supported in production builds of React.")}st.Children={map:Wa,forEach:function(e,n,t){Wa(e,function(){n.apply(this,arguments)},t)},count:function(e){var n=0;return Wa(e,function(){n++}),n},toArray:function(e){return Wa(e,function(n){return n})||[]},only:function(e){if(!dc(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};st.Component=Ls;st.Fragment=Fh;st.Profiler=zh;st.PureComponent=lc;st.StrictMode=Rh;st.Suspense=Hh;st.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Jh;st.act=_f;st.cloneElement=function(e,n,t){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=hf({},e.props),a=e.key,i=e.ref,l=e._owner;if(n!=null){if(n.ref!==void 0&&(i=n.ref,l=cc.current),n.key!==void 0&&(a=""+n.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(d in n)yf.call(n,d)&&!xf.hasOwnProperty(d)&&(s[d]=n[d]===void 0&&u!==void 0?u[d]:n[d])}var d=arguments.length-2;if(d===1)s.children=t;else if(1<d){u=Array(d);for(var x=0;x<d;x++)u[x]=arguments[x+2];s.children=u}return{$$typeof:Oa,type:e.type,key:a,ref:i,props:s,_owner:l}};st.createContext=function(e){return e={$$typeof:Vh,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Uh,_context:e},e.Consumer=e};st.createElement=jf;st.createFactory=function(e){var n=jf.bind(null,e);return n.type=e,n};st.createRef=function(){return{current:null}};st.forwardRef=function(e){return{$$typeof:Wh,render:e}};st.isValidElement=dc;st.lazy=function(e){return{$$typeof:Kh,_payload:{_status:-1,_result:e},_init:Qh}};st.memo=function(e,n){return{$$typeof:Bh,type:e,compare:n===void 0?null:n}};st.startTransition=function(e){var n=pi.transition;pi.transition={};try{e()}finally{pi.transition=n}};st.unstable_act=_f;st.useCallback=function(e,n){return fn.current.useCallback(e,n)};st.useContext=function(e){return fn.current.useContext(e)};st.useDebugValue=function(){};st.useDeferredValue=function(e){return fn.current.useDeferredValue(e)};st.useEffect=function(e,n){return fn.current.useEffect(e,n)};st.useId=function(){return fn.current.useId()};st.useImperativeHandle=function(e,n,t){return fn.current.useImperativeHandle(e,n,t)};st.useInsertionEffect=function(e,n){return fn.current.useInsertionEffect(e,n)};st.useLayoutEffect=function(e,n){return fn.current.useLayoutEffect(e,n)};st.useMemo=function(e,n){return fn.current.useMemo(e,n)};st.useReducer=function(e,n,t){return fn.current.useReducer(e,n,t)};st.useRef=function(e){return fn.current.useRef(e)};st.useState=function(e){return fn.current.useState(e)};st.useSyncExternalStore=function(e,n,t){return fn.current.useSyncExternalStore(e,n,t)};st.useTransition=function(){return fn.current.useTransition()};st.version="18.3.1";mf.exports=st;var o=mf.exports;const Nf=uf(o),Xh=Oh({__proto__:null,default:Nf},[o]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zh=o,eg=Symbol.for("react.element"),tg=Symbol.for("react.fragment"),ng=Object.prototype.hasOwnProperty,rg=Zh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,sg={key:!0,ref:!0,__self:!0,__source:!0};function bf(e,n,t){var s,a={},i=null,l=null;t!==void 0&&(i=""+t),n.key!==void 0&&(i=""+n.key),n.ref!==void 0&&(l=n.ref);for(s in n)ng.call(n,s)&&!sg.hasOwnProperty(s)&&(a[s]=n[s]);if(e&&e.defaultProps)for(s in n=e.defaultProps,n)a[s]===void 0&&(a[s]=n[s]);return{$$typeof:eg,type:e,key:i,ref:l,props:a,_owner:rg.current}}sl.Fragment=tg;sl.jsx=bf;sl.jsxs=bf;ff.exports=sl;var r=ff.exports,lo={},Sf={exports:{}},wn={},Cf={exports:{}},wf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function n(ue,ge){var fe=ue.length;ue.push(ge);e:for(;0<fe;){var K=fe-1>>>1,ee=ue[K];if(0<a(ee,ge))ue[K]=ge,ue[fe]=ee,fe=K;else break e}}function t(ue){return ue.length===0?null:ue[0]}function s(ue){if(ue.length===0)return null;var ge=ue[0],fe=ue.pop();if(fe!==ge){ue[0]=fe;e:for(var K=0,ee=ue.length,ne=ee>>>1;K<ne;){var oe=2*(K+1)-1,pe=ue[oe],Ie=oe+1,je=ue[Ie];if(0>a(pe,fe))Ie<ee&&0>a(je,pe)?(ue[K]=je,ue[Ie]=fe,K=Ie):(ue[K]=pe,ue[oe]=fe,K=oe);else if(Ie<ee&&0>a(je,fe))ue[K]=je,ue[Ie]=fe,K=Ie;else break e}}return ge}function a(ue,ge){var fe=ue.sortIndex-ge.sortIndex;return fe!==0?fe:ue.id-ge.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var l=Date,u=l.now();e.unstable_now=function(){return l.now()-u}}var d=[],x=[],_=1,C=null,b=3,F=!1,y=!1,S=!1,E=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(ue){for(var ge=t(x);ge!==null;){if(ge.callback===null)s(x);else if(ge.startTime<=ue)s(x),ge.sortIndex=ge.expirationTime,n(d,ge);else break;ge=t(x)}}function j(ue){if(S=!1,v(ue),!y)if(t(d)!==null)y=!0,he(D);else{var ge=t(x);ge!==null&&we(j,ge.startTime-ue)}}function D(ue,ge){y=!1,S&&(S=!1,p(T),T=-1),F=!0;var fe=b;try{for(v(ge),C=t(d);C!==null&&(!(C.expirationTime>ge)||ue&&!R());){var K=C.callback;if(typeof K=="function"){C.callback=null,b=C.priorityLevel;var ee=K(C.expirationTime<=ge);ge=e.unstable_now(),typeof ee=="function"?C.callback=ee:C===t(d)&&s(d),v(ge)}else s(d);C=t(d)}if(C!==null)var ne=!0;else{var oe=t(x);oe!==null&&we(j,oe.startTime-ge),ne=!1}return ne}finally{C=null,b=fe,F=!1}}var k=!1,I=null,T=-1,J=5,se=-1;function R(){return!(e.unstable_now()-se<J)}function ae(){if(I!==null){var ue=e.unstable_now();se=ue;var ge=!0;try{ge=I(!0,ue)}finally{ge?de():(k=!1,I=null)}}else k=!1}var de;if(typeof m=="function")de=function(){m(ae)};else if(typeof MessageChannel<"u"){var Ne=new MessageChannel,me=Ne.port2;Ne.port1.onmessage=ae,de=function(){me.postMessage(null)}}else de=function(){E(ae,0)};function he(ue){I=ue,k||(k=!0,de())}function we(ue,ge){T=E(function(){ue(e.unstable_now())},ge)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ue){ue.callback=null},e.unstable_continueExecution=function(){y||F||(y=!0,he(D))},e.unstable_forceFrameRate=function(ue){0>ue||125<ue?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):J=0<ue?Math.floor(1e3/ue):5},e.unstable_getCurrentPriorityLevel=function(){return b},e.unstable_getFirstCallbackNode=function(){return t(d)},e.unstable_next=function(ue){switch(b){case 1:case 2:case 3:var ge=3;break;default:ge=b}var fe=b;b=ge;try{return ue()}finally{b=fe}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(ue,ge){switch(ue){case 1:case 2:case 3:case 4:case 5:break;default:ue=3}var fe=b;b=ue;try{return ge()}finally{b=fe}},e.unstable_scheduleCallback=function(ue,ge,fe){var K=e.unstable_now();switch(typeof fe=="object"&&fe!==null?(fe=fe.delay,fe=typeof fe=="number"&&0<fe?K+fe:K):fe=K,ue){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=fe+ee,ue={id:_++,callback:ge,priorityLevel:ue,startTime:fe,expirationTime:ee,sortIndex:-1},fe>K?(ue.sortIndex=fe,n(x,ue),t(d)===null&&ue===t(x)&&(S?(p(T),T=-1):S=!0,we(j,fe-K))):(ue.sortIndex=ee,n(d,ue),y||F||(y=!0,he(D))),ue},e.unstable_shouldYield=R,e.unstable_wrapCallback=function(ue){var ge=b;return function(){var fe=b;b=ge;try{return ue.apply(this,arguments)}finally{b=fe}}}})(wf);Cf.exports=wf;var ag=Cf.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ig=o,Cn=ag;function xe(e){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+e,t=1;t<arguments.length;t++)n+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var kf=new Set,fa={};function ns(e,n){As(e,n),As(e+"Capture",n)}function As(e,n){for(fa[e]=n,e=0;e<n.length;e++)kf.add(n[e])}var cr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),oo=Object.prototype.hasOwnProperty,lg=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,kd={},Ed={};function og(e){return oo.call(Ed,e)?!0:oo.call(kd,e)?!1:lg.test(e)?Ed[e]=!0:(kd[e]=!0,!1)}function cg(e,n,t,s){if(t!==null&&t.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return s?!1:t!==null?!t.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function dg(e,n,t,s){if(n===null||typeof n>"u"||cg(e,n,t,s))return!0;if(s)return!1;if(t!==null)switch(t.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function mn(e,n,t,s,a,i,l){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=s,this.attributeNamespace=a,this.mustUseProperty=t,this.propertyName=e,this.type=n,this.sanitizeURL=i,this.removeEmptyString=l}var Xt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Xt[e]=new mn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var n=e[0];Xt[n]=new mn(n,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Xt[e]=new mn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Xt[e]=new mn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Xt[e]=new mn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Xt[e]=new mn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Xt[e]=new mn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Xt[e]=new mn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Xt[e]=new mn(e,5,!1,e.toLowerCase(),null,!1,!1)});var uc=/[\-:]([a-z])/g;function fc(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var n=e.replace(uc,fc);Xt[n]=new mn(n,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var n=e.replace(uc,fc);Xt[n]=new mn(n,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var n=e.replace(uc,fc);Xt[n]=new mn(n,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Xt[e]=new mn(e,1,!1,e.toLowerCase(),null,!1,!1)});Xt.xlinkHref=new mn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Xt[e]=new mn(e,1,!1,e.toLowerCase(),null,!0,!0)});function mc(e,n,t,s){var a=Xt.hasOwnProperty(n)?Xt[n]:null;(a!==null?a.type!==0:s||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(dg(n,t,a,s)&&(t=null),s||a===null?og(n)&&(t===null?e.removeAttribute(n):e.setAttribute(n,""+t)):a.mustUseProperty?e[a.propertyName]=t===null?a.type===3?!1:"":t:(n=a.attributeName,s=a.attributeNamespace,t===null?e.removeAttribute(n):(a=a.type,t=a===3||a===4&&t===!0?"":""+t,s?e.setAttributeNS(s,n,t):e.setAttribute(n,t))))}var pr=ig.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ha=Symbol.for("react.element"),cs=Symbol.for("react.portal"),ds=Symbol.for("react.fragment"),pc=Symbol.for("react.strict_mode"),co=Symbol.for("react.profiler"),Ef=Symbol.for("react.provider"),Af=Symbol.for("react.context"),hc=Symbol.for("react.forward_ref"),uo=Symbol.for("react.suspense"),fo=Symbol.for("react.suspense_list"),gc=Symbol.for("react.memo"),yr=Symbol.for("react.lazy"),If=Symbol.for("react.offscreen"),Ad=Symbol.iterator;function Vs(e){return e===null||typeof e!="object"?null:(e=Ad&&e[Ad]||e["@@iterator"],typeof e=="function"?e:null)}var Tt=Object.assign,wl;function Xs(e){if(wl===void 0)try{throw Error()}catch(t){var n=t.stack.trim().match(/\n( *(at )?)/);wl=n&&n[1]||""}return`
`+wl+e}var kl=!1;function El(e,n){if(!e||kl)return"";kl=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(x){var s=x}Reflect.construct(e,[],n)}else{try{n.call()}catch(x){s=x}e.call(n.prototype)}else{try{throw Error()}catch(x){s=x}e()}}catch(x){if(x&&s&&typeof x.stack=="string"){for(var a=x.stack.split(`
`),i=s.stack.split(`
`),l=a.length-1,u=i.length-1;1<=l&&0<=u&&a[l]!==i[u];)u--;for(;1<=l&&0<=u;l--,u--)if(a[l]!==i[u]){if(l!==1||u!==1)do if(l--,u--,0>u||a[l]!==i[u]){var d=`
`+a[l].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=l&&0<=u);break}}}finally{kl=!1,Error.prepareStackTrace=t}return(e=e?e.displayName||e.name:"")?Xs(e):""}function ug(e){switch(e.tag){case 5:return Xs(e.type);case 16:return Xs("Lazy");case 13:return Xs("Suspense");case 19:return Xs("SuspenseList");case 0:case 2:case 15:return e=El(e.type,!1),e;case 11:return e=El(e.type.render,!1),e;case 1:return e=El(e.type,!0),e;default:return""}}function mo(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ds:return"Fragment";case cs:return"Portal";case co:return"Profiler";case pc:return"StrictMode";case uo:return"Suspense";case fo:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Af:return(e.displayName||"Context")+".Consumer";case Ef:return(e._context.displayName||"Context")+".Provider";case hc:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case gc:return n=e.displayName||null,n!==null?n:mo(e.type)||"Memo";case yr:n=e._payload,e=e._init;try{return mo(e(n))}catch{}}return null}function fg(e){var n=e.type;switch(e.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=n.render,e=e.displayName||e.name||"",n.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return mo(n);case 8:return n===pc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function Mr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Df(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function mg(e){var n=Df(e)?"checked":"value",t=Object.getOwnPropertyDescriptor(e.constructor.prototype,n),s=""+e[n];if(!e.hasOwnProperty(n)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var a=t.get,i=t.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return a.call(this)},set:function(l){s=""+l,i.call(this,l)}}),Object.defineProperty(e,n,{enumerable:t.enumerable}),{getValue:function(){return s},setValue:function(l){s=""+l},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function Ba(e){e._valueTracker||(e._valueTracker=mg(e))}function Tf(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var t=n.getValue(),s="";return e&&(s=Df(e)?e.checked?"true":"false":e.value),e=s,e!==t?(n.setValue(e),!0):!1}function wi(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function po(e,n){var t=n.checked;return Tt({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??e._wrapperState.initialChecked})}function Id(e,n){var t=n.defaultValue==null?"":n.defaultValue,s=n.checked!=null?n.checked:n.defaultChecked;t=Mr(n.value!=null?n.value:t),e._wrapperState={initialChecked:s,initialValue:t,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function Pf(e,n){n=n.checked,n!=null&&mc(e,"checked",n,!1)}function ho(e,n){Pf(e,n);var t=Mr(n.value),s=n.type;if(t!=null)s==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+t):e.value!==""+t&&(e.value=""+t);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}n.hasOwnProperty("value")?go(e,n.type,t):n.hasOwnProperty("defaultValue")&&go(e,n.type,Mr(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(e.defaultChecked=!!n.defaultChecked)}function Dd(e,n,t){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var s=n.type;if(!(s!=="submit"&&s!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+e._wrapperState.initialValue,t||n===e.value||(e.value=n),e.defaultValue=n}t=e.name,t!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,t!==""&&(e.name=t)}function go(e,n,t){(n!=="number"||wi(e.ownerDocument)!==e)&&(t==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+t&&(e.defaultValue=""+t))}var Zs=Array.isArray;function _s(e,n,t,s){if(e=e.options,n){n={};for(var a=0;a<t.length;a++)n["$"+t[a]]=!0;for(t=0;t<e.length;t++)a=n.hasOwnProperty("$"+e[t].value),e[t].selected!==a&&(e[t].selected=a),a&&s&&(e[t].defaultSelected=!0)}else{for(t=""+Mr(t),n=null,a=0;a<e.length;a++){if(e[a].value===t){e[a].selected=!0,s&&(e[a].defaultSelected=!0);return}n!==null||e[a].disabled||(n=e[a])}n!==null&&(n.selected=!0)}}function vo(e,n){if(n.dangerouslySetInnerHTML!=null)throw Error(xe(91));return Tt({},n,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Td(e,n){var t=n.value;if(t==null){if(t=n.children,n=n.defaultValue,t!=null){if(n!=null)throw Error(xe(92));if(Zs(t)){if(1<t.length)throw Error(xe(93));t=t[0]}n=t}n==null&&(n=""),t=n}e._wrapperState={initialValue:Mr(t)}}function Mf(e,n){var t=Mr(n.value),s=Mr(n.defaultValue);t!=null&&(t=""+t,t!==e.value&&(e.value=t),n.defaultValue==null&&e.defaultValue!==t&&(e.defaultValue=t)),s!=null&&(e.defaultValue=""+s)}function Pd(e){var n=e.textContent;n===e._wrapperState.initialValue&&n!==""&&n!==null&&(e.value=n)}function Of(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function yo(e,n){return e==null||e==="http://www.w3.org/1999/xhtml"?Of(n):e==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ka,$f=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(n,t,s,a){MSApp.execUnsafeLocalFunction(function(){return e(n,t,s,a)})}:e}(function(e,n){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=n;else{for(Ka=Ka||document.createElement("div"),Ka.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=Ka.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;n.firstChild;)e.appendChild(n.firstChild)}});function ma(e,n){if(n){var t=e.firstChild;if(t&&t===e.lastChild&&t.nodeType===3){t.nodeValue=n;return}}e.textContent=n}var na={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pg=["Webkit","ms","Moz","O"];Object.keys(na).forEach(function(e){pg.forEach(function(n){n=n+e.charAt(0).toUpperCase()+e.substring(1),na[n]=na[e]})});function Lf(e,n,t){return n==null||typeof n=="boolean"||n===""?"":t||typeof n!="number"||n===0||na.hasOwnProperty(e)&&na[e]?(""+n).trim():n+"px"}function Ff(e,n){e=e.style;for(var t in n)if(n.hasOwnProperty(t)){var s=t.indexOf("--")===0,a=Lf(t,n[t],s);t==="float"&&(t="cssFloat"),s?e.setProperty(t,a):e[t]=a}}var hg=Tt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xo(e,n){if(n){if(hg[e]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(xe(137,e));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(xe(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error(xe(61))}if(n.style!=null&&typeof n.style!="object")throw Error(xe(62))}}function jo(e,n){if(e.indexOf("-")===-1)return typeof n.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _o=null;function vc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var No=null,Ns=null,bs=null;function Md(e){if(e=Fa(e)){if(typeof No!="function")throw Error(xe(280));var n=e.stateNode;n&&(n=cl(n),No(e.stateNode,e.type,n))}}function Rf(e){Ns?bs?bs.push(e):bs=[e]:Ns=e}function zf(){if(Ns){var e=Ns,n=bs;if(bs=Ns=null,Md(e),n)for(e=0;e<n.length;e++)Md(n[e])}}function Uf(e,n){return e(n)}function Vf(){}var Al=!1;function Wf(e,n,t){if(Al)return e(n,t);Al=!0;try{return Uf(e,n,t)}finally{Al=!1,(Ns!==null||bs!==null)&&(Vf(),zf())}}function pa(e,n){var t=e.stateNode;if(t===null)return null;var s=cl(t);if(s===null)return null;t=s[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(t&&typeof t!="function")throw Error(xe(231,n,typeof t));return t}var bo=!1;if(cr)try{var Ws={};Object.defineProperty(Ws,"passive",{get:function(){bo=!0}}),window.addEventListener("test",Ws,Ws),window.removeEventListener("test",Ws,Ws)}catch{bo=!1}function gg(e,n,t,s,a,i,l,u,d){var x=Array.prototype.slice.call(arguments,3);try{n.apply(t,x)}catch(_){this.onError(_)}}var ra=!1,ki=null,Ei=!1,So=null,vg={onError:function(e){ra=!0,ki=e}};function yg(e,n,t,s,a,i,l,u,d){ra=!1,ki=null,gg.apply(vg,arguments)}function xg(e,n,t,s,a,i,l,u,d){if(yg.apply(this,arguments),ra){if(ra){var x=ki;ra=!1,ki=null}else throw Error(xe(198));Ei||(Ei=!0,So=x)}}function rs(e){var n=e,t=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,n.flags&4098&&(t=n.return),e=n.return;while(e)}return n.tag===3?t:null}function Hf(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function Od(e){if(rs(e)!==e)throw Error(xe(188))}function jg(e){var n=e.alternate;if(!n){if(n=rs(e),n===null)throw Error(xe(188));return n!==e?null:e}for(var t=e,s=n;;){var a=t.return;if(a===null)break;var i=a.alternate;if(i===null){if(s=a.return,s!==null){t=s;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===t)return Od(a),e;if(i===s)return Od(a),n;i=i.sibling}throw Error(xe(188))}if(t.return!==s.return)t=a,s=i;else{for(var l=!1,u=a.child;u;){if(u===t){l=!0,t=a,s=i;break}if(u===s){l=!0,s=a,t=i;break}u=u.sibling}if(!l){for(u=i.child;u;){if(u===t){l=!0,t=i,s=a;break}if(u===s){l=!0,s=i,t=a;break}u=u.sibling}if(!l)throw Error(xe(189))}}if(t.alternate!==s)throw Error(xe(190))}if(t.tag!==3)throw Error(xe(188));return t.stateNode.current===t?e:n}function Bf(e){return e=jg(e),e!==null?Kf(e):null}function Kf(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var n=Kf(e);if(n!==null)return n;e=e.sibling}return null}var Yf=Cn.unstable_scheduleCallback,$d=Cn.unstable_cancelCallback,_g=Cn.unstable_shouldYield,Ng=Cn.unstable_requestPaint,zt=Cn.unstable_now,bg=Cn.unstable_getCurrentPriorityLevel,yc=Cn.unstable_ImmediatePriority,qf=Cn.unstable_UserBlockingPriority,Ai=Cn.unstable_NormalPriority,Sg=Cn.unstable_LowPriority,Gf=Cn.unstable_IdlePriority,al=null,Zn=null;function Cg(e){if(Zn&&typeof Zn.onCommitFiberRoot=="function")try{Zn.onCommitFiberRoot(al,e,void 0,(e.current.flags&128)===128)}catch{}}var Vn=Math.clz32?Math.clz32:Eg,wg=Math.log,kg=Math.LN2;function Eg(e){return e>>>=0,e===0?32:31-(wg(e)/kg|0)|0}var Ya=64,qa=4194304;function ea(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ii(e,n){var t=e.pendingLanes;if(t===0)return 0;var s=0,a=e.suspendedLanes,i=e.pingedLanes,l=t&268435455;if(l!==0){var u=l&~a;u!==0?s=ea(u):(i&=l,i!==0&&(s=ea(i)))}else l=t&~a,l!==0?s=ea(l):i!==0&&(s=ea(i));if(s===0)return 0;if(n!==0&&n!==s&&!(n&a)&&(a=s&-s,i=n&-n,a>=i||a===16&&(i&4194240)!==0))return n;if(s&4&&(s|=t&16),n=e.entangledLanes,n!==0)for(e=e.entanglements,n&=s;0<n;)t=31-Vn(n),a=1<<t,s|=e[t],n&=~a;return s}function Ag(e,n){switch(e){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ig(e,n){for(var t=e.suspendedLanes,s=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var l=31-Vn(i),u=1<<l,d=a[l];d===-1?(!(u&t)||u&s)&&(a[l]=Ag(u,n)):d<=n&&(e.expiredLanes|=u),i&=~u}}function Co(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Qf(){var e=Ya;return Ya<<=1,!(Ya&4194240)&&(Ya=64),e}function Il(e){for(var n=[],t=0;31>t;t++)n.push(e);return n}function $a(e,n,t){e.pendingLanes|=n,n!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,n=31-Vn(n),e[n]=t}function Dg(e,n){var t=e.pendingLanes&~n;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=n,e.mutableReadLanes&=n,e.entangledLanes&=n,n=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<t;){var a=31-Vn(t),i=1<<a;n[a]=0,s[a]=-1,e[a]=-1,t&=~i}}function xc(e,n){var t=e.entangledLanes|=n;for(e=e.entanglements;t;){var s=31-Vn(t),a=1<<s;a&n|e[s]&n&&(e[s]|=n),t&=~a}}var gt=0;function Jf(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Xf,jc,Zf,em,tm,wo=!1,Ga=[],Cr=null,wr=null,kr=null,ha=new Map,ga=new Map,jr=[],Tg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ld(e,n){switch(e){case"focusin":case"focusout":Cr=null;break;case"dragenter":case"dragleave":wr=null;break;case"mouseover":case"mouseout":kr=null;break;case"pointerover":case"pointerout":ha.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":ga.delete(n.pointerId)}}function Hs(e,n,t,s,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:n,domEventName:t,eventSystemFlags:s,nativeEvent:i,targetContainers:[a]},n!==null&&(n=Fa(n),n!==null&&jc(n)),e):(e.eventSystemFlags|=s,n=e.targetContainers,a!==null&&n.indexOf(a)===-1&&n.push(a),e)}function Pg(e,n,t,s,a){switch(n){case"focusin":return Cr=Hs(Cr,e,n,t,s,a),!0;case"dragenter":return wr=Hs(wr,e,n,t,s,a),!0;case"mouseover":return kr=Hs(kr,e,n,t,s,a),!0;case"pointerover":var i=a.pointerId;return ha.set(i,Hs(ha.get(i)||null,e,n,t,s,a)),!0;case"gotpointercapture":return i=a.pointerId,ga.set(i,Hs(ga.get(i)||null,e,n,t,s,a)),!0}return!1}function nm(e){var n=Hr(e.target);if(n!==null){var t=rs(n);if(t!==null){if(n=t.tag,n===13){if(n=Hf(t),n!==null){e.blockedOn=n,tm(e.priority,function(){Zf(t)});return}}else if(n===3&&t.stateNode.current.memoizedState.isDehydrated){e.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}e.blockedOn=null}function hi(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var t=ko(e.domEventName,e.eventSystemFlags,n[0],e.nativeEvent);if(t===null){t=e.nativeEvent;var s=new t.constructor(t.type,t);_o=s,t.target.dispatchEvent(s),_o=null}else return n=Fa(t),n!==null&&jc(n),e.blockedOn=t,!1;n.shift()}return!0}function Fd(e,n,t){hi(e)&&t.delete(n)}function Mg(){wo=!1,Cr!==null&&hi(Cr)&&(Cr=null),wr!==null&&hi(wr)&&(wr=null),kr!==null&&hi(kr)&&(kr=null),ha.forEach(Fd),ga.forEach(Fd)}function Bs(e,n){e.blockedOn===n&&(e.blockedOn=null,wo||(wo=!0,Cn.unstable_scheduleCallback(Cn.unstable_NormalPriority,Mg)))}function va(e){function n(a){return Bs(a,e)}if(0<Ga.length){Bs(Ga[0],e);for(var t=1;t<Ga.length;t++){var s=Ga[t];s.blockedOn===e&&(s.blockedOn=null)}}for(Cr!==null&&Bs(Cr,e),wr!==null&&Bs(wr,e),kr!==null&&Bs(kr,e),ha.forEach(n),ga.forEach(n),t=0;t<jr.length;t++)s=jr[t],s.blockedOn===e&&(s.blockedOn=null);for(;0<jr.length&&(t=jr[0],t.blockedOn===null);)nm(t),t.blockedOn===null&&jr.shift()}var Ss=pr.ReactCurrentBatchConfig,Di=!0;function Og(e,n,t,s){var a=gt,i=Ss.transition;Ss.transition=null;try{gt=1,_c(e,n,t,s)}finally{gt=a,Ss.transition=i}}function $g(e,n,t,s){var a=gt,i=Ss.transition;Ss.transition=null;try{gt=4,_c(e,n,t,s)}finally{gt=a,Ss.transition=i}}function _c(e,n,t,s){if(Di){var a=ko(e,n,t,s);if(a===null)zl(e,n,s,Ti,t),Ld(e,s);else if(Pg(a,e,n,t,s))s.stopPropagation();else if(Ld(e,s),n&4&&-1<Tg.indexOf(e)){for(;a!==null;){var i=Fa(a);if(i!==null&&Xf(i),i=ko(e,n,t,s),i===null&&zl(e,n,s,Ti,t),i===a)break;a=i}a!==null&&s.stopPropagation()}else zl(e,n,s,null,t)}}var Ti=null;function ko(e,n,t,s){if(Ti=null,e=vc(s),e=Hr(e),e!==null)if(n=rs(e),n===null)e=null;else if(t=n.tag,t===13){if(e=Hf(n),e!==null)return e;e=null}else if(t===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null);return Ti=e,null}function rm(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(bg()){case yc:return 1;case qf:return 4;case Ai:case Sg:return 16;case Gf:return 536870912;default:return 16}default:return 16}}var Nr=null,Nc=null,gi=null;function sm(){if(gi)return gi;var e,n=Nc,t=n.length,s,a="value"in Nr?Nr.value:Nr.textContent,i=a.length;for(e=0;e<t&&n[e]===a[e];e++);var l=t-e;for(s=1;s<=l&&n[t-s]===a[i-s];s++);return gi=a.slice(e,1<s?1-s:void 0)}function vi(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function Qa(){return!0}function Rd(){return!1}function kn(e){function n(t,s,a,i,l){this._reactName=t,this._targetInst=a,this.type=s,this.nativeEvent=i,this.target=l,this.currentTarget=null;for(var u in e)e.hasOwnProperty(u)&&(t=e[u],this[u]=t?t(i):i[u]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Qa:Rd,this.isPropagationStopped=Rd,this}return Tt(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=Qa)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=Qa)},persist:function(){},isPersistent:Qa}),n}var Fs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bc=kn(Fs),La=Tt({},Fs,{view:0,detail:0}),Lg=kn(La),Dl,Tl,Ks,il=Tt({},La,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ks&&(Ks&&e.type==="mousemove"?(Dl=e.screenX-Ks.screenX,Tl=e.screenY-Ks.screenY):Tl=Dl=0,Ks=e),Dl)},movementY:function(e){return"movementY"in e?e.movementY:Tl}}),zd=kn(il),Fg=Tt({},il,{dataTransfer:0}),Rg=kn(Fg),zg=Tt({},La,{relatedTarget:0}),Pl=kn(zg),Ug=Tt({},Fs,{animationName:0,elapsedTime:0,pseudoElement:0}),Vg=kn(Ug),Wg=Tt({},Fs,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Hg=kn(Wg),Bg=Tt({},Fs,{data:0}),Ud=kn(Bg),Kg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Yg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Gg(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=qg[e])?!!n[e]:!1}function Sc(){return Gg}var Qg=Tt({},La,{key:function(e){if(e.key){var n=Kg[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=vi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Yg[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sc,charCode:function(e){return e.type==="keypress"?vi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?vi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Jg=kn(Qg),Xg=Tt({},il,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vd=kn(Xg),Zg=Tt({},La,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sc}),ev=kn(Zg),tv=Tt({},Fs,{propertyName:0,elapsedTime:0,pseudoElement:0}),nv=kn(tv),rv=Tt({},il,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),sv=kn(rv),av=[9,13,27,32],Cc=cr&&"CompositionEvent"in window,sa=null;cr&&"documentMode"in document&&(sa=document.documentMode);var iv=cr&&"TextEvent"in window&&!sa,am=cr&&(!Cc||sa&&8<sa&&11>=sa),Wd=" ",Hd=!1;function im(e,n){switch(e){case"keyup":return av.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function lm(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var us=!1;function lv(e,n){switch(e){case"compositionend":return lm(n);case"keypress":return n.which!==32?null:(Hd=!0,Wd);case"textInput":return e=n.data,e===Wd&&Hd?null:e;default:return null}}function ov(e,n){if(us)return e==="compositionend"||!Cc&&im(e,n)?(e=sm(),gi=Nc=Nr=null,us=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return am&&n.locale!=="ko"?null:n.data;default:return null}}var cv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bd(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!cv[e.type]:n==="textarea"}function om(e,n,t,s){Rf(s),n=Pi(n,"onChange"),0<n.length&&(t=new bc("onChange","change",null,t,s),e.push({event:t,listeners:n}))}var aa=null,ya=null;function dv(e){xm(e,0)}function ll(e){var n=ps(e);if(Tf(n))return e}function uv(e,n){if(e==="change")return n}var cm=!1;if(cr){var Ml;if(cr){var Ol="oninput"in document;if(!Ol){var Kd=document.createElement("div");Kd.setAttribute("oninput","return;"),Ol=typeof Kd.oninput=="function"}Ml=Ol}else Ml=!1;cm=Ml&&(!document.documentMode||9<document.documentMode)}function Yd(){aa&&(aa.detachEvent("onpropertychange",dm),ya=aa=null)}function dm(e){if(e.propertyName==="value"&&ll(ya)){var n=[];om(n,ya,e,vc(e)),Wf(dv,n)}}function fv(e,n,t){e==="focusin"?(Yd(),aa=n,ya=t,aa.attachEvent("onpropertychange",dm)):e==="focusout"&&Yd()}function mv(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ll(ya)}function pv(e,n){if(e==="click")return ll(n)}function hv(e,n){if(e==="input"||e==="change")return ll(n)}function gv(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var Hn=typeof Object.is=="function"?Object.is:gv;function xa(e,n){if(Hn(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var t=Object.keys(e),s=Object.keys(n);if(t.length!==s.length)return!1;for(s=0;s<t.length;s++){var a=t[s];if(!oo.call(n,a)||!Hn(e[a],n[a]))return!1}return!0}function qd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Gd(e,n){var t=qd(e);e=0;for(var s;t;){if(t.nodeType===3){if(s=e+t.textContent.length,e<=n&&s>=n)return{node:t,offset:n-e};e=s}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=qd(t)}}function um(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?um(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function fm(){for(var e=window,n=wi();n instanceof e.HTMLIFrameElement;){try{var t=typeof n.contentWindow.location.href=="string"}catch{t=!1}if(t)e=n.contentWindow;else break;n=wi(e.document)}return n}function wc(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}function vv(e){var n=fm(),t=e.focusedElem,s=e.selectionRange;if(n!==t&&t&&t.ownerDocument&&um(t.ownerDocument.documentElement,t)){if(s!==null&&wc(t)){if(n=s.start,e=s.end,e===void 0&&(e=n),"selectionStart"in t)t.selectionStart=n,t.selectionEnd=Math.min(e,t.value.length);else if(e=(n=t.ownerDocument||document)&&n.defaultView||window,e.getSelection){e=e.getSelection();var a=t.textContent.length,i=Math.min(s.start,a);s=s.end===void 0?i:Math.min(s.end,a),!e.extend&&i>s&&(a=s,s=i,i=a),a=Gd(t,i);var l=Gd(t,s);a&&l&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(n=n.createRange(),n.setStart(a.node,a.offset),e.removeAllRanges(),i>s?(e.addRange(n),e.extend(l.node,l.offset)):(n.setEnd(l.node,l.offset),e.addRange(n)))}}for(n=[],e=t;e=e.parentNode;)e.nodeType===1&&n.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<n.length;t++)e=n[t],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var yv=cr&&"documentMode"in document&&11>=document.documentMode,fs=null,Eo=null,ia=null,Ao=!1;function Qd(e,n,t){var s=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;Ao||fs==null||fs!==wi(s)||(s=fs,"selectionStart"in s&&wc(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),ia&&xa(ia,s)||(ia=s,s=Pi(Eo,"onSelect"),0<s.length&&(n=new bc("onSelect","select",null,n,t),e.push({event:n,listeners:s}),n.target=fs)))}function Ja(e,n){var t={};return t[e.toLowerCase()]=n.toLowerCase(),t["Webkit"+e]="webkit"+n,t["Moz"+e]="moz"+n,t}var ms={animationend:Ja("Animation","AnimationEnd"),animationiteration:Ja("Animation","AnimationIteration"),animationstart:Ja("Animation","AnimationStart"),transitionend:Ja("Transition","TransitionEnd")},$l={},mm={};cr&&(mm=document.createElement("div").style,"AnimationEvent"in window||(delete ms.animationend.animation,delete ms.animationiteration.animation,delete ms.animationstart.animation),"TransitionEvent"in window||delete ms.transitionend.transition);function ol(e){if($l[e])return $l[e];if(!ms[e])return e;var n=ms[e],t;for(t in n)if(n.hasOwnProperty(t)&&t in mm)return $l[e]=n[t];return e}var pm=ol("animationend"),hm=ol("animationiteration"),gm=ol("animationstart"),vm=ol("transitionend"),ym=new Map,Jd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Lr(e,n){ym.set(e,n),ns(n,[e])}for(var Ll=0;Ll<Jd.length;Ll++){var Fl=Jd[Ll],xv=Fl.toLowerCase(),jv=Fl[0].toUpperCase()+Fl.slice(1);Lr(xv,"on"+jv)}Lr(pm,"onAnimationEnd");Lr(hm,"onAnimationIteration");Lr(gm,"onAnimationStart");Lr("dblclick","onDoubleClick");Lr("focusin","onFocus");Lr("focusout","onBlur");Lr(vm,"onTransitionEnd");As("onMouseEnter",["mouseout","mouseover"]);As("onMouseLeave",["mouseout","mouseover"]);As("onPointerEnter",["pointerout","pointerover"]);As("onPointerLeave",["pointerout","pointerover"]);ns("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ns("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ns("onBeforeInput",["compositionend","keypress","textInput","paste"]);ns("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ns("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ns("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ta="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_v=new Set("cancel close invalid load scroll toggle".split(" ").concat(ta));function Xd(e,n,t){var s=e.type||"unknown-event";e.currentTarget=t,xg(s,n,void 0,e),e.currentTarget=null}function xm(e,n){n=(n&4)!==0;for(var t=0;t<e.length;t++){var s=e[t],a=s.event;s=s.listeners;e:{var i=void 0;if(n)for(var l=s.length-1;0<=l;l--){var u=s[l],d=u.instance,x=u.currentTarget;if(u=u.listener,d!==i&&a.isPropagationStopped())break e;Xd(a,u,x),i=d}else for(l=0;l<s.length;l++){if(u=s[l],d=u.instance,x=u.currentTarget,u=u.listener,d!==i&&a.isPropagationStopped())break e;Xd(a,u,x),i=d}}}if(Ei)throw e=So,Ei=!1,So=null,e}function bt(e,n){var t=n[Mo];t===void 0&&(t=n[Mo]=new Set);var s=e+"__bubble";t.has(s)||(jm(n,e,2,!1),t.add(s))}function Rl(e,n,t){var s=0;n&&(s|=4),jm(t,e,s,n)}var Xa="_reactListening"+Math.random().toString(36).slice(2);function ja(e){if(!e[Xa]){e[Xa]=!0,kf.forEach(function(t){t!=="selectionchange"&&(_v.has(t)||Rl(t,!1,e),Rl(t,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[Xa]||(n[Xa]=!0,Rl("selectionchange",!1,n))}}function jm(e,n,t,s){switch(rm(n)){case 1:var a=Og;break;case 4:a=$g;break;default:a=_c}t=a.bind(null,n,t,e),a=void 0,!bo||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(a=!0),s?a!==void 0?e.addEventListener(n,t,{capture:!0,passive:a}):e.addEventListener(n,t,!0):a!==void 0?e.addEventListener(n,t,{passive:a}):e.addEventListener(n,t,!1)}function zl(e,n,t,s,a){var i=s;if(!(n&1)&&!(n&2)&&s!==null)e:for(;;){if(s===null)return;var l=s.tag;if(l===3||l===4){var u=s.stateNode.containerInfo;if(u===a||u.nodeType===8&&u.parentNode===a)break;if(l===4)for(l=s.return;l!==null;){var d=l.tag;if((d===3||d===4)&&(d=l.stateNode.containerInfo,d===a||d.nodeType===8&&d.parentNode===a))return;l=l.return}for(;u!==null;){if(l=Hr(u),l===null)return;if(d=l.tag,d===5||d===6){s=i=l;continue e}u=u.parentNode}}s=s.return}Wf(function(){var x=i,_=vc(t),C=[];e:{var b=ym.get(e);if(b!==void 0){var F=bc,y=e;switch(e){case"keypress":if(vi(t)===0)break e;case"keydown":case"keyup":F=Jg;break;case"focusin":y="focus",F=Pl;break;case"focusout":y="blur",F=Pl;break;case"beforeblur":case"afterblur":F=Pl;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":F=zd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":F=Rg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":F=ev;break;case pm:case hm:case gm:F=Vg;break;case vm:F=nv;break;case"scroll":F=Lg;break;case"wheel":F=sv;break;case"copy":case"cut":case"paste":F=Hg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":F=Vd}var S=(n&4)!==0,E=!S&&e==="scroll",p=S?b!==null?b+"Capture":null:b;S=[];for(var m=x,v;m!==null;){v=m;var j=v.stateNode;if(v.tag===5&&j!==null&&(v=j,p!==null&&(j=pa(m,p),j!=null&&S.push(_a(m,j,v)))),E)break;m=m.return}0<S.length&&(b=new F(b,y,null,t,_),C.push({event:b,listeners:S}))}}if(!(n&7)){e:{if(b=e==="mouseover"||e==="pointerover",F=e==="mouseout"||e==="pointerout",b&&t!==_o&&(y=t.relatedTarget||t.fromElement)&&(Hr(y)||y[dr]))break e;if((F||b)&&(b=_.window===_?_:(b=_.ownerDocument)?b.defaultView||b.parentWindow:window,F?(y=t.relatedTarget||t.toElement,F=x,y=y?Hr(y):null,y!==null&&(E=rs(y),y!==E||y.tag!==5&&y.tag!==6)&&(y=null)):(F=null,y=x),F!==y)){if(S=zd,j="onMouseLeave",p="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(S=Vd,j="onPointerLeave",p="onPointerEnter",m="pointer"),E=F==null?b:ps(F),v=y==null?b:ps(y),b=new S(j,m+"leave",F,t,_),b.target=E,b.relatedTarget=v,j=null,Hr(_)===x&&(S=new S(p,m+"enter",y,t,_),S.target=v,S.relatedTarget=E,j=S),E=j,F&&y)t:{for(S=F,p=y,m=0,v=S;v;v=ss(v))m++;for(v=0,j=p;j;j=ss(j))v++;for(;0<m-v;)S=ss(S),m--;for(;0<v-m;)p=ss(p),v--;for(;m--;){if(S===p||p!==null&&S===p.alternate)break t;S=ss(S),p=ss(p)}S=null}else S=null;F!==null&&Zd(C,b,F,S,!1),y!==null&&E!==null&&Zd(C,E,y,S,!0)}}e:{if(b=x?ps(x):window,F=b.nodeName&&b.nodeName.toLowerCase(),F==="select"||F==="input"&&b.type==="file")var D=uv;else if(Bd(b))if(cm)D=hv;else{D=mv;var k=fv}else(F=b.nodeName)&&F.toLowerCase()==="input"&&(b.type==="checkbox"||b.type==="radio")&&(D=pv);if(D&&(D=D(e,x))){om(C,D,t,_);break e}k&&k(e,b,x),e==="focusout"&&(k=b._wrapperState)&&k.controlled&&b.type==="number"&&go(b,"number",b.value)}switch(k=x?ps(x):window,e){case"focusin":(Bd(k)||k.contentEditable==="true")&&(fs=k,Eo=x,ia=null);break;case"focusout":ia=Eo=fs=null;break;case"mousedown":Ao=!0;break;case"contextmenu":case"mouseup":case"dragend":Ao=!1,Qd(C,t,_);break;case"selectionchange":if(yv)break;case"keydown":case"keyup":Qd(C,t,_)}var I;if(Cc)e:{switch(e){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else us?im(e,t)&&(T="onCompositionEnd"):e==="keydown"&&t.keyCode===229&&(T="onCompositionStart");T&&(am&&t.locale!=="ko"&&(us||T!=="onCompositionStart"?T==="onCompositionEnd"&&us&&(I=sm()):(Nr=_,Nc="value"in Nr?Nr.value:Nr.textContent,us=!0)),k=Pi(x,T),0<k.length&&(T=new Ud(T,e,null,t,_),C.push({event:T,listeners:k}),I?T.data=I:(I=lm(t),I!==null&&(T.data=I)))),(I=iv?lv(e,t):ov(e,t))&&(x=Pi(x,"onBeforeInput"),0<x.length&&(_=new Ud("onBeforeInput","beforeinput",null,t,_),C.push({event:_,listeners:x}),_.data=I))}xm(C,n)})}function _a(e,n,t){return{instance:e,listener:n,currentTarget:t}}function Pi(e,n){for(var t=n+"Capture",s=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=pa(e,t),i!=null&&s.unshift(_a(e,i,a)),i=pa(e,n),i!=null&&s.push(_a(e,i,a))),e=e.return}return s}function ss(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Zd(e,n,t,s,a){for(var i=n._reactName,l=[];t!==null&&t!==s;){var u=t,d=u.alternate,x=u.stateNode;if(d!==null&&d===s)break;u.tag===5&&x!==null&&(u=x,a?(d=pa(t,i),d!=null&&l.unshift(_a(t,d,u))):a||(d=pa(t,i),d!=null&&l.push(_a(t,d,u)))),t=t.return}l.length!==0&&e.push({event:n,listeners:l})}var Nv=/\r\n?/g,bv=/\u0000|\uFFFD/g;function eu(e){return(typeof e=="string"?e:""+e).replace(Nv,`
`).replace(bv,"")}function Za(e,n,t){if(n=eu(n),eu(e)!==n&&t)throw Error(xe(425))}function Mi(){}var Io=null,Do=null;function To(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Po=typeof setTimeout=="function"?setTimeout:void 0,Sv=typeof clearTimeout=="function"?clearTimeout:void 0,tu=typeof Promise=="function"?Promise:void 0,Cv=typeof queueMicrotask=="function"?queueMicrotask:typeof tu<"u"?function(e){return tu.resolve(null).then(e).catch(wv)}:Po;function wv(e){setTimeout(function(){throw e})}function Ul(e,n){var t=n,s=0;do{var a=t.nextSibling;if(e.removeChild(t),a&&a.nodeType===8)if(t=a.data,t==="/$"){if(s===0){e.removeChild(a),va(n);return}s--}else t!=="$"&&t!=="$?"&&t!=="$!"||s++;t=a}while(t);va(n)}function Er(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return e}function nu(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var t=e.data;if(t==="$"||t==="$!"||t==="$?"){if(n===0)return e;n--}else t==="/$"&&n++}e=e.previousSibling}return null}var Rs=Math.random().toString(36).slice(2),Xn="__reactFiber$"+Rs,Na="__reactProps$"+Rs,dr="__reactContainer$"+Rs,Mo="__reactEvents$"+Rs,kv="__reactListeners$"+Rs,Ev="__reactHandles$"+Rs;function Hr(e){var n=e[Xn];if(n)return n;for(var t=e.parentNode;t;){if(n=t[dr]||t[Xn]){if(t=n.alternate,n.child!==null||t!==null&&t.child!==null)for(e=nu(e);e!==null;){if(t=e[Xn])return t;e=nu(e)}return n}e=t,t=e.parentNode}return null}function Fa(e){return e=e[Xn]||e[dr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ps(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(xe(33))}function cl(e){return e[Na]||null}var Oo=[],hs=-1;function Fr(e){return{current:e}}function St(e){0>hs||(e.current=Oo[hs],Oo[hs]=null,hs--)}function _t(e,n){hs++,Oo[hs]=e.current,e.current=n}var Or={},ln=Fr(Or),vn=Fr(!1),Gr=Or;function Is(e,n){var t=e.type.contextTypes;if(!t)return Or;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===n)return s.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in t)a[i]=n[i];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=a),a}function yn(e){return e=e.childContextTypes,e!=null}function Oi(){St(vn),St(ln)}function ru(e,n,t){if(ln.current!==Or)throw Error(xe(168));_t(ln,n),_t(vn,t)}function _m(e,n,t){var s=e.stateNode;if(n=n.childContextTypes,typeof s.getChildContext!="function")return t;s=s.getChildContext();for(var a in s)if(!(a in n))throw Error(xe(108,fg(e)||"Unknown",a));return Tt({},t,s)}function $i(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Or,Gr=ln.current,_t(ln,e),_t(vn,vn.current),!0}function su(e,n,t){var s=e.stateNode;if(!s)throw Error(xe(169));t?(e=_m(e,n,Gr),s.__reactInternalMemoizedMergedChildContext=e,St(vn),St(ln),_t(ln,e)):St(vn),_t(vn,t)}var ar=null,dl=!1,Vl=!1;function Nm(e){ar===null?ar=[e]:ar.push(e)}function Av(e){dl=!0,Nm(e)}function Rr(){if(!Vl&&ar!==null){Vl=!0;var e=0,n=gt;try{var t=ar;for(gt=1;e<t.length;e++){var s=t[e];do s=s(!0);while(s!==null)}ar=null,dl=!1}catch(a){throw ar!==null&&(ar=ar.slice(e+1)),Yf(yc,Rr),a}finally{gt=n,Vl=!1}}return null}var gs=[],vs=0,Li=null,Fi=0,Dn=[],Tn=0,Qr=null,ir=1,lr="";function Ur(e,n){gs[vs++]=Fi,gs[vs++]=Li,Li=e,Fi=n}function bm(e,n,t){Dn[Tn++]=ir,Dn[Tn++]=lr,Dn[Tn++]=Qr,Qr=e;var s=ir;e=lr;var a=32-Vn(s)-1;s&=~(1<<a),t+=1;var i=32-Vn(n)+a;if(30<i){var l=a-a%5;i=(s&(1<<l)-1).toString(32),s>>=l,a-=l,ir=1<<32-Vn(n)+a|t<<a|s,lr=i+e}else ir=1<<i|t<<a|s,lr=e}function kc(e){e.return!==null&&(Ur(e,1),bm(e,1,0))}function Ec(e){for(;e===Li;)Li=gs[--vs],gs[vs]=null,Fi=gs[--vs],gs[vs]=null;for(;e===Qr;)Qr=Dn[--Tn],Dn[Tn]=null,lr=Dn[--Tn],Dn[Tn]=null,ir=Dn[--Tn],Dn[Tn]=null}var Sn=null,bn=null,kt=!1,Un=null;function Sm(e,n){var t=Pn(5,null,null,0);t.elementType="DELETED",t.stateNode=n,t.return=e,n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)}function au(e,n){switch(e.tag){case 5:var t=e.type;return n=n.nodeType!==1||t.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(e.stateNode=n,Sn=e,bn=Er(n.firstChild),!0):!1;case 6:return n=e.pendingProps===""||n.nodeType!==3?null:n,n!==null?(e.stateNode=n,Sn=e,bn=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(t=Qr!==null?{id:ir,overflow:lr}:null,e.memoizedState={dehydrated:n,treeContext:t,retryLane:1073741824},t=Pn(18,null,null,0),t.stateNode=n,t.return=e,e.child=t,Sn=e,bn=null,!0):!1;default:return!1}}function $o(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Lo(e){if(kt){var n=bn;if(n){var t=n;if(!au(e,n)){if($o(e))throw Error(xe(418));n=Er(t.nextSibling);var s=Sn;n&&au(e,n)?Sm(s,t):(e.flags=e.flags&-4097|2,kt=!1,Sn=e)}}else{if($o(e))throw Error(xe(418));e.flags=e.flags&-4097|2,kt=!1,Sn=e}}}function iu(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Sn=e}function ei(e){if(e!==Sn)return!1;if(!kt)return iu(e),kt=!0,!1;var n;if((n=e.tag!==3)&&!(n=e.tag!==5)&&(n=e.type,n=n!=="head"&&n!=="body"&&!To(e.type,e.memoizedProps)),n&&(n=bn)){if($o(e))throw Cm(),Error(xe(418));for(;n;)Sm(e,n),n=Er(n.nextSibling)}if(iu(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(xe(317));e:{for(e=e.nextSibling,n=0;e;){if(e.nodeType===8){var t=e.data;if(t==="/$"){if(n===0){bn=Er(e.nextSibling);break e}n--}else t!=="$"&&t!=="$!"&&t!=="$?"||n++}e=e.nextSibling}bn=null}}else bn=Sn?Er(e.stateNode.nextSibling):null;return!0}function Cm(){for(var e=bn;e;)e=Er(e.nextSibling)}function Ds(){bn=Sn=null,kt=!1}function Ac(e){Un===null?Un=[e]:Un.push(e)}var Iv=pr.ReactCurrentBatchConfig;function Ys(e,n,t){if(e=t.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(xe(309));var s=t.stateNode}if(!s)throw Error(xe(147,e));var a=s,i=""+e;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===i?n.ref:(n=function(l){var u=a.refs;l===null?delete u[i]:u[i]=l},n._stringRef=i,n)}if(typeof e!="string")throw Error(xe(284));if(!t._owner)throw Error(xe(290,e))}return e}function ti(e,n){throw e=Object.prototype.toString.call(n),Error(xe(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e))}function lu(e){var n=e._init;return n(e._payload)}function wm(e){function n(p,m){if(e){var v=p.deletions;v===null?(p.deletions=[m],p.flags|=16):v.push(m)}}function t(p,m){if(!e)return null;for(;m!==null;)n(p,m),m=m.sibling;return null}function s(p,m){for(p=new Map;m!==null;)m.key!==null?p.set(m.key,m):p.set(m.index,m),m=m.sibling;return p}function a(p,m){return p=Tr(p,m),p.index=0,p.sibling=null,p}function i(p,m,v){return p.index=v,e?(v=p.alternate,v!==null?(v=v.index,v<m?(p.flags|=2,m):v):(p.flags|=2,m)):(p.flags|=1048576,m)}function l(p){return e&&p.alternate===null&&(p.flags|=2),p}function u(p,m,v,j){return m===null||m.tag!==6?(m=Gl(v,p.mode,j),m.return=p,m):(m=a(m,v),m.return=p,m)}function d(p,m,v,j){var D=v.type;return D===ds?_(p,m,v.props.children,j,v.key):m!==null&&(m.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===yr&&lu(D)===m.type)?(j=a(m,v.props),j.ref=Ys(p,m,v),j.return=p,j):(j=Si(v.type,v.key,v.props,null,p.mode,j),j.ref=Ys(p,m,v),j.return=p,j)}function x(p,m,v,j){return m===null||m.tag!==4||m.stateNode.containerInfo!==v.containerInfo||m.stateNode.implementation!==v.implementation?(m=Ql(v,p.mode,j),m.return=p,m):(m=a(m,v.children||[]),m.return=p,m)}function _(p,m,v,j,D){return m===null||m.tag!==7?(m=qr(v,p.mode,j,D),m.return=p,m):(m=a(m,v),m.return=p,m)}function C(p,m,v){if(typeof m=="string"&&m!==""||typeof m=="number")return m=Gl(""+m,p.mode,v),m.return=p,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Ha:return v=Si(m.type,m.key,m.props,null,p.mode,v),v.ref=Ys(p,null,m),v.return=p,v;case cs:return m=Ql(m,p.mode,v),m.return=p,m;case yr:var j=m._init;return C(p,j(m._payload),v)}if(Zs(m)||Vs(m))return m=qr(m,p.mode,v,null),m.return=p,m;ti(p,m)}return null}function b(p,m,v,j){var D=m!==null?m.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return D!==null?null:u(p,m,""+v,j);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Ha:return v.key===D?d(p,m,v,j):null;case cs:return v.key===D?x(p,m,v,j):null;case yr:return D=v._init,b(p,m,D(v._payload),j)}if(Zs(v)||Vs(v))return D!==null?null:_(p,m,v,j,null);ti(p,v)}return null}function F(p,m,v,j,D){if(typeof j=="string"&&j!==""||typeof j=="number")return p=p.get(v)||null,u(m,p,""+j,D);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Ha:return p=p.get(j.key===null?v:j.key)||null,d(m,p,j,D);case cs:return p=p.get(j.key===null?v:j.key)||null,x(m,p,j,D);case yr:var k=j._init;return F(p,m,v,k(j._payload),D)}if(Zs(j)||Vs(j))return p=p.get(v)||null,_(m,p,j,D,null);ti(m,j)}return null}function y(p,m,v,j){for(var D=null,k=null,I=m,T=m=0,J=null;I!==null&&T<v.length;T++){I.index>T?(J=I,I=null):J=I.sibling;var se=b(p,I,v[T],j);if(se===null){I===null&&(I=J);break}e&&I&&se.alternate===null&&n(p,I),m=i(se,m,T),k===null?D=se:k.sibling=se,k=se,I=J}if(T===v.length)return t(p,I),kt&&Ur(p,T),D;if(I===null){for(;T<v.length;T++)I=C(p,v[T],j),I!==null&&(m=i(I,m,T),k===null?D=I:k.sibling=I,k=I);return kt&&Ur(p,T),D}for(I=s(p,I);T<v.length;T++)J=F(I,p,T,v[T],j),J!==null&&(e&&J.alternate!==null&&I.delete(J.key===null?T:J.key),m=i(J,m,T),k===null?D=J:k.sibling=J,k=J);return e&&I.forEach(function(R){return n(p,R)}),kt&&Ur(p,T),D}function S(p,m,v,j){var D=Vs(v);if(typeof D!="function")throw Error(xe(150));if(v=D.call(v),v==null)throw Error(xe(151));for(var k=D=null,I=m,T=m=0,J=null,se=v.next();I!==null&&!se.done;T++,se=v.next()){I.index>T?(J=I,I=null):J=I.sibling;var R=b(p,I,se.value,j);if(R===null){I===null&&(I=J);break}e&&I&&R.alternate===null&&n(p,I),m=i(R,m,T),k===null?D=R:k.sibling=R,k=R,I=J}if(se.done)return t(p,I),kt&&Ur(p,T),D;if(I===null){for(;!se.done;T++,se=v.next())se=C(p,se.value,j),se!==null&&(m=i(se,m,T),k===null?D=se:k.sibling=se,k=se);return kt&&Ur(p,T),D}for(I=s(p,I);!se.done;T++,se=v.next())se=F(I,p,T,se.value,j),se!==null&&(e&&se.alternate!==null&&I.delete(se.key===null?T:se.key),m=i(se,m,T),k===null?D=se:k.sibling=se,k=se);return e&&I.forEach(function(ae){return n(p,ae)}),kt&&Ur(p,T),D}function E(p,m,v,j){if(typeof v=="object"&&v!==null&&v.type===ds&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Ha:e:{for(var D=v.key,k=m;k!==null;){if(k.key===D){if(D=v.type,D===ds){if(k.tag===7){t(p,k.sibling),m=a(k,v.props.children),m.return=p,p=m;break e}}else if(k.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===yr&&lu(D)===k.type){t(p,k.sibling),m=a(k,v.props),m.ref=Ys(p,k,v),m.return=p,p=m;break e}t(p,k);break}else n(p,k);k=k.sibling}v.type===ds?(m=qr(v.props.children,p.mode,j,v.key),m.return=p,p=m):(j=Si(v.type,v.key,v.props,null,p.mode,j),j.ref=Ys(p,m,v),j.return=p,p=j)}return l(p);case cs:e:{for(k=v.key;m!==null;){if(m.key===k)if(m.tag===4&&m.stateNode.containerInfo===v.containerInfo&&m.stateNode.implementation===v.implementation){t(p,m.sibling),m=a(m,v.children||[]),m.return=p,p=m;break e}else{t(p,m);break}else n(p,m);m=m.sibling}m=Ql(v,p.mode,j),m.return=p,p=m}return l(p);case yr:return k=v._init,E(p,m,k(v._payload),j)}if(Zs(v))return y(p,m,v,j);if(Vs(v))return S(p,m,v,j);ti(p,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,m!==null&&m.tag===6?(t(p,m.sibling),m=a(m,v),m.return=p,p=m):(t(p,m),m=Gl(v,p.mode,j),m.return=p,p=m),l(p)):t(p,m)}return E}var Ts=wm(!0),km=wm(!1),Ri=Fr(null),zi=null,ys=null,Ic=null;function Dc(){Ic=ys=zi=null}function Tc(e){var n=Ri.current;St(Ri),e._currentValue=n}function Fo(e,n,t){for(;e!==null;){var s=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,s!==null&&(s.childLanes|=n)):s!==null&&(s.childLanes&n)!==n&&(s.childLanes|=n),e===t)break;e=e.return}}function Cs(e,n){zi=e,Ic=ys=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&n&&(gn=!0),e.firstContext=null)}function On(e){var n=e._currentValue;if(Ic!==e)if(e={context:e,memoizedValue:n,next:null},ys===null){if(zi===null)throw Error(xe(308));ys=e,zi.dependencies={lanes:0,firstContext:e}}else ys=ys.next=e;return n}var Br=null;function Pc(e){Br===null?Br=[e]:Br.push(e)}function Em(e,n,t,s){var a=n.interleaved;return a===null?(t.next=t,Pc(n)):(t.next=a.next,a.next=t),n.interleaved=t,ur(e,s)}function ur(e,n){e.lanes|=n;var t=e.alternate;for(t!==null&&(t.lanes|=n),t=e,e=e.return;e!==null;)e.childLanes|=n,t=e.alternate,t!==null&&(t.childLanes|=n),t=e,e=e.return;return t.tag===3?t.stateNode:null}var xr=!1;function Mc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Am(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function or(e,n){return{eventTime:e,lane:n,tag:0,payload:null,callback:null,next:null}}function Ar(e,n,t){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,ct&2){var a=s.pending;return a===null?n.next=n:(n.next=a.next,a.next=n),s.pending=n,ur(e,t)}return a=s.interleaved,a===null?(n.next=n,Pc(s)):(n.next=a.next,a.next=n),s.interleaved=n,ur(e,t)}function yi(e,n,t){if(n=n.updateQueue,n!==null&&(n=n.shared,(t&4194240)!==0)){var s=n.lanes;s&=e.pendingLanes,t|=s,n.lanes=t,xc(e,t)}}function ou(e,n){var t=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,t===s)){var a=null,i=null;if(t=t.firstBaseUpdate,t!==null){do{var l={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};i===null?a=i=l:i=i.next=l,t=t.next}while(t!==null);i===null?a=i=n:i=i.next=n}else a=i=n;t={baseState:s.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:s.shared,effects:s.effects},e.updateQueue=t;return}e=t.lastBaseUpdate,e===null?t.firstBaseUpdate=n:e.next=n,t.lastBaseUpdate=n}function Ui(e,n,t,s){var a=e.updateQueue;xr=!1;var i=a.firstBaseUpdate,l=a.lastBaseUpdate,u=a.shared.pending;if(u!==null){a.shared.pending=null;var d=u,x=d.next;d.next=null,l===null?i=x:l.next=x,l=d;var _=e.alternate;_!==null&&(_=_.updateQueue,u=_.lastBaseUpdate,u!==l&&(u===null?_.firstBaseUpdate=x:u.next=x,_.lastBaseUpdate=d))}if(i!==null){var C=a.baseState;l=0,_=x=d=null,u=i;do{var b=u.lane,F=u.eventTime;if((s&b)===b){_!==null&&(_=_.next={eventTime:F,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var y=e,S=u;switch(b=n,F=t,S.tag){case 1:if(y=S.payload,typeof y=="function"){C=y.call(F,C,b);break e}C=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=S.payload,b=typeof y=="function"?y.call(F,C,b):y,b==null)break e;C=Tt({},C,b);break e;case 2:xr=!0}}u.callback!==null&&u.lane!==0&&(e.flags|=64,b=a.effects,b===null?a.effects=[u]:b.push(u))}else F={eventTime:F,lane:b,tag:u.tag,payload:u.payload,callback:u.callback,next:null},_===null?(x=_=F,d=C):_=_.next=F,l|=b;if(u=u.next,u===null){if(u=a.shared.pending,u===null)break;b=u,u=b.next,b.next=null,a.lastBaseUpdate=b,a.shared.pending=null}}while(!0);if(_===null&&(d=C),a.baseState=d,a.firstBaseUpdate=x,a.lastBaseUpdate=_,n=a.shared.interleaved,n!==null){a=n;do l|=a.lane,a=a.next;while(a!==n)}else i===null&&(a.shared.lanes=0);Xr|=l,e.lanes=l,e.memoizedState=C}}function cu(e,n,t){if(e=n.effects,n.effects=null,e!==null)for(n=0;n<e.length;n++){var s=e[n],a=s.callback;if(a!==null){if(s.callback=null,s=t,typeof a!="function")throw Error(xe(191,a));a.call(s)}}}var Ra={},er=Fr(Ra),ba=Fr(Ra),Sa=Fr(Ra);function Kr(e){if(e===Ra)throw Error(xe(174));return e}function Oc(e,n){switch(_t(Sa,n),_t(ba,e),_t(er,Ra),e=n.nodeType,e){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:yo(null,"");break;default:e=e===8?n.parentNode:n,n=e.namespaceURI||null,e=e.tagName,n=yo(n,e)}St(er),_t(er,n)}function Ps(){St(er),St(ba),St(Sa)}function Im(e){Kr(Sa.current);var n=Kr(er.current),t=yo(n,e.type);n!==t&&(_t(ba,e),_t(er,t))}function $c(e){ba.current===e&&(St(er),St(ba))}var At=Fr(0);function Vi(e){for(var n=e;n!==null;){if(n.tag===13){var t=n.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if(n.flags&128)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Wl=[];function Lc(){for(var e=0;e<Wl.length;e++)Wl[e]._workInProgressVersionPrimary=null;Wl.length=0}var xi=pr.ReactCurrentDispatcher,Hl=pr.ReactCurrentBatchConfig,Jr=0,It=null,Kt=null,qt=null,Wi=!1,la=!1,Ca=0,Dv=0;function tn(){throw Error(xe(321))}function Fc(e,n){if(n===null)return!1;for(var t=0;t<n.length&&t<e.length;t++)if(!Hn(e[t],n[t]))return!1;return!0}function Rc(e,n,t,s,a,i){if(Jr=i,It=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,xi.current=e===null||e.memoizedState===null?Ov:$v,e=t(s,a),la){i=0;do{if(la=!1,Ca=0,25<=i)throw Error(xe(301));i+=1,qt=Kt=null,n.updateQueue=null,xi.current=Lv,e=t(s,a)}while(la)}if(xi.current=Hi,n=Kt!==null&&Kt.next!==null,Jr=0,qt=Kt=It=null,Wi=!1,n)throw Error(xe(300));return e}function zc(){var e=Ca!==0;return Ca=0,e}function Jn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qt===null?It.memoizedState=qt=e:qt=qt.next=e,qt}function $n(){if(Kt===null){var e=It.alternate;e=e!==null?e.memoizedState:null}else e=Kt.next;var n=qt===null?It.memoizedState:qt.next;if(n!==null)qt=n,Kt=e;else{if(e===null)throw Error(xe(310));Kt=e,e={memoizedState:Kt.memoizedState,baseState:Kt.baseState,baseQueue:Kt.baseQueue,queue:Kt.queue,next:null},qt===null?It.memoizedState=qt=e:qt=qt.next=e}return qt}function wa(e,n){return typeof n=="function"?n(e):n}function Bl(e){var n=$n(),t=n.queue;if(t===null)throw Error(xe(311));t.lastRenderedReducer=e;var s=Kt,a=s.baseQueue,i=t.pending;if(i!==null){if(a!==null){var l=a.next;a.next=i.next,i.next=l}s.baseQueue=a=i,t.pending=null}if(a!==null){i=a.next,s=s.baseState;var u=l=null,d=null,x=i;do{var _=x.lane;if((Jr&_)===_)d!==null&&(d=d.next={lane:0,action:x.action,hasEagerState:x.hasEagerState,eagerState:x.eagerState,next:null}),s=x.hasEagerState?x.eagerState:e(s,x.action);else{var C={lane:_,action:x.action,hasEagerState:x.hasEagerState,eagerState:x.eagerState,next:null};d===null?(u=d=C,l=s):d=d.next=C,It.lanes|=_,Xr|=_}x=x.next}while(x!==null&&x!==i);d===null?l=s:d.next=u,Hn(s,n.memoizedState)||(gn=!0),n.memoizedState=s,n.baseState=l,n.baseQueue=d,t.lastRenderedState=s}if(e=t.interleaved,e!==null){a=e;do i=a.lane,It.lanes|=i,Xr|=i,a=a.next;while(a!==e)}else a===null&&(t.lanes=0);return[n.memoizedState,t.dispatch]}function Kl(e){var n=$n(),t=n.queue;if(t===null)throw Error(xe(311));t.lastRenderedReducer=e;var s=t.dispatch,a=t.pending,i=n.memoizedState;if(a!==null){t.pending=null;var l=a=a.next;do i=e(i,l.action),l=l.next;while(l!==a);Hn(i,n.memoizedState)||(gn=!0),n.memoizedState=i,n.baseQueue===null&&(n.baseState=i),t.lastRenderedState=i}return[i,s]}function Dm(){}function Tm(e,n){var t=It,s=$n(),a=n(),i=!Hn(s.memoizedState,a);if(i&&(s.memoizedState=a,gn=!0),s=s.queue,Uc(Om.bind(null,t,s,e),[e]),s.getSnapshot!==n||i||qt!==null&&qt.memoizedState.tag&1){if(t.flags|=2048,ka(9,Mm.bind(null,t,s,a,n),void 0,null),Gt===null)throw Error(xe(349));Jr&30||Pm(t,n,a)}return a}function Pm(e,n,t){e.flags|=16384,e={getSnapshot:n,value:t},n=It.updateQueue,n===null?(n={lastEffect:null,stores:null},It.updateQueue=n,n.stores=[e]):(t=n.stores,t===null?n.stores=[e]:t.push(e))}function Mm(e,n,t,s){n.value=t,n.getSnapshot=s,$m(n)&&Lm(e)}function Om(e,n,t){return t(function(){$m(n)&&Lm(e)})}function $m(e){var n=e.getSnapshot;e=e.value;try{var t=n();return!Hn(e,t)}catch{return!0}}function Lm(e){var n=ur(e,1);n!==null&&Wn(n,e,1,-1)}function du(e){var n=Jn();return typeof e=="function"&&(e=e()),n.memoizedState=n.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wa,lastRenderedState:e},n.queue=e,e=e.dispatch=Mv.bind(null,It,e),[n.memoizedState,e]}function ka(e,n,t,s){return e={tag:e,create:n,destroy:t,deps:s,next:null},n=It.updateQueue,n===null?(n={lastEffect:null,stores:null},It.updateQueue=n,n.lastEffect=e.next=e):(t=n.lastEffect,t===null?n.lastEffect=e.next=e:(s=t.next,t.next=e,e.next=s,n.lastEffect=e)),e}function Fm(){return $n().memoizedState}function ji(e,n,t,s){var a=Jn();It.flags|=e,a.memoizedState=ka(1|n,t,void 0,s===void 0?null:s)}function ul(e,n,t,s){var a=$n();s=s===void 0?null:s;var i=void 0;if(Kt!==null){var l=Kt.memoizedState;if(i=l.destroy,s!==null&&Fc(s,l.deps)){a.memoizedState=ka(n,t,i,s);return}}It.flags|=e,a.memoizedState=ka(1|n,t,i,s)}function uu(e,n){return ji(8390656,8,e,n)}function Uc(e,n){return ul(2048,8,e,n)}function Rm(e,n){return ul(4,2,e,n)}function zm(e,n){return ul(4,4,e,n)}function Um(e,n){if(typeof n=="function")return e=e(),n(e),function(){n(null)};if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function Vm(e,n,t){return t=t!=null?t.concat([e]):null,ul(4,4,Um.bind(null,n,e),t)}function Vc(){}function Wm(e,n){var t=$n();n=n===void 0?null:n;var s=t.memoizedState;return s!==null&&n!==null&&Fc(n,s[1])?s[0]:(t.memoizedState=[e,n],e)}function Hm(e,n){var t=$n();n=n===void 0?null:n;var s=t.memoizedState;return s!==null&&n!==null&&Fc(n,s[1])?s[0]:(e=e(),t.memoizedState=[e,n],e)}function Bm(e,n,t){return Jr&21?(Hn(t,n)||(t=Qf(),It.lanes|=t,Xr|=t,e.baseState=!0),n):(e.baseState&&(e.baseState=!1,gn=!0),e.memoizedState=t)}function Tv(e,n){var t=gt;gt=t!==0&&4>t?t:4,e(!0);var s=Hl.transition;Hl.transition={};try{e(!1),n()}finally{gt=t,Hl.transition=s}}function Km(){return $n().memoizedState}function Pv(e,n,t){var s=Dr(e);if(t={lane:s,action:t,hasEagerState:!1,eagerState:null,next:null},Ym(e))qm(n,t);else if(t=Em(e,n,t,s),t!==null){var a=un();Wn(t,e,s,a),Gm(t,n,s)}}function Mv(e,n,t){var s=Dr(e),a={lane:s,action:t,hasEagerState:!1,eagerState:null,next:null};if(Ym(e))qm(n,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=n.lastRenderedReducer,i!==null))try{var l=n.lastRenderedState,u=i(l,t);if(a.hasEagerState=!0,a.eagerState=u,Hn(u,l)){var d=n.interleaved;d===null?(a.next=a,Pc(n)):(a.next=d.next,d.next=a),n.interleaved=a;return}}catch{}finally{}t=Em(e,n,a,s),t!==null&&(a=un(),Wn(t,e,s,a),Gm(t,n,s))}}function Ym(e){var n=e.alternate;return e===It||n!==null&&n===It}function qm(e,n){la=Wi=!0;var t=e.pending;t===null?n.next=n:(n.next=t.next,t.next=n),e.pending=n}function Gm(e,n,t){if(t&4194240){var s=n.lanes;s&=e.pendingLanes,t|=s,n.lanes=t,xc(e,t)}}var Hi={readContext:On,useCallback:tn,useContext:tn,useEffect:tn,useImperativeHandle:tn,useInsertionEffect:tn,useLayoutEffect:tn,useMemo:tn,useReducer:tn,useRef:tn,useState:tn,useDebugValue:tn,useDeferredValue:tn,useTransition:tn,useMutableSource:tn,useSyncExternalStore:tn,useId:tn,unstable_isNewReconciler:!1},Ov={readContext:On,useCallback:function(e,n){return Jn().memoizedState=[e,n===void 0?null:n],e},useContext:On,useEffect:uu,useImperativeHandle:function(e,n,t){return t=t!=null?t.concat([e]):null,ji(4194308,4,Um.bind(null,n,e),t)},useLayoutEffect:function(e,n){return ji(4194308,4,e,n)},useInsertionEffect:function(e,n){return ji(4,2,e,n)},useMemo:function(e,n){var t=Jn();return n=n===void 0?null:n,e=e(),t.memoizedState=[e,n],e},useReducer:function(e,n,t){var s=Jn();return n=t!==void 0?t(n):n,s.memoizedState=s.baseState=n,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},s.queue=e,e=e.dispatch=Pv.bind(null,It,e),[s.memoizedState,e]},useRef:function(e){var n=Jn();return e={current:e},n.memoizedState=e},useState:du,useDebugValue:Vc,useDeferredValue:function(e){return Jn().memoizedState=e},useTransition:function(){var e=du(!1),n=e[0];return e=Tv.bind(null,e[1]),Jn().memoizedState=e,[n,e]},useMutableSource:function(){},useSyncExternalStore:function(e,n,t){var s=It,a=Jn();if(kt){if(t===void 0)throw Error(xe(407));t=t()}else{if(t=n(),Gt===null)throw Error(xe(349));Jr&30||Pm(s,n,t)}a.memoizedState=t;var i={value:t,getSnapshot:n};return a.queue=i,uu(Om.bind(null,s,i,e),[e]),s.flags|=2048,ka(9,Mm.bind(null,s,i,t,n),void 0,null),t},useId:function(){var e=Jn(),n=Gt.identifierPrefix;if(kt){var t=lr,s=ir;t=(s&~(1<<32-Vn(s)-1)).toString(32)+t,n=":"+n+"R"+t,t=Ca++,0<t&&(n+="H"+t.toString(32)),n+=":"}else t=Dv++,n=":"+n+"r"+t.toString(32)+":";return e.memoizedState=n},unstable_isNewReconciler:!1},$v={readContext:On,useCallback:Wm,useContext:On,useEffect:Uc,useImperativeHandle:Vm,useInsertionEffect:Rm,useLayoutEffect:zm,useMemo:Hm,useReducer:Bl,useRef:Fm,useState:function(){return Bl(wa)},useDebugValue:Vc,useDeferredValue:function(e){var n=$n();return Bm(n,Kt.memoizedState,e)},useTransition:function(){var e=Bl(wa)[0],n=$n().memoizedState;return[e,n]},useMutableSource:Dm,useSyncExternalStore:Tm,useId:Km,unstable_isNewReconciler:!1},Lv={readContext:On,useCallback:Wm,useContext:On,useEffect:Uc,useImperativeHandle:Vm,useInsertionEffect:Rm,useLayoutEffect:zm,useMemo:Hm,useReducer:Kl,useRef:Fm,useState:function(){return Kl(wa)},useDebugValue:Vc,useDeferredValue:function(e){var n=$n();return Kt===null?n.memoizedState=e:Bm(n,Kt.memoizedState,e)},useTransition:function(){var e=Kl(wa)[0],n=$n().memoizedState;return[e,n]},useMutableSource:Dm,useSyncExternalStore:Tm,useId:Km,unstable_isNewReconciler:!1};function Rn(e,n){if(e&&e.defaultProps){n=Tt({},n),e=e.defaultProps;for(var t in e)n[t]===void 0&&(n[t]=e[t]);return n}return n}function Ro(e,n,t,s){n=e.memoizedState,t=t(s,n),t=t==null?n:Tt({},n,t),e.memoizedState=t,e.lanes===0&&(e.updateQueue.baseState=t)}var fl={isMounted:function(e){return(e=e._reactInternals)?rs(e)===e:!1},enqueueSetState:function(e,n,t){e=e._reactInternals;var s=un(),a=Dr(e),i=or(s,a);i.payload=n,t!=null&&(i.callback=t),n=Ar(e,i,a),n!==null&&(Wn(n,e,a,s),yi(n,e,a))},enqueueReplaceState:function(e,n,t){e=e._reactInternals;var s=un(),a=Dr(e),i=or(s,a);i.tag=1,i.payload=n,t!=null&&(i.callback=t),n=Ar(e,i,a),n!==null&&(Wn(n,e,a,s),yi(n,e,a))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var t=un(),s=Dr(e),a=or(t,s);a.tag=2,n!=null&&(a.callback=n),n=Ar(e,a,s),n!==null&&(Wn(n,e,s,t),yi(n,e,s))}};function fu(e,n,t,s,a,i,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,i,l):n.prototype&&n.prototype.isPureReactComponent?!xa(t,s)||!xa(a,i):!0}function Qm(e,n,t){var s=!1,a=Or,i=n.contextType;return typeof i=="object"&&i!==null?i=On(i):(a=yn(n)?Gr:ln.current,s=n.contextTypes,i=(s=s!=null)?Is(e,a):Or),n=new n(t,i),e.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=fl,e.stateNode=n,n._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),n}function mu(e,n,t,s){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(t,s),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(t,s),n.state!==e&&fl.enqueueReplaceState(n,n.state,null)}function zo(e,n,t,s){var a=e.stateNode;a.props=t,a.state=e.memoizedState,a.refs={},Mc(e);var i=n.contextType;typeof i=="object"&&i!==null?a.context=On(i):(i=yn(n)?Gr:ln.current,a.context=Is(e,i)),a.state=e.memoizedState,i=n.getDerivedStateFromProps,typeof i=="function"&&(Ro(e,n,i,t),a.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(n=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),n!==a.state&&fl.enqueueReplaceState(a,a.state,null),Ui(e,t,a,s),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Ms(e,n){try{var t="",s=n;do t+=ug(s),s=s.return;while(s);var a=t}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:n,stack:a,digest:null}}function Yl(e,n,t){return{value:e,source:null,stack:t??null,digest:n??null}}function Uo(e,n){try{console.error(n.value)}catch(t){setTimeout(function(){throw t})}}var Fv=typeof WeakMap=="function"?WeakMap:Map;function Jm(e,n,t){t=or(-1,t),t.tag=3,t.payload={element:null};var s=n.value;return t.callback=function(){Ki||(Ki=!0,Jo=s),Uo(e,n)},t}function Xm(e,n,t){t=or(-1,t),t.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var a=n.value;t.payload=function(){return s(a)},t.callback=function(){Uo(e,n)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(t.callback=function(){Uo(e,n),typeof s!="function"&&(Ir===null?Ir=new Set([this]):Ir.add(this));var l=n.stack;this.componentDidCatch(n.value,{componentStack:l!==null?l:""})}),t}function pu(e,n,t){var s=e.pingCache;if(s===null){s=e.pingCache=new Fv;var a=new Set;s.set(n,a)}else a=s.get(n),a===void 0&&(a=new Set,s.set(n,a));a.has(t)||(a.add(t),e=Xv.bind(null,e,n,t),n.then(e,e))}function hu(e){do{var n;if((n=e.tag===13)&&(n=e.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return e;e=e.return}while(e!==null);return null}function gu(e,n,t,s,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===n?e.flags|=65536:(e.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(n=or(-1,1),n.tag=2,Ar(t,n,1))),t.lanes|=1),e)}var Rv=pr.ReactCurrentOwner,gn=!1;function dn(e,n,t,s){n.child=e===null?km(n,null,t,s):Ts(n,e.child,t,s)}function vu(e,n,t,s,a){t=t.render;var i=n.ref;return Cs(n,a),s=Rc(e,n,t,s,i,a),t=zc(),e!==null&&!gn?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~a,fr(e,n,a)):(kt&&t&&kc(n),n.flags|=1,dn(e,n,s,a),n.child)}function yu(e,n,t,s,a){if(e===null){var i=t.type;return typeof i=="function"&&!Qc(i)&&i.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(n.tag=15,n.type=i,Zm(e,n,i,s,a)):(e=Si(t.type,null,s,n,n.mode,a),e.ref=n.ref,e.return=n,n.child=e)}if(i=e.child,!(e.lanes&a)){var l=i.memoizedProps;if(t=t.compare,t=t!==null?t:xa,t(l,s)&&e.ref===n.ref)return fr(e,n,a)}return n.flags|=1,e=Tr(i,s),e.ref=n.ref,e.return=n,n.child=e}function Zm(e,n,t,s,a){if(e!==null){var i=e.memoizedProps;if(xa(i,s)&&e.ref===n.ref)if(gn=!1,n.pendingProps=s=i,(e.lanes&a)!==0)e.flags&131072&&(gn=!0);else return n.lanes=e.lanes,fr(e,n,a)}return Vo(e,n,t,s,a)}function ep(e,n,t){var s=n.pendingProps,a=s.children,i=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(n.mode&1))n.memoizedState={baseLanes:0,cachePool:null,transitions:null},_t(js,Nn),Nn|=t;else{if(!(t&1073741824))return e=i!==null?i.baseLanes|t:t,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:e,cachePool:null,transitions:null},n.updateQueue=null,_t(js,Nn),Nn|=e,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=i!==null?i.baseLanes:t,_t(js,Nn),Nn|=s}else i!==null?(s=i.baseLanes|t,n.memoizedState=null):s=t,_t(js,Nn),Nn|=s;return dn(e,n,a,t),n.child}function tp(e,n){var t=n.ref;(e===null&&t!==null||e!==null&&e.ref!==t)&&(n.flags|=512,n.flags|=2097152)}function Vo(e,n,t,s,a){var i=yn(t)?Gr:ln.current;return i=Is(n,i),Cs(n,a),t=Rc(e,n,t,s,i,a),s=zc(),e!==null&&!gn?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~a,fr(e,n,a)):(kt&&s&&kc(n),n.flags|=1,dn(e,n,t,a),n.child)}function xu(e,n,t,s,a){if(yn(t)){var i=!0;$i(n)}else i=!1;if(Cs(n,a),n.stateNode===null)_i(e,n),Qm(n,t,s),zo(n,t,s,a),s=!0;else if(e===null){var l=n.stateNode,u=n.memoizedProps;l.props=u;var d=l.context,x=t.contextType;typeof x=="object"&&x!==null?x=On(x):(x=yn(t)?Gr:ln.current,x=Is(n,x));var _=t.getDerivedStateFromProps,C=typeof _=="function"||typeof l.getSnapshotBeforeUpdate=="function";C||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(u!==s||d!==x)&&mu(n,l,s,x),xr=!1;var b=n.memoizedState;l.state=b,Ui(n,s,l,a),d=n.memoizedState,u!==s||b!==d||vn.current||xr?(typeof _=="function"&&(Ro(n,t,_,s),d=n.memoizedState),(u=xr||fu(n,t,u,s,b,d,x))?(C||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(n.flags|=4194308)):(typeof l.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=s,n.memoizedState=d),l.props=s,l.state=d,l.context=x,s=u):(typeof l.componentDidMount=="function"&&(n.flags|=4194308),s=!1)}else{l=n.stateNode,Am(e,n),u=n.memoizedProps,x=n.type===n.elementType?u:Rn(n.type,u),l.props=x,C=n.pendingProps,b=l.context,d=t.contextType,typeof d=="object"&&d!==null?d=On(d):(d=yn(t)?Gr:ln.current,d=Is(n,d));var F=t.getDerivedStateFromProps;(_=typeof F=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(u!==C||b!==d)&&mu(n,l,s,d),xr=!1,b=n.memoizedState,l.state=b,Ui(n,s,l,a);var y=n.memoizedState;u!==C||b!==y||vn.current||xr?(typeof F=="function"&&(Ro(n,t,F,s),y=n.memoizedState),(x=xr||fu(n,t,x,s,b,y,d)||!1)?(_||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(s,y,d),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(s,y,d)),typeof l.componentDidUpdate=="function"&&(n.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof l.componentDidUpdate!="function"||u===e.memoizedProps&&b===e.memoizedState||(n.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&b===e.memoizedState||(n.flags|=1024),n.memoizedProps=s,n.memoizedState=y),l.props=s,l.state=y,l.context=d,s=x):(typeof l.componentDidUpdate!="function"||u===e.memoizedProps&&b===e.memoizedState||(n.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&b===e.memoizedState||(n.flags|=1024),s=!1)}return Wo(e,n,t,s,i,a)}function Wo(e,n,t,s,a,i){tp(e,n);var l=(n.flags&128)!==0;if(!s&&!l)return a&&su(n,t,!1),fr(e,n,i);s=n.stateNode,Rv.current=n;var u=l&&typeof t.getDerivedStateFromError!="function"?null:s.render();return n.flags|=1,e!==null&&l?(n.child=Ts(n,e.child,null,i),n.child=Ts(n,null,u,i)):dn(e,n,u,i),n.memoizedState=s.state,a&&su(n,t,!0),n.child}function np(e){var n=e.stateNode;n.pendingContext?ru(e,n.pendingContext,n.pendingContext!==n.context):n.context&&ru(e,n.context,!1),Oc(e,n.containerInfo)}function ju(e,n,t,s,a){return Ds(),Ac(a),n.flags|=256,dn(e,n,t,s),n.child}var Ho={dehydrated:null,treeContext:null,retryLane:0};function Bo(e){return{baseLanes:e,cachePool:null,transitions:null}}function rp(e,n,t){var s=n.pendingProps,a=At.current,i=!1,l=(n.flags&128)!==0,u;if((u=l)||(u=e!==null&&e.memoizedState===null?!1:(a&2)!==0),u?(i=!0,n.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),_t(At,a&1),e===null)return Lo(n),e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(n.mode&1?e.data==="$!"?n.lanes=8:n.lanes=1073741824:n.lanes=1,null):(l=s.children,e=s.fallback,i?(s=n.mode,i=n.child,l={mode:"hidden",children:l},!(s&1)&&i!==null?(i.childLanes=0,i.pendingProps=l):i=hl(l,s,0,null),e=qr(e,s,t,null),i.return=n,e.return=n,i.sibling=e,n.child=i,n.child.memoizedState=Bo(t),n.memoizedState=Ho,e):Wc(n,l));if(a=e.memoizedState,a!==null&&(u=a.dehydrated,u!==null))return zv(e,n,l,s,u,a,t);if(i){i=s.fallback,l=n.mode,a=e.child,u=a.sibling;var d={mode:"hidden",children:s.children};return!(l&1)&&n.child!==a?(s=n.child,s.childLanes=0,s.pendingProps=d,n.deletions=null):(s=Tr(a,d),s.subtreeFlags=a.subtreeFlags&14680064),u!==null?i=Tr(u,i):(i=qr(i,l,t,null),i.flags|=2),i.return=n,s.return=n,s.sibling=i,n.child=s,s=i,i=n.child,l=e.child.memoizedState,l=l===null?Bo(t):{baseLanes:l.baseLanes|t,cachePool:null,transitions:l.transitions},i.memoizedState=l,i.childLanes=e.childLanes&~t,n.memoizedState=Ho,s}return i=e.child,e=i.sibling,s=Tr(i,{mode:"visible",children:s.children}),!(n.mode&1)&&(s.lanes=t),s.return=n,s.sibling=null,e!==null&&(t=n.deletions,t===null?(n.deletions=[e],n.flags|=16):t.push(e)),n.child=s,n.memoizedState=null,s}function Wc(e,n){return n=hl({mode:"visible",children:n},e.mode,0,null),n.return=e,e.child=n}function ni(e,n,t,s){return s!==null&&Ac(s),Ts(n,e.child,null,t),e=Wc(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function zv(e,n,t,s,a,i,l){if(t)return n.flags&256?(n.flags&=-257,s=Yl(Error(xe(422))),ni(e,n,l,s)):n.memoizedState!==null?(n.child=e.child,n.flags|=128,null):(i=s.fallback,a=n.mode,s=hl({mode:"visible",children:s.children},a,0,null),i=qr(i,a,l,null),i.flags|=2,s.return=n,i.return=n,s.sibling=i,n.child=s,n.mode&1&&Ts(n,e.child,null,l),n.child.memoizedState=Bo(l),n.memoizedState=Ho,i);if(!(n.mode&1))return ni(e,n,l,null);if(a.data==="$!"){if(s=a.nextSibling&&a.nextSibling.dataset,s)var u=s.dgst;return s=u,i=Error(xe(419)),s=Yl(i,s,void 0),ni(e,n,l,s)}if(u=(l&e.childLanes)!==0,gn||u){if(s=Gt,s!==null){switch(l&-l){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(s.suspendedLanes|l)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,ur(e,a),Wn(s,e,a,-1))}return Gc(),s=Yl(Error(xe(421))),ni(e,n,l,s)}return a.data==="$?"?(n.flags|=128,n.child=e.child,n=Zv.bind(null,e),a._reactRetry=n,null):(e=i.treeContext,bn=Er(a.nextSibling),Sn=n,kt=!0,Un=null,e!==null&&(Dn[Tn++]=ir,Dn[Tn++]=lr,Dn[Tn++]=Qr,ir=e.id,lr=e.overflow,Qr=n),n=Wc(n,s.children),n.flags|=4096,n)}function _u(e,n,t){e.lanes|=n;var s=e.alternate;s!==null&&(s.lanes|=n),Fo(e.return,n,t)}function ql(e,n,t,s,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:s,tail:t,tailMode:a}:(i.isBackwards=n,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=t,i.tailMode=a)}function sp(e,n,t){var s=n.pendingProps,a=s.revealOrder,i=s.tail;if(dn(e,n,s.children,t),s=At.current,s&2)s=s&1|2,n.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&_u(e,t,n);else if(e.tag===19)_u(e,t,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(_t(At,s),!(n.mode&1))n.memoizedState=null;else switch(a){case"forwards":for(t=n.child,a=null;t!==null;)e=t.alternate,e!==null&&Vi(e)===null&&(a=t),t=t.sibling;t=a,t===null?(a=n.child,n.child=null):(a=t.sibling,t.sibling=null),ql(n,!1,a,t,i);break;case"backwards":for(t=null,a=n.child,n.child=null;a!==null;){if(e=a.alternate,e!==null&&Vi(e)===null){n.child=a;break}e=a.sibling,a.sibling=t,t=a,a=e}ql(n,!0,t,null,i);break;case"together":ql(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function _i(e,n){!(n.mode&1)&&e!==null&&(e.alternate=null,n.alternate=null,n.flags|=2)}function fr(e,n,t){if(e!==null&&(n.dependencies=e.dependencies),Xr|=n.lanes,!(t&n.childLanes))return null;if(e!==null&&n.child!==e.child)throw Error(xe(153));if(n.child!==null){for(e=n.child,t=Tr(e,e.pendingProps),n.child=t,t.return=n;e.sibling!==null;)e=e.sibling,t=t.sibling=Tr(e,e.pendingProps),t.return=n;t.sibling=null}return n.child}function Uv(e,n,t){switch(n.tag){case 3:np(n),Ds();break;case 5:Im(n);break;case 1:yn(n.type)&&$i(n);break;case 4:Oc(n,n.stateNode.containerInfo);break;case 10:var s=n.type._context,a=n.memoizedProps.value;_t(Ri,s._currentValue),s._currentValue=a;break;case 13:if(s=n.memoizedState,s!==null)return s.dehydrated!==null?(_t(At,At.current&1),n.flags|=128,null):t&n.child.childLanes?rp(e,n,t):(_t(At,At.current&1),e=fr(e,n,t),e!==null?e.sibling:null);_t(At,At.current&1);break;case 19:if(s=(t&n.childLanes)!==0,e.flags&128){if(s)return sp(e,n,t);n.flags|=128}if(a=n.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),_t(At,At.current),s)break;return null;case 22:case 23:return n.lanes=0,ep(e,n,t)}return fr(e,n,t)}var ap,Ko,ip,lp;ap=function(e,n){for(var t=n.child;t!==null;){if(t.tag===5||t.tag===6)e.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break;for(;t.sibling===null;){if(t.return===null||t.return===n)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};Ko=function(){};ip=function(e,n,t,s){var a=e.memoizedProps;if(a!==s){e=n.stateNode,Kr(er.current);var i=null;switch(t){case"input":a=po(e,a),s=po(e,s),i=[];break;case"select":a=Tt({},a,{value:void 0}),s=Tt({},s,{value:void 0}),i=[];break;case"textarea":a=vo(e,a),s=vo(e,s),i=[];break;default:typeof a.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=Mi)}xo(t,s);var l;t=null;for(x in a)if(!s.hasOwnProperty(x)&&a.hasOwnProperty(x)&&a[x]!=null)if(x==="style"){var u=a[x];for(l in u)u.hasOwnProperty(l)&&(t||(t={}),t[l]="")}else x!=="dangerouslySetInnerHTML"&&x!=="children"&&x!=="suppressContentEditableWarning"&&x!=="suppressHydrationWarning"&&x!=="autoFocus"&&(fa.hasOwnProperty(x)?i||(i=[]):(i=i||[]).push(x,null));for(x in s){var d=s[x];if(u=a!=null?a[x]:void 0,s.hasOwnProperty(x)&&d!==u&&(d!=null||u!=null))if(x==="style")if(u){for(l in u)!u.hasOwnProperty(l)||d&&d.hasOwnProperty(l)||(t||(t={}),t[l]="");for(l in d)d.hasOwnProperty(l)&&u[l]!==d[l]&&(t||(t={}),t[l]=d[l])}else t||(i||(i=[]),i.push(x,t)),t=d;else x==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,u=u?u.__html:void 0,d!=null&&u!==d&&(i=i||[]).push(x,d)):x==="children"?typeof d!="string"&&typeof d!="number"||(i=i||[]).push(x,""+d):x!=="suppressContentEditableWarning"&&x!=="suppressHydrationWarning"&&(fa.hasOwnProperty(x)?(d!=null&&x==="onScroll"&&bt("scroll",e),i||u===d||(i=[])):(i=i||[]).push(x,d))}t&&(i=i||[]).push("style",t);var x=i;(n.updateQueue=x)&&(n.flags|=4)}};lp=function(e,n,t,s){t!==s&&(n.flags|=4)};function qs(e,n){if(!kt)switch(e.tailMode){case"hidden":n=e.tail;for(var t=null;n!==null;)n.alternate!==null&&(t=n),n=n.sibling;t===null?e.tail=null:t.sibling=null;break;case"collapsed":t=e.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function nn(e){var n=e.alternate!==null&&e.alternate.child===e.child,t=0,s=0;if(n)for(var a=e.child;a!==null;)t|=a.lanes|a.childLanes,s|=a.subtreeFlags&14680064,s|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)t|=a.lanes|a.childLanes,s|=a.subtreeFlags,s|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=s,e.childLanes=t,n}function Vv(e,n,t){var s=n.pendingProps;switch(Ec(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return nn(n),null;case 1:return yn(n.type)&&Oi(),nn(n),null;case 3:return s=n.stateNode,Ps(),St(vn),St(ln),Lc(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(ei(n)?n.flags|=4:e===null||e.memoizedState.isDehydrated&&!(n.flags&256)||(n.flags|=1024,Un!==null&&(ec(Un),Un=null))),Ko(e,n),nn(n),null;case 5:$c(n);var a=Kr(Sa.current);if(t=n.type,e!==null&&n.stateNode!=null)ip(e,n,t,s,a),e.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!s){if(n.stateNode===null)throw Error(xe(166));return nn(n),null}if(e=Kr(er.current),ei(n)){s=n.stateNode,t=n.type;var i=n.memoizedProps;switch(s[Xn]=n,s[Na]=i,e=(n.mode&1)!==0,t){case"dialog":bt("cancel",s),bt("close",s);break;case"iframe":case"object":case"embed":bt("load",s);break;case"video":case"audio":for(a=0;a<ta.length;a++)bt(ta[a],s);break;case"source":bt("error",s);break;case"img":case"image":case"link":bt("error",s),bt("load",s);break;case"details":bt("toggle",s);break;case"input":Id(s,i),bt("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!i.multiple},bt("invalid",s);break;case"textarea":Td(s,i),bt("invalid",s)}xo(t,i),a=null;for(var l in i)if(i.hasOwnProperty(l)){var u=i[l];l==="children"?typeof u=="string"?s.textContent!==u&&(i.suppressHydrationWarning!==!0&&Za(s.textContent,u,e),a=["children",u]):typeof u=="number"&&s.textContent!==""+u&&(i.suppressHydrationWarning!==!0&&Za(s.textContent,u,e),a=["children",""+u]):fa.hasOwnProperty(l)&&u!=null&&l==="onScroll"&&bt("scroll",s)}switch(t){case"input":Ba(s),Dd(s,i,!0);break;case"textarea":Ba(s),Pd(s);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(s.onclick=Mi)}s=a,n.updateQueue=s,s!==null&&(n.flags|=4)}else{l=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Of(t)),e==="http://www.w3.org/1999/xhtml"?t==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=l.createElement(t,{is:s.is}):(e=l.createElement(t),t==="select"&&(l=e,s.multiple?l.multiple=!0:s.size&&(l.size=s.size))):e=l.createElementNS(e,t),e[Xn]=n,e[Na]=s,ap(e,n,!1,!1),n.stateNode=e;e:{switch(l=jo(t,s),t){case"dialog":bt("cancel",e),bt("close",e),a=s;break;case"iframe":case"object":case"embed":bt("load",e),a=s;break;case"video":case"audio":for(a=0;a<ta.length;a++)bt(ta[a],e);a=s;break;case"source":bt("error",e),a=s;break;case"img":case"image":case"link":bt("error",e),bt("load",e),a=s;break;case"details":bt("toggle",e),a=s;break;case"input":Id(e,s),a=po(e,s),bt("invalid",e);break;case"option":a=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},a=Tt({},s,{value:void 0}),bt("invalid",e);break;case"textarea":Td(e,s),a=vo(e,s),bt("invalid",e);break;default:a=s}xo(t,a),u=a;for(i in u)if(u.hasOwnProperty(i)){var d=u[i];i==="style"?Ff(e,d):i==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&$f(e,d)):i==="children"?typeof d=="string"?(t!=="textarea"||d!=="")&&ma(e,d):typeof d=="number"&&ma(e,""+d):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(fa.hasOwnProperty(i)?d!=null&&i==="onScroll"&&bt("scroll",e):d!=null&&mc(e,i,d,l))}switch(t){case"input":Ba(e),Dd(e,s,!1);break;case"textarea":Ba(e),Pd(e);break;case"option":s.value!=null&&e.setAttribute("value",""+Mr(s.value));break;case"select":e.multiple=!!s.multiple,i=s.value,i!=null?_s(e,!!s.multiple,i,!1):s.defaultValue!=null&&_s(e,!!s.multiple,s.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Mi)}switch(t){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return nn(n),null;case 6:if(e&&n.stateNode!=null)lp(e,n,e.memoizedProps,s);else{if(typeof s!="string"&&n.stateNode===null)throw Error(xe(166));if(t=Kr(Sa.current),Kr(er.current),ei(n)){if(s=n.stateNode,t=n.memoizedProps,s[Xn]=n,(i=s.nodeValue!==t)&&(e=Sn,e!==null))switch(e.tag){case 3:Za(s.nodeValue,t,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Za(s.nodeValue,t,(e.mode&1)!==0)}i&&(n.flags|=4)}else s=(t.nodeType===9?t:t.ownerDocument).createTextNode(s),s[Xn]=n,n.stateNode=s}return nn(n),null;case 13:if(St(At),s=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(kt&&bn!==null&&n.mode&1&&!(n.flags&128))Cm(),Ds(),n.flags|=98560,i=!1;else if(i=ei(n),s!==null&&s.dehydrated!==null){if(e===null){if(!i)throw Error(xe(318));if(i=n.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(xe(317));i[Xn]=n}else Ds(),!(n.flags&128)&&(n.memoizedState=null),n.flags|=4;nn(n),i=!1}else Un!==null&&(ec(Un),Un=null),i=!0;if(!i)return n.flags&65536?n:null}return n.flags&128?(n.lanes=t,n):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(n.child.flags|=8192,n.mode&1&&(e===null||At.current&1?Yt===0&&(Yt=3):Gc())),n.updateQueue!==null&&(n.flags|=4),nn(n),null);case 4:return Ps(),Ko(e,n),e===null&&ja(n.stateNode.containerInfo),nn(n),null;case 10:return Tc(n.type._context),nn(n),null;case 17:return yn(n.type)&&Oi(),nn(n),null;case 19:if(St(At),i=n.memoizedState,i===null)return nn(n),null;if(s=(n.flags&128)!==0,l=i.rendering,l===null)if(s)qs(i,!1);else{if(Yt!==0||e!==null&&e.flags&128)for(e=n.child;e!==null;){if(l=Vi(e),l!==null){for(n.flags|=128,qs(i,!1),s=l.updateQueue,s!==null&&(n.updateQueue=s,n.flags|=4),n.subtreeFlags=0,s=t,t=n.child;t!==null;)i=t,e=s,i.flags&=14680066,l=i.alternate,l===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t=t.sibling;return _t(At,At.current&1|2),n.child}e=e.sibling}i.tail!==null&&zt()>Os&&(n.flags|=128,s=!0,qs(i,!1),n.lanes=4194304)}else{if(!s)if(e=Vi(l),e!==null){if(n.flags|=128,s=!0,t=e.updateQueue,t!==null&&(n.updateQueue=t,n.flags|=4),qs(i,!0),i.tail===null&&i.tailMode==="hidden"&&!l.alternate&&!kt)return nn(n),null}else 2*zt()-i.renderingStartTime>Os&&t!==1073741824&&(n.flags|=128,s=!0,qs(i,!1),n.lanes=4194304);i.isBackwards?(l.sibling=n.child,n.child=l):(t=i.last,t!==null?t.sibling=l:n.child=l,i.last=l)}return i.tail!==null?(n=i.tail,i.rendering=n,i.tail=n.sibling,i.renderingStartTime=zt(),n.sibling=null,t=At.current,_t(At,s?t&1|2:t&1),n):(nn(n),null);case 22:case 23:return qc(),s=n.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(n.flags|=8192),s&&n.mode&1?Nn&1073741824&&(nn(n),n.subtreeFlags&6&&(n.flags|=8192)):nn(n),null;case 24:return null;case 25:return null}throw Error(xe(156,n.tag))}function Wv(e,n){switch(Ec(n),n.tag){case 1:return yn(n.type)&&Oi(),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return Ps(),St(vn),St(ln),Lc(),e=n.flags,e&65536&&!(e&128)?(n.flags=e&-65537|128,n):null;case 5:return $c(n),null;case 13:if(St(At),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(xe(340));Ds()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return St(At),null;case 4:return Ps(),null;case 10:return Tc(n.type._context),null;case 22:case 23:return qc(),null;case 24:return null;default:return null}}var ri=!1,sn=!1,Hv=typeof WeakSet=="function"?WeakSet:Set,Me=null;function xs(e,n){var t=e.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(s){Ot(e,n,s)}else t.current=null}function Yo(e,n,t){try{t()}catch(s){Ot(e,n,s)}}var Nu=!1;function Bv(e,n){if(Io=Di,e=fm(),wc(e)){if("selectionStart"in e)var t={start:e.selectionStart,end:e.selectionEnd};else e:{t=(t=e.ownerDocument)&&t.defaultView||window;var s=t.getSelection&&t.getSelection();if(s&&s.rangeCount!==0){t=s.anchorNode;var a=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{t.nodeType,i.nodeType}catch{t=null;break e}var l=0,u=-1,d=-1,x=0,_=0,C=e,b=null;t:for(;;){for(var F;C!==t||a!==0&&C.nodeType!==3||(u=l+a),C!==i||s!==0&&C.nodeType!==3||(d=l+s),C.nodeType===3&&(l+=C.nodeValue.length),(F=C.firstChild)!==null;)b=C,C=F;for(;;){if(C===e)break t;if(b===t&&++x===a&&(u=l),b===i&&++_===s&&(d=l),(F=C.nextSibling)!==null)break;C=b,b=C.parentNode}C=F}t=u===-1||d===-1?null:{start:u,end:d}}else t=null}t=t||{start:0,end:0}}else t=null;for(Do={focusedElem:e,selectionRange:t},Di=!1,Me=n;Me!==null;)if(n=Me,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,Me=e;else for(;Me!==null;){n=Me;try{var y=n.alternate;if(n.flags&1024)switch(n.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var S=y.memoizedProps,E=y.memoizedState,p=n.stateNode,m=p.getSnapshotBeforeUpdate(n.elementType===n.type?S:Rn(n.type,S),E);p.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var v=n.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(xe(163))}}catch(j){Ot(n,n.return,j)}if(e=n.sibling,e!==null){e.return=n.return,Me=e;break}Me=n.return}return y=Nu,Nu=!1,y}function oa(e,n,t){var s=n.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&Yo(n,t,i)}a=a.next}while(a!==s)}}function ml(e,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var t=n=n.next;do{if((t.tag&e)===e){var s=t.create;t.destroy=s()}t=t.next}while(t!==n)}}function qo(e){var n=e.ref;if(n!==null){var t=e.stateNode;switch(e.tag){case 5:e=t;break;default:e=t}typeof n=="function"?n(e):n.current=e}}function op(e){var n=e.alternate;n!==null&&(e.alternate=null,op(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&(delete n[Xn],delete n[Na],delete n[Mo],delete n[kv],delete n[Ev])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function cp(e){return e.tag===5||e.tag===3||e.tag===4}function bu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||cp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Go(e,n,t){var s=e.tag;if(s===5||s===6)e=e.stateNode,n?t.nodeType===8?t.parentNode.insertBefore(e,n):t.insertBefore(e,n):(t.nodeType===8?(n=t.parentNode,n.insertBefore(e,t)):(n=t,n.appendChild(e)),t=t._reactRootContainer,t!=null||n.onclick!==null||(n.onclick=Mi));else if(s!==4&&(e=e.child,e!==null))for(Go(e,n,t),e=e.sibling;e!==null;)Go(e,n,t),e=e.sibling}function Qo(e,n,t){var s=e.tag;if(s===5||s===6)e=e.stateNode,n?t.insertBefore(e,n):t.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(Qo(e,n,t),e=e.sibling;e!==null;)Qo(e,n,t),e=e.sibling}var Qt=null,zn=!1;function gr(e,n,t){for(t=t.child;t!==null;)dp(e,n,t),t=t.sibling}function dp(e,n,t){if(Zn&&typeof Zn.onCommitFiberUnmount=="function")try{Zn.onCommitFiberUnmount(al,t)}catch{}switch(t.tag){case 5:sn||xs(t,n);case 6:var s=Qt,a=zn;Qt=null,gr(e,n,t),Qt=s,zn=a,Qt!==null&&(zn?(e=Qt,t=t.stateNode,e.nodeType===8?e.parentNode.removeChild(t):e.removeChild(t)):Qt.removeChild(t.stateNode));break;case 18:Qt!==null&&(zn?(e=Qt,t=t.stateNode,e.nodeType===8?Ul(e.parentNode,t):e.nodeType===1&&Ul(e,t),va(e)):Ul(Qt,t.stateNode));break;case 4:s=Qt,a=zn,Qt=t.stateNode.containerInfo,zn=!0,gr(e,n,t),Qt=s,zn=a;break;case 0:case 11:case 14:case 15:if(!sn&&(s=t.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){a=s=s.next;do{var i=a,l=i.destroy;i=i.tag,l!==void 0&&(i&2||i&4)&&Yo(t,n,l),a=a.next}while(a!==s)}gr(e,n,t);break;case 1:if(!sn&&(xs(t,n),s=t.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=t.memoizedProps,s.state=t.memoizedState,s.componentWillUnmount()}catch(u){Ot(t,n,u)}gr(e,n,t);break;case 21:gr(e,n,t);break;case 22:t.mode&1?(sn=(s=sn)||t.memoizedState!==null,gr(e,n,t),sn=s):gr(e,n,t);break;default:gr(e,n,t)}}function Su(e){var n=e.updateQueue;if(n!==null){e.updateQueue=null;var t=e.stateNode;t===null&&(t=e.stateNode=new Hv),n.forEach(function(s){var a=ey.bind(null,e,s);t.has(s)||(t.add(s),s.then(a,a))})}}function Fn(e,n){var t=n.deletions;if(t!==null)for(var s=0;s<t.length;s++){var a=t[s];try{var i=e,l=n,u=l;e:for(;u!==null;){switch(u.tag){case 5:Qt=u.stateNode,zn=!1;break e;case 3:Qt=u.stateNode.containerInfo,zn=!0;break e;case 4:Qt=u.stateNode.containerInfo,zn=!0;break e}u=u.return}if(Qt===null)throw Error(xe(160));dp(i,l,a),Qt=null,zn=!1;var d=a.alternate;d!==null&&(d.return=null),a.return=null}catch(x){Ot(a,n,x)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)up(n,e),n=n.sibling}function up(e,n){var t=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Fn(n,e),Gn(e),s&4){try{oa(3,e,e.return),ml(3,e)}catch(S){Ot(e,e.return,S)}try{oa(5,e,e.return)}catch(S){Ot(e,e.return,S)}}break;case 1:Fn(n,e),Gn(e),s&512&&t!==null&&xs(t,t.return);break;case 5:if(Fn(n,e),Gn(e),s&512&&t!==null&&xs(t,t.return),e.flags&32){var a=e.stateNode;try{ma(a,"")}catch(S){Ot(e,e.return,S)}}if(s&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,l=t!==null?t.memoizedProps:i,u=e.type,d=e.updateQueue;if(e.updateQueue=null,d!==null)try{u==="input"&&i.type==="radio"&&i.name!=null&&Pf(a,i),jo(u,l);var x=jo(u,i);for(l=0;l<d.length;l+=2){var _=d[l],C=d[l+1];_==="style"?Ff(a,C):_==="dangerouslySetInnerHTML"?$f(a,C):_==="children"?ma(a,C):mc(a,_,C,x)}switch(u){case"input":ho(a,i);break;case"textarea":Mf(a,i);break;case"select":var b=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var F=i.value;F!=null?_s(a,!!i.multiple,F,!1):b!==!!i.multiple&&(i.defaultValue!=null?_s(a,!!i.multiple,i.defaultValue,!0):_s(a,!!i.multiple,i.multiple?[]:"",!1))}a[Na]=i}catch(S){Ot(e,e.return,S)}}break;case 6:if(Fn(n,e),Gn(e),s&4){if(e.stateNode===null)throw Error(xe(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(S){Ot(e,e.return,S)}}break;case 3:if(Fn(n,e),Gn(e),s&4&&t!==null&&t.memoizedState.isDehydrated)try{va(n.containerInfo)}catch(S){Ot(e,e.return,S)}break;case 4:Fn(n,e),Gn(e);break;case 13:Fn(n,e),Gn(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(Kc=zt())),s&4&&Su(e);break;case 22:if(_=t!==null&&t.memoizedState!==null,e.mode&1?(sn=(x=sn)||_,Fn(n,e),sn=x):Fn(n,e),Gn(e),s&8192){if(x=e.memoizedState!==null,(e.stateNode.isHidden=x)&&!_&&e.mode&1)for(Me=e,_=e.child;_!==null;){for(C=Me=_;Me!==null;){switch(b=Me,F=b.child,b.tag){case 0:case 11:case 14:case 15:oa(4,b,b.return);break;case 1:xs(b,b.return);var y=b.stateNode;if(typeof y.componentWillUnmount=="function"){s=b,t=b.return;try{n=s,y.props=n.memoizedProps,y.state=n.memoizedState,y.componentWillUnmount()}catch(S){Ot(s,t,S)}}break;case 5:xs(b,b.return);break;case 22:if(b.memoizedState!==null){wu(C);continue}}F!==null?(F.return=b,Me=F):wu(C)}_=_.sibling}e:for(_=null,C=e;;){if(C.tag===5){if(_===null){_=C;try{a=C.stateNode,x?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(u=C.stateNode,d=C.memoizedProps.style,l=d!=null&&d.hasOwnProperty("display")?d.display:null,u.style.display=Lf("display",l))}catch(S){Ot(e,e.return,S)}}}else if(C.tag===6){if(_===null)try{C.stateNode.nodeValue=x?"":C.memoizedProps}catch(S){Ot(e,e.return,S)}}else if((C.tag!==22&&C.tag!==23||C.memoizedState===null||C===e)&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===e)break e;for(;C.sibling===null;){if(C.return===null||C.return===e)break e;_===C&&(_=null),C=C.return}_===C&&(_=null),C.sibling.return=C.return,C=C.sibling}}break;case 19:Fn(n,e),Gn(e),s&4&&Su(e);break;case 21:break;default:Fn(n,e),Gn(e)}}function Gn(e){var n=e.flags;if(n&2){try{e:{for(var t=e.return;t!==null;){if(cp(t)){var s=t;break e}t=t.return}throw Error(xe(160))}switch(s.tag){case 5:var a=s.stateNode;s.flags&32&&(ma(a,""),s.flags&=-33);var i=bu(e);Qo(e,i,a);break;case 3:case 4:var l=s.stateNode.containerInfo,u=bu(e);Go(e,u,l);break;default:throw Error(xe(161))}}catch(d){Ot(e,e.return,d)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function Kv(e,n,t){Me=e,fp(e)}function fp(e,n,t){for(var s=(e.mode&1)!==0;Me!==null;){var a=Me,i=a.child;if(a.tag===22&&s){var l=a.memoizedState!==null||ri;if(!l){var u=a.alternate,d=u!==null&&u.memoizedState!==null||sn;u=ri;var x=sn;if(ri=l,(sn=d)&&!x)for(Me=a;Me!==null;)l=Me,d=l.child,l.tag===22&&l.memoizedState!==null?ku(a):d!==null?(d.return=l,Me=d):ku(a);for(;i!==null;)Me=i,fp(i),i=i.sibling;Me=a,ri=u,sn=x}Cu(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,Me=i):Cu(e)}}function Cu(e){for(;Me!==null;){var n=Me;if(n.flags&8772){var t=n.alternate;try{if(n.flags&8772)switch(n.tag){case 0:case 11:case 15:sn||ml(5,n);break;case 1:var s=n.stateNode;if(n.flags&4&&!sn)if(t===null)s.componentDidMount();else{var a=n.elementType===n.type?t.memoizedProps:Rn(n.type,t.memoizedProps);s.componentDidUpdate(a,t.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var i=n.updateQueue;i!==null&&cu(n,i,s);break;case 3:var l=n.updateQueue;if(l!==null){if(t=null,n.child!==null)switch(n.child.tag){case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}cu(n,l,t)}break;case 5:var u=n.stateNode;if(t===null&&n.flags&4){t=u;var d=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&t.focus();break;case"img":d.src&&(t.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var x=n.alternate;if(x!==null){var _=x.memoizedState;if(_!==null){var C=_.dehydrated;C!==null&&va(C)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(xe(163))}sn||n.flags&512&&qo(n)}catch(b){Ot(n,n.return,b)}}if(n===e){Me=null;break}if(t=n.sibling,t!==null){t.return=n.return,Me=t;break}Me=n.return}}function wu(e){for(;Me!==null;){var n=Me;if(n===e){Me=null;break}var t=n.sibling;if(t!==null){t.return=n.return,Me=t;break}Me=n.return}}function ku(e){for(;Me!==null;){var n=Me;try{switch(n.tag){case 0:case 11:case 15:var t=n.return;try{ml(4,n)}catch(d){Ot(n,t,d)}break;case 1:var s=n.stateNode;if(typeof s.componentDidMount=="function"){var a=n.return;try{s.componentDidMount()}catch(d){Ot(n,a,d)}}var i=n.return;try{qo(n)}catch(d){Ot(n,i,d)}break;case 5:var l=n.return;try{qo(n)}catch(d){Ot(n,l,d)}}}catch(d){Ot(n,n.return,d)}if(n===e){Me=null;break}var u=n.sibling;if(u!==null){u.return=n.return,Me=u;break}Me=n.return}}var Yv=Math.ceil,Bi=pr.ReactCurrentDispatcher,Hc=pr.ReactCurrentOwner,Mn=pr.ReactCurrentBatchConfig,ct=0,Gt=null,Ht=null,Jt=0,Nn=0,js=Fr(0),Yt=0,Ea=null,Xr=0,pl=0,Bc=0,ca=null,hn=null,Kc=0,Os=1/0,sr=null,Ki=!1,Jo=null,Ir=null,si=!1,br=null,Yi=0,da=0,Xo=null,Ni=-1,bi=0;function un(){return ct&6?zt():Ni!==-1?Ni:Ni=zt()}function Dr(e){return e.mode&1?ct&2&&Jt!==0?Jt&-Jt:Iv.transition!==null?(bi===0&&(bi=Qf()),bi):(e=gt,e!==0||(e=window.event,e=e===void 0?16:rm(e.type)),e):1}function Wn(e,n,t,s){if(50<da)throw da=0,Xo=null,Error(xe(185));$a(e,t,s),(!(ct&2)||e!==Gt)&&(e===Gt&&(!(ct&2)&&(pl|=t),Yt===4&&_r(e,Jt)),xn(e,s),t===1&&ct===0&&!(n.mode&1)&&(Os=zt()+500,dl&&Rr()))}function xn(e,n){var t=e.callbackNode;Ig(e,n);var s=Ii(e,e===Gt?Jt:0);if(s===0)t!==null&&$d(t),e.callbackNode=null,e.callbackPriority=0;else if(n=s&-s,e.callbackPriority!==n){if(t!=null&&$d(t),n===1)e.tag===0?Av(Eu.bind(null,e)):Nm(Eu.bind(null,e)),Cv(function(){!(ct&6)&&Rr()}),t=null;else{switch(Jf(s)){case 1:t=yc;break;case 4:t=qf;break;case 16:t=Ai;break;case 536870912:t=Gf;break;default:t=Ai}t=jp(t,mp.bind(null,e))}e.callbackPriority=n,e.callbackNode=t}}function mp(e,n){if(Ni=-1,bi=0,ct&6)throw Error(xe(327));var t=e.callbackNode;if(ws()&&e.callbackNode!==t)return null;var s=Ii(e,e===Gt?Jt:0);if(s===0)return null;if(s&30||s&e.expiredLanes||n)n=qi(e,s);else{n=s;var a=ct;ct|=2;var i=hp();(Gt!==e||Jt!==n)&&(sr=null,Os=zt()+500,Yr(e,n));do try{Qv();break}catch(u){pp(e,u)}while(!0);Dc(),Bi.current=i,ct=a,Ht!==null?n=0:(Gt=null,Jt=0,n=Yt)}if(n!==0){if(n===2&&(a=Co(e),a!==0&&(s=a,n=Zo(e,a))),n===1)throw t=Ea,Yr(e,0),_r(e,s),xn(e,zt()),t;if(n===6)_r(e,s);else{if(a=e.current.alternate,!(s&30)&&!qv(a)&&(n=qi(e,s),n===2&&(i=Co(e),i!==0&&(s=i,n=Zo(e,i))),n===1))throw t=Ea,Yr(e,0),_r(e,s),xn(e,zt()),t;switch(e.finishedWork=a,e.finishedLanes=s,n){case 0:case 1:throw Error(xe(345));case 2:Vr(e,hn,sr);break;case 3:if(_r(e,s),(s&130023424)===s&&(n=Kc+500-zt(),10<n)){if(Ii(e,0)!==0)break;if(a=e.suspendedLanes,(a&s)!==s){un(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Po(Vr.bind(null,e,hn,sr),n);break}Vr(e,hn,sr);break;case 4:if(_r(e,s),(s&4194240)===s)break;for(n=e.eventTimes,a=-1;0<s;){var l=31-Vn(s);i=1<<l,l=n[l],l>a&&(a=l),s&=~i}if(s=a,s=zt()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*Yv(s/1960))-s,10<s){e.timeoutHandle=Po(Vr.bind(null,e,hn,sr),s);break}Vr(e,hn,sr);break;case 5:Vr(e,hn,sr);break;default:throw Error(xe(329))}}}return xn(e,zt()),e.callbackNode===t?mp.bind(null,e):null}function Zo(e,n){var t=ca;return e.current.memoizedState.isDehydrated&&(Yr(e,n).flags|=256),e=qi(e,n),e!==2&&(n=hn,hn=t,n!==null&&ec(n)),e}function ec(e){hn===null?hn=e:hn.push.apply(hn,e)}function qv(e){for(var n=e;;){if(n.flags&16384){var t=n.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var s=0;s<t.length;s++){var a=t[s],i=a.getSnapshot;a=a.value;try{if(!Hn(i(),a))return!1}catch{return!1}}}if(t=n.child,n.subtreeFlags&16384&&t!==null)t.return=n,n=t;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function _r(e,n){for(n&=~Bc,n&=~pl,e.suspendedLanes|=n,e.pingedLanes&=~n,e=e.expirationTimes;0<n;){var t=31-Vn(n),s=1<<t;e[t]=-1,n&=~s}}function Eu(e){if(ct&6)throw Error(xe(327));ws();var n=Ii(e,0);if(!(n&1))return xn(e,zt()),null;var t=qi(e,n);if(e.tag!==0&&t===2){var s=Co(e);s!==0&&(n=s,t=Zo(e,s))}if(t===1)throw t=Ea,Yr(e,0),_r(e,n),xn(e,zt()),t;if(t===6)throw Error(xe(345));return e.finishedWork=e.current.alternate,e.finishedLanes=n,Vr(e,hn,sr),xn(e,zt()),null}function Yc(e,n){var t=ct;ct|=1;try{return e(n)}finally{ct=t,ct===0&&(Os=zt()+500,dl&&Rr())}}function Zr(e){br!==null&&br.tag===0&&!(ct&6)&&ws();var n=ct;ct|=1;var t=Mn.transition,s=gt;try{if(Mn.transition=null,gt=1,e)return e()}finally{gt=s,Mn.transition=t,ct=n,!(ct&6)&&Rr()}}function qc(){Nn=js.current,St(js)}function Yr(e,n){e.finishedWork=null,e.finishedLanes=0;var t=e.timeoutHandle;if(t!==-1&&(e.timeoutHandle=-1,Sv(t)),Ht!==null)for(t=Ht.return;t!==null;){var s=t;switch(Ec(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&Oi();break;case 3:Ps(),St(vn),St(ln),Lc();break;case 5:$c(s);break;case 4:Ps();break;case 13:St(At);break;case 19:St(At);break;case 10:Tc(s.type._context);break;case 22:case 23:qc()}t=t.return}if(Gt=e,Ht=e=Tr(e.current,null),Jt=Nn=n,Yt=0,Ea=null,Bc=pl=Xr=0,hn=ca=null,Br!==null){for(n=0;n<Br.length;n++)if(t=Br[n],s=t.interleaved,s!==null){t.interleaved=null;var a=s.next,i=t.pending;if(i!==null){var l=i.next;i.next=a,s.next=l}t.pending=s}Br=null}return e}function pp(e,n){do{var t=Ht;try{if(Dc(),xi.current=Hi,Wi){for(var s=It.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}Wi=!1}if(Jr=0,qt=Kt=It=null,la=!1,Ca=0,Hc.current=null,t===null||t.return===null){Yt=1,Ea=n,Ht=null;break}e:{var i=e,l=t.return,u=t,d=n;if(n=Jt,u.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var x=d,_=u,C=_.tag;if(!(_.mode&1)&&(C===0||C===11||C===15)){var b=_.alternate;b?(_.updateQueue=b.updateQueue,_.memoizedState=b.memoizedState,_.lanes=b.lanes):(_.updateQueue=null,_.memoizedState=null)}var F=hu(l);if(F!==null){F.flags&=-257,gu(F,l,u,i,n),F.mode&1&&pu(i,x,n),n=F,d=x;var y=n.updateQueue;if(y===null){var S=new Set;S.add(d),n.updateQueue=S}else y.add(d);break e}else{if(!(n&1)){pu(i,x,n),Gc();break e}d=Error(xe(426))}}else if(kt&&u.mode&1){var E=hu(l);if(E!==null){!(E.flags&65536)&&(E.flags|=256),gu(E,l,u,i,n),Ac(Ms(d,u));break e}}i=d=Ms(d,u),Yt!==4&&(Yt=2),ca===null?ca=[i]:ca.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,n&=-n,i.lanes|=n;var p=Jm(i,d,n);ou(i,p);break e;case 1:u=d;var m=i.type,v=i.stateNode;if(!(i.flags&128)&&(typeof m.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Ir===null||!Ir.has(v)))){i.flags|=65536,n&=-n,i.lanes|=n;var j=Xm(i,u,n);ou(i,j);break e}}i=i.return}while(i!==null)}vp(t)}catch(D){n=D,Ht===t&&t!==null&&(Ht=t=t.return);continue}break}while(!0)}function hp(){var e=Bi.current;return Bi.current=Hi,e===null?Hi:e}function Gc(){(Yt===0||Yt===3||Yt===2)&&(Yt=4),Gt===null||!(Xr&268435455)&&!(pl&268435455)||_r(Gt,Jt)}function qi(e,n){var t=ct;ct|=2;var s=hp();(Gt!==e||Jt!==n)&&(sr=null,Yr(e,n));do try{Gv();break}catch(a){pp(e,a)}while(!0);if(Dc(),ct=t,Bi.current=s,Ht!==null)throw Error(xe(261));return Gt=null,Jt=0,Yt}function Gv(){for(;Ht!==null;)gp(Ht)}function Qv(){for(;Ht!==null&&!_g();)gp(Ht)}function gp(e){var n=xp(e.alternate,e,Nn);e.memoizedProps=e.pendingProps,n===null?vp(e):Ht=n,Hc.current=null}function vp(e){var n=e;do{var t=n.alternate;if(e=n.return,n.flags&32768){if(t=Wv(t,n),t!==null){t.flags&=32767,Ht=t;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Yt=6,Ht=null;return}}else if(t=Vv(t,n,Nn),t!==null){Ht=t;return}if(n=n.sibling,n!==null){Ht=n;return}Ht=n=e}while(n!==null);Yt===0&&(Yt=5)}function Vr(e,n,t){var s=gt,a=Mn.transition;try{Mn.transition=null,gt=1,Jv(e,n,t,s)}finally{Mn.transition=a,gt=s}return null}function Jv(e,n,t,s){do ws();while(br!==null);if(ct&6)throw Error(xe(327));t=e.finishedWork;var a=e.finishedLanes;if(t===null)return null;if(e.finishedWork=null,e.finishedLanes=0,t===e.current)throw Error(xe(177));e.callbackNode=null,e.callbackPriority=0;var i=t.lanes|t.childLanes;if(Dg(e,i),e===Gt&&(Ht=Gt=null,Jt=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||si||(si=!0,jp(Ai,function(){return ws(),null})),i=(t.flags&15990)!==0,t.subtreeFlags&15990||i){i=Mn.transition,Mn.transition=null;var l=gt;gt=1;var u=ct;ct|=4,Hc.current=null,Bv(e,t),up(t,e),vv(Do),Di=!!Io,Do=Io=null,e.current=t,Kv(t),Ng(),ct=u,gt=l,Mn.transition=i}else e.current=t;if(si&&(si=!1,br=e,Yi=a),i=e.pendingLanes,i===0&&(Ir=null),Cg(t.stateNode),xn(e,zt()),n!==null)for(s=e.onRecoverableError,t=0;t<n.length;t++)a=n[t],s(a.value,{componentStack:a.stack,digest:a.digest});if(Ki)throw Ki=!1,e=Jo,Jo=null,e;return Yi&1&&e.tag!==0&&ws(),i=e.pendingLanes,i&1?e===Xo?da++:(da=0,Xo=e):da=0,Rr(),null}function ws(){if(br!==null){var e=Jf(Yi),n=Mn.transition,t=gt;try{if(Mn.transition=null,gt=16>e?16:e,br===null)var s=!1;else{if(e=br,br=null,Yi=0,ct&6)throw Error(xe(331));var a=ct;for(ct|=4,Me=e.current;Me!==null;){var i=Me,l=i.child;if(Me.flags&16){var u=i.deletions;if(u!==null){for(var d=0;d<u.length;d++){var x=u[d];for(Me=x;Me!==null;){var _=Me;switch(_.tag){case 0:case 11:case 15:oa(8,_,i)}var C=_.child;if(C!==null)C.return=_,Me=C;else for(;Me!==null;){_=Me;var b=_.sibling,F=_.return;if(op(_),_===x){Me=null;break}if(b!==null){b.return=F,Me=b;break}Me=F}}}var y=i.alternate;if(y!==null){var S=y.child;if(S!==null){y.child=null;do{var E=S.sibling;S.sibling=null,S=E}while(S!==null)}}Me=i}}if(i.subtreeFlags&2064&&l!==null)l.return=i,Me=l;else e:for(;Me!==null;){if(i=Me,i.flags&2048)switch(i.tag){case 0:case 11:case 15:oa(9,i,i.return)}var p=i.sibling;if(p!==null){p.return=i.return,Me=p;break e}Me=i.return}}var m=e.current;for(Me=m;Me!==null;){l=Me;var v=l.child;if(l.subtreeFlags&2064&&v!==null)v.return=l,Me=v;else e:for(l=m;Me!==null;){if(u=Me,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:ml(9,u)}}catch(D){Ot(u,u.return,D)}if(u===l){Me=null;break e}var j=u.sibling;if(j!==null){j.return=u.return,Me=j;break e}Me=u.return}}if(ct=a,Rr(),Zn&&typeof Zn.onPostCommitFiberRoot=="function")try{Zn.onPostCommitFiberRoot(al,e)}catch{}s=!0}return s}finally{gt=t,Mn.transition=n}}return!1}function Au(e,n,t){n=Ms(t,n),n=Jm(e,n,1),e=Ar(e,n,1),n=un(),e!==null&&($a(e,1,n),xn(e,n))}function Ot(e,n,t){if(e.tag===3)Au(e,e,t);else for(;n!==null;){if(n.tag===3){Au(n,e,t);break}else if(n.tag===1){var s=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Ir===null||!Ir.has(s))){e=Ms(t,e),e=Xm(n,e,1),n=Ar(n,e,1),e=un(),n!==null&&($a(n,1,e),xn(n,e));break}}n=n.return}}function Xv(e,n,t){var s=e.pingCache;s!==null&&s.delete(n),n=un(),e.pingedLanes|=e.suspendedLanes&t,Gt===e&&(Jt&t)===t&&(Yt===4||Yt===3&&(Jt&130023424)===Jt&&500>zt()-Kc?Yr(e,0):Bc|=t),xn(e,n)}function yp(e,n){n===0&&(e.mode&1?(n=qa,qa<<=1,!(qa&130023424)&&(qa=4194304)):n=1);var t=un();e=ur(e,n),e!==null&&($a(e,n,t),xn(e,t))}function Zv(e){var n=e.memoizedState,t=0;n!==null&&(t=n.retryLane),yp(e,t)}function ey(e,n){var t=0;switch(e.tag){case 13:var s=e.stateNode,a=e.memoizedState;a!==null&&(t=a.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(xe(314))}s!==null&&s.delete(n),yp(e,t)}var xp;xp=function(e,n,t){if(e!==null)if(e.memoizedProps!==n.pendingProps||vn.current)gn=!0;else{if(!(e.lanes&t)&&!(n.flags&128))return gn=!1,Uv(e,n,t);gn=!!(e.flags&131072)}else gn=!1,kt&&n.flags&1048576&&bm(n,Fi,n.index);switch(n.lanes=0,n.tag){case 2:var s=n.type;_i(e,n),e=n.pendingProps;var a=Is(n,ln.current);Cs(n,t),a=Rc(null,n,s,e,a,t);var i=zc();return n.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,yn(s)?(i=!0,$i(n)):i=!1,n.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Mc(n),a.updater=fl,n.stateNode=a,a._reactInternals=n,zo(n,s,e,t),n=Wo(null,n,s,!0,i,t)):(n.tag=0,kt&&i&&kc(n),dn(null,n,a,t),n=n.child),n;case 16:s=n.elementType;e:{switch(_i(e,n),e=n.pendingProps,a=s._init,s=a(s._payload),n.type=s,a=n.tag=ny(s),e=Rn(s,e),a){case 0:n=Vo(null,n,s,e,t);break e;case 1:n=xu(null,n,s,e,t);break e;case 11:n=vu(null,n,s,e,t);break e;case 14:n=yu(null,n,s,Rn(s.type,e),t);break e}throw Error(xe(306,s,""))}return n;case 0:return s=n.type,a=n.pendingProps,a=n.elementType===s?a:Rn(s,a),Vo(e,n,s,a,t);case 1:return s=n.type,a=n.pendingProps,a=n.elementType===s?a:Rn(s,a),xu(e,n,s,a,t);case 3:e:{if(np(n),e===null)throw Error(xe(387));s=n.pendingProps,i=n.memoizedState,a=i.element,Am(e,n),Ui(n,s,null,t);var l=n.memoizedState;if(s=l.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},n.updateQueue.baseState=i,n.memoizedState=i,n.flags&256){a=Ms(Error(xe(423)),n),n=ju(e,n,s,t,a);break e}else if(s!==a){a=Ms(Error(xe(424)),n),n=ju(e,n,s,t,a);break e}else for(bn=Er(n.stateNode.containerInfo.firstChild),Sn=n,kt=!0,Un=null,t=km(n,null,s,t),n.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Ds(),s===a){n=fr(e,n,t);break e}dn(e,n,s,t)}n=n.child}return n;case 5:return Im(n),e===null&&Lo(n),s=n.type,a=n.pendingProps,i=e!==null?e.memoizedProps:null,l=a.children,To(s,a)?l=null:i!==null&&To(s,i)&&(n.flags|=32),tp(e,n),dn(e,n,l,t),n.child;case 6:return e===null&&Lo(n),null;case 13:return rp(e,n,t);case 4:return Oc(n,n.stateNode.containerInfo),s=n.pendingProps,e===null?n.child=Ts(n,null,s,t):dn(e,n,s,t),n.child;case 11:return s=n.type,a=n.pendingProps,a=n.elementType===s?a:Rn(s,a),vu(e,n,s,a,t);case 7:return dn(e,n,n.pendingProps,t),n.child;case 8:return dn(e,n,n.pendingProps.children,t),n.child;case 12:return dn(e,n,n.pendingProps.children,t),n.child;case 10:e:{if(s=n.type._context,a=n.pendingProps,i=n.memoizedProps,l=a.value,_t(Ri,s._currentValue),s._currentValue=l,i!==null)if(Hn(i.value,l)){if(i.children===a.children&&!vn.current){n=fr(e,n,t);break e}}else for(i=n.child,i!==null&&(i.return=n);i!==null;){var u=i.dependencies;if(u!==null){l=i.child;for(var d=u.firstContext;d!==null;){if(d.context===s){if(i.tag===1){d=or(-1,t&-t),d.tag=2;var x=i.updateQueue;if(x!==null){x=x.shared;var _=x.pending;_===null?d.next=d:(d.next=_.next,_.next=d),x.pending=d}}i.lanes|=t,d=i.alternate,d!==null&&(d.lanes|=t),Fo(i.return,t,n),u.lanes|=t;break}d=d.next}}else if(i.tag===10)l=i.type===n.type?null:i.child;else if(i.tag===18){if(l=i.return,l===null)throw Error(xe(341));l.lanes|=t,u=l.alternate,u!==null&&(u.lanes|=t),Fo(l,t,n),l=i.sibling}else l=i.child;if(l!==null)l.return=i;else for(l=i;l!==null;){if(l===n){l=null;break}if(i=l.sibling,i!==null){i.return=l.return,l=i;break}l=l.return}i=l}dn(e,n,a.children,t),n=n.child}return n;case 9:return a=n.type,s=n.pendingProps.children,Cs(n,t),a=On(a),s=s(a),n.flags|=1,dn(e,n,s,t),n.child;case 14:return s=n.type,a=Rn(s,n.pendingProps),a=Rn(s.type,a),yu(e,n,s,a,t);case 15:return Zm(e,n,n.type,n.pendingProps,t);case 17:return s=n.type,a=n.pendingProps,a=n.elementType===s?a:Rn(s,a),_i(e,n),n.tag=1,yn(s)?(e=!0,$i(n)):e=!1,Cs(n,t),Qm(n,s,a),zo(n,s,a,t),Wo(null,n,s,!0,e,t);case 19:return sp(e,n,t);case 22:return ep(e,n,t)}throw Error(xe(156,n.tag))};function jp(e,n){return Yf(e,n)}function ty(e,n,t,s){this.tag=e,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pn(e,n,t,s){return new ty(e,n,t,s)}function Qc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ny(e){if(typeof e=="function")return Qc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===hc)return 11;if(e===gc)return 14}return 2}function Tr(e,n){var t=e.alternate;return t===null?(t=Pn(e.tag,n,e.key,e.mode),t.elementType=e.elementType,t.type=e.type,t.stateNode=e.stateNode,t.alternate=e,e.alternate=t):(t.pendingProps=n,t.type=e.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=e.flags&14680064,t.childLanes=e.childLanes,t.lanes=e.lanes,t.child=e.child,t.memoizedProps=e.memoizedProps,t.memoizedState=e.memoizedState,t.updateQueue=e.updateQueue,n=e.dependencies,t.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},t.sibling=e.sibling,t.index=e.index,t.ref=e.ref,t}function Si(e,n,t,s,a,i){var l=2;if(s=e,typeof e=="function")Qc(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case ds:return qr(t.children,a,i,n);case pc:l=8,a|=8;break;case co:return e=Pn(12,t,n,a|2),e.elementType=co,e.lanes=i,e;case uo:return e=Pn(13,t,n,a),e.elementType=uo,e.lanes=i,e;case fo:return e=Pn(19,t,n,a),e.elementType=fo,e.lanes=i,e;case If:return hl(t,a,i,n);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Ef:l=10;break e;case Af:l=9;break e;case hc:l=11;break e;case gc:l=14;break e;case yr:l=16,s=null;break e}throw Error(xe(130,e==null?e:typeof e,""))}return n=Pn(l,t,n,a),n.elementType=e,n.type=s,n.lanes=i,n}function qr(e,n,t,s){return e=Pn(7,e,s,n),e.lanes=t,e}function hl(e,n,t,s){return e=Pn(22,e,s,n),e.elementType=If,e.lanes=t,e.stateNode={isHidden:!1},e}function Gl(e,n,t){return e=Pn(6,e,null,n),e.lanes=t,e}function Ql(e,n,t){return n=Pn(4,e.children!==null?e.children:[],e.key,n),n.lanes=t,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}function ry(e,n,t,s,a){this.tag=n,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Il(0),this.expirationTimes=Il(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Il(0),this.identifierPrefix=s,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Jc(e,n,t,s,a,i,l,u,d){return e=new ry(e,n,t,u,d),n===1?(n=1,i===!0&&(n|=8)):n=0,i=Pn(3,null,null,n),e.current=i,i.stateNode=e,i.memoizedState={element:s,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},Mc(i),e}function sy(e,n,t){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:cs,key:s==null?null:""+s,children:e,containerInfo:n,implementation:t}}function _p(e){if(!e)return Or;e=e._reactInternals;e:{if(rs(e)!==e||e.tag!==1)throw Error(xe(170));var n=e;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(yn(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error(xe(171))}if(e.tag===1){var t=e.type;if(yn(t))return _m(e,t,n)}return n}function Np(e,n,t,s,a,i,l,u,d){return e=Jc(t,s,!0,e,a,i,l,u,d),e.context=_p(null),t=e.current,s=un(),a=Dr(t),i=or(s,a),i.callback=n??null,Ar(t,i,a),e.current.lanes=a,$a(e,a,s),xn(e,s),e}function gl(e,n,t,s){var a=n.current,i=un(),l=Dr(a);return t=_p(t),n.context===null?n.context=t:n.pendingContext=t,n=or(i,l),n.payload={element:e},s=s===void 0?null:s,s!==null&&(n.callback=s),e=Ar(a,n,l),e!==null&&(Wn(e,a,l,i),yi(e,a,l)),l}function Gi(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Iu(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var t=e.retryLane;e.retryLane=t!==0&&t<n?t:n}}function Xc(e,n){Iu(e,n),(e=e.alternate)&&Iu(e,n)}function ay(){return null}var bp=typeof reportError=="function"?reportError:function(e){console.error(e)};function Zc(e){this._internalRoot=e}vl.prototype.render=Zc.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(xe(409));gl(e,n,null,null)};vl.prototype.unmount=Zc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;Zr(function(){gl(null,e,null,null)}),n[dr]=null}};function vl(e){this._internalRoot=e}vl.prototype.unstable_scheduleHydration=function(e){if(e){var n=em();e={blockedOn:null,target:e,priority:n};for(var t=0;t<jr.length&&n!==0&&n<jr[t].priority;t++);jr.splice(t,0,e),t===0&&nm(e)}};function ed(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function yl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Du(){}function iy(e,n,t,s,a){if(a){if(typeof s=="function"){var i=s;s=function(){var x=Gi(l);i.call(x)}}var l=Np(n,s,e,0,null,!1,!1,"",Du);return e._reactRootContainer=l,e[dr]=l.current,ja(e.nodeType===8?e.parentNode:e),Zr(),l}for(;a=e.lastChild;)e.removeChild(a);if(typeof s=="function"){var u=s;s=function(){var x=Gi(d);u.call(x)}}var d=Jc(e,0,!1,null,null,!1,!1,"",Du);return e._reactRootContainer=d,e[dr]=d.current,ja(e.nodeType===8?e.parentNode:e),Zr(function(){gl(n,d,t,s)}),d}function xl(e,n,t,s,a){var i=t._reactRootContainer;if(i){var l=i;if(typeof a=="function"){var u=a;a=function(){var d=Gi(l);u.call(d)}}gl(n,l,e,a)}else l=iy(t,n,e,a,s);return Gi(l)}Xf=function(e){switch(e.tag){case 3:var n=e.stateNode;if(n.current.memoizedState.isDehydrated){var t=ea(n.pendingLanes);t!==0&&(xc(n,t|1),xn(n,zt()),!(ct&6)&&(Os=zt()+500,Rr()))}break;case 13:Zr(function(){var s=ur(e,1);if(s!==null){var a=un();Wn(s,e,1,a)}}),Xc(e,1)}};jc=function(e){if(e.tag===13){var n=ur(e,134217728);if(n!==null){var t=un();Wn(n,e,134217728,t)}Xc(e,134217728)}};Zf=function(e){if(e.tag===13){var n=Dr(e),t=ur(e,n);if(t!==null){var s=un();Wn(t,e,n,s)}Xc(e,n)}};em=function(){return gt};tm=function(e,n){var t=gt;try{return gt=e,n()}finally{gt=t}};No=function(e,n,t){switch(n){case"input":if(ho(e,t),n=t.name,t.type==="radio"&&n!=null){for(t=e;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<t.length;n++){var s=t[n];if(s!==e&&s.form===e.form){var a=cl(s);if(!a)throw Error(xe(90));Tf(s),ho(s,a)}}}break;case"textarea":Mf(e,t);break;case"select":n=t.value,n!=null&&_s(e,!!t.multiple,n,!1)}};Uf=Yc;Vf=Zr;var ly={usingClientEntryPoint:!1,Events:[Fa,ps,cl,Rf,zf,Yc]},Gs={findFiberByHostInstance:Hr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},oy={bundleType:Gs.bundleType,version:Gs.version,rendererPackageName:Gs.rendererPackageName,rendererConfig:Gs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:pr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Bf(e),e===null?null:e.stateNode},findFiberByHostInstance:Gs.findFiberByHostInstance||ay,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ai=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ai.isDisabled&&ai.supportsFiber)try{al=ai.inject(oy),Zn=ai}catch{}}wn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ly;wn.createPortal=function(e,n){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ed(n))throw Error(xe(200));return sy(e,n,null,t)};wn.createRoot=function(e,n){if(!ed(e))throw Error(xe(299));var t=!1,s="",a=bp;return n!=null&&(n.unstable_strictMode===!0&&(t=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),n=Jc(e,1,!1,null,null,t,!1,s,a),e[dr]=n.current,ja(e.nodeType===8?e.parentNode:e),new Zc(n)};wn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(xe(188)):(e=Object.keys(e).join(","),Error(xe(268,e)));return e=Bf(n),e=e===null?null:e.stateNode,e};wn.flushSync=function(e){return Zr(e)};wn.hydrate=function(e,n,t){if(!yl(n))throw Error(xe(200));return xl(null,e,n,!0,t)};wn.hydrateRoot=function(e,n,t){if(!ed(e))throw Error(xe(405));var s=t!=null&&t.hydratedSources||null,a=!1,i="",l=bp;if(t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(l=t.onRecoverableError)),n=Np(n,null,e,1,t??null,a,!1,i,l),e[dr]=n.current,ja(e),s)for(e=0;e<s.length;e++)t=s[e],a=t._getVersion,a=a(t._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[t,a]:n.mutableSourceEagerHydrationData.push(t,a);return new vl(n)};wn.render=function(e,n,t){if(!yl(n))throw Error(xe(200));return xl(null,e,n,!1,t)};wn.unmountComponentAtNode=function(e){if(!yl(e))throw Error(xe(40));return e._reactRootContainer?(Zr(function(){xl(null,null,e,!1,function(){e._reactRootContainer=null,e[dr]=null})}),!0):!1};wn.unstable_batchedUpdates=Yc;wn.unstable_renderSubtreeIntoContainer=function(e,n,t,s){if(!yl(t))throw Error(xe(200));if(e==null||e._reactInternals===void 0)throw Error(xe(38));return xl(e,n,t,!1,s)};wn.version="18.3.1-next-f1338f8080-20240426";function Sp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Sp)}catch(e){console.error(e)}}Sp(),Sf.exports=wn;var Qi=Sf.exports,Tu=Qi;lo.createRoot=Tu.createRoot,lo.hydrateRoot=Tu.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Aa(){return Aa=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Aa.apply(this,arguments)}var Sr;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Sr||(Sr={}));const Pu="popstate";function cy(e){e===void 0&&(e={});function n(s,a){let{pathname:i,search:l,hash:u}=s.location;return tc("",{pathname:i,search:l,hash:u},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(s,a){return typeof a=="string"?a:Ji(a)}return uy(n,t,null,e)}function Dt(e,n){if(e===!1||e===null||typeof e>"u")throw new Error(n)}function td(e,n){if(!e){typeof console<"u"&&console.warn(n);try{throw new Error(n)}catch{}}}function dy(){return Math.random().toString(36).substr(2,8)}function Mu(e,n){return{usr:e.state,key:e.key,idx:n}}function tc(e,n,t,s){return t===void 0&&(t=null),Aa({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof n=="string"?zs(n):n,{state:t,key:n&&n.key||s||dy()})}function Ji(e){let{pathname:n="/",search:t="",hash:s=""}=e;return t&&t!=="?"&&(n+=t.charAt(0)==="?"?t:"?"+t),s&&s!=="#"&&(n+=s.charAt(0)==="#"?s:"#"+s),n}function zs(e){let n={};if(e){let t=e.indexOf("#");t>=0&&(n.hash=e.substr(t),e=e.substr(0,t));let s=e.indexOf("?");s>=0&&(n.search=e.substr(s),e=e.substr(0,s)),e&&(n.pathname=e)}return n}function uy(e,n,t,s){s===void 0&&(s={});let{window:a=document.defaultView,v5Compat:i=!1}=s,l=a.history,u=Sr.Pop,d=null,x=_();x==null&&(x=0,l.replaceState(Aa({},l.state,{idx:x}),""));function _(){return(l.state||{idx:null}).idx}function C(){u=Sr.Pop;let E=_(),p=E==null?null:E-x;x=E,d&&d({action:u,location:S.location,delta:p})}function b(E,p){u=Sr.Push;let m=tc(S.location,E,p);x=_()+1;let v=Mu(m,x),j=S.createHref(m);try{l.pushState(v,"",j)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;a.location.assign(j)}i&&d&&d({action:u,location:S.location,delta:1})}function F(E,p){u=Sr.Replace;let m=tc(S.location,E,p);x=_();let v=Mu(m,x),j=S.createHref(m);l.replaceState(v,"",j),i&&d&&d({action:u,location:S.location,delta:0})}function y(E){let p=a.location.origin!=="null"?a.location.origin:a.location.href,m=typeof E=="string"?E:Ji(E);return m=m.replace(/ $/,"%20"),Dt(p,"No window.location.(origin|href) available to create URL for href: "+m),new URL(m,p)}let S={get action(){return u},get location(){return e(a,l)},listen(E){if(d)throw new Error("A history only accepts one active listener");return a.addEventListener(Pu,C),d=E,()=>{a.removeEventListener(Pu,C),d=null}},createHref(E){return n(a,E)},createURL:y,encodeLocation(E){let p=y(E);return{pathname:p.pathname,search:p.search,hash:p.hash}},push:b,replace:F,go(E){return l.go(E)}};return S}var Ou;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Ou||(Ou={}));function fy(e,n,t){return t===void 0&&(t="/"),my(e,n,t)}function my(e,n,t,s){let a=typeof n=="string"?zs(n):n,i=$s(a.pathname||"/",t);if(i==null)return null;let l=Cp(e);py(l);let u=null;for(let d=0;u==null&&d<l.length;++d){let x=Cy(i);u=by(l[d],x)}return u}function Cp(e,n,t,s){n===void 0&&(n=[]),t===void 0&&(t=[]),s===void 0&&(s="");let a=(i,l,u)=>{let d={relativePath:u===void 0?i.path||"":u,caseSensitive:i.caseSensitive===!0,childrenIndex:l,route:i};d.relativePath.startsWith("/")&&(Dt(d.relativePath.startsWith(s),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(s.length));let x=Pr([s,d.relativePath]),_=t.concat(d);i.children&&i.children.length>0&&(Dt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+x+'".')),Cp(i.children,n,_,x)),!(i.path==null&&!i.index)&&n.push({path:x,score:_y(x,i.index),routesMeta:_})};return e.forEach((i,l)=>{var u;if(i.path===""||!((u=i.path)!=null&&u.includes("?")))a(i,l);else for(let d of wp(i.path))a(i,l,d)}),n}function wp(e){let n=e.split("/");if(n.length===0)return[];let[t,...s]=n,a=t.endsWith("?"),i=t.replace(/\?$/,"");if(s.length===0)return a?[i,""]:[i];let l=wp(s.join("/")),u=[];return u.push(...l.map(d=>d===""?i:[i,d].join("/"))),a&&u.push(...l),u.map(d=>e.startsWith("/")&&d===""?"/":d)}function py(e){e.sort((n,t)=>n.score!==t.score?t.score-n.score:Ny(n.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}const hy=/^:[\w-]+$/,gy=3,vy=2,yy=1,xy=10,jy=-2,$u=e=>e==="*";function _y(e,n){let t=e.split("/"),s=t.length;return t.some($u)&&(s+=jy),n&&(s+=vy),t.filter(a=>!$u(a)).reduce((a,i)=>a+(hy.test(i)?gy:i===""?yy:xy),s)}function Ny(e,n){return e.length===n.length&&e.slice(0,-1).every((s,a)=>s===n[a])?e[e.length-1]-n[n.length-1]:0}function by(e,n,t){let{routesMeta:s}=e,a={},i="/",l=[];for(let u=0;u<s.length;++u){let d=s[u],x=u===s.length-1,_=i==="/"?n:n.slice(i.length)||"/",C=nc({path:d.relativePath,caseSensitive:d.caseSensitive,end:x},_),b=d.route;if(!C)return null;Object.assign(a,C.params),l.push({params:a,pathname:Pr([i,C.pathname]),pathnameBase:Iy(Pr([i,C.pathnameBase])),route:b}),C.pathnameBase!=="/"&&(i=Pr([i,C.pathnameBase]))}return l}function nc(e,n){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[t,s]=Sy(e.path,e.caseSensitive,e.end),a=n.match(t);if(!a)return null;let i=a[0],l=i.replace(/(.)\/+$/,"$1"),u=a.slice(1);return{params:s.reduce((x,_,C)=>{let{paramName:b,isOptional:F}=_;if(b==="*"){let S=u[C]||"";l=i.slice(0,i.length-S.length).replace(/(.)\/+$/,"$1")}const y=u[C];return F&&!y?x[b]=void 0:x[b]=(y||"").replace(/%2F/g,"/"),x},{}),pathname:i,pathnameBase:l,pattern:e}}function Sy(e,n,t){n===void 0&&(n=!1),t===void 0&&(t=!0),td(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let s=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,d)=>(s.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(s.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,n?void 0:"i"),s]}function Cy(e){try{return e.split("/").map(n=>decodeURIComponent(n).replace(/\//g,"%2F")).join("/")}catch(n){return td(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+n+").")),e}}function $s(e,n){if(n==="/")return e;if(!e.toLowerCase().startsWith(n.toLowerCase()))return null;let t=n.endsWith("/")?n.length-1:n.length,s=e.charAt(t);return s&&s!=="/"?null:e.slice(t)||"/"}const wy=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ky=e=>wy.test(e);function Ey(e,n){n===void 0&&(n="/");let{pathname:t,search:s="",hash:a=""}=typeof e=="string"?zs(e):e,i;if(t)if(ky(t))i=t;else{if(t.includes("//")){let l=t;t=t.replace(/\/\/+/g,"/"),td(!1,"Pathnames cannot have embedded double slashes - normalizing "+(l+" -> "+t))}t.startsWith("/")?i=Lu(t.substring(1),"/"):i=Lu(t,n)}else i=n;return{pathname:i,search:Dy(s),hash:Ty(a)}}function Lu(e,n){let t=n.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function Jl(e,n,t,s){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+n+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Ay(e){return e.filter((n,t)=>t===0||n.route.path&&n.route.path.length>0)}function nd(e,n){let t=Ay(e);return n?t.map((s,a)=>a===t.length-1?s.pathname:s.pathnameBase):t.map(s=>s.pathnameBase)}function rd(e,n,t,s){s===void 0&&(s=!1);let a;typeof e=="string"?a=zs(e):(a=Aa({},e),Dt(!a.pathname||!a.pathname.includes("?"),Jl("?","pathname","search",a)),Dt(!a.pathname||!a.pathname.includes("#"),Jl("#","pathname","hash",a)),Dt(!a.search||!a.search.includes("#"),Jl("#","search","hash",a)));let i=e===""||a.pathname==="",l=i?"/":a.pathname,u;if(l==null)u=t;else{let C=n.length-1;if(!s&&l.startsWith("..")){let b=l.split("/");for(;b[0]==="..";)b.shift(),C-=1;a.pathname=b.join("/")}u=C>=0?n[C]:"/"}let d=Ey(a,u),x=l&&l!=="/"&&l.endsWith("/"),_=(i||l===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(x||_)&&(d.pathname+="/"),d}const Pr=e=>e.join("/").replace(/\/\/+/g,"/"),Iy=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Dy=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Ty=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Py(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const kp=["post","put","patch","delete"];new Set(kp);const My=["get",...kp];new Set(My);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ia(){return Ia=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Ia.apply(this,arguments)}const jl=o.createContext(null),Ep=o.createContext(null),hr=o.createContext(null),_l=o.createContext(null),nr=o.createContext({outlet:null,matches:[],isDataRoute:!1}),Ap=o.createContext(null);function Oy(e,n){let{relative:t}=n===void 0?{}:n;Us()||Dt(!1);let{basename:s,navigator:a}=o.useContext(hr),{hash:i,pathname:l,search:u}=Nl(e,{relative:t}),d=l;return s!=="/"&&(d=l==="/"?s:Pr([s,l])),a.createHref({pathname:d,search:u,hash:i})}function Us(){return o.useContext(_l)!=null}function Zt(){return Us()||Dt(!1),o.useContext(_l).location}function Ip(e){o.useContext(hr).static||o.useLayoutEffect(e)}function yt(){let{isDataRoute:e}=o.useContext(nr);return e?Qy():$y()}function $y(){Us()||Dt(!1);let e=o.useContext(jl),{basename:n,future:t,navigator:s}=o.useContext(hr),{matches:a}=o.useContext(nr),{pathname:i}=Zt(),l=JSON.stringify(nd(a,t.v7_relativeSplatPath)),u=o.useRef(!1);return Ip(()=>{u.current=!0}),o.useCallback(function(x,_){if(_===void 0&&(_={}),!u.current)return;if(typeof x=="number"){s.go(x);return}let C=rd(x,JSON.parse(l),i,_.relative==="path");e==null&&n!=="/"&&(C.pathname=C.pathname==="/"?n:Pr([n,C.pathname])),(_.replace?s.replace:s.push)(C,_.state,_)},[n,s,l,i,e])}const Ly=o.createContext(null);function Fy(e){let n=o.useContext(nr).outlet;return n&&o.createElement(Ly.Provider,{value:e},n)}function Ln(){let{matches:e}=o.useContext(nr),n=e[e.length-1];return n?n.params:{}}function Nl(e,n){let{relative:t}=n===void 0?{}:n,{future:s}=o.useContext(hr),{matches:a}=o.useContext(nr),{pathname:i}=Zt(),l=JSON.stringify(nd(a,s.v7_relativeSplatPath));return o.useMemo(()=>rd(e,JSON.parse(l),i,t==="path"),[e,l,i,t])}function Ry(e,n){return zy(e,n)}function zy(e,n,t,s){Us()||Dt(!1);let{navigator:a}=o.useContext(hr),{matches:i}=o.useContext(nr),l=i[i.length-1],u=l?l.params:{};l&&l.pathname;let d=l?l.pathnameBase:"/";l&&l.route;let x=Zt(),_;if(n){var C;let E=typeof n=="string"?zs(n):n;d==="/"||(C=E.pathname)!=null&&C.startsWith(d)||Dt(!1),_=E}else _=x;let b=_.pathname||"/",F=b;if(d!=="/"){let E=d.replace(/^\//,"").split("/");F="/"+b.replace(/^\//,"").split("/").slice(E.length).join("/")}let y=fy(e,{pathname:F}),S=By(y&&y.map(E=>Object.assign({},E,{params:Object.assign({},u,E.params),pathname:Pr([d,a.encodeLocation?a.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?d:Pr([d,a.encodeLocation?a.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),i,t,s);return n&&S?o.createElement(_l.Provider,{value:{location:Ia({pathname:"/",search:"",hash:"",state:null,key:"default"},_),navigationType:Sr.Pop}},S):S}function Uy(){let e=Gy(),n=Py(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),t=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return o.createElement(o.Fragment,null,o.createElement("h2",null,"Unexpected Application Error!"),o.createElement("h3",{style:{fontStyle:"italic"}},n),t?o.createElement("pre",{style:a},t):null,null)}const Vy=o.createElement(Uy,null);class Wy extends o.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,t){return t.location!==n.location||t.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:t.error,location:t.location,revalidation:n.revalidation||t.revalidation}}componentDidCatch(n,t){console.error("React Router caught the following error during render",n,t)}render(){return this.state.error!==void 0?o.createElement(nr.Provider,{value:this.props.routeContext},o.createElement(Ap.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Hy(e){let{routeContext:n,match:t,children:s}=e,a=o.useContext(jl);return a&&a.static&&a.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=t.route.id),o.createElement(nr.Provider,{value:n},s)}function By(e,n,t,s){var a;if(n===void 0&&(n=[]),t===void 0&&(t=null),s===void 0&&(s=null),e==null){var i;if(!t)return null;if(t.errors)e=t.matches;else if((i=s)!=null&&i.v7_partialHydration&&n.length===0&&!t.initialized&&t.matches.length>0)e=t.matches;else return null}let l=e,u=(a=t)==null?void 0:a.errors;if(u!=null){let _=l.findIndex(C=>C.route.id&&(u==null?void 0:u[C.route.id])!==void 0);_>=0||Dt(!1),l=l.slice(0,Math.min(l.length,_+1))}let d=!1,x=-1;if(t&&s&&s.v7_partialHydration)for(let _=0;_<l.length;_++){let C=l[_];if((C.route.HydrateFallback||C.route.hydrateFallbackElement)&&(x=_),C.route.id){let{loaderData:b,errors:F}=t,y=C.route.loader&&b[C.route.id]===void 0&&(!F||F[C.route.id]===void 0);if(C.route.lazy||y){d=!0,x>=0?l=l.slice(0,x+1):l=[l[0]];break}}}return l.reduceRight((_,C,b)=>{let F,y=!1,S=null,E=null;t&&(F=u&&C.route.id?u[C.route.id]:void 0,S=C.route.errorElement||Vy,d&&(x<0&&b===0?(Jy("route-fallback"),y=!0,E=null):x===b&&(y=!0,E=C.route.hydrateFallbackElement||null)));let p=n.concat(l.slice(0,b+1)),m=()=>{let v;return F?v=S:y?v=E:C.route.Component?v=o.createElement(C.route.Component,null):C.route.element?v=C.route.element:v=_,o.createElement(Hy,{match:C,routeContext:{outlet:_,matches:p,isDataRoute:t!=null},children:v})};return t&&(C.route.ErrorBoundary||C.route.errorElement||b===0)?o.createElement(Wy,{location:t.location,revalidation:t.revalidation,component:S,error:F,children:m(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):m()},null)}var Dp=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Dp||{}),Tp=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Tp||{});function Ky(e){let n=o.useContext(jl);return n||Dt(!1),n}function Yy(e){let n=o.useContext(Ep);return n||Dt(!1),n}function qy(e){let n=o.useContext(nr);return n||Dt(!1),n}function Pp(e){let n=qy(),t=n.matches[n.matches.length-1];return t.route.id||Dt(!1),t.route.id}function Gy(){var e;let n=o.useContext(Ap),t=Yy(),s=Pp();return n!==void 0?n:(e=t.errors)==null?void 0:e[s]}function Qy(){let{router:e}=Ky(Dp.UseNavigateStable),n=Pp(Tp.UseNavigateStable),t=o.useRef(!1);return Ip(()=>{t.current=!0}),o.useCallback(function(a,i){i===void 0&&(i={}),t.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,Ia({fromRouteId:n},i)))},[e,n])}const Fu={};function Jy(e,n,t){Fu[e]||(Fu[e]=!0)}function Xy(e,n){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Ru(e){let{to:n,replace:t,state:s,relative:a}=e;Us()||Dt(!1);let{future:i,static:l}=o.useContext(hr),{matches:u}=o.useContext(nr),{pathname:d}=Zt(),x=yt(),_=rd(n,nd(u,i.v7_relativeSplatPath),d,a==="path"),C=JSON.stringify(_);return o.useEffect(()=>x(JSON.parse(C),{replace:t,state:s,relative:a}),[x,C,a,t,s]),null}function Zy(e){return Fy(e.context)}function at(e){Dt(!1)}function ex(e){let{basename:n="/",children:t=null,location:s,navigationType:a=Sr.Pop,navigator:i,static:l=!1,future:u}=e;Us()&&Dt(!1);let d=n.replace(/^\/*/,"/"),x=o.useMemo(()=>({basename:d,navigator:i,static:l,future:Ia({v7_relativeSplatPath:!1},u)}),[d,u,i,l]);typeof s=="string"&&(s=zs(s));let{pathname:_="/",search:C="",hash:b="",state:F=null,key:y="default"}=s,S=o.useMemo(()=>{let E=$s(_,d);return E==null?null:{location:{pathname:E,search:C,hash:b,state:F,key:y},navigationType:a}},[d,_,C,b,F,y,a]);return S==null?null:o.createElement(hr.Provider,{value:x},o.createElement(_l.Provider,{children:t,value:S}))}function tx(e){let{children:n,location:t}=e;return Ry(rc(n),t)}new Promise(()=>{});function rc(e,n){n===void 0&&(n=[]);let t=[];return o.Children.forEach(e,(s,a)=>{if(!o.isValidElement(s))return;let i=[...n,a];if(s.type===o.Fragment){t.push.apply(t,rc(s.props.children,i));return}s.type!==at&&Dt(!1),!s.props.index||!s.props.children||Dt(!1);let l={id:s.props.id||i.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(l.children=rc(s.props.children,i)),t.push(l)}),t}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Xi(){return Xi=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Xi.apply(this,arguments)}function Mp(e,n){if(e==null)return{};var t={},s=Object.keys(e),a,i;for(i=0;i<s.length;i++)a=s[i],!(n.indexOf(a)>=0)&&(t[a]=e[a]);return t}function nx(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function rx(e,n){return e.button===0&&(!n||n==="_self")&&!nx(e)}function sc(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((n,t)=>{let s=e[t];return n.concat(Array.isArray(s)?s.map(a=>[t,a]):[[t,s]])},[]))}function sx(e,n){let t=sc(e);return n&&n.forEach((s,a)=>{t.has(a)||n.getAll(a).forEach(i=>{t.append(a,i)})}),t}const ax=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],ix=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],lx="6";try{window.__reactRouterVersion=lx}catch{}const ox=o.createContext({isTransitioning:!1}),cx="startTransition",zu=Xh[cx];function dx(e){let{basename:n,children:t,future:s,window:a}=e,i=o.useRef();i.current==null&&(i.current=cy({window:a,v5Compat:!0}));let l=i.current,[u,d]=o.useState({action:l.action,location:l.location}),{v7_startTransition:x}=s||{},_=o.useCallback(C=>{x&&zu?zu(()=>d(C)):d(C)},[d,x]);return o.useLayoutEffect(()=>l.listen(_),[l,_]),o.useEffect(()=>Xy(s),[s]),o.createElement(ex,{basename:n,children:t,location:u.location,navigationType:u.action,navigator:l,future:s})}const ux=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",fx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,nt=o.forwardRef(function(n,t){let{onClick:s,relative:a,reloadDocument:i,replace:l,state:u,target:d,to:x,preventScrollReset:_,viewTransition:C}=n,b=Mp(n,ax),{basename:F}=o.useContext(hr),y,S=!1;if(typeof x=="string"&&fx.test(x)&&(y=x,ux))try{let v=new URL(window.location.href),j=x.startsWith("//")?new URL(v.protocol+x):new URL(x),D=$s(j.pathname,F);j.origin===v.origin&&D!=null?x=D+j.search+j.hash:S=!0}catch{}let E=Oy(x,{relative:a}),p=px(x,{replace:l,state:u,target:d,preventScrollReset:_,relative:a,viewTransition:C});function m(v){s&&s(v),v.defaultPrevented||p(v)}return o.createElement("a",Xi({},b,{href:y||E,onClick:S||i?s:m,ref:t,target:d}))}),Uu=o.forwardRef(function(n,t){let{"aria-current":s="page",caseSensitive:a=!1,className:i="",end:l=!1,style:u,to:d,viewTransition:x,children:_}=n,C=Mp(n,ix),b=Nl(d,{relative:C.relative}),F=Zt(),y=o.useContext(Ep),{navigator:S,basename:E}=o.useContext(hr),p=y!=null&&hx(b)&&x===!0,m=S.encodeLocation?S.encodeLocation(b).pathname:b.pathname,v=F.pathname,j=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;a||(v=v.toLowerCase(),j=j?j.toLowerCase():null,m=m.toLowerCase()),j&&E&&(j=$s(j,E)||j);const D=m!=="/"&&m.endsWith("/")?m.length-1:m.length;let k=v===m||!l&&v.startsWith(m)&&v.charAt(D)==="/",I=j!=null&&(j===m||!l&&j.startsWith(m)&&j.charAt(m.length)==="/"),T={isActive:k,isPending:I,isTransitioning:p},J=k?s:void 0,se;typeof i=="function"?se=i(T):se=[i,k?"active":null,I?"pending":null,p?"transitioning":null].filter(Boolean).join(" ");let R=typeof u=="function"?u(T):u;return o.createElement(nt,Xi({},C,{"aria-current":J,className:se,ref:t,style:R,to:d,viewTransition:x}),typeof _=="function"?_(T):_)});var ac;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(ac||(ac={}));var Vu;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Vu||(Vu={}));function mx(e){let n=o.useContext(jl);return n||Dt(!1),n}function px(e,n){let{target:t,replace:s,state:a,preventScrollReset:i,relative:l,viewTransition:u}=n===void 0?{}:n,d=yt(),x=Zt(),_=Nl(e,{relative:l});return o.useCallback(C=>{if(rx(C,t)){C.preventDefault();let b=s!==void 0?s:Ji(x)===Ji(_);d(e,{replace:b,state:a,preventScrollReset:i,relative:l,viewTransition:u})}},[x,d,_,s,a,t,e,i,l,u])}function sd(e){let n=o.useRef(sc(e)),t=o.useRef(!1),s=Zt(),a=o.useMemo(()=>sx(s.search,t.current?null:n.current),[s.search]),i=yt(),l=o.useCallback((u,d)=>{const x=sc(typeof u=="function"?u(a):u);t.current=!0,i("?"+x,d)},[i,a]);return[a,l]}function hx(e,n){n===void 0&&(n={});let t=o.useContext(ox);t==null&&Dt(!1);let{basename:s}=mx(ac.useViewTransitionState),a=Nl(e,{relative:n.relative});if(!t.isTransitioning)return!1;let i=$s(t.currentLocation.pathname,s)||t.currentLocation.pathname,l=$s(t.nextLocation.pathname,s)||t.nextLocation.pathname;return nc(a.pathname,l)!=null||nc(a.pathname,i)!=null}const Op="/assets/logo-BJZLLN_u.webp",gx=[{to:"/events",label:"Events"},{to:"/participants",label:"Participants"},{to:"/logistics",label:"Logistics"}],vx=()=>{const[e,n]=o.useState(!1),[t,s]=o.useState(()=>typeof window>"u"?"dark":window.localStorage.getItem("innhopp-theme")==="light"?"light":"dark");o.useEffect(()=>{const l=u=>{const d=u.target,x=d==null?void 0:d.closest('input[type="number"]');x&&document.activeElement===x&&u.preventDefault()};return window.addEventListener("wheel",l,{passive:!1}),()=>window.removeEventListener("wheel",l)},[]),o.useEffect(()=>{typeof document>"u"||(document.documentElement.setAttribute("data-theme",t),window.localStorage.setItem("innhopp-theme",t))},[t]),o.useEffect(()=>{if(typeof document>"u")return;const l=e&&window.matchMedia&&window.matchMedia("(max-width: 960px)").matches;return document.body.classList.toggle("nav-open",l),()=>document.body.classList.remove("nav-open")},[e]);const a=()=>n(!1),i=()=>s(l=>l==="dark"?"light":"dark");return r.jsxs("div",{className:"app-shell",children:[r.jsxs("header",{className:"app-header",children:[r.jsx("div",{className:"brand",children:r.jsx("img",{src:Op,alt:"Innhopp Central logo",className:"brand-logo"})}),r.jsx("div",{className:"header-actions",children:r.jsx("button",{type:"button",className:`ghost menu-toggle ${e?"open":""}`,"aria-label":e?"Close menu":"Open menu","aria-expanded":e,onClick:()=>n(l=>!l),children:r.jsxs("span",{className:"menu-icon","aria-hidden":"true",children:[r.jsx("span",{className:"bar"}),r.jsx("span",{className:"bar"}),r.jsx("span",{className:"bar"})]})})})]}),r.jsxs("div",{className:"app-body",children:[r.jsxs("nav",{className:`app-nav ${e?"open":""}`,children:[r.jsx("ul",{children:gx.map(l=>r.jsx("li",{children:r.jsx(Uu,{to:l.to,className:({isActive:u})=>u?"nav-link active":"nav-link",onClick:a,children:l.label})},l.to))}),r.jsxs("div",{className:"nav-bottom",children:[r.jsx(Uu,{to:"/login",className:"nav-link logout-link",children:"Sign out"}),r.jsx("div",{className:"nav-footer",children:r.jsx("button",{type:"button",className:"theme-toggle-btn",onClick:i,"aria-pressed":t==="light",children:t==="dark"?"Light mode":"Dark mode"})})]})]}),e&&r.jsx("div",{className:"nav-backdrop",onClick:()=>n(!1)}),r.jsx("main",{className:"app-content",children:r.jsx(Zy,{})})]})]})},yx="YOUR_GOOGLE_CLIENT_ID.apps.googleusercontent.com",xx="97907096881-j3u1fsum801oduk0qeb1pqciph44php4.apps.googleusercontent.com".trim()||yx,jx=e=>{try{const[,n]=e.split("."),t=n.replace(/-/g,"+").replace(/_/g,"/"),s=t.padEnd(t.length+(4-t.length%4)%4,"=");return JSON.parse(atob(s))}catch(n){return console.error("Failed to decode Google credential",n),null}},Wu="https://accounts.google.com/gsi/client",_x=()=>{const[e,n]=o.useState(null),[t,s]=o.useState(null),[a,i]=o.useState(null),[l,u]=o.useState(!1),[d,x]=o.useState(""),[_,C]=o.useState(""),b=o.useRef(null),F=yt(),y=o.useMemo(()=>!!(e!=null&&e.email)||l,[e,l]);o.useEffect(()=>{if(!b.current)return;const E=()=>{var v,j;if(!((j=(v=window.google)==null?void 0:v.accounts)!=null&&j.id)){s("Google Identity Services SDK is unavailable.");return}b.current.innerHTML="",window.google.accounts.id.initialize({client_id:xx,callback:D=>{const k=jx(D.credential);if(!k){s("Unable to decode Google credential.");return}n(k),s(null),i(null)}}),window.google.accounts.id.renderButton(b.current,{type:"standard",theme:"outline",size:"large",text:"signin_with"}),window.google.accounts.id.prompt()},p=document.querySelector(`script[src="${Wu}"]`);if(p!=null&&p.getAttribute("data-loaded")){E();return}const m=p??document.createElement("script");return m.src=Wu,m.async=!0,m.defer=!0,m.onload=()=>{m.setAttribute("data-loaded","true"),E()},p||document.head.appendChild(m),()=>{}},[]),o.useEffect(()=>{if(y){const E=window.setTimeout(()=>F("/events"),800);return()=>window.clearTimeout(E)}},[y,F]);const S=E=>{if(E.preventDefault(),d==="admin"&&_==="admin"){u(!0),i(null),x(""),C("");return}u(!1),i("Invalid debug credentials. Use admin/admin.")};return r.jsx("div",{className:"login-layout",children:r.jsxs("section",{className:"login-panel",children:[r.jsx("img",{src:Op,alt:"Innhopp Central logo",className:"login-logo"}),r.jsx("div",{ref:b,className:"google-button","aria-live":"polite"}),r.jsxs("div",{className:"debug-login",role:"group","aria-labelledby":"debug-login-heading",children:[r.jsx("h2",{id:"debug-login-heading",children:"Testing credentials"}),r.jsxs("form",{onSubmit:S,className:"debug-login-form",children:[r.jsxs("label",{className:"field",children:[r.jsx("span",{children:"Username"}),r.jsx("input",{type:"text",value:d,onChange:E=>x(E.target.value),autoComplete:"username",placeholder:"admin",required:!0})]}),r.jsxs("label",{className:"field",children:[r.jsx("span",{children:"Password"}),r.jsx("input",{type:"password",value:_,onChange:E=>C(E.target.value),autoComplete:"current-password",placeholder:"admin",required:!0})]}),r.jsx("button",{type:"submit",className:"primary",children:"Log in"})]}),a&&r.jsx("p",{className:"error-text",children:a}),l&&!a&&r.jsx("p",{className:"success-text",children:"Debug login successful. Redirecting"})]}),e&&r.jsxs("div",{className:"profile-preview",children:[r.jsx("img",{src:e.picture,alt:e.name}),r.jsxs("div",{children:[r.jsx("p",{className:"profile-name",children:e.name}),r.jsx("p",{className:"profile-email",children:e.email})]})]}),t&&r.jsx("p",{className:"error-text",children:t})]})})},Nx="/api",bx=e=>{const n=new Headers((e==null?void 0:e.headers)||{});return!n.has("Content-Type")&&(e!=null&&e.body)&&n.set("Content-Type","application/json"),n},Ve=async(e,n)=>{var l;const t=`${Nx}${e}`,s=await fetch(t,{...n,credentials:"include",headers:bx(n)});if(s.status===204||s.status===205){if(!s.ok)throw new Error("Request failed");return}const i=((l=s.headers.get("content-type"))==null?void 0:l.includes("application/json"))?await s.json():await s.text();if(!s.ok){const u=typeof i=="string"?i:(i==null?void 0:i.error)||"Request failed",d=new Error(u);throw d.status=s.status,d}return i},rr=()=>Ve("/events/seasons"),Sx=e=>Ve("/events/seasons",{method:"POST",body:JSON.stringify(e)}),Ut=()=>Ve("/events/events"),Cx=e=>Ve("/events/events",{method:"POST",body:JSON.stringify(e)}),es=e=>Ve(`/events/events/${e}`),$p=e=>Ve(`/events/events/${e}/copy`,{method:"POST"}),Lp=e=>Ve(`/events/events/${e}`,{method:"DELETE"}),mr=e=>Ve(`/events/events/${e}/accommodations`),Fp=()=>Ve("/events/accommodations"),Rp=(e,n)=>Ve(`/events/events/${e}/accommodations`,{method:"POST",body:JSON.stringify(n)}),zp=(e,n)=>Ve(`/events/events/${e}/accommodations/${n}`),Up=(e,n,t)=>Ve(`/events/events/${e}/accommodations/${n}`,{method:"PUT",body:JSON.stringify(t)}),wx=(e,n)=>Ve(`/events/events/${e}/accommodations/${n}`,{method:"DELETE"}),Vp=(e,n)=>Ve(`/events/events/${e}`,{method:"PUT",body:JSON.stringify(n)}),Wp=e=>Ve(`/innhopps/${e}`),kx=(e,n)=>Ve(`/events/events/${e}/innhopps`,{method:"POST",body:JSON.stringify(n)}),Ci=(e,n)=>Ve(`/innhopps/${e}`,{method:"PUT",body:JSON.stringify(n)}),Ex=e=>Ve(`/innhopps/${e}`,{method:"DELETE"}),Hp=()=>Ve("/events/manifests"),Ax=e=>Ve("/events/manifests",{method:"POST",body:JSON.stringify(e)}),Ix=e=>Ve(`/events/manifests/${e}`),Dx=(e,n)=>Ve(`/events/manifests/${e}`,{method:"PUT",body:JSON.stringify(n)}),ts=()=>Ve("/participants/profiles"),Da=e=>Ve("/participants/profiles",{method:"POST",body:JSON.stringify(e)}),Tx=e=>Ve(`/participants/profiles/${e}`),Px=(e,n)=>Ve(`/participants/profiles/${e}`,{method:"PUT",body:JSON.stringify(n)}),Mx=e=>Ve(`/participants/profiles/${e}`,{method:"DELETE"}),Ox=/([+-]\d{2}:?\d{2}|Z)$/i,$x=/^(\d{4})-(\d{2})-(\d{2})(?:[ T](\d{2}):(\d{2})(?::(\d{2})(?:\.\d+)?)?)?$/,an=e=>String(e).padStart(2,"0"),Lx=e=>e.replace(Ox,""),Bp=e=>{if(!e)return null;const n=Lx(e.trim());if(!n)return null;const t=n.match($x);if(!t)return null;const[,s,a,i,l,u,d]=t,x=Number(s),_=Number(a),C=Number(i),b=Number(l??"0"),F=Number(u??"0"),y=Number(d??"0");return[x,_,C,b,F,y].some(S=>Number.isNaN(S))?null:{year:x,month:_,day:C,hour:b,minute:F,second:y}},et=e=>{const n=Bp(e);if(!n)return null;const t=new Date(Date.UTC(n.year,n.month-1,n.day,n.hour,n.minute,n.second));return Number.isNaN(t.getTime())?null:t},Ge=e=>{const n=Bp(e);if(!n)return;const t=new Date(n.year,n.month-1,n.day,n.hour,n.minute,n.second);return Number.isNaN(t.getTime())?void 0:t},Bt=e=>new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds())).toISOString(),Bn=(e,n={})=>{const t=et(e);return t?new Intl.DateTimeFormat(void 0,{timeZone:"UTC",...n}).format(t):""},Fx=e=>{const n=et(e);return n?`${n.getUTCFullYear()}-${an(n.getUTCMonth()+1)}-${an(n.getUTCDate())}`:""},ad=e=>{const n=et(e);return n?`${n.getUTCFullYear()}-${an(n.getUTCMonth()+1)}-${an(n.getUTCDate())}T${an(n.getUTCHours())}:${an(n.getUTCMinutes())}`:""},Rx=e=>`${e.getUTCFullYear()}-${an(e.getUTCMonth()+1)}-${an(e.getUTCDate())}T${an(e.getUTCHours())}:${an(e.getUTCMinutes())}`,Kp=e=>`${e.getFullYear()}-${an(e.getMonth()+1)}-${an(e.getDate())} ${an(e.getHours())}:${an(e.getMinutes())}`,Yp=e=>{const n=et(e);return n?n.toISOString():""},qp=e=>Yp(e?`${e}T00:00`:""),id=e=>{const n=et(e);if(n)return{hour:n.getUTCHours(),minute:n.getUTCMinutes()};if(!e)return null;const t=e.match(/(?:T|\s)(\d{2}):(\d{2})/);if(!t)return null;const s=Number(t[1]),a=Number(t[2]);return Number.isNaN(s)||Number.isNaN(a)?null:{hour:s,minute:a}},zx=e=>{if(!e)return"";const n=e.match(/^(\d{4})-(\d{2})-(\d{2})/);if(n)return`${n[1]}-${n[2]}-${n[3]}`;const t=et(e);return t?`${t.getUTCFullYear()}-${an(t.getUTCMonth()+1)}-${an(t.getUTCDate())}`:""},Ux=e=>(Array.isArray(e)?e:[]).map(n=>({...n,slots:typeof n.slots=="number"?n.slots:0,airfield_ids:Array.isArray(n.airfield_ids)?n.airfield_ids:[],participant_ids:Array.isArray(n.participant_ids)?n.participant_ids:[],innhopps:Array.isArray(n.innhopps)?n.innhopps:[]})),Hu=e=>e?Bn(e,{month:"short",day:"numeric",year:"numeric"}):"TBD",Vx=()=>{var D;const[e,n]=o.useState([]),[t,s]=o.useState([]),[a,i]=o.useState(!0),[l,u]=o.useState(null),[d,x]=o.useState(!1),[_,C]=o.useState(""),[b,F]=o.useState([]),y=o.useMemo(()=>{const k=new Map;return(Array.isArray(e)?e:[]).forEach(I=>k.set(I.id,I)),k},[e]);o.useEffect(()=>{let k=!1;return(async()=>{i(!0),u(null);try{const[T,J,se]=await Promise.all([rr(),Ut(),ts()]);if(k)return;n(Array.isArray(T)?T:[]),s(Ux(J)),F(Array.isArray(se)?se:[])}catch(T){k||u(T instanceof Error?T.message:"Failed to load events")}finally{k||i(!1)}})(),()=>{k=!0}},[]);const S=k=>{if(k.status==="past")return!0;const I=et(k.ends_at),T=et(k.starts_at);return I?I.getTime()<Date.now():T?T.getTime()<Date.now():!1},E=t.filter(k=>!(!d&&S(k)||_&&k.season_id!==Number(_))),p=o.useMemo(()=>{const k=new Map;E.forEach(T=>{const J=k.get(T.season_id)||[];J.push(T),k.set(T.season_id,J)});const I=(T,J)=>{var de,Ne;const se=((de=y.get(T))==null?void 0:de.name)||`Season ${T}`,ae=(((Ne=y.get(J))==null?void 0:Ne.name)||`Season ${J}`).localeCompare(se);return ae!==0?ae:J-T};return Array.from(k.entries()).sort(([T],[J])=>I(T,J)).map(([T,J])=>{var se;return{seasonId:T,label:((se=y.get(T))==null?void 0:se.name)||`Season ${T}`,events:J}})},[E,y]),m=o.useMemo(()=>{const k=new Map;return b.forEach(I=>k.set(I.id,I)),k},[b]),v=k=>Array.isArray(k)?k.reduce((I,T)=>{var se,R;return(Array.isArray((se=m.get(T))==null?void 0:se.roles)?((R=m.get(T))==null?void 0:R.roles)||[]:[]).includes("Staff")?I:I+1},0):0;o.useEffect(()=>{if(!_)return;const k=Number(_),I=t.filter(J=>J.season_id===k);if(I.length===0){x(!1);return}const T=I.every(J=>S(J));x(T)},[t,_]);const j=((D=p[0])==null?void 0:D.label)||null;return r.jsxs("section",{className:"stack",children:[r.jsx("header",{className:"page-header",children:r.jsx("div",{children:r.jsx("h2",{style:{margin:0},children:"Event Calendar"})})}),r.jsxs("div",{className:"stack",children:[r.jsxs("article",{className:"card",children:[r.jsxs("header",{className:"card-header",style:{alignItems:"center",gap:"0.75rem"},children:[r.jsx("div",{style:{flex:1,fontWeight:800,fontSize:"1.25rem"},children:j||"Events"}),r.jsxs("span",{className:"badge neutral",children:[E.length," ",E.length===1?"event":"events"]})]}),a?r.jsx("p",{className:"muted",children:"Loading schedule"}):l?r.jsx("p",{className:"error-text",children:l}):E.length===0?r.jsx("p",{className:"muted",children:"No events yet. Use the actions below to add one."}):r.jsx("div",{className:"stack",children:p.map((k,I)=>r.jsxs("div",{className:"stack",children:[I===0?null:r.jsx("p",{className:"muted",style:{margin:"0 0 0.5rem"},children:r.jsx("span",{style:{fontSize:"1.25rem",fontWeight:800},children:k.label})}),r.jsx("div",{className:"stack",children:k.events.map(T=>r.jsx(nt,{className:"card-link",to:`/events/${T.id}`,state:{suppressHighlight:!0},children:r.jsx("article",{className:"card event-summary-card",children:(()=>{var Ne;const J=v(T.participant_ids),se=T.slots??0,R=Math.max(se-J,0),ae=R===0,de=S(T);return r.jsxs(r.Fragment,{children:[r.jsxs("header",{className:"card-header event-card-header",children:[r.jsxs("div",{children:[r.jsx("h3",{children:T.name}),r.jsx("p",{className:"muted event-location",children:T.location||"Location TBD"})]}),r.jsxs("div",{className:"event-card-badges",children:[r.jsx("span",{className:`badge status-${T.status}`,children:T.status}),!de&&r.jsx("span",{className:`badge ${ae?"danger":"success"}`,children:ae?"FULL":`${R} SLOTS AVAILABLE`})]})]}),r.jsxs("dl",{className:"card-details",children:[r.jsxs("div",{children:[r.jsx("dt",{children:"Starts"}),r.jsx("dd",{children:Hu(T.starts_at)})]}),r.jsxs("div",{children:[r.jsx("dt",{children:"Ends"}),r.jsx("dd",{children:Hu(T.ends_at)})]}),r.jsxs("div",{children:[r.jsx("dt",{children:"Participants"}),r.jsx("dd",{children:v(T.participant_ids)})]}),r.jsxs("div",{children:[r.jsx("dt",{children:"INNHOPPS"}),r.jsx("dd",{children:((Ne=T.innhopps)==null?void 0:Ne.length)??0})]}),r.jsxs("div",{children:[r.jsx("dt",{children:"Slots"}),r.jsx("dd",{children:se})]})]})]})})()})},T.id))})]},k.seasonId))}),r.jsx("footer",{className:"card-footer",children:r.jsxs("div",{className:"card-actions",children:[r.jsx(nt,{className:"primary button-link",to:"/events/new",children:"Create event"}),r.jsx("button",{className:"ghost",type:"button",onClick:()=>x(k=>!k),children:d?"Hide past events":"Show past events"})]})})]}),r.jsxs("article",{className:"card",children:[r.jsxs("div",{className:"form-grid",children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Season"}),r.jsxs("select",{value:_,onChange:k=>C(k.target.value),style:{width:"16.666%",minWidth:"140px"},children:[r.jsx("option",{value:"",children:"All seasons"}),[...e].sort((k,I)=>I.name.localeCompare(k.name)).map(k=>r.jsx("option",{value:k.id,children:k.name},k.id))]})]}),e.length===0&&r.jsx("p",{className:"muted",children:"No seasons yet. Create one to get started."})]}),r.jsx("footer",{className:"card-footer",children:r.jsx(nt,{className:"primary button-link",to:"/seasons/new",children:"Create season"})})]})]})]})},Wx=[{value:"draft",label:"Draft"},{value:"planned",label:"Planned"},{value:"scouted",label:"Scouted"},{value:"launched",label:"Launched"},{value:"live",label:"Live"},{value:"past",label:"Past"}],Bu=e=>qp(e),Hx=()=>{const[e,n]=o.useState([]),[t,s]=o.useState(!0),[a,i]=o.useState(null),[l,u]=o.useState(null),[d,x]=o.useState(!1),[_,C]=o.useState({season_id:"",name:"",location:"",slots:"",status:"draft",starts_at:"",ends_at:""}),b=yt();o.useEffect(()=>{let y=!1;return(async()=>{try{const E=await rr();if(y)return;n(Array.isArray(E)?E:[])}catch(E){y||i(E instanceof Error?E.message:"Failed to load seasons")}finally{y||s(!1)}})(),()=>{y=!0}},[]);const F=async y=>{y.preventDefault(),x(!0),u(null);try{const S={season_id:Number(_.season_id),name:_.name.trim(),status:_.status,starts_at:Bu(_.starts_at)};_.location.trim()&&(S.location=_.location.trim()),_.ends_at&&(S.ends_at=Bu(_.ends_at)),_.slots&&(S.slots=Number(_.slots)),await Cx(S),u("Event created"),C({season_id:"",name:"",location:"",slots:"",status:"draft",starts_at:"",ends_at:""}),b("/events")}catch(S){u(S instanceof Error?S.message:"Failed to create event")}finally{x(!1)}};return r.jsxs("section",{children:[r.jsxs("header",{className:"page-header",children:[r.jsxs("div",{children:[r.jsx("h2",{children:"Create event"}),r.jsx("p",{children:"Attach a new event to a season with timing and status."})]}),r.jsx("button",{className:"ghost",type:"button",onClick:()=>b("/events"),children:"Back to events"})]}),r.jsxs("article",{className:"card",children:[r.jsx("header",{className:"card-header",children:r.jsxs("div",{children:[r.jsx("h3",{children:"Event details"}),r.jsx("p",{children:"Define the schedule and context."})]})}),t?r.jsx("p",{className:"muted",children:"Loading seasons"}):a?r.jsx("p",{className:"error-text",children:a}):e.length===0?r.jsx("p",{className:"muted",children:"Create a season first before scheduling events."}):r.jsxs("form",{className:"form-grid",onSubmit:F,children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Season"}),r.jsxs("select",{required:!0,value:_.season_id,onChange:y=>C(S=>({...S,season_id:y.target.value})),children:[r.jsx("option",{value:"",children:"Select season"}),e.map(y=>r.jsx("option",{value:y.id,children:y.name},y.id))]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Event name"}),r.jsx("input",{type:"text",value:_.name,onChange:y=>C(S=>({...S,name:y.target.value})),placeholder:"Enter a name for the event",required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Location"}),r.jsx("input",{type:"text",value:_.location,onChange:y=>C(S=>({...S,location:y.target.value})),placeholder:"The overall location the event takes place"})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Slots"}),r.jsx("input",{type:"number",min:"0",value:_.slots,onChange:y=>C(S=>({...S,slots:y.target.value})),placeholder:"Total participant slots"})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Status"}),r.jsx("select",{value:_.status,onChange:y=>C(S=>({...S,status:y.target.value})),children:Wx.map(y=>r.jsx("option",{value:y.value,children:y.label},y.value))})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Starts on"}),r.jsx("input",{type:"date",value:_.starts_at,onChange:y=>C(S=>({...S,starts_at:y.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Ends on"}),r.jsx("input",{type:"date",value:_.ends_at,onChange:y=>C(S=>({...S,ends_at:y.target.value})),placeholder:"Optional"})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"submit",className:"primary",disabled:d,children:d?"Creating":"Create event"}),l&&r.jsx("span",{className:"muted",children:l})]})]})]})]})};var Gp={},Qp={exports:{}},Bx="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Kx=Bx,Yx=Kx;function Jp(){}function Xp(){}Xp.resetWarningCache=Jp;var qx=function(){function e(s,a,i,l,u,d){if(d!==Yx){var x=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw x.name="Invariant Violation",x}}e.isRequired=e;function n(){return e}var t={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:n,element:e,elementType:e,instanceOf:n,node:e,objectOf:n,oneOf:n,oneOfType:n,shape:n,exact:n,checkPropTypes:Xp,resetWarningCache:Jp};return t.PropTypes=t,t};Qp.exports=qx();var Gx=Qp.exports,Xl=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],ks={_disable:[],allowInput:!1,allowInvalidPreload:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:typeof window=="object"&&window.navigator.userAgent.indexOf("MSIE")===-1,ariaDateFormat:"F j, Y",autoFillDefaultTime:!0,clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enableSeconds:!1,enableTime:!1,errorHandler:function(e){return typeof console<"u"&&console.warn(e)},getWeek:function(e){var n=new Date(e.getTime());n.setHours(0,0,0,0),n.setDate(n.getDate()+3-(n.getDay()+6)%7);var t=new Date(n.getFullYear(),0,4);return 1+Math.round(((n.getTime()-t.getTime())/864e5-3+(t.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",monthSelectorType:"dropdown",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1},Ta={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(e){var n=e%100;if(n>3&&n<21)return"th";switch(n%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year",monthAriaLabel:"Month",hourAriaLabel:"Hour",minuteAriaLabel:"Minute",time_24hr:!1},pn=function(e,n){return n===void 0&&(n=2),("000"+e).slice(n*-1)},In=function(e){return e===!0?1:0};function Ku(e,n){var t;return function(){var s=this,a=arguments;clearTimeout(t),t=setTimeout(function(){return e.apply(s,a)},n)}}var Zl=function(e){return e instanceof Array?e:[e]};function cn(e,n,t){if(t===!0)return e.classList.add(n);e.classList.remove(n)}function mt(e,n,t){var s=window.document.createElement(e);return n=n||"",t=t||"",s.className=n,t!==void 0&&(s.textContent=t),s}function ii(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function Zp(e,n){if(n(e))return e;if(e.parentNode)return Zp(e.parentNode,n)}function li(e,n){var t=mt("div","numInputWrapper"),s=mt("input","numInput "+e),a=mt("span","arrowUp"),i=mt("span","arrowDown");if(navigator.userAgent.indexOf("MSIE 9.0")===-1?s.type="number":(s.type="text",s.pattern="\\d*"),n!==void 0)for(var l in n)s.setAttribute(l,n[l]);return t.appendChild(s),t.appendChild(a),t.appendChild(i),t}function jn(e){try{if(typeof e.composedPath=="function"){var n=e.composedPath();return n[0]}return e.target}catch{return e.target}}var eo=function(){},Zi=function(e,n,t){return t.months[n?"shorthand":"longhand"][e]},Qx={D:eo,F:function(e,n,t){e.setMonth(t.months.longhand.indexOf(n))},G:function(e,n){e.setHours((e.getHours()>=12?12:0)+parseFloat(n))},H:function(e,n){e.setHours(parseFloat(n))},J:function(e,n){e.setDate(parseFloat(n))},K:function(e,n,t){e.setHours(e.getHours()%12+12*In(new RegExp(t.amPM[1],"i").test(n)))},M:function(e,n,t){e.setMonth(t.months.shorthand.indexOf(n))},S:function(e,n){e.setSeconds(parseFloat(n))},U:function(e,n){return new Date(parseFloat(n)*1e3)},W:function(e,n,t){var s=parseInt(n),a=new Date(e.getFullYear(),0,2+(s-1)*7,0,0,0,0);return a.setDate(a.getDate()-a.getDay()+t.firstDayOfWeek),a},Y:function(e,n){e.setFullYear(parseFloat(n))},Z:function(e,n){return new Date(n)},d:function(e,n){e.setDate(parseFloat(n))},h:function(e,n){e.setHours((e.getHours()>=12?12:0)+parseFloat(n))},i:function(e,n){e.setMinutes(parseFloat(n))},j:function(e,n){e.setDate(parseFloat(n))},l:eo,m:function(e,n){e.setMonth(parseFloat(n)-1)},n:function(e,n){e.setMonth(parseFloat(n)-1)},s:function(e,n){e.setSeconds(parseFloat(n))},u:function(e,n){return new Date(parseFloat(n))},w:eo,y:function(e,n){e.setFullYear(2e3+parseFloat(n))}},Wr={D:"",F:"",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},ua={Z:function(e){return e.toISOString()},D:function(e,n,t){return n.weekdays.shorthand[ua.w(e,n,t)]},F:function(e,n,t){return Zi(ua.n(e,n,t)-1,!1,n)},G:function(e,n,t){return pn(ua.h(e,n,t))},H:function(e){return pn(e.getHours())},J:function(e,n){return n.ordinal!==void 0?e.getDate()+n.ordinal(e.getDate()):e.getDate()},K:function(e,n){return n.amPM[In(e.getHours()>11)]},M:function(e,n){return Zi(e.getMonth(),!0,n)},S:function(e){return pn(e.getSeconds())},U:function(e){return e.getTime()/1e3},W:function(e,n,t){return t.getWeek(e)},Y:function(e){return pn(e.getFullYear(),4)},d:function(e){return pn(e.getDate())},h:function(e){return e.getHours()%12?e.getHours()%12:12},i:function(e){return pn(e.getMinutes())},j:function(e){return e.getDate()},l:function(e,n){return n.weekdays.longhand[e.getDay()]},m:function(e){return pn(e.getMonth()+1)},n:function(e){return e.getMonth()+1},s:function(e){return e.getSeconds()},u:function(e){return e.getTime()},w:function(e){return e.getDay()},y:function(e){return String(e.getFullYear()).substring(2)}},eh=function(e){var n=e.config,t=n===void 0?ks:n,s=e.l10n,a=s===void 0?Ta:s,i=e.isMobile,l=i===void 0?!1:i;return function(u,d,x){var _=x||a;return t.formatDate!==void 0&&!l?t.formatDate(u,d,_):d.split("").map(function(C,b,F){return ua[C]&&F[b-1]!=="\\"?ua[C](u,_,t):C!=="\\"?C:""}).join("")}},ic=function(e){var n=e.config,t=n===void 0?ks:n,s=e.l10n,a=s===void 0?Ta:s;return function(i,l,u,d){if(!(i!==0&&!i)){var x=d||a,_,C=i;if(i instanceof Date)_=new Date(i.getTime());else if(typeof i!="string"&&i.toFixed!==void 0)_=new Date(i);else if(typeof i=="string"){var b=l||(t||ks).dateFormat,F=String(i).trim();if(F==="today")_=new Date,u=!0;else if(t&&t.parseDate)_=t.parseDate(i,b);else if(/Z$/.test(F)||/GMT$/.test(F))_=new Date(i);else{for(var y=void 0,S=[],E=0,p=0,m="";E<b.length;E++){var v=b[E],j=v==="\\",D=b[E-1]==="\\"||j;if(Wr[v]&&!D){m+=Wr[v];var k=new RegExp(m).exec(i);k&&(y=!0)&&S[v!=="Y"?"push":"unshift"]({fn:Qx[v],val:k[++p]})}else j||(m+=".")}_=!t||!t.noCalendar?new Date(new Date().getFullYear(),0,1,0,0,0,0):new Date(new Date().setHours(0,0,0,0)),S.forEach(function(I){var T=I.fn,J=I.val;return _=T(_,J,x)||_}),_=y?_:void 0}}if(!(_ instanceof Date&&!isNaN(_.getTime()))){t.errorHandler(new Error("Invalid date provided: "+C));return}return u===!0&&_.setHours(0,0,0,0),_}}};function _n(e,n,t){return t===void 0&&(t=!0),t!==!1?new Date(e.getTime()).setHours(0,0,0,0)-new Date(n.getTime()).setHours(0,0,0,0):e.getTime()-n.getTime()}var Jx=function(e,n,t){return e>Math.min(n,t)&&e<Math.max(n,t)},to=function(e,n,t){return e*3600+n*60+t},Xx=function(e){var n=Math.floor(e/3600),t=(e-n*3600)/60;return[n,t,e-n*3600-t*60]},Zx={DAY:864e5};function no(e){var n=e.defaultHour,t=e.defaultMinute,s=e.defaultSeconds;if(e.minDate!==void 0){var a=e.minDate.getHours(),i=e.minDate.getMinutes(),l=e.minDate.getSeconds();n<a&&(n=a),n===a&&t<i&&(t=i),n===a&&t===i&&s<l&&(s=e.minDate.getSeconds())}if(e.maxDate!==void 0){var u=e.maxDate.getHours(),d=e.maxDate.getMinutes();n=Math.min(n,u),n===u&&(t=Math.min(d,t)),n===u&&t===d&&(s=e.maxDate.getSeconds())}return{hours:n,minutes:t,seconds:s}}typeof Object.assign!="function"&&(Object.assign=function(e){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];if(!e)throw TypeError("Cannot convert undefined or null to object");for(var s=function(u){u&&Object.keys(u).forEach(function(d){return e[d]=u[d]})},a=0,i=n;a<i.length;a++){var l=i[a];s(l)}return e});var rn=function(){return rn=Object.assign||function(e){for(var n,t=1,s=arguments.length;t<s;t++){n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},rn.apply(this,arguments)},Yu=function(){for(var e=0,n=0,t=arguments.length;n<t;n++)e+=arguments[n].length;for(var s=Array(e),a=0,n=0;n<t;n++)for(var i=arguments[n],l=0,u=i.length;l<u;l++,a++)s[a]=i[l];return s},e0=300;function t0(e,n){var t={config:rn(rn({},ks),Wt.defaultConfig),l10n:Ta};t.parseDate=ic({config:t.config,l10n:t.l10n}),t._handlers=[],t.pluginElements=[],t.loadedPlugins=[],t._bind=S,t._setHoursFromDate=b,t._positionCalendar=ze,t.changeMonth=K,t.changeYear=je,t.clear=ee,t.close=ne,t.onMouseOver=Je,t._createElement=mt,t.createDay=k,t.destroy=oe,t.isEnabled=Re,t.jumpToDate=m,t.updateValue=Le,t.open=M,t.redraw=vt,t.set=ce,t.setDate=We,t.toggle=en;function s(){t.utils={getDaysInMonth:function(h,g){return h===void 0&&(h=t.currentMonth),g===void 0&&(g=t.currentYear),h===1&&(g%4===0&&g%100!==0||g%400===0)?29:t.l10n.daysInMonth[h]}}}function a(){t.element=t.input=e,t.isOpen=!1,W(),Ee(),Ct(),Xe(),s(),t.isMobile||D(),p(),(t.selectedDates.length||t.config.noCalendar)&&(t.config.enableTime&&b(t.config.noCalendar?t.latestSelectedDateObj:void 0),Le(!1)),u();var h=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!t.isMobile&&h&&ze(),rt("onReady")}function i(){var h;return((h=t.calendarContainer)===null||h===void 0?void 0:h.getRootNode()).activeElement||document.activeElement}function l(h){return h.bind(t)}function u(){var h=t.config;h.weekNumbers===!1&&h.showMonths===1||h.noCalendar!==!0&&window.requestAnimationFrame(function(){if(t.calendarContainer!==void 0&&(t.calendarContainer.style.visibility="hidden",t.calendarContainer.style.display="block"),t.daysContainer!==void 0){var g=(t.days.offsetWidth+1)*h.showMonths;t.daysContainer.style.width=g+"px",t.calendarContainer.style.width=g+(t.weekWrapper!==void 0?t.weekWrapper.offsetWidth:0)+"px",t.calendarContainer.style.removeProperty("visibility"),t.calendarContainer.style.removeProperty("display")}})}function d(h){if(t.selectedDates.length===0){var g=t.config.minDate===void 0||_n(new Date,t.config.minDate)>=0?new Date:new Date(t.config.minDate.getTime()),L=no(t.config);g.setHours(L.hours,L.minutes,L.seconds,g.getMilliseconds()),t.selectedDates=[g],t.latestSelectedDateObj=g}h!==void 0&&h.type!=="blur"&&H(h);var U=t._input.value;C(),Le(),t._input.value!==U&&t._debouncedChange()}function x(h,g){return h%12+12*In(g===t.l10n.amPM[1])}function _(h){switch(h%24){case 0:case 12:return 12;default:return h%12}}function C(){if(!(t.hourElement===void 0||t.minuteElement===void 0)){var h=(parseInt(t.hourElement.value.slice(-2),10)||0)%24,g=(parseInt(t.minuteElement.value,10)||0)%60,L=t.secondElement!==void 0?(parseInt(t.secondElement.value,10)||0)%60:0;t.amPM!==void 0&&(h=x(h,t.amPM.textContent));var U=t.config.minTime!==void 0||t.config.minDate&&t.minDateHasTime&&t.latestSelectedDateObj&&_n(t.latestSelectedDateObj,t.config.minDate,!0)===0,le=t.config.maxTime!==void 0||t.config.maxDate&&t.maxDateHasTime&&t.latestSelectedDateObj&&_n(t.latestSelectedDateObj,t.config.maxDate,!0)===0;if(t.config.maxTime!==void 0&&t.config.minTime!==void 0&&t.config.minTime>t.config.maxTime){var be=to(t.config.minTime.getHours(),t.config.minTime.getMinutes(),t.config.minTime.getSeconds()),Be=to(t.config.maxTime.getHours(),t.config.maxTime.getMinutes(),t.config.maxTime.getSeconds()),Te=to(h,g,L);if(Te>Be&&Te<be){var qe=Xx(be);h=qe[0],g=qe[1],L=qe[2]}}else{if(le){var De=t.config.maxTime!==void 0?t.config.maxTime:t.config.maxDate;h=Math.min(h,De.getHours()),h===De.getHours()&&(g=Math.min(g,De.getMinutes())),g===De.getMinutes()&&(L=Math.min(L,De.getSeconds()))}if(U){var $e=t.config.minTime!==void 0?t.config.minTime:t.config.minDate;h=Math.max(h,$e.getHours()),h===$e.getHours()&&g<$e.getMinutes()&&(g=$e.getMinutes()),g===$e.getMinutes()&&(L=Math.max(L,$e.getSeconds()))}}F(h,g,L)}}function b(h){var g=h||t.latestSelectedDateObj;g&&g instanceof Date&&F(g.getHours(),g.getMinutes(),g.getSeconds())}function F(h,g,L){t.latestSelectedDateObj!==void 0&&t.latestSelectedDateObj.setHours(h%24,g,L||0,0),!(!t.hourElement||!t.minuteElement||t.isMobile)&&(t.hourElement.value=pn(t.config.time_24hr?h:(12+h)%12+12*In(h%12===0)),t.minuteElement.value=pn(g),t.amPM!==void 0&&(t.amPM.textContent=t.l10n.amPM[In(h>=12)]),t.secondElement!==void 0&&(t.secondElement.value=pn(L)))}function y(h){var g=jn(h),L=parseInt(g.value)+(h.delta||0);(L/1e3>1||h.key==="Enter"&&!/[^\d]/.test(L.toString()))&&je(L)}function S(h,g,L,U){if(g instanceof Array)return g.forEach(function(le){return S(h,le,L,U)});if(h instanceof Array)return h.forEach(function(le){return S(le,g,L,U)});h.addEventListener(g,L,U),t._handlers.push({remove:function(){return h.removeEventListener(g,L,U)}})}function E(){rt("onChange")}function p(){if(t.config.wrap&&["open","close","toggle","clear"].forEach(function(L){Array.prototype.forEach.call(t.element.querySelectorAll("[data-"+L+"]"),function(U){return S(U,"click",t[L])})}),t.isMobile){wt();return}var h=Ku(G,50);if(t._debouncedChange=Ku(E,e0),t.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&S(t.daysContainer,"mouseover",function(L){t.config.mode==="range"&&Je(jn(L))}),S(t._input,"keydown",Ye),t.calendarContainer!==void 0&&S(t.calendarContainer,"keydown",Ye),!t.config.inline&&!t.config.static&&S(window,"resize",h),window.ontouchstart!==void 0?S(window.document,"touchstart",Ie):S(window.document,"mousedown",Ie),S(window.document,"focus",Ie,{capture:!0}),t.config.clickOpens===!0&&(S(t._input,"focus",t.open),S(t._input,"click",t.open)),t.daysContainer!==void 0&&(S(t.monthNav,"click",A),S(t.monthNav,["keyup","increment"],y),S(t.daysContainer,"click",Lt)),t.timeContainer!==void 0&&t.minuteElement!==void 0&&t.hourElement!==void 0){var g=function(L){return jn(L).select()};S(t.timeContainer,["increment"],d),S(t.timeContainer,"blur",d,{capture:!0}),S(t.timeContainer,"click",v),S([t.hourElement,t.minuteElement],["focus","click"],g),t.secondElement!==void 0&&S(t.secondElement,"focus",function(){return t.secondElement&&t.secondElement.select()}),t.amPM!==void 0&&S(t.amPM,"click",function(L){d(L)})}t.config.allowInput&&S(t._input,"blur",Qe)}function m(h,g){var L=h!==void 0?t.parseDate(h):t.latestSelectedDateObj||(t.config.minDate&&t.config.minDate>t.now?t.config.minDate:t.config.maxDate&&t.config.maxDate<t.now?t.config.maxDate:t.now),U=t.currentYear,le=t.currentMonth;try{L!==void 0&&(t.currentYear=L.getFullYear(),t.currentMonth=L.getMonth())}catch(be){be.message="Invalid date supplied: "+L,t.config.errorHandler(be)}g&&t.currentYear!==U&&(rt("onYearChange"),de()),g&&(t.currentYear!==U||t.currentMonth!==le)&&rt("onMonthChange"),t.redraw()}function v(h){var g=jn(h);~g.className.indexOf("arrow")&&j(h,g.classList.contains("arrowUp")?1:-1)}function j(h,g,L){var U=h&&jn(h),le=L||U&&U.parentNode&&U.parentNode.firstChild,be=f("increment");be.delta=g,le&&le.dispatchEvent(be)}function D(){var h=window.document.createDocumentFragment();if(t.calendarContainer=mt("div","flatpickr-calendar"),t.calendarContainer.tabIndex=-1,!t.config.noCalendar){if(h.appendChild(he()),t.innerContainer=mt("div","flatpickr-innerContainer"),t.config.weekNumbers){var g=fe(),L=g.weekWrapper,U=g.weekNumbers;t.innerContainer.appendChild(L),t.weekNumbers=U,t.weekWrapper=L}t.rContainer=mt("div","flatpickr-rContainer"),t.rContainer.appendChild(ue()),t.daysContainer||(t.daysContainer=mt("div","flatpickr-days"),t.daysContainer.tabIndex=-1),ae(),t.rContainer.appendChild(t.daysContainer),t.innerContainer.appendChild(t.rContainer),h.appendChild(t.innerContainer)}t.config.enableTime&&h.appendChild(we()),cn(t.calendarContainer,"rangeMode",t.config.mode==="range"),cn(t.calendarContainer,"animate",t.config.animate===!0),cn(t.calendarContainer,"multiMonth",t.config.showMonths>1),t.calendarContainer.appendChild(h);var le=t.config.appendTo!==void 0&&t.config.appendTo.nodeType!==void 0;if((t.config.inline||t.config.static)&&(t.calendarContainer.classList.add(t.config.inline?"inline":"static"),t.config.inline&&(!le&&t.element.parentNode?t.element.parentNode.insertBefore(t.calendarContainer,t._input.nextSibling):t.config.appendTo!==void 0&&t.config.appendTo.appendChild(t.calendarContainer)),t.config.static)){var be=mt("div","flatpickr-wrapper");t.element.parentNode&&t.element.parentNode.insertBefore(be,t.element),be.appendChild(t.element),t.altInput&&be.appendChild(t.altInput),be.appendChild(t.calendarContainer)}!t.config.static&&!t.config.inline&&(t.config.appendTo!==void 0?t.config.appendTo:window.document.body).appendChild(t.calendarContainer)}function k(h,g,L,U){var le=Re(g,!0),be=mt("span",h,g.getDate().toString());return be.dateObj=g,be.$i=U,be.setAttribute("aria-label",t.formatDate(g,t.config.ariaDateFormat)),h.indexOf("hidden")===-1&&_n(g,t.now)===0&&(t.todayDateElem=be,be.classList.add("today"),be.setAttribute("aria-current","date")),le?(be.tabIndex=-1,w(g)&&(be.classList.add("selected"),t.selectedDateElem=be,t.config.mode==="range"&&(cn(be,"startRange",t.selectedDates[0]&&_n(g,t.selectedDates[0],!0)===0),cn(be,"endRange",t.selectedDates[1]&&_n(g,t.selectedDates[1],!0)===0),h==="nextMonthDay"&&be.classList.add("inRange")))):be.classList.add("flatpickr-disabled"),t.config.mode==="range"&&z(g)&&!w(g)&&be.classList.add("inRange"),t.weekNumbers&&t.config.showMonths===1&&h!=="prevMonthDay"&&U%7===6&&t.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+t.config.getWeek(g)+"</span>"),rt("onDayCreate",be),be}function I(h){h.focus(),t.config.mode==="range"&&Je(h)}function T(h){for(var g=h>0?0:t.config.showMonths-1,L=h>0?t.config.showMonths:-1,U=g;U!=L;U+=h)for(var le=t.daysContainer.children[U],be=h>0?0:le.children.length-1,Be=h>0?le.children.length:-1,Te=be;Te!=Be;Te+=h){var qe=le.children[Te];if(qe.className.indexOf("hidden")===-1&&Re(qe.dateObj))return qe}}function J(h,g){for(var L=h.className.indexOf("Month")===-1?h.dateObj.getMonth():t.currentMonth,U=g>0?t.config.showMonths:-1,le=g>0?1:-1,be=L-t.currentMonth;be!=U;be+=le)for(var Be=t.daysContainer.children[be],Te=L-t.currentMonth===be?h.$i+g:g<0?Be.children.length-1:0,qe=Be.children.length,De=Te;De>=0&&De<qe&&De!=(g>0?qe:-1);De+=le){var $e=Be.children[De];if($e.className.indexOf("hidden")===-1&&Re($e.dateObj)&&Math.abs(h.$i-De)>=Math.abs(g))return I($e)}t.changeMonth(le),se(T(le),0)}function se(h,g){var L=i(),U=Pe(L||document.body),le=h!==void 0?h:U?L:t.selectedDateElem!==void 0&&Pe(t.selectedDateElem)?t.selectedDateElem:t.todayDateElem!==void 0&&Pe(t.todayDateElem)?t.todayDateElem:T(g>0?1:-1);le===void 0?t._input.focus():U?J(le,g):I(le)}function R(h,g){for(var L=(new Date(h,g,1).getDay()-t.l10n.firstDayOfWeek+7)%7,U=t.utils.getDaysInMonth((g-1+12)%12,h),le=t.utils.getDaysInMonth(g,h),be=window.document.createDocumentFragment(),Be=t.config.showMonths>1,Te=Be?"prevMonthDay hidden":"prevMonthDay",qe=Be?"nextMonthDay hidden":"nextMonthDay",De=U+1-L,$e=0;De<=U;De++,$e++)be.appendChild(k("flatpickr-day "+Te,new Date(h,g-1,De),De,$e));for(De=1;De<=le;De++,$e++)be.appendChild(k("flatpickr-day",new Date(h,g,De),De,$e));for(var tt=le+1;tt<=42-L&&(t.config.showMonths===1||$e%7!==0);tt++,$e++)be.appendChild(k("flatpickr-day "+qe,new Date(h,g+1,tt%le),tt,$e));var Pt=mt("div","dayContainer");return Pt.appendChild(be),Pt}function ae(){if(t.daysContainer!==void 0){ii(t.daysContainer),t.weekNumbers&&ii(t.weekNumbers);for(var h=document.createDocumentFragment(),g=0;g<t.config.showMonths;g++){var L=new Date(t.currentYear,t.currentMonth,1);L.setMonth(t.currentMonth+g),h.appendChild(R(L.getFullYear(),L.getMonth()))}t.daysContainer.appendChild(h),t.days=t.daysContainer.firstChild,t.config.mode==="range"&&t.selectedDates.length===1&&Je()}}function de(){if(!(t.config.showMonths>1||t.config.monthSelectorType!=="dropdown")){var h=function(U){return t.config.minDate!==void 0&&t.currentYear===t.config.minDate.getFullYear()&&U<t.config.minDate.getMonth()?!1:!(t.config.maxDate!==void 0&&t.currentYear===t.config.maxDate.getFullYear()&&U>t.config.maxDate.getMonth())};t.monthsDropdownContainer.tabIndex=-1,t.monthsDropdownContainer.innerHTML="";for(var g=0;g<12;g++)if(h(g)){var L=mt("option","flatpickr-monthDropdown-month");L.value=new Date(t.currentYear,g).getMonth().toString(),L.textContent=Zi(g,t.config.shorthandCurrentMonth,t.l10n),L.tabIndex=-1,t.currentMonth===g&&(L.selected=!0),t.monthsDropdownContainer.appendChild(L)}}}function Ne(){var h=mt("div","flatpickr-month"),g=window.document.createDocumentFragment(),L;t.config.showMonths>1||t.config.monthSelectorType==="static"?L=mt("span","cur-month"):(t.monthsDropdownContainer=mt("select","flatpickr-monthDropdown-months"),t.monthsDropdownContainer.setAttribute("aria-label",t.l10n.monthAriaLabel),S(t.monthsDropdownContainer,"change",function(Be){var Te=jn(Be),qe=parseInt(Te.value,10);t.changeMonth(qe-t.currentMonth),rt("onMonthChange")}),de(),L=t.monthsDropdownContainer);var U=li("cur-year",{tabindex:"-1"}),le=U.getElementsByTagName("input")[0];le.setAttribute("aria-label",t.l10n.yearAriaLabel),t.config.minDate&&le.setAttribute("min",t.config.minDate.getFullYear().toString()),t.config.maxDate&&(le.setAttribute("max",t.config.maxDate.getFullYear().toString()),le.disabled=!!t.config.minDate&&t.config.minDate.getFullYear()===t.config.maxDate.getFullYear());var be=mt("div","flatpickr-current-month");return be.appendChild(L),be.appendChild(U),g.appendChild(be),h.appendChild(g),{container:h,yearElement:le,monthElement:L}}function me(){ii(t.monthNav),t.monthNav.appendChild(t.prevMonthNav),t.config.showMonths&&(t.yearElements=[],t.monthElements=[]);for(var h=t.config.showMonths;h--;){var g=Ne();t.yearElements.push(g.yearElement),t.monthElements.push(g.monthElement),t.monthNav.appendChild(g.container)}t.monthNav.appendChild(t.nextMonthNav)}function he(){return t.monthNav=mt("div","flatpickr-months"),t.yearElements=[],t.monthElements=[],t.prevMonthNav=mt("span","flatpickr-prev-month"),t.prevMonthNav.innerHTML=t.config.prevArrow,t.nextMonthNav=mt("span","flatpickr-next-month"),t.nextMonthNav.innerHTML=t.config.nextArrow,me(),Object.defineProperty(t,"_hidePrevMonthArrow",{get:function(){return t.__hidePrevMonthArrow},set:function(h){t.__hidePrevMonthArrow!==h&&(cn(t.prevMonthNav,"flatpickr-disabled",h),t.__hidePrevMonthArrow=h)}}),Object.defineProperty(t,"_hideNextMonthArrow",{get:function(){return t.__hideNextMonthArrow},set:function(h){t.__hideNextMonthArrow!==h&&(cn(t.nextMonthNav,"flatpickr-disabled",h),t.__hideNextMonthArrow=h)}}),t.currentYearElement=t.yearElements[0],V(),t.monthNav}function we(){t.calendarContainer.classList.add("hasTime"),t.config.noCalendar&&t.calendarContainer.classList.add("noCalendar");var h=no(t.config);t.timeContainer=mt("div","flatpickr-time"),t.timeContainer.tabIndex=-1;var g=mt("span","flatpickr-time-separator",":"),L=li("flatpickr-hour",{"aria-label":t.l10n.hourAriaLabel});t.hourElement=L.getElementsByTagName("input")[0];var U=li("flatpickr-minute",{"aria-label":t.l10n.minuteAriaLabel});if(t.minuteElement=U.getElementsByTagName("input")[0],t.hourElement.tabIndex=t.minuteElement.tabIndex=-1,t.hourElement.value=pn(t.latestSelectedDateObj?t.latestSelectedDateObj.getHours():t.config.time_24hr?h.hours:_(h.hours)),t.minuteElement.value=pn(t.latestSelectedDateObj?t.latestSelectedDateObj.getMinutes():h.minutes),t.hourElement.setAttribute("step",t.config.hourIncrement.toString()),t.minuteElement.setAttribute("step",t.config.minuteIncrement.toString()),t.hourElement.setAttribute("min",t.config.time_24hr?"0":"1"),t.hourElement.setAttribute("max",t.config.time_24hr?"23":"12"),t.hourElement.setAttribute("maxlength","2"),t.minuteElement.setAttribute("min","0"),t.minuteElement.setAttribute("max","59"),t.minuteElement.setAttribute("maxlength","2"),t.timeContainer.appendChild(L),t.timeContainer.appendChild(g),t.timeContainer.appendChild(U),t.config.time_24hr&&t.timeContainer.classList.add("time24hr"),t.config.enableSeconds){t.timeContainer.classList.add("hasSeconds");var le=li("flatpickr-second");t.secondElement=le.getElementsByTagName("input")[0],t.secondElement.value=pn(t.latestSelectedDateObj?t.latestSelectedDateObj.getSeconds():h.seconds),t.secondElement.setAttribute("step",t.minuteElement.getAttribute("step")),t.secondElement.setAttribute("min","0"),t.secondElement.setAttribute("max","59"),t.secondElement.setAttribute("maxlength","2"),t.timeContainer.appendChild(mt("span","flatpickr-time-separator",":")),t.timeContainer.appendChild(le)}return t.config.time_24hr||(t.amPM=mt("span","flatpickr-am-pm",t.l10n.amPM[In((t.latestSelectedDateObj?t.hourElement.value:t.config.defaultHour)>11)]),t.amPM.title=t.l10n.toggleTitle,t.amPM.tabIndex=-1,t.timeContainer.appendChild(t.amPM)),t.timeContainer}function ue(){t.weekdayContainer?ii(t.weekdayContainer):t.weekdayContainer=mt("div","flatpickr-weekdays");for(var h=t.config.showMonths;h--;){var g=mt("div","flatpickr-weekdaycontainer");t.weekdayContainer.appendChild(g)}return ge(),t.weekdayContainer}function ge(){if(t.weekdayContainer){var h=t.l10n.firstDayOfWeek,g=Yu(t.l10n.weekdays.shorthand);h>0&&h<g.length&&(g=Yu(g.splice(h,g.length),g.splice(0,h)));for(var L=t.config.showMonths;L--;)t.weekdayContainer.children[L].innerHTML=`
      <span class='flatpickr-weekday'>
        `+g.join("</span><span class='flatpickr-weekday'>")+`
      </span>
      `}}function fe(){t.calendarContainer.classList.add("hasWeeks");var h=mt("div","flatpickr-weekwrapper");h.appendChild(mt("span","flatpickr-weekday",t.l10n.weekAbbreviation));var g=mt("div","flatpickr-weeks");return h.appendChild(g),{weekWrapper:h,weekNumbers:g}}function K(h,g){g===void 0&&(g=!0);var L=g?h:h-t.currentMonth;L<0&&t._hidePrevMonthArrow===!0||L>0&&t._hideNextMonthArrow===!0||(t.currentMonth+=L,(t.currentMonth<0||t.currentMonth>11)&&(t.currentYear+=t.currentMonth>11?1:-1,t.currentMonth=(t.currentMonth+12)%12,rt("onYearChange"),de()),ae(),rt("onMonthChange"),V())}function ee(h,g){if(h===void 0&&(h=!0),g===void 0&&(g=!0),t.input.value="",t.altInput!==void 0&&(t.altInput.value=""),t.mobileInput!==void 0&&(t.mobileInput.value=""),t.selectedDates=[],t.latestSelectedDateObj=void 0,g===!0&&(t.currentYear=t._initialDate.getFullYear(),t.currentMonth=t._initialDate.getMonth()),t.config.enableTime===!0){var L=no(t.config),U=L.hours,le=L.minutes,be=L.seconds;F(U,le,be)}t.redraw(),h&&rt("onChange")}function ne(){t.isOpen=!1,t.isMobile||(t.calendarContainer!==void 0&&t.calendarContainer.classList.remove("open"),t._input!==void 0&&t._input.classList.remove("active")),rt("onClose")}function oe(){t.config!==void 0&&rt("onDestroy");for(var h=t._handlers.length;h--;)t._handlers[h].remove();if(t._handlers=[],t.mobileInput)t.mobileInput.parentNode&&t.mobileInput.parentNode.removeChild(t.mobileInput),t.mobileInput=void 0;else if(t.calendarContainer&&t.calendarContainer.parentNode)if(t.config.static&&t.calendarContainer.parentNode){var g=t.calendarContainer.parentNode;if(g.lastChild&&g.removeChild(g.lastChild),g.parentNode){for(;g.firstChild;)g.parentNode.insertBefore(g.firstChild,g);g.parentNode.removeChild(g)}}else t.calendarContainer.parentNode.removeChild(t.calendarContainer);t.altInput&&(t.input.type="text",t.altInput.parentNode&&t.altInput.parentNode.removeChild(t.altInput),delete t.altInput),t.input&&(t.input.type=t.input._type,t.input.classList.remove("flatpickr-input"),t.input.removeAttribute("readonly")),["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","monthsDropdownContainer","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach(function(L){try{delete t[L]}catch{}})}function pe(h){return t.calendarContainer.contains(h)}function Ie(h){if(t.isOpen&&!t.config.inline){var g=jn(h),L=pe(g),U=g===t.input||g===t.altInput||t.element.contains(g)||h.path&&h.path.indexOf&&(~h.path.indexOf(t.input)||~h.path.indexOf(t.altInput)),le=!U&&!L&&!pe(h.relatedTarget),be=!t.config.ignoredFocusElements.some(function(Be){return Be.contains(g)});le&&be&&(t.config.allowInput&&t.setDate(t._input.value,!1,t.config.altInput?t.config.altFormat:t.config.dateFormat),t.timeContainer!==void 0&&t.minuteElement!==void 0&&t.hourElement!==void 0&&t.input.value!==""&&t.input.value!==void 0&&d(),t.close(),t.config&&t.config.mode==="range"&&t.selectedDates.length===1&&t.clear(!1))}}function je(h){if(!(!h||t.config.minDate&&h<t.config.minDate.getFullYear()||t.config.maxDate&&h>t.config.maxDate.getFullYear())){var g=h,L=t.currentYear!==g;t.currentYear=g||t.currentYear,t.config.maxDate&&t.currentYear===t.config.maxDate.getFullYear()?t.currentMonth=Math.min(t.config.maxDate.getMonth(),t.currentMonth):t.config.minDate&&t.currentYear===t.config.minDate.getFullYear()&&(t.currentMonth=Math.max(t.config.minDate.getMonth(),t.currentMonth)),L&&(t.redraw(),rt("onYearChange"),de())}}function Re(h,g){var L;g===void 0&&(g=!0);var U=t.parseDate(h,void 0,g);if(t.config.minDate&&U&&_n(U,t.config.minDate,g!==void 0?g:!t.minDateHasTime)<0||t.config.maxDate&&U&&_n(U,t.config.maxDate,g!==void 0?g:!t.maxDateHasTime)>0)return!1;if(!t.config.enable&&t.config.disable.length===0)return!0;if(U===void 0)return!1;for(var le=!!t.config.enable,be=(L=t.config.enable)!==null&&L!==void 0?L:t.config.disable,Be=0,Te=void 0;Be<be.length;Be++){if(Te=be[Be],typeof Te=="function"&&Te(U))return le;if(Te instanceof Date&&U!==void 0&&Te.getTime()===U.getTime())return le;if(typeof Te=="string"){var qe=t.parseDate(Te,void 0,!0);return qe&&qe.getTime()===U.getTime()?le:!le}else if(typeof Te=="object"&&U!==void 0&&Te.from&&Te.to&&U.getTime()>=Te.from.getTime()&&U.getTime()<=Te.to.getTime())return le}return!le}function Pe(h){return t.daysContainer!==void 0?h.className.indexOf("hidden")===-1&&h.className.indexOf("flatpickr-disabled")===-1&&t.daysContainer.contains(h):!1}function Qe(h){var g=h.target===t._input,L=t._input.value.trimEnd()!==Fe();g&&L&&!(h.relatedTarget&&pe(h.relatedTarget))&&t.setDate(t._input.value,!0,h.target===t.altInput?t.config.altFormat:t.config.dateFormat)}function Ye(h){var g=jn(h),L=t.config.wrap?e.contains(g):g===t._input,U=t.config.allowInput,le=t.isOpen&&(!U||!L),be=t.config.inline&&L&&!U;if(h.keyCode===13&&L){if(U)return t.setDate(t._input.value,!0,g===t.altInput?t.config.altFormat:t.config.dateFormat),t.close(),g.blur();t.open()}else if(pe(g)||le||be){var Be=!!t.timeContainer&&t.timeContainer.contains(g);switch(h.keyCode){case 13:Be?(h.preventDefault(),d(),Nt()):Lt(h);break;case 27:h.preventDefault(),Nt();break;case 8:case 46:L&&!t.config.allowInput&&(h.preventDefault(),t.clear());break;case 37:case 39:if(!Be&&!L){h.preventDefault();var Te=i();if(t.daysContainer!==void 0&&(U===!1||Te&&Pe(Te))){var qe=h.keyCode===39?1:-1;h.ctrlKey?(h.stopPropagation(),K(qe),se(T(1),0)):se(void 0,qe)}}else t.hourElement&&t.hourElement.focus();break;case 38:case 40:h.preventDefault();var De=h.keyCode===40?1:-1;t.daysContainer&&g.$i!==void 0||g===t.input||g===t.altInput?h.ctrlKey?(h.stopPropagation(),je(t.currentYear-De),se(T(1),0)):Be||se(void 0,De*7):g===t.currentYearElement?je(t.currentYear-De):t.config.enableTime&&(!Be&&t.hourElement&&t.hourElement.focus(),d(h),t._debouncedChange());break;case 9:if(Be){var $e=[t.hourElement,t.minuteElement,t.secondElement,t.amPM].concat(t.pluginElements).filter(function(Et){return Et}),tt=$e.indexOf(g);if(tt!==-1){var Pt=$e[tt+(h.shiftKey?-1:1)];h.preventDefault(),(Pt||t._input).focus()}}else!t.config.noCalendar&&t.daysContainer&&t.daysContainer.contains(g)&&h.shiftKey&&(h.preventDefault(),t._input.focus());break}}if(t.amPM!==void 0&&g===t.amPM)switch(h.key){case t.l10n.amPM[0].charAt(0):case t.l10n.amPM[0].charAt(0).toLowerCase():t.amPM.textContent=t.l10n.amPM[0],C(),Le();break;case t.l10n.amPM[1].charAt(0):case t.l10n.amPM[1].charAt(0).toLowerCase():t.amPM.textContent=t.l10n.amPM[1],C(),Le();break}(L||pe(g))&&rt("onKeyDown",h)}function Je(h,g){if(g===void 0&&(g="flatpickr-day"),!(t.selectedDates.length!==1||h&&(!h.classList.contains(g)||h.classList.contains("flatpickr-disabled")))){for(var L=h?h.dateObj.getTime():t.days.firstElementChild.dateObj.getTime(),U=t.parseDate(t.selectedDates[0],void 0,!0).getTime(),le=Math.min(L,t.selectedDates[0].getTime()),be=Math.max(L,t.selectedDates[0].getTime()),Be=!1,Te=0,qe=0,De=le;De<be;De+=Zx.DAY)Re(new Date(De),!0)||(Be=Be||De>le&&De<be,De<U&&(!Te||De>Te)?Te=De:De>U&&(!qe||De<qe)&&(qe=De));var $e=Array.from(t.rContainer.querySelectorAll("*:nth-child(-n+"+t.config.showMonths+") > ."+g));$e.forEach(function(tt){var Pt=tt.dateObj,Et=Pt.getTime(),O=Te>0&&Et<Te||qe>0&&Et>qe;if(O){tt.classList.add("notAllowed"),["inRange","startRange","endRange"].forEach(function(Y){tt.classList.remove(Y)});return}else if(Be&&!O)return;["startRange","inRange","endRange","notAllowed"].forEach(function(Y){tt.classList.remove(Y)}),h!==void 0&&(h.classList.add(L<=t.selectedDates[0].getTime()?"startRange":"endRange"),U<L&&Et===U?tt.classList.add("startRange"):U>L&&Et===U&&tt.classList.add("endRange"),Et>=Te&&(qe===0||Et<=qe)&&Jx(Et,U,L)&&tt.classList.add("inRange"))})}}function G(){t.isOpen&&!t.config.static&&!t.config.inline&&ze()}function M(h,g){if(g===void 0&&(g=t._positionElement),t.isMobile===!0){if(h){h.preventDefault();var L=jn(h);L&&L.blur()}t.mobileInput!==void 0&&(t.mobileInput.focus(),t.mobileInput.click()),rt("onOpen");return}else if(t._input.disabled||t.config.inline)return;var U=t.isOpen;t.isOpen=!0,U||(t.calendarContainer.classList.add("open"),t._input.classList.add("active"),rt("onOpen"),ze(g)),t.config.enableTime===!0&&t.config.noCalendar===!0&&t.config.allowInput===!1&&(h===void 0||!t.timeContainer.contains(h.relatedTarget))&&setTimeout(function(){return t.hourElement.select()},50)}function $(h){return function(g){var L=t.config["_"+h+"Date"]=t.parseDate(g,t.config.dateFormat),U=t.config["_"+(h==="min"?"max":"min")+"Date"];L!==void 0&&(t[h==="min"?"minDateHasTime":"maxDateHasTime"]=L.getHours()>0||L.getMinutes()>0||L.getSeconds()>0),t.selectedDates&&(t.selectedDates=t.selectedDates.filter(function(le){return Re(le)}),!t.selectedDates.length&&h==="min"&&b(L),Le()),t.daysContainer&&(vt(),L!==void 0?t.currentYearElement[h]=L.getFullYear().toString():t.currentYearElement.removeAttribute(h),t.currentYearElement.disabled=!!U&&L!==void 0&&U.getFullYear()===L.getFullYear())}}function W(){var h=["wrap","weekNumbers","allowInput","allowInvalidPreload","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],g=rn(rn({},JSON.parse(JSON.stringify(e.dataset||{}))),n),L={};t.config.parseDate=g.parseDate,t.config.formatDate=g.formatDate,Object.defineProperty(t.config,"enable",{get:function(){return t.config._enable},set:function($e){t.config._enable=ot($e)}}),Object.defineProperty(t.config,"disable",{get:function(){return t.config._disable},set:function($e){t.config._disable=ot($e)}});var U=g.mode==="time";if(!g.dateFormat&&(g.enableTime||U)){var le=Wt.defaultConfig.dateFormat||ks.dateFormat;L.dateFormat=g.noCalendar||U?"H:i"+(g.enableSeconds?":S":""):le+" H:i"+(g.enableSeconds?":S":"")}if(g.altInput&&(g.enableTime||U)&&!g.altFormat){var be=Wt.defaultConfig.altFormat||ks.altFormat;L.altFormat=g.noCalendar||U?"h:i"+(g.enableSeconds?":S K":" K"):be+(" h:i"+(g.enableSeconds?":S":"")+" K")}Object.defineProperty(t.config,"minDate",{get:function(){return t.config._minDate},set:$("min")}),Object.defineProperty(t.config,"maxDate",{get:function(){return t.config._maxDate},set:$("max")});var Be=function($e){return function(tt){t.config[$e==="min"?"_minTime":"_maxTime"]=t.parseDate(tt,"H:i:S")}};Object.defineProperty(t.config,"minTime",{get:function(){return t.config._minTime},set:Be("min")}),Object.defineProperty(t.config,"maxTime",{get:function(){return t.config._maxTime},set:Be("max")}),g.mode==="time"&&(t.config.noCalendar=!0,t.config.enableTime=!0),Object.assign(t.config,L,g);for(var Te=0;Te<h.length;Te++)t.config[h[Te]]=t.config[h[Te]]===!0||t.config[h[Te]]==="true";Xl.filter(function($e){return t.config[$e]!==void 0}).forEach(function($e){t.config[$e]=Zl(t.config[$e]||[]).map(l)}),t.isMobile=!t.config.disableMobile&&!t.config.inline&&t.config.mode==="single"&&!t.config.disable.length&&!t.config.enable&&!t.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);for(var Te=0;Te<t.config.plugins.length;Te++){var qe=t.config.plugins[Te](t)||{};for(var De in qe)Xl.indexOf(De)>-1?t.config[De]=Zl(qe[De]).map(l).concat(t.config[De]):typeof g[De]>"u"&&(t.config[De]=qe[De])}g.altInputClass||(t.config.altInputClass=Z().className+" "+t.config.altInputClass),rt("onParseConfig")}function Z(){return t.config.wrap?e.querySelector("[data-input]"):e}function Ee(){typeof t.config.locale!="object"&&typeof Wt.l10ns[t.config.locale]>"u"&&t.config.errorHandler(new Error("flatpickr: invalid locale "+t.config.locale)),t.l10n=rn(rn({},Wt.l10ns.default),typeof t.config.locale=="object"?t.config.locale:t.config.locale!=="default"?Wt.l10ns[t.config.locale]:void 0),Wr.D="("+t.l10n.weekdays.shorthand.join("|")+")",Wr.l="("+t.l10n.weekdays.longhand.join("|")+")",Wr.M="("+t.l10n.months.shorthand.join("|")+")",Wr.F="("+t.l10n.months.longhand.join("|")+")",Wr.K="("+t.l10n.amPM[0]+"|"+t.l10n.amPM[1]+"|"+t.l10n.amPM[0].toLowerCase()+"|"+t.l10n.amPM[1].toLowerCase()+")";var h=rn(rn({},n),JSON.parse(JSON.stringify(e.dataset||{})));h.time_24hr===void 0&&Wt.defaultConfig.time_24hr===void 0&&(t.config.time_24hr=t.l10n.time_24hr),t.formatDate=eh(t),t.parseDate=ic({config:t.config,l10n:t.l10n})}function ze(h){if(typeof t.config.position=="function")return void t.config.position(t,h);if(t.calendarContainer!==void 0){rt("onPreCalendarPosition");var g=h||t._positionElement,L=Array.prototype.reduce.call(t.calendarContainer.children,function(ke,Ue){return ke+Ue.offsetHeight},0),U=t.calendarContainer.offsetWidth,le=t.config.position.split(" "),be=le[0],Be=le.length>1?le[1]:null,Te=g.getBoundingClientRect(),qe=window.innerHeight-Te.bottom,De=be==="above"||be!=="below"&&qe<L&&Te.top>L,$e=window.pageYOffset+Te.top+(De?-L-2:g.offsetHeight+2);if(cn(t.calendarContainer,"arrowTop",!De),cn(t.calendarContainer,"arrowBottom",De),!t.config.inline){var tt=window.pageXOffset+Te.left,Pt=!1,Et=!1;Be==="center"?(tt-=(U-Te.width)/2,Pt=!0):Be==="right"&&(tt-=U-Te.width,Et=!0),cn(t.calendarContainer,"arrowLeft",!Pt&&!Et),cn(t.calendarContainer,"arrowCenter",Pt),cn(t.calendarContainer,"arrowRight",Et);var O=window.document.body.offsetWidth-(window.pageXOffset+Te.right),Y=tt+U>window.document.body.offsetWidth,Q=O+U>window.document.body.offsetWidth;if(cn(t.calendarContainer,"rightMost",Y),!t.config.static)if(t.calendarContainer.style.top=$e+"px",!Y)t.calendarContainer.style.left=tt+"px",t.calendarContainer.style.right="auto";else if(!Q)t.calendarContainer.style.left="auto",t.calendarContainer.style.right=O+"px";else{var q=re();if(q===void 0)return;var _e=window.document.body.offsetWidth,Ce=Math.max(0,_e/2-U/2),P=".flatpickr-calendar.centerMost:before",Se=".flatpickr-calendar.centerMost:after",Ze=q.cssRules.length,Ae="{left:"+Te.left+"px;right:auto;}";cn(t.calendarContainer,"rightMost",!1),cn(t.calendarContainer,"centerMost",!0),q.insertRule(P+","+Se+Ae,Ze),t.calendarContainer.style.left=Ce+"px",t.calendarContainer.style.right="auto"}}}}function re(){for(var h=null,g=0;g<document.styleSheets.length;g++){var L=document.styleSheets[g];if(L.cssRules){try{L.cssRules}catch{continue}h=L;break}}return h??lt()}function lt(){var h=document.createElement("style");return document.head.appendChild(h),h.sheet}function vt(){t.config.noCalendar||t.isMobile||(de(),V(),ae())}function Nt(){t._input.focus(),window.navigator.userAgent.indexOf("MSIE")!==-1||navigator.msMaxTouchPoints!==void 0?setTimeout(t.close,0):t.close()}function Lt(h){h.preventDefault(),h.stopPropagation();var g=function($e){return $e.classList&&$e.classList.contains("flatpickr-day")&&!$e.classList.contains("flatpickr-disabled")&&!$e.classList.contains("notAllowed")},L=Zp(jn(h),g);if(L!==void 0){var U=L,le=t.latestSelectedDateObj=new Date(U.dateObj.getTime()),be=(le.getMonth()<t.currentMonth||le.getMonth()>t.currentMonth+t.config.showMonths-1)&&t.config.mode!=="range";if(t.selectedDateElem=U,t.config.mode==="single")t.selectedDates=[le];else if(t.config.mode==="multiple"){var Be=w(le);Be?t.selectedDates.splice(parseInt(Be),1):t.selectedDates.push(le)}else t.config.mode==="range"&&(t.selectedDates.length===2&&t.clear(!1,!1),t.latestSelectedDateObj=le,t.selectedDates.push(le),_n(le,t.selectedDates[0],!0)!==0&&t.selectedDates.sort(function($e,tt){return $e.getTime()-tt.getTime()}));if(C(),be){var Te=t.currentYear!==le.getFullYear();t.currentYear=le.getFullYear(),t.currentMonth=le.getMonth(),Te&&(rt("onYearChange"),de()),rt("onMonthChange")}if(V(),ae(),Le(),!be&&t.config.mode!=="range"&&t.config.showMonths===1?I(U):t.selectedDateElem!==void 0&&t.hourElement===void 0&&t.selectedDateElem&&t.selectedDateElem.focus(),t.hourElement!==void 0&&t.hourElement!==void 0&&t.hourElement.focus(),t.config.closeOnSelect){var qe=t.config.mode==="single"&&!t.config.enableTime,De=t.config.mode==="range"&&t.selectedDates.length===2&&!t.config.enableTime;(qe||De)&&Nt()}E()}}var X={locale:[Ee,ge],showMonths:[me,u,ue],minDate:[m],maxDate:[m],positionElement:[pt],clickOpens:[function(){t.config.clickOpens===!0?(S(t._input,"focus",t.open),S(t._input,"click",t.open)):(t._input.removeEventListener("focus",t.open),t._input.removeEventListener("click",t.open))}]};function ce(h,g){if(h!==null&&typeof h=="object"){Object.assign(t.config,h);for(var L in h)X[L]!==void 0&&X[L].forEach(function(U){return U()})}else t.config[h]=g,X[h]!==void 0?X[h].forEach(function(U){return U()}):Xl.indexOf(h)>-1&&(t.config[h]=Zl(g));t.redraw(),Le(!0)}function ve(h,g){var L=[];if(h instanceof Array)L=h.map(function(U){return t.parseDate(U,g)});else if(h instanceof Date||typeof h=="number")L=[t.parseDate(h,g)];else if(typeof h=="string")switch(t.config.mode){case"single":case"time":L=[t.parseDate(h,g)];break;case"multiple":L=h.split(t.config.conjunction).map(function(U){return t.parseDate(U,g)});break;case"range":L=h.split(t.l10n.rangeSeparator).map(function(U){return t.parseDate(U,g)});break}else t.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(h)));t.selectedDates=t.config.allowInvalidPreload?L:L.filter(function(U){return U instanceof Date&&Re(U,!1)}),t.config.mode==="range"&&t.selectedDates.sort(function(U,le){return U.getTime()-le.getTime()})}function We(h,g,L){if(g===void 0&&(g=!1),L===void 0&&(L=t.config.dateFormat),h!==0&&!h||h instanceof Array&&h.length===0)return t.clear(g);ve(h,L),t.latestSelectedDateObj=t.selectedDates[t.selectedDates.length-1],t.redraw(),m(void 0,g),b(),t.selectedDates.length===0&&t.clear(!1),Le(g),g&&rt("onChange")}function ot(h){return h.slice().map(function(g){return typeof g=="string"||typeof g=="number"||g instanceof Date?t.parseDate(g,void 0,!0):g&&typeof g=="object"&&g.from&&g.to?{from:t.parseDate(g.from,void 0),to:t.parseDate(g.to,void 0)}:g}).filter(function(g){return g})}function Xe(){t.selectedDates=[],t.now=t.parseDate(t.config.now)||new Date;var h=t.config.defaultDate||((t.input.nodeName==="INPUT"||t.input.nodeName==="TEXTAREA")&&t.input.placeholder&&t.input.value===t.input.placeholder?null:t.input.value);h&&ve(h,t.config.dateFormat),t._initialDate=t.selectedDates.length>0?t.selectedDates[0]:t.config.minDate&&t.config.minDate.getTime()>t.now.getTime()?t.config.minDate:t.config.maxDate&&t.config.maxDate.getTime()<t.now.getTime()?t.config.maxDate:t.now,t.currentYear=t._initialDate.getFullYear(),t.currentMonth=t._initialDate.getMonth(),t.selectedDates.length>0&&(t.latestSelectedDateObj=t.selectedDates[0]),t.config.minTime!==void 0&&(t.config.minTime=t.parseDate(t.config.minTime,"H:i")),t.config.maxTime!==void 0&&(t.config.maxTime=t.parseDate(t.config.maxTime,"H:i")),t.minDateHasTime=!!t.config.minDate&&(t.config.minDate.getHours()>0||t.config.minDate.getMinutes()>0||t.config.minDate.getSeconds()>0),t.maxDateHasTime=!!t.config.maxDate&&(t.config.maxDate.getHours()>0||t.config.maxDate.getMinutes()>0||t.config.maxDate.getSeconds()>0)}function Ct(){if(t.input=Z(),!t.input){t.config.errorHandler(new Error("Invalid input element specified"));return}t.input._type=t.input.type,t.input.type="text",t.input.classList.add("flatpickr-input"),t._input=t.input,t.config.altInput&&(t.altInput=mt(t.input.nodeName,t.config.altInputClass),t._input=t.altInput,t.altInput.placeholder=t.input.placeholder,t.altInput.disabled=t.input.disabled,t.altInput.required=t.input.required,t.altInput.tabIndex=t.input.tabIndex,t.altInput.type="text",t.input.setAttribute("type","hidden"),!t.config.static&&t.input.parentNode&&t.input.parentNode.insertBefore(t.altInput,t.input.nextSibling)),t.config.allowInput||t._input.setAttribute("readonly","readonly"),pt()}function pt(){t._positionElement=t.config.positionElement||t._input}function wt(){var h=t.config.enableTime?t.config.noCalendar?"time":"datetime-local":"date";t.mobileInput=mt("input",t.input.className+" flatpickr-mobile"),t.mobileInput.tabIndex=1,t.mobileInput.type=h,t.mobileInput.disabled=t.input.disabled,t.mobileInput.required=t.input.required,t.mobileInput.placeholder=t.input.placeholder,t.mobileFormatStr=h==="datetime-local"?"Y-m-d\\TH:i:S":h==="date"?"Y-m-d":"H:i:S",t.selectedDates.length>0&&(t.mobileInput.defaultValue=t.mobileInput.value=t.formatDate(t.selectedDates[0],t.mobileFormatStr)),t.config.minDate&&(t.mobileInput.min=t.formatDate(t.config.minDate,"Y-m-d")),t.config.maxDate&&(t.mobileInput.max=t.formatDate(t.config.maxDate,"Y-m-d")),t.input.getAttribute("step")&&(t.mobileInput.step=String(t.input.getAttribute("step"))),t.input.type="hidden",t.altInput!==void 0&&(t.altInput.type="hidden");try{t.input.parentNode&&t.input.parentNode.insertBefore(t.mobileInput,t.input.nextSibling)}catch{}S(t.mobileInput,"change",function(g){t.setDate(jn(g).value,!1,t.mobileFormatStr),rt("onChange"),rt("onClose")})}function en(h){if(t.isOpen===!0)return t.close();t.open(h)}function rt(h,g){if(t.config!==void 0){var L=t.config[h];if(L!==void 0&&L.length>0)for(var U=0;L[U]&&U<L.length;U++)L[U](t.selectedDates,t.input.value,t,g);h==="onChange"&&(t.input.dispatchEvent(f("change")),t.input.dispatchEvent(f("input")))}}function f(h){var g=document.createEvent("Event");return g.initEvent(h,!0,!0),g}function w(h){for(var g=0;g<t.selectedDates.length;g++){var L=t.selectedDates[g];if(L instanceof Date&&_n(L,h)===0)return""+g}return!1}function z(h){return t.config.mode!=="range"||t.selectedDates.length<2?!1:_n(h,t.selectedDates[0])>=0&&_n(h,t.selectedDates[1])<=0}function V(){t.config.noCalendar||t.isMobile||!t.monthNav||(t.yearElements.forEach(function(h,g){var L=new Date(t.currentYear,t.currentMonth,1);L.setMonth(t.currentMonth+g),t.config.showMonths>1||t.config.monthSelectorType==="static"?t.monthElements[g].textContent=Zi(L.getMonth(),t.config.shorthandCurrentMonth,t.l10n)+" ":t.monthsDropdownContainer.value=L.getMonth().toString(),h.value=L.getFullYear().toString()}),t._hidePrevMonthArrow=t.config.minDate!==void 0&&(t.currentYear===t.config.minDate.getFullYear()?t.currentMonth<=t.config.minDate.getMonth():t.currentYear<t.config.minDate.getFullYear()),t._hideNextMonthArrow=t.config.maxDate!==void 0&&(t.currentYear===t.config.maxDate.getFullYear()?t.currentMonth+1>t.config.maxDate.getMonth():t.currentYear>t.config.maxDate.getFullYear()))}function Fe(h){var g=h||(t.config.altInput?t.config.altFormat:t.config.dateFormat);return t.selectedDates.map(function(L){return t.formatDate(L,g)}).filter(function(L,U,le){return t.config.mode!=="range"||t.config.enableTime||le.indexOf(L)===U}).join(t.config.mode!=="range"?t.config.conjunction:t.l10n.rangeSeparator)}function Le(h){h===void 0&&(h=!0),t.mobileInput!==void 0&&t.mobileFormatStr&&(t.mobileInput.value=t.latestSelectedDateObj!==void 0?t.formatDate(t.latestSelectedDateObj,t.mobileFormatStr):""),t.input.value=Fe(t.config.dateFormat),t.altInput!==void 0&&(t.altInput.value=Fe(t.config.altFormat)),h!==!1&&rt("onValueUpdate")}function A(h){var g=jn(h),L=t.prevMonthNav.contains(g),U=t.nextMonthNav.contains(g);L||U?K(L?-1:1):t.yearElements.indexOf(g)>=0?g.select():g.classList.contains("arrowUp")?t.changeYear(t.currentYear+1):g.classList.contains("arrowDown")&&t.changeYear(t.currentYear-1)}function H(h){h.preventDefault();var g=h.type==="keydown",L=jn(h),U=L;t.amPM!==void 0&&L===t.amPM&&(t.amPM.textContent=t.l10n.amPM[In(t.amPM.textContent===t.l10n.amPM[0])]);var le=parseFloat(U.getAttribute("min")),be=parseFloat(U.getAttribute("max")),Be=parseFloat(U.getAttribute("step")),Te=parseInt(U.value,10),qe=h.delta||(g?h.which===38?1:-1:0),De=Te+Be*qe;if(typeof U.value<"u"&&U.value.length===2){var $e=U===t.hourElement,tt=U===t.minuteElement;De<le?(De=be+De+In(!$e)+(In($e)&&In(!t.amPM)),tt&&j(void 0,-1,t.hourElement)):De>be&&(De=U===t.hourElement?De-be-In(!t.amPM):le,tt&&j(void 0,1,t.hourElement)),t.amPM&&$e&&(Be===1?De+Te===23:Math.abs(De-Te)>Be)&&(t.amPM.textContent=t.l10n.amPM[In(t.amPM.textContent===t.l10n.amPM[0])]),U.value=pn(De)}}return a(),t}function Es(e,n){for(var t=Array.prototype.slice.call(e).filter(function(l){return l instanceof HTMLElement}),s=[],a=0;a<t.length;a++){var i=t[a];try{if(i.getAttribute("data-fp-omit")!==null)continue;i._flatpickr!==void 0&&(i._flatpickr.destroy(),i._flatpickr=void 0),i._flatpickr=t0(i,n||{}),s.push(i._flatpickr)}catch(l){console.error(l)}}return s.length===1?s[0]:s}typeof HTMLElement<"u"&&typeof HTMLCollection<"u"&&typeof NodeList<"u"&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(e){return Es(this,e)},HTMLElement.prototype.flatpickr=function(e){return Es([this],e)});var Wt=function(e,n){return typeof e=="string"?Es(window.document.querySelectorAll(e),n):e instanceof Node?Es([e],n):Es(e,n)};Wt.defaultConfig={};Wt.l10ns={en:rn({},Ta),default:rn({},Ta)};Wt.localize=function(e){Wt.l10ns.default=rn(rn({},Wt.l10ns.default),e)};Wt.setDefaults=function(e){Wt.defaultConfig=rn(rn({},Wt.defaultConfig),e)};Wt.parseDate=ic({});Wt.formatDate=eh({});Wt.compareDates=_n;typeof jQuery<"u"&&typeof jQuery.fn<"u"&&(jQuery.fn.flatpickr=function(e){return Es(this,e)});Date.prototype.fp_incr=function(e){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+(typeof e=="string"?parseInt(e,10):e))};typeof window<"u"&&(window.flatpickr=Wt);const n0=Object.freeze(Object.defineProperty({__proto__:null,default:Wt},Symbol.toStringTag,{value:"Module"})),r0=$h(n0);(function(e){function n(K){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?n=function(ne){return typeof ne}:n=function(ne){return ne&&typeof Symbol=="function"&&ne.constructor===Symbol&&ne!==Symbol.prototype?"symbol":typeof ne},n(K)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=u(o),s=i(Gx),a=i(r0);function i(K){return K&&K.__esModule?K:{default:K}}function l(){if(typeof WeakMap!="function")return null;var K=new WeakMap;return l=function(){return K},K}function u(K){if(K&&K.__esModule)return K;if(K===null||n(K)!=="object"&&typeof K!="function")return{default:K};var ee=l();if(ee&&ee.has(K))return ee.get(K);var ne={},oe=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var pe in K)if(Object.prototype.hasOwnProperty.call(K,pe)){var Ie=oe?Object.getOwnPropertyDescriptor(K,pe):null;Ie&&(Ie.get||Ie.set)?Object.defineProperty(ne,pe,Ie):ne[pe]=K[pe]}return ne.default=K,ee&&ee.set(K,ne),ne}function d(K){return b(K)||C(K)||_(K)||x()}function x(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _(K,ee){if(K){if(typeof K=="string")return F(K,ee);var ne=Object.prototype.toString.call(K).slice(8,-1);if(ne==="Object"&&K.constructor&&(ne=K.constructor.name),ne==="Map"||ne==="Set")return Array.from(K);if(ne==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ne))return F(K,ee)}}function C(K){if(typeof Symbol<"u"&&Symbol.iterator in Object(K))return Array.from(K)}function b(K){if(Array.isArray(K))return F(K)}function F(K,ee){(ee==null||ee>K.length)&&(ee=K.length);for(var ne=0,oe=new Array(ee);ne<ee;ne++)oe[ne]=K[ne];return oe}function y(){return y=Object.assign||function(K){for(var ee=1;ee<arguments.length;ee++){var ne=arguments[ee];for(var oe in ne)Object.prototype.hasOwnProperty.call(ne,oe)&&(K[oe]=ne[oe])}return K},y.apply(this,arguments)}function S(K,ee){if(K==null)return{};var ne=E(K,ee),oe,pe;if(Object.getOwnPropertySymbols){var Ie=Object.getOwnPropertySymbols(K);for(pe=0;pe<Ie.length;pe++)oe=Ie[pe],!(ee.indexOf(oe)>=0)&&Object.prototype.propertyIsEnumerable.call(K,oe)&&(ne[oe]=K[oe])}return ne}function E(K,ee){if(K==null)return{};var ne={},oe=Object.keys(K),pe,Ie;for(Ie=0;Ie<oe.length;Ie++)pe=oe[Ie],!(ee.indexOf(pe)>=0)&&(ne[pe]=K[pe]);return ne}function p(K,ee){var ne=Object.keys(K);if(Object.getOwnPropertySymbols){var oe=Object.getOwnPropertySymbols(K);ee&&(oe=oe.filter(function(pe){return Object.getOwnPropertyDescriptor(K,pe).enumerable})),ne.push.apply(ne,oe)}return ne}function m(K){for(var ee=1;ee<arguments.length;ee++){var ne=arguments[ee]!=null?arguments[ee]:{};ee%2?p(Object(ne),!0).forEach(function(oe){de(K,oe,ne[oe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(K,Object.getOwnPropertyDescriptors(ne)):p(Object(ne)).forEach(function(oe){Object.defineProperty(K,oe,Object.getOwnPropertyDescriptor(ne,oe))})}return K}function v(K,ee){if(!(K instanceof ee))throw new TypeError("Cannot call a class as a function")}function j(K,ee){for(var ne=0;ne<ee.length;ne++){var oe=ee[ne];oe.enumerable=oe.enumerable||!1,oe.configurable=!0,"value"in oe&&(oe.writable=!0),Object.defineProperty(K,oe.key,oe)}}function D(K,ee,ne){return ee&&j(K.prototype,ee),K}function k(K,ee){if(typeof ee!="function"&&ee!==null)throw new TypeError("Super expression must either be null or a function");K.prototype=Object.create(ee&&ee.prototype,{constructor:{value:K,writable:!0,configurable:!0}}),ee&&I(K,ee)}function I(K,ee){return I=Object.setPrototypeOf||function(oe,pe){return oe.__proto__=pe,oe},I(K,ee)}function T(K){var ee=R();return function(){var oe=ae(K),pe;if(ee){var Ie=ae(this).constructor;pe=Reflect.construct(oe,arguments,Ie)}else pe=oe.apply(this,arguments);return J(this,pe)}}function J(K,ee){return ee&&(n(ee)==="object"||typeof ee=="function")?ee:se(K)}function se(K){if(K===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return K}function R(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ae(K){return ae=Object.setPrototypeOf?Object.getPrototypeOf:function(ne){return ne.__proto__||Object.getPrototypeOf(ne)},ae(K)}function de(K,ee,ne){return ee in K?Object.defineProperty(K,ee,{value:ne,enumerable:!0,configurable:!0,writable:!0}):K[ee]=ne,K}var Ne=["onChange","onOpen","onClose","onMonthChange","onYearChange","onReady","onValueUpdate","onDayCreate"],me=s.default.oneOfType([s.default.func,s.default.arrayOf(s.default.func)]),he=["onCreate","onDestroy"],we=s.default.func,ue=function(K){k(ne,K);var ee=T(ne);function ne(){var oe;v(this,ne);for(var pe=arguments.length,Ie=new Array(pe),je=0;je<pe;je++)Ie[je]=arguments[je];return oe=ee.call.apply(ee,[this].concat(Ie)),de(se(oe),"createFlatpickrInstance",function(){var Re=m({onClose:function(){oe.node.blur&&oe.node.blur()}},oe.props.options);Re=ge(Re,oe.props),oe.flatpickr=(0,a.default)(oe.node,Re),oe.props.hasOwnProperty("value")&&oe.flatpickr.setDate(oe.props.value,!1);var Pe=oe.props.onCreate;Pe&&Pe(oe.flatpickr)}),de(se(oe),"destroyFlatpickrInstance",function(){var Re=oe.props.onDestroy;Re&&Re(oe.flatpickr),oe.flatpickr.destroy(),oe.flatpickr=null}),de(se(oe),"handleNodeChange",function(Re){oe.node=Re,oe.flatpickr&&(oe.destroyFlatpickrInstance(),oe.createFlatpickrInstance())}),oe}return D(ne,[{key:"componentDidUpdate",value:function(pe){var Ie=this.props.options,je=pe.options;Ie=ge(Ie,this.props),je=ge(je,pe);for(var Re=Object.getOwnPropertyNames(Ie),Pe=Re.length-1;Pe>=0;Pe--){var Qe=Re[Pe],Ye=Ie[Qe];Ye!==je[Qe]&&(Ne.indexOf(Qe)!==-1&&!Array.isArray(Ye)&&(Ye=[Ye]),this.flatpickr.set(Qe,Ye))}this.props.hasOwnProperty("value")&&!(this.props.value&&Array.isArray(this.props.value)&&pe.value&&Array.isArray(pe.value)&&this.props.value.every(function(Je,G){pe[G]}))&&this.props.value!==pe.value&&this.flatpickr.setDate(this.props.value,!1)}},{key:"componentDidMount",value:function(){this.createFlatpickrInstance()}},{key:"componentWillUnmount",value:function(){this.destroyFlatpickrInstance()}},{key:"render",value:function(){var pe=this.props,Ie=pe.options,je=pe.defaultValue,Re=pe.value,Pe=pe.children,Qe=pe.render,Ye=S(pe,["options","defaultValue","value","children","render"]);return Ne.forEach(function(Je){delete Ye[Je]}),he.forEach(function(Je){delete Ye[Je]}),Qe?Qe(m(m({},Ye),{},{defaultValue:je,value:Re}),this.handleNodeChange):Ie.wrap?t.default.createElement("div",y({},Ye,{ref:this.handleNodeChange}),Pe):t.default.createElement("input",y({},Ye,{defaultValue:je,ref:this.handleNodeChange}))}}]),ne}(t.Component);de(ue,"propTypes",{defaultValue:s.default.string,options:s.default.object,onChange:me,onOpen:me,onClose:me,onMonthChange:me,onYearChange:me,onReady:me,onValueUpdate:me,onDayCreate:me,onCreate:we,onDestroy:we,value:s.default.oneOfType([s.default.string,s.default.array,s.default.object,s.default.number]),children:s.default.node,className:s.default.string,render:s.default.func}),de(ue,"defaultProps",{options:{}});function ge(K,ee){var ne=m({},K);return Ne.forEach(function(oe){if(ee.hasOwnProperty(oe)){var pe;ne[oe]&&!Array.isArray(ne[oe])?ne[oe]=[ne[oe]]:ne[oe]||(ne[oe]=[]);var Ie=Array.isArray(ee[oe])?ee[oe]:[ee[oe]];(pe=ne[oe]).push.apply(pe,d(Ie))}}),ne}var fe=ue;e.default=fe})(Gp);const $t=uf(Gp),$r=()=>Ve("/events/airfields"),el=e=>Ve("/events/airfields",{method:"POST",body:JSON.stringify(e)}),s0=e=>Ve(`/events/airfields/${e}`),a0=(e,n)=>Ve(`/events/airfields/${e}`,{method:"PUT",body:JSON.stringify(n)}),i0=e=>Ve(`/events/airfields/${e}`,{method:"DELETE"}),En=e=>!!e&&e.trim().length>0,oi=e=>e!=null&&Number.isFinite(e),l0=e=>e!=null,th=e=>{const n=e.primary_landing_area||{};return(e.sequence??0)>0&&En(e.name)&&En(e.coordinates)&&oi(e.elevation)&&En(e.scheduled_at)&&oi(e.takeoff_airfield_id)&&oi(e.distance_by_air)&&oi(e.distance_by_road)&&En(e.jumprun)&&En(n.name)&&En(n.description)&&En(n.size)&&En(n.obstacles)&&En(e.risk_assessment)&&En(e.safety_precautions)&&En(e.minimum_requirements)&&En(e.hospital)&&l0(e.rescue_boat)},tl=["Participant","Skydiver","Staff","Ground Crew","Jump Master","Jump Leader","Photo","Pilot","COP","Driver"],ld=e=>Math.round(e*3.28084),nl=e=>{if(e==null||Number.isNaN(e))return"";const n=ld(e);return`${e} m / ${n} ft`},Pa=()=>Ve("/logistics/transports"),nh=e=>Ve(`/logistics/transports/${e}`),rh=e=>Ve("/logistics/transports",{method:"POST",body:JSON.stringify(e)}),sh=(e,n)=>Ve(`/logistics/transports/${e}`,{method:"PUT",body:JSON.stringify(n)}),o0=e=>Ve(`/logistics/transports/${e}`,{method:"DELETE"}),Ma=()=>Ve("/logistics/ground-crews"),ah=e=>Ve(`/logistics/ground-crews/${e}`),ih=e=>Ve("/logistics/ground-crews",{method:"POST",body:JSON.stringify(e)}),lh=(e,n)=>Ve(`/logistics/ground-crews/${e}`,{method:"PUT",body:JSON.stringify(n)}),c0=e=>Ve(`/logistics/ground-crews/${e}`,{method:"DELETE"}),za=()=>Ve("/logistics/vehicles"),tr=e=>Ve("/logistics/vehicles",{method:"POST",body:JSON.stringify(e)}),d0=e=>Ve(`/logistics/vehicles/${e}`),u0=(e,n)=>Ve(`/logistics/vehicles/${e}`,{method:"PUT",body:JSON.stringify(n)}),f0=e=>Ve(`/logistics/vehicles/${e}`,{method:"DELETE"}),Kn=()=>Ve("/logistics/others"),oh=e=>Ve(`/logistics/others/${e}`),od=e=>Ve("/logistics/others",{method:"POST",body:JSON.stringify(e)}),ch=(e,n)=>Ve(`/logistics/others/${e}`,{method:"PUT",body:JSON.stringify(n)}),m0=e=>Ve(`/logistics/others/${e}`,{method:"DELETE"}),Yn=()=>Ve("/logistics/meals"),dh=e=>Ve(`/logistics/meals/${e}`),p0=e=>Ve("/logistics/meals",{method:"POST",body:JSON.stringify(e)}),uh=(e,n)=>Ve(`/logistics/meals/${e}`,{method:"PUT",body:JSON.stringify(n)}),h0=e=>Ve(`/logistics/meals/${e}`,{method:"DELETE"}),Mt=e=>!!e&&e.trim().length>0,g0=[{value:"draft",label:"Draft"},{value:"planned",label:"Planned"},{value:"launched",label:"Launched"},{value:"scouted",label:"Scouted"},{value:"live",label:"Live"},{value:"past",label:"Past"}],v0=e=>ad(e),fh=e=>Rx(e),qu=e=>Fx(e),Gu=e=>qp(e),Qu=e=>{const n=t=>String(t).padStart(2,"0");return`${e.getFullYear()}-${n(e.getMonth()+1)}-${n(e.getDate())}`},Ju=e=>e?ad(e).replace("T"," "):"",as=e=>e?Bn(e,{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1}):"",Qs=e=>e.replace(/^#\s*\d+\s*/,"").trim().toLowerCase(),Xu=()=>({name:"",description:"",size:"",obstacles:""}),rl=e=>({name:(e==null?void 0:e.name)||"",description:(e==null?void 0:e.description)||"",size:(e==null?void 0:e.size)||"",obstacles:(e==null?void 0:e.obstacles)||""}),mh=e=>Array.isArray(e)?e.map(n=>({name:n.name||"",telephone:n.telephone||"",email:n.email||""})):[],y0=e=>e.filter(n=>{var i,l,u;const t=(i=n.name)==null?void 0:i.trim(),s=(l=n.telephone)==null?void 0:l.trim(),a=(u=n.email)==null?void 0:u.trim();return!!(t||s||a)}),Zu=e=>{var n,t,s,a;return{name:((n=e==null?void 0:e.name)==null?void 0:n.trim())||"",description:((t=e==null?void 0:e.description)==null?void 0:t.trim())||"",size:((s=e==null?void 0:e.size)==null?void 0:s.trim())||"",obstacles:((a=e==null?void 0:e.obstacles)==null?void 0:a.trim())||""}},x0=e=>y0(e).map(n=>({name:n.name.trim(),telephone:n.telephone.trim(),email:n.email.trim()})),ef=e=>{const n=et(e.starts_at);n&&n.setUTCHours(9,0,0,0);const t=n?fh(n):"";return(Array.isArray(e.innhopps)?e.innhopps:[]).map((s,a)=>({id:s.id,sequence:s.sequence??a+1,name:s.name||"",coordinates:s.coordinates||"",elevation:s.elevation??void 0,takeoff_airfield_id:s.takeoff_airfield_id||void 0,scheduled_at:v0(s.scheduled_at)||t,notes:s.notes||"",reason_for_choice:s.reason_for_choice||"",adjust_altimeter_aad:s.adjust_altimeter_aad||"",notam:s.notam||"",distance_by_air:s.distance_by_air??void 0,distance_by_road:s.distance_by_road??void 0,primary_landing_area:rl(s.primary_landing_area),secondary_landing_area:rl(s.secondary_landing_area),risk_assessment:s.risk_assessment||"",safety_precautions:s.safety_precautions||"",jumprun:s.jumprun||"",hospital:s.hospital||"",rescue_boat:s.rescue_boat??void 0,minimum_requirements:s.minimum_requirements||"",land_owners:mh(s.land_owners),land_owner_permission:s.land_owner_permission??void 0,image_files:Array.isArray(s.image_files)?s.image_files.filter(i=>!!(i!=null&&i.data)):[]}))},j0=()=>{const{eventId:e}=Ln(),n=yt(),t=Zt(),s=o.useRef(!1),[a,i]=o.useState(null),[l,u]=o.useState([]),[d,x]=o.useState([]),[_,C]=o.useState([]),[b,F]=o.useState([]),[y,S]=o.useState([]),[E,p]=o.useState([]),[m,v]=o.useState(""),[j,D]=o.useState(""),[k,I]=o.useState(""),[T,J]=o.useState({season_id:"",name:"",location:"",slots:"",status:"draft",starts_at:"",ends_at:""}),[se,R]=o.useState({full_name:"",email:"",phone:"",experience_level:"",emergency_contact:"",roles:["Participant","Skydiver"]}),[ae,de]=o.useState({full_name:"",email:"",phone:"",experience_level:"",emergency_contact:"",roles:["Participant","Staff"]}),[Ne,me]=o.useState(!1),[he,we]=o.useState(!1),[ue,ge]=o.useState(!1),[fe,K]=o.useState(!1),[ee,ne]=o.useState(!1),[oe,pe]=o.useState(!1),[Ie,je]=o.useState({}),[Re,Pe]=o.useState({}),[Qe,Ye]=o.useState({}),[Je,G]=o.useState([]),[M,$]=o.useState(!0),[W,Z]=o.useState(null),[Ee,ze]=o.useState(null),[re,lt]=o.useState(!1),[vt,Nt]=o.useState(!1),[Lt,X]=o.useState(!1),ce={boxShadow:"inset 0 0 0 2px #3b82f6",borderRadius:"8px"},ve={padding:"0.4rem 0.5rem",borderRadius:"8px"},[We,ot]=o.useState(!1),[Xe,Ct]=o.useState(""),pt=`primary ${We?"saved":""}`,wt=re?"Saving":We?"Saved":"Save",en=o.useCallback((c,N,B,te)=>{const ie=[...N].sort((Oe,ft)=>Oe-ft),ye=[...B].sort((Oe,ft)=>Oe-ft);return JSON.stringify({form:c,participants:ie,airfields:ye,innhopps:te})},[]),rt=o.useMemo(()=>en(T,y,E,Je),[en,T,y,E,Je]),[f,w]=o.useState({name:"",elevation:"",coordinates:"",description:""}),[z,V]=o.useState([]),[Fe,Le]=o.useState(!1),[A,H]=o.useState({name:"",capacity:"",coordinates:"",booked:!1,check_in_at:"",check_out_at:"",notes:""}),[h,g]=o.useState([]),[L,U]=o.useState([]),[le,be]=o.useState([]),[Be,Te]=o.useState([]),[qe,De]=o.useState(!1),[$e,tt]=o.useState({pickup_location:"",destination:"",passenger_count:"",scheduled_at:""}),[Pt,Et]=o.useState(!1),[O,Y]=o.useState({pickup_location:"",destination:"",passenger_count:"",scheduled_at:""}),[Q,q]=o.useState(!1),[_e,Ce]=o.useState({name:"",coordinates:"",scheduled_at:"",description:"",notes:""}),P=!Mt(f.coordinates),Se=!Mt(A.coordinates),Ze=!Mt(_e.coordinates),Ae=o.useMemo(()=>{const c=Array.isArray(z)?[...z]:[],N=B=>{const te=B.check_in_at||B.check_out_at||B.created_at||"",ie=et(te),ye=ie?ie.getTime():Number.POSITIVE_INFINITY;return Number.isNaN(ye)?Number.POSITIVE_INFINITY:ye};return c.sort((B,te)=>{const ie=N(B)-N(te);return ie!==0?ie:(B.name||"").localeCompare(te.name||"")})},[z]),ke=o.useMemo(()=>(Array.isArray(Be)?[...Be]:[]).sort((N,B)=>{var ye,Oe;const te=((ye=et(N.scheduled_at))==null?void 0:ye.getTime())??Number.POSITIVE_INFINITY,ie=((Oe=et(B.scheduled_at))==null?void 0:Oe.getTime())??Number.POSITIVE_INFINITY;return te!==ie?te-ie:(N.name||"").localeCompare(B.name||"")}),[Be]),Ue=o.useCallback(c=>{var Oe;const N=Qs(c||"");if(!N)return null;const B=(Oe=a==null?void 0:a.innhopps)==null?void 0:Oe.find(ft=>Qs(ft.name)===N);if(B!=null&&B.coordinates)return B.coordinates;const te=z.find(ft=>Qs(ft.name||"")===N);if(te!=null&&te.coordinates)return te.coordinates;const ie=le.find(ft=>Qs(ft.name||"")===N);if(ie!=null&&ie.coordinates)return ie.coordinates;const ye=_.find(ft=>Qs(ft.name||"")===N);return ye!=null&&ye.coordinates?ye.coordinates:null},[z,_,a==null?void 0:a.innhopps,le]),[He,it]=o.useState({details:!0,innhopps:!1,airfields:!1,participants:!1,staff:!1,accommodations:!1,transports:!1,groundCrews:!1,meals:!1,others:!1}),ut=o.useRef(He),dt=o.useRef(!1),[xt,ht]=o.useState(null),Ft=o.useCallback(()=>{if(e)try{sessionStorage.setItem(`event-detail-state:${e}`,JSON.stringify({openSections:ut.current,scrollY:window.scrollY}))}catch{}},[e]);o.useEffect(()=>{ut.current=He},[He]),o.useEffect(()=>{if(!xt)return;const c=setTimeout(()=>ht(null),1800);return()=>clearTimeout(c)},[xt]),o.useEffect(()=>{if(!e||dt.current)return;const c=`event-detail-state:${e}`,N=sessionStorage.getItem(c);if(N)try{const te=JSON.parse(N);te!=null&&te.openSections&&it(ie=>({...ie,...te.openSections})),typeof(te==null?void 0:te.scrollY)=="number"&&setTimeout(()=>window.scrollTo(0,te.scrollY),0)}catch{}const B=sessionStorage.getItem(`event-detail-highlight:${e}`);return B&&(ht(B),sessionStorage.removeItem(`event-detail-highlight:${e}`)),dt.current=!0,()=>{Ft()}},[e,Ft]),o.useEffect(()=>{if(!xt)return;let c=0;const N=setInterval(()=>{const B=document.getElementById(xt);B?(B.scrollIntoView({behavior:"smooth",block:"center"}),clearInterval(N)):c>10&&clearInterval(N),c+=1},120);return()=>clearInterval(N)},[xt,Je,E,y,z,h,L,le]),o.useEffect(()=>{var N;const c=(N=t.state)==null?void 0:N.copyInnhopp;!c||s.current||(G(B=>[...B,{id:void 0,sequence:(B.length||0)+1,name:c.name||"",coordinates:c.coordinates||"",elevation:c.elevation??void 0,takeoff_airfield_id:c.takeoff_airfield_id||void 0,scheduled_at:c.scheduled_at||"",notes:c.notes||"",reason_for_choice:c.reason_for_choice||"",adjust_altimeter_aad:c.adjust_altimeter_aad||"",notam:c.notam||"",distance_by_air:c.distance_by_air??void 0,distance_by_road:c.distance_by_road??void 0,primary_landing_area:rl(c.primary_landing_area),secondary_landing_area:rl(c.secondary_landing_area),risk_assessment:c.risk_assessment||"",safety_precautions:c.safety_precautions||"",jumprun:c.jumprun||"",hospital:c.hospital||"",rescue_boat:c.rescue_boat??void 0,minimum_requirements:c.minimum_requirements||"",land_owners:mh(c.land_owners),land_owner_permission:c.land_owner_permission??void 0,image_files:Array.isArray(c.image_files)?c.image_files.filter(te=>!!(te!=null&&te.data)):[]}]),s.current=!0)},[t.state,s]);const Vt=c=>it(N=>({...N,[c]:!N[c]})),hh=async()=>{if(e&&!(!$e.pickup_location.trim()||!$e.destination.trim()))try{const c=await rh({pickup_location:$e.pickup_location.trim(),destination:$e.destination.trim(),passenger_count:Number($e.passenger_count)||0,scheduled_at:$e.scheduled_at||void 0,event_id:Number(e),vehicle_ids:[]});g(N=>[c,...N]),tt({pickup_location:"",destination:"",passenger_count:"",scheduled_at:""}),De(!1)}catch(c){Z(c instanceof Error?c.message:"Failed to create transport")}},gh=async()=>{if(e&&!(!O.pickup_location.trim()||!O.destination.trim()))try{const c=await ih({pickup_location:O.pickup_location.trim(),destination:O.destination.trim(),passenger_count:Number(O.passenger_count)||0,scheduled_at:O.scheduled_at||void 0,event_id:Number(e),vehicle_ids:[]});U(N=>[c,...N]),Y({pickup_location:"",destination:"",passenger_count:"",scheduled_at:""}),Et(!1)}catch(c){Z(c instanceof Error?c.message:"Failed to create ground crew")}};o.useEffect(()=>{let c=!1;return(async()=>{try{const B=await Ut();!c&&Array.isArray(B)&&F(B)}catch{}})(),()=>{c=!0}},[]);const Ua=o.useMemo(()=>{const c=[],N=Array.isArray(a==null?void 0:a.innhopps)&&(a!=null&&a.innhopps.length)?a==null?void 0:a.innhopps.map(te=>({value:`${te.sequence?`#${te.sequence} `:""}${te.name||"Untitled innhopp"}`.trim(),label:`${te.sequence?`#${te.sequence} `:""}${te.name||"Untitled innhopp"}`.trim()})):[];N.length&&c.push({label:"Innhopps",options:N});const B=Array.isArray(a==null?void 0:a.airfield_ids)?_.filter(te=>a==null?void 0:a.airfield_ids.includes(te.id)):[];return B.length&&c.push({label:"Airfields",options:B.map(te=>({value:te.name||`Airfield #${te.id}`,label:te.name||`Airfield #${te.id}`}))}),z.length&&c.push({label:"Accommodations",options:z.map(te=>({value:te.name||`Accommodation #${te.id}`,label:te.name||`Accommodation #${te.id}`}))}),le.length&&c.push({label:"Other",options:le.map(te=>({value:te.name||`Other #${te.id}`,label:te.name||`Other #${te.id}`}))}),c},[z,_,a==null?void 0:a.airfield_ids,a==null?void 0:a.innhopps,le]),vh=async()=>{if(e&&!(!_e.name.trim()||!_e.coordinates.trim()))try{const c=await od({name:_e.name.trim(),coordinates:_e.coordinates.trim(),scheduled_at:_e.scheduled_at||void 0,description:_e.description.trim()||void 0,notes:_e.notes.trim()||void 0,event_id:Number(e)});be(N=>[c,...N]),Ce({name:"",coordinates:"",scheduled_at:"",description:"",notes:""}),q(!1)}catch(c){Z(c instanceof Error?c.message:"Failed to create entry")}};o.useEffect(()=>{let c=!1;return(async()=>{if(e){$(!0),ze(null);try{const B=await es(Number(e));if(c)return;i(B),G(ef(B)),S(Array.isArray(B.participant_ids)?B.participant_ids:[]),p(Array.isArray(B.airfield_ids)?B.airfield_ids:[]),J({season_id:String(B.season_id),name:B.name,location:B.location||"",slots:B.slots?String(B.slots):"",status:B.status,starts_at:qu(B.starts_at),ends_at:qu(B.ends_at)})}catch(B){c||ze(B instanceof Error?B.message:"Failed to load event")}finally{c||$(!1)}}})(),()=>{c=!0}},[e]),o.useEffect(()=>{let c=!1;return(async()=>{if(e)try{const B=await mr(Number(e));c||V(Array.isArray(B)?B:[])}catch{c||V([])}})(),()=>{c=!0}},[e]),o.useEffect(()=>{let c=!1;return(async()=>{if(e)try{const[B,te,ie,ye]=await Promise.all([Pa(),Ma(),Kn(),Yn()]);if(c)return;g(Array.isArray(B)?B.filter(Oe=>Oe.event_id===Number(e)):[]),U(Array.isArray(te)?te.filter(Oe=>Oe.event_id===Number(e)):[]),be(Array.isArray(ie)?ie.filter(Oe=>Oe.event_id===Number(e)):[]),Te(Array.isArray(ye)?ye.filter(Oe=>Oe.event_id===Number(e)):[])}catch{c||(g([]),U([]),be([]),Te([]))}})(),()=>{c=!0}},[e]),o.useEffect(()=>{let c=!1;return(async()=>{try{const B=await rr();c||u(Array.isArray(B)?B:[])}catch{}})(),()=>{c=!0}},[]),o.useEffect(()=>{let c=!1;return(async()=>{try{const B=await ts();c||x(Array.isArray(B)?B:[])}catch{}})(),()=>{c=!0}},[]),o.useEffect(()=>{let c=!1;return(async()=>{try{const B=await $r();c||C(Array.isArray(B)?B:[])}catch{}})(),()=>{c=!0}},[]),o.useEffect(()=>{Pe(c=>{const N={...c};return Je.forEach((B,te)=>{B.takeoff_airfield_id&&(N[te]=!0)}),N}),Ye(c=>{const N={...c};return Je.forEach((B,te)=>{if(B.takeoff_airfield_id){N[te]="existing";const ie=_.find(ye=>ye.id===B.takeoff_airfield_id);ie&&je(ye=>({...ye,[te]:{name:ie.name,elevation:ie.elevation,coordinates:ie.coordinates,description:ie.description||""}}))}}),N})},[Je,_]);const cd=c=>{var N;return((N=d.find(B=>B.id===c))==null?void 0:N.full_name)||`Participant #${c}`},yh=d.filter(c=>{const B=(Array.isArray(c.roles)?c.roles:[]).includes("Staff");return!y.includes(c.id)&&!B}).sort((c,N)=>c.full_name.localeCompare(N.full_name,void 0,{sensitivity:"base"})),xh=_.filter(c=>!E.includes(c.id)),dd=o.useMemo(()=>{const c=new Map;return _.forEach(N=>{const B=b.filter(ie=>Array.isArray(ie.airfield_ids)&&ie.airfield_ids.includes(N.id));(B.length?B.map(ie=>ie.location||"Location TBD"):["Unassigned location"]).forEach((ie,ye)=>{const Oe=ie||"Location TBD";c.has(Oe)||c.set(Oe,{label:Oe,options:[]}),c.get(Oe).options.push({key:`${N.id}-${ye}-${Oe}`,value:N.id,label:`${N.name}${N.elevation!=null?` (${N.elevation} m)`:""}`})})}),Array.from(c.values())},[_,b]);o.useEffect(()=>{We&&rt!==Xe&&ot(!1)},[rt,Xe,We]);const qn=async(c,N,B)=>{if(a){lt(!0),Z(null),ot(!1);try{const te={season_id:Number(T.season_id||a.season_id),name:T.name.trim()||a.name,location:T.location.trim()||void 0,slots:T.slots?Number(T.slots):a.slots||0,status:T.status,starts_at:Gu(T.starts_at)||a.starts_at,ends_at:T.ends_at?Gu(T.ends_at):void 0,airfield_ids:N,participant_ids:c,innhopps:(B??Je).filter(Ke=>Ke.name.trim()!=="").map((Ke,on)=>{var md,pd,hd,gd,vd,yd,xd,jd,_d;return{sequence:Ke.sequence||on+1,name:Ke.name.trim(),coordinates:(md=Ke.coordinates)==null?void 0:md.trim(),elevation:Ke.elevation,takeoff_airfield_id:Ke.takeoff_airfield_id,scheduled_at:Ke.scheduled_at?ad(Ke.scheduled_at):"",notes:Ke.notes,reason_for_choice:(pd=Ke.reason_for_choice)==null?void 0:pd.trim(),adjust_altimeter_aad:(hd=Ke.adjust_altimeter_aad)==null?void 0:hd.trim(),notam:(gd=Ke.notam)==null?void 0:gd.trim(),distance_by_air:Ke.distance_by_air,distance_by_road:Ke.distance_by_road,primary_landing_area:Zu(Ke.primary_landing_area),secondary_landing_area:Zu(Ke.secondary_landing_area),risk_assessment:(vd=Ke.risk_assessment)==null?void 0:vd.trim(),safety_precautions:(yd=Ke.safety_precautions)==null?void 0:yd.trim(),jumprun:(xd=Ke.jumprun)==null?void 0:xd.trim(),hospital:(jd=Ke.hospital)==null?void 0:jd.trim(),rescue_boat:Ke.rescue_boat,minimum_requirements:(_d=Ke.minimum_requirements)==null?void 0:_d.trim(),land_owners:x0(Ke.land_owners||[]),land_owner_permission:Ke.land_owner_permission,image_files:(Ke.image_files||[]).map(Sl=>{var Nd,bd;return{name:((Nd=Sl.name)==null?void 0:Nd.trim())||void 0,mime_type:((bd=Sl.mime_type)==null?void 0:bd.trim())||void 0,data:Sl.data}})}})},ie=await Vp(a.id,te),ye=ef(ie),Oe=Array.isArray(ie.participant_ids)?ie.participant_ids:[],ft=Array.isArray(ie.airfield_ids)?ie.airfield_ids:[];i(ie),S(Oe),p(ft),G(ye),Z("Event updated"),Ct(en(T,Oe,ft,ye)),ot(!0)}catch(te){Z(te instanceof Error?te.message:"Failed to update event"),ot(!1)}finally{lt(!1)}}},zr=async()=>{await qn(y,E,Je)},jh=(c,N)=>{if(N==="__new__"){Pe(ie=>({...ie,[c]:!0})),Ye(ie=>({...ie,[c]:"new"})),G(ie=>{const ye=[...ie];return ye[c]={...ye[c],takeoff_airfield_id:void 0},ye}),je(ie=>({...ie,[c]:ie[c]||{name:"",elevation:0,coordinates:"",description:""}}));return}if(N===""){G(ie=>{const ye=[...ie];return ye[c]={...ye[c],takeoff_airfield_id:void 0},ye}),Pe(ie=>{const ye={...ie};return delete ye[c],ye}),Ye(ie=>{const ye={...ie};return delete ye[c],ye});return}const B=Number(N);G(ie=>{const ye=[...ie];return ye[c]={...ye[c],takeoff_airfield_id:B||void 0},ye}),Pe(ie=>{const ye={...ie};return delete ye[c],ye}),Ye(ie=>{const ye={...ie};return delete ye[c],ye});const te=_.find(ie=>ie.id===B);te&&je(ie=>({...ie,[c]:{name:te.name,elevation:te.elevation,coordinates:te.coordinates,description:te.description||""}}))},_h=async c=>{var B;const N=Ie[c];if(N){ne(!0),Z(null);try{const te={name:N.name.trim(),elevation:Number(N.elevation)||0,coordinates:N.coordinates.trim(),description:((B=N.description)==null?void 0:B.trim())||void 0},ie=await el(te),ye=[..._,ie];C(ye);const Oe=E.includes(ie.id)?E:[...E,ie.id];p(Oe),G(Ke=>{const on=[...Ke];return on[c]={...on[c],takeoff_airfield_id:ie.id},on});const ft=Je.map((Ke,on)=>on===c?{...Ke,takeoff_airfield_id:ie.id}:Ke);je(Ke=>({...Ke,[c]:{name:ie.name,elevation:ie.elevation,coordinates:ie.coordinates,description:ie.description||""}})),Ye(Ke=>({...Ke,[c]:"existing"})),await qn(y,Oe,ft),Z("Airfield added as takeoff and saved to event.")}catch(te){Z(te instanceof Error?te.message:"Failed to add airfield")}finally{ne(!1)}}},Nh=async()=>{const c=Number(m);if(!c||y.includes(c)||!a)return;const N=[...y,c];S(N),v(""),await qn(N,E)},bl=o.useMemo(()=>y.map(N=>d.find(B=>B.id===N)).filter(N=>!!N&&Array.isArray(N.roles)&&N.roles.includes("Staff")).sort((N,B)=>N.full_name.localeCompare(B.full_name,void 0,{sensitivity:"base"})),[y,d]),bh=o.useMemo(()=>d.filter(c=>y.includes(c.id)?!1:(Array.isArray(c.roles)?c.roles:[]).includes("Staff")),[d,y]),Sh=async()=>{const c=Number(j);if(!c||y.includes(c)||!a)return;const N=[...y,c];S(N),D(""),await qn(N,E)},Ch=async c=>{c.preventDefault(),K(!0),Z(null);try{const N=ae.roles&&ae.roles.length>0?ae.roles:["Participant","Staff"],B={full_name:ae.full_name.trim(),email:ae.email.trim(),phone:ae.phone.trim()||void 0,experience_level:ae.experience_level.trim()||void 0,emergency_contact:ae.emergency_contact.trim()||void 0,roles:N},te=await Da(B),ie=[...y,te.id];x(ye=>[...ye,te]),S(ie),await qn(ie,E),de({full_name:"",email:"",phone:"",experience_level:"",emergency_contact:"",roles:["Participant","Staff"]}),we(!1),Z("Staff participant added and saved to event.")}catch(N){Z(N instanceof Error?N.message:"Failed to add staff participant")}finally{K(!1)}},ud=async c=>{const N=y.filter(B=>B!==c);S(N),await qn(N,E)},wh=async c=>{c.preventDefault(),ge(!0),Z(null);try{const N=se.roles&&se.roles.length>0?se.roles:["Participant","Skydiver"],B={full_name:se.full_name.trim(),email:se.email.trim(),phone:se.phone.trim()||void 0,experience_level:se.experience_level.trim()||void 0,emergency_contact:se.emergency_contact.trim()||void 0,roles:N},te=await Da(B);x(ie=>[...ie,te]),S(ie=>[...ie,te.id]),R({full_name:"",email:"",phone:"",experience_level:"",emergency_contact:"",roles:["Participant","Skydiver"]}),me(!1),Z("Participant added. Save to persist with event.")}catch(N){Z(N instanceof Error?N.message:"Failed to add participant")}finally{ge(!1)}},kh=()=>{const c=T.starts_at&&T.starts_at.length>=10?et(`${T.starts_at}T09:00`):null;c&&c.setUTCHours(9,0,0,0),G(N=>[...N,{sequence:N.length+1,name:"",coordinates:"",scheduled_at:c?fh(c):"",notes:"",reason_for_choice:"",adjust_altimeter_aad:"",notam:"",distance_by_air:void 0,distance_by_road:void 0,primary_landing_area:Xu(),secondary_landing_area:Xu(),risk_assessment:"",safety_precautions:"",jumprun:"",hospital:"",rescue_boat:void 0,minimum_requirements:"",land_owners:[],land_owner_permission:void 0,image_files:[]}])},Eh=c=>{G(N=>N.filter((B,te)=>te!==c).map((B,te)=>({...B,sequence:te+1}))),je(N=>{const B={...N};return delete B[c],B}),Pe(N=>{const B={...N};return delete B[c],B}),Ye(N=>{const B={...N};return delete B[c],B})},Va=(c,N,B)=>{G(te=>{const ie=[...te];return ie[c]={...ie[c],[N]:N==="sequence"?Number(B)||c+1:B},ie})},fd=async c=>{c.preventDefault(),await qn(y,E)},Ah=async()=>{const c=Number(k);if(!c||E.includes(c)||!a)return;const N=[...E,c];p(N),I(""),await qn(y,N)},Ih=async c=>{const N=E.filter(B=>B!==c);p(N),await qn(y,N)},Dh=async c=>{c.preventDefault(),ne(!0),Z(null);try{const N={name:f.name.trim(),elevation:Number(f.elevation)||0,coordinates:f.coordinates.trim(),description:f.description.trim()||void 0},B=await el(N);C(te=>[...te,B]),p(te=>[...te,B.id]),w({name:"",elevation:"",coordinates:"",description:""}),pe(!1),await qn(y,E.includes(B.id)?E:[...E,B.id]),Z("Airfield added and saved to event.")}catch(N){Z(N instanceof Error?N.message:"Failed to add airfield")}finally{ne(!1)}};if(M)return r.jsx("p",{className:"muted",children:"Loading event"});if(Ee)return r.jsx("p",{className:"error-text",children:Ee});if(!a)return r.jsx("p",{className:"error-text",children:"Event not found."});const Th=a.status==="past",Ph=async()=>{if(!(!a||vt)&&window.confirm("Are you sure you want to delete this event?")){Nt(!0),Z(null);try{await Lp(a.id),n("/events")}catch(c){Z(c instanceof Error?c.message:"Failed to delete event"),Nt(!1)}}},Mh=async()=>{if(!(!a||Lt)){X(!0),Z(null);try{const c=await $p(a.id);n(`/events/${c.id}`)}catch(c){Z(c instanceof Error?c.message:"Failed to copy event")}finally{X(!1)}}};return r.jsxs("section",{children:[r.jsxs("header",{className:"page-header",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"event-header-top",children:[r.jsx("h2",{style:{margin:0},children:a.name}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap",alignItems:"center"},children:[r.jsx("span",{className:`badge status-${a.status}`,children:a.status}),!Th&&(()=>{const c=a.slots??0,N=y.reduce((ie,ye)=>{var ft;return(((ft=d.find(Ke=>Ke.id===ye))==null?void 0:ft.roles)||[]).includes("Staff")?ie:ie+1},0),B=Math.max(c-N,0),te=B===0;return r.jsx("span",{className:`badge ${te?"danger":"success"}`,children:te?"FULL":`${B} SLOTS AVAILABLE`})})()]})]}),r.jsx("p",{className:"event-location",children:a.location||"Location TBD"})]}),r.jsxs("div",{className:"card-actions",children:[r.jsx("button",{className:"ghost",type:"button",onClick:()=>n(`/events/${a.id}`),children:"Schedule"}),r.jsx("button",{className:"ghost",type:"button",onClick:()=>n(`/manifests?eventId=${a.id}`),children:"Manifest"}),r.jsx("button",{className:"ghost",type:"button",onClick:Mh,disabled:Lt,children:Lt?"Copying":"Copy"}),r.jsx("button",{className:"ghost danger",type:"button",onClick:Ph,disabled:vt,children:vt?"Deleting":"Delete"}),r.jsx("button",{className:"ghost",type:"button",onClick:()=>n("/events"),children:"Back"})]})]}),r.jsxs("article",{className:"card",children:[r.jsx("header",{className:"card-header",onClick:()=>Vt("details"),style:{cursor:"pointer"},children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flex:1},children:[r.jsx("button",{className:"ghost",type:"button",onClick:c=>{c.stopPropagation(),Vt("details")},children:He.details?"":""}),r.jsx("h3",{style:{margin:0},children:"Event details"})]})}),He.details&&r.jsxs("form",{className:"form-grid",onSubmit:fd,children:[r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"minmax(0, 1fr) minmax(0, 1fr) minmax(0, 0.5fr) minmax(0, 1fr) minmax(0, 1fr) minmax(0, 0.5fr)",gap:"0.75rem",gridColumn:"1 / -1",alignItems:"end"},children:[r.jsxs("label",{className:"form-field",style:{margin:0,gridColumn:"1 / 3"},children:[r.jsx("span",{children:"Name"}),r.jsx("input",{type:"text",value:T.name,onChange:c=>J(N=>({...N,name:c.target.value})),required:!0})]}),r.jsx("div",{"aria-hidden":"true",style:{gridColumn:"3 / 4"}}),r.jsxs("label",{className:"form-field",style:{margin:0,gridColumn:"4 / 5"},children:[r.jsx("span",{children:"Season"}),r.jsxs("select",{style:{width:"100%",minWidth:"120px"},value:T.season_id,onChange:c=>J(N=>({...N,season_id:c.target.value})),required:!0,children:[r.jsx("option",{value:"",children:"Select season"}),l.map(c=>r.jsx("option",{value:c.id,children:c.name},c.id))]})]}),r.jsx("div",{"aria-hidden":"true",style:{gridColumn:"5 / 7"}}),r.jsxs("label",{className:"form-field",style:{margin:0,gridColumn:"1 / 3"},children:[r.jsx("span",{children:"Location"}),r.jsx("input",{type:"text",value:T.location,onChange:c=>J(N=>({...N,location:c.target.value})),placeholder:"The overall location the event takes place"})]}),r.jsx("div",{"aria-hidden":"true",style:{gridColumn:"3 / 4"}}),r.jsxs("label",{className:"form-field",style:{margin:0,gridColumn:"4 / 5"},children:[r.jsx("span",{children:"Status"}),r.jsx("select",{value:T.status,onChange:c=>J(N=>({...N,status:c.target.value})),children:g0.map(c=>r.jsx("option",{value:c.value,children:c.label},c.value))})]}),r.jsxs("label",{className:"form-field",style:{margin:0,gridColumn:"5 / 6",maxWidth:"220px",justifySelf:"start",width:"100%"},children:[r.jsx("span",{children:"Slots"}),r.jsx("input",{type:"number",min:0,value:T.slots,onChange:c=>J(N=>({...N,slots:c.target.value})),placeholder:"Total slots",style:{width:"100%",maxWidth:"220px"}})]}),r.jsx("div",{"aria-hidden":"true",style:{gridColumn:"6 / 7"}}),r.jsxs("label",{className:"form-field",style:{margin:0,gridColumn:"1 / 3"},children:[r.jsx("span",{children:"Starts on"}),r.jsx($t,{value:Ge(T.starts_at),options:{dateFormat:"Y-m-d",altInput:!0,altFormat:"M j, Y",allowInput:!0},onChange:c=>{const N=c[0];J(B=>({...B,starts_at:N?Qu(N):""}))}})]}),r.jsx("div",{"aria-hidden":"true",style:{gridColumn:"3 / 4"}}),r.jsxs("label",{className:"form-field",style:{margin:0,gridColumn:"4 / 6"},children:[r.jsx("span",{children:"Ends on"}),r.jsx($t,{value:Ge(T.ends_at),options:{dateFormat:"Y-m-d",altInput:!0,altFormat:"M j, Y",allowInput:!0},onChange:c=>{const N=c[0];J(B=>({...B,ends_at:N?Qu(N):""}))}})]}),r.jsx("div",{"aria-hidden":"true",style:{gridColumn:"6 / 7"}})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"submit",className:pt,disabled:re||We,children:wt}),W&&r.jsx("span",{className:"muted",children:W})]})]})]}),r.jsxs("article",{className:"card",children:[r.jsxs("header",{className:"card-header",onClick:()=>Vt("innhopps"),style:{cursor:"pointer"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flex:1},children:[r.jsx("button",{className:"ghost",type:"button",onClick:c=>{c.stopPropagation(),Vt("innhopps")},children:He.innhopps?"":""}),r.jsx("h3",{style:{margin:0},children:"Innhopps"})]}),r.jsxs("span",{className:"badge neutral",children:[Je.length," INNHOPPS"]})]}),He.innhopps&&(Je.length===0?r.jsx("p",{className:"muted",children:"No innhopps yet."}):r.jsx("ul",{className:"status-list",style:{maxHeight:"24rem",overflowY:"auto"},children:Je.filter(c=>c.id).map(c=>{const N=c.takeoff_airfield_id?_.find(te=>te.id===c.takeoff_airfield_id):void 0,B=th(c);return r.jsx("li",{id:`innhopp-${c.id}`,style:{...ve,...xt===`innhopp-${c.id}`?ce:{}},children:r.jsxs(nt,{to:`/events/${a.id}/innhopps/${c.id}`,className:"card-link",style:{flex:1},onClick:()=>{if(e)try{sessionStorage.setItem(`event-detail-highlight:${e}`,`innhopp-${c.id}`)}catch{}Ft()},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"0.5rem"},children:[r.jsxs("strong",{children:["#",c.sequence,"  ",c.name]}),r.jsx("span",{className:`badge ${B?"success":"danger"}`,children:B?"OP READY":"MISSING INFO"})]}),Ju(c.scheduled_at)&&r.jsx("div",{className:"muted",children:Ju(c.scheduled_at)}),c.elevation!==void 0&&c.elevation!==null&&r.jsxs("div",{className:"muted",children:["Elevation: ",nl(c.elevation)]}),r.jsxs("div",{className:"muted",children:["Takeoff: ",N?N.name:c.takeoff_airfield_id?`Airfield #${c.takeoff_airfield_id}`:"Not set"]}),c.notes&&r.jsx("div",{className:"muted",children:c.notes})]})},c.id)})})),He.innhopps&&r.jsxs(r.Fragment,{children:[r.jsx("div",{style:{height:"1rem"}}),r.jsxs("form",{className:"form-grid",onSubmit:fd,children:[Je.filter(c=>!c.id).map((c,N)=>{const B=Je.findIndex(te=>te===c);return r.jsxs("div",{className:"innhopp-row",children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Sequence"}),r.jsx("input",{type:"number",min:1,value:c.sequence,onChange:te=>Va(B,"sequence",te.target.value),style:{width:"8ch"}})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Name"}),r.jsx("input",{type:"text",value:c.name,onChange:te=>Va(B,"name",te.target.value),placeholder:"Describe the innhopp",required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Scheduled at"}),r.jsx($t,{value:Ge(c.scheduled_at),options:{enableTime:!0,dateFormat:"Y-m-d H:i",time_24hr:!0},onChange:te=>{const ie=te[0];Va(B,"scheduled_at",ie?Kp(ie):"")}})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Takeoff airfield"}),r.jsxs("select",{value:c.takeoff_airfield_id??"",onChange:te=>jh(B,te.target.value),children:[r.jsx("option",{value:"",children:"Select airfield"}),r.jsx("option",{value:"__new__",children:"Create new airfield"}),dd.map(te=>r.jsx("optgroup",{label:te.label,children:te.options.map(ie=>r.jsx("option",{value:ie.value,children:ie.label},ie.key))},te.label))]})]}),r.jsxs("label",{className:"form-field notes-field",children:[r.jsx("span",{children:"Notes"}),r.jsx("input",{type:"text",value:c.notes,onChange:te=>Va(B,"notes",te.target.value),placeholder:"Exit altitude, landing brief"})]}),Re[B]&&r.jsx("div",{className:"form-grid",style:{gridTemplateColumns:"repeat(auto-fit,minmax(200px,1fr))",border:"1px dashed #c6d1dd",padding:"1rem",borderRadius:"10px",marginTop:"0.5rem",gridColumn:"1 / -1"},children:(()=>{const te=Qe[B],ie=c.takeoff_airfield_id!=null?_.find(Ke=>Ke.id===c.takeoff_airfield_id):void 0,ye=Ie[B]||{name:(ie==null?void 0:ie.name)||"",elevation:(ie==null?void 0:ie.elevation)||0,coordinates:(ie==null?void 0:ie.coordinates)||"",description:(ie==null?void 0:ie.description)||""},Oe=te==="existing"&&!!ie,ft=!Mt(ye.coordinates);return r.jsxs(r.Fragment,{children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Name"}),r.jsx("input",{type:"text",value:ye.name,disabled:Oe,onChange:Ke=>je(on=>({...on,[B]:{...ye,name:Ke.target.value}})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Elevation (m)"}),r.jsx("input",{type:"number",min:0,value:ye.elevation,disabled:Oe,onChange:Ke=>je(on=>({...on,[B]:{...ye,elevation:Number(Ke.target.value)}})),required:!0})]}),r.jsxs("label",{className:`form-field ${ft?"field-missing":""}`,children:[r.jsx("span",{children:"Coordinates"}),r.jsxs("div",{className:"input-with-button",children:[r.jsx("input",{type:"text",value:ye.coordinates,disabled:Oe,onChange:Ke=>je(on=>({...on,[B]:{...ye,coordinates:Ke.target.value}})),required:!0}),r.jsx("button",{type:"button",className:"ghost",disabled:!ye.coordinates.trim(),onClick:()=>{const Ke=ye.coordinates.trim();Ke&&window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(Ke)}`,"_blank")},children:"Open in Maps"})]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Description"}),r.jsx("input",{type:"text",value:ye.description||"",disabled:Oe,onChange:Ke=>je(on=>({...on,[B]:{...ye,description:Ke.target.value}})),placeholder:"Optional"})]}),r.jsxs("div",{className:"form-actions",style:{gridColumn:"1 / -1"},children:[te==="new"&&r.jsx("button",{type:"button",className:"ghost",onClick:()=>_h(B),disabled:ee,children:ee?"Adding":"Create & attach"}),te==="existing"&&ie&&r.jsxs("span",{className:"muted",children:["Viewing details of ",ie.name]}),r.jsx("button",{type:"button",className:"ghost",onClick:()=>Pe(Ke=>({...Ke,[B]:!1})),disabled:ee,children:"Close"})]})]})})()}),r.jsx("div",{className:"innhopp-actions"}),r.jsx("button",{type:"button",className:"ghost danger",onClick:()=>Eh(B),children:"Remove"})]},N)}),r.jsxs("div",{className:"form-actions",style:{flexWrap:"wrap",gap:"0.75rem",marginTop:"1rem"},children:[r.jsx("button",{type:"button",className:"primary",onClick:kh,disabled:re,children:"Create new Innhopp"}),r.jsx("button",{type:"submit",className:pt,disabled:re||We,children:wt}),W&&r.jsx("span",{className:"muted",children:W})]})]})]})]}),r.jsxs("article",{className:"card",children:[r.jsxs("header",{className:"card-header",onClick:()=>Vt("airfields"),style:{cursor:"pointer"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flex:1},children:[r.jsx("button",{className:"ghost",type:"button",onClick:c=>{c.stopPropagation(),Vt("airfields")},children:He.airfields?"":""}),r.jsx("h3",{style:{margin:0},children:"Airfields"})]}),r.jsxs("span",{className:"badge neutral",children:[E.length," AIRFIELDS"]})]}),He.airfields&&(E.length===0?r.jsx("p",{className:"muted",children:"No airfields linked yet."}):r.jsx("ul",{className:"status-list",style:{maxHeight:"24rem",overflowY:"auto"},children:E.map(c=>{const N=_.find(B=>B.id===c);return r.jsxs("li",{id:`airfield-${c}`,style:{...ve,...xt===`airfield-${c}`?ce:{}},children:[r.jsxs(nt,{to:`/airfields/${c}`,className:"card-link",style:{flex:1},onClick:()=>{if(e)try{sessionStorage.setItem(`event-detail-highlight:${e}`,`airfield-${c}`)}catch{}Ft()},children:[r.jsx("strong",{children:(N==null?void 0:N.name)||`Airfield #${c}`}),(N==null?void 0:N.coordinates)&&r.jsxs("div",{className:"muted",children:["Coords: ",N.coordinates]}),r.jsxs("div",{className:"muted",children:["Elevation: ",(N==null?void 0:N.elevation)!==void 0?nl(N.elevation):"Unknown",N!=null&&N.description?`  ${N.description}`:""]})]}),r.jsx("button",{type:"button",className:"ghost danger",onClick:()=>Ih(c),children:"Remove"})]},c)})})),He.airfields&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"form-grid",style:{marginTop:"1rem"},children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Select airfield"}),r.jsxs("select",{value:k,onChange:c=>{const N=c.target.value;I(N),N==="__new__"&&(pe(!0),I(""))},children:[r.jsx("option",{value:"",children:"Choose an airfield"}),r.jsx("option",{value:"__new__",children:"Create new airfield"}),dd.map(c=>r.jsx("optgroup",{label:c.label,children:c.options.filter(N=>xh.some(B=>B.id===N.value)).map(N=>r.jsx("option",{value:N.value,children:N.label},N.key))},c.label))]})]}),r.jsxs("div",{className:"form-actions",style:{gap:"0.75rem",alignItems:"center"},children:[r.jsx("button",{type:"button",className:"primary",onClick:Ah,disabled:!k,children:"Add"}),r.jsx("button",{type:"button",className:pt,onClick:zr,disabled:re||We,children:wt})]})]}),oe&&r.jsxs("form",{className:"form-grid",style:{marginTop:"1rem"},onSubmit:Dh,children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Name"}),r.jsx("input",{type:"text",value:f.name,onChange:c=>w(N=>({...N,name:c.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Elevation (m)"}),r.jsx("input",{type:"number",min:0,step:1,value:f.elevation,onChange:c=>w(N=>({...N,elevation:c.target.value})),required:!0})]}),r.jsxs("label",{className:`form-field ${P?"field-missing":""}`,children:[r.jsx("span",{children:"Coordinates (DMS)"}),r.jsxs("div",{className:"input-with-button",children:[r.jsx("input",{type:"text",value:f.coordinates,onChange:c=>w(N=>({...N,coordinates:c.target.value})),pattern:`^[0-9]{1,3}[0-9]{1,2}'[0-9]{1,2}(?:\\.\\d+)?"[NS]\\s[0-9]{1,3}[0-9]{1,2}'[0-9]{1,2}(?:\\.\\d+)?"[EW]$`,title:`Use DMS format like 1114'30.0"N 7342'59.7"W`,required:!0}),r.jsx("button",{type:"button",className:"ghost",disabled:!f.coordinates.trim(),onClick:()=>{const c=f.coordinates.trim();c&&window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(c)}`,"_blank")},children:"Open in Maps"})]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Description"}),r.jsx("input",{type:"text",value:f.description,onChange:c=>w(N=>({...N,description:c.target.value})),placeholder:"Optional notes"})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"submit",className:"ghost",disabled:ee,children:ee?"Adding":"Create & attach"}),r.jsx("button",{type:"button",className:"ghost",onClick:()=>pe(!1),disabled:ee,children:"Cancel"})]})]})]})]}),r.jsxs("article",{className:"card",children:[r.jsxs("header",{className:"card-header",onClick:()=>Vt("participants"),style:{cursor:"pointer"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flex:1},children:[r.jsx("button",{className:"ghost",type:"button",onClick:c=>{c.stopPropagation(),Vt("participants")},children:He.participants?"":""}),r.jsx("h3",{style:{margin:0},children:"Participants"})]}),r.jsxs("span",{className:"badge neutral",children:[y.filter(c=>{var B;return!(((B=d.find(te=>te.id===c))==null?void 0:B.roles)||[]).includes("Staff")}).length," ","Participants"]})]}),He.participants&&(y.filter(c=>{var B;return!(((B=d.find(te=>te.id===c))==null?void 0:B.roles)||[]).includes("Staff")}).length===0?r.jsx("p",{className:"muted",children:"No participants yet."}):r.jsx("ul",{className:"status-list",style:{maxHeight:"24rem",overflowY:"auto"},children:y.map(c=>d.find(N=>N.id===c)).filter(c=>!!c&&!(Array.isArray(c.roles)&&c.roles.includes("Staff"))).sort((c,N)=>c.full_name.localeCompare(N.full_name,void 0,{sensitivity:"base"})).map(c=>{const N=c.id,B=Array.isArray(c.roles)?c.roles:[],te=B.includes("Jump Leader"),ie=B.includes("Jump Master"),ye=B.filter(Oe=>!(Oe==="Participant"||Oe==="Staff"||te&&(Oe==="Jump Master"||Oe==="Skydiver")||ie&&Oe==="Skydiver"));return r.jsxs("li",{id:`participant-${N}`,style:{...ve,...xt===`participant-${N}`?ce:{}},children:[r.jsxs(nt,{to:`/participants/${N}`,state:{fromEventId:e,highlightId:`participant-${N}`},className:"card-link",style:{flex:1},onClick:()=>{if(e)try{sessionStorage.setItem(`event-detail-highlight:${e}`,`participant-${N}`)}catch{}Ft()},children:[r.jsx("strong",{children:cd(N)}),r.jsx("div",{className:"muted",children:c.email||"No email on file"}),r.jsxs("div",{className:"muted",children:["Experience: ",c.experience_level||"Not provided"]}),ye.length>0&&r.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.35rem",marginTop:"0.25rem"},children:ye.map(Oe=>r.jsx("span",{className:"badge neutral",children:Oe},Oe))})]}),r.jsx("button",{type:"button",className:"ghost danger",onClick:()=>ud(N),children:"Remove"})]},N)})})),He.participants&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"form-grid",style:{marginTop:"1rem"},children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Select participant"}),r.jsxs("select",{value:m,onChange:c=>{const N=c.target.value;N==="__new__"?(me(!0),v("")):v(N)},children:[r.jsx("option",{value:"",children:"Choose a participant"}),r.jsx("option",{value:"__new__",children:"Create new participant"}),yh.map(c=>r.jsxs("option",{value:c.id,children:[c.full_name," (",c.email||"No email",")"]},c.id))]})]}),r.jsxs("div",{className:"form-actions",style:{gap:"0.5rem",alignItems:"center"},children:[r.jsx("button",{type:"button",className:"primary",onClick:Nh,disabled:!m,children:"Add"}),r.jsx("button",{type:"button",className:pt,onClick:zr,disabled:re||We,children:wt})]})]}),Ne&&r.jsxs("form",{className:"form-grid",style:{marginTop:"1rem"},onSubmit:wh,children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Full name"}),r.jsx("input",{type:"text",value:se.full_name,onChange:c=>R(N=>({...N,full_name:c.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Email"}),r.jsx("input",{type:"email",value:se.email,onChange:c=>R(N=>({...N,email:c.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Phone"}),r.jsx("input",{type:"text",value:se.phone,onChange:c=>R(N=>({...N,phone:c.target.value})),placeholder:"Optional"})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Experience level"}),r.jsx("input",{type:"text",value:se.experience_level,onChange:c=>R(N=>({...N,experience_level:c.target.value})),placeholder:"Optional"})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Emergency contact"}),r.jsx("input",{type:"text",value:se.emergency_contact,onChange:c=>R(N=>({...N,emergency_contact:c.target.value})),placeholder:"Optional"})]}),r.jsxs("div",{className:"form-field",style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Roles"}),r.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:tl.map(c=>{var te;const N=(te=se.roles)==null?void 0:te.includes(c),B=c==="Staff";return r.jsxs("label",{className:"badge neutral",style:{display:"inline-flex",alignItems:"center",gap:"0.35rem"},children:[r.jsx("input",{type:"checkbox",checked:N,disabled:B,onChange:ie=>{R(ye=>{const Oe=new Set(ye.roles||[]);ie.target.checked?Oe.add(c):Oe.delete(c);const ft=Array.from(Oe);return{...ye,roles:ft.length>0?ft:["Participant","Skydiver"]}})}}),c]},c)})}),r.jsx("p",{className:"muted",style:{margin:0},children:"Staff cannot be assigned here."})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"submit",className:"primary",disabled:ue,children:ue?"Adding":"Add participant"}),r.jsx("button",{type:"button",className:"ghost",onClick:()=>me(!1),disabled:ue,children:"Cancel"})]})]})]})]}),r.jsxs("article",{className:"card",children:[r.jsxs("header",{className:"card-header",onClick:()=>Vt("staff"),style:{cursor:"pointer"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flex:1},children:[r.jsx("button",{className:"ghost",type:"button",onClick:c=>{c.stopPropagation(),Vt("staff")},children:He.staff?"":""}),r.jsx("h3",{style:{margin:0},children:"Staff"})]}),r.jsxs("span",{className:"badge neutral",children:[bl.length," staff"]})]}),He.staff&&(bl.length===0?r.jsx("p",{className:"muted",children:"No staff yet."}):r.jsx("ul",{className:"status-list",style:{maxHeight:"24rem",overflowY:"auto"},children:bl.map(c=>{const N=c.id,B=Array.isArray(c.roles)?c.roles:[],te=B.includes("Jump Leader"),ie=B.includes("Jump Master"),ye=B.filter(Oe=>!(Oe==="Participant"||Oe==="Staff"||te&&(Oe==="Jump Master"||Oe==="Skydiver")||ie&&Oe==="Skydiver"));return r.jsxs("li",{id:`staff-${N}`,style:{...ve,...xt===`staff-${N}`?ce:{}},children:[r.jsxs(nt,{to:`/participants/${N}`,className:"card-link",style:{flex:1},onClick:()=>{if(e)try{sessionStorage.setItem(`event-detail-highlight:${e}`,`staff-${N}`)}catch{}Ft()},state:{fromEventId:e,highlightId:`staff-${N}`},children:[r.jsx("strong",{children:c.full_name||cd(N)}),r.jsx("div",{className:"muted",children:c.email||"No email on file"}),r.jsxs("div",{className:"muted",children:["Experience: ",c.experience_level||"Not provided"]}),ye.length>0&&r.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.35rem",marginTop:"0.25rem"},children:ye.map(Oe=>r.jsx("span",{className:"badge neutral",children:Oe},Oe))})]}),r.jsx("button",{type:"button",className:"ghost danger",onClick:()=>ud(N),disabled:re,children:"Remove"})]},N)})})),He.staff&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"form-grid",style:{marginTop:"1rem"},children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Select staff"}),r.jsxs("select",{value:j,onChange:c=>{const N=c.target.value;N==="__new__"?(we(!0),D("")):D(N)},children:[r.jsx("option",{value:"",children:"Choose staff"}),r.jsx("option",{value:"__new__",children:"Create new staff"}),bh.map(c=>r.jsxs("option",{value:c.id,children:[c.full_name," (",c.email||"No email",")"]},c.id))]})]}),r.jsxs("div",{className:"form-actions",style:{gap:"0.5rem",alignItems:"center"},children:[r.jsx("button",{type:"button",className:"primary",onClick:Sh,disabled:!j,children:"Add"}),r.jsx("button",{type:"button",className:pt,onClick:zr,disabled:re||We,children:wt})]})]}),he&&r.jsxs("form",{className:"form-grid",style:{marginTop:"1rem"},onSubmit:Ch,children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Full name"}),r.jsx("input",{type:"text",value:ae.full_name,onChange:c=>de(N=>({...N,full_name:c.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Email"}),r.jsx("input",{type:"email",value:ae.email,onChange:c=>de(N=>({...N,email:c.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Phone"}),r.jsx("input",{type:"text",value:ae.phone,onChange:c=>de(N=>({...N,phone:c.target.value})),placeholder:"Optional"})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Experience level"}),r.jsx("input",{type:"text",value:ae.experience_level,onChange:c=>de(N=>({...N,experience_level:c.target.value})),placeholder:"Optional"})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Emergency contact"}),r.jsx("input",{type:"text",value:ae.emergency_contact,onChange:c=>de(N=>({...N,emergency_contact:c.target.value})),placeholder:"Optional"})]}),r.jsxs("div",{className:"form-field",style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Roles"}),r.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:tl.map(c=>{var te;const N=(te=ae.roles)==null?void 0:te.includes(c),B=c==="Participant"||c==="Staff";return r.jsxs("label",{className:"badge neutral",style:{display:"inline-flex",alignItems:"center",gap:"0.35rem"},children:[r.jsx("input",{type:"checkbox",checked:N,disabled:B,onChange:ie=>{de(ye=>{const Oe=new Set(ye.roles||[]);ie.target.checked?Oe.add(c):Oe.delete(c);const ft=Array.from(Oe);return{...ye,roles:ft.length>0?ft:["Participant","Staff"]}})}}),c]},c)})})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"submit",className:"primary",disabled:fe,children:fe?"Adding":"Add staff"}),r.jsx("button",{type:"button",className:"ghost",onClick:()=>we(!1),disabled:fe,children:"Cancel"})]})]})]})]}),r.jsxs("article",{className:"card",children:[r.jsxs("header",{className:"card-header",onClick:()=>Vt("accommodations"),style:{cursor:"pointer"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flex:1},children:[r.jsx("button",{className:"ghost",type:"button",onClick:c=>{c.stopPropagation(),Vt("accommodations")},children:He.accommodations?"":""}),r.jsx("h3",{style:{margin:0},children:"Accommodation"})]}),r.jsxs("span",{className:"badge neutral",children:[z.length," ACCOMMODATIONS"]})]}),He.accommodations&&r.jsxs(r.Fragment,{children:[z.length>0?r.jsx("ul",{className:"status-list",style:{maxHeight:"24rem",overflowY:"auto"},children:Ae.map((c,N)=>r.jsx("li",{id:`accommodation-${c.id}`,style:{...ve,...xt===`accommodation-${c.id}`?ce:{}},children:r.jsxs(nt,{to:`/events/${e}/accommodations/${c.id}`,state:{fromEventId:e,highlightId:`accommodation-${c.id}`},className:"card-link",style:{display:"flex",flexDirection:"column",gap:"0.25rem",width:"100%"},onClick:()=>{if(e)try{sessionStorage.setItem(`event-detail-highlight:${e}`,`accommodation-${c.id}`)}catch{}Ft()},children:[r.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",gap:"0.75rem",width:"100%"},children:[r.jsx("strong",{children:c.name||"Accommodation"}),r.jsx("span",{className:`badge ${c.booked&&Mt(c.coordinates)?"success":"danger"}`,"aria-label":c.booked?"Booked":"Not booked",style:{flexShrink:0},children:c.booked&&Mt(c.coordinates)?"":"NOT BOOKED"})]}),r.jsx("div",{className:"muted",style:{marginTop:"0.2rem"},children:c.capacity?`Capacity: ${c.capacity}`:"Capacity: n/a"}),(c.check_in_at||c.check_out_at)&&r.jsxs("div",{className:"muted",style:{marginTop:"0.1rem"},children:[c.check_in_at?`${as(c.check_in_at)}`:"",c.check_in_at&&c.check_out_at?"  ":"",c.check_out_at?`${as(c.check_out_at)}`:""]}),c.notes?r.jsx("div",{className:"muted",style:{marginTop:"0.1rem"},children:c.notes}):null]})},c.id||N))}):r.jsx("p",{className:"muted",children:"No accommodation linked yet."}),r.jsx("div",{className:"form-actions",style:{marginTop:"0.5rem"},children:r.jsx("button",{type:"button",className:"ghost",onClick:()=>Le(c=>!c),children:Fe?"Cancel":"Create new accommodation"})}),Fe&&r.jsxs("div",{className:"form-grid",style:{marginTop:"0.5rem"},children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Name"}),r.jsx("input",{type:"text",value:A.name,onChange:c=>H(N=>({...N,name:c.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Capacity"}),r.jsx("input",{type:"number",min:0,value:A.capacity,onChange:c=>H(N=>({...N,capacity:c.target.value}))})]}),r.jsxs("label",{className:`form-field ${Se?"field-missing":""}`,children:[r.jsx("span",{children:"Coordinates (DMS)"}),r.jsxs("div",{className:"input-with-button",children:[r.jsx("input",{type:"text",value:A.coordinates,onChange:c=>H(N=>({...N,coordinates:c.target.value}))}),r.jsx("button",{type:"button",className:"ghost",disabled:!A.coordinates.trim(),onClick:()=>{const c=A.coordinates.trim();c&&window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(c)}`,"_blank")},children:"Open in Maps"})]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Check-in"}),r.jsx($t,{value:Ge(A.check_in_at),options:{enableTime:!0,dateFormat:"Y-m-d H:i"},onChange:c=>{const N=c[0];H(B=>({...B,check_in_at:N?Bt(N):""}))}})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Check-out"}),r.jsx($t,{value:Ge(A.check_out_at),options:{enableTime:!0,dateFormat:"Y-m-d H:i"},onChange:c=>{const N=c[0];H(B=>({...B,check_out_at:N?Bt(N):""}))}})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Booked"}),r.jsxs("div",{className:"checkbox-field",children:[r.jsx("input",{type:"checkbox",checked:A.booked,onChange:c=>H(N=>({...N,booked:c.target.checked}))}),r.jsx("span",{children:"Mark as booked"})]})]}),r.jsxs("label",{className:"form-field",style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Notes"}),r.jsx("input",{type:"text",value:A.notes,onChange:c=>H(N=>({...N,notes:c.target.value}))})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"button",className:"primary",onClick:()=>{A.name.trim()&&(async()=>{try{const c=await Rp(Number(e),{name:A.name.trim(),capacity:Number(A.capacity)||0,coordinates:A.coordinates.trim()||void 0,booked:A.booked,check_in_at:A.check_in_at||void 0,check_out_at:A.check_out_at||void 0,notes:A.notes.trim()||void 0});V(N=>[c,...N]),H({name:"",capacity:"",coordinates:"",booked:!1,check_in_at:"",check_out_at:"",notes:""}),Le(!1)}catch(c){Z(c instanceof Error?c.message:"Failed to create accommodation")}})()},children:"Save accommodation"}),r.jsx("button",{type:"button",className:"ghost",onClick:()=>{Le(!1),H({name:"",capacity:"",coordinates:"",booked:!1,check_in_at:"",check_out_at:"",notes:""})},children:"Cancel"})]})]}),r.jsx("div",{className:"form-actions",style:{marginTop:"0.75rem"},children:r.jsx("button",{type:"button",className:pt,onClick:zr,disabled:re||We,children:wt})})]})]}),r.jsxs("article",{className:"card",children:[r.jsxs("header",{className:"card-header",onClick:()=>Vt("transports"),style:{cursor:"pointer"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flex:1},children:[r.jsx("button",{className:"ghost",type:"button",onClick:c=>{c.stopPropagation(),Vt("transports")},children:He.transports?"":""}),r.jsx("h3",{style:{margin:0},children:"Transport"})]}),r.jsxs("span",{className:"badge neutral",children:[h.length," ROUTES"]})]}),He.transports&&r.jsxs(r.Fragment,{children:[h.length>0?r.jsx("ul",{className:"status-list",style:{maxHeight:"24rem",overflowY:"auto"},children:h.slice().sort((c,N)=>{var ie,ye;const B=((ie=et(c.scheduled_at))==null?void 0:ie.getTime())??Number.POSITIVE_INFINITY,te=((ye=et(N.scheduled_at))==null?void 0:ye.getTime())??Number.POSITIVE_INFINITY;return B-te}).map(c=>{const N=Ue(c.pickup_location),B=Ue(c.destination),te=Number.isFinite(c.passenger_count)&&c.passenger_count>=0,ie=Array.isArray(c.vehicles)&&c.vehicles.length>0,ye=Mt(c.pickup_location)&&Mt(c.destination)&&Mt(c.scheduled_at)&&te&&ie&&Mt(N)&&Mt(B);return r.jsx("li",{id:`transport-${c.id}`,style:{...ve,...xt===`transport-${c.id}`?ce:{}},children:r.jsxs(nt,{to:`/logistics/${c.id}`,state:{fromEventId:e,highlightId:`transport-${c.id}`},className:"card-link",style:{display:"flex",flexDirection:"column",gap:"0.25rem",width:"100%"},onClick:()=>{if(e)try{sessionStorage.setItem(`event-detail-highlight:${e}`,`transport-${c.id}`)}catch{}Ft()},children:[r.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",gap:"0.75rem",width:"100%"},children:[r.jsxs("strong",{style:{display:"block"},children:[c.pickup_location,"  ",c.destination]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.35rem",flexShrink:0},children:[r.jsx("span",{className:`badge ${ye?"success":"danger"}`,style:{minWidth:"2.4ch",textAlign:"center"},children:ye?"":"!"}),r.jsxs("span",{className:"badge neutral",children:[c.passenger_count," PAX"]})]})]}),r.jsx("div",{className:"muted",style:{display:"flex",gap:"0.35rem",flexWrap:"wrap"},children:c.scheduled_at?`${as(c.scheduled_at)}`:"Unscheduled"}),Array.isArray(c.vehicles)&&c.vehicles.length>0?r.jsx("div",{className:"muted",style:{display:"flex",flexDirection:"column",gap:"0.15rem"},children:c.vehicles.map((Oe,ft)=>r.jsx("div",{style:{display:"flex",gap:"0.35rem",alignItems:"center",flexWrap:"wrap"},children:r.jsx("strong",{children:Oe.name})},ft))}):null]})},c.id)})}):r.jsx("p",{className:"muted",children:"No transport routes yet."}),r.jsx("div",{className:"form-actions",style:{marginTop:"0.5rem"},children:r.jsx("button",{type:"button",className:"ghost",onClick:()=>De(c=>!c),children:qe?"Cancel":"Create new transport route"})}),qe&&r.jsxs("div",{className:"form-grid",style:{marginTop:"0.5rem"},children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Pickup location"}),r.jsxs("select",{value:$e.pickup_location,onChange:c=>tt(N=>({...N,pickup_location:c.target.value})),required:!0,children:[r.jsx("option",{value:"",children:"Select pickup"}),Ua.map(c=>c.options.length>0&&r.jsx("optgroup",{label:c.label,children:c.options.map(N=>r.jsx("option",{value:N.value,children:N.label},`${c.label}-${N.value}`))},c.label))]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Destination"}),r.jsxs("select",{value:$e.destination,onChange:c=>tt(N=>({...N,destination:c.target.value})),required:!0,children:[r.jsx("option",{value:"",children:"Select destination"}),Ua.map(c=>c.options.length>0&&r.jsx("optgroup",{label:c.label,children:c.options.map(N=>r.jsx("option",{value:N.value,children:N.label},`${c.label}-${N.value}`))},c.label))]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Passenger count"}),r.jsx("input",{type:"number",min:0,value:$e.passenger_count,onChange:c=>tt(N=>({...N,passenger_count:c.target.value}))})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Scheduled at"}),r.jsx($t,{value:Ge($e.scheduled_at),options:{enableTime:!0,dateFormat:"Y-m-d H:i",time_24hr:!0},onChange:c=>{const N=c[0];tt(B=>({...B,scheduled_at:N?Bt(N):""}))}})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"button",className:"primary",onClick:hh,children:"Save transport"}),r.jsx("button",{type:"button",className:"ghost",onClick:()=>De(!1),children:"Cancel"})]})]}),r.jsx("div",{className:"form-actions",style:{marginTop:"0.75rem"},children:r.jsx("button",{type:"button",className:pt,onClick:zr,disabled:re||We,children:wt})})]})]}),r.jsxs("article",{className:"card",children:[r.jsxs("header",{className:"card-header",onClick:()=>Vt("groundCrews"),style:{cursor:"pointer"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flex:1},children:[r.jsx("button",{className:"ghost",type:"button",onClick:c=>{c.stopPropagation(),Vt("groundCrews")},children:He.groundCrews?"":""}),r.jsx("h3",{style:{margin:0},children:"Ground Crew"})]}),r.jsxs("span",{className:"badge neutral",children:[L.length," ENTRIES"]})]}),He.groundCrews&&r.jsxs(r.Fragment,{children:[L.length>0?r.jsx("ul",{className:"status-list",style:{maxHeight:"24rem",overflowY:"auto"},children:L.slice().sort((c,N)=>{var ie,ye;const B=((ie=et(c.scheduled_at))==null?void 0:ie.getTime())??Number.POSITIVE_INFINITY,te=((ye=et(N.scheduled_at))==null?void 0:ye.getTime())??Number.POSITIVE_INFINITY;return B-te}).map(c=>{const N=Ue(c.pickup_location),B=Ue(c.destination),te=Number.isFinite(c.passenger_count)&&c.passenger_count>=0,ie=Array.isArray(c.vehicles)&&c.vehicles.length>0,ye=Mt(c.pickup_location)&&Mt(c.destination)&&Mt(c.scheduled_at)&&te&&ie&&Mt(N)&&Mt(B);return r.jsx("li",{id:`ground-crew-${c.id}`,style:{...ve,...xt===`ground-crew-${c.id}`?ce:{}},children:r.jsxs(nt,{to:`/logistics/ground-crew/${c.id}`,state:{fromEventId:e,highlightId:`ground-crew-${c.id}`},className:"card-link",style:{display:"flex",flexDirection:"column",gap:"0.25rem",width:"100%"},onClick:()=>{if(e)try{sessionStorage.setItem(`event-detail-highlight:${e}`,`ground-crew-${c.id}`)}catch{}Ft()},children:[r.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",gap:"0.75rem",width:"100%"},children:[r.jsxs("strong",{style:{display:"block"},children:[c.pickup_location,"  ",c.destination]}),r.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.35rem",flexShrink:0},children:r.jsx("span",{className:`badge ${ye?"success":"danger"}`,style:{minWidth:"2.4ch",textAlign:"center"},children:ye?"":"!"})})]}),r.jsx("div",{className:"muted",style:{display:"flex",gap:"0.35rem",flexWrap:"wrap"},children:c.scheduled_at?`${as(c.scheduled_at)}`:"Unscheduled"}),Array.isArray(c.vehicles)&&c.vehicles.length>0?r.jsx("div",{className:"muted",style:{display:"flex",flexDirection:"column",gap:"0.15rem"},children:c.vehicles.map((Oe,ft)=>r.jsx("div",{style:{display:"flex",gap:"0.35rem",alignItems:"center",flexWrap:"wrap"},children:r.jsx("strong",{children:Oe.name})},ft))}):null]})},c.id)})}):r.jsx("p",{className:"muted",children:"No ground crew entries yet."}),r.jsx("div",{className:"form-actions",style:{marginTop:"0.5rem"},children:r.jsx("button",{type:"button",className:"ghost",onClick:()=>Et(c=>!c),children:Pt?"Cancel":"Create new ground crew entry"})}),Pt&&r.jsxs("div",{className:"form-grid",style:{marginTop:"0.5rem"},children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Start location"}),r.jsxs("select",{value:O.pickup_location,onChange:c=>Y(N=>({...N,pickup_location:c.target.value})),required:!0,children:[r.jsx("option",{value:"",children:"Select start location"}),Ua.map(c=>c.options.length>0&&r.jsx("optgroup",{label:c.label,children:c.options.map(N=>r.jsx("option",{value:N.value,children:N.label},`gc-start-${c.label}-${N.value}`))},`gc-start-${c.label}`))]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Destination"}),r.jsxs("select",{value:O.destination,onChange:c=>Y(N=>({...N,destination:c.target.value})),required:!0,children:[r.jsx("option",{value:"",children:"Select destination"}),Ua.map(c=>c.options.length>0&&r.jsx("optgroup",{label:c.label,children:c.options.map(N=>r.jsx("option",{value:N.value,children:N.label},`gc-dest-${c.label}-${N.value}`))},`gc-dest-${c.label}`))]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Crew count"}),r.jsx("input",{type:"number",min:0,value:O.passenger_count,onChange:c=>Y(N=>({...N,passenger_count:c.target.value}))})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Scheduled at"}),r.jsx($t,{value:Ge(O.scheduled_at),options:{enableTime:!0,dateFormat:"Y-m-d H:i",time_24hr:!0},onChange:c=>{const N=c[0];Y(B=>({...B,scheduled_at:N?Bt(N):""}))}})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"button",className:"primary",onClick:gh,children:"Save ground crew"}),r.jsx("button",{type:"button",className:"ghost",onClick:()=>Et(!1),children:"Cancel"})]})]}),r.jsx("div",{className:"form-actions",style:{marginTop:"0.75rem"},children:r.jsx("button",{type:"button",className:pt,onClick:zr,disabled:re||We,children:wt})})]})]}),r.jsxs("article",{className:"card",children:[r.jsxs("header",{className:"card-header",onClick:()=>Vt("meals"),style:{cursor:"pointer"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flex:1},children:[r.jsx("button",{className:"ghost",type:"button",onClick:c=>{c.stopPropagation(),Vt("meals")},children:He.meals?"":""}),r.jsx("h3",{style:{margin:0},children:"Meals"})]}),r.jsxs("span",{className:"badge neutral",children:[Be.length," MEALS"]})]}),He.meals&&r.jsx(r.Fragment,{children:Be.length>0?r.jsx("ul",{className:"status-list",style:{maxHeight:"24rem",overflowY:"auto"},children:ke.map(c=>{const N=Mt(c.name)&&Mt(c.location)&&Mt(c.scheduled_at);return r.jsx("li",{id:`meal-${c.id}`,style:{...ve,...xt===`meal-${c.id}`?ce:{}},children:r.jsxs(nt,{to:`/logistics/meals/${c.id}`,state:{fromEventId:e,highlightId:`meal-${c.id}`},className:"card-link",style:{display:"grid",gridTemplateColumns:"1fr",gap:"0.2rem",flex:1},onClick:()=>{if(e)try{sessionStorage.setItem(`event-detail-highlight:${e}`,`meal-${c.id}`)}catch{}Ft()},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[r.jsx("strong",{style:{flex:1},children:c.name}),r.jsx("span",{className:`badge ${N?"success":"danger"}`,style:{minWidth:"2.4ch",textAlign:"center",flexShrink:0},children:N?"":"!"})]}),r.jsxs("div",{className:"muted",style:{display:"flex",gap:"0.35rem",flexWrap:"wrap"},children:[c.location?c.location:"Location required",c.scheduled_at?` ${as(c.scheduled_at)}`:""]}),c.notes?r.jsx("div",{className:"muted",children:c.notes}):null]})},c.id)})}):r.jsx("p",{className:"muted",children:"No meals yet."})})]}),r.jsxs("article",{className:"card",children:[r.jsxs("header",{className:"card-header",onClick:()=>Vt("others"),style:{cursor:"pointer"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flex:1},children:[r.jsx("button",{className:"ghost",type:"button",onClick:c=>{c.stopPropagation(),Vt("others")},children:He.others?"":""}),r.jsx("h3",{style:{margin:0},children:"Other logistics"})]}),r.jsxs("span",{className:"badge neutral",children:[le.length," ENTRIES"]})]}),He.others&&r.jsxs(r.Fragment,{children:[le.length>0?r.jsx("ul",{className:"status-list",style:{maxHeight:"24rem",overflowY:"auto"},children:le.slice().sort((c,N)=>{var ie,ye;const B=((ie=et(c.scheduled_at))==null?void 0:ie.getTime())??Number.POSITIVE_INFINITY,te=((ye=et(N.scheduled_at))==null?void 0:ye.getTime())??Number.POSITIVE_INFINITY;return B-te}).map(c=>{const N=Mt(c.name)&&Mt(c.coordinates)&&Mt(c.scheduled_at);return r.jsx("li",{id:`other-${c.id}`,style:{...ve,...xt===`other-${c.id}`?ce:{}},children:r.jsxs(nt,{to:`/logistics/others/${c.id}`,state:{fromEventId:e,highlightId:`other-${c.id}`},className:"card-link",style:{display:"grid",gridTemplateColumns:"1fr",gap:"0.25rem",flex:1},onClick:()=>{if(e)try{sessionStorage.setItem(`event-detail-highlight:${e}`,`other-${c.id}`)}catch{}Ft()},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"0.75rem"},children:[r.jsx("strong",{children:c.name}),r.jsx("span",{className:`badge ${N?"success":"danger"}`,style:{minWidth:"2.4ch",textAlign:"center",marginLeft:"auto",flexShrink:0},children:N?"":"!"})]}),r.jsx("div",{className:"muted",style:{display:"flex",gap:"0.35rem",flexWrap:"wrap"},children:c.scheduled_at?as(c.scheduled_at):"Unscheduled"}),c.notes&&r.jsxs("div",{className:"muted",children:["Notes: ",c.notes]})]})},c.id)})}):r.jsx("p",{className:"muted",children:"No other logistics yet."}),r.jsx("div",{className:"form-actions",style:{marginTop:"0.5rem"},children:r.jsx("button",{type:"button",className:"ghost",onClick:()=>q(c=>!c),children:Q?"Cancel":"Create new entry"})}),Q&&r.jsxs("div",{className:"form-grid",style:{marginTop:"0.5rem"},children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Name"}),r.jsx("input",{type:"text",value:_e.name,onChange:c=>Ce(N=>({...N,name:c.target.value})),required:!0})]}),r.jsxs("label",{className:`form-field ${Ze?"field-missing":""}`,children:[r.jsx("span",{children:"Coordinates"}),r.jsxs("div",{className:"input-with-button",children:[r.jsx("input",{type:"text",value:_e.coordinates,onChange:c=>Ce(N=>({...N,coordinates:c.target.value}))}),r.jsx("button",{type:"button",className:"ghost",disabled:!_e.coordinates.trim(),onClick:()=>{const c=_e.coordinates.trim();c&&window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(c)}`,"_blank")},children:"Open in Maps"})]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Scheduled at"}),r.jsx($t,{value:Ge(_e.scheduled_at),options:{enableTime:!0,dateFormat:"Y-m-d H:i",time_24hr:!0},onChange:c=>{const N=c[0];Ce(B=>({...B,scheduled_at:N?Bt(N):""}))}})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Description"}),r.jsx("textarea",{value:_e.description,onChange:c=>Ce(N=>({...N,description:c.target.value}))})]}),r.jsxs("label",{className:"form-field",style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Notes"}),r.jsx("input",{type:"text",value:_e.notes,onChange:c=>Ce(N=>({...N,notes:c.target.value}))})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"button",className:"primary",onClick:vh,children:"Save entry"}),r.jsx("button",{type:"button",className:"ghost",onClick:()=>q(!1),children:"Cancel"})]})]}),r.jsx("div",{className:"form-actions",style:{marginTop:"0.75rem"},children:r.jsx("button",{type:"button",className:pt,onClick:zr,disabled:re||We,children:wt})})]})]})]})},_0=()=>{const{airfieldId:e}=Ln(),n=yt(),[t,s]=o.useState(null),[a,i]=o.useState({name:"",elevation:0,coordinates:"",description:""}),[l,u]=o.useState(!0),[d,x]=o.useState(!1),[_,C]=o.useState(!1),[b,F]=o.useState(null),[y,S]=o.useState(null),E=!a.name.trim();o.useEffect(()=>{let j=!1;return(async()=>{if(e){u(!0),S(null);try{const k=await s0(Number(e));if(j)return;s(k),i({name:k.name,elevation:k.elevation,coordinates:k.coordinates,description:k.description||""})}catch(k){j||S(k instanceof Error?k.message:"Failed to load airfield")}finally{j||u(!1)}}})(),()=>{j=!0}},[e]);const p=async j=>{var D;if(j.preventDefault(),!!e){x(!0),F(null);try{const k={name:a.name.trim(),elevation:Number(a.elevation)||0,coordinates:a.coordinates.trim(),description:((D=a.description)==null?void 0:D.trim())||void 0},I=await a0(Number(e),k);s(I),i({name:I.name,elevation:I.elevation,coordinates:I.coordinates,description:I.description||""}),F("Airfield updated")}catch(k){F(k instanceof Error?k.message:"Failed to update airfield")}finally{x(!1)}}},m=async()=>{if(!(!e||_)&&window.confirm("Are you sure you want to delete this airfield?")){C(!0),F(null);try{await i0(Number(e)),n(-1)}catch(j){F(j instanceof Error?j.message:"Failed to delete airfield"),C(!1)}}};if(l)return r.jsx("p",{className:"muted",children:"Loading airfield"});if(y)return r.jsx("p",{className:"error-text",children:y});if(!t)return r.jsx("p",{className:"error-text",children:"Airfield not found."});const v=Number.isFinite(a.elevation)?ld(a.elevation):null;return r.jsxs("section",{children:[r.jsxs("header",{className:"page-header",children:[r.jsx("div",{children:r.jsx("h2",{children:t.name})}),r.jsxs("div",{className:"card-actions",children:[r.jsx("button",{className:"ghost",type:"button",onClick:()=>n("/airfields/new",{state:{copyAirfield:{name:t.name,elevation:t.elevation,coordinates:t.coordinates,description:t.description}}}),children:"Make a copy"}),r.jsx("button",{className:"ghost",type:"button",onClick:()=>n(-1),children:"Back"}),r.jsx("button",{className:"ghost danger",type:"button",onClick:m,disabled:_,children:_?"Deleting":"Delete airfield"})]})]}),r.jsx("article",{className:"card",children:r.jsxs("form",{className:"form-grid",onSubmit:p,children:[r.jsxs("label",{className:`form-field ${E?"field-missing":""}`,children:[r.jsx("span",{children:"Name"}),r.jsx("input",{type:"text",value:a.name,onChange:j=>i(D=>({...D,name:j.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Elevation (m)"}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx("input",{type:"number",min:0,step:1,value:a.elevation,onChange:j=>i(D=>({...D,elevation:Number(j.target.value)})),required:!0}),r.jsx("span",{className:"muted",style:{whiteSpace:"nowrap"},children:v!==null?`${v} ft`:" ft"})]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Coordinates"}),r.jsxs("div",{className:"input-with-button",children:[r.jsx("input",{type:"text",value:a.coordinates,onChange:j=>i(D=>({...D,coordinates:j.target.value})),placeholder:"Lat, Long",required:!0,style:{minWidth:"22ch"}}),r.jsx("button",{type:"button",className:"ghost",onClick:()=>{a.coordinates.trim()&&window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(a.coordinates)}`,"_blank")},children:"Open in Maps"})]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Description"}),r.jsx("input",{type:"text",value:a.description,onChange:j=>i(D=>({...D,description:j.target.value})),placeholder:"Optional notes"})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"submit",className:"primary",disabled:d,children:d?"Saving":"Save airfield"}),b&&r.jsx("span",{className:"muted",children:b})]})]})})]})},N0=()=>{var _;const e=yt(),t=(_=Zt().state)==null?void 0:_.copyAirfield,[s,a]=o.useState({name:(t==null?void 0:t.name)||"",elevation:(t==null?void 0:t.elevation)??0,coordinates:(t==null?void 0:t.coordinates)||"",description:(t==null?void 0:t.description)||""}),[i,l]=o.useState(!1),[u,d]=o.useState(null);o.useEffect(()=>{d(null)},[]);const x=async C=>{var b;C.preventDefault(),l(!0),d(null);try{const F={name:s.name.trim(),elevation:Number(s.elevation)||0,coordinates:s.coordinates.trim(),description:((b=s.description)==null?void 0:b.trim())||void 0};await el(F),d("Airfield created"),e(-1)}catch(F){d(F instanceof Error?F.message:"Failed to create airfield")}finally{l(!1)}};return r.jsxs("section",{children:[r.jsxs("header",{className:"page-header",children:[r.jsx("div",{children:r.jsx("h2",{children:"Create airfield"})}),r.jsx("div",{className:"card-actions",children:r.jsx("button",{className:"ghost",type:"button",onClick:()=>e(-1),children:"Back"})})]}),r.jsx("article",{className:"card",children:r.jsxs("form",{className:"form-grid",onSubmit:x,children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Name"}),r.jsx("input",{type:"text",value:s.name,onChange:C=>a(b=>({...b,name:C.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Elevation (m)"}),r.jsx("input",{type:"number",min:0,step:1,value:s.elevation,onChange:C=>a(b=>({...b,elevation:Number(C.target.value)})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Coordinates"}),r.jsx("input",{type:"text",value:s.coordinates,onChange:C=>a(b=>({...b,coordinates:C.target.value})),placeholder:"Lat, Long",required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Description"}),r.jsx("input",{type:"text",value:s.description,onChange:C=>a(b=>({...b,description:C.target.value})),placeholder:"Optional notes"})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"submit",className:"primary",disabled:i,children:i?"Saving":"Save airfield"}),u&&r.jsx("span",{className:"muted",children:u})]})]})})]})},b0=()=>{const[e,n]=o.useState({name:"",starts_on:"",ends_on:""}),[t,s]=o.useState(null),[a,i]=o.useState(!1),l=yt(),u=async d=>{d.preventDefault(),i(!0),s(null);try{const x={name:e.name.trim(),starts_on:e.starts_on};e.ends_on&&(x.ends_on=e.ends_on),await Sx(x),s("Season created"),n({name:"",starts_on:"",ends_on:""}),l("/events")}catch(x){s(x instanceof Error?x.message:"Failed to create season")}finally{i(!1)}};return r.jsxs("section",{children:[r.jsxs("header",{className:"page-header",children:[r.jsx("div",{children:r.jsx("h2",{children:"Create season"})}),r.jsx("button",{className:"ghost",type:"button",onClick:()=>l("/events"),children:"Back to events"})]}),r.jsx("article",{className:"card",children:r.jsxs("form",{className:"form-grid",onSubmit:u,children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Name"}),r.jsx("input",{type:"text",value:e.name,onChange:d=>n(x=>({...x,name:d.target.value})),placeholder:"Enter a name for this season",required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Starts on"}),r.jsx("input",{type:"date",value:e.starts_on,onChange:d=>n(x=>({...x,starts_on:d.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Ends on"}),r.jsx("input",{type:"date",value:e.ends_on,onChange:d=>n(x=>({...x,ends_on:d.target.value})),placeholder:"Optional"})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"submit",className:"primary",disabled:a,children:a?"Creating":"Create season"}),t&&r.jsx("span",{className:"muted",children:t})]})]})})]})},S0=()=>{const[e,n]=sd(),t=yt(),s=e.get("eventId")??"",[a,i]=o.useState([]),[l,u]=o.useState([]),[d,x]=o.useState(s),[_,C]=o.useState(!0),[b,F]=o.useState(null),[y,S]=o.useState(null),[E,p]=o.useState(!1),[m,v]=o.useState(!1),[j,D]=o.useState([]),[k,I]=o.useState({load_number:"",notes:"",capacity:""});o.useEffect(()=>{let R=!1;return(async()=>{C(!0),F(null);try{const[de,Ne,me]=await Promise.all([Ut(),Hp(),ts()]);if(R)return;const he=Array.isArray(de)?de.map(we=>({id:we.id,name:we.name})):[];i(he),u(Array.isArray(Ne)?Ne:[]),D(Array.isArray(me)?me:[])}catch(de){R||F(de instanceof Error?de.message:"Failed to load manifests")}finally{R||C(!1)}})(),()=>{R=!0}},[]);const T=o.useMemo(()=>{const R=Number(d);return R?l.filter(ae=>ae.event_id===R).sort((ae,de)=>ae.load_number-de.load_number):[]},[l,d]),J=o.useMemo(()=>a.find(R=>R.id===Number(d)),[a,d]),se=async R=>{R.preventDefault();const ae=Number(d);if(ae){p(!0),S(null);try{const de={event_id:ae,load_number:Number(k.load_number),notes:k.notes.trim()||void 0,capacity:k.capacity?Number(k.capacity):void 0},Ne=await Ax(de);u(me=>[...me,Ne].sort((he,we)=>he.load_number-we.load_number)),I({load_number:"",notes:"",capacity:""}),v(!1),S("Manifest added")}catch(de){S(de instanceof Error?de.message:"Failed to create manifest")}finally{p(!1)}}};return r.jsxs("section",{children:[r.jsxs("header",{className:"page-header",children:[r.jsx("div",{children:r.jsx("h2",{children:"Manifest"})}),d&&r.jsxs("button",{type:"button",className:"ghost",onClick:()=>t(`/events/${d}`),children:["Back to event",J?`: ${J.name}`:""]})]}),r.jsxs("article",{className:"card",children:[r.jsx("div",{className:"form-grid",style:{marginBottom:"1rem"},children:r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Event"}),r.jsxs("select",{value:d,onChange:R=>{const ae=R.target.value;x(ae),n(ae?{eventId:ae}:{})},children:[r.jsx("option",{value:"",children:"Select an event"}),a.map(R=>r.jsx("option",{value:R.id,children:R.name},R.id))]})]})}),_?r.jsx("p",{className:"muted",children:"Loading manifests"}):b?r.jsx("p",{className:"error-text",children:b}):d?r.jsxs(r.Fragment,{children:[T.length===0?r.jsx("p",{className:"muted",children:"No manifests for this event yet."}):r.jsx("div",{className:"stack",children:T.map(R=>{const ae=Array.isArray(R.participant_ids)?R.participant_ids:[],de=ae.reduce((he,we)=>{const ue=j.find(fe=>fe.id===we);return((ue==null?void 0:ue.roles)||[]).includes("Staff")?he+1:he},0),Ne=ae.length-de,me=R.capacity!=null&&R.capacity>0?ae.length>=R.capacity:!1;return r.jsx(nt,{to:`/manifests/${R.id}?eventId=${d}`,className:"card-link",style:{textDecoration:"none"},children:r.jsx("article",{className:"card",children:r.jsxs("header",{className:"card-header",children:[r.jsxs("div",{children:[r.jsxs("h3",{children:["Load ",R.load_number]}),r.jsxs("p",{className:"muted",style:{marginBottom:0},children:["Capacity: ",R.capacity??"Not set","  Participants: ",Ne,"  Staff: ",de]}),R.notes&&r.jsxs("p",{className:"muted",style:{margin:0},children:["Notes: ",R.notes]})]}),me?r.jsx("span",{className:"badge danger",children:"FULL"}):r.jsx("span",{className:"badge success",children:"Slots Available"})]})})},R.id)})}),r.jsx("hr",{}),!m&&r.jsx("div",{className:"form-actions",children:r.jsx("button",{type:"button",className:"ghost",onClick:()=>v(!0),children:"Add manifest"})}),m&&r.jsxs("form",{className:"form-grid",onSubmit:se,children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Load number"}),r.jsx("input",{type:"number",min:1,value:k.load_number,onChange:R=>I(ae=>({...ae,load_number:R.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Capacity"}),r.jsx("input",{type:"number",min:0,value:k.capacity,onChange:R=>I(ae=>({...ae,capacity:R.target.value})),placeholder:"Slots available"})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Notes"}),r.jsx("input",{type:"text",value:k.notes,onChange:R=>I(ae=>({...ae,notes:R.target.value})),placeholder:"Optional notes"})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"submit",className:"primary",disabled:E||!d,children:E?"Saving":"Add manifest"}),r.jsx("button",{type:"button",className:"ghost",onClick:()=>v(!1),disabled:E,children:"Cancel"}),y&&r.jsx("span",{className:"muted",children:y})]})]})]}):r.jsx("p",{className:"muted",children:"Choose an event to see its manifests."})]})]})},C0=e=>[...e].sort((n,t)=>t.name.localeCompare(n.name)),ro=e=>[...e].sort((n,t)=>n.full_name.localeCompare(t.full_name,void 0,{sensitivity:"base"})),w0=()=>{const[e,n]=sd(),[t,s]=o.useState([]),[a,i]=o.useState([]),[l,u]=o.useState([]),[d,x]=o.useState(()=>e.get("season")||""),[_,C]=o.useState(()=>e.get("event")||""),[b,F]=o.useState(()=>{const R=e.get("roles");return R?R.split(",").filter(Boolean):[]}),[y,S]=o.useState(()=>e.get("q")||""),[E,p]=o.useState(!0),[m,v]=o.useState(null),j=R=>R.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),D=R=>{if(!y.trim())return R;const ae=y.trim(),de=new RegExp(`(${j(ae)})`,"ig");return R.split(de).map((Ne,me)=>Ne.toLowerCase()===ae.toLowerCase()?r.jsx("mark",{children:Ne},me):r.jsx("span",{children:Ne},me))};o.useEffect(()=>{const R=new URLSearchParams;d&&R.set("season",d),_&&R.set("event",_),b.length&&R.set("roles",b.join(",")),y&&R.set("q",y),n(R,{replace:!0})},[d,_,b,y,n]),o.useEffect(()=>{let R=!1;return(async()=>{p(!0),v(null);try{const[de,Ne,me]=await Promise.all([rr(),Ut(),ts()]);if(R)return;s(Array.isArray(de)?de:[]),i(Array.isArray(Ne)?Ne:[]),u(Array.isArray(me)?me:[])}catch(de){R||v(de instanceof Error?de.message:"Failed to load participants")}finally{R||p(!1)}})(),()=>{R=!0}},[]);const k=o.useMemo(()=>{const R=new Map;return l.forEach(ae=>R.set(ae.id,ae)),R},[l]),I=o.useMemo(()=>{const R=new Map;return a.forEach(ae=>{(Array.isArray(ae.participant_ids)?ae.participant_ids:[]).forEach(de=>{const Ne=R.get(de)||[];Ne.push(ae),R.set(de,Ne)})}),R},[a]),T=o.useMemo(()=>{if(!d)return a;const R=Number(d);return a.filter(ae=>ae.season_id===R)},[a,d]),J=o.useMemo(()=>{const R=he=>{const we=b.filter(ge=>ge!=="Participant");if(!we.length)return!0;const ue=Array.isArray(he==null?void 0:he.roles)?he==null?void 0:he.roles:[];return we.every(ge=>ue.includes(ge))},ae=he=>y.trim()?((he==null?void 0:he.full_name)||"").toLowerCase().includes(y.trim().toLowerCase()):!0,de=(he,we,ue)=>{var K;if(ue.has(he))return;ue.add(he);const ge=k.get(he);if(!R(ge)||!ae(ge))return;const fe=((K=I.get(he))==null?void 0:K.length)||0;we.push({id:he,full_name:(ge==null?void 0:ge.full_name)||`Participant #${he}`,email:ge==null?void 0:ge.email,phone:ge==null?void 0:ge.phone,experience_level:ge==null?void 0:ge.experience_level,emergency_contact:ge==null?void 0:ge.emergency_contact,eventCount:fe})},Ne=new Set,me=[];if(_){const he=a.find(we=>we.id===Number(_));return he?((Array.isArray(he.participant_ids)?he.participant_ids:[]).forEach(we=>de(we,me,Ne)),ro(me)):[]}return d?(T.forEach(he=>{(Array.isArray(he.participant_ids)?he.participant_ids:[]).forEach(we=>de(we,me,Ne))}),ro(me)):(l.forEach(he=>de(he.id,me,Ne)),ro(me))},[_,d,b,y,a,T,l,k,I]),se=o.useMemo(()=>{const R=new URLSearchParams;d&&R.set("season",d),_&&R.set("event",_),b.length&&R.set("roles",b.join(",")),y&&R.set("q",y);const ae=R.toString();return ae?`?${ae}`:""},[d,_,b,y]);return r.jsxs("section",{className:"stack",children:[r.jsxs("header",{className:"page-header",style:{position:"relative",paddingRight:"10rem"},children:[r.jsx("div",{children:r.jsx("h2",{children:"Participants"})}),r.jsx(nt,{className:"primary button-link",to:"/participants/new",style:{position:"absolute",right:0,top:0},children:"Add participant"})]}),r.jsxs("article",{className:"card",children:[r.jsxs("div",{className:"form-grid",style:{gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",alignItems:"end"},children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Season"}),r.jsxs("select",{value:d,onChange:R=>{x(R.target.value),C("")},style:{width:"100%",minWidth:"140px"},children:[r.jsx("option",{value:"",children:"All seasons"}),C0(t).map(R=>r.jsx("option",{value:R.id,children:R.name},R.id))]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Event"}),r.jsxs("select",{value:_,onChange:R=>C(R.target.value),style:{width:"100%",minWidth:"160px"},children:[r.jsx("option",{value:"",children:"All events"}),T.map(R=>r.jsx("option",{value:R.id,children:R.name},R.id))]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Name"}),r.jsx("input",{type:"text",placeholder:"Search by name",value:y,onChange:R=>S(R.target.value)})]}),r.jsxs("div",{className:"form-field",style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Roles"}),r.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem",width:"100%"},children:[tl.filter(R=>R!=="Participant").map(R=>{const ae=b.includes(R);return r.jsxs("label",{className:"badge neutral",style:{display:"inline-flex",alignItems:"center",gap:"0.35rem"},children:[r.jsx("input",{type:"checkbox",checked:ae,onChange:de=>{F(Ne=>{const me=new Set(Ne);return de.target.checked?me.add(R):me.delete(R),Array.from(me)})}}),R]},R)}),b.length>0&&r.jsx("button",{type:"button",className:"ghost",onClick:()=>F([]),style:{padding:"0.2rem 0.6rem"},children:"Clear"})]})]})]}),d&&T.length===0&&r.jsx("p",{className:"muted",children:"No events for this season."})]}),r.jsxs("article",{className:"card",children:[r.jsxs("header",{className:"card-header",children:[r.jsx("div",{children:r.jsx("h3",{children:"Participants"})}),r.jsxs("span",{className:"badge neutral",children:[J.length," ",J.length===1?"participant":"participants"]})]}),E?r.jsx("p",{className:"muted",children:"Loading participants"}):m?r.jsx("p",{className:"error-text",children:m}):J.length===0?r.jsx("p",{className:"muted",children:"No participants match the selected filters."}):r.jsx("ul",{className:"status-list",children:J.map(R=>r.jsxs("li",{children:[r.jsxs(nt,{to:{pathname:`/participants/${R.id}`,search:se},className:"card-link",style:{flex:1},children:[r.jsx("strong",{children:D(R.full_name)}),r.jsx("div",{className:"muted",children:R.email||"No email on file"}),r.jsxs("div",{className:"muted",children:["Experience: ",R.experience_level||"Not provided"]})]}),r.jsxs("span",{className:"badge neutral",children:[R.eventCount," ",R.eventCount===1?"event":"events"]})]},R.id))})]})]})},k0=()=>{const[e,n]=o.useState({full_name:"",email:"",phone:"",experience_level:"",emergency_contact:"",roles:["Participant"]}),[t,s]=o.useState(!1),[a,i]=o.useState(null),l=yt(),u=async d=>{var x,_,C;d.preventDefault(),s(!0),i(null);try{await Da({full_name:e.full_name.trim(),email:e.email.trim(),phone:((x=e.phone)==null?void 0:x.trim())||void 0,experience_level:((_=e.experience_level)==null?void 0:_.trim())||void 0,emergency_contact:((C=e.emergency_contact)==null?void 0:C.trim())||void 0,roles:e.roles&&e.roles.length>0?e.roles:["Participant"]}),i("Participant created"),l("/participants")}catch(b){i(b instanceof Error?b.message:"Failed to create participant")}finally{s(!1)}};return r.jsxs("section",{children:[r.jsxs("header",{className:"page-header",children:[r.jsxs("div",{children:[r.jsx("h2",{children:"Create participant"}),r.jsx("p",{children:"Add a new member to the Innhopp Family."})]}),r.jsx("button",{className:"ghost",type:"button",onClick:()=>l("/participants"),children:"Back to participants"})]}),r.jsx("article",{className:"card",children:r.jsxs("form",{className:"form-grid",onSubmit:u,children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Full name"}),r.jsx("input",{type:"text",value:e.full_name,onChange:d=>n(x=>({...x,full_name:d.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Email"}),r.jsx("input",{type:"email",value:e.email,onChange:d=>n(x=>({...x,email:d.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Phone"}),r.jsx("input",{type:"text",value:e.phone,onChange:d=>n(x=>({...x,phone:d.target.value})),placeholder:"Optional"})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Experience level"}),r.jsx("input",{type:"text",value:e.experience_level,onChange:d=>n(x=>({...x,experience_level:d.target.value})),placeholder:"Optional"})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Emergency contact"}),r.jsx("input",{type:"text",value:e.emergency_contact,onChange:d=>n(x=>({...x,emergency_contact:d.target.value})),placeholder:"Optional"})]}),r.jsxs("div",{className:"form-field",style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Roles"}),r.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:tl.map(d=>{var _;const x=(_=e.roles)==null?void 0:_.includes(d);return r.jsxs("label",{className:"badge neutral",style:{display:"inline-flex",alignItems:"center",gap:"0.35rem"},children:[r.jsx("input",{type:"checkbox",checked:x,onChange:C=>{n(b=>{const F=new Set(b.roles||[]);C.target.checked?F.add(d):F.delete(d);const y=Array.from(F);return{...b,roles:y.length>0?y:["Participant"]}})}}),d]},d)})})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"submit",className:"primary",disabled:t,children:t?"Creating":"Create participant"}),a&&r.jsx("span",{className:"muted",children:a})]})]})})]})},E0=["Participant","Skydiver","Staff","Ground Crew","Jump Master","Jump Leader","Photo","Pilot","COP","Driver"],A0=()=>{const{participantId:e}=Ln(),n=yt(),t=Zt();t.search&&`${t.search}`;const[s,a]=o.useState(null),[i,l]=o.useState({full_name:"",email:"",phone:"",experience_level:"",emergency_contact:"",roles:["Participant"]}),[u,d]=o.useState(!0),[x,_]=o.useState(null),[C,b]=o.useState(null),[F,y]=o.useState(!1),[S,E]=o.useState(!1);o.useEffect(()=>{let m=!1;return(async()=>{if(e){d(!0),b(null);try{const j=await Tx(Number(e));if(m)return;a(j),l({full_name:j.full_name,email:j.email,phone:j.phone||"",experience_level:j.experience_level||"",emergency_contact:j.emergency_contact||"",roles:Array.isArray(j.roles)&&j.roles.length>0?j.roles:["Participant"]})}catch(j){m||b(j instanceof Error?j.message:"Failed to load participant")}finally{m||d(!1)}}})(),()=>{m=!0}},[e]);const p=async m=>{var j,D,k;if(m.preventDefault(),!e)return;const v=i.roles&&i.roles.length>0?i.roles:["Participant"];y(!0),_(null);try{const I=await Px(Number(e),{full_name:i.full_name.trim(),email:i.email.trim(),phone:((j=i.phone)==null?void 0:j.trim())||void 0,experience_level:((D=i.experience_level)==null?void 0:D.trim())||void 0,emergency_contact:((k=i.emergency_contact)==null?void 0:k.trim())||void 0,roles:v});a(I),_("Participant updated")}catch(I){_(I instanceof Error?I.message:"Failed to update participant")}finally{y(!1)}};return u?r.jsx("p",{className:"muted",children:"Loading participant"}):C?r.jsx("p",{className:"error-text",children:C}):s?r.jsxs("section",{children:[r.jsxs("header",{className:"page-header",children:[r.jsxs("div",{children:[r.jsx("h2",{children:s.full_name}),r.jsx("p",{className:"muted",children:s.email})]}),r.jsxs("div",{className:"card-actions",children:[r.jsx("button",{className:"ghost",type:"button",onClick:()=>{var j,D;const m=(j=t.state)==null?void 0:j.fromEventId,v=(D=t.state)==null?void 0:D.highlightId;if(m&&v)try{sessionStorage.setItem(`event-detail-highlight:${m}`,v)}catch{}n(-1)},children:"Back"}),r.jsx("button",{className:"ghost danger",type:"button",disabled:S,onClick:async()=>{if(e&&window.confirm("Delete this participant? This cannot be undone."))try{E(!0),await Mx(Number(e)),n(-1)}catch(m){if((m==null?void 0:m.status)===404){n(-1);return}_(m instanceof Error?m.message:"Failed to delete participant"),E(!1)}},children:S?"Deleting":"Delete"})]})]}),r.jsx("article",{className:"card",children:r.jsxs("form",{className:"form-grid",onSubmit:p,children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Full name"}),r.jsx("input",{type:"text",value:i.full_name,onChange:m=>l(v=>({...v,full_name:m.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Email"}),r.jsx("input",{type:"email",value:i.email,onChange:m=>l(v=>({...v,email:m.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Phone"}),r.jsx("input",{type:"text",value:i.phone,onChange:m=>l(v=>({...v,phone:m.target.value})),placeholder:"Optional"})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Experience level"}),r.jsx("input",{type:"text",value:i.experience_level,onChange:m=>l(v=>({...v,experience_level:m.target.value})),placeholder:"Optional"})]}),r.jsxs("div",{className:"form-field",style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Roles"}),r.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:E0.map(m=>{var j;const v=(j=i.roles)==null?void 0:j.includes(m);return r.jsxs("label",{className:"badge neutral",style:{display:"inline-flex",alignItems:"center",gap:"0.35rem"},children:[r.jsx("input",{type:"checkbox",checked:v,onChange:D=>{l(k=>{const I=new Set(k.roles||[]);D.target.checked?I.add(m):I.delete(m);const T=Array.from(I);return{...k,roles:T.length>0?T:["Participant"]}})}}),m]},m)})})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Emergency contact"}),r.jsx("input",{type:"text",value:i.emergency_contact,onChange:m=>l(v=>({...v,emergency_contact:m.target.value})),placeholder:"Optional"})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"submit",className:"primary",disabled:F,children:F?"Saving":"Save participant"}),x&&r.jsx("span",{className:"muted",children:x})]})]})})]}):r.jsx("p",{className:"error-text",children:"Participant not found."})},I0=(e,n=!1)=>e?Bn(e,{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:n?!1:void 0}):"Not scheduled",D0=()=>{const[e,n]=o.useState([]),[t,s]=o.useState([]),[a,i]=o.useState([]),[l,u]=o.useState(""),[d,x]=o.useState(""),[_,C]=o.useState(""),[b,F]=o.useState(""),[y,S]=o.useState(!0),[E,p]=o.useState(null);o.useEffect(()=>{let j=!1;return(async()=>{S(!0),p(null);try{const[k,I,T]=await Promise.all([rr(),Ut(),Pa()]);if(j)return;n(Array.isArray(k)?k:[]),s(Array.isArray(I)?I:[]),i(Array.isArray(T)?T:[])}catch(k){j||p(k instanceof Error?k.message:"Failed to load logistics")}finally{j||S(!1)}})(),()=>{j=!0}},[]);const m=o.useMemo(()=>{if(!l)return t;const j=Number(l);return t.filter(D=>D.season_id===j)},[t,l]),v=o.useMemo(()=>a.filter(j=>!(l&&j.season_id!==Number(l)||d&&j.event_id!==Number(d)||_&&!j.pickup_location.toLowerCase().includes(_.toLowerCase())||b&&!j.destination.toLowerCase().includes(b.toLowerCase()))).sort((j,D)=>{var T,J;const k=((T=et(j.scheduled_at))==null?void 0:T.getTime())??Number.POSITIVE_INFINITY,I=((J=et(D.scheduled_at))==null?void 0:J.getTime())??Number.POSITIVE_INFINITY;return k===I?`${j.pickup_location} ${j.destination}`.localeCompare(`${D.pickup_location} ${D.destination}`):k-I}),[a,l,d,_,b]);return r.jsxs("section",{children:[r.jsxs("header",{className:"page-header",children:[r.jsx("div",{children:r.jsx("h2",{children:"Transport"})}),r.jsxs("div",{className:"card-actions",children:[r.jsx(nt,{className:"ghost",to:"/logistics",style:{fontWeight:700,fontSize:"1.05rem"},children:"Back to logistics"}),r.jsx(nt,{className:"primary button-link",to:"/logistics/new",children:"Create route"})]})]}),r.jsxs("div",{className:"stack",children:[r.jsx("article",{className:"card",children:r.jsxs("div",{className:"form-grid",style:{gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",alignItems:"end",gap:"0.75rem"},children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Season"}),r.jsxs("select",{value:l,onChange:j=>{u(j.target.value),x("")},style:{width:"100%",minWidth:"180px",maxWidth:"25%"},children:[r.jsx("option",{value:"",children:"All seasons"}),[...e].sort((j,D)=>D.name.localeCompare(j.name)).map(j=>r.jsx("option",{value:j.id,children:j.name},j.id))]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Event"}),r.jsxs("select",{value:d,onChange:j=>x(j.target.value),style:{width:"100%",minWidth:"180px"},children:[r.jsx("option",{value:"",children:"All events"}),m.map(j=>r.jsx("option",{value:j.id,children:j.name},j.id))]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Pickup location"}),r.jsx("input",{type:"text",value:_,onChange:j=>C(j.target.value),placeholder:"Filter pickup"})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Destination"}),r.jsx("input",{type:"text",value:b,onChange:j=>F(j.target.value),placeholder:"Filter destination"})]})]})}),r.jsxs("article",{className:"card",children:[r.jsxs("header",{className:"card-header",children:[r.jsx("div",{children:r.jsx("h3",{children:"Transport routes"})}),r.jsxs("span",{className:"badge neutral",children:[v.length," ",v.length===1?"route":"routes"]})]}),y?r.jsx("p",{className:"muted",children:"Loading transports"}):E?r.jsx("p",{className:"error-text",children:E}):v.length===0?r.jsx("p",{className:"muted",children:"No transports match the selected filters."}):r.jsx("ul",{className:"status-list",style:{maxHeight:"24rem",overflowY:"auto"},children:v.map(j=>{var D;return r.jsx("li",{children:r.jsxs(nt,{to:`/logistics/${j.id}`,className:"card-link",style:{flex:1},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"0.5rem"},children:[r.jsxs("div",{children:[r.jsxs("strong",{children:[j.pickup_location,"  ",j.destination]}),r.jsx("div",{className:"muted",children:I0(j.scheduled_at)})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.35rem",flexShrink:0},children:[r.jsx("span",{className:"badge",style:{backgroundColor:"#2b8a3e",color:"#fff"},children:((D=t.find(k=>k.id===j.event_id))==null?void 0:D.name)||`Event #${j.event_id??""}`}),r.jsxs("span",{className:"badge neutral",children:[j.passenger_count," passenger",j.passenger_count===1?"":"s"]})]})]}),j.vehicles&&j.vehicles.length>0&&r.jsxs("div",{className:"muted",children:["Vehicles:"," ",j.vehicles.map(k=>`${k.name}${k.driver?` (Driver: ${k.driver})`:""}  Cap: ${k.passenger_capacity}`).join("; ")]})]})},j.id)})})]})]})]})},T0=()=>{var G;const e=yt(),t=(G=Zt().state)==null?void 0:G.copyTransport,s=Array.isArray(t==null?void 0:t.vehicles)&&t.vehicles.length?t.vehicles.filter(M=>M&&typeof M.name=="string"&&typeof M.passenger_capacity<"u"):[],a=Array.isArray(t==null?void 0:t.vehicle_ids)?t.vehicle_ids.filter(M=>typeof M=="number"):[],[i,l]=o.useState({pickup_location:(t==null?void 0:t.pickup_location)||"",destination:(t==null?void 0:t.destination)||"",passenger_count:(t==null?void 0:t.passenger_count)??"",scheduled_at:(t==null?void 0:t.scheduled_at)||""}),[u,d]=o.useState([]),[x,_]=o.useState([]),[C,b]=o.useState([]),[F,y]=o.useState([]),[S,E]=o.useState([]),[p,m]=o.useState([]),[v,j]=o.useState(""),[D,k]=o.useState(""),[I,T]=o.useState(t!=null&&t.event_id?String(t.event_id):""),[J,se]=o.useState(a),[R,ae]=o.useState(!1),[de,Ne]=o.useState({name:"",driver:"",passenger_capacity:"",notes:""}),[me,he]=o.useState(!1),[we,ue]=o.useState(null),ge=o.useRef(!0),[fe,K]=o.useState(s);o.useEffect(()=>{if(!t)return;ge.current=!0,T(t.event_id?String(t.event_id):""),l({pickup_location:t.pickup_location||"",destination:t.destination||"",passenger_count:t.passenger_count??"",scheduled_at:t.scheduled_at||""});const M=s.map(W=>typeof W.event_vehicle_id=="number"?W.event_vehicle_id:void 0).filter(W=>typeof W=="number"),$=a.length>0?a:M;se($),K(s)},[t]),o.useEffect(()=>{let M=!1;return(async()=>{try{const[W,Z,Ee]=await Promise.all([Ut(),za(),$r()]);if(M)return;d(Array.isArray(W)?W:[]),_(Array.isArray(Z)?Z:[]),b(Array.isArray(Ee)?Ee:[])}catch{}})(),()=>{M=!0}},[]),o.useEffect(()=>{if(ge.current){ge.current=!1;return}se([]),ae(!1),j(""),k(""),l(M=>({...M,pickup_location:"",destination:""}))},[I]),o.useEffect(()=>{if(!I||i.scheduled_at)return;const M=u.find($=>$.id===Number(I));if(M!=null&&M.starts_at){const $=et(M.starts_at);$&&($.setUTCHours(9,0,0,0),l(W=>({...W,scheduled_at:$.toISOString()})))}},[I,u,i.scheduled_at]);const ee=()=>{ae(!0),Ne({name:"",driver:"",passenger_capacity:"",notes:""})},ne=M=>{se($=>$.filter(W=>W!==M))},oe=async()=>{if(!(!I||!de.name.trim()))try{const M=await tr({event_id:Number(I),name:de.name.trim(),driver:de.driver.trim()||void 0,passenger_capacity:Number(de.passenger_capacity)||0,notes:de.notes.trim()||void 0});_($=>[M,...$]),se($=>$.includes(M.id)?$:[...$,M.id]),Ne({name:"",driver:"",passenger_capacity:"",notes:""}),ae(!1)}catch(M){ue(M instanceof Error?M.message:"Failed to create vehicle")}},pe=async M=>{M.preventDefault(),he(!0),ue(null);const $=!!t;try{let W=[...J];if(I){const ze=fe;if(ze.length>0){for(const re of ze){if(re.event_vehicle_id&&!W.includes(re.event_vehicle_id)){W.push(re.event_vehicle_id);continue}if(!re.event_vehicle_id){const lt=await tr({event_id:Number(I),name:re.name,driver:re.driver||"",passenger_capacity:Number(re.passenger_capacity)||0,notes:re.notes||""});W.push(lt.id)}}se(W),K([])}}const Z={pickup_location:i.pickup_location.trim(),destination:i.destination.trim(),passenger_count:Number(i.passenger_count)||0,scheduled_at:i.scheduled_at?i.scheduled_at:void 0,event_id:Number(I),vehicle_ids:[...W]};if(R&&de.name.trim()){const ze=await tr({event_id:Number(I),name:de.name.trim(),driver:de.driver.trim()||void 0,passenger_capacity:Number(de.passenger_capacity)||0,notes:de.notes.trim()||void 0});W.push(ze.id),Z.vehicle_ids=[...W]}const Ee=await rh(Z);if(ue("Transport route created"),Ee!=null&&Ee.id&&I)try{sessionStorage.setItem(`event-schedule-highlight:${I}`,`t-${Ee.id}`)}catch{}e($?-2:-1)}catch(W){ue(W instanceof Error?W.message:"Failed to create transport")}finally{he(!1)}},Ie=i.pickup_location&&i.destination?`${i.pickup_location}  ${i.destination}`:"",je=(M,$)=>`${M}::${$}`,Re=o.useMemo(()=>{var ze;const M=[],$=new Set,W=u.find(re=>re.id===Number(I)),Z=(ze=W==null?void 0:W.innhopps)!=null&&ze.length&&Array.isArray(W.innhopps)?W.innhopps.map(re=>({valueKey:je("Innhopp",`${re.sequence?`#${re.sequence} `:""}${re.name||"Untitled innhopp"}`.trim()),label:`${re.sequence?`#${re.sequence} `:""}${re.name||"Untitled innhopp"}`.trim(),type:"Innhopp"})):[];Z.length&&(Z.forEach(re=>$.add(re.label)),M.push({label:"Innhopps",options:Z}));const Ee=W&&Array.isArray(W.airfield_ids)?C.filter(re=>W.airfield_ids.includes(re.id)):[];return Ee.length&&(Ee.forEach(re=>$.add(re.name||`Airfield #${re.id}`)),M.push({label:"Airfields",options:Ee.map(re=>({valueKey:je("Airfield",re.name||`Airfield #${re.id}`),label:re.name||`Airfield #${re.id}`,type:"Airfield"}))})),F.length&&(F.forEach(re=>$.add(re.name||`Accommodation #${re.id}`)),M.push({label:"Accommodations",options:F.map(re=>({valueKey:je("Accommodation",re.name||`Accommodation #${re.id}`),label:re.name||`Accommodation #${re.id}`,type:"Accommodation"}))})),S.length&&(S.forEach(re=>$.add(re.name||`Other #${re.id}`)),M.push({label:"Other",options:S.map(re=>({valueKey:je("Other",re.name||`Other #${re.id}`),label:re.name||`Other #${re.id}`,type:"Other"}))})),p.length&&(p.forEach(re=>$.add(re.name||`Meal #${re.id}`)),M.push({label:"Meals",options:p.map(re=>({valueKey:je("Meal",re.name||`Meal #${re.id}`),label:re.name||`Meal #${re.id}`,type:"Meal"}))})),M},[F,C,u,S,p,I,i.pickup_location,i.destination]);o.useEffect(()=>{let M=!1;return(async()=>{if(!I){y([]),E([]),m([]);return}try{const[W,Z,Ee]=await Promise.all([mr(Number(I)),Kn(),Yn()]);if(M)return;y(Array.isArray(W)?W:[]),E(Array.isArray(Z)?Z.filter(ze=>ze.event_id===Number(I)):[]),m(Array.isArray(Ee)?Ee.filter(ze=>ze.event_id===Number(I)):[])}catch{M||(y([]),E([]),m([]))}})(),()=>{M=!0}},[I]);const Pe=M=>M.toLowerCase().replace(/^#?\s*\d+\s*/,"").trim(),Qe=M=>Re.flatMap(W=>W.options).find(W=>W.valueKey===M),Ye=M=>{var W,Z;const $=Re.flatMap(Ee=>Ee.options);return((W=$.find(Ee=>Ee.label===M))==null?void 0:W.valueKey)||((Z=$.find(Ee=>Pe(Ee.label)===Pe(M)))==null?void 0:Z.valueKey)},Je=M=>{const $=u.find(ze=>ze.id===Number(I)),W=Ge($==null?void 0:$.starts_at)||null,Z=Ge($==null?void 0:$.ends_at)||null;if(M){const ze=Ge(M);if(ze)return ze}const Ee=new Date;if(W&&Z)return Ee<W?W:Ee>Z?Z:Ee;if(W)return W;if(Z)return Z};return o.useEffect(()=>{if(!i.pickup_location){j("");return}const M=Qe(v);if(M&&M.label===i.pickup_location)return;const $=Ye(i.pickup_location);if($&&$!==v){const W=Qe($);j($),W&&l(Z=>({...Z,pickup_location:W.label}))}},[Re,i.pickup_location,v]),o.useEffect(()=>{if(!i.destination){k("");return}const M=Qe(D);if(M&&M.label===i.destination)return;const $=Ye(i.destination);if($&&$!==D){const W=Qe($);k($),W&&l(Z=>({...Z,destination:W.label}))}},[Re,i.destination,D]),r.jsxs("section",{children:[r.jsxs("header",{className:"page-header",children:[r.jsxs("div",{children:[r.jsx("h2",{children:"Create transport route"}),Ie&&r.jsx("p",{children:Ie})]}),r.jsx("button",{className:"ghost",type:"button",onClick:()=>e(-1),children:"Back"})]}),r.jsxs("form",{onSubmit:pe,children:[r.jsx("article",{className:"card",children:r.jsxs("div",{className:"form-grid",children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Event"}),r.jsxs("select",{value:I,onChange:M=>T(M.target.value),required:!0,children:[r.jsx("option",{value:"",children:"Select event"}),u.map(M=>r.jsx("option",{value:M.id,children:M.name},M.id))]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Pickup location"}),r.jsxs("select",{value:v,onChange:M=>{const $=M.target.value;j($);const W=Qe($);l(Z=>({...Z,pickup_location:W?W.label:""}))},required:!0,children:[r.jsx("option",{value:"",children:"Select pickup"}),Re.map(M=>M.options.length>0&&r.jsx("optgroup",{label:M.label,children:M.options.map($=>{const W=$.valueKey;return r.jsx("option",{value:W,children:$.label},`${M.label}-${W}`)})},M.label))]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Destination"}),r.jsxs("select",{value:D,onChange:M=>{const $=M.target.value;k($);const W=Qe($);l(Z=>({...Z,destination:W?W.label:""}))},required:!0,children:[r.jsx("option",{value:"",children:"Select destination"}),Re.map(M=>M.options.length>0&&r.jsx("optgroup",{label:M.label,children:M.options.map($=>{const W=$.valueKey;return r.jsx("option",{value:W,children:$.label},`${M.label}-${W}`)})},M.label))]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Passenger count"}),r.jsx("input",{type:"number",min:0,value:i.passenger_count,onChange:M=>l($=>({...$,passenger_count:M.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Scheduled at"}),r.jsx($t,{value:Ge(i.scheduled_at),options:{enableTime:!0,dateFormat:"Y-m-d H:i",time_24hr:!0,defaultDate:Je(i.scheduled_at)},onChange:M=>{const $=M[0];l(W=>({...W,scheduled_at:$?Bt($):""}))}})]})]})}),r.jsx("article",{className:"card",children:r.jsxs("div",{className:"form-field",style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Vehicles"}),J.length>0&&r.jsx("ul",{className:"status-list",style:{marginTop:"0.5rem"},children:J.map(M=>{const $=x.find(W=>W.id===M);return $?r.jsx("li",{children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",justifyContent:"space-between",width:"100%"},children:[r.jsxs(nt,{to:`/logistics/vehicles/${$.id}`,className:"card-link",style:{flex:1,textDecoration:"none"},children:[r.jsx("strong",{children:$.name}),r.jsxs("div",{className:"muted",children:[$.driver?`Driver: ${$.driver}  `:"","Capacity: ",$.passenger_capacity]}),$.notes&&r.jsxs("div",{className:"muted",children:["Notes: ",$.notes]})]}),r.jsx("button",{type:"button",className:"ghost danger",onClick:()=>ne(M),children:"Remove"})]})},M):null})}),x.length>0&&r.jsx("div",{className:"form-grid",style:{marginTop:"0.5rem"},children:r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Add vehicle"}),r.jsx("div",{className:"form-actions",style:{gap:"0.5rem",alignItems:"center"},children:r.jsxs("select",{value:"",onChange:M=>{const $=Number(M.target.value);$&&(J.includes($)||se(W=>[...W,$]))},children:[r.jsx("option",{value:"",children:"Choose vehicle"}),x.filter(M=>M.event_id===Number(I)).map(M=>r.jsxs("option",{value:M.id,children:[M.name," ",M.driver?`(${M.driver})`:"","  ",M.passenger_capacity," pax"]},M.id))]})})]})}),r.jsx("div",{className:"form-actions",style:{marginTop:"0.5rem",justifyContent:"flex-start",marginLeft:"-1.5rem"},children:r.jsx("button",{type:"button",className:"ghost",onClick:ee,children:"Create new vehicle"})}),R&&r.jsxs("div",{className:"form-grid",style:{marginTop:"0.5rem"},children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Vehicle name"}),r.jsx("input",{type:"text",value:de.name,onChange:M=>Ne($=>({...$,name:M.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Driver"}),r.jsx("input",{type:"text",value:de.driver,onChange:M=>Ne($=>({...$,driver:M.target.value}))})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Passenger capacity"}),r.jsx("input",{type:"number",min:0,value:de.passenger_capacity,onChange:M=>Ne($=>({...$,passenger_capacity:M.target.value}))})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Notes"}),r.jsx("input",{type:"text",value:de.notes,onChange:M=>Ne($=>({...$,notes:M.target.value}))})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"button",className:"primary",onClick:oe,children:"Save vehicle"}),r.jsx("button",{type:"button",className:"ghost",onClick:()=>{ae(!1),Ne({name:"",driver:"",passenger_capacity:"",notes:""})},children:"Cancel"})]})]})]})}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"submit",className:"primary",disabled:me,children:me?"Creating":"Create transport"}),we&&r.jsx("span",{className:"muted",children:we})]})]})]})},is=e=>!!e&&e.trim().length>0,ci=e=>e.replace(/^#\s*\d+\s*/,"").trim().toLowerCase(),P0=()=>{const{transportId:e}=Ln(),n=yt(),[t,s]=o.useState({pickup_location:"",destination:"",passenger_count:"",scheduled_at:"",notes:""}),[a,i]=o.useState(!1),[l,u]=o.useState(""),[d,x]=o.useState(!1),[_,C]=o.useState([]),[b,F]=o.useState([]),[y,S]=o.useState([]),[E,p]=o.useState([]),[m,v]=o.useState([]),[j,D]=o.useState([]),[k,I]=o.useState([]),[T,J]=o.useState(""),[se,R]=o.useState(!0),[ae,de]=o.useState(!1),[Ne,me]=o.useState(null),[he,we]=o.useState([]),[ue,ge]=o.useState(!1),[fe,K]=o.useState({name:"",driver:"",passenger_capacity:"",notes:""}),ee=o.useRef(!0),[ne,oe]=o.useState(""),[pe,Ie]=o.useState(""),je=`primary ${a?"saved":""}`,Re=ae?"Saving":a?"Saved":"Save",Pe=()=>{a&&i(!1)};o.useEffect(()=>{let f=!1;return(async()=>{if(e){R(!0),me(null);try{ee.current=!0;const z=await nh(Number(e)),[V,Fe,Le,A,H,h]=await Promise.all([Ut(),za(),$r(),z.event_id?mr(z.event_id):Promise.resolve([]),Kn(),Yn()]);if(f)return;C(Array.isArray(V)?V:[]),F(Array.isArray(Fe)?Fe:[]),v(Array.isArray(Le)?Le:[]),p(Array.isArray(A)?A:[]),D(Array.isArray(H)?H.filter(U=>U.event_id===z.event_id):[]),I(Array.isArray(h)?h.filter(U=>U.event_id===z.event_id):[]),S(Array.isArray(z.vehicles)?z.vehicles:[]);const g=(()=>{if(z.scheduled_at)return z.scheduled_at;const U=V.find(le=>le.id===z.event_id);if(U!=null&&U.starts_at){const le=et(U.starts_at);if(le)return le.setUTCHours(9,0,0,0),le.toISOString()}return""})();s({pickup_location:z.pickup_location,destination:z.destination,passenger_count:String(z.passenger_count),scheduled_at:g,notes:z.notes||""}),u(z.notes||""),x(!1),J(String(z.event_id||""));const L=Array.isArray(z.vehicles)&&z.vehicles.length>0?z.vehicles.map(U=>{if(typeof U.event_vehicle_id=="number")return U.event_vehicle_id;if(typeof U.id=="number")return U.id}).filter(U=>typeof U=="number"):[];we(L),i(!1)}catch(z){f||me(z instanceof Error?z.message:"Failed to load transport")}finally{f||R(!1)}}})(),()=>{f=!0}},[e]);const Qe=()=>{Pe(),ge(!0),K({name:"",driver:"",passenger_capacity:"",notes:""})},Ye=f=>{we(w=>w.filter(z=>z!==f)),S(w=>w.filter((z,V)=>!(z.event_vehicle_id===f||z.id&&typeof z.id=="number"&&z.id===f||!z.event_vehicle_id&&!z.id&&V===f))),Pe()};o.useEffect(()=>{if(ee.current){ee.current=!1;return}if(x(!1),we([]),ge(!1),oe(""),Ie(""),s(f=>({...f,pickup_location:"",destination:"",notes:""})),i(!1),T?Promise.all([mr(Number(T)),Kn(),Yn()]).then(([f,w,z])=>{p(Array.isArray(f)?f:[]),D(Array.isArray(w)?w.filter(V=>V.event_id===Number(T)):[]),I(Array.isArray(z)?z.filter(V=>V.event_id===Number(T)):[])}).catch(()=>{p([]),D([]),I([])}):(p([]),D([]),I([])),!t.scheduled_at&&T){const f=_.find(w=>w.id===Number(T));if(f!=null&&f.starts_at){const w=et(f.starts_at);w&&(w.setUTCHours(9,0,0,0),s(z=>({...z,scheduled_at:w.toISOString()})))}}},[T]);const Je=f=>{const w=ci(f||"");if(!w)return null;const z=E.find(Le=>ci(Le.name||"")===w);if(z!=null&&z.coordinates)return z.coordinates;const V=j.find(Le=>ci(Le.name||"")===w);if(V!=null&&V.coordinates)return V.coordinates;const Fe=m.find(Le=>ci(Le.name||"")===w);return Fe!=null&&Fe.coordinates?Fe.coordinates:null},G=(f,w,z)=>`${f}#${w??z}`,M=f=>f.toLowerCase().replace(/^#?\s*\d+\s*/,"").trim(),$=(()=>{var z;const f=[],w=_.find(V=>V.id===Number(T));return(z=w==null?void 0:w.innhopps)!=null&&z.length&&w.innhopps.forEach(V=>{const Fe=`${V.sequence?`#${V.sequence} `:""}${V.name}`;f.push({label:Fe,valueKey:G("Innhopp",V.id,Fe),type:"Innhopp",coordinates:V.coordinates||null,detailUrl:w?`/events/${w.id}/innhopps/${V.id}`:void 0})}),w&&Array.isArray(w.airfield_ids)&&w.airfield_ids.length&&m.length&&m.filter(V=>w.airfield_ids.includes(V.id)).forEach(V=>{f.push({label:V.name,valueKey:G("Airfield",V.id,V.name),type:"Airfield",coordinates:V.coordinates||null,detailUrl:`/airfields/${V.id}`})}),E.length&&E.forEach(V=>{f.push({label:V.name,valueKey:G("Accommodation",V.id,V.name),type:"Accommodation",coordinates:V.coordinates||null,detailUrl:w?`/events/${w.id}/accommodations/${V.id}`:void 0})}),k.length&&k.forEach(V=>{f.push({label:V.name,valueKey:G("Meal",V.id,V.name),type:"Meal",coordinates:V.coordinates||null,detailUrl:`/logistics/meals/${V.id}`})}),j.length&&j.forEach(V=>{f.push({label:V.name,valueKey:G("Other",V.id,V.name),type:"Other",coordinates:V.coordinates||null,detailUrl:`/logistics/others/${V.id}`})}),f})(),W=$.filter(f=>f.valueKey!==ne),Z=f=>$.find(w=>w.valueKey===f),Ee=f=>{var w,z;return((w=$.find(V=>V.label===f))==null?void 0:w.valueKey)||((z=$.find(V=>M(V.label)===M(f)))==null?void 0:z.valueKey)},ze=(()=>{const f=Z(ne);return!!f&&is(f.coordinates)})(),re=(()=>{const f=Z(pe);return!!f&&is(f.coordinates)})(),lt=(()=>{var w;const f=Z(ne);return(w=f==null?void 0:f.coordinates)==null?void 0:w.trim()})(),vt=(()=>{var w;const f=Z(pe);return(w=f==null?void 0:f.coordinates)==null?void 0:w.trim()})(),Nt=(()=>{const f=Z(ne);return f==null?void 0:f.detailUrl})(),Lt=(()=>{const f=Z(pe);return f==null?void 0:f.detailUrl})(),X=async f=>{if(f.preventDefault(),!!e){de(!0),me(null);try{const w={pickup_location:t.pickup_location.trim(),destination:t.destination.trim(),passenger_count:Number(t.passenger_count)||0,scheduled_at:t.scheduled_at?t.scheduled_at:void 0,notes:t.notes.trim()||void 0,event_id:Number(T)},z=he.length>0?[...he]:y.map(V=>V.event_vehicle_id).filter(V=>typeof V=="number");if(w.vehicle_ids=z,ue&&fe.name.trim()){const V=await tr({event_id:Number(T),name:fe.name.trim(),driver:fe.driver.trim()||void 0,passenger_capacity:Number(fe.passenger_capacity)||0,notes:fe.notes.trim()||void 0});w.vehicle_ids=[...w.vehicle_ids||[],V.id]}await sh(Number(e),w),me("Transport updated"),i(!0)}catch(w){me(w instanceof Error?w.message:"Failed to update transport")}finally{de(!1)}}},ce=(()=>{const f=Je(t.pickup_location),w=Je(t.destination),z=Number(t.passenger_count),V=Number.isFinite(z)&&z>0,Fe=Array.isArray(he)&&he.length>0||Array.isArray(y)&&y.length>0;return is(f)&&is(w)&&is(t.scheduled_at)&&V&&Fe})(),ve=async()=>{if(e&&window.confirm("Are you sure you want to delete this transport route?"))try{await o0(Number(e)),n(-1)}catch(f){me(f instanceof Error?f.message:"Failed to delete transport")}},We=async()=>{if(!(!T||!fe.name.trim()))try{const f=await tr({event_id:Number(T),name:fe.name.trim(),driver:fe.driver.trim()||void 0,passenger_capacity:Number(fe.passenger_capacity)||0,notes:fe.notes.trim()||void 0});F(w=>[f,...w]),we(w=>w.includes(f.id)?w:[...w,f.id]),K({name:"",driver:"",passenger_capacity:"",notes:""}),ge(!1),i(!1)}catch(f){me(f instanceof Error?f.message:"Failed to create vehicle")}};if(o.useEffect(()=>{if(!t.pickup_location){oe("");return}!d&&l&&!t.notes&&s(z=>({...z,notes:l}));const f=Z(ne);if(f&&f.label===t.pickup_location)return;const w=Ee(t.pickup_location);if(w&&w!==ne){const z=Z(w);oe(w),z&&s(V=>({...V,pickup_location:z.label}))}},[$,t.pickup_location,ne,l,d,t.notes]),o.useEffect(()=>{if(!t.destination){Ie("");return}!d&&l&&!t.notes&&s(z=>({...z,notes:l}));const f=Z(pe);if(f&&f.label===t.destination)return;const w=Ee(t.destination);if(w&&w!==pe){const z=Z(w);Ie(w),z&&s(V=>({...V,destination:z.label}))}},[$,t.destination,pe,l,d,t.notes]),se)return r.jsx("p",{className:"muted",children:"Loading transport"});const ot=t.pickup_location&&t.destination?`${t.pickup_location}  ${t.destination}`:"",Xe=!!(lt&&vt),Ct=Xe?`https://www.google.com/maps/dir/?api=1&origin=${encodeURIComponent(lt)}&destination=${encodeURIComponent(vt)}`:null,pt=t.passenger_count===""||Number.isNaN(Number(t.passenger_count)),wt=!is(t.scheduled_at),en=he.length===0&&y.length===0,rt=f=>{const w=_.find(Le=>Le.id===Number(T)),z=Ge(w==null?void 0:w.starts_at)||null,V=Ge(w==null?void 0:w.ends_at)||null;if(f){const Le=Ge(f);if(Le)return Le}const Fe=new Date;if(z&&V)return Fe<z?z:Fe>V?V:Fe;if(z)return z;if(V)return V};return r.jsxs("section",{children:[r.jsxs("header",{className:"page-header",children:[r.jsxs("div",{children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flexWrap:"wrap"},children:[r.jsx("h2",{style:{margin:0},children:ot||"Transport Route"}),r.jsx("span",{className:`badge ${ce?"success":"danger"}`,"aria-label":ce?"Complete":"Missing info",title:ce?"Complete":"Missing info",style:{minWidth:"2.4ch",textAlign:"center"},children:ce?"":"!"})]}),ot&&r.jsx("p",{children:r.jsx("button",{type:"button",className:"link-button",style:{fontSize:"1.25em"},disabled:!Xe,onClick:()=>{Ct&&window.open(Ct,"_blank")},children:"Open route in Maps"})})]}),r.jsxs("div",{className:"card-actions",children:[r.jsx("button",{className:"ghost",type:"button",onClick:()=>n("/logistics/new",{state:{copyTransport:{event_id:T,pickup_location:t.pickup_location,destination:t.destination,passenger_count:t.passenger_count,scheduled_at:t.scheduled_at,notes:t.notes,vehicle_ids:he,vehicles:y.map(f=>({event_vehicle_id:f.event_vehicle_id,name:f.name,driver:f.driver,passenger_capacity:f.passenger_capacity,notes:f.notes}))}}}),children:"Make a copy"}),r.jsx("button",{className:"ghost",type:"button",onClick:()=>n(-1),children:"Back"}),r.jsx("button",{className:"ghost danger",type:"button",onClick:ve,children:"Delete route"})]})]}),r.jsxs("form",{onSubmit:X,children:[r.jsxs("article",{className:"card",children:[r.jsxs("div",{className:"form-grid",children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Event"}),r.jsxs("div",{className:"input-with-button",children:[r.jsxs("select",{value:T,onChange:f=>{J(f.target.value),Pe()},required:!0,style:{flex:1,minWidth:0},children:[r.jsx("option",{value:"",children:"Select event"}),_.map(f=>r.jsx("option",{value:f.id,children:f.name},f.id))]}),r.jsx("span",{style:{visibility:"hidden"},children:"Open in Maps"})]})]}),r.jsxs("label",{className:`form-field ${ne&&!ze?"field-missing":""}`,children:[r.jsx("span",{children:"Pickup location"}),r.jsxs("div",{className:"input-with-button",children:[r.jsxs("select",{value:ne,onChange:f=>{const w=f.target.value;oe(w);const z=Z(w);Pe(),s(V=>({...V,pickup_location:z?z.label:""}))},required:!0,style:{flex:1,minWidth:0},children:[r.jsx("option",{value:"",children:"Select pickup"}),$.filter(f=>f.type==="Innhopp"&&f.valueKey!==pe).length>0&&r.jsx("optgroup",{label:"Innhopps",children:$.filter(f=>f.type==="Innhopp"&&f.valueKey!==pe).map(f=>r.jsx("option",{value:f.valueKey,children:f.label},`inn-${f.valueKey}`))}),$.filter(f=>f.type==="Airfield"&&f.valueKey!==pe).length>0&&r.jsx("optgroup",{label:"Airfields",children:$.filter(f=>f.type==="Airfield"&&f.valueKey!==pe).map(f=>r.jsx("option",{value:f.valueKey,children:f.label},`af-${f.valueKey}`))}),$.filter(f=>f.type==="Accommodation"&&f.valueKey!==pe).length>0&&r.jsx("optgroup",{label:"Accommodations",children:$.filter(f=>f.type==="Accommodation"&&f.valueKey!==pe).map(f=>r.jsx("option",{value:f.valueKey,children:f.label},`acc-${f.valueKey}`))}),$.filter(f=>f.type==="Meal"&&f.valueKey!==pe).length>0&&r.jsx("optgroup",{label:"Meals",children:$.filter(f=>f.type==="Meal"&&f.valueKey!==pe).map(f=>r.jsx("option",{value:f.valueKey,children:f.label},`meal-${f.valueKey}`))}),$.filter(f=>f.type==="Other"&&f.valueKey!==pe).length>0&&r.jsx("optgroup",{label:"Other",children:$.filter(f=>f.type==="Other"&&f.valueKey!==pe).map(f=>r.jsx("option",{value:f.valueKey,children:f.label},`other-${f.valueKey}`))})]}),r.jsx("button",{type:"button",className:"ghost",disabled:!lt&&!Nt,onClick:()=>{lt?window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(lt)}`,"_blank"):Nt&&n(Nt)},children:lt?"Open in Maps":"Update location"})]})]}),r.jsxs("label",{className:`form-field ${pe&&!re?"field-missing":""}`,children:[r.jsx("span",{children:"Destination"}),r.jsxs("div",{className:"input-with-button",children:[r.jsxs("select",{value:pe,onChange:f=>{const w=f.target.value;Ie(w);const z=Z(w);Pe(),s(V=>({...V,destination:z?z.label:""}))},required:!0,style:{flex:1,minWidth:0},children:[r.jsx("option",{value:"",children:"Select destination"}),W.filter(f=>f.type==="Innhopp").length>0&&r.jsx("optgroup",{label:"Innhopps",children:W.filter(f=>f.type==="Innhopp"&&f.valueKey!==ne).map(f=>r.jsx("option",{value:f.valueKey,children:f.label},`inn-d-${f.valueKey}`))}),W.filter(f=>f.type==="Airfield").length>0&&r.jsx("optgroup",{label:"Airfields",children:W.filter(f=>f.type==="Airfield"&&f.valueKey!==ne).map(f=>r.jsx("option",{value:f.valueKey,children:f.label},`af-d-${f.valueKey}`))}),W.filter(f=>f.type==="Accommodation").length>0&&r.jsx("optgroup",{label:"Accommodations",children:W.filter(f=>f.type==="Accommodation"&&f.valueKey!==ne).map(f=>r.jsx("option",{value:f.valueKey,children:f.label},`acc-d-${f.valueKey}`))}),W.filter(f=>f.type==="Meal").length>0&&r.jsx("optgroup",{label:"Meals",children:W.filter(f=>f.type==="Meal"&&f.valueKey!==ne).map(f=>r.jsx("option",{value:f.valueKey,children:f.label},`meal-dest-${f.valueKey}`))}),W.filter(f=>f.type==="Other").length>0&&r.jsx("optgroup",{label:"Other",children:W.filter(f=>f.type==="Other"&&f.valueKey!==ne).map(f=>r.jsx("option",{value:f.valueKey,children:f.label},`other-dest-${f.valueKey}`))})]}),r.jsx("button",{type:"button",className:"ghost",disabled:!vt&&!Lt,onClick:()=>{vt?window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(vt)}`,"_blank"):Lt&&n(Lt)},children:vt?"Open in Maps":"Update location"})]})]}),r.jsx("div",{className:"form-field",style:{gridColumn:"1 / -1",padding:0},children:r.jsxs("div",{className:"form-grid",style:{gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",gap:"0.75rem"},children:[r.jsxs("label",{className:`form-field ${pt?"field-missing":""}`,style:{margin:0},children:[r.jsx("span",{children:"Passenger count"}),r.jsx("input",{type:"number",min:0,value:t.passenger_count,onChange:f=>{Pe(),s(w=>({...w,passenger_count:f.target.value}))},required:!0})]}),r.jsxs("label",{className:`form-field ${wt?"field-missing":""}`,style:{margin:0},children:[r.jsx("span",{children:"Scheduled at"}),r.jsx($t,{value:Ge(t.scheduled_at),options:{enableTime:!0,dateFormat:"Y-m-d H:i",time_24hr:!0,defaultDate:rt(t.scheduled_at)},onChange:f=>{const w=f[0];Pe(),s(z=>({...z,scheduled_at:w?Bt(w):""}))}})]})]})})]}),r.jsx("div",{className:"form-actions",style:{marginTop:"0.5rem"},children:r.jsx("button",{type:"submit",className:je,disabled:ae||a,children:Re})})]}),r.jsx("article",{className:"card",children:r.jsxs("div",{className:`form-field ${en?"field-missing":""}`,style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Vehicles"}),(()=>{const f=he.length>0?he.reduce((w,z)=>{const V=b.find(Le=>Le.id===z);if(V)return w.push({id:z,name:V.name,driver:V.driver,passenger_capacity:V.passenger_capacity,notes:V.notes,removable:!0}),w;const Fe=y.find(Le=>Le.event_vehicle_id===z||Le.id&&typeof Le.id=="number"&&Le.id===z);return Fe&&w.push({id:z,name:Fe.name,driver:Fe.driver,passenger_capacity:Fe.passenger_capacity,notes:Fe.notes,removable:!0}),w},[]):[];return f.length===0&&y.length>0&&y.forEach((w,z)=>{const V=typeof w.event_vehicle_id=="number"?w.event_vehicle_id:w.id&&typeof w.id=="number"?w.id:z;f.push({id:V,name:w.name,driver:w.driver,passenger_capacity:w.passenger_capacity,notes:w.notes,removable:typeof w.event_vehicle_id=="number"||typeof w.id=="number"})}),f.length===0?null:r.jsx("ul",{className:"status-list",style:{marginTop:"0.5rem"},children:f.map((w,z)=>r.jsx("li",{children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",justifyContent:"space-between",width:"100%"},children:[w.removable?r.jsxs(nt,{to:{pathname:`/logistics/vehicles/${w.id}`,search:e?`?transportId=${e}`:void 0},className:"card-link",style:{flex:1},children:[r.jsx("strong",{children:w.name}),r.jsxs("div",{className:"muted",children:[w.driver?`Driver: ${w.driver}  `:"","Capacity: ",w.passenger_capacity]}),w.notes&&r.jsxs("div",{className:"muted",children:["Notes: ",w.notes]})]}):r.jsxs("div",{style:{flex:1},children:[r.jsx("strong",{children:w.name}),r.jsxs("div",{className:"muted",children:[w.driver?`Driver: ${w.driver}  `:"","Capacity: ",w.passenger_capacity]}),w.notes&&r.jsxs("div",{className:"muted",children:["Notes: ",w.notes]})]}),w.removable&&r.jsx("button",{type:"button",className:"ghost danger",onClick:()=>Ye(w.id),children:"Remove"})]})},`${w.id}-${z}`))})})(),b.length>0&&r.jsx("div",{className:"form-grid",style:{marginTop:"0.5rem"},children:r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Add vehicle"}),r.jsx("div",{className:"form-actions",style:{gap:"0.5rem",alignItems:"center"},children:r.jsxs("select",{value:"",onChange:f=>{const w=Number(f.target.value);w&&(he.includes(w)||(Pe(),we(z=>[...z,w])))},children:[r.jsx("option",{value:"",children:"Choose vehicle"}),b.filter(f=>f.event_id===Number(T)).map(f=>r.jsxs("option",{value:f.id,children:[f.name," ",f.driver?`(${f.driver})`:"","  ",f.passenger_capacity," pax"]},f.id))]})})]})}),r.jsx("div",{className:"form-actions",style:{marginTop:"0.5rem",justifyContent:"flex-start",marginLeft:"-1.5rem"},children:r.jsx("button",{type:"button",className:"ghost",onClick:Qe,children:"Create new vehicle"})}),ue&&r.jsxs("div",{className:"form-grid",style:{marginTop:"0.5rem"},children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Vehicle name"}),r.jsx("input",{type:"text",value:fe.name,onChange:f=>{Pe(),K(w=>({...w,name:f.target.value}))},required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Driver"}),r.jsx("input",{type:"text",value:fe.driver,onChange:f=>{Pe(),K(w=>({...w,driver:f.target.value}))}})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Passenger capacity"}),r.jsx("input",{type:"number",min:0,value:fe.passenger_capacity,onChange:f=>{Pe(),K(w=>({...w,passenger_capacity:f.target.value}))}})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Notes"}),r.jsx("input",{type:"text",value:fe.notes,onChange:f=>{Pe(),K(w=>({...w,notes:f.target.value}))}})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"button",className:"primary",onClick:We,children:"Save vehicle"}),r.jsx("button",{type:"button",className:"ghost",onClick:()=>{ge(!1),K({name:"",driver:"",passenger_capacity:"",notes:""})},children:"Cancel"})]})]}),r.jsx("div",{className:"form-actions",style:{marginTop:"0.5rem"},children:r.jsx("button",{type:"submit",className:je,disabled:ae||a,children:Re})})]})}),r.jsxs("article",{className:"card",children:[r.jsxs("label",{className:"form-field",style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Notes"}),r.jsx("textarea",{value:t.notes,onChange:f=>{d||x(!0),Pe(),s(w=>({...w,notes:f.target.value}))},rows:3})]}),r.jsx("div",{className:"form-actions",style:{marginTop:"0.5rem"},children:r.jsx("button",{type:"submit",className:je,disabled:ae||a,children:Re})})]}),Ne&&r.jsx("div",{className:"form-actions",style:{marginTop:"0.5rem"},children:r.jsx("span",{className:"muted",children:Ne})})]})]})},M0=(e,n=!1)=>e?Bn(e,{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:n?!1:void 0}):"Not scheduled",O0=()=>{const[e,n]=o.useState([]),[t,s]=o.useState([]),[a,i]=o.useState([]),[l,u]=o.useState(""),[d,x]=o.useState(""),[_,C]=o.useState(""),[b,F]=o.useState(""),[y,S]=o.useState(!0),[E,p]=o.useState(null);o.useEffect(()=>{let j=!1;return(async()=>{S(!0),p(null);try{const[k,I,T]=await Promise.all([rr(),Ut(),Ma()]);if(j)return;n(Array.isArray(k)?k:[]),s(Array.isArray(I)?I:[]),i(Array.isArray(T)?T:[])}catch(k){j||p(k instanceof Error?k.message:"Failed to load logistics")}finally{j||S(!1)}})(),()=>{j=!0}},[]);const m=o.useMemo(()=>{if(!l)return t;const j=Number(l);return t.filter(D=>D.season_id===j)},[t,l]),v=o.useMemo(()=>a.filter(j=>!(l&&j.season_id!==Number(l)||d&&j.event_id!==Number(d)||_&&!j.pickup_location.toLowerCase().includes(_.toLowerCase())||b&&!j.destination.toLowerCase().includes(b.toLowerCase()))).sort((j,D)=>{var T,J;const k=((T=et(j.scheduled_at))==null?void 0:T.getTime())??Number.POSITIVE_INFINITY,I=((J=et(D.scheduled_at))==null?void 0:J.getTime())??Number.POSITIVE_INFINITY;return k===I?`${j.pickup_location} ${j.destination}`.localeCompare(`${D.pickup_location} ${D.destination}`):k-I}),[a,l,d,_,b]);return r.jsxs("section",{children:[r.jsxs("header",{className:"page-header",children:[r.jsx("div",{children:r.jsx("h2",{children:"Ground Crew"})}),r.jsxs("div",{className:"card-actions",children:[r.jsx(nt,{className:"ghost",to:"/logistics",style:{fontWeight:700,fontSize:"1.05rem"},children:"Back to logistics"}),r.jsx(nt,{className:"primary button-link",to:"/logistics/ground-crew/new",children:"Create entry"})]})]}),r.jsxs("div",{className:"stack",children:[r.jsx("article",{className:"card",children:r.jsxs("div",{className:"form-grid",style:{gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",alignItems:"end",gap:"0.75rem"},children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Season"}),r.jsxs("select",{value:l,onChange:j=>{u(j.target.value),x("")},style:{width:"100%",minWidth:"180px",maxWidth:"25%"},children:[r.jsx("option",{value:"",children:"All seasons"}),[...e].sort((j,D)=>D.name.localeCompare(j.name)).map(j=>r.jsx("option",{value:j.id,children:j.name},j.id))]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Event"}),r.jsxs("select",{value:d,onChange:j=>x(j.target.value),style:{width:"100%",minWidth:"180px"},children:[r.jsx("option",{value:"",children:"All events"}),m.map(j=>r.jsx("option",{value:j.id,children:j.name},j.id))]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Start location"}),r.jsx("input",{type:"text",value:_,onChange:j=>C(j.target.value),placeholder:"Filter start location"})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Destination"}),r.jsx("input",{type:"text",value:b,onChange:j=>F(j.target.value),placeholder:"Filter destination"})]})]})}),r.jsxs("article",{className:"card",children:[r.jsxs("header",{className:"card-header",children:[r.jsx("div",{children:r.jsx("h3",{children:"Ground crew entries"})}),r.jsxs("span",{className:"badge neutral",children:[v.length," ",v.length===1?"entry":"entries"]})]}),y?r.jsx("p",{className:"muted",children:"Loading ground crew entries"}):E?r.jsx("p",{className:"error-text",children:E}):v.length===0?r.jsx("p",{className:"muted",children:"No ground crew entries match the selected filters."}):r.jsx("ul",{className:"status-list",style:{maxHeight:"24rem",overflowY:"auto"},children:v.map(j=>{var D;return r.jsx("li",{children:r.jsxs(nt,{to:`/logistics/ground-crew/${j.id}`,className:"card-link",style:{flex:1},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"0.5rem"},children:[r.jsxs("div",{children:[r.jsxs("strong",{children:[j.pickup_location,"  ",j.destination]}),r.jsx("div",{className:"muted",children:M0(j.scheduled_at)})]}),r.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.35rem",flexShrink:0},children:r.jsx("span",{className:"badge",style:{backgroundColor:"#2b8a3e",color:"#fff"},children:((D=t.find(k=>k.id===j.event_id))==null?void 0:D.name)||`Event #${j.event_id??""}`})})]}),j.vehicles&&j.vehicles.length>0&&r.jsxs("div",{className:"muted",children:["Assigned vehicles:"," ",j.vehicles.map(k=>`${k.name}${k.driver?` (Driver: ${k.driver})`:""}  Cap: ${k.passenger_capacity}`).join("; ")]})]})},j.id)})})]})]})]})},$0=()=>{var G;const e=yt(),t=(G=Zt().state)==null?void 0:G.copyGroundCrew,s=Array.isArray(t==null?void 0:t.vehicles)&&t.vehicles.length?t.vehicles.filter(M=>M&&typeof M.name=="string"&&typeof M.passenger_capacity<"u"):[],a=Array.isArray(t==null?void 0:t.vehicle_ids)?t.vehicle_ids.filter(M=>typeof M=="number"):[],[i,l]=o.useState({pickup_location:(t==null?void 0:t.pickup_location)||"",destination:(t==null?void 0:t.destination)||"",passenger_count:(t==null?void 0:t.passenger_count)??"",scheduled_at:(t==null?void 0:t.scheduled_at)||""}),[u,d]=o.useState([]),[x,_]=o.useState([]),[C,b]=o.useState([]),[F,y]=o.useState([]),[S,E]=o.useState([]),[p,m]=o.useState([]),[v,j]=o.useState(""),[D,k]=o.useState(""),[I,T]=o.useState(t!=null&&t.event_id?String(t.event_id):""),[J,se]=o.useState(a),[R,ae]=o.useState(!1),[de,Ne]=o.useState({name:"",driver:"",passenger_capacity:"",notes:""}),[me,he]=o.useState(!1),[we,ue]=o.useState(null),ge=o.useRef(!0),[fe,K]=o.useState(s);o.useEffect(()=>{if(!t)return;ge.current=!0,T(t.event_id?String(t.event_id):""),l({pickup_location:t.pickup_location||"",destination:t.destination||"",passenger_count:t.passenger_count??"",scheduled_at:t.scheduled_at||""});const M=s.map(W=>typeof W.event_vehicle_id=="number"?W.event_vehicle_id:void 0).filter(W=>typeof W=="number"),$=a.length>0?a:M;se($),K(s)},[t]),o.useEffect(()=>{let M=!1;return(async()=>{try{const[W,Z,Ee]=await Promise.all([Ut(),za(),$r()]);if(M)return;d(Array.isArray(W)?W:[]),_(Array.isArray(Z)?Z:[]),b(Array.isArray(Ee)?Ee:[])}catch{}})(),()=>{M=!0}},[]),o.useEffect(()=>{if(ge.current){ge.current=!1;return}se([]),ae(!1),j(""),k(""),l(M=>({...M,pickup_location:"",destination:""}))},[I]),o.useEffect(()=>{if(!I||i.scheduled_at)return;const M=u.find($=>$.id===Number(I));if(M!=null&&M.starts_at){const $=Ge(M.starts_at);$&&($.setHours(9,0,0,0),l(W=>({...W,scheduled_at:Bt($)})))}},[I,u,i.scheduled_at]);const ee=()=>{ae(!0),Ne({name:"",driver:"",passenger_capacity:"",notes:""})},ne=M=>{se($=>$.filter(W=>W!==M))},oe=async()=>{if(!(!I||!de.name.trim()))try{const M=await tr({event_id:Number(I),name:de.name.trim(),driver:de.driver.trim()||void 0,passenger_capacity:Number(de.passenger_capacity)||0,notes:de.notes.trim()||void 0});_($=>[M,...$]),se($=>$.includes(M.id)?$:[...$,M.id]),Ne({name:"",driver:"",passenger_capacity:"",notes:""}),ae(!1)}catch(M){ue(M instanceof Error?M.message:"Failed to create vehicle")}},pe=async M=>{M.preventDefault(),he(!0),ue(null);const $=!!t;try{let W=[...J];if(I){const ze=fe;if(ze.length>0){for(const re of ze){if(re.event_vehicle_id&&!W.includes(re.event_vehicle_id)){W.push(re.event_vehicle_id);continue}if(!re.event_vehicle_id){const lt=await tr({event_id:Number(I),name:re.name,driver:re.driver||"",passenger_capacity:Number(re.passenger_capacity)||0,notes:re.notes||""});W.push(lt.id)}}se(W),K([])}}const Z={pickup_location:i.pickup_location.trim(),destination:i.destination.trim(),passenger_count:Number(i.passenger_count)||0,scheduled_at:i.scheduled_at?i.scheduled_at:void 0,event_id:Number(I),vehicle_ids:[...W]};if(R&&de.name.trim()){const ze=await tr({event_id:Number(I),name:de.name.trim(),driver:de.driver.trim()||void 0,passenger_capacity:Number(de.passenger_capacity)||0,notes:de.notes.trim()||void 0});W.push(ze.id),Z.vehicle_ids=[...W]}const Ee=await ih(Z);if(ue("Ground crew entry created"),Ee!=null&&Ee.id&&I)try{sessionStorage.setItem(`event-schedule-highlight:${I}`,`gc-${Ee.id}`)}catch{}e($?-2:-1)}catch(W){ue(W instanceof Error?W.message:"Failed to create ground crew")}finally{he(!1)}},Ie=i.pickup_location&&i.destination?`${i.pickup_location}  ${i.destination}`:"",je=(M,$)=>`${M}::${$}`,Re=o.useMemo(()=>{var ze;const M=[],$=new Set,W=u.find(re=>re.id===Number(I)),Z=(ze=W==null?void 0:W.innhopps)!=null&&ze.length&&Array.isArray(W.innhopps)?W.innhopps.map(re=>({valueKey:je("Innhopp",`${re.sequence?`#${re.sequence} `:""}${re.name||"Untitled innhopp"}`.trim()),label:`${re.sequence?`#${re.sequence} `:""}${re.name||"Untitled innhopp"}`.trim(),type:"Innhopp"})):[];Z.length&&(Z.forEach(re=>$.add(re.label)),M.push({label:"Innhopps",options:Z}));const Ee=W&&Array.isArray(W.airfield_ids)?C.filter(re=>W.airfield_ids.includes(re.id)):[];return Ee.length&&(Ee.forEach(re=>$.add(re.name||`Airfield #${re.id}`)),M.push({label:"Airfields",options:Ee.map(re=>({valueKey:je("Airfield",re.name||`Airfield #${re.id}`),label:re.name||`Airfield #${re.id}`,type:"Airfield"}))})),F.length&&(F.forEach(re=>$.add(re.name||`Accommodation #${re.id}`)),M.push({label:"Accommodations",options:F.map(re=>({valueKey:je("Accommodation",re.name||`Accommodation #${re.id}`),label:re.name||`Accommodation #${re.id}`,type:"Accommodation"}))})),S.length&&(S.forEach(re=>$.add(re.name||`Other #${re.id}`)),M.push({label:"Other",options:S.map(re=>({valueKey:je("Other",re.name||`Other #${re.id}`),label:re.name||`Other #${re.id}`,type:"Other"}))})),p.length&&(p.forEach(re=>$.add(re.name||`Meal #${re.id}`)),M.push({label:"Meals",options:p.map(re=>({valueKey:je("Meal",re.name||`Meal #${re.id}`),label:re.name||`Meal #${re.id}`,type:"Meal"}))})),M},[F,C,u,S,p,I,i.pickup_location,i.destination]);o.useEffect(()=>{let M=!1;return(async()=>{if(!I){y([]),E([]),m([]);return}try{const[W,Z,Ee]=await Promise.all([mr(Number(I)),Kn(),Yn()]);if(M)return;y(Array.isArray(W)?W:[]),E(Array.isArray(Z)?Z.filter(ze=>ze.event_id===Number(I)):[]),m(Array.isArray(Ee)?Ee.filter(ze=>ze.event_id===Number(I)):[])}catch{M||(y([]),E([]),m([]))}})(),()=>{M=!0}},[I]);const Pe=M=>M.toLowerCase().replace(/^#?\s*\d+\s*/,"").trim(),Qe=M=>Re.flatMap(W=>W.options).find(W=>W.valueKey===M),Ye=M=>{var W,Z;const $=Re.flatMap(Ee=>Ee.options);return((W=$.find(Ee=>Ee.label===M))==null?void 0:W.valueKey)||((Z=$.find(Ee=>Pe(Ee.label)===Pe(M)))==null?void 0:Z.valueKey)},Je=M=>{const $=u.find(ze=>ze.id===Number(I)),W=Ge($==null?void 0:$.starts_at)||null,Z=Ge($==null?void 0:$.ends_at)||null;if(M){const ze=Ge(M);if(ze)return ze}const Ee=new Date;if(W&&Z)return Ee<W?W:Ee>Z?Z:Ee;if(W)return W;if(Z)return Z};return o.useEffect(()=>{if(!i.pickup_location){j("");return}const M=Qe(v);if(M&&M.label===i.pickup_location)return;const $=Ye(i.pickup_location);if($&&$!==v){const W=Qe($);j($),W&&l(Z=>({...Z,pickup_location:W.label}))}},[Re,i.pickup_location,v]),o.useEffect(()=>{if(!i.destination){k("");return}const M=Qe(D);if(M&&M.label===i.destination)return;const $=Ye(i.destination);if($&&$!==D){const W=Qe($);k($),W&&l(Z=>({...Z,destination:W.label}))}},[Re,i.destination,D]),r.jsxs("section",{children:[r.jsxs("header",{className:"page-header",children:[r.jsxs("div",{children:[r.jsx("h2",{children:"Create ground crew entry"}),Ie&&r.jsx("p",{children:Ie})]}),r.jsx("button",{className:"ghost",type:"button",onClick:()=>e(-1),children:"Back"})]}),r.jsxs("form",{onSubmit:pe,children:[r.jsx("article",{className:"card",children:r.jsxs("div",{className:"form-grid",children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Event"}),r.jsxs("select",{value:I,onChange:M=>T(M.target.value),required:!0,children:[r.jsx("option",{value:"",children:"Select event"}),u.map(M=>r.jsx("option",{value:M.id,children:M.name},M.id))]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Start location"}),r.jsxs("select",{value:v,onChange:M=>{const $=M.target.value;j($);const W=Qe($);l(Z=>({...Z,pickup_location:W?W.label:""}))},required:!0,children:[r.jsx("option",{value:"",children:"Select start location"}),Re.map(M=>M.options.length>0&&r.jsx("optgroup",{label:M.label,children:M.options.map($=>{const W=$.valueKey;return r.jsx("option",{value:W,children:$.label},`${M.label}-${W}`)})},M.label))]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Destination"}),r.jsxs("select",{value:D,onChange:M=>{const $=M.target.value;k($);const W=Qe($);l(Z=>({...Z,destination:W?W.label:""}))},required:!0,children:[r.jsx("option",{value:"",children:"Select destination"}),Re.map(M=>M.options.length>0&&r.jsx("optgroup",{label:M.label,children:M.options.map($=>{const W=$.valueKey;return r.jsx("option",{value:W,children:$.label},`${M.label}-${W}`)})},M.label))]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Passenger count"}),r.jsx("input",{type:"number",min:0,value:i.passenger_count,onChange:M=>l($=>({...$,passenger_count:M.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Scheduled at"}),r.jsx($t,{value:Ge(i.scheduled_at),options:{enableTime:!0,dateFormat:"Y-m-d H:i",time_24hr:!0,defaultDate:Je(i.scheduled_at)},onChange:M=>{const $=M[0];l(W=>({...W,scheduled_at:$?Bt($):""}))}})]})]})}),r.jsx("article",{className:"card",children:r.jsxs("div",{className:"form-field",style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Vehicles"}),J.length>0&&r.jsx("ul",{className:"status-list",style:{marginTop:"0.5rem"},children:J.map(M=>{const $=x.find(W=>W.id===M);return $?r.jsx("li",{children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",justifyContent:"space-between",width:"100%"},children:[r.jsxs(nt,{to:`/logistics/vehicles/${$.id}`,className:"card-link",style:{flex:1,textDecoration:"none"},children:[r.jsx("strong",{children:$.name}),r.jsxs("div",{className:"muted",children:[$.driver?`Driver: ${$.driver}  `:"","Capacity: ",$.passenger_capacity]}),$.notes&&r.jsxs("div",{className:"muted",children:["Notes: ",$.notes]})]}),r.jsx("button",{type:"button",className:"ghost danger",onClick:()=>ne(M),children:"Remove"})]})},M):null})}),x.length>0&&r.jsx("div",{className:"form-grid",style:{marginTop:"0.5rem"},children:r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Add vehicle"}),r.jsx("div",{className:"form-actions",style:{gap:"0.5rem",alignItems:"center"},children:r.jsxs("select",{value:"",onChange:M=>{const $=Number(M.target.value);$&&(J.includes($)||se(W=>[...W,$]))},children:[r.jsx("option",{value:"",children:"Choose vehicle"}),x.filter(M=>M.event_id===Number(I)).map(M=>r.jsxs("option",{value:M.id,children:[M.name," ",M.driver?`(${M.driver})`:"","  ",M.passenger_capacity," pax"]},M.id))]})})]})}),r.jsx("div",{className:"form-actions",style:{marginTop:"0.5rem",justifyContent:"flex-start",marginLeft:"-1.5rem"},children:r.jsx("button",{type:"button",className:"ghost",onClick:ee,children:"Create new vehicle"})}),R&&r.jsxs("div",{className:"form-grid",style:{marginTop:"0.5rem"},children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Vehicle name"}),r.jsx("input",{type:"text",value:de.name,onChange:M=>Ne($=>({...$,name:M.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Driver"}),r.jsx("input",{type:"text",value:de.driver,onChange:M=>Ne($=>({...$,driver:M.target.value}))})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Passenger capacity"}),r.jsx("input",{type:"number",min:0,value:de.passenger_capacity,onChange:M=>Ne($=>({...$,passenger_capacity:M.target.value}))})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Notes"}),r.jsx("input",{type:"text",value:de.notes,onChange:M=>Ne($=>({...$,notes:M.target.value}))})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"button",className:"primary",onClick:oe,children:"Save vehicle"}),r.jsx("button",{type:"button",className:"ghost",onClick:()=>{ae(!1),Ne({name:"",driver:"",passenger_capacity:"",notes:""})},children:"Cancel"})]})]})]})}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"submit",className:"primary",disabled:me,children:me?"Creating":"Create ground crew"}),we&&r.jsx("span",{className:"muted",children:we})]})]})]})},ls=e=>!!e&&e.trim().length>0,di=e=>e.replace(/^#\s*\d+\s*/,"").trim().toLowerCase(),L0=()=>{const{groundCrewId:e}=Ln(),n=yt(),[t,s]=o.useState({pickup_location:"",destination:"",passenger_count:"",scheduled_at:"",notes:""}),[a,i]=o.useState(!1),[l,u]=o.useState(""),[d,x]=o.useState(!1),[_,C]=o.useState([]),[b,F]=o.useState([]),[y,S]=o.useState([]),[E,p]=o.useState([]),[m,v]=o.useState([]),[j,D]=o.useState([]),[k,I]=o.useState([]),[T,J]=o.useState(""),[se,R]=o.useState(!0),[ae,de]=o.useState(!1),[Ne,me]=o.useState(null),[he,we]=o.useState([]),[ue,ge]=o.useState(!1),[fe,K]=o.useState({name:"",driver:"",passenger_capacity:"",notes:""}),ee=o.useRef(!0),[ne,oe]=o.useState(""),[pe,Ie]=o.useState(""),je=`primary ${a?"saved":""}`,Re=ae?"Saving":a?"Saved":"Save",Pe=()=>{a&&i(!1)};o.useEffect(()=>{let f=!1;return(async()=>{if(e){R(!0),me(null);try{ee.current=!0;const z=await ah(Number(e)),[V,Fe,Le,A,H,h]=await Promise.all([Ut(),za(),$r(),z.event_id?mr(z.event_id):Promise.resolve([]),Kn(),Yn()]);if(f)return;C(Array.isArray(V)?V:[]),F(Array.isArray(Fe)?Fe:[]),v(Array.isArray(Le)?Le:[]),p(Array.isArray(A)?A:[]),D(Array.isArray(H)?H.filter(U=>U.event_id===z.event_id):[]),I(Array.isArray(h)?h.filter(U=>U.event_id===z.event_id):[]),S(Array.isArray(z.vehicles)?z.vehicles:[]);const g=(()=>{if(z.scheduled_at)return z.scheduled_at;const U=V.find(le=>le.id===z.event_id);if(U!=null&&U.starts_at){const le=et(U.starts_at);if(le)return le.setUTCHours(9,0,0,0),le.toISOString()}return""})();s({pickup_location:z.pickup_location,destination:z.destination,passenger_count:String(z.passenger_count),scheduled_at:g,notes:z.notes||""}),u(z.notes||""),x(!1),J(String(z.event_id||""));const L=Array.isArray(z.vehicles)&&z.vehicles.length>0?z.vehicles.map(U=>{if(typeof U.event_vehicle_id=="number")return U.event_vehicle_id;if(typeof U.id=="number")return U.id}).filter(U=>typeof U=="number"):[];we(L),i(!1)}catch(z){f||me(z instanceof Error?z.message:"Failed to load ground crew")}finally{f||R(!1)}}})(),()=>{f=!0}},[e]);const Qe=()=>{Pe(),ge(!0),K({name:"",driver:"",passenger_capacity:"",notes:""})},Ye=f=>{we(w=>w.filter(z=>z!==f)),S(w=>w.filter((z,V)=>!(z.event_vehicle_id===f||z.id&&typeof z.id=="number"&&z.id===f||!z.event_vehicle_id&&!z.id&&V===f))),Pe()};o.useEffect(()=>{if(ee.current){ee.current=!1;return}if(x(!1),we([]),ge(!1),oe(""),Ie(""),s(f=>({...f,pickup_location:"",destination:"",notes:""})),i(!1),T?Promise.all([mr(Number(T)),Kn(),Yn()]).then(([f,w,z])=>{p(Array.isArray(f)?f:[]),D(Array.isArray(w)?w.filter(V=>V.event_id===Number(T)):[]),I(Array.isArray(z)?z.filter(V=>V.event_id===Number(T)):[])}).catch(()=>{p([]),D([]),I([])}):(p([]),D([]),I([])),!t.scheduled_at&&T){const f=_.find(w=>w.id===Number(T));if(f!=null&&f.starts_at){const w=et(f.starts_at);w&&(w.setUTCHours(9,0,0,0),s(z=>({...z,scheduled_at:w.toISOString()})))}}},[T]);const Je=f=>{const w=di(f||"");if(!w)return null;const z=E.find(Le=>di(Le.name||"")===w);if(z!=null&&z.coordinates)return z.coordinates;const V=j.find(Le=>di(Le.name||"")===w);if(V!=null&&V.coordinates)return V.coordinates;const Fe=m.find(Le=>di(Le.name||"")===w);return Fe!=null&&Fe.coordinates?Fe.coordinates:null},G=(f,w,z)=>`${f}#${w??z}`,M=f=>f.toLowerCase().replace(/^#?\s*\d+\s*/,"").trim(),$=(()=>{var z;const f=[],w=_.find(V=>V.id===Number(T));return(z=w==null?void 0:w.innhopps)!=null&&z.length&&w.innhopps.forEach(V=>{const Fe=`${V.sequence?`#${V.sequence} `:""}${V.name}`;f.push({label:Fe,valueKey:G("Innhopp",V.id,Fe),type:"Innhopp",coordinates:V.coordinates||null,detailUrl:w?`/events/${w.id}/innhopps/${V.id}`:void 0})}),w&&Array.isArray(w.airfield_ids)&&w.airfield_ids.length&&m.length&&m.filter(V=>w.airfield_ids.includes(V.id)).forEach(V=>{f.push({label:V.name,valueKey:G("Airfield",V.id,V.name),type:"Airfield",coordinates:V.coordinates||null,detailUrl:`/airfields/${V.id}`})}),E.length&&E.forEach(V=>{f.push({label:V.name,valueKey:G("Accommodation",V.id,V.name),type:"Accommodation",coordinates:V.coordinates||null,detailUrl:w?`/events/${w.id}/accommodations/${V.id}`:void 0})}),k.length&&k.forEach(V=>{f.push({label:V.name,valueKey:G("Meal",V.id,V.name),type:"Meal",coordinates:V.coordinates||null,detailUrl:`/logistics/meals/${V.id}`})}),j.length&&j.forEach(V=>{f.push({label:V.name,valueKey:G("Other",V.id,V.name),type:"Other",coordinates:V.coordinates||null,detailUrl:`/logistics/others/${V.id}`})}),f})(),W=$.filter(f=>f.valueKey!==ne),Z=f=>$.find(w=>w.valueKey===f),Ee=f=>{var w,z;return((w=$.find(V=>V.label===f))==null?void 0:w.valueKey)||((z=$.find(V=>M(V.label)===M(f)))==null?void 0:z.valueKey)},ze=(()=>{const f=Z(ne);return!!f&&ls(f.coordinates)})(),re=(()=>{const f=Z(pe);return!!f&&ls(f.coordinates)})(),lt=(()=>{var w;const f=Z(ne);return(w=f==null?void 0:f.coordinates)==null?void 0:w.trim()})(),vt=(()=>{var w;const f=Z(pe);return(w=f==null?void 0:f.coordinates)==null?void 0:w.trim()})(),Nt=(()=>{const f=Z(ne);return f==null?void 0:f.detailUrl})(),Lt=(()=>{const f=Z(pe);return f==null?void 0:f.detailUrl})(),X=async f=>{if(f.preventDefault(),!!e){de(!0),me(null);try{const w={pickup_location:t.pickup_location.trim(),destination:t.destination.trim(),passenger_count:Number(t.passenger_count)||0,scheduled_at:t.scheduled_at?t.scheduled_at:void 0,notes:t.notes.trim()||void 0,event_id:Number(T)},z=he.length>0?[...he]:y.map(V=>V.event_vehicle_id).filter(V=>typeof V=="number");if(w.vehicle_ids=z,ue&&fe.name.trim()){const V=await tr({event_id:Number(T),name:fe.name.trim(),driver:fe.driver.trim()||void 0,passenger_capacity:Number(fe.passenger_capacity)||0,notes:fe.notes.trim()||void 0});w.vehicle_ids=[...w.vehicle_ids||[],V.id]}await lh(Number(e),w),me("Ground crew updated"),i(!0)}catch(w){me(w instanceof Error?w.message:"Failed to update ground crew")}finally{de(!1)}}},ce=(()=>{const f=Je(t.pickup_location),w=Je(t.destination),z=Number(t.passenger_count),V=Number.isFinite(z)&&z>0,Fe=Array.isArray(he)&&he.length>0||Array.isArray(y)&&y.length>0;return ls(f)&&ls(w)&&ls(t.scheduled_at)&&V&&Fe})(),ve=async()=>{if(e&&window.confirm("Are you sure you want to delete this ground crew entry?"))try{await c0(Number(e)),n(-1)}catch(f){me(f instanceof Error?f.message:"Failed to delete ground crew")}},We=async()=>{if(!(!T||!fe.name.trim()))try{const f=await tr({event_id:Number(T),name:fe.name.trim(),driver:fe.driver.trim()||void 0,passenger_capacity:Number(fe.passenger_capacity)||0,notes:fe.notes.trim()||void 0});F(w=>[f,...w]),we(w=>w.includes(f.id)?w:[...w,f.id]),K({name:"",driver:"",passenger_capacity:"",notes:""}),ge(!1),i(!1)}catch(f){me(f instanceof Error?f.message:"Failed to create vehicle")}};if(o.useEffect(()=>{if(!t.pickup_location){oe("");return}!d&&l&&!t.notes&&s(z=>({...z,notes:l}));const f=Z(ne);if(f&&f.label===t.pickup_location)return;const w=Ee(t.pickup_location);if(w&&w!==ne){const z=Z(w);oe(w),z&&s(V=>({...V,pickup_location:z.label}))}},[$,t.pickup_location,ne,l,d,t.notes]),o.useEffect(()=>{if(!t.destination){Ie("");return}!d&&l&&!t.notes&&s(z=>({...z,notes:l}));const f=Z(pe);if(f&&f.label===t.destination)return;const w=Ee(t.destination);if(w&&w!==pe){const z=Z(w);Ie(w),z&&s(V=>({...V,destination:z.label}))}},[$,t.destination,pe,l,d,t.notes]),se)return r.jsx("p",{className:"muted",children:"Loading ground crew"});const ot=t.pickup_location&&t.destination?`${t.pickup_location}  ${t.destination}`:"",Xe=!!(lt&&vt),Ct=Xe?`https://www.google.com/maps/dir/?api=1&origin=${encodeURIComponent(lt)}&destination=${encodeURIComponent(vt)}`:null,pt=t.passenger_count===""||Number.isNaN(Number(t.passenger_count)),wt=!ls(t.scheduled_at),en=he.length===0&&y.length===0,rt=f=>{const w=_.find(Le=>Le.id===Number(T)),z=Ge(w==null?void 0:w.starts_at)||null,V=Ge(w==null?void 0:w.ends_at)||null;if(f){const Le=Ge(f);if(Le)return Le}const Fe=new Date;if(z&&V)return Fe<z?z:Fe>V?V:Fe;if(z)return z;if(V)return V};return r.jsxs("section",{children:[r.jsxs("header",{className:"page-header",children:[r.jsxs("div",{children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flexWrap:"wrap"},children:[r.jsx("h2",{style:{margin:0},children:ot||"Ground Crew Entry"}),r.jsx("span",{className:`badge ${ce?"success":"danger"}`,"aria-label":ce?"Complete":"Missing info",title:ce?"Complete":"Missing info",style:{minWidth:"2.4ch",textAlign:"center"},children:ce?"":"!"})]}),ot&&r.jsx("p",{children:r.jsx("button",{type:"button",className:"link-button",style:{fontSize:"1.25em"},disabled:!Xe,onClick:()=>{Ct&&window.open(Ct,"_blank")},children:"Open route in Maps"})})]}),r.jsxs("div",{className:"card-actions",children:[r.jsx("button",{className:"ghost",type:"button",onClick:()=>n("/logistics/ground-crew/new",{state:{copyGroundCrew:{event_id:T,pickup_location:t.pickup_location,destination:t.destination,passenger_count:t.passenger_count,scheduled_at:t.scheduled_at,notes:t.notes,vehicle_ids:he,vehicles:y.map(f=>({event_vehicle_id:f.event_vehicle_id,name:f.name,driver:f.driver,passenger_capacity:f.passenger_capacity,notes:f.notes}))}}}),children:"Make a copy"}),r.jsx("button",{className:"ghost",type:"button",onClick:()=>n(-1),children:"Back"}),r.jsx("button",{className:"ghost danger",type:"button",onClick:ve,children:"Delete route"})]})]}),r.jsxs("form",{onSubmit:X,children:[r.jsxs("article",{className:"card",children:[r.jsxs("div",{className:"form-grid",children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Event"}),r.jsxs("div",{className:"input-with-button",children:[r.jsxs("select",{value:T,onChange:f=>{J(f.target.value),Pe()},required:!0,style:{flex:1,minWidth:0},children:[r.jsx("option",{value:"",children:"Select event"}),_.map(f=>r.jsx("option",{value:f.id,children:f.name},f.id))]}),r.jsx("span",{style:{visibility:"hidden"},children:"Open in Maps"})]})]}),r.jsxs("label",{className:`form-field ${ne&&!ze?"field-missing":""}`,children:[r.jsx("span",{children:"Start location"}),r.jsxs("div",{className:"input-with-button",children:[r.jsxs("select",{value:ne,onChange:f=>{const w=f.target.value;oe(w);const z=Z(w);Pe(),s(V=>({...V,pickup_location:z?z.label:""}))},required:!0,style:{flex:1,minWidth:0},children:[r.jsx("option",{value:"",children:"Select start location"}),$.filter(f=>f.type==="Innhopp"&&f.valueKey!==pe).length>0&&r.jsx("optgroup",{label:"Innhopps",children:$.filter(f=>f.type==="Innhopp"&&f.valueKey!==pe).map(f=>r.jsx("option",{value:f.valueKey,children:f.label},`inn-${f.valueKey}`))}),$.filter(f=>f.type==="Airfield"&&f.valueKey!==pe).length>0&&r.jsx("optgroup",{label:"Airfields",children:$.filter(f=>f.type==="Airfield"&&f.valueKey!==pe).map(f=>r.jsx("option",{value:f.valueKey,children:f.label},`af-${f.valueKey}`))}),$.filter(f=>f.type==="Accommodation"&&f.valueKey!==pe).length>0&&r.jsx("optgroup",{label:"Accommodations",children:$.filter(f=>f.type==="Accommodation"&&f.valueKey!==pe).map(f=>r.jsx("option",{value:f.valueKey,children:f.label},`acc-${f.valueKey}`))}),$.filter(f=>f.type==="Meal"&&f.valueKey!==pe).length>0&&r.jsx("optgroup",{label:"Meals",children:$.filter(f=>f.type==="Meal"&&f.valueKey!==pe).map(f=>r.jsx("option",{value:f.valueKey,children:f.label},`meal-${f.valueKey}`))}),$.filter(f=>f.type==="Other"&&f.valueKey!==pe).length>0&&r.jsx("optgroup",{label:"Other",children:$.filter(f=>f.type==="Other"&&f.valueKey!==pe).map(f=>r.jsx("option",{value:f.valueKey,children:f.label},`other-${f.valueKey}`))})]}),r.jsx("button",{type:"button",className:"ghost",disabled:!lt&&!Nt,onClick:()=>{lt?window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(lt)}`,"_blank"):Nt&&n(Nt)},children:lt?"Open in Maps":"Update location"})]})]}),r.jsxs("label",{className:`form-field ${pe&&!re?"field-missing":""}`,children:[r.jsx("span",{children:"Destination"}),r.jsxs("div",{className:"input-with-button",children:[r.jsxs("select",{value:pe,onChange:f=>{const w=f.target.value;Ie(w);const z=Z(w);Pe(),s(V=>({...V,destination:z?z.label:""}))},required:!0,style:{flex:1,minWidth:0},children:[r.jsx("option",{value:"",children:"Select destination"}),W.filter(f=>f.type==="Innhopp").length>0&&r.jsx("optgroup",{label:"Innhopps",children:W.filter(f=>f.type==="Innhopp"&&f.valueKey!==ne).map(f=>r.jsx("option",{value:f.valueKey,children:f.label},`inn-d-${f.valueKey}`))}),W.filter(f=>f.type==="Airfield").length>0&&r.jsx("optgroup",{label:"Airfields",children:W.filter(f=>f.type==="Airfield"&&f.valueKey!==ne).map(f=>r.jsx("option",{value:f.valueKey,children:f.label},`af-d-${f.valueKey}`))}),W.filter(f=>f.type==="Accommodation").length>0&&r.jsx("optgroup",{label:"Accommodations",children:W.filter(f=>f.type==="Accommodation"&&f.valueKey!==ne).map(f=>r.jsx("option",{value:f.valueKey,children:f.label},`acc-d-${f.valueKey}`))}),W.filter(f=>f.type==="Meal").length>0&&r.jsx("optgroup",{label:"Meals",children:W.filter(f=>f.type==="Meal"&&f.valueKey!==ne).map(f=>r.jsx("option",{value:f.valueKey,children:f.label},`meal-dest-${f.valueKey}`))}),W.filter(f=>f.type==="Other").length>0&&r.jsx("optgroup",{label:"Other",children:W.filter(f=>f.type==="Other"&&f.valueKey!==ne).map(f=>r.jsx("option",{value:f.valueKey,children:f.label},`other-dest-${f.valueKey}`))})]}),r.jsx("button",{type:"button",className:"ghost",disabled:!vt&&!Lt,onClick:()=>{vt?window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(vt)}`,"_blank"):Lt&&n(Lt)},children:vt?"Open in Maps":"Update location"})]})]}),r.jsx("div",{className:"form-field",style:{gridColumn:"1 / -1",padding:0},children:r.jsxs("div",{className:"form-grid",style:{gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",gap:"0.75rem"},children:[r.jsxs("label",{className:`form-field ${pt?"field-missing":""}`,style:{margin:0},children:[r.jsx("span",{children:"Passenger count"}),r.jsx("input",{type:"number",min:0,value:t.passenger_count,onChange:f=>{Pe(),s(w=>({...w,passenger_count:f.target.value}))},required:!0})]}),r.jsxs("label",{className:`form-field ${wt?"field-missing":""}`,style:{margin:0},children:[r.jsx("span",{children:"Scheduled at"}),r.jsx($t,{value:Ge(t.scheduled_at),options:{enableTime:!0,dateFormat:"Y-m-d H:i",time_24hr:!0,defaultDate:rt(t.scheduled_at)},onChange:f=>{const w=f[0];Pe(),s(z=>({...z,scheduled_at:w?Bt(w):""}))}})]})]})})]}),r.jsx("div",{className:"form-actions",style:{marginTop:"0.5rem"},children:r.jsx("button",{type:"submit",className:je,disabled:ae||a,children:Re})})]}),r.jsx("article",{className:"card",children:r.jsxs("div",{className:`form-field ${en?"field-missing":""}`,style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Vehicles"}),(()=>{const f=he.length>0?he.reduce((w,z)=>{const V=b.find(Le=>Le.id===z);if(V)return w.push({id:z,name:V.name,driver:V.driver,passenger_capacity:V.passenger_capacity,notes:V.notes,removable:!0}),w;const Fe=y.find(Le=>Le.event_vehicle_id===z||Le.id&&typeof Le.id=="number"&&Le.id===z);return Fe&&w.push({id:z,name:Fe.name,driver:Fe.driver,passenger_capacity:Fe.passenger_capacity,notes:Fe.notes,removable:!0}),w},[]):[];return f.length===0&&y.length>0&&y.forEach((w,z)=>{const V=typeof w.event_vehicle_id=="number"?w.event_vehicle_id:w.id&&typeof w.id=="number"?w.id:z;f.push({id:V,name:w.name,driver:w.driver,passenger_capacity:w.passenger_capacity,notes:w.notes,removable:typeof w.event_vehicle_id=="number"||typeof w.id=="number"})}),f.length===0?null:r.jsx("ul",{className:"status-list",style:{marginTop:"0.5rem"},children:f.map((w,z)=>r.jsx("li",{children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",justifyContent:"space-between",width:"100%"},children:[w.removable?r.jsxs(nt,{to:{pathname:`/logistics/vehicles/${w.id}`,search:e?`?groundCrewId=${e}`:void 0},className:"card-link",style:{flex:1},children:[r.jsx("strong",{children:w.name}),r.jsxs("div",{className:"muted",children:[w.driver?`Driver: ${w.driver}  `:"","Capacity: ",w.passenger_capacity]}),w.notes&&r.jsxs("div",{className:"muted",children:["Notes: ",w.notes]})]}):r.jsxs("div",{style:{flex:1},children:[r.jsx("strong",{children:w.name}),r.jsxs("div",{className:"muted",children:[w.driver?`Driver: ${w.driver}  `:"","Capacity: ",w.passenger_capacity]}),w.notes&&r.jsxs("div",{className:"muted",children:["Notes: ",w.notes]})]}),w.removable&&r.jsx("button",{type:"button",className:"ghost danger",onClick:()=>Ye(w.id),children:"Remove"})]})},`${w.id}-${z}`))})})(),b.length>0&&r.jsx("div",{className:"form-grid",style:{marginTop:"0.5rem"},children:r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Add vehicle"}),r.jsx("div",{className:"form-actions",style:{gap:"0.5rem",alignItems:"center"},children:r.jsxs("select",{value:"",onChange:f=>{const w=Number(f.target.value);w&&(he.includes(w)||(Pe(),we(z=>[...z,w])))},children:[r.jsx("option",{value:"",children:"Choose vehicle"}),b.filter(f=>f.event_id===Number(T)).map(f=>r.jsxs("option",{value:f.id,children:[f.name," ",f.driver?`(${f.driver})`:"","  ",f.passenger_capacity," pax"]},f.id))]})})]})}),r.jsx("div",{className:"form-actions",style:{marginTop:"0.5rem",justifyContent:"flex-start",marginLeft:"-1.5rem"},children:r.jsx("button",{type:"button",className:"ghost",onClick:Qe,children:"Create new vehicle"})}),ue&&r.jsxs("div",{className:"form-grid",style:{marginTop:"0.5rem"},children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Vehicle name"}),r.jsx("input",{type:"text",value:fe.name,onChange:f=>{Pe(),K(w=>({...w,name:f.target.value}))},required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Driver"}),r.jsx("input",{type:"text",value:fe.driver,onChange:f=>{Pe(),K(w=>({...w,driver:f.target.value}))}})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Passenger capacity"}),r.jsx("input",{type:"number",min:0,value:fe.passenger_capacity,onChange:f=>{Pe(),K(w=>({...w,passenger_capacity:f.target.value}))}})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Notes"}),r.jsx("input",{type:"text",value:fe.notes,onChange:f=>{Pe(),K(w=>({...w,notes:f.target.value}))}})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"button",className:"primary",onClick:We,children:"Save vehicle"}),r.jsx("button",{type:"button",className:"ghost",onClick:()=>{ge(!1),K({name:"",driver:"",passenger_capacity:"",notes:""})},children:"Cancel"})]})]}),r.jsx("div",{className:"form-actions",style:{marginTop:"0.5rem"},children:r.jsx("button",{type:"submit",className:je,disabled:ae||a,children:Re})})]})}),r.jsxs("article",{className:"card",children:[r.jsxs("label",{className:"form-field",style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Notes"}),r.jsx("textarea",{value:t.notes,onChange:f=>{d||x(!0),Pe(),s(w=>({...w,notes:f.target.value}))},rows:3})]}),r.jsx("div",{className:"form-actions",style:{marginTop:"0.5rem"},children:r.jsx("button",{type:"submit",className:je,disabled:ae||a,children:Re})})]}),Ne&&r.jsx("div",{className:"form-actions",style:{marginTop:"0.5rem"},children:r.jsx("span",{className:"muted",children:Ne})})]})]})},F0=()=>{const e=yt(),[n,t]=o.useState([]),[s,a]=o.useState([]),[i,l]=o.useState([]),[u,d]=o.useState([]),[x,_]=o.useState([]),[C,b]=o.useState([]),[F,y]=o.useState([]),[S,E]=o.useState([]),[p,m]=o.useState(""),[v,j]=o.useState(""),[D,k]=o.useState(!0),[I,T]=o.useState(null);o.useEffect(()=>{let me=!1;return(async()=>{k(!0),T(null);try{const[we,ue,ge,fe,K,ee,ne,oe]=await Promise.all([rr(),Ut(),Pa(),Ma(),Fp(),za(),Kn(),Yn()]);if(me)return;t(Array.isArray(we)?we:[]),a(Array.isArray(ue)?ue:[]),l(Array.isArray(ge)?ge:[]),d(Array.isArray(fe)?fe:[]),_(Array.isArray(K)?K:[]),E(Array.isArray(ee)?ee:[]),b(Array.isArray(ne)?ne:[]),y(Array.isArray(oe)?oe:[])}catch(we){me||T(we instanceof Error?we.message:"Failed to load logistics")}finally{me||k(!1)}})(),()=>{me=!0}},[]);const J=o.useMemo(()=>p?s.filter(me=>me.season_id===Number(p)):s,[s,p]),se=o.useMemo(()=>i.filter(me=>{if(v)return me.event_id===Number(v);if(p){const he=s.find(we=>we.id===me.event_id);return(he==null?void 0:he.season_id)===Number(p)}return!0}),[i,v,p,s]),R=o.useMemo(()=>x.filter(me=>{if(v)return me.event_id===Number(v);if(p){const he=s.find(we=>we.id===me.event_id);return(he==null?void 0:he.season_id)===Number(p)}return!0}),[x,v,p,s]),ae=o.useMemo(()=>u.filter(me=>{if(v)return me.event_id===Number(v);if(p){const he=s.find(we=>we.id===me.event_id);return(he==null?void 0:he.season_id)===Number(p)}return!0}),[u,v,p,s]);o.useMemo(()=>S.filter(me=>{if(v)return me.event_id===Number(v);if(p){const he=s.find(we=>we.id===me.event_id);return(he==null?void 0:he.season_id)===Number(p)}return!0}),[S,v,p,s]);const de=o.useMemo(()=>C.filter(me=>{if(v)return me.event_id===Number(v);if(p){const he=s.find(we=>we.id===me.event_id);return(he==null?void 0:he.season_id)===Number(p)}return!0}),[C,v,p,s]),Ne=o.useMemo(()=>F.filter(me=>{if(v)return me.event_id===Number(v);if(p){const he=s.find(we=>we.id===me.event_id);return(he==null?void 0:he.season_id)===Number(p)}return!0}),[F,v,p,s]);return r.jsxs("section",{className:"stack",children:[r.jsx("header",{className:"page-header",children:r.jsx("div",{children:r.jsx("h2",{children:"Logistics"})})}),r.jsx("article",{className:"card",children:r.jsxs("div",{className:"form-grid",style:{gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",alignItems:"end",gap:"0.75rem"},children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Season"}),r.jsxs("select",{value:p,onChange:me=>{m(me.target.value),j("")},style:{width:"100%",minWidth:"140px",maxWidth:"180px"},children:[r.jsx("option",{value:"",children:"All seasons"}),n.map(me=>r.jsx("option",{value:me.id,children:me.name},me.id))]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Event"}),r.jsxs("select",{value:v,onChange:me=>j(me.target.value),style:{width:"100%",minWidth:"160px"},children:[r.jsx("option",{value:"",children:"All events"}),J.map(me=>r.jsx("option",{value:me.id,children:me.name},me.id))]})]})]})}),I&&r.jsx("p",{className:"error-text",children:I}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",gap:"1rem"},children:[r.jsxs("article",{className:"card clickable",onClick:()=>e("/logistics/transport"),children:[r.jsxs("header",{className:"card-header",children:[r.jsx("h3",{children:"Transport"}),r.jsx("span",{className:"badge neutral",children:se.length})]}),r.jsx("p",{className:"muted",children:"View and manage transport routes."})]}),r.jsxs("article",{className:"card clickable",onClick:()=>e("/logistics/ground-crew"),children:[r.jsxs("header",{className:"card-header",children:[r.jsx("h3",{children:"Ground Crew"}),r.jsx("span",{className:"badge neutral",children:ae.length})]}),r.jsx("p",{className:"muted",children:"View and manage ground crew entries."})]}),r.jsxs("article",{className:"card clickable",onClick:()=>e("/logistics/accommodations"),children:[r.jsxs("header",{className:"card-header",children:[r.jsx("h3",{children:"Accommodations"}),r.jsx("span",{className:"badge neutral",children:R.length})]}),r.jsx("p",{className:"muted",children:"Manage accommodations."})]}),r.jsxs("article",{className:"card clickable",onClick:()=>e("/logistics/meals"),children:[r.jsxs("header",{className:"card-header",children:[r.jsx("h3",{children:"Meals"}),r.jsx("span",{className:"badge neutral",children:Ne.length})]}),r.jsx("p",{className:"muted",children:"Plan meals and service times."})]}),r.jsxs("article",{className:"card clickable",onClick:()=>e("/logistics/others"),children:[r.jsxs("header",{className:"card-header",children:[r.jsx("h3",{children:"Other"}),r.jsx("span",{className:"badge neutral",children:de.length})]}),r.jsx("p",{className:"muted",children:"Activities, other points of Interest, etc."})]})]})]})},tf=(e,n=!1)=>e?Bn(e,{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:n?!1:void 0}):"Not scheduled",nf=e=>{var n,t;return((n=et(e.check_in_at))==null?void 0:n.getTime())??((t=et(e.check_out_at))==null?void 0:t.getTime())??Number.POSITIVE_INFINITY},R0=()=>{const[e,n]=o.useState([]),[t,s]=o.useState([]),[a,i]=o.useState([]),[l,u]=o.useState(""),[d,x]=o.useState(""),[_,C]=o.useState(!0),[b,F]=o.useState(null);o.useEffect(()=>{let E=!1;return(async()=>{C(!0),F(null);try{const[m,v,j]=await Promise.all([rr(),Ut(),Fp()]);if(E)return;n(Array.isArray(m)?m:[]),s(Array.isArray(v)?v:[]),i(Array.isArray(j)?j:[])}catch(m){E||F(m instanceof Error?m.message:"Failed to load accommodations")}finally{E||C(!1)}})(),()=>{E=!0}},[]);const y=o.useMemo(()=>l?t.filter(E=>E.season_id===Number(l)):t,[t,l]),S=o.useMemo(()=>a.filter(E=>{if(d)return E.event_id===Number(d);if(l){const p=t.find(m=>m.id===E.event_id);return(p==null?void 0:p.season_id)===Number(l)}return!0}).sort((E,p)=>{const m=nf(E),v=nf(p);return m===v?E.name.localeCompare(p.name):m-v}),[a,d,l,t]);return r.jsxs("section",{children:[r.jsxs("header",{className:"page-header",children:[r.jsx("div",{children:r.jsx("h2",{children:"Accommodations"})}),r.jsxs("div",{className:"card-actions",style:{gap:"0.5rem"},children:[r.jsx(nt,{className:"ghost",to:"/logistics",style:{fontWeight:700,fontSize:"1.05rem"},children:"Back to logistics"}),r.jsx(nt,{className:"primary button-link",to:"/logistics/accommodations/new",children:"Create accommodation"})]})]}),r.jsxs("div",{className:"stack",children:[r.jsx("article",{className:"card",children:r.jsxs("div",{className:"form-grid",style:{gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",alignItems:"end",gap:"0.75rem"},children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Season"}),r.jsxs("select",{value:l,onChange:E=>{u(E.target.value),x("")},style:{width:"100%",minWidth:"140px",maxWidth:"180px"},children:[r.jsx("option",{value:"",children:"All seasons"}),e.map(E=>r.jsx("option",{value:E.id,children:E.name},E.id))]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Event"}),r.jsxs("select",{value:d,onChange:E=>x(E.target.value),style:{width:"100%",minWidth:"160px"},children:[r.jsx("option",{value:"",children:"All events"}),y.map(E=>r.jsx("option",{value:E.id,children:E.name},E.id))]})]})]})}),r.jsxs("article",{className:"card",children:[r.jsxs("header",{className:"card-header",children:[r.jsx("div",{children:r.jsx("h3",{children:"Accommodations"})}),r.jsxs("span",{className:"badge neutral",children:[S.length," ",S.length===1?"accommodation":"accommodations"]})]}),_?r.jsx("p",{className:"muted",children:"Loading accommodations"}):b?r.jsx("p",{className:"error-text",children:b}):S.length===0?r.jsx("p",{className:"muted",children:"No accommodations match the selected filters."}):r.jsx("ul",{className:"status-list",style:{maxHeight:"24rem",overflowY:"auto"},children:S.map(E=>{var p,m;return r.jsx("li",{children:r.jsxs(nt,{to:`/events/${E.event_id}/accommodations/${E.id}`,className:"card-link",style:{flex:1,display:"flex",flexDirection:"column",gap:"0.25rem"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",gap:"0.75rem"},children:[r.jsx("strong",{children:E.name}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.35rem",flexShrink:0},children:[r.jsx("span",{className:"badge",style:{backgroundColor:"#2b8a3e",color:"#fff"},children:((p=t.find(v=>v.id===E.event_id))==null?void 0:p.name)||`Event #${E.event_id}`}),r.jsx("span",{className:`badge ${E.booked?"success":"danger"}`,children:E.booked?"BOOKED":"NOT BOOKED"})]})]}),r.jsxs("div",{className:"muted",style:{display:"flex",alignItems:"center",gap:"0.35rem",flexWrap:"wrap"},children:[((m=t.find(v=>v.id===E.event_id))==null?void 0:m.name)||`Event #${E.event_id}`,"  Capacity: ",E.capacity,E.check_in_at?`  Check-in: ${tf(E.check_in_at,!0)}`:"",E.check_out_at?`  Check-out: ${tf(E.check_out_at,!0)}`:""]})]})},E.id)})})]})]})]})},z0=()=>{const e=yt(),n=Zt(),[t,s]=o.useState([]),[a,i]=o.useState(!0),[l,u]=o.useState(null),[d,x]=o.useState(null),[_,C]=o.useState(null),[b,F]=o.useState(()=>{var m;const p=(m=n.state)==null?void 0:m.copyAccommodation;return{event_id:p!=null&&p.event_id?String(p.event_id):"",name:(p==null?void 0:p.name)||"",capacity:(p==null?void 0:p.capacity)??"",coordinates:(p==null?void 0:p.coordinates)||"",check_in_at:(p==null?void 0:p.check_in_at)||"",check_out_at:(p==null?void 0:p.check_out_at)||"",booked:!!(p!=null&&p.booked),notes:(p==null?void 0:p.notes)||""}}),[y,S]=o.useState(!1);o.useEffect(()=>{let p=!1;return(async()=>{i(!0),u(null);try{const v=await Ut();if(p)return;s(Array.isArray(v)?v:[])}catch(v){p||u(v instanceof Error?v.message:"Failed to load events")}finally{p||i(!1)}})(),()=>{p=!0}},[]);const E=async p=>{var m;if(p.preventDefault(),!(!b.event_id||!b.name.trim())){S(!0),x(null);try{const v=await Rp(Number(b.event_id),{name:b.name.trim(),capacity:Number(b.capacity)||0,coordinates:b.coordinates.trim()||void 0,check_in_at:b.check_in_at||void 0,check_out_at:b.check_out_at||void 0,booked:b.booked,notes:b.notes.trim()||void 0});if(C(v.id),x("Accommodation created"),!!((m=n.state)!=null&&m.copyAccommodation)){if(v.id&&b.event_id)try{sessionStorage.setItem(`event-schedule-highlight:${b.event_id}`,`acc-in-${v.id}`)}catch{}e(-2)}else e("/logistics/accommodations",{state:{highlightAccommodationId:v.id}})}catch(v){x(v instanceof Error?v.message:"Failed to create accommodation")}finally{S(!1)}}};return a?r.jsx("p",{className:"muted",children:"Loading"}):l?r.jsx("p",{className:"error-text",children:l}):r.jsxs("section",{className:"stack",children:[r.jsxs("header",{className:"page-header",children:[r.jsx("div",{children:r.jsx("h2",{children:"Create accommodation"})}),r.jsx("div",{className:"card-actions",children:r.jsx("button",{className:"ghost",type:"button",onClick:()=>e("/logistics/accommodations"),children:"Back to accommodations"})})]}),r.jsx("article",{className:"card",children:r.jsxs("form",{className:"form-grid",onSubmit:E,children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Event"}),r.jsxs("select",{value:b.event_id,onChange:p=>F(m=>({...m,event_id:p.target.value})),required:!0,children:[r.jsx("option",{value:"",children:"Select event"}),t.map(p=>r.jsx("option",{value:p.id,children:p.name},p.id))]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Name"}),r.jsx("input",{type:"text",value:b.name,onChange:p=>F(m=>({...m,name:p.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Capacity"}),r.jsx("input",{type:"number",min:0,value:b.capacity,onChange:p=>F(m=>({...m,capacity:p.target.value}))})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Coordinates (DMS)"}),r.jsx("input",{type:"text",value:b.coordinates,onChange:p=>F(m=>({...m,coordinates:p.target.value})),placeholder:`e.g. 915'43"N 7426'08"W`})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Check-in"}),r.jsx($t,{value:Ge(b.check_in_at),options:{enableTime:!0,dateFormat:"Y-m-d H:i",time_24hr:!0},onChange:p=>{const m=p[0];F(v=>({...v,check_in_at:m?Bt(m):""}))}})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Check-out"}),r.jsx($t,{value:Ge(b.check_out_at),options:{enableTime:!0,dateFormat:"Y-m-d H:i",time_24hr:!0},onChange:p=>{const m=p[0];F(v=>({...v,check_out_at:m?Bt(m):""}))}})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Booked"}),r.jsxs("div",{className:"checkbox-field",children:[r.jsx("input",{type:"checkbox",checked:b.booked,onChange:p=>F(m=>({...m,booked:p.target.checked}))}),r.jsx("span",{children:"Mark as booked"})]})]}),r.jsxs("label",{className:"form-field",style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Notes"}),r.jsx("input",{type:"text",value:b.notes,onChange:p=>F(m=>({...m,notes:p.target.value}))})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"submit",className:"primary",disabled:y,children:y?"Creating":"Create accommodation"}),d&&r.jsx("span",{className:"muted",children:d})]})]})})]})},U0=e=>e?Bn(e,{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1}):"Not scheduled",V0=()=>{var m;const n=(m=Zt().state)==null?void 0:m.highlightMealId,[t,s]=o.useState([]),[a,i]=o.useState([]),[l,u]=o.useState([]),[d,x]=o.useState(""),[_,C]=o.useState(""),[b,F]=o.useState(!0),[y,S]=o.useState(null);o.useEffect(()=>{let v=!1;return(async()=>{F(!0),S(null);try{const[D,k,I]=await Promise.all([rr(),Ut(),Yn()]);if(v)return;s(Array.isArray(D)?D:[]),i(Array.isArray(k)?k:[]),u(Array.isArray(I)?I:[])}catch(D){v||S(D instanceof Error?D.message:"Failed to load meals")}finally{v||F(!1)}})(),()=>{v=!0}},[]);const E=o.useMemo(()=>d?a.filter(v=>v.season_id===Number(d)):a,[a,d]),p=o.useMemo(()=>l.filter(v=>{if(_)return v.event_id===Number(_);if(d){const j=a.find(D=>D.id===v.event_id);return(j==null?void 0:j.season_id)===Number(d)}return!0}).sort((v,j)=>{var I,T;const D=((I=et(v.scheduled_at))==null?void 0:I.getTime())??Number.POSITIVE_INFINITY,k=((T=et(j.scheduled_at))==null?void 0:T.getTime())??Number.POSITIVE_INFINITY;return D===k?v.name.localeCompare(j.name):D-k}),[l,_,d,a]);return r.jsxs("section",{children:[r.jsxs("header",{className:"page-header",children:[r.jsx("div",{children:r.jsx("h2",{children:"Meals"})}),r.jsxs("div",{className:"card-actions",style:{gap:"0.5rem"},children:[r.jsx(nt,{className:"ghost",to:"/logistics",style:{fontWeight:700,fontSize:"1.05rem"},children:"Back to logistics"}),r.jsx(nt,{className:"primary button-link",to:"/logistics/meals/new",children:"Create meal"})]})]}),r.jsx("article",{className:"card",children:r.jsxs("div",{className:"form-grid",style:{gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",alignItems:"end",gap:"0.75rem"},children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Season"}),r.jsxs("select",{value:d,onChange:v=>{x(v.target.value),C("")},style:{width:"100%",minWidth:"140px",maxWidth:"180px"},children:[r.jsx("option",{value:"",children:"All seasons"}),t.map(v=>r.jsx("option",{value:v.id,children:v.name},v.id))]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Event"}),r.jsxs("select",{value:_,onChange:v=>C(v.target.value),style:{width:"100%",minWidth:"160px"},children:[r.jsx("option",{value:"",children:"All events"}),E.map(v=>r.jsx("option",{value:v.id,children:v.name},v.id))]})]})]})}),r.jsxs("article",{className:"card",children:[r.jsxs("header",{className:"card-header",children:[r.jsx("div",{children:r.jsx("h3",{children:"Meals"})}),r.jsxs("span",{className:"badge neutral",children:[p.length," meals"]})]}),b?r.jsx("p",{className:"muted",children:"Loading meals"}):y?r.jsx("p",{className:"error-text",children:y}):p.length===0?r.jsx("p",{className:"muted",children:"No meals match the selected filters."}):r.jsx("ul",{className:"status-list",style:{maxHeight:"24rem",overflowY:"auto",width:"100%"},children:p.map(v=>{var j;return r.jsx("li",{style:{width:"100%",background:n===v.id?"#e6f4ff":void 0,border:n===v.id?"1px solid #1d7ed8":void 0,borderRadius:n===v.id?"10px":void 0},children:r.jsxs(nt,{to:`/logistics/meals/${v.id}`,className:"card-link",style:{display:"flex",flexDirection:"column",gap:"0.15rem",width:"100%"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"0.75rem"},children:[r.jsx("strong",{children:v.name}),r.jsx("span",{className:"badge",style:{backgroundColor:"#2b8a3e",color:"#fff"},children:((j=a.find(D=>D.id===v.event_id))==null?void 0:j.name)||`Event #${v.event_id}`})]}),r.jsxs("div",{className:"muted",style:{display:"flex",gap:"0.35rem",flexWrap:"wrap"},children:[v.location?`Location: ${v.location}`:"Location not set",v.scheduled_at?` ${U0(v.scheduled_at)}`:""]})]})},v.id)})})]})]})},W0=()=>{var j;const e=yt(),t=(j=Zt().state)==null?void 0:j.copyMeal,s=!!t,[a,i]=o.useState([]),[l,u]=o.useState(!0),[d,x]=o.useState(null),[_,C]=o.useState(null),[b,F]=o.useState(null),[y,S]=o.useState({event_id:t!=null&&t.event_id?String(t.event_id):"",name:(t==null?void 0:t.name)||"",location:(t==null?void 0:t.location)||"",scheduled_at:(t==null?void 0:t.scheduled_at)||"",notes:(t==null?void 0:t.notes)||""}),[E,p]=o.useState(!1);o.useEffect(()=>{let D=!1;return(async()=>{u(!0),x(null);try{const I=await Ut();D||i(Array.isArray(I)?I:[])}catch(I){D||x(I instanceof Error?I.message:"Failed to load events")}finally{D||u(!1)}})(),()=>{D=!0}},[]);const m=D=>{const k=a.find(se=>se.id===Number(y.event_id)),I=Ge(k==null?void 0:k.starts_at)||null,T=Ge(k==null?void 0:k.ends_at)||null;if(D){const se=Ge(D);if(se)return se}const J=new Date;if(I&&T)return J<I?I:J>T?T:J;if(I)return I;if(T)return T},v=async D=>{if(D.preventDefault(),!(!y.event_id||!y.name.trim())){p(!0),C(null);try{const k=await p0({event_id:Number(y.event_id),name:y.name.trim(),location:y.location.trim()||void 0,scheduled_at:y.scheduled_at||void 0,notes:y.notes.trim()||void 0});F(k),C("Meal created"),s||e("/logistics/meals",{state:{highlightMealId:k.id}})}catch(k){C(k instanceof Error?k.message:"Failed to create meal")}finally{p(!1)}}};return l?r.jsx("p",{className:"muted",children:"Loading"}):d?r.jsx("p",{className:"error-text",children:d}):r.jsxs("section",{className:"stack",children:[r.jsxs("header",{className:"page-header",children:[r.jsx("div",{children:r.jsx("h2",{children:s?"Copy meal":"Create meal"})}),r.jsx("div",{className:"card-actions",children:r.jsx("button",{className:"ghost",type:"button",onClick:()=>{if(s){if(b!=null&&b.id){const D=b.event_id||(y.event_id?Number(y.event_id):void 0);if(D)try{sessionStorage.setItem(`event-schedule-highlight:${D}`,`meal-${b.id}`)}catch{}e(-2)}else e(-2);return}e("/logistics/meals")},children:"Back"})})]}),r.jsx("article",{className:"card",children:r.jsxs("form",{className:"form-grid",onSubmit:v,children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Event"}),r.jsxs("select",{value:y.event_id,onChange:D=>S(k=>({...k,event_id:D.target.value})),required:!0,children:[r.jsx("option",{value:"",children:"Select event"}),a.map(D=>r.jsx("option",{value:D.id,children:D.name},D.id))]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Name"}),r.jsx("input",{type:"text",value:y.name,onChange:D=>S(k=>({...k,name:D.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Location"}),r.jsx("input",{type:"text",value:y.location,onChange:D=>S(k=>({...k,location:D.target.value}))})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Scheduled at"}),r.jsx($t,{value:Ge(y.scheduled_at),options:{enableTime:!0,dateFormat:"Y-m-d H:i",time_24hr:!0,defaultDate:m(y.scheduled_at)},onChange:D=>{const k=D[0];S(I=>({...I,scheduled_at:k?Bt(k):""}))}})]}),r.jsxs("label",{className:"form-field",style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Notes"}),r.jsx("textarea",{value:y.notes,onChange:D=>S(k=>({...k,notes:D.target.value}))})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"submit",className:"primary",disabled:E,children:E?"Creating":"Create meal"}),_&&r.jsx("span",{className:"muted",children:_})]})]})})]})},so=e=>!!e&&e.trim().length>0,H0=()=>{const{mealId:e}=Ln(),n=yt(),[t,s]=o.useState(null),[a,i]=o.useState([]),[l,u]=o.useState({event_id:"",name:"",location:"",scheduled_at:"",notes:""}),[d,x]=o.useState(!0),[_,C]=o.useState(!1),[b,F]=o.useState(!1),[y,S]=o.useState(null),[E,p]=o.useState(null),m=so(l.name)&&so(l.location)&&so(l.scheduled_at),v=k=>{const I=a.find(R=>R.id===Number(l.event_id)),T=Ge(I==null?void 0:I.starts_at)||null,J=Ge(I==null?void 0:I.ends_at)||null;if(k){const R=Ge(k);if(R)return R}const se=new Date;if(T&&J)return se<T?T:se>J?J:se;if(T)return T;if(J)return J};o.useEffect(()=>{let k=!1;return(async()=>{if(e){x(!0),p(null);try{const[T,J]=await Promise.all([dh(Number(e)),Ut()]);if(k)return;s(T),i(Array.isArray(J)?J:[]),u({event_id:T.event_id?String(T.event_id):"",name:T.name,location:T.location||"",scheduled_at:T.scheduled_at||"",notes:T.notes||""})}catch(T){k||p(T instanceof Error?T.message:"Failed to load meal")}finally{k||x(!1)}}})(),()=>{k=!0}},[e]);const j=async k=>{if(k.preventDefault(),!(!t||!l.event_id)){C(!0),S(null);try{const I=await uh(t.id,{event_id:Number(l.event_id),name:l.name.trim(),location:l.location.trim()||void 0,scheduled_at:l.scheduled_at||void 0,notes:l.notes.trim()||void 0});s(I),S("Meal updated")}catch(I){S(I instanceof Error?I.message:"Failed to save meal")}finally{C(!1)}}},D=async()=>{if(!(!t||b)&&window.confirm("Delete this meal?")){F(!0),S(null);try{await h0(t.id),n(-1)}catch(k){S(k instanceof Error?k.message:"Failed to delete meal"),F(!1)}}};return d?r.jsx("p",{className:"muted",children:"Loading meal"}):E?r.jsx("p",{className:"error-text",children:E}):t?r.jsxs("section",{className:"stack",children:[r.jsxs("header",{className:"page-header",children:[r.jsxs("div",{children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flexWrap:"wrap"},children:[r.jsx("h2",{style:{margin:0},children:t.name}),r.jsx("span",{className:`badge ${m?"success":"danger"}`,"aria-label":m?"Complete":"Missing info",title:m?"Complete":"Missing info",style:{minWidth:"2.4ch",textAlign:"center"},children:m?"":"!"})]}),t.location&&r.jsx("p",{className:"muted",children:t.location})]}),r.jsxs("div",{className:"card-actions",children:[r.jsx("button",{className:"ghost",type:"button",onClick:()=>n("/logistics/meals/new",{state:{copyMeal:{...t,event_id:t.event_id}}}),children:"Make a copy"}),r.jsx("button",{className:"ghost",type:"button",onClick:()=>n(-1),children:"Back"}),r.jsx("button",{className:"ghost danger",type:"button",onClick:D,disabled:b,children:b?"Deleting":"Delete"})]})]}),r.jsx("article",{className:"card",children:r.jsxs("form",{className:"form-grid",onSubmit:j,children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Event"}),r.jsxs("select",{value:l.event_id,onChange:k=>u(I=>({...I,event_id:k.target.value})),required:!0,children:[r.jsx("option",{value:"",children:"Select event"}),a.map(k=>r.jsx("option",{value:k.id,children:k.name},k.id))]})]}),r.jsxs("label",{className:`form-field ${l.name.trim()?"":"field-missing"}`,children:[r.jsx("span",{children:"Name"}),r.jsx("input",{type:"text",value:l.name,onChange:k=>u(I=>({...I,name:k.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Location"}),r.jsx("input",{type:"text",value:l.location,onChange:k=>u(I=>({...I,location:k.target.value}))})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Scheduled at"}),r.jsx($t,{value:Ge(l.scheduled_at),options:{enableTime:!0,dateFormat:"Y-m-d H:i",time_24hr:!0,defaultDate:v(l.scheduled_at)},onChange:k=>{const I=k[0];u(T=>({...T,scheduled_at:I?Bt(I):""}))}})]}),r.jsxs("label",{className:"form-field",style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Notes"}),r.jsx("textarea",{value:l.notes,onChange:k=>u(I=>({...I,notes:k.target.value}))})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"submit",className:"primary",disabled:_,children:_?"Saving":"Save"}),y&&r.jsx("span",{className:"muted",children:y})]})]})})]}):r.jsx("p",{className:"error-text",children:"Meal not found."})},B0=e=>e&&Bn(e,{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1})||"Unscheduled",K0=()=>{yt();const[e,n]=o.useState([]),[t,s]=o.useState([]),[a,i]=o.useState([]),[l,u]=o.useState(""),[d,x]=o.useState(""),[_,C]=o.useState(!0),[b,F]=o.useState(null);o.useEffect(()=>{let E=!1;return(async()=>{C(!0),F(null);try{const[m,v,j]=await Promise.all([rr(),Ut(),Kn()]);if(E)return;n(Array.isArray(m)?m:[]),s(Array.isArray(v)?v:[]),i(Array.isArray(j)?j:[])}catch(m){E||F(m instanceof Error?m.message:"Failed to load logistics")}finally{E||C(!1)}})(),()=>{E=!0}},[]);const y=o.useMemo(()=>l?t.filter(E=>E.season_id===Number(l)):t,[t,l]),S=o.useMemo(()=>a.filter(E=>{if(d)return E.event_id===Number(d);if(l){const p=t.find(m=>m.id===E.event_id);return(p==null?void 0:p.season_id)===Number(l)}return!0}).sort((E,p)=>{var j,D;const m=((j=et(E.scheduled_at))==null?void 0:j.getTime())??Number.POSITIVE_INFINITY,v=((D=et(p.scheduled_at))==null?void 0:D.getTime())??Number.POSITIVE_INFINITY;return m===v?E.name.localeCompare(p.name):m-v}),[a,d,l,t]);return r.jsxs("section",{className:"stack",children:[r.jsxs("header",{className:"page-header",children:[r.jsx("div",{children:r.jsx("h2",{children:"Other logistics"})}),r.jsxs("div",{className:"card-actions",style:{gap:"0.5rem"},children:[r.jsx(nt,{className:"ghost",to:"/logistics",style:{fontWeight:700,fontSize:"1.05rem"},children:"Back to logistics"}),r.jsx(nt,{className:"primary button-link",to:"/logistics/others/new",children:"Create entry"})]})]}),r.jsx("article",{className:"card",children:r.jsxs("div",{className:"form-grid",style:{gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",alignItems:"end",gap:"0.75rem"},children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Season"}),r.jsxs("select",{value:l,onChange:E=>{u(E.target.value),x("")},style:{width:"100%",minWidth:"140px",maxWidth:"180px"},children:[r.jsx("option",{value:"",children:"All seasons"}),e.map(E=>r.jsx("option",{value:E.id,children:E.name},E.id))]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Event"}),r.jsxs("select",{value:d,onChange:E=>x(E.target.value),style:{width:"100%",minWidth:"160px"},children:[r.jsx("option",{value:"",children:"All events"}),y.map(E=>r.jsx("option",{value:E.id,children:E.name},E.id))]})]})]})}),r.jsxs("article",{className:"card",children:[r.jsxs("header",{className:"card-header",children:[r.jsx("div",{children:r.jsx("h3",{children:"Other logistics"})}),r.jsxs("span",{className:"badge neutral",children:[S.length," ",S.length===1?"entry":"entries"]})]}),_?r.jsx("p",{className:"muted",children:"Loading"}):b?r.jsx("p",{className:"error-text",children:b}):S.length===0?r.jsx("p",{className:"muted",children:"No entries match the selected filters."}):r.jsx("ul",{className:"status-list",style:{maxHeight:"24rem",overflowY:"auto"},children:S.map(E=>{var p;return r.jsx("li",{style:{width:"100%"},children:r.jsxs(nt,{to:`/logistics/others/${E.id}`,className:"card-link",style:{display:"flex",flexDirection:"column",gap:"0.25rem",width:"100%"},children:[r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto",alignItems:"center",gap:"0.75rem"},children:[r.jsx("strong",{children:E.name}),r.jsx("span",{className:"badge",style:{backgroundColor:"#2b8a3e",color:"#fff",justifySelf:"center"},children:E.event_id?((p=t.find(m=>m.id===E.event_id))==null?void 0:p.name)||`Event #${E.event_id}`:"Unassigned"})]}),r.jsx("div",{className:"muted",children:E.scheduled_at?B0(E.scheduled_at):"No date set"}),E.notes&&r.jsxs("div",{className:"muted",children:["Notes: ",E.notes]})]})},E.id)})})]})]})},Y0=()=>{const e=yt(),[n,t]=o.useState([]),[s,a]=o.useState({event_id:"",name:"",coordinates:"",scheduled_at:"",description:"",notes:""}),[i,l]=o.useState(!0),[u,d]=o.useState(null),[x,_]=o.useState(!1),[C,b]=o.useState(null);o.useEffect(()=>{let y=!1;return(async()=>{l(!0),d(null);try{const E=await Ut();if(y)return;t(Array.isArray(E)?E:[])}catch(E){y||d(E instanceof Error?E.message:"Failed to load events")}finally{y||l(!1)}})(),()=>{y=!0}},[]);const F=async y=>{if(y.preventDefault(),!(!s.name.trim()||!s.event_id)){_(!0),b(null);try{await od({name:s.name.trim(),coordinates:s.coordinates.trim()||void 0,scheduled_at:s.scheduled_at||void 0,description:s.description.trim()||void 0,notes:s.notes.trim()||void 0,event_id:Number(s.event_id)}),e("/logistics/others")}catch(S){b(S instanceof Error?S.message:"Failed to create entry")}finally{_(!1)}}};return i?r.jsx("p",{className:"muted",children:"Loading"}):u?r.jsx("p",{className:"error-text",children:u}):r.jsxs("section",{className:"stack",children:[r.jsxs("header",{className:"page-header",children:[r.jsx("div",{children:r.jsx("h2",{children:"Create other logistics entry"})}),r.jsx("div",{className:"card-actions",children:r.jsx("button",{className:"ghost",type:"button",onClick:()=>e(-1),style:{fontWeight:700,fontSize:"1.05rem"},children:"Back"})})]}),r.jsx("article",{className:"card",children:r.jsxs("form",{className:"form-grid",onSubmit:F,children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Event"}),r.jsxs("select",{value:s.event_id,onChange:y=>a(S=>({...S,event_id:y.target.value})),required:!0,children:[r.jsx("option",{value:"",children:"Select event"}),n.map(y=>r.jsx("option",{value:y.id,children:y.name},y.id))]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Name"}),r.jsx("input",{type:"text",value:s.name,onChange:y=>a(S=>({...S,name:y.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Coordinates"}),r.jsx("input",{type:"text",value:s.coordinates,onChange:y=>a(S=>({...S,coordinates:y.target.value})),placeholder:"DMS coordinates (optional)"})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Scheduled at"}),r.jsx($t,{value:Ge(s.scheduled_at),options:{enableTime:!0,dateFormat:"Y-m-d H:i",time_24hr:!0},onChange:y=>{const S=y[0];a(E=>({...E,scheduled_at:S?Bt(S):""}))}})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Description"}),r.jsx("textarea",{value:s.description,onChange:y=>a(S=>({...S,description:y.target.value}))})]}),r.jsxs("label",{className:"form-field",style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Notes"}),r.jsx("input",{type:"text",value:s.notes,onChange:y=>a(S=>({...S,notes:y.target.value}))})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"submit",className:"primary",disabled:x,children:x?"Creating":"Create entry"}),C&&r.jsx("span",{className:"muted",children:C})]})]})})]})},ao=e=>!!e&&e.trim().length>0,q0=()=>{const{otherId:e}=Ln(),n=yt(),[t,s]=o.useState([]),[a,i]=o.useState({event_id:"",name:"",coordinates:"",scheduled_at:"",description:"",notes:""}),[l,u]=o.useState(!0),[d,x]=o.useState(!1),[_,C]=o.useState(!1),[b,F]=o.useState(null),[y,S]=o.useState(!1),E=`primary ${y?"saved":""}`,p=d?"Saving":y?"Saved":"Save",m=!a.coordinates.trim(),v=!a.name.trim(),j=ao(a.name)&&ao(a.coordinates)&&ao(a.scheduled_at);o.useEffect(()=>{let J=!1;return(async()=>{if(e){u(!0),F(null);try{const[R,ae]=await Promise.all([oh(Number(e)),Ut()]);if(J)return;s(Array.isArray(ae)?ae:[]),i({event_id:R.event_id?String(R.event_id):"",name:R.name,coordinates:R.coordinates||"",scheduled_at:R.scheduled_at||"",description:R.description||"",notes:R.notes||""})}catch(R){J||F(R instanceof Error?R.message:"Failed to load entry")}finally{J||u(!1)}}})(),()=>{J=!0}},[e]);const D=()=>({name:a.name.trim(),coordinates:a.coordinates.trim()||void 0,scheduled_at:a.scheduled_at||void 0,description:a.description.trim()||void 0,notes:a.notes.trim()||void 0,event_id:Number(a.event_id)}),k=async J=>{if(J.preventDefault(),!(!e||!a.event_id)){x(!0),F(null),S(!1);try{await ch(Number(e),D()),F("Entry updated"),S(!0)}catch(se){F(se instanceof Error?se.message:"Failed to update entry"),S(!1)}finally{x(!1)}}},I=async()=>{if(!a.event_id){F("Select an event before copying.");return}C(!0),F(null);try{const J=D(),se=await od({...J,name:J.name?`${J.name} (copy)`:"Other (copy)"});n(`/logistics/others/${se.id}`)}catch(J){F(J instanceof Error?J.message:"Failed to copy entry")}finally{C(!1)}},T=async()=>{if(!(!e||!a.event_id)&&window.confirm("Delete this entry?"))try{await m0(Number(e)),n(-1)}catch(J){F(J instanceof Error?J.message:"Failed to delete entry")}};return l?r.jsx("p",{className:"muted",children:"Loading"}):r.jsxs("section",{className:"stack",children:[r.jsxs("header",{className:"page-header",children:[r.jsx("div",{children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flexWrap:"wrap"},children:[r.jsx("h2",{style:{margin:0},children:"Other logistics"}),r.jsx("span",{className:`badge ${j?"success":"danger"}`,"aria-label":j?"Complete":"Missing info",title:j?"Complete":"Missing info",style:{minWidth:"2.4ch",textAlign:"center"},children:j?"":"!"})]})}),r.jsxs("div",{className:"card-actions",children:[r.jsx("button",{className:"ghost",type:"button",onClick:I,disabled:_||d,children:_?"Copying":"Make a copy"}),r.jsx("button",{className:"ghost danger",type:"button",onClick:T,children:"Delete"}),r.jsx("button",{className:"ghost",type:"button",onClick:()=>n(-1),style:{fontWeight:700,fontSize:"1.05rem"},children:"Back"})]})]}),r.jsx("article",{className:"card",children:r.jsxs("form",{className:"form-grid",onSubmit:k,children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Event"}),r.jsxs("select",{value:a.event_id,onChange:J=>i(se=>({...se,event_id:J.target.value})),required:!0,children:[r.jsx("option",{value:"",children:"Select event"}),t.map(J=>r.jsx("option",{value:J.id,children:J.name},J.id))]})]}),r.jsxs("label",{className:`form-field ${v?"field-missing":""}`,children:[r.jsx("span",{children:"Name"}),r.jsx("input",{type:"text",value:a.name,onChange:J=>i(se=>({...se,name:J.target.value})),required:!0})]}),r.jsxs("label",{className:`form-field ${m?"field-missing":""}`,children:[r.jsx("span",{children:"Coordinates"}),r.jsxs("div",{className:"input-with-button",children:[r.jsx("input",{type:"text",value:a.coordinates,onChange:J=>i(se=>({...se,coordinates:J.target.value}))}),r.jsx("button",{type:"button",className:"ghost",disabled:!a.coordinates.trim(),onClick:()=>{const J=a.coordinates.trim();J&&window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(J)}`,"_blank")},children:"Open in Maps"})]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Scheduled at"}),r.jsx($t,{value:Ge(a.scheduled_at),options:{enableTime:!0,dateFormat:"Y-m-d H:i",time_24hr:!0},onChange:J=>{const se=J[0];i(R=>({...R,scheduled_at:se?Bt(se):""}))}})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Description"}),r.jsx("textarea",{value:a.description,onChange:J=>i(se=>({...se,description:J.target.value}))})]}),r.jsxs("label",{className:"form-field",style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Notes"}),r.jsx("input",{type:"text",value:a.notes,onChange:J=>i(se=>({...se,notes:J.target.value}))})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"submit",className:E,disabled:d,children:p}),b&&r.jsx("span",{className:"muted",children:b})]})]})})]})},jt=e=>!!e&&e.trim().length>0,rf=(e,n)=>{const t=!Array.isArray(e)||e.length===0?"No vehicles":e.map((s,a)=>jt(s.name)?s.name:`Vehicle ${a+1}`).join(", ");return jt(n)?`${t} (${n})`:t},G0=e=>Bn(e.toISOString(),{weekday:"short",month:"short",day:"numeric",year:"numeric"}),vr=e=>id(e),Qn=e=>{if(!e)return"Unscheduled";const n=id(e);if(!n)return"Unscheduled";const t=s=>String(s).padStart(2,"0");return`${t(n.hour)}:${t(n.minute)}`},io=e=>{if(!e)return"";const n=id(e);if(!n)return"";const t=a=>String(a).padStart(2,"0"),s=Bn(e,{year:"numeric",month:"short",day:"numeric"});return s?`${s}, ${t(n.hour)}:${t(n.minute)}`:""},Rt=e=>zx(e),Q0=e=>{const n=[],t=et(e.starts_at),s=et(e.ends_at);if(!t)return n;const a=new Date(t),i=s&&!Number.isNaN(s.getTime())?s:t;for(;a.getTime()<=i.getTime();)n.push(new Date(a)),a.setUTCDate(a.getUTCDate()+1);return n},Js=(e,n)=>{const t=Math.floor(n/60),s=n%60;return new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),t,s,0)).toISOString()},J0=()=>{var Et;const{eventId:e}=Ln(),n=yt(),t=Zt(),[s,a]=o.useState(null),[i,l]=o.useState([]),[u,d]=o.useState([]),[x,_]=o.useState([]),[C,b]=o.useState([]),[F,y]=o.useState([]),[S,E]=o.useState([]),[p,m]=o.useState(!0),[v,j]=o.useState(null),[D,k]=o.useState(null),[I,T]=o.useState(!1),[J,se]=o.useState(!1),[R,ae]=o.useState(null),[de,Ne]=o.useState(null),[me,he]=o.useState(null),[we,ue]=o.useState(!1),[ge,fe]=o.useState(!1),K=o.useRef(null),ee=o.useRef(null),ne=o.useRef(null),oe=o.useRef(null),pe=o.useRef(!1),Ie=O=>{if(!O)return null;const Y=O.getBoundingClientRect();return{top:Y.top,right:Y.right,bottom:Y.bottom,left:Y.left,width:Y.width,height:Y.height}},[je,Re]=o.useState(null),Pe=o.useRef(null),[Qe,Ye]=o.useState(null),Je=o.useRef(null),[G,M]=o.useState(null),$=o.useMemo(()=>{if(G)return{width:"min(720px, 92vw)",maxHeight:"85vh",overflowY:"auto",boxShadow:"0 18px 48px rgba(0,0,0,0.4), 0 0 0 1px var(--modal-border)",cursor:"pointer",backgroundColor:"var(--modal-surface)",border:"1px solid var(--modal-border)",color:"var(--text-strong)"}},[G]);o.useEffect(()=>{if(typeof document>"u")return;const O=!!G||!!je;return O?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{O&&(document.body.style.overflow="")}},[G,je]);const[W,Z]=o.useState([]),Ee=O=>O.replace(/^#\s*\d+\s*/,"").trim(),ze=O=>Ee(O||"").toLowerCase(),re=(O,Y,Q,q)=>{const _e=O.getBoundingClientRect(),Ce=document.createElement("div");Ce.style.position="fixed",Ce.style.left=`${(Q??0)+12}px`,Ce.style.top=`${(q??0)+12}px`,Ce.style.padding="0.35rem 0.5rem",Ce.style.border="2px dashed #3b82f6",Ce.style.borderRadius="14px",Ce.style.background="#fff",Ce.style.boxShadow="0 10px 25px rgba(0,0,0,0.12)",Ce.style.pointerEvents="none",Ce.style.zIndex="9999",Ce.style.width=`${_e.width}px`,Ce.style.boxSizing="border-box";const P=O.cloneNode(!0);P.style.pointerEvents="none",P.style.width="100%";const Se=P.querySelector('[data-ghost-time="time"]');return Se&&(Se.textContent=Y&&Y!=="Unscheduled"?Y:""),Ce.appendChild(P),ee.current=Ce,ne.current=Se,document.body.appendChild(Ce),Ce},lt=(O,Y)=>{const Q=ne.current,q=ee.current;q&&(Q&&(Q.textContent=O&&O!=="Unscheduled"?O:""),Y&&(q.style.left=`${Y.x+12}px`,q.style.top=`${Y.y+12}px`))},vt=()=>{ee.current&&(document.body.removeChild(ee.current),ee.current=null,ne.current=null),oe.current&&(oe.current.remove(),oe.current=null)},[Nt,Lt]=o.useState({Innhopp:!0,Transport:!0,"Ground Crew":!0,Accommodation:!0,Other:!0,Meal:!0}),[X,ce]=o.useState({}),ve=o.useCallback(O=>{var P;const Y=ze(O);if(!Y)return null;const Q=(P=s==null?void 0:s.innhopps)==null?void 0:P.find(Se=>ze(Se.name)===Y);if(Q!=null&&Q.coordinates)return Q.coordinates;const q=x.find(Se=>ze(Se.name)===Y);if(q!=null&&q.coordinates)return q.coordinates;const _e=C.find(Se=>ze(Se.name)===Y);if(_e!=null&&_e.coordinates)return _e.coordinates;const Ce=W.find(Se=>ze(Se.name)===Y);return Ce!=null&&Ce.coordinates?Ce.coordinates:null},[x,W,s==null?void 0:s.innhopps,C]),We=o.useMemo(()=>{const O=[];return i.forEach(Y=>{const Q=ve(Y.pickup_location)||Ee(Y.pickup_location||""),q=ve(Y.destination)||Ee(Y.destination||"");jt(Q)&&jt(q)&&O.push({entryId:`t-${Y.id}`,origin:Q,destination:q})}),u.forEach(Y=>{const Q=ve(Y.pickup_location)||Ee(Y.pickup_location||""),q=ve(Y.destination)||Ee(Y.destination||"");jt(Q)&&jt(q)&&O.push({entryId:`gc-${Y.id}`,origin:Q,destination:q})}),O},[u,ve,i]);o.useEffect(()=>((async()=>{if(We.length===0){ce({});return}const Y={};We.forEach(Q=>{Y[Q.entryId]="Duration unavailable"});{ce(Y);return}})(),()=>{}),[We]),o.useEffect(()=>{let O=!1;return(async()=>{if(e){m(!0),j(null);try{const[Q,q,_e,Ce,P,Se,Ze,Ae]=await Promise.all([es(Number(e)),Pa(),Ma(),mr(Number(e)),ts(),Kn(),Yn(),$r()]);if(O)return;a(Q),l(Array.isArray(q)?q.filter(ke=>ke.event_id===Number(e)):[]),d(Array.isArray(_e)?_e.filter(ke=>ke.event_id===Number(e)):[]),_(Array.isArray(Ce)?Ce:[]),E(Array.isArray(P)?P:[]),b(Array.isArray(Se)?Se.filter(ke=>ke.event_id===Number(e)):[]),y(Array.isArray(Ze)?Ze.filter(ke=>ke.event_id===Number(e)):[]),Z(Array.isArray(Ae)?Ae:[])}catch(Q){O||j(Q instanceof Error?Q.message:"Failed to load schedule")}finally{O||m(!1)}}})(),()=>{O=!0}},[e]);const ot=o.useCallback(async O=>{if(!e)return;const Y=O==null?void 0:O.preserveLoading;Y||m(!0),k(null);try{const[Q,q,_e,Ce,P,Se,Ze,Ae]=await Promise.all([es(Number(e)),Pa(),Ma(),mr(Number(e)),ts(),Kn(),Yn(),$r()]);a(Q),l(Array.isArray(q)?q.filter(ke=>ke.event_id===Number(e)):[]),d(Array.isArray(_e)?_e.filter(ke=>ke.event_id===Number(e)):[]),_(Array.isArray(Ce)?Ce:[]),E(Array.isArray(P)?P:[]),b(Array.isArray(Se)?Se.filter(ke=>ke.event_id===Number(e)):[]),y(Array.isArray(Ze)?Ze.filter(ke=>ke.event_id===Number(e)):[]),Z(Array.isArray(Ae)?Ae:[])}catch(Q){j(Q instanceof Error?Q.message:"Failed to load schedule")}finally{Y||m(!1)}},[e]),Xe=o.useMemo(()=>{if(!s)return[];const O=Q0(s),Y=Array.isArray(s.innhopps)?s.innhopps:[],Q=new Set;O.forEach(Ae=>Q.add(Rt(Ae.toISOString()))),i.forEach(Ae=>{const ke=Rt(Ae.scheduled_at||void 0);ke&&Q.add(ke)}),u.forEach(Ae=>{const ke=Rt(Ae.scheduled_at||void 0);ke&&Q.add(ke)}),F.forEach(Ae=>{const ke=Rt(Ae.scheduled_at||void 0);ke&&Q.add(ke)}),x.forEach(Ae=>{const ke=Rt(Ae.check_in_at||void 0),Ue=Rt(Ae.check_out_at||void 0);ke&&Q.add(ke),Ue&&Q.add(Ue)}),C.forEach(Ae=>{const ke=Rt(Ae.scheduled_at||void 0);ke&&Q.add(ke)});const _e=Array.from(Q).filter(Boolean).sort().map(Ae=>{const[ke,Ue,He]=Ae.split("-").map(Number);return{key:Ae,date:new Date(Date.UTC(ke,Ue-1,He))}}).map(({key:Ae,date:ke})=>{const Ue=Y.filter(ht=>Rt(ht.scheduled_at||void 0)===Ae),He=i.filter(ht=>Rt(ht.scheduled_at||void 0)===Ae),it=u.filter(ht=>Rt(ht.scheduled_at||void 0)===Ae),ut=x.filter(ht=>Rt(ht.check_in_at||void 0)===Ae||Rt(ht.check_out_at||void 0)===Ae),dt=C.filter(ht=>Rt(ht.scheduled_at||void 0)===Ae),xt=F.filter(ht=>Rt(ht.scheduled_at||void 0)===Ae);return{date:ke,label:Ae==="unscheduled"?"Unscheduled":G0(ke),key:Ae,innhopps:Ue,transports:He,groundCrews:it,accommodations:ut,others:dt,meals:xt}}),Ce=i.filter(Ae=>!Ae.scheduled_at||Rt(Ae.scheduled_at)===""),P=u.filter(Ae=>!Ae.scheduled_at||Rt(Ae.scheduled_at)===""),Se=C.filter(Ae=>!Ae.scheduled_at||Rt(Ae.scheduled_at)===""),Ze=F.filter(Ae=>!Ae.scheduled_at||Rt(Ae.scheduled_at)==="");return(Ce.length>0||P.length>0||Se.length>0||Ze.length>0)&&!Q.has("unscheduled")&&_e.push({date:new Date,label:"Unscheduled",key:"unscheduled",innhopps:[],transports:Ce,groundCrews:P,accommodations:[],others:Se,meals:Ze}),_e},[s,i,u,x,C,F]),Ct=async()=>{if(e&&window.confirm("Delete this event?")){T(!0),k(null);try{await Lp(Number(e)),n("/events")}catch(O){k(O instanceof Error?O.message:"Failed to delete event")}finally{T(!1)}}},pt=async()=>{if(!(!e||J)){se(!0),k(null);try{const O=await $p(Number(e));n(`/events/${O.id}`)}catch(O){k(O instanceof Error?O.message:"Failed to copy event")}finally{se(!1)}}},[wt,en]=o.useState({}),rt=o.useRef(wt),f=o.useRef(Nt),w=o.useRef(!1),[z,V]=o.useState(null),Fe=o.useRef(!1),Le=o.useRef(null);o.useEffect(()=>{rt.current=wt},[wt]),o.useEffect(()=>{f.current=Nt},[Nt]),o.useEffect(()=>{if(!e||!w.current)return;const O=`event-schedule-state:${e}`;try{const Y=sessionStorage.getItem(O);let Q={};if(Y)try{Q=JSON.parse(Y)||{}}catch{Q={}}sessionStorage.setItem(O,JSON.stringify({...Q,expandedDays:rt.current,typeFilters:f.current}))}catch{}},[e,wt,Nt]),o.useEffect(()=>{if(me!==null||!z)return;const O=setTimeout(()=>V(null),1800);return()=>clearTimeout(O)},[z,me]),o.useEffect(()=>{var q,_e;if(!e||w.current)return;const O=`event-schedule-state:${e}`,Y=sessionStorage.getItem(O),Q=!!((q=t.state)!=null&&q.suppressHighlight);if(Q){pe.current=!0;const Ce={...t.state};delete Ce.suppressHighlight,n(".",{replace:!0,state:Object.keys(Ce).length?Ce:null})}if(Y&&!Q)try{const Ce=JSON.parse(Y);Ce!=null&&Ce.expandedDays&&en(P=>({...P,...Ce.expandedDays})),Ce!=null&&Ce.typeFilters&&Lt(P=>({...P,...Ce.typeFilters})),typeof(Ce==null?void 0:Ce.scrollY)=="number"&&setTimeout(()=>window.scrollTo(0,Ce.scrollY),0)}catch{}if(Q)setTimeout(()=>window.scrollTo(0,0),0);else{const Ce=sessionStorage.getItem(`event-schedule-highlight:${e}`);Ce&&(V(Ce),sessionStorage.removeItem(`event-schedule-highlight:${e}`));const P=(_e=t.state)==null?void 0:_e.highlightId;P&&V(P)}w.current=!0},[e,t.state]),o.useEffect(()=>{if(!e)return;const O=`event-schedule-state:${e}`;return()=>{try{sessionStorage.setItem(O,JSON.stringify({expandedDays:rt.current,typeFilters:f.current,scrollY:window.scrollY}))}catch{}}},[e]),o.useEffect(()=>{if(Xe.length===0)return;if(Fe.current){Fe.current=!1;return}if(z){setTimeout(()=>{const Q=document.getElementById(`entry-${z}`);Q==null||Q.scrollIntoView({behavior:"smooth",block:"center"})},0);return}if((s==null?void 0:s.status)!=="live")return;const O=new Date,Y=Xe.reduce((Q,q)=>{const _e=Math.abs(q.date.getTime()-O.getTime());return Q?_e<Q.diff?{key:q.key,diff:_e}:Q:{key:q.key,diff:_e}},null);if(Y!=null&&Y.key){const Q=document.getElementById(`event-day-${Y.key}`);Q==null||Q.scrollIntoView({behavior:"smooth",block:"start"})}},[Xe,s==null?void 0:s.status,z]);const A={Innhopp:{backgroundColor:"#2b8a3e",color:"#fff",textShadow:"-1px -1px 0 rgba(0,0,0,0.45), 1px -1px 0 rgba(0,0,0,0.45), -1px 1px 0 rgba(0,0,0,0.45), 1px 1px 0 rgba(0,0,0,0.45)"},Transport:{backgroundColor:"#e6b84a",color:"#fff",textShadow:"-1px -1px 0 rgba(0,0,0,0.45), 1px -1px 0 rgba(0,0,0,0.45), -1px 1px 0 rgba(0,0,0,0.45), 1px 1px 0 rgba(0,0,0,0.45)"},"Ground Crew":{backgroundColor:"#f6dea0",color:"#fff",textShadow:"-1px -1px 0 rgba(0,0,0,0.45), 1px -1px 0 rgba(0,0,0,0.45), -1px 1px 0 rgba(0,0,0,0.45), 1px 1px 0 rgba(0,0,0,0.45)"},Accommodation:{backgroundColor:"#0d6efd",color:"#fff",textShadow:"-1px -1px 0 rgba(0,0,0,0.45), 1px -1px 0 rgba(0,0,0,0.45), -1px 1px 0 rgba(0,0,0,0.45), 1px 1px 0 rgba(0,0,0,0.45)"},Meal:{backgroundColor:"#d97706",color:"#fff",textShadow:"-1px -1px 0 rgba(0,0,0,0.45), 1px -1px 0 rgba(0,0,0,0.45), -1px 1px 0 rgba(0,0,0,0.45), 1px 1px 0 rgba(0,0,0,0.45)"},Other:{backgroundColor:"#7e22ce",color:"#fff",textShadow:"-1px -1px 0 rgba(0,0,0,0.45), 1px -1px 0 rgba(0,0,0,0.45), -1px 1px 0 rgba(0,0,0,0.45), 1px 1px 0 rgba(0,0,0,0.45)"}},H=(O,Y,Q,q)=>{if(Q==="unscheduled")return null;const _e=q?Y.filter(Ue=>Ue.id!==q):Y.slice();if(_e.length===0)return 8*60;const Ce=Math.max(0,Math.min(O,_e.length)),P=_e[Ce-1],Se=_e[Ce],Ze=P&&P.sortValue!==Number.POSITIVE_INFINITY?P.sortValue:null,Ae=Se&&Se.sortValue!==Number.POSITIVE_INFINITY?Se.sortValue:null;let ke=9*60;return Ze!==null&&Ae!==null?ke=Math.floor((Ze+Ae)/2):Ze!==null?ke=Ze+15:Ae!==null&&(ke=Math.max(Ae-15,0)),ke},h=["Innhopp","Transport","Ground Crew","Accommodation","Meal","Other"],g=(O,Y)=>{const Q=(O!=null&&O.scheduledAt?Ge(O.scheduledAt):void 0)||(Y?Ge(Y.date.toISOString()):void 0)||new Date,q=vr((O==null?void 0:O.scheduledAt)||void 0);if(q)Q.setHours(q.hour,q.minute,0,0);else{const _e=new Date;Q.setHours(_e.getHours(),_e.getMinutes(),0,0)}return Q},L=O=>Bt(O),U=o.useCallback((O,Y)=>{if(O.type==="Innhopp")a(Q=>Q&&{...Q,innhopps:Array.isArray(Q.innhopps)?Q.innhopps.map(q=>q.id===Number(O.id.split("-").pop())?{...q,scheduled_at:Y||null}:q):Q.innhopps});else if(O.type==="Transport")l(Q=>Array.isArray(Q)?Q.map(q=>q.id===Number(O.id.split("-").pop())?{...q,scheduled_at:Y??void 0}:q):Q);else if(O.type==="Ground Crew")d(Q=>Array.isArray(Q)?Q.map(q=>q.id===Number(O.id.split("-").pop())?{...q,scheduled_at:Y??void 0}:q):Q);else if(O.type==="Other")b(Q=>Array.isArray(Q)?Q.map(q=>q.id===Number(O.id.split("-").pop())?{...q,scheduled_at:Y||null}:q):Q);else if(O.type==="Meal")y(Q=>Array.isArray(Q)?Q.map(q=>q.id===Number(O.id.split("-").pop())?{...q,scheduled_at:Y||null}:q):Q);else if(O.type==="Accommodation"){const Q=Number(O.id.split("-").pop());_(q=>Array.isArray(q)?q.map(_e=>_e.id!==Q?_e:O.id.startsWith("acc-in-")?{..._e,check_in_at:Y||null}:O.id.startsWith("acc-out-")?{..._e,check_out_at:Y||null}:{..._e,check_in_at:Y||null}):q)}},[]);o.useEffect(()=>{var Y,Q;const O=(Y=Pe.current)==null?void 0:Y.flatpickr;O&&(je?(O.setDate(g(je.entry,je.day),!1),Ye(((Q=O.selectedDates)==null?void 0:Q[0])??null),je.anchor&&O.set("positionElement",je.anchor),O.open()):(O.close(),Ye(null)))},[je]),o.useEffect(()=>{if(!we)return;const O=Q=>{const q=Q.target;!K.current||!q||K.current.contains(q)||ue(!1)},Y=Q=>{Q.key==="Escape"&&ue(!1)};return document.addEventListener("mousedown",O),document.addEventListener("touchstart",O),window.addEventListener("keydown",Y),()=>{document.removeEventListener("mousedown",O),document.removeEventListener("touchstart",O),window.removeEventListener("keydown",Y)}},[we]),o.useEffect(()=>{if(Xe.length===0)return;const O=new Date;O.setHours(0,0,0,0),en(Y=>{const Q={...Y};return Xe.forEach(q=>{if(pe.current){Q[q.key]=!0;return}if(typeof Q[q.key]=="boolean")return;const _e=q.date<O;Q[q.key]=!_e}),Q}),pe.current&&(pe.current=!1)},[Xe]);const le=o.useCallback(async(O,Y)=>{try{fe(!0);const Q=Number(O.id.split("-").pop());if(O.type==="Innhopp"){const q=await Wp(Q),_e={sequence:q.sequence,name:q.name,coordinates:q.coordinates||void 0,elevation:q.elevation??void 0,takeoff_airfield_id:q.takeoff_airfield_id??void 0,scheduled_at:Y||void 0,notes:q.notes||void 0,reason_for_choice:q.reason_for_choice||void 0,adjust_altimeter_aad:q.adjust_altimeter_aad||void 0,notam:q.notam||void 0,distance_by_air:q.distance_by_air??void 0,distance_by_road:q.distance_by_road??void 0,primary_landing_area:q.primary_landing_area,secondary_landing_area:q.secondary_landing_area,risk_assessment:q.risk_assessment||void 0,safety_precautions:q.safety_precautions||void 0,jumprun:q.jumprun||void 0,hospital:q.hospital||void 0,rescue_boat:q.rescue_boat??void 0,minimum_requirements:q.minimum_requirements||void 0,land_owners:q.land_owners||[],land_owner_permission:q.land_owner_permission??void 0};await Ci(Q,_e)}else if(O.type==="Transport"){const q=await nh(Q),_e=Array.isArray(q.vehicles)?q.vehicles.map(Ce=>Ce.event_vehicle_id||Ce.id).filter(Ce=>typeof Ce=="number"):[];await sh(Q,{pickup_location:q.pickup_location,destination:q.destination,passenger_count:q.passenger_count,scheduled_at:Y||void 0,notes:q.notes||void 0,event_id:Number(q.event_id),vehicle_ids:_e.length>0?_e:void 0})}else if(O.type==="Ground Crew"){const q=await ah(Q),_e=Array.isArray(q.vehicles)?q.vehicles.map(Ce=>Ce.event_vehicle_id||Ce.id).filter(Ce=>typeof Ce=="number"):[];await lh(Q,{pickup_location:q.pickup_location,destination:q.destination,passenger_count:q.passenger_count,scheduled_at:Y||void 0,notes:q.notes||void 0,event_id:Number(q.event_id),vehicle_ids:_e.length>0?_e:void 0})}else if(O.type==="Other"){const q=await oh(Q);await ch(Q,{name:q.name,coordinates:q.coordinates||void 0,scheduled_at:Y||void 0,description:q.description||void 0,notes:q.notes||void 0,event_id:Number(q.event_id)})}else if(O.type==="Meal"){const q=await dh(Q);await uh(Q,{name:q.name,location:q.location||void 0,scheduled_at:Y||void 0,notes:q.notes||void 0,event_id:Number(q.event_id)})}else if(O.type==="Accommodation"&&e){const q=await zp(Number(e),Q),_e={name:q.name,capacity:q.capacity,coordinates:q.coordinates||void 0,booked:q.booked??void 0,notes:q.notes||void 0,check_in_at:q.check_in_at||void 0,check_out_at:q.check_out_at||void 0};O.id.startsWith("acc-in-")?_e.check_in_at=Y||void 0:O.id.startsWith("acc-out-")?_e.check_out_at=Y||void 0:_e.check_in_at=Y||void 0,await Up(Number(e),Q,_e)}}finally{fe(!1)}},[e]),be=o.useCallback(()=>{var _e,Ce,P,Se,Ze,Ae;const O=(_e=Pe.current)==null?void 0:_e.flatpickr,Y=((Ce=O==null?void 0:O.selectedDates)==null?void 0:Ce[0])||Qe,Q=Y&&!Number.isNaN(Y.getTime())?new Date(Y.getTime()):je!=null&&je.entry.scheduledAt?Ge(je.entry.scheduledAt)||new Date:je!=null&&je.day?Ge(je.day.date.toISOString())||new Date:new Date;if(O){const ke=(P=O.hourElement)==null?void 0:P.value,Ue=(Se=O.minuteElement)==null?void 0:Se.value,He=ke!==void 0?Number(ke):NaN,it=Ue!==void 0?Number(Ue):NaN;!Number.isNaN(He)&&!Number.isNaN(it)&&Q.setHours(He,it,0,0)}const q=(Ae=(Ze=O==null?void 0:O.input)==null?void 0:Ze.value)==null?void 0:Ae.trim();if(O&&q){const ke=O.parseDate(q,"Y-m-d H:i")||Ge(q);if(!Number.isNaN(ke==null?void 0:ke.getTime()))return ke}return Q},[Qe,je]),Be=o.useCallback(async()=>{var Ce;if(!je)return;const O=(Ce=Pe.current)==null?void 0:Ce.flatpickr;if(O!=null&&O.input){const P=O.parseDate(O.input.value,"Y-m-d H:i");P&&!Number.isNaN(P.getTime())&&O.setDate(P,!1,"Y-m-d H:i"),O.input.blur()}const Y=be();if(!Y)return;const Q=L(Y),q=Rt(Q),_e=q&&q!==je.day.key;Fe.current=!0,Le.current=_e?null:window.scrollY;try{await le(je.entry,Q),U(je.entry,Q),V(je.entry.id)}catch(P){k(P instanceof Error?P.message:"Failed to update schedule")}finally{Re(null),Ye(null),_e&&q?setTimeout(()=>{const P=document.getElementById(`event-day-${q}`);P==null||P.scrollIntoView({behavior:"smooth",block:"start"})},0):Le.current!==null&&(window.scrollTo({top:Le.current}),Le.current=null)}},[U,be,Qe,je,le]);if(o.useEffect(()=>{const O=Y=>{if(je){if(Y.key==="Enter"){Y.preventDefault(),Y.stopPropagation();return}Y.key==="Escape"&&(Re(null),Ye(null))}};return window.addEventListener("keydown",O,!0),()=>window.removeEventListener("keydown",O,!0)},[je]),p)return r.jsx("p",{className:"muted",children:"Loading schedule"});if(v)return r.jsx("p",{className:"error-text",children:v});if(!s)return r.jsx("p",{className:"error-text",children:"Event not found."});const Te=s.slots??0,qe=Array.isArray(s.participant_ids)?s.participant_ids.reduce((O,Y)=>{const Q=S.find(Ce=>Ce.id===Y);return(Array.isArray(Q==null?void 0:Q.roles)?Q==null?void 0:Q.roles:[]).includes("Staff")?O:O+1},0):0,De=Math.max(Te-qe,0),$e=De===0,tt=s.status==="past",Pt={fontSize:"1.05rem",fontWeight:700,lineHeight:"1.2",fontFamily:"inherit"};return r.jsxs("section",{className:"stack",children:[r.jsx("header",{className:"page-header event-schedule-header",children:r.jsxs("div",{className:"event-schedule-headline",children:[r.jsxs("div",{className:"event-schedule-actions",ref:K,children:[r.jsx("button",{className:"ghost event-schedule-gear",type:"button","aria-label":we?"Close actions menu":"Open actions menu","aria-expanded":we,"aria-controls":"event-schedule-actions-menu",onClick:()=>ue(O=>!O),children:r.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:r.jsx("path",{d:"M19.14 12.94c.04-.31.06-.63.06-.94s-.02-.63-.06-.94l2.03-1.58a.5.5 0 0 0 .12-.64l-1.92-3.32a.5.5 0 0 0-.6-.22l-2.39.96a7.3 7.3 0 0 0-1.63-.94l-.36-2.54a.5.5 0 0 0-.5-.42h-3.84a.5.5 0 0 0-.5.42l-.36 2.54c-.57.22-1.12.52-1.63.94l-2.39-.96a.5.5 0 0 0-.6.22L2.7 8.84a.5.5 0 0 0 .12.64l2.03 1.58c-.04.31-.06.63-.06.94s.02.63.06.94L2.82 14.52a.5.5 0 0 0-.12.64l1.92 3.32c.13.22.39.31.6.22l2.39-.96c.5.41 1.06.73 1.63.94l.36 2.54c.04.24.25.42.5.42h3.84c.25 0 .46-.18.5-.42l.36-2.54c.57-.22 1.12-.52 1.63-.94l2.39.96c.22.09.47 0 .6-.22l1.92-3.32a.5.5 0 0 0-.12-.64l-2.03-1.58zM12 15.5a3.5 3.5 0 1 1 0-7 3.5 3.5 0 0 1 0 7z"})})}),we&&r.jsxs("div",{className:"event-schedule-menu",id:"event-schedule-actions-menu",role:"menu",children:[r.jsx("button",{className:"event-schedule-menu-item",type:"button",style:Pt,role:"menuitem",onClick:()=>{ue(!1),n(`/events/${s.id}/details`)},children:"Details"}),r.jsx("button",{className:"event-schedule-menu-item",type:"button",style:Pt,role:"menuitem",onClick:()=>{ue(!1),n(`/manifests?eventId=${s.id}`)},children:"Manifest"}),r.jsx("button",{className:"event-schedule-menu-item",type:"button",style:Pt,role:"menuitem",onClick:()=>{ue(!1),pt()},disabled:J,children:J?"Copying":"Copy"}),r.jsx("button",{className:"event-schedule-menu-item danger",type:"button",style:Pt,role:"menuitem",onClick:()=>{ue(!1),Ct()},disabled:I,children:I?"Deleting":"Delete"}),r.jsx("button",{className:"event-schedule-menu-item",type:"button",style:Pt,role:"menuitem",onClick:()=>{ue(!1),n("/events")},children:"Back"})]})]}),r.jsxs("div",{className:"event-schedule-headline-text",children:[r.jsx("div",{className:"event-schedule-title-row",children:r.jsx("h2",{style:{margin:0},children:s.name})}),r.jsx("p",{className:"event-location",children:s.location||"Location TBD"}),r.jsxs("div",{className:"event-schedule-badges",children:[r.jsx("span",{className:`badge status-${s.status}`,children:s.status}),!tt&&r.jsx("span",{className:`badge ${$e?"danger":"success"}`,children:$e?"FULL":`${De} SLOTS AVAILABLE`})]})]})]})}),D&&r.jsx("p",{className:"error-text",children:D}),r.jsxs("article",{className:"card",style:{marginBottom:"0.75rem"},children:[r.jsxs("dl",{className:"card-details event-schedule-stats",style:{margin:0,display:"grid",gridTemplateColumns:"repeat(5, minmax(0, 1fr))",columnGap:"2rem",rowGap:"1rem",textAlign:"center"},children:[r.jsxs("div",{children:[r.jsx("dt",{children:"Starts"}),r.jsx("dd",{children:s.starts_at?Bn(s.starts_at,{month:"short",day:"numeric",year:"numeric"}):"TBD"})]}),r.jsxs("div",{children:[r.jsx("dt",{children:"Ends"}),r.jsx("dd",{children:s.ends_at?Bn(s.ends_at,{month:"short",day:"numeric",year:"numeric"}):"TBD"})]}),r.jsxs("div",{children:[r.jsx("dt",{children:"Participants"}),r.jsx("dd",{children:qe})]}),r.jsxs("div",{children:[r.jsx("dt",{children:"Innhopps"}),r.jsx("dd",{children:((Et=s.innhopps)==null?void 0:Et.length)??0})]}),r.jsxs("div",{children:[r.jsx("dt",{children:"Slots"}),r.jsx("dd",{children:Te||"Not set"})]})]}),r.jsxs("div",{className:"event-schedule-filters",children:[r.jsx("strong",{children:"Show:"}),r.jsx("div",{className:"event-schedule-filter-list",children:h.map(O=>{const Y=Nt[O],Q=A[O],q=Y?Q:{backgroundColor:"#fff",color:Q.backgroundColor,border:`2px solid ${Q.backgroundColor}`};return r.jsx("button",{type:"button",onClick:()=>Lt(_e=>({..._e,[O]:!_e[O]})),style:{border:"none",background:"transparent",padding:0,cursor:"pointer"},"aria-pressed":Y,onDragLeave:_e=>{if(!R)return;const Ce=_e.currentTarget,P=_e.relatedTarget;P&&Ce.contains(P)||he(null)},children:r.jsx("span",{className:"badge",style:q,children:O.toUpperCase()})},O)})})]})]}),Xe.length===0?r.jsx("p",{className:"muted",children:"No schedule yet."}):Xe.map(O=>r.jsxs("article",{id:`event-day-${O.key}`,className:"card",style:de===O.key&&R?{border:"2px solid #3b82f6",boxShadow:"0 0 0 2px rgba(59,130,246,0.15)"}:void 0,onDragOver:Y=>{R&&(Y.preventDefault(),Ne(O.key),he(null))},onDrop:Y=>{R&&(Y.preventDefault(),he(null))},onDragLeave:Y=>{if(!R)return;const Q=Y.currentTarget,q=Y.relatedTarget;q&&Q.contains(q)||(Ne(_e=>_e===O.key?null:_e),he(null),lt(null))},children:[r.jsxs("header",{className:"card-header",style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},onClick:()=>en(Y=>({...Y,[O.key]:!(Y[O.key]??!0)})),children:[r.jsx("button",{className:"ghost",type:"button",onClick:Y=>{Y.stopPropagation(),en(Q=>({...Q,[O.key]:!(Q[O.key]??!0)}))},children:wt[O.key]===!1?"":""}),r.jsx("h3",{style:{margin:0,flex:1,textAlign:"left"},children:O.label})]}),wt[O.key]===!1?null:(()=>{const Y=[];O.innhopps.forEach(P=>{var Ae,ke,Ue,He,it;const Se=W.find(ut=>ut.id===P.takeoff_airfield_id),Ze=typeof P.elevation=="number"&&typeof(Se==null?void 0:Se.elevation)=="number"?P.elevation-Se.elevation:null;Y.push({id:`i-${P.id}`,hourKey:Qn(P.scheduled_at),sortValue:(()=>{const ut=vr(P.scheduled_at);return ut?ut.hour*60+ut.minute:Number.POSITIVE_INFINITY})(),title:`Innhopp #${P.sequence}: ${P.name}`,subtitle:"",type:"Innhopp",to:`/events/${s.id}/innhopps/${P.id}`,ready:th(P),missingCoordinates:!jt(P.coordinates),description:P.reason_for_choice||((Ae=P.primary_landing_area)==null?void 0:Ae.description)||null,notes:P.notes||void 0,innhoppReason:P.reason_for_choice||null,innhoppElevation:P.elevation??null,innhoppCoordinates:P.coordinates||null,innhoppTakeoffName:(Se==null?void 0:Se.name)||null,innhoppElevationDiff:Ze,innhoppPrimaryName:((ke=P.primary_landing_area)==null?void 0:ke.name)||null,innhoppPrimarySize:((Ue=P.primary_landing_area)==null?void 0:Ue.size)||null,innhoppSecondaryName:((He=P.secondary_landing_area)==null?void 0:He.name)||null,innhoppSecondarySize:((it=P.secondary_landing_area)==null?void 0:it.size)||null,innhoppRisk:P.risk_assessment||null,innhoppMinimumRequirements:P.minimum_requirements||null,innhoppRescueBoat:P.rescue_boat??null,innhoppLandOwnerPermission:P.land_owner_permission??null,scheduledAt:P.scheduled_at})}),O.transports.forEach(P=>{const Se=ve(P.pickup_location),Ze=ve(P.destination),Ae=Number.isFinite(P.passenger_count)&&P.passenger_count>=0,ke=Array.isArray(P.vehicles)&&P.vehicles.length>0,Ue=jt(P.pickup_location)&&jt(P.destination)&&jt(P.scheduled_at)&&Ae&&ke&&jt(Se)&&jt(Ze),He=Array.isArray(P.vehicles)?P.vehicles.map(it=>({name:it.name,driver:it.driver||"",passenger_capacity:it.passenger_capacity})):[];Y.push({id:`t-${P.id}`,hourKey:Qn(P.scheduled_at),sortValue:(()=>{const it=vr(P.scheduled_at);return it?it.hour*60+it.minute:Number.POSITIVE_INFINITY})(),title:`${Ee(P.pickup_location)}  ${Ee(P.destination)}`,subtitle:rf(He,X[`t-${P.id}`]),type:"Transport",to:`/logistics/${P.id}`,transportComplete:Ue,missingCoordinates:!Se||!Ze,transportRouteOrigin:Se||null,transportRouteDestination:Ze||null,notes:P.notes||null,vehicles:He,scheduledAt:P.scheduled_at||void 0})}),O.groundCrews.forEach(P=>{const Se=ve(P.pickup_location),Ze=ve(P.destination),Ae=Number.isFinite(P.passenger_count)&&P.passenger_count>=0,ke=Array.isArray(P.vehicles)&&P.vehicles.length>0,Ue=jt(P.pickup_location)&&jt(P.destination)&&jt(P.scheduled_at)&&Ae&&ke&&jt(Se)&&jt(Ze),He=Array.isArray(P.vehicles)?P.vehicles.map(it=>({name:it.name,driver:it.driver||"",passenger_capacity:it.passenger_capacity})):[];Y.push({id:`gc-${P.id}`,hourKey:Qn(P.scheduled_at),sortValue:(()=>{const it=vr(P.scheduled_at);return it?it.hour*60+it.minute:Number.POSITIVE_INFINITY})(),title:`${Ee(P.pickup_location)}  ${Ee(P.destination)}`,subtitle:rf(He,X[`gc-${P.id}`]),type:"Ground Crew",to:`/logistics/ground-crew/${P.id}`,transportComplete:Ue,missingCoordinates:!Se||!Ze,transportRouteOrigin:Se||null,transportRouteDestination:Ze||null,notes:P.notes||null,vehicles:He,scheduledAt:P.scheduled_at||void 0})}),O.others.forEach(P=>{Y.push({id:`o-${P.id}`,hourKey:Qn(P.scheduled_at||void 0),sortValue:(()=>{const Se=vr(P.scheduled_at||void 0);return Se?Se.hour*60+Se.minute:Number.POSITIVE_INFINITY})(),title:P.name||"Other logistics",subtitle:"",type:"Other",to:`/logistics/others/${P.id}`,missingCoordinates:!jt(P.coordinates),coordinates:P.coordinates||null,description:P.description||null,notes:P.notes||null,otherComplete:jt(P.name)&&jt(P.coordinates)&&jt(P.scheduled_at),scheduledAt:P.scheduled_at||void 0})}),O.meals.forEach(P=>{Y.push({id:`meal-${P.id}`,hourKey:Qn(P.scheduled_at||void 0),sortValue:(()=>{const Se=vr(P.scheduled_at||void 0);return Se?Se.hour*60+Se.minute:Number.POSITIVE_INFINITY})(),title:P.name,subtitle:"",type:"Meal",to:`/logistics/meals/${P.id}`,mealComplete:jt(P.name)&&jt(P.location)&&jt(P.scheduled_at),location:P.location||null,notes:P.notes||null,scheduledAt:P.scheduled_at||void 0})}),O.accommodations.forEach(P=>{P.check_in_at&&Rt(P.check_in_at)===O.key&&Y.push({id:`acc-in-${P.id}`,hourKey:Qn(P.check_in_at),sortValue:(()=>{const Se=vr(P.check_in_at);return Se?Se.hour*60+Se.minute:Number.POSITIVE_INFINITY})(),title:`Check-in: ${P.name}`,subtitle:"",type:"Accommodation",booked:!!P.booked,coordinates:P.coordinates||null,to:`/events/${e}/accommodations/${P.id}`,missingCoordinates:!jt(P.coordinates),notes:P.notes||null,scheduledAt:P.check_in_at}),P.check_out_at&&Rt(P.check_out_at)===O.key&&Y.push({id:`acc-out-${P.id}`,hourKey:Qn(P.check_out_at),sortValue:(()=>{const Se=vr(P.check_out_at);return Se?Se.hour*60+Se.minute:Number.POSITIVE_INFINITY})(),title:`Check-out: ${P.name}`,subtitle:"",type:"Accommodation",booked:!!P.booked,coordinates:P.coordinates||null,to:`/events/${e}/accommodations/${P.id}`,missingCoordinates:!jt(P.coordinates),notes:P.notes||null,scheduledAt:P.check_out_at}),!P.check_in_at&&!P.check_out_at&&Y.push({id:`acc-${P.id}`,hourKey:"Unscheduled",sortValue:Number.POSITIVE_INFINITY,title:`${P.name}`,subtitle:"",type:"Accommodation",booked:!!P.booked,coordinates:P.coordinates||null,to:`/events/${e}/accommodations/${P.id}`,missingCoordinates:!jt(P.coordinates),scheduledAt:null})});const q=Y.filter(P=>Nt[P.type]).sort((P,Se)=>P.sortValue===Se.sortValue?P.title.localeCompare(Se.title):P.sortValue-Se.sortValue),_e=async P=>{if(!R)return;const Se=q.findIndex(ut=>ut.id===R.id),Ze=ut=>ut.startsWith("i-")?"Innhopp":ut.startsWith("t-")?"Transport":ut.startsWith("gc-")?"Ground Crew":ut.startsWith("acc-")?"Accommodation":ut.startsWith("o-")?"Other":ut.startsWith("meal-")?"Meal":null;if(Se===-1){const ut=Ze(R.id);if(!ut)return;const dt=H(P,q,O.key,R==null?void 0:R.id),xt=dt!=null?Js(O.date,dt):void 0;try{await le({id:R.id,type:ut},xt),await ot({preserveLoading:!0}),V(R.id)}catch(ht){k(ht instanceof Error?ht.message:"Failed to update schedule")}finally{ae(null),Ne(null),vt()}return}const Ae=q[Se],ke=q.filter(ut=>ut.id!==R.id),Ue=Math.max(0,Math.min(P,ke.length));ke.splice(Ue,0,Ae);const He=H(Ue,ke,O.key,R==null?void 0:R.id),it=He!=null?Js(O.date,He):void 0;try{await le(Ae,it),await ot({preserveLoading:!0}),V(Ae.id)}catch(ut){k(ut instanceof Error?ut.message:"Failed to update schedule")}finally{ae(null),Ne(null),vt()}},Ce=(P,Se)=>{const Ze=A[P.type],Ae=!!P.missingCoordinates,ke={minWidth:"2.4ch",textAlign:"center",display:"inline-block"};let Ue=null;P.type==="Accommodation"?Ue=P.booked&&!Ae?r.jsx("span",{className:"badge success",style:ke,children:""}):r.jsx("span",{className:"badge danger",style:ke,children:"!"}):P.type==="Innhopp"?Ue=P.ready?r.jsx("span",{className:"badge success",style:ke,children:""}):r.jsx("span",{className:"badge danger",style:ke,children:"!"}):P.type==="Meal"?Ue=P.mealComplete?r.jsx("span",{className:"badge success",style:ke,children:""}):r.jsx("span",{className:"badge danger",style:ke,children:"!"}):P.type==="Other"?Ue=P.otherComplete?r.jsx("span",{className:"badge success",style:ke,children:""}):r.jsx("span",{className:"badge danger",style:ke,children:"!"}):P.type==="Transport"?Ue=P.transportComplete?r.jsx("span",{className:"badge success",style:ke,children:""}):r.jsx("span",{className:"badge danger",style:ke,children:"!"}):P.type==="Ground Crew"?Ue=P.transportComplete?r.jsx("span",{className:"badge success",style:ke,children:""}):r.jsx("span",{className:"badge danger",style:ke,children:"!"}):Ae&&(Ue=r.jsx("span",{className:"badge danger",style:ke,title:"Coordinates missing","aria-label":"Coordinates missing",children:"!"}));const He=r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.15rem"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",flexWrap:"wrap"},children:[r.jsx("strong",{children:P.title}),r.jsxs("div",{style:{marginLeft:"auto",display:"grid",gridTemplateColumns:"minmax(56px, 80px) minmax(130px, 190px)",alignItems:"center",justifyItems:"center",columnGap:"0.5rem"},children:[Ue||r.jsx("span",{style:{visibility:"hidden",...ke},children:"!"}),r.jsx("span",{className:"badge schedule-type-badge",style:Ze,"aria-label":P.type,children:P.type})]})]}),P.subtitle&&r.jsx("div",{className:"muted",children:P.subtitle})]}),it=dt=>{dt.preventDefault(),dt.stopPropagation(),M({entry:P,day:O})};P.id;const ut={draggable:P.type!=="Accommodation",onDragStart:dt=>{ae({id:P.id,dayKey:O.key});const xt=P.hourKey!=="Unscheduled"?P.hourKey:null,ht=dt.currentTarget.closest("li");if(re(ht||dt.currentTarget,xt,dt.clientX,dt.clientY),dt.dataTransfer){try{dt.dataTransfer.clearData()}catch{}dt.dataTransfer.setData("text/plain",P.id),dt.dataTransfer.setData("text/uri-list","");const Ft=document.createElement("div");Ft.style.width="1px",Ft.style.height="1px",Ft.style.opacity="0",Ft.style.position="fixed",Ft.style.left="-10px",Ft.style.top="-10px",document.body.appendChild(Ft),oe.current=Ft,dt.dataTransfer.setDragImage(Ft,0,0)}},onDragOver:dt=>{if(!R)return;dt.preventDefault(),me!==Se&&he(Se);const xt=H(Se,q,O.key,R==null?void 0:R.id),ht=xt!=null&&xt!==Number.POSITIVE_INFINITY?Qn(Js(O.date,xt)):null;lt(ht,{x:dt.clientX,y:dt.clientY})},onDrop:dt=>{dt.preventDefault(),_e(Se)},onDragEnd:()=>{ae(null),Ne(null),he(null),vt()},id:`entry-${P.id}`,style:{display:"block",width:"100%",flex:1,padding:"0.5rem 0.8rem",margin:"-0.25rem -1.6rem"},onClick:it};return P.to?r.jsx(nt,{to:P.to,className:"card-link",...ut,onClick:dt=>{if(it(dt),s!=null&&s.id)try{sessionStorage.setItem(`event-schedule-highlight:${s.id}`,P.id)}catch{}},children:He},P.id):r.jsx("div",{id:`entry-${P.id}`,style:{display:"block",width:"100%",flex:1,padding:"0.25rem 0.4rem"},children:He},P.id)};return q.length===0?r.jsx("p",{className:"muted",style:{padding:"0.5rem 0"},onDragOver:P=>{if(!R)return;P.preventDefault(),Ne(O.key),he(0);const Se=H(0,q,O.key,R==null?void 0:R.id),Ze=Se!=null&&Se!==Number.POSITIVE_INFINITY?Qn(Js(O.date,Se)):null;lt(Ze,{x:P.clientX,y:P.clientY})},onDrop:P=>{R&&(P.preventDefault(),_e(0))},children:"Nothing scheduled."}):r.jsx("ul",{className:"status-list schedule-list",style:{margin:0},children:q.map((P,Se)=>{const Ze=P.id===z,Ae=(je==null?void 0:je.entry.id)===P.id,ke=Ze||Ae?{boxShadow:"inset 0 0 0 2px #3b82f6",borderRadius:"8px"}:void 0;return r.jsx("li",{style:{display:"block",padding:"0.5rem 0",borderBottom:"1px solid rgba(255, 255, 255, 0.12)",width:"100%",overflow:"hidden"},onDragOver:Ue=>{if(!R)return;Ue.preventDefault(),me!==Se&&he(Se);const He=H(Se,q,O.key,R==null?void 0:R.id),it=He!=null&&He!==Number.POSITIVE_INFINITY?Qn(Js(O.date,He)):null;lt(it,{x:Ue.clientX,y:Ue.clientY})},onDrop:Ue=>{Ue.preventDefault(),_e(Se)},children:r.jsxs("div",{className:"schedule-entry",style:ke,children:[r.jsx("div",{style:{fontWeight:600},className:"muted schedule-time","data-ghost-time":"time",role:"button",tabIndex:0,onClick:Ue=>{Ue.stopPropagation(),Re({entry:P,day:O,anchor:Ue.currentTarget,anchorRect:Ie(Ue.currentTarget)})},onKeyDown:Ue=>{(Ue.key==="Enter"||Ue.key===" ")&&(Ue.preventDefault(),Ue.stopPropagation(),Re({entry:P,day:O,anchor:Ue.currentTarget,anchorRect:Ie(Ue.currentTarget)}))},title:"Edit time",children:P.hourKey}),r.jsx("div",{className:"schedule-entry-content",children:Ce(P,Se)})]})},P.id)})})})()]},O.key)),je&&typeof document<"u"?Qi.createPortal(r.jsx("div",{ref:Je,style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:9998,background:"var(--overlay-scrim-subtle)"},onClick:()=>{Re(null),Ye(null)},children:(()=>{const O=je.anchorRect||Ie(je.anchor),Y=12,Q=340,q=360,_e=typeof window<"u"?window.innerWidth:Q,Ce=typeof window<"u"?window.innerHeight:q,P=Y,Se=_e-Y,Ze=Y,Ae=Ce-Y,ke=O?O.right+12:P,Ue=O?O.top-Ze:q,He=O?Ae-O.bottom:q,it=Ue>=q||Ue>He,ut=O?it?O.top-q-12:O.bottom+12:Ze+24,dt=Math.min(Math.max(ke,P),Se-Q),xt=Math.min(Math.max(ut,Ze),Ae-q);return r.jsxs("div",{style:{position:"fixed",top:xt,left:dt,background:"var(--modal-surface)",border:"1px solid var(--modal-border)",borderRadius:"10px",boxShadow:"0 10px 25px rgba(0,0,0,0.12)",padding:"0.85rem",display:"inline-flex",flexDirection:"column",gap:"0.6rem",minWidth:"280px",maxWidth:"90vw"},onClick:ht=>ht.stopPropagation(),className:"schedule-time-picker",children:[r.jsx($t,{ref:Pe,options:{enableTime:!0,time_24hr:!0,dateFormat:"Y-m-d H:i",allowInput:!0,inline:!0,clickOpens:!1,closeOnSelect:!1},onChange:ht=>Ye(ht[0]??null),onValueUpdate:ht=>Ye(ht[0]??null)}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end"},children:[r.jsx("button",{type:"button",className:"ghost",onClick:()=>Be(),style:{padding:"0.35rem 0.9rem"},children:"Save"}),r.jsx("button",{type:"button",className:"ghost",onClick:()=>{Re(null),Ye(null)},style:{padding:"0.35rem 0.9rem"},children:"Cancel"})]})]})})()}),document.body):null,G&&typeof document<"u"&&Qi.createPortal(r.jsx("div",{onClick:()=>{M(null)},role:"button",tabIndex:-1,style:{position:"fixed",inset:0,background:"var(--overlay-scrim)",backdropFilter:"blur(6px)",zIndex:9999,pointerEvents:"auto",display:"flex",alignItems:"center",justifyContent:"center",padding:"2rem 1rem"},onKeyDown:O=>{O.key==="Escape"?M(null):O.key==="Enter"&&G.entry.to&&(n(G.entry.to),M(null))},children:r.jsxs("div",{className:"card",onClick:O=>{O.stopPropagation(),G.entry.to&&(V(G.entry.id),n(G.entry.to)),M(null)},style:$,children:[r.jsxs("div",{className:"card-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsx("h3",{style:{margin:0},children:G.entry.title}),r.jsx("div",{style:{display:"flex",gap:"0.35rem",alignItems:"center"},children:(()=>{const O=A[G.entry.type],Y={minWidth:"2.4ch",textAlign:"center",display:"inline-block"};return G.entry.type==="Transport"||G.entry.type==="Ground Crew"?r.jsxs(r.Fragment,{children:[r.jsx("span",{className:`badge ${G.entry.transportComplete?"success":"danger"}`,style:Y,children:G.entry.transportComplete?"":"!"}),r.jsx("span",{className:"badge schedule-type-badge",style:O,children:G.entry.type})]}):G.entry.type==="Accommodation"?r.jsxs(r.Fragment,{children:[r.jsx("span",{className:`badge ${G.entry.booked&&!G.entry.missingCoordinates?"success":"danger"}`,style:Y,children:G.entry.booked&&!G.entry.missingCoordinates?"":"!"}),r.jsx("span",{className:"badge schedule-type-badge",style:O,children:G.entry.type})]}):G.entry.type==="Innhopp"?r.jsxs(r.Fragment,{children:[r.jsx("span",{className:`badge ${G.entry.ready?"success":"danger"}`,style:Y,children:G.entry.ready?"":"!"}),r.jsx("span",{className:"badge schedule-type-badge",style:O,children:G.entry.type})]}):G.entry.type==="Other"?r.jsxs(r.Fragment,{children:[r.jsx("span",{className:`badge ${G.entry.otherComplete?"success":"danger"}`,style:Y,children:G.entry.otherComplete?"":"!"}),r.jsx("span",{className:"badge schedule-type-badge",style:O,children:G.entry.type})]}):G.entry.type==="Meal"?r.jsxs(r.Fragment,{children:[r.jsx("span",{className:`badge ${G.entry.mealComplete?"success":"danger"}`,style:Y,children:G.entry.mealComplete?"":"!"}),r.jsx("span",{className:"badge schedule-type-badge",style:O,children:G.entry.type})]}):null})()})]}),r.jsx("div",{className:"card-body",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(240px, 1fr))",gap:"1.1rem"},children:(()=>{const O=(Y,Q,q)=>r.jsxs("div",{children:[r.jsx("div",{className:"muted",style:{fontWeight:700,letterSpacing:"0.04em"},children:Q}),r.jsx("div",{children:q??""})]},Y);if(G.entry.type==="Innhopp"){const Y=[];return G.entry.scheduledAt&&Y.push(O("scheduled_at","SCHEDULED AT",io(G.entry.scheduledAt))),Y.push(O("reason","REASON FOR CHOICE",G.entry.innhoppReason||"")),Y.push(O("elevation","ELEVATION",G.entry.innhoppElevation!=null?nl(G.entry.innhoppElevation):"")),Y.push(O("takeoff","TAKEOFF AIRFIELD",G.entry.innhoppTakeoffName||"")),Y.push(O("elevation_diff","ELEVATION DIFFERENCE",G.entry.innhoppElevationDiff!=null?nl(G.entry.innhoppElevationDiff):"")),Y.push(O("rescue_boat","RESCUE BOAT",G.entry.innhoppRescueBoat==null?"":G.entry.innhoppRescueBoat?"Yes":"No")),Y.push(O("primary","PRIMARY AREA",G.entry.innhoppPrimaryName?`${G.entry.innhoppPrimaryName}${G.entry.innhoppPrimarySize?` (${G.entry.innhoppPrimarySize})`:""}`:"")),Y.push(O("secondary","SECONDARY AREA",G.entry.innhoppSecondaryName?`${G.entry.innhoppSecondaryName}${G.entry.innhoppSecondarySize?` (${G.entry.innhoppSecondarySize})`:""}`:"")),Y.push(O("risk","RISK ASSESSMENT",G.entry.innhoppRisk||"")),Y.push(O("minimum","MINIMUM REQUIREMENTS",G.entry.innhoppMinimumRequirements||"")),Y.push(O("notes","NOTES",G.entry.notes||"")),Y.push(O("landowners","LANDOWNERS PERMISSION",G.entry.innhoppLandOwnerPermission==null?"":G.entry.innhoppLandOwnerPermission?"Yes":"No")),G.entry.innhoppCoordinates&&Y.push(r.jsx("div",{style:{gridColumn:"1 / -1",display:"grid",justifyContent:"center",alignItems:"center",gap:"0.25rem",textAlign:"center"},children:r.jsx("div",{children:r.jsx("button",{type:"button",className:"link-button",style:{fontSize:"1rem"},onClick:Q=>{Q.stopPropagation(),window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(G.entry.innhoppCoordinates||"")}`,"_blank")},children:"Open in Maps"})})},"open-maps")),Y}return r.jsx(r.Fragment,{children:G.entry.type==="Accommodation"?r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsx("div",{className:"muted",style:{fontWeight:700,letterSpacing:"0.04em"},children:"BOOKED"}),r.jsx("div",{children:G.entry.booked?"Yes":"No"})]},"booked"),G.entry.scheduledAt?r.jsxs("div",{children:[r.jsx("div",{className:"muted",style:{fontWeight:700,letterSpacing:"0.04em"},children:"SCHEDULED AT"}),r.jsx("div",{children:io(G.entry.scheduledAt)})]},"scheduled"):null,r.jsxs("div",{children:[r.jsx("div",{className:"muted",style:{fontWeight:700,letterSpacing:"0.04em"},children:"NOTES"}),r.jsx("div",{children:G.entry.notes||""})]},"notes"),r.jsx("div",{style:{gridColumn:"1 / -1",display:"flex",justifyContent:"center"},children:G.entry.coordinates?r.jsx("button",{type:"button",className:"link-button",style:{fontSize:"1rem"},onClick:Y=>{Y.stopPropagation(),window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(G.entry.coordinates||"")}`,"_blank")},children:"Open in Maps"}):""})]}):r.jsxs(r.Fragment,{children:[G.entry.subtitle?r.jsxs("div",{children:[r.jsx("div",{className:"muted",style:{fontWeight:700,letterSpacing:"0.04em"},children:"SUBTITLE"}),r.jsx("div",{children:G.entry.subtitle})]},"subtitle"):null,G.entry.type==="Meal"&&r.jsxs("div",{children:[r.jsx("div",{className:"muted",style:{fontWeight:700,letterSpacing:"0.04em"},children:"LOCATION"}),r.jsx("div",{children:G.entry.location||""})]},"meal-location"),G.entry.scheduledAt?r.jsxs("div",{children:[r.jsx("div",{className:"muted",style:{fontWeight:700,letterSpacing:"0.04em"},children:"SCHEDULED AT"}),r.jsx("div",{children:io(G.entry.scheduledAt)})]},"scheduled"):null,r.jsxs("div",{children:[r.jsx("div",{className:"muted",style:{fontWeight:700,letterSpacing:"0.04em"},children:"NOTES"}),r.jsx("div",{children:G.entry.notes||""})]},"notes"),(G.entry.type==="Transport"||G.entry.type==="Ground Crew")&&G.entry.vehicles?r.jsxs("div",{children:[r.jsx("div",{className:"muted",style:{fontWeight:700,letterSpacing:"0.04em"},children:"VEHICLES"}),r.jsx("div",{style:{marginTop:"0.15rem"},children:G.entry.vehicles.length===0?r.jsx("div",{className:"muted",children:""}):G.entry.vehicles.map((Y,Q)=>r.jsxs("div",{className:"muted",children:[r.jsx("strong",{children:Y.name}),Y.driver?` (Driver: ${Y.driver})`:"",typeof Y.passenger_capacity=="number"?`  Capacity: ${Y.passenger_capacity}`:""]},Q))})]},"vehicles"):null,(G.entry.type==="Transport"||G.entry.type==="Ground Crew")&&G.entry.transportRouteOrigin&&G.entry.transportRouteDestination?r.jsx("div",{style:{gridColumn:"1 / -1",display:"flex",justifyContent:"center"},children:r.jsx("button",{type:"button",className:"link-button",style:{fontSize:"1rem"},onClick:Y=>{Y.stopPropagation();const Q=G.entry.transportRouteOrigin||"",q=G.entry.transportRouteDestination||"";window.open(`https://www.google.com/maps/dir/?api=1&origin=${encodeURIComponent(Q)}&destination=${encodeURIComponent(q)}`,"_blank")},children:"Open route"})},"route"):null,G.entry.type==="Other"&&G.entry.coordinates?r.jsx("div",{style:{gridColumn:"1 / -1",display:"flex",justifyContent:"center"},children:r.jsx("button",{type:"button",className:"link-button",style:{fontSize:"1rem"},onClick:Y=>{Y.stopPropagation(),window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(G.entry.coordinates||"")}`,"_blank")},children:"Open in Maps"})},"other-maps"):null]})})})()})]})}),document.body)]})},X0=()=>{const{vehicleId:e}=Ln(),n=yt(),[t]=sd(),s=t.get("transportId"),a=t.get("groundCrewId"),[i,l]=o.useState({event_id:"",name:"",driver:"",passenger_capacity:"",notes:""}),[u,d]=o.useState([]),[x,_]=o.useState(!0),[C,b]=o.useState(!1),[F,y]=o.useState(null);o.useEffect(()=>{let p=!1;return(async()=>{if(e){_(!0),y(null);try{const[v,j]=await Promise.all([d0(Number(e)),Ut()]);if(p)return;d(Array.isArray(j)?j:[]),l({event_id:String(v.event_id),name:v.name,driver:v.driver||"",passenger_capacity:String(v.passenger_capacity),notes:v.notes||""})}catch(v){p||y(v instanceof Error?v.message:"Failed to load vehicle")}finally{p||_(!1)}}})(),()=>{p=!0}},[e]);const S=async p=>{if(p.preventDefault(),!!e){b(!0),y(null);try{const m=await u0(Number(e),{event_id:Number(i.event_id),name:i.name.trim(),driver:i.driver.trim()||void 0,passenger_capacity:Number(i.passenger_capacity)||0,notes:i.notes.trim()||void 0});y("Vehicle updated"),l({event_id:String(m.event_id),name:m.name,driver:m.driver||"",passenger_capacity:String(m.passenger_capacity),notes:m.notes||""})}catch(m){y(m instanceof Error?m.message:"Failed to update vehicle")}finally{b(!1)}}},E=async()=>{if(e&&window.confirm("Are you sure you want to delete this vehicle?"))try{await f0(Number(e)),n(s?`/logistics/${s}`:a?`/logistics/ground-crew/${a}`:"/logistics")}catch(p){y(p instanceof Error?p.message:"Failed to delete vehicle")}};return x?r.jsx("p",{className:"muted",children:"Loading vehicle"}):r.jsxs("section",{children:[r.jsxs("header",{className:"page-header",children:[r.jsxs("div",{children:[r.jsx("h2",{children:"Vehicle details"}),r.jsx("p",{children:"Edit vehicle information and assignment."})]}),r.jsxs("div",{className:"card-actions",children:[r.jsx("button",{className:"ghost danger",type:"button",onClick:E,children:"Delete vehicle"}),r.jsx("button",{className:"ghost",type:"button",onClick:()=>n(s?`/logistics/${s}`:a?`/logistics/ground-crew/${a}`:"/logistics"),children:s?"Back to route":a?"Back to ground crew":"Back to logistics"})]})]}),r.jsx("article",{className:"card",children:r.jsxs("form",{className:"form-grid",onSubmit:S,children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Event"}),r.jsxs("select",{value:i.event_id,onChange:p=>l(m=>({...m,event_id:p.target.value})),required:!0,children:[r.jsx("option",{value:"",children:"Select event"}),u.map(p=>r.jsx("option",{value:p.id,children:p.name},p.id))]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Name"}),r.jsx("input",{type:"text",value:i.name,onChange:p=>l(m=>({...m,name:p.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Driver"}),r.jsx("input",{type:"text",value:i.driver,onChange:p=>l(m=>({...m,driver:p.target.value}))})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Passenger capacity"}),r.jsx("input",{type:"number",min:0,value:i.passenger_capacity,onChange:p=>l(m=>({...m,passenger_capacity:p.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Notes"}),r.jsx("input",{type:"text",value:i.notes,onChange:p=>l(m=>({...m,notes:p.target.value}))})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"submit",className:"primary",disabled:C,children:C?"Saving":"Save vehicle"}),F&&r.jsx("span",{className:"muted",children:F})]})]})})]})},os={current:{}},ph=/(\d{1,3})(\d{1,2})'(\d{1,2}(?:\.\d+)?)"?([NSEW])/i,sf=e=>{const n=e.trim().match(ph);if(!n)return null;const[,t,s,a,i]=n,l=Number(t),u=Number(s),d=Number(a),x=i.toUpperCase();if(Number.isNaN(l)||Number.isNaN(u)||Number.isNaN(d))return null;const _=l+u/60+d/3600;return x==="S"||x==="W"?-_:_},af=e=>{if(!e)return null;const n=new RegExp(ph.source,"ig"),t=Array.from(e.matchAll(n));if(t.length<2)return null;const s=sf(t[0][0]),a=sf(t[1][0]);if(s==null||a==null)return null;const i=t[0][4].toUpperCase(),l=t[1][4].toUpperCase();return(i==="N"||i==="S")&&(l==="E"||l==="W")?{lat:s,lon:a}:(i==="E"||i==="W")&&(l==="N"||l==="S")?{lat:a,lon:s}:{lat:s,lon:a}},Z0=(e,n)=>{const t=_=>_*Math.PI/180,a=t(n.lat-e.lat),i=t(n.lon-e.lon),l=t(e.lat),u=t(n.lat),d=Math.sin(a/2)*Math.sin(a/2)+Math.sin(i/2)*Math.sin(i/2)*Math.cos(l)*Math.cos(u);return 6371*(2*Math.atan2(Math.sqrt(d),Math.sqrt(1-d)))},lf=()=>({name:"",description:"",size:"",obstacles:""}),An=e=>!!e&&e.trim().length>0,ui=e=>e!=null&&Number.isFinite(e),ej=e=>e!=null,fi=e=>({name:(e==null?void 0:e.name)||"",description:(e==null?void 0:e.description)||"",size:(e==null?void 0:e.size)||"",obstacles:(e==null?void 0:e.obstacles)||""}),of=e=>Array.isArray(e)?e.map(n=>({name:n.name||"",telephone:n.telephone||"",email:n.email||""})):[],tj=e=>e.filter(n=>{var i,l,u;const t=(i=n.name)==null?void 0:i.trim(),s=(l=n.telephone)==null?void 0:l.trim(),a=(u=n.email)==null?void 0:u.trim();return!!(t||s||a)}),cf=e=>({name:e.name.trim(),description:e.description.trim(),size:e.size.trim(),obstacles:e.obstacles.trim()}),df=()=>{var rt,f,w,z,V,Fe,Le;const{eventId:e,innhoppId:n}=Ln(),t=yt(),s=Zt(),a=!n||n==="new",[i,l]=o.useState(null),[u,d]=o.useState(null),[x,_]=o.useState([]),[C,b]=o.useState(""),F={name:"",sequence:1,coordinates:"",scheduled_at:"",notes:"",takeoff_airfield_id:void 0,elevation:void 0,reason_for_choice:"",adjust_altimeter_aad:"",notam:"",distance_by_air:void 0,distance_by_road:void 0,primary_landing_area:lf(),secondary_landing_area:lf(),risk_assessment:"",safety_precautions:"",jumprun:"",hospital:"",rescue_boat:void 0,minimum_requirements:"",land_owners:[],land_owner_permission:void 0,image_files:[]},[y,S]=o.useState(F),[E,p]=o.useState({name:"",elevation:0,coordinates:"",description:""}),[m,v]=o.useState(!1),[j,D]=o.useState(!1),[k,I]=o.useState(!0),[T,J]=o.useState(null),[se,R]=o.useState(null),[ae,de]=o.useState(!1),[Ne,me]=o.useState(""),[he,we]=o.useState(!1),ue=o.useRef(null),[ge,fe]=o.useState(null),[K,ee]=o.useState(0),[ne,oe]=o.useState(!1),pe=A=>{if(!A)return[];const H=Array.from(A.items||[]).map(g=>g.kind==="file"?g.getAsFile():null).filter(g=>!!g&&g.type.startsWith("image/")),h=Array.from(A.files||[]).filter(g=>g.type.startsWith("image/"));return H.length?H:h},Ie=`primary ${ae?"saved":""}`,je=j?"Saving":ae?"Saved":"Save",Re=o.useCallback(A=>JSON.stringify(A),[y]),Pe=o.useMemo(()=>Re(y),[Re,y]),[Qe,Ye]=o.useState(!1),Je=o.useMemo(()=>{var H;if(y.elevation==null)return null;const A=(H=x.find(h=>h.id===y.takeoff_airfield_id))==null?void 0:H.elevation;return A==null?null:A-y.elevation},[y.elevation,y.takeoff_airfield_id,x]),G=o.useMemo(()=>(y.image_files||[]).filter(A=>A==null?void 0:A.data).map((A,H)=>({key:`${A.data.slice(0,24)}-${H}`,name:A.name||`Image ${H+1}`,mime:A.mime_type||"image/*",data:A.data,src:`data:${A.mime_type||"image/*"};base64,${A.data}`})),[y.image_files]),M=A=>A?Yp(A.trim()):"",$=A=>{A&&(A.style.height="auto",A.style.height=`${A.scrollHeight}px`)},W=A=>{$(A.currentTarget)},Z=o.useMemo(()=>({sequence:!(y.sequence&&y.sequence>0),name:!An(y.name),coordinates:!An(y.coordinates),elevation:!ui(y.elevation),scheduled_at:!An(y.scheduled_at),takeoff_airfield_id:!ui(y.takeoff_airfield_id),distance_by_air:!ui(y.distance_by_air),distance_by_road:!ui(y.distance_by_road),jumprun:!An(y.jumprun),primary_name:!An(y.primary_landing_area.name),primary_description:!An(y.primary_landing_area.description),primary_size:!An(y.primary_landing_area.size),primary_obstacles:!An(y.primary_landing_area.obstacles),risk_assessment:!An(y.risk_assessment),safety_precautions:!An(y.safety_precautions),minimum_requirements:!An(y.minimum_requirements),hospital:!An(y.hospital),rescue_boat:!ej(y.rescue_boat)}),[y]),Ee=o.useMemo(()=>Object.values(Z).every(A=>!A),[Z]);o.useEffect(()=>{document.querySelectorAll("textarea[data-autosize]").forEach(H=>$(H))},[y]),o.useEffect(()=>{let A=!1;return(async()=>{var h;if(e){a&&(d(null),S(F),b(""),we(!1)),I(!0),J(null);try{if(!a&&n){const g=await Wp(Number(n));if(A)return;d(g);const L=g.scheduled_at?"":(()=>{var U;if(g.event_id&&((U=os.current)!=null&&U[g.event_id])){const le=os.current[g.event_id];if(le.starts_at){const be=et(le.starts_at);return be?(be.setUTCHours(9,0,0,0),be.toISOString()):""}}return""})();if(S({name:g.name,sequence:g.sequence,coordinates:g.coordinates||"",elevation:g.elevation??void 0,scheduled_at:M(g.scheduled_at)||L,notes:g.notes||"",takeoff_airfield_id:g.takeoff_airfield_id||void 0,reason_for_choice:g.reason_for_choice||"",adjust_altimeter_aad:g.adjust_altimeter_aad||"",notam:g.notam||"",distance_by_air:g.distance_by_air??void 0,distance_by_road:g.distance_by_road??void 0,primary_landing_area:fi(g.primary_landing_area),secondary_landing_area:fi(g.secondary_landing_area),risk_assessment:g.risk_assessment||"",safety_precautions:g.safety_precautions||"",jumprun:g.jumprun||"",hospital:g.hospital||"",rescue_boat:g.rescue_boat??void 0,minimum_requirements:g.minimum_requirements||"",land_owners:of(g.land_owners),land_owner_permission:g.land_owner_permission??void 0,image_files:g.image_files||[]}),we(!1),b(g.takeoff_airfield_id?String(g.takeoff_airfield_id):""),g.event_id)try{const U=await es(g.event_id);if(!A&&(l(U),os.current={...os.current,[g.event_id]:U},!g.scheduled_at&&U.starts_at)){const le=et(U.starts_at);le&&(le.setUTCHours(9,0,0,0),S(be=>({...be,scheduled_at:le.toISOString()})))}}catch{}}else{const g=(h=s.state)==null?void 0:h.copyInnhopp;if(e)try{const L=await es(Number(e));if(!A&&(l(L),os.current={...os.current,[L.id]:L},!(g!=null&&g.scheduled_at)&&L.starts_at)){const U=et(L.starts_at);U&&(U.setUTCHours(9,0,0,0),S(le=>({...le,scheduled_at:U.toISOString()})))}}catch{}g&&!A&&(S({name:g.name,sequence:g.sequence,coordinates:g.coordinates||"",elevation:g.elevation??void 0,scheduled_at:M(g.scheduled_at),notes:g.notes||"",takeoff_airfield_id:g.takeoff_airfield_id||void 0,reason_for_choice:g.reason_for_choice||"",adjust_altimeter_aad:g.adjust_altimeter_aad||"",notam:g.notam||"",distance_by_air:g.distance_by_air??void 0,distance_by_road:g.distance_by_road??void 0,primary_landing_area:fi(g.primary_landing_area),secondary_landing_area:fi(g.secondary_landing_area),risk_assessment:g.risk_assessment||"",safety_precautions:g.safety_precautions||"",jumprun:g.jumprun||"",hospital:g.hospital||"",rescue_boat:g.rescue_boat??void 0,minimum_requirements:g.minimum_requirements||"",land_owners:of(g.land_owners),land_owner_permission:g.land_owner_permission??void 0,image_files:g.image_files||[]}),we(!1),b(g.takeoff_airfield_id?String(g.takeoff_airfield_id):""))}}catch(g){A||J(g instanceof Error?g.message:"Failed to load innhopp")}finally{A||I(!1)}}})(),()=>{A=!0}},[e,n,a]),o.useEffect(()=>{let A=!1;return(async()=>{try{const h=await $r();A||_(Array.isArray(h)?h:[])}catch{}})(),()=>{A=!0}},[]);const ze=(A,H)=>{var U,le,be,Be,Te,qe,De,$e,tt,Pt,Et;const h={...y,...A},g=tj(h.land_owners||[]),L={sequence:h.sequence,name:h.name.trim(),coordinates:(U=h.coordinates)==null?void 0:U.trim(),scheduled_at:((le=h.scheduled_at)==null?void 0:le.trim())||void 0,notes:((be=h.notes)==null?void 0:be.trim())||"",elevation:h.elevation,takeoff_airfield_id:h.takeoff_airfield_id,reason_for_choice:(Be=h.reason_for_choice)==null?void 0:Be.trim(),adjust_altimeter_aad:(Te=h.adjust_altimeter_aad)==null?void 0:Te.trim(),notam:(qe=h.notam)==null?void 0:qe.trim(),distance_by_air:h.distance_by_air,distance_by_road:h.distance_by_road,primary_landing_area:cf(h.primary_landing_area),secondary_landing_area:cf(h.secondary_landing_area),risk_assessment:(De=h.risk_assessment)==null?void 0:De.trim(),safety_precautions:($e=h.safety_precautions)==null?void 0:$e.trim(),jumprun:(tt=h.jumprun)==null?void 0:tt.trim(),hospital:(Pt=h.hospital)==null?void 0:Pt.trim(),rescue_boat:h.rescue_boat??void 0,minimum_requirements:(Et=h.minimum_requirements)==null?void 0:Et.trim(),land_owners:g.map(O=>({name:O.name.trim(),telephone:O.telephone.trim(),email:O.email.trim()})),land_owner_permission:h.land_owner_permission??void 0};return H!=null&&H.includeImages&&(L.image_files=(h.image_files||[]).map(O=>{var Y,Q;return{name:((Y=O.name)==null?void 0:Y.trim())||void 0,mime_type:((Q=O.mime_type)==null?void 0:Q.trim())||void 0,data:O.data}})),L},re=(A,H,h)=>{S(g=>{const L=A==="primary"?{...g.primary_landing_area,[H]:h}:{...g.secondary_landing_area,[H]:h};return A==="primary"?{...g,primary_landing_area:L}:{...g,secondary_landing_area:L}})},lt=(A,H,h)=>{S(g=>{const L=[...g.land_owners||[]];return L[A]={...L[A],[H]:h},{...g,land_owners:L}})},vt=()=>{S(A=>({...A,land_owners:[...A.land_owners||[],{name:"",telephone:"",email:""}]}))},Nt=A=>{S(H=>({...H,land_owners:(H.land_owners||[]).filter((h,g)=>g!==A)}))},Lt=A=>new Promise((H,h)=>{const g=new FileReader;g.onload=()=>{const L=g.result;if(typeof L!="string"){h(new Error("Failed to read file"));return}const U=L.split(",")[1]||"";H(U)},g.onerror=()=>h(g.error||new Error("Failed to read file")),g.readAsDataURL(A)}),X=async A=>{if(!A||A.length===0)return;const H=Array.isArray(A)?A:Array.from(A);try{const h=[];for(const le of H){const be=await Lt(le);h.push({name:le.name,mime_type:le.type||void 0,data:be})}const g=y.image_files||[],L=[...g];h.forEach(le=>{L.some(be=>be.data===le.data)||L.push(le)}),L.length-g.length>0&&ee(g.length),S(le=>({...le,image_files:L})),we(!0),u&&await pt(L)}catch{}},ce=A=>{S(H=>({...H,image_files:(H.image_files||[]).filter((h,g)=>g!==A)})),we(!0),ge!==null&&ge===A?fe(null):ge!==null&&A<ge&&fe(H=>H!=null?H-1:null),A===K&&G.length>1?ee(H=>(H-1+G.length)%G.length):A<K&&ee(H=>Math.max(H-1,0))},ve=A=>{A.preventDefault(),A.stopPropagation(),oe(!0)},We=A=>{A.preventDefault(),A.stopPropagation(),oe(!1)},ot=A=>{var H,h;A.preventDefault(),A.stopPropagation(),oe(!1),(h=(H=A.dataTransfer)==null?void 0:H.files)!=null&&h.length&&X(A.dataTransfer.files)},Xe=A=>{const H=pe(A.clipboardData);H.length&&(A.preventDefault(),X(H))};o.useEffect(()=>{const A=af(y.coordinates),H=x.find(U=>U.id===y.takeoff_airfield_id),h=af(H==null?void 0:H.coordinates);if(!A||!h)return;const g=Z0(A,h),L=Math.round(g*10)/10;S(U=>U.distance_by_air===L?U:{...U,distance_by_air:L})},[y.coordinates,y.takeoff_airfield_id,x]);const Ct=async A=>{if(A.preventDefault(),!!e){D(!0),R(null),de(!1);try{const H=a||he,h=ze(void 0,{includeImages:H});if(a||!u){const g=await kx(Number(e),h);d(g),R("Innhopp created"),t(`/events/${e}/innhopps/${g.id}`,{replace:!0,state:{}})}else{const g=await Ci(u.id,h);d(g),R("Innhopp updated")}H&&we(!1),de(!0),me(Pe)}catch(H){R(H instanceof Error?H.message:"Failed to save innhopp"),de(!1)}finally{D(!1)}}},pt=async A=>{if(e){if(!u){R("Save the innhopp first to persist images.");return}D(!0),R(null),de(!1);try{const H=ze({image_files:A},{includeImages:!0}),h=await Ci(u.id,H);d(h),S(g=>({...g,image_files:h.image_files||A})),R("Images saved"),de(!0),we(!1),me(Re({...y,image_files:A}))}catch(H){R(H instanceof Error?H.message:"Failed to save images"),de(!1)}finally{D(!1)}}},wt=async()=>{if(!(!u||!i||Qe||!window.confirm("Are you sure you want to delete this innhopp? This cannot be undone."))){Ye(!0),R(null);try{await Ex(u.id),t(`/events/${i.id}`)}catch(H){R(H instanceof Error?H.message:"Failed to delete innhopp"),Ye(!1)}}},en=async()=>{var A;D(!0),R(null);try{const H=await el({name:E.name.trim(),elevation:Number(E.elevation)||0,coordinates:E.coordinates.trim(),description:((A=E.description)==null?void 0:A.trim())||void 0});if(_(h=>[...h,H]),S(h=>({...h,takeoff_airfield_id:H.id})),b(String(H.id)),v(!1),p({name:"",elevation:0,coordinates:"",description:""}),!u)R("Airfield created and assigned as takeoff");else{const h=ze({takeoff_airfield_id:H.id},{includeImages:!1}),g=await Ci(u.id,h);d(g),S(L=>({...L,takeoff_airfield_id:g.takeoff_airfield_id||H.id})),R("Airfield created, attached, and innhopp saved")}}catch(H){R(H instanceof Error?H.message:"Failed to create airfield")}finally{D(!1)}};return o.useEffect(()=>{ae&&Pe!==Ne&&de(!1)},[Pe,Ne,ae]),o.useEffect(()=>{const A=H=>{const h=pe(H.clipboardData);h.length&&(H.preventDefault(),X(h))};return window.addEventListener("paste",A),()=>window.removeEventListener("paste",A)},[]),k?r.jsx("p",{className:"muted",children:"Loading innhopp"}):T?r.jsx("p",{className:"error-text",children:T}):!i||!u&&!a?r.jsx("p",{className:"error-text",children:"Innhopp not found."}):r.jsxs("section",{children:[r.jsxs("header",{className:"page-header",children:[r.jsx("div",{children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flexWrap:"wrap"},children:[r.jsxs("h2",{style:{margin:0},children:[i.name,"  ",a?"New innhopp":`#${u==null?void 0:u.sequence} ${u==null?void 0:u.name}`]}),!a&&r.jsx("span",{className:`badge ${Ee?"success":"danger"}`,style:{minWidth:"2.4ch",textAlign:"center",display:"inline-block"},children:Ee?"OP READY":"!"})]})}),r.jsxs("div",{className:"card-actions",children:[!a&&r.jsx("button",{className:"ghost",type:"button",onClick:()=>t(`/events/${e}/innhopps/new`,{state:{copyInnhopp:u}}),children:"Make a copy"}),!a&&r.jsx("button",{className:"ghost danger",type:"button",onClick:wt,disabled:j||Qe,children:Qe?"Deleting":"Delete innhopp"}),r.jsx("button",{className:"ghost",type:"button",onClick:()=>t(-1),children:"Back"})]})]}),r.jsxs("form",{className:"stack",onSubmit:Ct,children:[r.jsxs("article",{className:"card",children:[r.jsxs("div",{className:"form-grid",children:[r.jsxs("div",{className:"form-grid",style:{gridTemplateColumns:"max-content 16px 1fr",gridColumn:"1 / -1",gap:"1rem",alignItems:"end"},children:[r.jsxs("label",{className:`form-field ${Z.sequence?"field-missing":""}`,style:{maxWidth:"140px"},children:[r.jsx("span",{children:"Sequence"}),r.jsx("input",{type:"number",min:1,value:y.sequence,onFocus:A=>A.target.select(),onChange:A=>S(H=>({...H,sequence:Number(A.target.value)})),style:{minWidth:"80px"}})]}),r.jsx("div",{"aria-hidden":"true"}),r.jsxs("label",{className:`form-field ${Z.name?"field-missing":""}`,children:[r.jsx("span",{children:"Name"}),r.jsx("input",{type:"text",value:y.name,onChange:A=>S(H=>({...H,name:A.target.value})),required:!0})]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Reason for choice"}),r.jsx("input",{type:"text",value:y.reason_for_choice||"",onChange:A=>S(H=>({...H,reason_for_choice:A.target.value})),placeholder:"Why this innhopp location was selected"})]}),r.jsxs("div",{className:"form-grid",style:{gridTemplateColumns:(rt=y.coordinates)!=null&&rt.trim()?"repeat(2,minmax(0,1fr))":"1fr",gridColumn:"1 / -1",alignItems:"start",gap:"1rem"},children:[r.jsxs("div",{className:"form-grid",style:{gridTemplateColumns:"1fr",rowGap:"0.9rem",gridColumn:(f=y.coordinates)!=null&&f.trim()?"1 / span 1":"1 / -1"},children:[r.jsxs("label",{className:`form-field ${Z.coordinates?"field-missing":""}`,children:[r.jsx("span",{children:"Coordinates (DMS)"}),r.jsxs("div",{className:"input-with-button",style:{display:"flex",alignItems:"center",gap:"0.75rem",width:"fit-content"},children:[r.jsx("input",{type:"text",value:y.coordinates||"",onChange:A=>S(H=>({...H,coordinates:A.target.value})),pattern:`^[0-9]{1,3}[0-9]{1,2}'[0-9]{1,2}(?:\\.\\d+)?"[NS]\\s[0-9]{1,3}[0-9]{1,2}'[0-9]{1,2}(?:\\.\\d+)?"[EW]$`,title:`Use DMS format like 1114'30.0"N 7342'59.7"W`,style:{width:"24ch"}}),(w=y.coordinates)!=null&&w.trim()?r.jsx("button",{type:"button",className:"ghost",style:{minWidth:"12ch",textAlign:"right",justifyContent:"flex-end",whiteSpace:"nowrap"},onClick:()=>{var H;const A=(H=y.coordinates)==null?void 0:H.trim();A&&window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(A)}`,"_blank")},children:"Open in Maps"}):null]})]}),r.jsx("div",{className:"form-grid",style:{gridTemplateColumns:"repeat(auto-fit,minmax(220px,1fr))",gap:"0.75rem"},children:r.jsxs("label",{className:`form-field ${Z.elevation?"field-missing":""}`,children:[r.jsx("span",{children:"Elevation (m)"}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx("input",{type:"number",min:0,value:y.elevation??"",style:{width:"24ch"},onFocus:A=>{const H=A.target;requestAnimationFrame(()=>H.select())},onClick:A=>{const H=A.target;requestAnimationFrame(()=>H.select())},onChange:A=>S(H=>({...H,elevation:Number(A.target.value)}))}),r.jsx("span",{className:"muted",style:{whiteSpace:"nowrap",minWidth:"12ch",textAlign:"left"},children:y.elevation!==void 0&&y.elevation!==null&&!Number.isNaN(y.elevation)?`${ld(y.elevation)} ft`:" ft"})]})]})}),r.jsx("div",{className:"form-grid",style:{gridTemplateColumns:"repeat(auto-fit,minmax(220px,1fr))",gap:"0.75rem"},children:r.jsxs("label",{className:`form-field ${Z.scheduled_at?"field-missing":""}`,children:[r.jsx("span",{children:"Scheduled at"}),r.jsx("div",{style:{width:"24ch"},children:r.jsx($t,{value:Ge(y.scheduled_at||void 0),options:{enableTime:!0,time_24hr:!0,altInput:!0,altInputClass:"full-width-alt",altFormat:"Y-m-d H:i",dateFormat:"Y-m-d H:i",formatDate:A=>Kp(A)},style:{width:"100%"},onChange:A=>{const H=A[0];S(h=>({...h,scheduled_at:H?Bt(H):""}))},placeholder:"Select date & time"})})]})})]}),(z=y.coordinates)!=null&&z.trim()?r.jsxs("div",{className:"form-field",style:{display:"flex",flexDirection:"column",gap:"0.4rem",gridRow:"1 / span 3",gridColumn:"2",alignSelf:"stretch"},children:[r.jsx("span",{className:"muted",style:{fontWeight:700,letterSpacing:"0.04em"},children:"Location preview"}),r.jsx("div",{style:{height:"100%",minHeight:"220px",borderRadius:"10px",overflow:"hidden",border:"1px solid #d7dfe7"},children:r.jsx("iframe",{title:"Innhopp location preview",src:`https://www.google.com/maps?q=${encodeURIComponent(y.coordinates.trim())}&t=k&z=15&output=embed`,loading:"lazy",style:{width:"100%",height:"100%",border:0},allowFullScreen:!0,referrerPolicy:"no-referrer-when-downgrade"})})]}):null]})]}),r.jsx("div",{className:"form-actions",style:{marginTop:"0.75rem"},children:r.jsx("button",{type:"submit",className:Ie,disabled:j||ae,children:je})})]}),r.jsxs("article",{className:"card",children:[r.jsx("div",{className:"form-field",style:{gridColumn:"1 / -1",marginBottom:"0.5rem"},children:r.jsx("span",{children:"Image gallery"})}),r.jsxs("div",{className:"form-grid",style:{gridTemplateColumns:"1fr",gap:"0.75rem",border:ne?"2px dashed #2b5fab":void 0,borderRadius:ne?"12px":void 0,padding:ne?"0.5rem":void 0,transition:"border 0.15s ease, background 0.15s ease",background:ne?"#f1f6ff":void 0},tabIndex:0,id:"innhopp-gallery-card",onDragOver:ve,onDragLeave:We,onDrop:ot,onPaste:Xe,children:[G.length?r.jsx("div",{style:{width:"100%",display:"flex",justifyContent:"center"},children:r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.6rem",alignItems:"center",gridColumn:"1 / -1",width:"fit-content",maxWidth:"100%"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",width:"100%",justifyContent:"center"},children:[G.length>4?r.jsx("button",{type:"button",className:"ghost","aria-label":"Previous image",disabled:G.length<=1,style:{fontSize:"2rem",padding:"0.4rem 0.6rem"},onClick:()=>ee(A=>G.length?(A-1+G.length)%G.length:0),children:""}):r.jsx("div",{style:{width:"2.5rem"}}),r.jsx("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center",gap:"0.5rem",margin:"0 auto",width:"100%",maxWidth:"900px"},children:G.slice(K,K+4).concat(K+4>G.length?G.slice(0,K+4-G.length):[]).slice(0,Math.min(4,G.length)).map((A,H)=>{const h=(K+H)%G.length;return r.jsxs("figure",{style:{margin:0,border:"1px solid #d7dfe7",borderRadius:"10px",overflow:"hidden",background:"#fff",display:"flex",flexDirection:"column",position:"relative",cursor:"pointer",width:"180px",height:"180px",flex:"0 0 180px"},onClick:()=>fe(h),children:[r.jsx("button",{type:"button","aria-label":"Remove image",onClick:g=>{g.stopPropagation(),ce(h)},style:{position:"absolute",top:"8px",left:"8px",background:"rgba(0,0,0,0.6)",color:"#fff",border:"none",borderRadius:"50%",width:"28px",height:"28px",padding:0,lineHeight:1,fontSize:"16px",minWidth:"28px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",zIndex:2},children:""}),r.jsx("div",{style:{position:"relative",width:"100%",height:"100%",background:"#f9fbfd",overflow:"hidden"},children:r.jsx("img",{src:A.src,alt:`Image ${h+1}`,style:{position:"absolute",inset:0,width:"100%",height:"100%",objectFit:"cover",objectPosition:"center",display:"block"}})})]},`${A.key}-${H}`)})}),G.length>4?r.jsx("button",{type:"button",className:"ghost","aria-label":"Next image",disabled:G.length<=1,style:{fontSize:"2rem",padding:"0.4rem 0.6rem"},onClick:()=>ee(A=>G.length?(A+1)%G.length:0),children:""}):r.jsx("div",{style:{width:"2.5rem"}})]}),G.length>4?r.jsx("div",{style:{display:"flex",gap:"0.4rem",justifyContent:"center",alignItems:"center",flexWrap:"wrap"},children:G.map((A,H)=>r.jsx("button",{type:"button","aria-label":`Go to image ${H+1}`,onClick:()=>ee(H),style:{width:"10px",height:"10px",borderRadius:"50%",border:"none",background:H===K?"#2b5fab":"#d3dbe6",cursor:"pointer",padding:0,minWidth:"auto",lineHeight:1,display:"inline-block"}},A.key))}):null]})}):r.jsx("p",{className:"muted",style:{margin:0},children:"No images uploaded yet."}),r.jsxs("div",{className:"form-actions upload-pane",style:{gridColumn:"1 / -1",display:"flex",gap:"0.75rem",alignItems:"center",flexWrap:"wrap",padding:"0.75rem 0.9rem",background:ne?"var(--upload-pane-hover-bg)":void 0,borderColor:ne?"var(--upload-pane-hover-border)":void 0},children:[r.jsx("input",{ref:ue,type:"file",accept:"image/*",multiple:!0,style:{display:"none"},onChange:A=>{X(A.target.files),A.target.value=""}}),r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.25rem"},children:[r.jsx("button",{type:"button",className:"ghost browse-button",onClick:()=>{var A;return(A=ue.current)==null?void 0:A.click()},style:{alignSelf:"flex-start"},children:"Browse your device"}),r.jsx("span",{className:"muted",style:{fontSize:"0.95rem"},children:"or drag & drop / paste images into this box"})]}),r.jsxs("span",{className:"muted",style:{marginLeft:"auto"},children:[G.length," uploaded"]})]}),ge!==null&&G[ge]&&typeof document<"u"&&Qi.createPortal(r.jsx("div",{role:"dialog","aria-modal":"true",style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.75)",display:"grid",placeItems:"center",zIndex:1e3,padding:"1rem"},onClick:()=>fe(null),children:r.jsxs("div",{style:{position:"relative",maxWidth:"90vw",maxHeight:"90vh"},onClick:A=>A.stopPropagation(),children:[r.jsx("img",{src:G[ge].src,alt:G[ge].name,style:{maxWidth:"90vw",maxHeight:"80vh",display:"block",borderRadius:"12px"}}),r.jsx("div",{style:{position:"absolute",top:"50%",left:"-2.5rem",transform:"translateY(-50%)",display:G.length>1?"flex":"none"},children:r.jsx("button",{type:"button",className:"ghost",onClick:A=>{A.stopPropagation(),fe(H=>H===null?H:(H-1+G.length)%G.length)},children:""})}),r.jsx("div",{style:{position:"absolute",top:"50%",right:"-2.5rem",transform:"translateY(-50%)",display:G.length>1?"flex":"none"},children:r.jsx("button",{type:"button",className:"ghost",onClick:A=>{A.stopPropagation(),fe(H=>H===null?H:(H+1)%G.length)},children:""})}),r.jsx("button",{type:"button",className:"ghost danger",style:{position:"absolute",top:"-2.75rem",right:0},onClick:A=>{A.stopPropagation(),fe(null)},children:"Close"})]})}),document.body)]}),r.jsx("div",{className:"form-actions",style:{marginTop:"0.75rem"},children:r.jsx("button",{type:"submit",className:Ie,disabled:j,children:je})})]}),r.jsxs("article",{className:"card",children:[r.jsxs("div",{className:"form-grid",children:[r.jsxs("label",{className:`form-field ${Z.takeoff_airfield_id?"field-missing":""}`,children:[r.jsx("span",{children:"Takeoff airfield"}),r.jsxs("select",{value:C||(m?"__new__":""),onChange:A=>{const H=A.target.value;if(H==="__new__"){v(!0),b("__new__"),S(h=>({...h,takeoff_airfield_id:void 0}));return}v(!1),b(H),S(h=>({...h,takeoff_airfield_id:H?Number(H):void 0}))},children:[r.jsx("option",{value:"",children:"Select airfield"}),r.jsx("option",{value:"__new__",children:"Create new airfield"}),x.map(A=>r.jsxs("option",{value:A.id,children:[A.name," ",A.elevation?`(${A.elevation} m)`:""]},A.id))]})]}),m&&r.jsxs("div",{className:"form-grid",style:{gridTemplateColumns:"repeat(auto-fit,minmax(200px,1fr))",gridColumn:"1 / -1",border:"1px dashed #c6d1dd",padding:"1rem",borderRadius:"10px",marginTop:"0.5rem"},children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Name"}),r.jsx("input",{type:"text",value:E.name,onChange:A=>p(H=>({...H,name:A.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Elevation (m)"}),r.jsx("input",{type:"number",min:0,value:E.elevation,onFocus:A=>{const H=A.target;requestAnimationFrame(()=>H.select())},onClick:A=>{const H=A.target;requestAnimationFrame(()=>H.select())},onChange:A=>p(H=>({...H,elevation:Number(A.target.value)})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Coordinates"}),r.jsx("input",{type:"text",value:E.coordinates,onChange:A=>p(H=>({...H,coordinates:A.target.value})),style:{minWidth:"22ch"},required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Description"}),r.jsx("input",{type:"text",value:E.description||"",onChange:A=>p(H=>({...H,description:A.target.value})),placeholder:"Optional"})]}),r.jsxs("div",{className:"form-actions",style:{gridColumn:"1 / -1"},children:[r.jsx("button",{type:"button",className:"ghost",onClick:en,disabled:j,children:j?"Creating":"Create & attach"}),r.jsx("button",{type:"button",className:"ghost",onClick:()=>{v(!1),b(y.takeoff_airfield_id?String(y.takeoff_airfield_id):"")},disabled:j,children:"Cancel"})]})]}),Je!==null?r.jsxs("div",{className:"form-grid",style:{gridTemplateColumns:"repeat(auto-fit,minmax(220px,1fr))",gridColumn:"1 / -1"},children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Elevation difference"}),r.jsx("input",{type:"text",readOnly:!0,value:`${Je} m`})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Adjust altimeter / AAD"}),r.jsx("input",{type:"text",value:y.adjust_altimeter_aad||"",onChange:A=>S(H=>({...H,adjust_altimeter_aad:A.target.value})),placeholder:"Adjustment guidance"})]})]}):r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Adjust altimeter / AAD"}),r.jsx("input",{type:"text",value:y.adjust_altimeter_aad||"",onChange:A=>S(H=>({...H,adjust_altimeter_aad:A.target.value})),placeholder:"Adjustment guidance"})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"NOTAM"}),r.jsx("input",{type:"text",value:y.notam||"",onChange:A=>S(H=>({...H,notam:A.target.value})),placeholder:"NOTAM reference or notes"})]}),r.jsxs("div",{className:"form-grid",style:{gridTemplateColumns:"repeat(auto-fit,minmax(200px,1fr))",gridColumn:"1 / -1",alignItems:"end"},children:[r.jsxs("label",{className:`form-field ${Z.distance_by_air?"field-missing":""}`,children:[r.jsx("span",{children:"Distance by air (km)"}),r.jsx("input",{type:"number",min:0,step:"0.1",value:y.distance_by_air??"",onChange:A=>S(H=>({...H,distance_by_air:A.target.value?Number(A.target.value):void 0}))})]}),r.jsxs("label",{className:`form-field ${Z.distance_by_road?"field-missing":""}`,children:[r.jsx("span",{children:"Distance by road (km)"}),r.jsx("input",{type:"number",min:0,step:"0.1",value:y.distance_by_road??"",onChange:A=>S(H=>({...H,distance_by_road:A.target.value?Number(A.target.value):void 0}))})]}),r.jsxs("div",{className:"form-field",style:{display:"flex",alignItems:"flex-end"},children:[r.jsx("span",{children:""}),(V=y.coordinates)!=null&&V.trim()&&((Le=(Fe=x.find(A=>A.id===y.takeoff_airfield_id))==null?void 0:Fe.coordinates)!=null&&Le.trim())?r.jsx("button",{type:"button",className:"ghost",onClick:()=>{var h,g,L;const A=(h=y.coordinates)==null?void 0:h.trim(),H=(L=(g=x.find(U=>U.id===y.takeoff_airfield_id))==null?void 0:g.coordinates)==null?void 0:L.trim();!A||!H||window.open(`https://www.google.com/maps/dir/?api=1&origin=${encodeURIComponent(H)}&destination=${encodeURIComponent(A)}&travelmode=driving`,"_blank")},children:"Open route in Maps"}):null]})]}),r.jsxs("label",{className:`form-field ${Z.jumprun?"field-missing":""}`,children:[r.jsx("span",{children:"Jumprun"}),r.jsx("textarea",{"data-autosize":!0,onInput:W,value:y.jumprun||"",onChange:A=>S(H=>({...H,jumprun:A.target.value})),placeholder:"Heading, offset, wind notes"})]})]}),r.jsx("div",{className:"form-actions",style:{marginTop:"0.75rem"},children:r.jsx("button",{type:"submit",className:Ie,disabled:j,children:je})})]}),r.jsxs("article",{className:"card",children:[r.jsxs("div",{className:"form-grid",style:{gridTemplateColumns:"repeat(auto-fit,minmax(220px,1fr))"},children:[r.jsx("div",{className:"form-field",style:{gridColumn:"1 / -1"},children:r.jsx("span",{children:"Primary landing area"})}),r.jsxs("label",{className:`form-field ${Z.primary_name?"field-missing":""}`,style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Name"}),r.jsx("input",{type:"text",value:y.primary_landing_area.name,onChange:A=>re("primary","name",A.target.value)})]}),r.jsxs("div",{className:"form-grid",style:{gridTemplateColumns:"minmax(200px, 320px) 1fr",gridColumn:"1 / -1",gap:"0.75rem"},children:[r.jsxs("label",{className:`form-field ${Z.primary_size?"field-missing":""}`,children:[r.jsx("span",{children:"Size and surface"}),r.jsx("input",{type:"text",value:y.primary_landing_area.size,onChange:A=>re("primary","size",A.target.value),placeholder:"Dimensions and surface"})]}),r.jsxs("label",{className:`form-field ${Z.primary_obstacles?"field-missing":""}`,children:[r.jsx("span",{children:"Obstacles"}),r.jsx("input",{type:"text",value:y.primary_landing_area.obstacles,onChange:A=>re("primary","obstacles",A.target.value),placeholder:"Powerlines, trees, terrain"})]})]}),r.jsxs("label",{className:`form-field ${Z.primary_description?"field-missing":""}`,style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Description"}),r.jsx("textarea",{"data-autosize":!0,onInput:W,value:y.primary_landing_area.description,onChange:A=>re("primary","description",A.target.value),placeholder:"Surface, Obstacles, etc"})]}),r.jsx("div",{className:"form-field",style:{gridColumn:"1 / -1"},children:r.jsx("span",{children:"Secondary landing area"})}),r.jsxs("label",{className:"form-field",style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Name"}),r.jsx("input",{type:"text",value:y.secondary_landing_area.name,onChange:A=>re("secondary","name",A.target.value)})]}),r.jsxs("div",{className:"form-grid",style:{gridTemplateColumns:"minmax(200px, 320px) 1fr",gridColumn:"1 / -1",gap:"0.75rem"},children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Size and surface"}),r.jsx("input",{type:"text",value:y.secondary_landing_area.size,onChange:A=>re("secondary","size",A.target.value),placeholder:"Dimensions and surface"})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Obstacles"}),r.jsx("input",{type:"text",value:y.secondary_landing_area.obstacles,onChange:A=>re("secondary","obstacles",A.target.value),placeholder:"Powerlines, trees, terrain"})]})]}),r.jsxs("label",{className:"form-field",style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Description"}),r.jsx("textarea",{"data-autosize":!0,onInput:W,value:y.secondary_landing_area.description,onChange:A=>re("secondary","description",A.target.value),placeholder:"Surface, Obstacles, etc"})]}),r.jsxs("label",{className:`form-field ${Z.risk_assessment?"field-missing":""}`,style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Risk assessment"}),r.jsx("textarea",{"data-autosize":!0,onInput:W,value:y.risk_assessment||"",onChange:A=>S(H=>({...H,risk_assessment:A.target.value})),placeholder:"Key risks and mitigations"})]}),r.jsxs("label",{className:`form-field ${Z.safety_precautions?"field-missing":""}`,style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Safety precautions"}),r.jsx("textarea",{"data-autosize":!0,onInput:W,value:y.safety_precautions||"",onChange:A=>S(H=>({...H,safety_precautions:A.target.value})),placeholder:"Briefings and other measures"})]}),r.jsxs("label",{className:`form-field ${Z.minimum_requirements?"field-missing":""}`,style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Minimum requirements"}),r.jsx("textarea",{"data-autosize":!0,onInput:W,value:y.minimum_requirements||"",onChange:A=>S(H=>({...H,minimum_requirements:A.target.value})),placeholder:"Experience level required"})]})]}),r.jsx("div",{className:"form-actions",style:{marginTop:"0.75rem"},children:r.jsx("button",{type:"submit",className:Ie,disabled:j,children:je})})]}),r.jsxs("article",{className:"card",children:[r.jsxs("div",{className:"form-grid",children:[r.jsxs("label",{className:`form-field ${Z.hospital?"field-missing":""}`,children:[r.jsx("span",{children:"Hospital"}),r.jsx("input",{type:"text",value:y.hospital||"",onChange:A=>S(H=>({...H,hospital:A.target.value})),placeholder:"Nearest hospital / ETA"})]}),r.jsxs("label",{className:`form-field ${Z.rescue_boat?"field-missing":""}`,children:[r.jsx("span",{children:"Rescue boat"}),r.jsxs("select",{value:y.rescue_boat==null?"":y.rescue_boat?"yes":"no",onChange:A=>S(H=>({...H,rescue_boat:A.target.value===""?void 0:A.target.value==="yes"})),children:[r.jsx("option",{value:"",children:"Unknown"}),r.jsx("option",{value:"yes",children:"Yes"}),r.jsx("option",{value:"no",children:"No"})]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Land owner permission"}),r.jsxs("select",{value:y.land_owner_permission==null?"":y.land_owner_permission?"yes":"no",onChange:A=>S(H=>({...H,land_owner_permission:A.target.value===""?void 0:A.target.value==="yes"})),children:[r.jsx("option",{value:"",children:"Unknown"}),r.jsx("option",{value:"yes",children:"Granted"}),r.jsx("option",{value:"no",children:"Pending / No"})]})]}),r.jsxs("div",{className:"form-field",style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Land owners"}),(y.land_owners||[]).length===0&&r.jsx("p",{className:"muted",children:"No land owners added yet."}),(y.land_owners||[]).map((A,H)=>r.jsxs("div",{className:"form-grid",style:{gridTemplateColumns:"repeat(auto-fit,minmax(220px,1fr))",marginBottom:"0.75rem"},children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Name"}),r.jsx("input",{type:"text",value:A.name,onChange:h=>lt(H,"name",h.target.value)})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Telephone"}),r.jsx("input",{type:"text",value:A.telephone,onChange:h=>lt(H,"telephone",h.target.value)})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Email"}),r.jsx("input",{type:"email",value:A.email,onChange:h=>lt(H,"email",h.target.value)})]}),r.jsx("div",{className:"form-actions",style:{gridColumn:"1 / -1"},children:r.jsx("button",{type:"button",className:"ghost danger",onClick:()=>Nt(H),children:"Remove owner"})})]},H)),r.jsx("div",{className:"form-actions",children:r.jsx("button",{type:"button",className:"ghost",onClick:vt,children:"Add land owner"})})]})]}),r.jsx("div",{className:"form-actions",style:{marginTop:"0.75rem"},children:r.jsx("button",{type:"submit",className:Ie,disabled:j,children:je})})]}),r.jsx("article",{className:"card",children:r.jsxs("div",{className:"form-grid",children:[r.jsxs("label",{className:"form-field notes-field",children:[r.jsx("span",{children:"Notes"}),r.jsx("input",{type:"text",value:y.notes||"",onChange:A=>S(H=>({...H,notes:A.target.value})),placeholder:"Exit altitude, landing brief"})]}),r.jsx("div",{className:"form-actions",children:r.jsx("button",{type:"submit",className:Ie,disabled:j,children:je})})]})})]})]})},nj=()=>{const{manifestId:e}=Ln(),n=yt(),[t,s]=o.useState(null),[a,i]=o.useState([]),[l,u]=o.useState(null),[d,x]=o.useState([]),[_,C]=o.useState([]),[b,F]=o.useState(!0),[y,S]=o.useState(null),[E,p]=o.useState(null),[m,v]=o.useState(!1),[j,D]=o.useState(!1),[k,I]=o.useState(!1),[T,J]=o.useState(!1),[se,R]=o.useState(!1),[ae,de]=o.useState({event_id:"",load_number:"",capacity:"",staff_slots:"",notes:""}),[Ne,me]=o.useState([]),[he,we]=o.useState(""),[ue,ge]=o.useState(""),[fe,K]=o.useState({full_name:"",email:"",phone:"",experience_level:"",emergency_contact:"",roles:["Participant","Skydiver"]}),[ee,ne]=o.useState({full_name:"",email:"",phone:"",experience_level:"",emergency_contact:"",roles:["Participant","Skydiver","Staff"]}),oe=["Participant","Skydiver","Staff","Ground Crew","Jump Master","Jump Leader","Driver","Pilot","COP"];o.useEffect(()=>{let X=!1;return(async()=>{if(e){F(!0),S(null);try{const ve=await Ix(Number(e)),[We,ot,Xe,Ct]=await Promise.all([Ut(),ts(),es(ve.event_id),Hp()]);if(X)return;s(ve),i(Array.isArray(We)?We.map(pt=>({id:pt.id,name:pt.name})):[]),C(Array.isArray(ot)?ot:[]),u(Xe),x(Array.isArray(Ct)?Ct:[]),de({event_id:String(ve.event_id),load_number:String(ve.load_number??""),capacity:ve.capacity!=null?String(ve.capacity):"",staff_slots:ve.staff_slots!=null?String(ve.staff_slots):"",notes:ve.notes||""}),me(Array.isArray(ve.participant_ids)?ve.participant_ids:[])}catch(ve){X||S(ve instanceof Error?ve.message:"Failed to load manifest")}finally{X||F(!1)}}})(),()=>{X=!0}},[e]),o.useEffect(()=>{let X=!1;return(async()=>{if(!ae.event_id){u(null);return}try{const ve=await es(Number(ae.event_id));X||u(ve)}catch{}})(),()=>{X=!0}},[ae.event_id]);const pe=o.useMemo(()=>Number(ae.event_id||(t==null?void 0:t.event_id)||0),[ae.event_id,t==null?void 0:t.event_id]),Ie=o.useMemo(()=>{if(!pe)return new Set;const X=(t==null?void 0:t.id)??Number(e),ce=d.filter(ve=>ve.event_id===pe&&ve.id!==X).flatMap(ve=>Array.isArray(ve.participant_ids)?ve.participant_ids:[]);return new Set(ce)},[pe,d,t==null?void 0:t.id,e]),je=o.useMemo(()=>{const X=(l==null?void 0:l.participant_ids)??[];return _.filter(ce=>{const ve=Array.isArray(ce.roles)?ce.roles:[],We=ve.includes("Skydiver"),ot=ve.includes("Staff");return X.includes(ce.id)&&!Ne.includes(ce.id)&&We&&!ot&&!Ie.has(ce.id)})},[_,Ne,l,Ie]),Re=o.useMemo(()=>{const X=(l==null?void 0:l.participant_ids)??[];return _.filter(ce=>{const ve=Array.isArray(ce.roles)?ce.roles:[],We=ve.includes("Skydiver"),ot=ve.includes("Staff");return X.includes(ce.id)&&!Ne.includes(ce.id)&&We&&ot&&!Ie.has(ce.id)})},[_,Ne,l,Ie]),Pe=o.useMemo(()=>Ne.filter(X=>{var ve;const ce=((ve=_.find(We=>We.id===X))==null?void 0:ve.roles)||[];return ce.includes("Staff")&&ce.includes("Skydiver")}),[Ne,_]),Qe=o.useMemo(()=>{const X=Number(ae.staff_slots);return Number.isFinite(X)&&X>=0?X:null},[ae.staff_slots]),Ye=Qe!=null&&Qe>0&&Pe.length>=Qe,Je=o.useMemo(()=>{const X=Number(ae.capacity);return Number.isFinite(X)&&X>0?X:null},[ae.capacity]),G=o.useMemo(()=>Ne.filter(X=>{var ve;return!(((ve=_.find(We=>We.id===X))==null?void 0:ve.roles)||[]).includes("Staff")}),[Ne,_]),M=o.useMemo(()=>{if(Je==null)return null;const ce=Je-(Qe??0);return ce>0?ce:null},[Je,Qe]),$=M!=null&&G.length>=M,W=X=>{var ce;return((ce=_.find(ve=>ve.id===X))==null?void 0:ce.full_name)||`Participant #${X}`},Z=async X=>{if(!e)return null;const ce={event_id:Number(ae.event_id),load_number:Number(ae.load_number),capacity:ae.capacity?Number(ae.capacity):void 0,staff_slots:ae.staff_slots?Number(ae.staff_slots):void 0,notes:ae.notes.trim()||void 0,participant_ids:X},ve=await Dx(Number(e),ce);return s(ve),me(Array.isArray(ve.participant_ids)?ve.participant_ids:X),x(We=>We.some(Xe=>Xe.id===ve.id)?We.map(Xe=>Xe.id===ve.id?ve:Xe):[...We,ve]),ve},Ee=async X=>{if(l)try{const ce=await Vp(l.id,{season_id:l.season_id,name:l.name,location:l.location,slots:l.slots,status:l.status,starts_at:l.starts_at,ends_at:l.ends_at??void 0,airfield_ids:l.airfield_ids,participant_ids:X});u(ce)}catch{}},ze=async()=>{const X=Number(he);if(!X||Ne.includes(X))return;v(!0),p(null);const ce=[...Ne,X];try{await Z(ce),we(""),p("Participant added to manifest")}catch(ve){p(ve instanceof Error?ve.message:"Failed to add participant")}finally{v(!1)}},re=async()=>{const X=Number(ue);if(!X||Ne.includes(X)||Ye)return;v(!0),p(null);const ce=[...Ne,X];try{await Z(ce),ge(""),p("Staff added to manifest")}catch(ve){p(ve instanceof Error?ve.message:"Failed to add staff")}finally{v(!1)}},lt=async X=>{const ce=Ne.filter(ve=>ve!==X);v(!0),p(null);try{await Z(ce),p("Participant removed from manifest")}catch(ve){p(ve instanceof Error?ve.message:"Failed to remove participant")}finally{v(!1)}},vt=async X=>{X.preventDefault(),D(!0),p(null);try{const ce=fe.roles&&fe.roles.length>0?fe.roles:["Participant","Skydiver"],ve={full_name:fe.full_name.trim(),email:fe.email.trim(),phone:fe.phone.trim()||void 0,experience_level:fe.experience_level.trim()||void 0,emergency_contact:fe.emergency_contact.trim()||void 0,roles:ce},We=await Da(ve);C(Xe=>[...Xe,We]);const ot=[...Ne,We.id];if(await Z(ot),l){const Xe=Array.isArray(l.participant_ids)?Array.from(new Set([...l.participant_ids,We.id])):[We.id];await Ee(Xe)}K({full_name:"",email:"",phone:"",experience_level:"",emergency_contact:"",roles:["Participant","Skydiver"]}),I(!1),p("Participant created and added")}catch(ce){p(ce instanceof Error?ce.message:"Failed to create participant")}finally{D(!1)}},Nt=async X=>{if(X.preventDefault(),Ye){p("Staff slots full");return}J(!0),p(null);try{const ce=ee.roles&&ee.roles.length>0?ee.roles:["Participant","Skydiver","Staff"],ve={full_name:ee.full_name.trim(),email:ee.email.trim(),phone:ee.phone.trim()||void 0,experience_level:ee.experience_level.trim()||void 0,emergency_contact:ee.emergency_contact.trim()||void 0,roles:ce},We=await Da(ve);C(Xe=>[...Xe,We]);const ot=[...Ne,We.id];if(await Z(ot),l){const Xe=Array.isArray(l.participant_ids)?Array.from(new Set([...l.participant_ids,We.id])):[We.id];await Ee(Xe)}ne({full_name:"",email:"",phone:"",experience_level:"",emergency_contact:"",roles:["Participant","Skydiver","Staff"]}),R(!1),p("Staff participant created and added")}catch(ce){p(ce instanceof Error?ce.message:"Failed to create staff participant")}finally{J(!1)}},Lt=async X=>{X.preventDefault(),v(!0),p(null);try{await Z(Ne),p("Manifest updated")}catch(ce){p(ce instanceof Error?ce.message:"Failed to update manifest")}finally{v(!1)}};return b?r.jsx("p",{className:"muted",children:"Loading manifest"}):y?r.jsx("p",{className:"error-text",children:y}):t?r.jsxs("section",{children:[r.jsxs("header",{className:"page-header",children:[r.jsx("div",{children:r.jsxs("h2",{children:["Load ",t.load_number]})}),r.jsx("button",{className:"ghost",type:"button",onClick:()=>n(-1),children:"Back"})]}),r.jsx("article",{className:"card",children:r.jsxs("form",{className:"form-grid",onSubmit:Lt,children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Event"}),r.jsxs("select",{value:ae.event_id,onChange:X=>de(ce=>({...ce,event_id:X.target.value})),required:!0,children:[r.jsx("option",{value:"",children:"Select an event"}),a.map(X=>r.jsx("option",{value:X.id,children:X.name},X.id))]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Load number"}),r.jsx("input",{type:"number",min:1,value:ae.load_number,onChange:X=>de(ce=>({...ce,load_number:X.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Capacity"}),r.jsx("input",{type:"number",min:0,value:ae.capacity,onChange:X=>de(ce=>({...ce,capacity:X.target.value})),placeholder:"Optional"})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Staff slots"}),r.jsx("input",{type:"number",min:0,value:ae.staff_slots,onChange:X=>de(ce=>({...ce,staff_slots:X.target.value}))})]}),r.jsxs("label",{className:"form-field",style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Notes"}),r.jsx("input",{type:"text",value:ae.notes,onChange:X=>de(ce=>({...ce,notes:X.target.value})),placeholder:"Optional notes"})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"submit",className:"primary",disabled:m,children:m?"Saving":"Save"}),E&&r.jsx("span",{className:"muted",children:E})]})]})}),r.jsxs("article",{className:"card",children:[r.jsxs("header",{className:"card-header",children:[r.jsx("div",{children:r.jsx("h3",{children:"Participants"})}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsxs("span",{className:"badge neutral",children:[G.length," total"]}),$&&r.jsx("span",{className:"badge danger",children:"FULL"})]})]}),G.length===0?r.jsx("p",{className:"muted",children:"No participants assigned to this load."}):r.jsx("ul",{className:"status-list",style:{maxHeight:"24rem",overflowY:"auto"},children:G.map(X=>{const ce=_.find(ve=>ve.id===X);return r.jsxs("li",{children:[r.jsxs(nt,{to:`/participants/${X}`,className:"card-link",style:{flex:1},children:[r.jsx("strong",{children:W(X)}),r.jsx("div",{className:"muted",children:(ce==null?void 0:ce.email)||"No email on file"}),r.jsxs("div",{className:"muted",children:["Experience: ",(ce==null?void 0:ce.experience_level)||"Not provided"]})]}),r.jsx("button",{type:"button",className:"ghost danger",onClick:()=>lt(X),disabled:m,children:"Remove"})]},X)})}),!$&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"form-grid",style:{marginTop:"1rem"},children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Select participant"}),r.jsxs("select",{value:he,onChange:X=>we(X.target.value),children:[r.jsx("option",{value:"",children:"Choose a participant"}),je.map(X=>r.jsxs("option",{value:X.id,children:[X.full_name," (",X.email||"No email",")"]},X.id))]})]}),r.jsx("div",{className:"form-actions",children:r.jsx("button",{type:"button",className:"primary",onClick:ze,disabled:!he||m,children:"Add"})})]}),!k&&r.jsx("div",{className:"form-actions",style:{marginTop:"1rem"},children:r.jsx("button",{type:"button",className:"ghost",onClick:()=>I(!0),children:"Create new participant"})})]}),!$&&k&&r.jsxs("form",{className:"form-grid",style:{marginTop:"1rem"},onSubmit:vt,children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Full name"}),r.jsx("input",{type:"text",value:fe.full_name,onChange:X=>K(ce=>({...ce,full_name:X.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Email"}),r.jsx("input",{type:"email",value:fe.email,onChange:X=>K(ce=>({...ce,email:X.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Phone"}),r.jsx("input",{type:"text",value:fe.phone,onChange:X=>K(ce=>({...ce,phone:X.target.value})),placeholder:"Optional"})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Experience level"}),r.jsx("input",{type:"text",value:fe.experience_level,onChange:X=>K(ce=>({...ce,experience_level:X.target.value})),placeholder:"Optional"})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Emergency contact"}),r.jsx("input",{type:"text",value:fe.emergency_contact,onChange:X=>K(ce=>({...ce,emergency_contact:X.target.value})),placeholder:"Optional"})]}),r.jsxs("div",{className:"form-field",style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Roles"}),r.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:oe.map(X=>{var We;const ce=(We=fe.roles)==null?void 0:We.includes(X),ve=X==="Staff";return r.jsxs("label",{className:"badge neutral",style:{display:"inline-flex",alignItems:"center",gap:"0.35rem"},children:[r.jsx("input",{type:"checkbox",checked:ce,disabled:ve,onChange:ot=>{K(Xe=>{const Ct=new Set(Xe.roles||[]);ot.target.checked?Ct.add(X):Ct.delete(X);const pt=Array.from(Ct);return{...Xe,roles:pt.length>0?pt:["Participant","Skydiver"]}})}}),X]},X)})}),r.jsx("p",{className:"muted",style:{margin:0},children:"Staff cannot be assigned here."})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"submit",className:"primary",disabled:j,children:j?"Adding":"Add participant"}),r.jsx("button",{type:"button",className:"ghost",onClick:()=>I(!1),disabled:j,children:"Cancel"})]})]})]}),r.jsxs("article",{className:"card",children:[r.jsxs("header",{className:"card-header",children:[r.jsx("div",{children:r.jsx("h3",{children:"Staff"})}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsxs("span",{className:"badge neutral",children:[Pe.length," staff"]}),Ye&&r.jsx("span",{className:"badge danger",children:"FULL"})]})]}),Pe.length===0?r.jsx("p",{className:"muted",children:"No staff assigned to this load."}):r.jsx("ul",{className:"status-list",style:{maxHeight:"24rem",overflowY:"auto"},children:Pe.map(X=>{const ce=_.find(ve=>ve.id===X);return r.jsxs("li",{children:[r.jsxs(nt,{to:`/participants/${X}`,className:"card-link",style:{flex:1},children:[r.jsx("strong",{children:W(X)}),r.jsx("div",{className:"muted",children:(ce==null?void 0:ce.email)||"No email on file"}),r.jsxs("div",{className:"muted",children:["Experience: ",(ce==null?void 0:ce.experience_level)||"Not provided"]})]}),r.jsx("button",{type:"button",className:"ghost danger",onClick:()=>lt(X),disabled:m,children:"Remove"})]},X)})}),!Ye&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"form-grid",style:{marginTop:"1rem"},children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Select staff"}),r.jsxs("select",{value:ue,onChange:X=>ge(X.target.value),children:[r.jsx("option",{value:"",children:"Choose staff"}),Re.map(X=>r.jsxs("option",{value:X.id,children:[X.full_name," (",X.email||"No email",")"]},X.id))]})]}),r.jsx("div",{className:"form-actions",children:r.jsx("button",{type:"button",className:"primary",onClick:re,disabled:!ue||m,children:"Add"})})]}),!se&&r.jsx("div",{className:"form-actions",style:{marginTop:"1rem"},children:r.jsx("button",{type:"button",className:"ghost",onClick:()=>R(!0),children:"Create new staff"})})]}),!Ye&&se&&r.jsxs("form",{className:"form-grid",style:{marginTop:"1rem"},onSubmit:Nt,children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Full name"}),r.jsx("input",{type:"text",value:ee.full_name,onChange:X=>ne(ce=>({...ce,full_name:X.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Email"}),r.jsx("input",{type:"email",value:ee.email,onChange:X=>ne(ce=>({...ce,email:X.target.value})),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Phone"}),r.jsx("input",{type:"text",value:ee.phone,onChange:X=>ne(ce=>({...ce,phone:X.target.value})),placeholder:"Optional"})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Experience level"}),r.jsx("input",{type:"text",value:ee.experience_level,onChange:X=>ne(ce=>({...ce,experience_level:X.target.value})),placeholder:"Optional"})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Emergency contact"}),r.jsx("input",{type:"text",value:ee.emergency_contact,onChange:X=>ne(ce=>({...ce,emergency_contact:X.target.value})),placeholder:"Optional"})]}),r.jsxs("div",{className:"form-field",style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Roles"}),r.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:oe.map(X=>{var We;const ce=(We=ee.roles)==null?void 0:We.includes(X),ve=X==="Participant"||X==="Skydiver"||X==="Staff";return r.jsxs("label",{className:"badge neutral",style:{display:"inline-flex",alignItems:"center",gap:"0.35rem"},children:[r.jsx("input",{type:"checkbox",checked:ce,disabled:ve,onChange:ot=>{ne(Xe=>{const Ct=new Set(Xe.roles||[]);ot.target.checked?Ct.add(X):Ct.delete(X);const pt=Array.from(Ct);return{...Xe,roles:pt.length>0?pt:["Participant","Skydiver","Staff"]}})}}),X]},X)})}),r.jsx("p",{className:"muted",style:{margin:0},children:"Staff include Participant, Staff, and Skydiver roles by default."})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"submit",className:"primary",disabled:T,children:T?"Adding":"Add staff"}),r.jsx("button",{type:"button",className:"ghost",onClick:()=>R(!1),disabled:T,children:"Cancel"})]})]})]})]}):r.jsx("p",{className:"error-text",children:"Manifest not found."})},rj=()=>{const{eventId:e,accommodationId:n}=Ln(),t=yt(),[s,a]=o.useState(!1),[i,l]=o.useState({name:"",capacity:"",coordinates:"",booked:!1,check_in_at:"",check_out_at:"",notes:""}),[u,d]=o.useState(!0),[x,_]=o.useState(!1),[C,b]=o.useState(null),F=`primary ${s?"saved":""}`,y=x?"Saving":s?"Saved":"Save",S=!i.coordinates.trim(),E=!i.name.trim();o.useEffect(()=>{let j=!1;return(async()=>{if(!(!e||!n)){d(!0),b(null);try{const k=await zp(Number(e),Number(n));if(j)return;l({name:k.name,capacity:String(k.capacity),coordinates:k.coordinates||"",booked:!!k.booked,check_in_at:k.check_in_at||"",check_out_at:k.check_out_at||"",notes:k.notes||""}),a(!1)}catch(k){j||b(k instanceof Error?k.message:"Failed to load accommodation")}finally{j||d(!1)}}})(),()=>{j=!0}},[e,n]);const p=async j=>{if(j.preventDefault(),!(!e||!n)){_(!0),b(null);try{await Up(Number(e),Number(n),{name:i.name.trim(),capacity:Number(i.capacity)||0,coordinates:i.coordinates.trim()||void 0,booked:i.booked,check_in_at:i.check_in_at||void 0,check_out_at:i.check_out_at||void 0,notes:i.notes.trim()||void 0}),a(!0),b("Accommodation updated")}catch(D){b(D instanceof Error?D.message:"Failed to update accommodation")}finally{_(!1)}}},m=async()=>{if(!(!e||!n)&&window.confirm("Delete this accommodation?"))try{await wx(Number(e),Number(n)),t(-1)}catch(j){b(j instanceof Error?j.message:"Failed to delete accommodation")}};if(u)return r.jsx("p",{className:"muted",children:"Loading accommodation"});const v=()=>{s&&a(!1)};return r.jsxs("section",{className:"stack",children:[r.jsxs("header",{className:"page-header",children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",flexWrap:"wrap"},children:[r.jsx("h2",{style:{margin:0},children:"Accommodation"}),r.jsx("span",{className:`badge ${i.booked&&!S?"success":"danger"}`,children:i.booked&&!S?"":"NOT BOOKED"})]}),r.jsxs("div",{className:"card-actions",children:[r.jsx("button",{className:"ghost",type:"button",onClick:()=>t("/logistics/accommodations/new",{state:{copyAccommodation:{event_id:e,name:i.name,capacity:i.capacity,coordinates:i.coordinates,check_in_at:i.check_in_at,check_out_at:i.check_out_at,booked:i.booked,notes:i.notes}}}),children:"Make a copy"}),r.jsx("button",{className:"ghost danger",type:"button",onClick:m,children:"Delete"}),r.jsx("button",{className:"ghost",type:"button",onClick:()=>t(-1),children:"Back"})]})]}),r.jsx("article",{className:"card",children:r.jsxs("form",{className:"form-grid",onSubmit:p,children:[r.jsxs("label",{className:`form-field ${E?"field-missing":""}`,children:[r.jsx("span",{children:"Name"}),r.jsx("input",{type:"text",value:i.name,onChange:j=>{v(),l(D=>({...D,name:j.target.value}))},required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Capacity"}),r.jsx("input",{type:"number",min:0,value:i.capacity,onChange:j=>{v(),l(D=>({...D,capacity:j.target.value}))}})]}),r.jsxs("label",{className:`form-field ${S?"field-missing":""}`,children:[r.jsx("span",{children:"Coordinates (DMS)"}),r.jsxs("div",{className:"input-with-button",children:[r.jsx("input",{type:"text",value:i.coordinates,onChange:j=>{v(),l(D=>({...D,coordinates:j.target.value}))}}),r.jsx("button",{type:"button",className:"ghost",disabled:!i.coordinates.trim(),onClick:()=>{const j=i.coordinates.trim();j&&window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(j)}`,"_blank")},children:"Open in Maps"})]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Booked"}),r.jsxs("div",{className:"checkbox-field",children:[r.jsx("input",{type:"checkbox",checked:i.booked,onChange:j=>{v(),l(D=>({...D,booked:j.target.checked}))}}),r.jsx("span",{children:"Mark as booked"})]})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Check-in"}),r.jsx($t,{value:Ge(i.check_in_at),options:{enableTime:!0,dateFormat:"Y-m-d H:i",time_24hr:!0},onChange:j=>{const D=j[0];v(),l(k=>({...k,check_in_at:D?Bt(D):""}))}})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Check-out"}),r.jsx($t,{value:Ge(i.check_out_at),options:{enableTime:!0,dateFormat:"Y-m-d H:i",time_24hr:!0},onChange:j=>{const D=j[0];v(),l(k=>({...k,check_out_at:D?Bt(D):""}))}})]}),r.jsxs("label",{className:"form-field",style:{gridColumn:"1 / -1"},children:[r.jsx("span",{children:"Notes"}),r.jsx("input",{type:"text",value:i.notes,onChange:j=>{v(),l(D=>({...D,notes:j.target.value}))}})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"submit",className:F,disabled:x||s,children:y}),C&&r.jsx("span",{className:"muted",children:C})]})]})})]})},sj=()=>r.jsx(dx,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:r.jsxs(tx,{children:[r.jsx(at,{path:"/login",element:r.jsx(_x,{})}),r.jsxs(at,{path:"/",element:r.jsx(vx,{}),children:[r.jsx(at,{index:!0,element:r.jsx(Ru,{to:"/events",replace:!0})}),r.jsx(at,{path:"events",element:r.jsx(Vx,{})}),r.jsx(at,{path:"events/new",element:r.jsx(Hx,{})}),r.jsx(at,{path:"events/:eventId",element:r.jsx(J0,{})}),r.jsx(at,{path:"events/:eventId/details",element:r.jsx(j0,{})}),r.jsx(at,{path:"events/:eventId/accommodations/:accommodationId",element:r.jsx(rj,{})}),r.jsx(at,{path:"events/:eventId/innhopps/new",element:r.jsx(df,{})}),r.jsx(at,{path:"events/:eventId/innhopps/:innhoppId",element:r.jsx(df,{})}),r.jsx(at,{path:"airfields/new",element:r.jsx(N0,{})}),r.jsx(at,{path:"airfields/:airfieldId",element:r.jsx(_0,{})}),r.jsx(at,{path:"seasons/new",element:r.jsx(b0,{})}),r.jsx(at,{path:"manifests",element:r.jsx(S0,{})}),r.jsx(at,{path:"manifests/:manifestId",element:r.jsx(nj,{})}),r.jsx(at,{path:"participants",element:r.jsx(w0,{})}),r.jsx(at,{path:"participants/new",element:r.jsx(k0,{})}),r.jsx(at,{path:"participants/:participantId",element:r.jsx(A0,{})}),r.jsx(at,{path:"logistics",element:r.jsx(F0,{})}),r.jsx(at,{path:"logistics/transport",element:r.jsx(D0,{})}),r.jsx(at,{path:"logistics/ground-crew",element:r.jsx(O0,{})}),r.jsx(at,{path:"logistics/ground-crew/new",element:r.jsx($0,{})}),r.jsx(at,{path:"logistics/ground-crew/:groundCrewId",element:r.jsx(L0,{})}),r.jsx(at,{path:"logistics/accommodations",element:r.jsx(R0,{})}),r.jsx(at,{path:"logistics/accommodations/new",element:r.jsx(z0,{})}),r.jsx(at,{path:"logistics/meals",element:r.jsx(V0,{})}),r.jsx(at,{path:"logistics/meals/new",element:r.jsx(W0,{})}),r.jsx(at,{path:"logistics/meals/:mealId",element:r.jsx(H0,{})}),r.jsx(at,{path:"logistics/others",element:r.jsx(K0,{})}),r.jsx(at,{path:"logistics/others/new",element:r.jsx(Y0,{})}),r.jsx(at,{path:"logistics/others/:otherId",element:r.jsx(q0,{})}),r.jsx(at,{path:"logistics/new",element:r.jsx(T0,{})}),r.jsx(at,{path:"logistics/:transportId",element:r.jsx(P0,{})}),r.jsx(at,{path:"logistics/vehicles/:vehicleId",element:r.jsx(X0,{})})]}),r.jsx(at,{path:"*",element:r.jsx(Ru,{to:"/login",replace:!0})})]})});lo.createRoot(document.getElementById("root")).render(r.jsx(Nf.StrictMode,{children:r.jsx(sj,{})}));
